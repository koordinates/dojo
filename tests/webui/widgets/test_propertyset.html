<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:dojo="http://www.dojotoolkit.org/2004/dojoml" xmlns:xlink="http://www.w3.org/1999/xlink" xml:lang="en" lang="en">
	<head>
		<title>Dojo: test of Parse.js and the &lt;propertyset&gt; tag</title>
		<script type="text/javascript">
			// Dojo configuration
			djConfig = { 
				baseRelativePath: "../../../",
				isDebug: true
			};
		</script>
		<script type="text/javascript" src="../../../src/bootstrap1.js"></script>
		<script type="text/javascript" src="../../../src/hostenv_browser.js"></script>
		<script type="text/javascript" src="../../../src/bootstrap2.js"></script>
		<script type="text/javascript">
			dojo.hostenv.loadModule("dojo.xml.Parse");
			dojo.hostenv.loadModule("dojo.webui.Widget");
			dojo.hostenv.loadModule("dojo.webui.widgets.Parse");
		</script>
		<style type="text/css">
			#output {
				font-family:monospace;
				border: 3px solid #000000;
			}
		</style>
		<script type="text/javascript">
			// register a new do-nothing tag
			dojo.webui.widgets.tags["dojo:donothing"] = function(frag, parser){
				//var properties = parser.parseProperties(frag);
				var properties = parser.parseProperties(frag["dojo:donothing"]);
				// now that we've pulled in the propsets that should apply to
				// this tag, lets inspect them
				testPropsets(properties);
			}

			function testPropsets(props){
				for(var x in props){ alert("x: "+x); }
				/*
				alert(props.foo=="bar");
				alert(props["dojo:baz"]);
				*/
			}
		</script>
	</head>
	<body>
		<div dojoType="propertyset" foo="bar">
			<div dojoType="baz" quux="xyzzy"></div>
		</div>
		<div dojoType="donothing" test="foo"></div>
	</body>
</html>
