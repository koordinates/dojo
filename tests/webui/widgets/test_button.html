<html>
	<head>
		<!--[if lt IE 5.5]>
		<script language="JavaScript" type="text/javascript" src="http://burstproject.org/burst/fix_ecma.js"></script>
		<![endif]-->
		<script language="JavaScript" type="text/javascript">
			// Dojo configuration
			djConfig = { 
				baseRelativePath: "../../../",
				isDebug: true
			};
		</script>
		<script language="JavaScript" type="text/javascript" 
			src="../../../src/bootstrap1.js"></script>
		<script language="JavaScript" type="text/javascript" 
			src="../../../src/hostenv_browser.js"></script>
		<script language="JavaScript" type="text/javascript" 
			src="../../../src/bootstrap2.js"></script>
		<!--
		<script language="JavaScript" type="text/javascript" 
			src="../../../release/__package__.js"></script>
		-->
		<script language="JavaScript" type="text/javascript">
			dojo.hostenv.loadModule("dojo.xml.Parse");
			dojo.hostenv.loadModule("dojo.webui.widgets.Parse");
			dojo.hostenv.loadModule("dojo.webui.widgets.Button");
			dojo.hostenv.loadModule("dojo.webui.widgets.HTMLButton");

			dojo.hostenv.modulesLoadedListeners.push(init);

			function init(){
				dj_debug("******************** INIT! **********************");
				// add your on-load logic here
				// var tic = new Date();
				var parser = new dojo.xml.Parse();
				var frag  = parser.parseElement(document.body, null, true);
				/*
				for(var x in frag){ 
					dojo.hostenv.println(x+": "+frag[x]);
				}
				*/
				//outputObjectInfo(frag);
				
				var fragParser = new dojo.webui.widgets.Parse(frag);
				fragParser.createComponents(frag);
				// alert("the whole shooting match: "+((new Date())-tic)+"ms");
			}
			
			function outputObjectInfo(x) {
				for (var y in x) {
					if (typeof x[y] == "object" && x[y] != x.nodeRef) {
						if (!(x instanceof Array && !isNaN(parseInt(y)))) {
							dojo.hostenv.println(y+": "+x[y]);
						}
						outputObjectInfo(x[y]);
					} else {
						dojo.hostenv.println(y+": "+x[y]);
					}
				}
			}
		</script>
	</head>
	<body>
		Check your javascript log; the scripts were all loaded in the head.

		<button id="testDojoButton" dojoType="button" label="this is a test button!" 
			onClick="alert(this.domNode.innerHTML);" onFoo="dojo.hostenv.println('onFoo');">
			you shouldn't be seeing this
		</button>
	</body>
</html>
