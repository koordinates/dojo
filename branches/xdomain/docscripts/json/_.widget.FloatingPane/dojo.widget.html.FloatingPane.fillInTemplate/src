var source = this.getFragNodeRef(frag);
this.domNode.style.cssText = source.style.cssText;
dojo.html.addClass(this.domNode, dojo.html.getClass(source));
if(dojo.render.html.safari){
	document.body.appendChild(this.domNode);
}

 <img src=""> can hang IE!  better get rid of it
if(this.iconSrc==""){
	dojo.dom.removeNode(this.titleBarIcon);
}

if(this.titleBarDisplay!="none"){	
	this.titleBar.style.display="";
	dojo.html.disableSelection(this.titleBar);

	this.titleBarIcon.style.display = (this.iconSrc=="" ? "none" : "");

	this.minimizeAction.style.display= (this.displayMinimizeAction ? "" : "none");
	this.maximizeAction.style.display= 
		(this.displayMaximizeAction && this.windowState!="maximized" ? "" : "none");
	this.restoreAction.style.display= 
		(this.displayMaximizeAction && this.windowState!="normal" ? "" : "none");
	this.closeAction.style.display= (this.displayCloseAction ? "" : "none");

	var drag = new dojo.dnd.HtmlDragMoveSource(this.domNode);	
	if (this.constrainToContainer) {
		drag.constrainTo();
	}
	drag.setDragHandle(this.titleBar);
}

if(this.resizable){
	this.resizeBar.style.display="";
	var rh = dojo.widget.createWidget("ResizeHandle", {targetElmId: this.widgetId, id:this.widgetId+"_resize"});
	this.resizeBar.appendChild(rh.domNode);
}

 make the content pane take all the remaining space
this._setPadding();

 add a drop shadow
if(this.hasShadow){
	this.shadow=new dojo.html.shadow(this.domNode);
}

 Prevent IE bleed-through problem
this.bgIframe = new dojo.html.BackgroundIframe(this.domNode);

if( this.taskBarId ){
	this.taskBarSetup();
}

if (dojo.hostenv.post_load_) {
	this.setInitialWindowState();
} else {
	dojo.addOnLoad(this, "setInitialWindowState");
}
if(dojo.render.html.safari){
	document.body.removeChild(this.domNode);
}

dojo.widget.html.FloatingPane.superclass.fillInTemplate.call(this, args, frag);