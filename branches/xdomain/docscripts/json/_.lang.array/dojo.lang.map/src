var isString = dojo.lang.isString(arr);
if(isString){
	arr = arr.split("");
}
if(dojo.lang.isFunction(obj)&&(!unary_func)){
	 obj: Function
	   unary_func: null
	unary_func = obj;
	obj = dj_global;
}else if(dojo.lang.isFunction(obj) && unary_func){
	 obj: Function
	   unary_func: Object
	 ff 1.5 compat
	var tmpObj = obj;
	obj = unary_func;
	unary_func = tmpObj;
}

if(Array.map){
 	var outArr = Array.map(arr, unary_func, obj);
}else{
	var outArr = [];
	for(var i=0;i<arr.length;++i){
		outArr.push(unary_func.call(obj, arr[i]));
	}
}

if(isString) {
	 arr: String
	return outArr.join("");  
} else {
	 arr: Array
	return outArr;  
}