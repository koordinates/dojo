var http = this.getXmlhttpObject();

if(async_cb){
	http.onreadystatechange = function(){
		if((4==http.readyState)&&(http["status"])){
			if(http.status==200){
				 dojo.debug("LOADED URI: "+uri);
				async_cb(http.responseText);
			}
		}
	}
}

http.open('GET', uri, async_cb ? true : false);
try {
	http.send(null);
} catch (e) {
	if (fail_ok && !async_cb) {
		return null;
	} else {
		throw e;
	}
}
if(async_cb){
	return null;
}

return http.responseText;