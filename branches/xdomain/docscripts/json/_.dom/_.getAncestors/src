var ancestors = [];
var isFunction = dojo.lang.isFunction(filterFunction);
while(node) {
	if (!isFunction || filterFunction(node)) {
		ancestors.push(node);
	}
	if (returnFirstHit && ancestors.length > 0) { return ancestors[0]; }
	
	node = node.parentNode;
}
if (returnFirstHit) { return null; }
return ancestors;