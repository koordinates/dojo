if (text) {
	dojo.dom.replaceChildren(node, document.createTextNode(text));
	return text;
} else {
	var _result = "";
	if (node == null) { return _result; }
	for (var i = 0; i < node.childNodes.length; i++) {
		switch (node.childNodes[i].nodeType) {
			case 1:  ELEMENT_NODE
			case 5:  ENTITY_REFERENCE_NODE
				_result += dojo.dom.textContent(node.childNodes[i]);
				break;
			case 3:  TEXT_NODE
			case 2:  ATTRIBUTE_NODE
			case 4:  CDATA_SECTION_NODE
				_result += node.childNodes[i].nodeValue;
				break;
			default:
				break;
		}
	}
	return _result;
}