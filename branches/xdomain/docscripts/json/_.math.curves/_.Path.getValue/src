var found = false, value = 0;
for(var i = 0; i < ranges.length; i++) {
	var r = ranges[i];
	w(r.join(" ... "));
	if( n >= r[0] && n < r[1] ) {
		var subN = (n - r[0]) / r[2];
		value = curves[i].getValue(subN);
		found = true;
		break;
	}
}

 FIXME: Do we want to assume we're at the end?
if( !found ) {
	value = curves[curves.length-1].getValue(1);
}

for(j = 0; j < i; j++) {
	value = dojo.math.points.translate(value, curves[j].getValue(1));
}
return value;