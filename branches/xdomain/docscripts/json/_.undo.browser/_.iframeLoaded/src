var query = this._getUrlQuery(ifrLoc.href);
if(query == null){ 
	 alert("iframeLoaded");
	 we hit the end of the history, so we should go back
	if(this.historyStack.length == 1){
		this.handleBackButton();
	}
	return;
}
if(this.moveForward){
	 we were expecting it, so it's not either a forward or backward movement
	this.moveForward = false;
	return;
}

Check the back stack first, since it is more likely.
Note that only one step back or forward is supported.
if(this.historyStack.length >= 2 && query == this._getUrlQuery(this.historyStack[this.historyStack.length-2].url)){
	this.handleBackButton();
}
else if(this.forwardStack.length > 0 && query == this._getUrlQuery(this.forwardStack[this.forwardStack.length-1].url)){
	this.handleForwardButton();
}