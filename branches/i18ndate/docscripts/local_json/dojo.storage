{"dojo.storage._":{"meta":{"requires":{"common":["dojo.storage"],"browser":["dojo.storage.browser"],"dashboard":["dojo.storage.dashboard"]}}},"dojo.storage.browser":{"meta":{"requires":{"common":["dojo.storage","dojo.flash","dojo.json","dojo.uri.*"]},"functions":{"dojo.storage.browser.FlashStorageProvider":{"_":{"meta":{"summary":"","src":"","inherits":["dojo.storage"],"protovariables":{"initialized":"","_available":"","_statusHandler":""},"this_variables":["_available","_statusHandler","initialized"]}}},"loadedListener":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.storage._flashLoaded();"}}},"dojo.storage.browser.FlashStorageProvider.initialize":{"_":{"meta":{"summary":"","src":"\t\tif(djConfig[\"disableFlashStorage\"] == true){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t\/\/ initialize our Flash\n\t\tvar loadedListener = function(){\n\t\t\tdojo.storage._flashLoaded();\n\t\t}\n\t\tdojo.flash.addLoadedListener(loadedListener);\n\t\tvar swfloc6 = dojo.uri.dojoUri(\"Storage_version6.swf\").toString();\n\t\tvar swfloc8 = dojo.uri.dojoUri(\"Storage_version8.swf\").toString();\n\t\tdojo.flash.setSwf({flash6: swfloc6, flash8: swfloc8, visible: false});","this":"dojo.storage.browser.FlashStorageProvider"}}},"dojo.storage.browser.FlashStorageProvider.flash6":{"_":{"meta":{"summary":"","src":"\t\tif(djConfig[\"disableFlashStorage\"] == true){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t\/\/ initialize our Flash\n\t\tvar loadedListener = function(){\n\t\t\tdojo.storage._flashLoaded();\n\t\t}\n\t\tdojo.flash.addLoadedListener(loadedListener);\n\t\tvar swfloc6 = dojo.uri.dojoUri(\"Storage_version6.swf\").toString();\n\t\tvar swfloc8 = dojo.uri.dojoUri(\"Storage_version8.swf\").toString();\n\t\tdojo.flash.setSwf({flash6: swfloc6, flash8: swfloc8, visible: false});","this":"dojo.storage.browser.FlashStorageProvider"}}},"dojo.storage.browser.FlashStorageProvider.isAvailable":{"_":{"meta":{"summary":"","src":"\t\tif(djConfig[\"disableFlashStorage\"] == true){\n\t\t\tthis._available = false;\n\t\t}\n\t\t\n\t\treturn this._available;","this":"dojo.storage.browser.FlashStorageProvider"}}},"dojo.storage.browser.FlashStorageProvider.setNamespace":{"_":{"meta":{"summary":"","parameters":{"ns":{"type":""}},"src":"\t\tthis[\"namespace\"] = ns;","this":"dojo.storage.browser.FlashStorageProvider"}}},"dojo.storage.browser.FlashStorageProvider.put":{"_":{"meta":{"summary":"","parameters":{"key":{"type":""},"value":{"type":""},"resultsHandler":{"type":""}},"src":"\t\tif(this.isValidKey(key) == false){\n\t\t\tdojo.raise(\"Invalid key given: \" + key);\n\t\t}\n\t\t\t\n\t\tthis._statusHandler = resultsHandler;\n\t\t\n\t\t\/\/ serialize the value\n\t\t\/\/ Handle strings differently so they have better performance\n\t\tif(dojo.lang.isString(value)){\n\t\t\tvalue = \"string:\" + value;\n\t\t}else{\n\t\t\tvalue = dojo.json.serialize(value);\n\t\t}\n\t\t\n\t\tdojo.flash.comm.put(key, value, this[\"namespace\"]);","this":"dojo.storage.browser.FlashStorageProvider"}}},"dojo.storage.browser.FlashStorageProvider.get":{"_":{"meta":{"summary":"","parameters":{"key":{"type":""}},"src":"\t\tif(this.isValidKey(key) == false){\n\t\t\tdojo.raise(\"Invalid key given: \" + key);\n\t\t}\n\t\t\n\t\tvar results = dojo.flash.comm.get(key, this[\"namespace\"]);\n\n\t\tif(results == \"\"){\n\t\t\treturn null;\n\t\t}\n    \n\t\t\/\/ destringify the content back into a \n\t\t\/\/ real JavaScript object\n\t\t\/\/ Handle strings differently so they have better performance\n\t\tif(!dojo.lang.isUndefined(results) && results != null \n\t\t\t && \/^string:\/.test(results)){\n\t\t\tresults = results.substring(\"string:\".length);\n\t\t}else{\n\t\t\tresults = dojo.json.evalJson(results);\n\t\t}\n    \n\t\treturn results;","this":"dojo.storage.browser.FlashStorageProvider"}}},"dojo.storage.browser.FlashStorageProvider.string":{"_":{"meta":{"summary":"","parameters":{"key":{"type":""}},"src":"\t\tif(this.isValidKey(key) == false){\n\t\t\tdojo.raise(\"Invalid key given: \" + key);\n\t\t}\n\t\t\n\t\tvar results = dojo.flash.comm.get(key, this[\"namespace\"]);\n\n\t\tif(results == \"\"){\n\t\t\treturn null;\n\t\t}\n    \n\t\t\/\/ destringify the content back into a \n\t\t\/\/ real JavaScript object\n\t\t\/\/ Handle strings differently so they have better performance\n\t\tif(!dojo.lang.isUndefined(results) && results != null \n\t\t\t && \/^string:\/.test(results)){\n\t\t\tresults = results.substring(\"string:\".length);\n\t\t}else{\n\t\t\tresults = dojo.json.evalJson(results);\n\t\t}\n    \n\t\treturn results;","this":"dojo.storage.browser.FlashStorageProvider"}}},"dojo.storage.browser.FlashStorageProvider.getKeys":{"_":{"meta":{"summary":"","src":"\t\tvar results = dojo.flash.comm.getKeys(this[\"namespace\"]);\n\t\t\n\t\tif(results == \"\"){\n\t\t\treturn [];\n\t\t}\n\n\t\t\/\/ the results are returned comma seperated; split them\n\t\treturn results.split(\",\");","this":"dojo.storage.browser.FlashStorageProvider"}}},"dojo.storage.browser.FlashStorageProvider.clear":{"_":{"meta":{"summary":"","src":"\t\tdojo.flash.comm.clear(this[\"namespace\"]);","this":"dojo.storage.browser.FlashStorageProvider"}}},"dojo.storage.browser.FlashStorageProvider.remove":{"_":{"meta":{"summary":"","parameters":{"key":{"type":""}},"src":"","this":"dojo.storage.browser.FlashStorageProvider"}}},"dojo.storage.browser.FlashStorageProvider.isPermanent":{"_":{"meta":{"summary":"","src":"\t\treturn true;","this":"dojo.storage.browser.FlashStorageProvider"}}},"dojo.storage.browser.FlashStorageProvider.getMaximumSize":{"_":{"meta":{"summary":"","src":"\t\treturn dojo.storage.SIZE_NO_LIMIT;","this":"dojo.storage.browser.FlashStorageProvider"}}},"dojo.storage.browser.FlashStorageProvider.hasSettingsUI":{"_":{"meta":{"summary":"","src":"\t\treturn true;","this":"dojo.storage.browser.FlashStorageProvider"}}},"dojo.storage.browser.FlashStorageProvider.showSettingsUI":{"_":{"meta":{"summary":"","src":"\t\tdojo.flash.comm.showSettings();\n\t\tdojo.flash.obj.setVisible(true);\n\t\tdojo.flash.obj.center();","this":"dojo.storage.browser.FlashStorageProvider"}}},"dojo.storage.browser.FlashStorageProvider.hideSettingsUI":{"_":{"meta":{"summary":"","src":"\t\t\/\/ call anyone who wants to know the dialog is\n\t\t\/\/ now hidden\n\t\tif(dojo.storage.onHideSettingsUI != null &&\n\t\t\t!dojo.lang.isUndefined(dojo.storage.onHideSettingsUI)){\n\t\t\tdojo.storage.onHideSettingsUI.call(null);\t\n\t\t}","this":"dojo.storage.browser.FlashStorageProvider"}}},"dojo.storage.browser.FlashStorageProvider.getType":{"_":{"meta":{"summary":"","src":"\t\treturn \"dojo.storage.FlashStorageProvider\";","this":"dojo.storage.browser.FlashStorageProvider"}}},"dojo.storage.browser.FlashStorageProvider._flashLoaded":{"_":{"meta":{"summary":"","src":"\t\tthis.initialized = true;\n\n\t\t\/\/ indicate that this storage provider is now loaded\n\t\tdojo.storage.manager.loaded();","this":"dojo.storage.browser.FlashStorageProvider"}}},"dojo.storage.browser.FlashStorageProvider._onStatus":{"_":{"meta":{"summary":"","parameters":{"statusResult":{"type":""},"key":{"type":""}},"src":"\t\tvar ds = dojo.storage;\n\t\tvar dfo = dojo.flash.obj;\n\t\t\/\/dojo.debug(\"_onStatus, statusResult=\"+statusResult+\", key=\"+key);\n\t\tif(statusResult == ds.PENDING){\n\t\t\tdfo.center();\n\t\t\tdfo.setVisible(true);\n\t\t}else{\n\t\t\tdfo.setVisible(false);\n\t\t}\n\t\t\n\t\tif((!dj_undef(\"_statusHandler\", ds))&&(ds._statusHandler != null)){\n\t\t\tds._statusHandler.call(null, statusResult, key);\t\t\n\t\t}","this":"dojo.storage.browser.FlashStorageProvider"}}}}}},"dojo.storage.dashboard":{"meta":{"requires":{"common":["dojo.storage","dojo.json"]},"functions":{"dojo.storage.dashboard.StorageProvider":{"_":{"meta":{"summary":"","src":"\tthis.initialized = false;","this_variables":["initialized","initialized"],"inherits":["dojo.storage.StorageProvider"]}}},"dojo.storage.dashboard.StorageProvider.storageOnLoad":{"_":{"meta":{"summary":"","src":"\t\tthis.initialized = true;","this":"dojo.storage.dashboard.StorageProvider"}}},"dojo.storage.dashboard.StorageProvider.set":{"_":{"meta":{"summary":"","parameters":{"key":{"type":""},"value":{"type":""},"ns":{"type":""}},"src":"\t\tif (ns && widget.system){\n\t\t\twidget.system(\"\/bin\/mkdir \" + ns);\n\t\t\tvar system = widget.system(\"\/bin\/echo \" + value + \" >\" + ns + \"\/\" + key);\n\t\t\tif(system.errorString){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\treturn widget.setPreferenceForKey(dojo.json.serialize(value), key);","this":"dojo.storage.dashboard.StorageProvider"}}},"dojo.storage.dashboard.StorageProvider.get":{"_":{"meta":{"summary":"","parameters":{"key":{"type":""},"ns":{"type":""}},"src":"\t\tif (ns && widget.system) {\n\t\t\tvar system = widget.system(\"\/bin\/cat \" + ns + \"\/\" + key);\n\t\t\tif(system.errorString){\n\t\t\t\treturn \"\";\n\t\t\t}\n\t\t\treturn system.outputString;\n\t\t}\n\n\t\treturn dojo.json.evalJson(widget.preferenceForKey(key));","this":"dojo.storage.dashboard.StorageProvider"}}}}}},"dojo.storage":{"meta":{"requires":{"common":["dojo.lang.*","dojo.event.*"]},"functions":{"dojo.storage":{"_":{"meta":{"summary":"","protovariables":{"SUCCESS":"","FAILED":"","PENDING":"","SIZE_NOT_AVAILABLE":"","SIZE_NO_LIMIT":"","onHideSettingsUI":""},"parameters":{"rawNode":{"type":""}}}}},"dojo.storage.initialize":{"_":{"meta":{"summary":" Allows this storage provider to initialize itself. This is called after the page has finished loading, so you can not do document.writes().","src":"","this":"null"}}},"dojo.storage.isAvailable":{"_":{"meta":{"summary":" Returns whether this storage provider is available on this platform.","src":"","this":"null"}}},"dojo.storage.put":{"_":{"meta":{"summary":" Puts a key and value into this storage system.","parameters":{"key":{"type":"string"},"value":{"type":"object"},"resultsHandler":{"type":"function"}},"src":"","this":"null"}}},"dojo.storage.get":{"_":{"meta":{"summary":" Gets the value with the given key. Returns null if this key is not in the storage system.","parameters":{"key":{"type":"string"}},"src":"","this":"null"}}},"dojo.storage.hasKey":{"_":{"meta":{"summary":"Determines whether the storage has the given key.","parameters":{"key":{"type":"string"}},"src":"","this":"null"}}},"dojo.storage.clear":{"_":{"meta":{"summary":" Completely clears this storage system of all of it's values and keys.","src":"","this":"null"}}},"dojo.storage.remove":{"_":{"meta":{"summary":"","parameters":{"key":{"type":""}},"src":"\t\tdojo.unimplemented(\"dojo.storage.remove\");","this":"null"}}},"dojo.storage.isPermanent":{"_":{"meta":{"summary":" Returns whether this storage provider's values are persisted when this platform is shutdown.","src":"","this":"null"}}},"dojo.storage.getMaximumSize":{"_":{"meta":{"summary":"","src":"\t\tdojo.unimplemented(\"dojo.storage.getMaximumSize\");","this":"null"}}},"dojo.storage.hasSettingsUI":{"_":{"meta":{"summary":"Determines whether this provider has a settings UI.","src":"","this":"null"}}},"dojo.storage.showSettingsUI":{"_":{"meta":{"summary":"If this provider has a settings UI, it is shown.","src":"","this":"null"}}},"dojo.storage.hideSettingsUI":{"_":{"meta":{"summary":"If this provider has a settings UI, hides it.","src":"","this":"null"}}},"dojo.storage.getType":{"_":{"meta":{"summary":" The provider name as a string, such as \"dojo.storage.FlashStorageProvider\".","src":"","this":"null"}}},"dojo.storage.isValidKey":{"_":{"meta":{"summary":" Subclasses can call this to ensure that the key given is valid in a consistent way across different storage providers. We use the lowest common denominator for key values allowed: only letters, numbers, and underscores are allowed. No spaces.","parameters":{"keyName":{"type":"string"}},"src":"\t\t\treturn false;\n\t\t}\n\t\t\t\n\t\treturn \/^[0-9A-Za-z_]*$\/.test(keyName);","this":"null"}}},"dojo.storage.manager.initialize":{"_":{"meta":{"summary":" Initializes the storage system and autodetects the best storage provider we can provide on this platform","src":""}}},"dojo.storage.manager.register":{"_":{"meta":{"summary":" Registers the existence of a new storage provider; used by subclasses to inform the manager of their existence.","parameters":{"name":{"type":"string"},"instance":{"type":"Object"}},"src":"\t\tthis.providers[name] = instance;"}}},"dojo.storage.manager.setProvider":{"_":{"meta":{"summary":" Instructs the storageManager to use the given storage class for all storage requests.","parameters":{"storageClass":{"type":""}},"description":" Example: dojo.storage.setProvider( dojo.storage.browser.IEStorageProvider)","src":"\t\t\/\/ summary:\n\t\t\/\/\t\tInstructs the storageManager to use the given storage class for\n\t\t\/\/\t\tall storage requests.\n\t\t\/\/ description:\n\t\t\/\/\t\tExample:\n\t\t\/\/\t\t\tdojo.storage.setProvider(\n\t\t\/\/\t\t\t\tdojo.storage.browser.IEStorageProvider)"}}},"dojo.storage.manager.autodetect":{"_":{"meta":{"summary":" Autodetects the best possible persistent storage provider available on this platform. already finished","src":"\t\t\treturn;\n\t\t\t\n\t\t\/\/ go through each provider, seeing if it can be used\n\t\tvar providerToUse = null;\n\t\tfor(var i = 0; i < this.providers.length; i++) {\n\t\t\tproviderToUse = this.providers[i];\n\t\t\tif(providerToUse.isAvailable()){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\t\n\t\t\n\t\tif(providerToUse == null){ \/\/ no provider available\n\t\t\tthis.initialized = true;\n\t\t\tthis.available = false;\n\t\t\tthis.currentProvider = null;\n\t\t\tdojo.raise(\"No storage provider found for this platform\");\n\t\t}\n\t\t\t\n\t\t\/\/ create this provider and copy over it's properties\n\t\tthis.currentProvider = providerToUse;\n\t  \tfor(var i in providerToUse){\n\t  \t\tdojo.storage[i] = providerToUse[i];\n\t\t}\n\t\tdojo.storage.manager = this;\n\t\t\n\t\t\/\/ have the provider initialize itself\n\t\tdojo.storage.initialize();\n\t\t\n\t\tthis.initialized = true;\n\t\tthis.available = true;","this_variables":["initialized","available","currentProvider"]}}},"dojo.storage.manager.isAvailable":{"_":{"meta":{"summary":"Returns whether any storage options are available.","src":""}}},"dojo.storage.manager.isInitialized":{"_":{"meta":{"summary":" Returns whether the storage system is initialized and ready to be used. FIXME: This should _really_ not be in here, but it fixes a bug","src":"\t\t\treturn false;\n\t\t}else{\n\t\t\treturn this.initialized;\n\t\t}"}}},"dojo.storage.manager.supportsProvider":{"_":{"meta":{"summary":"Determines if this platform supports the given storage provider.","parameters":{"storageClass":{"type":"string"}},"description":" Example: dojo.storage.manager.supportsProvider( \"dojo.storage.browser.InternetExplorerStorageProvider\"); construct this class dynamically","src":"\t\t\t\/\/ dynamically call the given providers class level isAvailable()\n\t\t\t\/\/ method\n\t\t\tvar provider = eval(\"new \" + storageClass + \"()\");\n\t\t\tvar results = provider.isAvailable();\n\t\t\tif(results == null || typeof results == \"undefined\")\n\t\t\t\treturn false;\n\t\t\treturn results;\n\t\t}catch (exception){\n\t\t\tdojo.debug(\"exception=\"+exception);\n\t\t\treturn false;\n\t\t}"}}},"dojo.storage.manager.getProvider":{"_":{"meta":{"summary":"","src":"\t\treturn this.currentProvider;"}}},"dojo.storage.manager.loaded":{"_":{"meta":{"summary":" The storage provider should call this method when it is loaded and ready to be used. Clients who will use the provider will connect to this method to know when they can use the storage system:","src":"\t\t\/\/ summary:\n\t\t\/\/\t\tThe storage provider should call this method when it is loaded\n\t\t\/\/\t\tand ready to be used. Clients who will use the provider will\n\t\t\/\/\t\tconnect to this method to know when they can use the storage\n\t\t\/\/\t\tsystem:"}}}}}}}