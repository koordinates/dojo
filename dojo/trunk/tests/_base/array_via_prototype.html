<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
	"http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<title>testing array iteration extensions in Safari3</title>
		<style type="text/css">
			@import "../../resources/dojo.css";
		</style>
		<script type="text/javascript" 
			src="../../dojo.js" 
			djConfig="isDebug: true"></script>
		<script type="text/javascript">
			dojo.require("doh.runner");
			
			function updateStats(t) {
				dojo.byId("total").innerHTML = t.total;
				dojo.byId("average").innerHTML = t.average;
			}
			
			// This is a set of tests that work the forEach and map array iteration
			// methods via a web browser. This was initially created to test said
			// methods in Safari3, but it should be useable by any other browser.
			
			dojo.addOnLoad(function(){
				var data = [];
				for(var i = 0; i < 100; i++) {
					data[i] = i;
				}
				doh.register("t", [
					function reduceTest(t) {
						var total = 0;
						dojo.forEach(data, function(n) { total += n; });
						updateStats({ total: total, average: total / data.length });
						t.is(4950, total);
					},
					function squareTest(t) {
						var squares = dojo.map(data, function(n) { return n*n; });
						var indexSquares = dojo.map(data, function(n, i) { return i*i; });
						t.is(squares, indexSquares); 
					}
				]);
				doh.run();
			});
		</script>
	</head>
	<body>
		<div>Total: <span id="total"></span></div>
		<div>Average: <span id="average"></span></div>
	</body>
</html>
