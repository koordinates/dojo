var src = new RegExp('<script.*?src=".*?"');
var repl = new RegExp('<script.*?src="');
var matches = src.exec(content);
var semaphore = 0;
	   
if (matches != null)
{
	for (i = 0; i < matches.length; i++)
	{
		 get the src of the script
		var scriptSrc = matches[i].replace(repl, '');
		scriptSrc = scriptSrc.substring(0, scriptSrc.length-1);
	
		 this evals remote scripts
		dojo.io.bind({
			url:      scriptSrc,
			load:     function(type, evaldObj) { do nothing  },
			error:    function(type, error) {alert(type); alert(error);  do nothing  },
			mimetype: "text/javascript",
			sync:     true
		});
	}   
}
	
 Remove the script tags we matched
repl = new RegExp('<script.*?src=".*?".*?</script>');
content = content.replace(repl, '');

 Next, handle inline scripts

 Clean up content: remove inline script  comments
repl = new RegExp('.*?$', 'gm');
content = content.replace(repl, '\n');

 Clean up content: remove carraige returns
repl = new RegExp('[\n\r]', 'g');
content = content.replace(repl, ' ');
	   
 Match anything inside <script> tags
src = new RegExp('<script.*?</script>', 'g');
matches = content.match(src);

 For each match that is found...
if (matches != null)
{
	for (i = 0; i < matches.length; i++)
	{
		 Remove begin tag
		var repl = new RegExp('<script.*?>', 'gm');
		var script = matches[i].replace(repl, '');

		 Remove end tag
		repl = new RegExp('</script>', 'gm');
		script = script.replace(repl, '');
	
		 Execute commands
		eval(script);
	}   
}
return content;