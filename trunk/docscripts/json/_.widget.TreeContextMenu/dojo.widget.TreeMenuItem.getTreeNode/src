var menu = this;

while (! (menu instanceof dojo.widget.TreeContextMenu) ) {
	menu = menu.parent;
}

var source = menu.getTopOpenEvent().target;

while (!source.getAttribute('treeNode') && source.tagName != 'body') {
	source = source.parentNode;
}
if (source.tagName == 'body') {
	dojo.raise("treeNode not detected");
}
var treeNode = dojo.widget.manager.getWidgetById(source.getAttribute('treeNode'));

return treeNode;