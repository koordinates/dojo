var result = [];
var stack = [this];
var elem;
while (elem = stack.pop()){
	result.push(elem);
	dojo.lang.forEach(elem.children, function(elem) { stack.push(elem); });
}
return result;