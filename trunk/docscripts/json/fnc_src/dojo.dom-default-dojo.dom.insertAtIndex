var siblingNodes = containingNode.childNodes;

 if there aren't any kids yet, just add it to the beginning

if (!siblingNodes.length){
	containingNode.appendChild(node);
	return true;
}

 otherwise we need to walk the childNodes
 and find our spot

var after = null;

for(var i=0; i<siblingNodes.length; i++){

	var sibling_index = siblingNodes.item(i)["getAttribute"] ? parseInt(siblingNodes.item(i).getAttribute("dojoinsertionindex")) : -1;

	if (sibling_index < insertionIndex){
		after = siblingNodes.item(i);
	}
}

if (after){
	 add it after the node in {after}

	return dojo.dom.insertAfter(node, after);
}else{
	 add it to the start

	return dojo.dom.insertBefore(node, siblingNodes.item(0));
}