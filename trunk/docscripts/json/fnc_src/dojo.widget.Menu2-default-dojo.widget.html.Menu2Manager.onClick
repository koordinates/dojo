if (!this.currentMenu){ return; }

var scrolloffset = dojo.html.getScrollOffset();

var x = e.clientX + scrolloffset[0];
var y = e.clientY + scrolloffset[1];

var m = this.currentMenu;

 starting from the base menu, perform a hit test
 and exit when one succeeds

while (m){

	if (m.isPointInMenu(x, y)){

		return;
	}

	m = m.currentSubmenu;
}

 Also, if user clicked the button that opened this menu, then
 that button will send the menu a close() command, so this code
 shouldn't try to close the menu.  Closing twice messes up animation.
if (this.currentButton && dojo.html.overElement(this.currentButton, e)){
	return;
}

 the click didn't fall within the open menu tree
 so close it

this.currentMenu.close();