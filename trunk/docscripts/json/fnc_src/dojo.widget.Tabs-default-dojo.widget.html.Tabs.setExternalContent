var node = document.getElementById(panel.id);
node.innerHTML = "Loading...";

var extract = this.extractContent;
var parse = this.parseContent;

dojo.io.bind({
	url: url,
	useCache: useCache,
	preventCache: preventCache,
	mimetype: "text/html",
	handler: function(type, data, e) {
		if(type == "load") {
			if(extract) {
				var matches = data.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);
				if(matches) { data = matches[1]; }
			}
			node.innerHTML = data;
			panel.isLoaded = true;
			if(parse) {
				var parser = new dojo.xml.Parse();
				var frag = parser.parseElement(node, null, true);
				dojo.widget.getParser().createComponents(frag);
			}
		} else {
			node.innerHTML = "Error loading '" + panel.url + "' (" + e.status + " " + e.statusText + ")";
		}
	}
});