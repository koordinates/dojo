dojo.html.clearSelection();

this.scrollOffset = {
	top: dojo.html.getScrollTop(),  document.documentElement.scrollTop,
	left: dojo.html.getScrollLeft()  document.documentElement.scrollLeft
};

this.dragStartPosition = {top: dojo.style.getAbsoluteY(this.domNode, true) + this.scrollOffset.top,
	left: dojo.style.getAbsoluteX(this.domNode, true) + this.scrollOffset.left};

this.dragOffset = {top: this.dragStartPosition.top - e.clientY,
	left: this.dragStartPosition.left - e.clientX};

this.dragClone = this.createDragNode();

 		if ((this.domNode.parentNode.nodeName.toLowerCase() == 'body') || (dojo.style.getComputedStyle(this.domNode.parentNode,"position") == "static")) {
	this.parentPosition = {top: 0, left: 0};
} else {
	this.parentPosition = {top: dojo.style.getAbsoluteY(this.domNode.parentNode, true),
		left: dojo.style.getAbsoluteX(this.domNode.parentNode,true)};
}

if (this.constrainToContainer) {
	this.constraints = this.getConstraints();
}

 set up for dragging
with(this.dragClone.style){
	position = "absolute";
	top = this.dragOffset.top + e.clientY + "px";
	left = this.dragOffset.left + e.clientX + "px";
}

document.body.appendChild(this.dragClone);