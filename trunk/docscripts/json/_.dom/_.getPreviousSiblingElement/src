if(!node) { return null; }
if(tagName) { tagName = tagName.toLowerCase(); }
do {
	node = node.previousSibling;
} while(node && node.nodeType != dojo.dom.ELEMENT_NODE);

if(node && tagName && tagName.toLowerCase() != node.tagName.toLowerCase()) {
	return dojo.dom.prevElement(node, tagName);
}
return node;