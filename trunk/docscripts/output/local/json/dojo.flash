{"dojo.flash":{"meta":{"requires":{"common":["dojo.string.*","dojo.uri.*","dojo.html.common"]},"functions":{"dojo.flash.Info":{"meta":{"summary":"","src":" if(dojo.render.html.ie){\n\t\tdocument.writeln('<script language=\"VBScript\" type=\"text\/vbscript\"\\>');\n\t\tdocument.writeln('Function VBGetSwfVer(i)');\n\t\tdocument.writeln('  on error resume next');\n\t\tdocument.writeln('  Dim swControl, swVersion');\n\t\tdocument.writeln('  swVersion = 0');\n\t\tdocument.writeln('  set swControl = CreateObject(\"ShockwaveFlash.ShockwaveFlash.\" + CStr(i))');\n\t\tdocument.writeln('  if (IsObject(swControl)) then');\n\t\tdocument.writeln('    swVersion = swControl.GetVariable(\"$version\")');\n\t\tdocument.writeln('  end if');\n\t\tdocument.writeln('  VBGetSwfVer = swVersion');\n\t\tdocument.writeln('End Function');\n\t\tdocument.writeln('<\/script\\>');\n\t}\n\tthis._detectVersion();\n\tthis._detectCommunicationVersion();"}},"dojo.flash.Embed":{"meta":{"summary":"","parameters":{"visible":{"type":""}},"src":" this._visible = visible;","instance_variables":["_visible"]}},"dojo.flash.Communicator":{"meta":{"summary":"","src":" if(dojo.flash.useFlash6()){\n\t\tthis._writeFlash6();\n\t}else if (dojo.flash.useFlash8()){\n\t\tthis._writeFlash8();\n\t}"}},"callFunc":{"meta":{"summary":"","src":" \t\treturn dojo.flash.comm._call(functionName, arguments);"}},"wrapperCall":{"meta":{"summary":"","src":" \t\tvar methodArgs = new Array(arguments.length);\n\t\t\tfor(var i = 0; i < arguments.length; i++){\n\t\t\t\tmethodArgs[i] = arguments[i];\n\t\t\t}\n\t\t\treturn dojo.flash.comm._execFlash(methodName, methodArgs);"}},"dojo.flash.Install":{"meta":{"summary":"","src":""}},"dojo.flash.setSwf":{"meta":{"summary":"","parameters":{"fileInfo":{"type":""}},"src":" \tif(fileInfo == null || dojo.lang.isUndefined(fileInfo)){\n\t\t\treturn;\n\t\t}\n\t\tif(fileInfo.flash6 != null && !dojo.lang.isUndefined(fileInfo.flash6)){\n\t\t\tthis.flash6_version = fileInfo.flash6;\n\t\t}\n\t\tif(fileInfo.flash8 != null && !dojo.lang.isUndefined(fileInfo.flash8)){\n\t\t\tthis.flash8_version = fileInfo.flash8;\n\t\t}\n\t\tif(!dojo.lang.isUndefined(fileInfo.visible)){\n\t\t\tthis._visible = fileInfo.visible;\n\t\t}\n\t\t\/\/ initialize ourselves\t\t\n\t\tthis._initialize();","instance_variables":["flash6_version","flash8_version","_visible"]}},"dojo.flash.useFlash6":{"meta":{"summary":"","src":" \tif(this.flash6_version == null){\n\t\t\treturn false;\n\t\t}else if (this.flash6_version != null && dojo.flash.info.commVersion == 6){\n\t\t\t\/\/ if we have a flash 6 version of this SWF, and this browser supports \n\t\t\t\/\/ communicating using Flash 6 features...\n\t\t\treturn true;\n\t\t}else{\n\t\t\treturn false;\n\t\t}","instance_variables":["flash6_version"]}},"dojo.flash.useFlash8":{"meta":{"summary":"","src":" \tif(this.flash8_version == null){\n\t\t\treturn false;\n\t\t}else if (this.flash8_version != null && dojo.flash.info.commVersion == 8){\n\t\t\t\/\/ if we have a flash 8 version of this SWF, and this browser supports\n\t\t\t\/\/ communicating using Flash 8 features...\n\t\t\treturn true;\n\t\t}else{\n\t\t\treturn false;\n\t\t}","instance_variables":["flash8_version"]}},"dojo.flash.addLoadedListener":{"meta":{"summary":"","parameters":{"listener":{"type":""}},"src":" \tthis._loadedListeners.push(listener);"}},"dojo.flash.addInstallingListener":{"meta":{"summary":"","parameters":{"listener":{"type":""}},"src":" \tthis._installingListeners.push(listener);"}},"dojo.flash.loaded":{"meta":{"summary":"","src":" \tdojo.flash.ready = true;\n\t\tif(dojo.flash._loadedListeners.length > 0){\n\t\t\tfor(var i = 0;i < dojo.flash._loadedListeners.length; i++){\n\t\t\t\tdojo.flash._loadedListeners[i].call(null);\n\t\t\t}\n\t\t}"}},"dojo.flash.installing":{"meta":{"summary":"","src":"  if(dojo.flash._installingListeners.length > 0){\n\t\t\tfor(var i = 0; i < dojo.flash._installingListeners.length; i++){\n\t\t\t\tdojo.flash._installingListeners[i].call(null);\n\t\t\t}\n\t\t}"}},"dojo.flash._initialize":{"meta":{"summary":"","src":" \tvar installer = new dojo.flash.Install();\n\t\tdojo.flash.installer = installer;\n\t\tif(installer.needed() == true){\t\t\n\t\t\tinstaller.install();\n\t\t}else{\n\t\t\t\/\/dojo.debug(\"Writing object out\");\n\t\t\t\/\/ write the flash object into the page\n\t\t\tdojo.flash.obj = new dojo.flash.Embed(this._visible);\n\t\t\tdojo.flash.obj.write(dojo.flash.info.commVersion);\n\t\t\t\/\/ initialize the way we do Flash\/JavaScript communication\n\t\t\tdojo.flash.comm = new dojo.flash.Communicator();\n\t\t}"}},"dojo.flash.Info.prototype.isVersionOrAbove":{"meta":{"summary":"","parameters":{"reqMajorVer":{"type":""},"reqMinorVer":{"type":""},"reqVer":{"type":""}},"src":" \treqVer = parseFloat(\".\" + reqVer);\n\t\tif(this.versionMajor >= reqMajorVer && this.versionMinor >= reqMinorVer\n\t\t\t && this.versionRevision >= reqVer){\n\t\t\treturn true;\n\t\t}else{\n\t\t\treturn false;\n\t\t}"}},"dojo.flash.Info.prototype._detectVersion":{"meta":{"summary":"","src":" \tvar versionStr;\n\t\t\/\/ loop backwards through the versions until we find the newest version\t\n\t\tfor(var testVersion = 25; testVersion > 0; testVersion--){\n\t\t\tif(dojo.render.html.ie){\n\t\t\t\tversionStr = VBGetSwfVer(testVersion);\n\t\t\t}else{\n\t\t\t\tversionStr = this._JSFlashInfo(testVersion);\t\t\n\t\t\t}\n\t\t\tif(versionStr == -1 ){\n\t\t\t\tthis.capable = false; \n\t\t\t\treturn;\n\t\t\t}else if(versionStr != 0){\n\t\t\t\tvar versionArray;\n\t\t\t\tif(dojo.render.html.ie){\n\t\t\t\t\tvar tempArray = versionStr.split(\" \");\n\t\t\t\t\tvar tempString = tempArray[1];\n\t\t\t\t\tversionArray = tempString.split(\",\");\n\t\t\t\t}else{\n\t\t\t\t\tversionArray = versionStr.split(\".\");\n\t\t\t\t}\n\t\t\t\tthis.versionMajor = versionArray[0];\n\t\t\t\tthis.versionMinor = versionArray[1];\n\t\t\t\tthis.versionRevision = versionArray[2];\n\t\t\t\t\/\/ 7.0r24 == 7.24\n\t\t\t\tvar versionString = this.versionMajor + \".\" + this.versionRevision;\n\t\t\t\tthis.version = parseFloat(versionString);\n\t\t\t\tthis.capable = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}","instance_variables":["capable","versionMajor","versionMinor","versionRevision","version"]}},"dojo.flash.Info.prototype._JSFlashInfo":{"meta":{"summary":"","parameters":{"testVersion":{"type":""}},"src":" \tif(navigator.plugins != null && navigator.plugins.length > 0){\n\t\t\tif(navigator.plugins[\"Shockwave Flash 2.0\"] || \n\t\t\t\t navigator.plugins[\"Shockwave Flash\"]){\n\t\t\t\tvar swVer2 = navigator.plugins[\"Shockwave Flash 2.0\"] ? \" 2.0\" : \"\";\n\t\t\t\tvar flashDescription = navigator.plugins[\"Shockwave Flash\" + swVer2].description;\n\t\t\t\tvar descArray = flashDescription.split(\" \");\n\t\t\t\tvar tempArrayMajor = descArray[2].split(\".\");\n\t\t\t\tvar versionMajor = tempArrayMajor[0];\n\t\t\t\tvar versionMinor = tempArrayMajor[1];\n\t\t\t\tif(descArray[3] != \"\"){\n\t\t\t\t\tvar tempArrayMinor = descArray[3].split(\"r\");\n\t\t\t\t}else{\n\t\t\t\t\tvar tempArrayMinor = descArray[4].split(\"r\");\n\t\t\t\t}\n\t\t\t\tvar versionRevision = tempArrayMinor[1] > 0 ? tempArrayMinor[1] : 0;\n\t\t\t\tvar version = versionMajor + \".\" + versionMinor + \".\" \n\t\t\t\t\t\t\t\t\t\t\t+ versionRevision;\n\t\t\t\treturn version;\n\t\t\t}\n\t\t}\n\t\treturn -1;"}},"dojo.flash.Info.prototype._detectCommunicationVersion":{"meta":{"summary":"","src":" \tif(this.capable == false){\n\t\t\tthis.commVersion = null;\n\t\t\treturn;\n\t\t}\n\t\t\/\/ detect if the user has over-ridden the default flash version\n\t\tif (typeof djConfig[\"forceFlashComm\"] != \"undefined\" &&\n\t\t\t\ttypeof djConfig[\"forceFlashComm\"] != null){\n\t\t\tthis.commVersion = djConfig[\"forceFlashComm\"];\n\t\t\treturn;\n\t\t}\n\t\t\/\/ we prefer Flash 6 features over Flash 8, because they are much faster\n\t\t\/\/ and much less buggy\n\t\t\/\/ at this point, we don't have a flash file to detect features on,\n\t\t\/\/ so we need to instead look at the browser environment we are in\n\t\tif(dojo.render.html.safari == true || dojo.render.html.opera == true){\n\t\t\tthis.commVersion = 8;\n\t\t}else{\n\t\t\tthis.commVersion = 6;\n\t\t}","instance_variables":["capable","commVersion"]}},"dojo.flash.Embed.prototype.protocol":{"meta":{"summary":"","src":" \tswitch(window.location.protocol){\n\t\t\tcase \"https:\":\n\t\t\t\treturn \"https\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn \"http\";\n\t\t\t\tbreak;\n\t\t}"}},"dojo.flash.Embed.prototype.write":{"meta":{"summary":"","parameters":{"flashVer":{"type":""},"doExpressInstall":{"type":""}},"src":" \tif(dojo.lang.isUndefined(doExpressInstall)){\n\t\t\tdoExpressInstall = false;\n\t\t}\n\t\t\/\/ determine our container div's styling\n\t\tvar containerStyle = new dojo.string.Builder();\n\t\tcontainerStyle.append(\"width: \" + this.width + \"px; \");\n\t\tcontainerStyle.append(\"height: \" + this.height + \"px; \");\n\t\tif(this._visible == false){\n\t\t\tcontainerStyle.append(\"position: absolute; \");\n\t\t\tcontainerStyle.append(\"z-index: 10000; \");\n\t\t\tcontainerStyle.append(\"top: -1000px; \");\n\t\t\tcontainerStyle.append(\"left: -1000px; \");\n\t\t}\n\t\tcontainerStyle = containerStyle.toString();\n\t\t\/\/ figure out the SWF file to get and how to write out the correct HTML\n\t\t\/\/ for this Flash version\n\t\tvar objectHTML;\n\t\tvar swfloc;\n\t\t\/\/ Flash 6\n\t\tif(flashVer == 6){\n\t\t\tswfloc = dojo.flash.flash6_version;\n\t\t\tvar dojoPath = djConfig.baseRelativePath;\n\t\t\tswfloc = swfloc + \"?baseRelativePath=\" + escape(dojoPath);\n\t\t\tobjectHTML = \n\t\t\t\t\t\t  '<embed id=\"' + this.id + '\" src=\"' + swfloc + '\" '\n\t\t\t\t\t\t+ '    quality=\"high\" bgcolor=\"#ffffff\" '\n\t\t\t\t\t\t+ '    width=\"' + this.width + '\" height=\"' + this.height + '\" '\n\t\t\t\t\t\t+ '    name=\"' + this.id + '\" '\n\t\t\t\t\t\t+ '    align=\"middle\" allowScriptAccess=\"sameDomain\" '\n\t\t\t\t\t\t+ '    type=\"application\/x-shockwave-flash\" swLiveConnect=\"true\" '\n\t\t\t\t\t\t+ '    pluginspage=\"'\n\t\t\t\t\t\t+ this.protocol()\n\t\t\t\t\t\t+ ':\/\/www.macromedia.com\/go\/getflashplayer\">';\n\t\t}else{ \/\/ Flash 8\n\t\t\tswfloc = dojo.flash.flash8_version;\n\t\t\tvar swflocObject = swfloc;\n\t\t\tvar swflocEmbed = swfloc;\n\t\t\tvar dojoPath = djConfig.baseRelativePath;\n\t\t\tif(doExpressInstall){\n\t\t\t\t\/\/ the location to redirect to after installing\n\t\t\t\tvar redirectURL = escape(window.location);\n\t\t\t\tdocument.title = document.title.slice(0, 47) + \" - Flash Player Installation\";\n\t\t\t\tvar docTitle = escape(document.title);\n\t\t\t\tswflocObject += \"?MMredirectURL=\" + redirectURL\n\t\t\t\t                + \"&MMplayerType=ActiveX\"\n\t\t\t\t                + \"&MMdoctitle=\" + docTitle\n\t\t\t\t\t\t\t\t+ \"&baseRelativePath=\" + escape(dojoPath);\n\t\t\t\tswflocEmbed += \"?MMredirectURL=\" + redirectURL \n\t\t\t\t\t\t\t\t+ \"&MMplayerType=PlugIn\"\n\t\t\t\t\t\t\t\t+ \"&baseRelativePath=\" + escape(dojoPath);\n\t\t\t}\n\t\t\tif(swflocEmbed.indexOf(\"?\") == -1){\n\t\t\t\tswflocEmbed +=  \"?baseRelativePath=\"+escape(dojoPath)+\"' \";\n\t\t\t}\n\t\t\tobjectHTML =\n\t\t\t\t'<object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" '\n\t\t\t\t  + 'codebase=\"'\n\t\t\t\t\t+ this.protocol()\n\t\t\t\t\t+ ':\/\/fpdownload.macromedia.com\/pub\/shockwave\/cabs\/flash\/'\n\t\t\t\t\t+ 'swflash.cab#version=8,0,0,0\" '\n\t\t\t\t  + 'width=\"' + this.width + '\" '\n\t\t\t\t  + 'height=\"' + this.height + '\" '\n\t\t\t\t  + 'id=\"' + this.id + '\" '\n\t\t\t\t  + 'align=\"middle\"> '\n\t\t\t\t  + '<param name=\"allowScriptAccess\" value=\"sameDomain\" \/> '\n\t\t\t\t  + '<param name=\"movie\" value=\"' + swflocObject + '\" \/> '\n\t\t\t\t  + '<param name=\"quality\" value=\"high\" \/> '\n\t\t\t\t  + '<param name=\"bgcolor\" value=\"#ffffff\" \/> '\n\t\t\t\t  + '<embed src=\"' + swflocEmbed + \"' \"\n\t\t\t\t  + 'quality=\"high\" '\n\t\t\t\t  + 'bgcolor=\"#ffffff\" '\n\t\t\t\t  + 'width=\"' + this.width + '\" '\n\t\t\t\t  + 'height=\"' + this.height + '\" '\n\t\t\t\t  + 'id=\"' + this.id + '\" '\n\t\t\t\t  + 'name=\"' + this.id + '\" '\n\t\t\t\t  + 'swLiveConnect=\"true\" '\n\t\t\t\t  + 'align=\"middle\" '\n\t\t\t\t  + 'allowScriptAccess=\"sameDomain\" '\n\t\t\t\t  + 'type=\"application\/x-shockwave-flash\" '\n\t\t\t\t  + 'pluginspage=\"'\n\t\t\t\t\t+ this.protocol()\n\t\t\t\t\t+':\/\/www.macromedia.com\/go\/getflashplayer\" \/>'\n\t\t\t\t+ '<\/object>';\n\t\t}\n\t\t\/\/ now write everything out\n\t\tobjectHTML = '<div id=\"' + this.id + 'Container\" style=\"' + containerStyle + '\"> '\n\t\t\t\t\t\t+ objectHTML\n\t\t\t\t\t + '<\/div>';\n\t\tdocument.writeln(objectHTML);","instance_variables":["_visible"]}},"dojo.flash.Embed.prototype.get":{"meta":{"summary":"","src":" \treturn document.getElementById(this.id);"}},"dojo.flash.Embed.prototype.setVisible":{"meta":{"summary":"","parameters":{"visible":{"type":""}},"src":" \tvar container = dojo.byId(this.id + \"Container\");\n\t\tif(visible == true){\n\t\t\tcontainer.style.visibility = \"visible\";\n\t\t}else{\n\t\t\tcontainer.style.position = \"absolute\";\n\t\t\tcontainer.style.x = \"-1000px\";\n\t\t\tcontainer.style.y = \"-1000px\";\n\t\t\tcontainer.style.visibility = \"hidden\";\n\t\t}"}},"dojo.flash.Embed.prototype.center":{"meta":{"summary":"","src":" \tvar elementWidth = this.width;\n\t\tvar elementHeight = this.height;\n\t\tvar scroll_offset = dojo.html.getScroll().offset;\n\t\tvar viewport_size = dojo.html.getViewport();\n\t\t\/\/ compute the centered position    \n\t\tvar x = scroll_offset.x + (viewport_size.width - elementWidth) \/ 2;\n\t\tvar y = scroll_offset.y + (viewport_size.height - elementHeight) \/ 2; \n\t\t\/\/ set the centered position\n\t\tvar container = dojo.byId(this.id + \"Container\");\n\t\tcontainer.style.top = y + \"px\";\n\t\tcontainer.style.left = x + \"px\";"}},"dojo.flash.Communicator.prototype._writeFlash6":{"meta":{"summary":"","src":" \tvar id = dojo.flash.obj.id;\n\t\t\/\/ global function needed for Flash 6 callback;\n\t\t\/\/ we write it out as a script tag because the VBScript hook for IE\n\t\t\/\/ callbacks does not work properly if this function is evalled() from\n\t\t\/\/ within the Dojo system\n\t\tdocument.writeln('<script language=\"JavaScript\">');\n\t\tdocument.writeln('  function ' + id + '_DoFSCommand(command, args){ ');\n\t\tdocument.writeln('    dojo.flash.comm._handleFSCommand(command, args); ');\n\t\tdocument.writeln('}');\n\t\tdocument.writeln('<\/script>');\n\t\t\/\/ hook for Internet Explorer to receive FSCommands from Flash\n\t\tif(dojo.render.html.ie){\n\t\t\tdocument.writeln('<SCRIPT LANGUAGE=VBScript\\> ');\n\t\t\tdocument.writeln('on error resume next ');\n\t\t\tdocument.writeln('Sub ' + id + '_FSCommand(ByVal command, ByVal args)');\n\t\t\tdocument.writeln(' call ' + id + '_DoFSCommand(command, args)');\n\t\t\tdocument.writeln('end sub');\n\t\t\tdocument.writeln('<\/SCRIPT\\> ');\n\t\t}"}},"dojo.flash.Communicator.prototype._writeFlash8":{"meta":{"summary":"","src":"\t\t\/\/ nothing needs to be written out for Flash 8 communication; \n\t\t\/\/ happens automatically"}},"dojo.flash.Communicator.prototype._handleFSCommand":{"meta":{"summary":"","parameters":{"command":{"type":""},"args":{"type":""}},"src":" \tif(command != null && !dojo.lang.isUndefined(command)\n\t\t\t&& \/^FSCommand:(.*)\/.test(command) == true){\n\t\t\tcommand = command.match(\/^FSCommand:(.*)\/)[1];\n\t\t}\n\t\tif(command == \"addCallback\"){ \/\/ add Flash method for JavaScript callback\n\t\t\tthis._fscommandAddCallback(command, args);\n\t\t}else if(command == \"call\"){ \/\/ Flash to JavaScript method call\n\t\t\tthis._fscommandCall(command, args);\n\t\t}else if(command == \"fscommandReady\"){ \/\/ see if fscommands are ready\n\t\t\tthis._fscommandReady();\n\t\t}"}},"dojo.flash.Communicator.prototype._fscommandAddCallback":{"meta":{"summary":"","parameters":{"command":{"type":""},"args":{"type":""}},"src":" \tvar functionName = args;\n\t\t\/\/ do a trick, where we link this function name to our wrapper\n\t\t\/\/ function, _call, that does the actual JavaScript to Flash call\n\t\tvar callFunc = function(){\n\t\t\treturn dojo.flash.comm._call(functionName, arguments);\n\t\t};\t\t\t\n\t\tdojo.flash.comm[functionName] = callFunc;\n\t\t\/\/ indicate that the call was successful\n\t\tdojo.flash.obj.get().SetVariable(\"_succeeded\", true);"}},"dojo.flash.Communicator.prototype._fscommandCall":{"meta":{"summary":"","parameters":{"command":{"type":""},"args":{"type":""}},"src":" \tvar plugin = dojo.flash.obj.get();\n\t\tvar functionName = args;\n\t\t\/\/ get the number of arguments to this method call and build them up\n\t\tvar numArgs = parseInt(plugin.GetVariable(\"_numArgs\"));\n\t\tvar flashArgs = new Array();\n\t\tfor(var i = 0; i < numArgs; i++){\n\t\t\tvar currentArg = plugin.GetVariable(\"_\" + i);\n\t\t\tflashArgs.push(currentArg);\n\t\t}\n\t\t\/\/ get the function instance; we technically support more capabilities\n\t\t\/\/ than ExternalInterface, which can only call global functions; if\n\t\t\/\/ the method name has a dot in it, such as \"dojo.flash.loaded\", we\n\t\t\/\/ eval it so that the method gets run against an instance\n\t\tvar runMe;\n\t\tif(functionName.indexOf(\".\") == -1){ \/\/ global function\n\t\t\trunMe = window[functionName];\n\t\t}else{\n\t\t\t\/\/ instance function\n\t\t\trunMe = eval(functionName);\n\t\t}\n\t\t\/\/ make the call and get the results\n\t\tvar results = null;\n\t\tif(!dojo.lang.isUndefined(runMe) && runMe != null){\n\t\t\tresults = runMe.apply(null, flashArgs);\n\t\t}\n\t\t\/\/ return the results to flash\n\t\tplugin.SetVariable(\"_returnResult\", results);","call_chain":["runMe"]}},"dojo.flash.Communicator.prototype._fscommandReady":{"meta":{"summary":"","src":" \tvar plugin = dojo.flash.obj.get();\n\t\tplugin.SetVariable(\"fscommandReady\", \"true\");"}},"dojo.flash.Communicator.prototype._call":{"meta":{"summary":"","parameters":{"args":{"type":""}},"src":" \tvar plugin = dojo.flash.obj.get();\n\t\tplugin.SetVariable(\"_functionName\", functionName);\n\t\tplugin.SetVariable(\"_numArgs\", args.length);\n\t\tfor(var i = 0; i < args.length; i++){\n\t\t\t\/\/ unlike Flash 8's ExternalInterface, Flash 6 has no problem with\n\t\t\t\/\/ any special characters _except_ for the null character \\0; double\n\t\t\t\/\/ encode this so the Flash side never sees it, but we can get it \n\t\t\t\/\/ back if the value comes back to JavaScript\n\t\t\tvar value = args[i];\n\t\t\tvalue = value.replace(\/\\0\/g, \"\\\\0\");\n\t\t\tplugin.SetVariable(\"_\" + i, value);\n\t\t}\n\t\t\/\/ now tell Flash to execute this method using the Flash Runner\n\t\tplugin.TCallLabel(\"\/_flashRunner\", \"execute\");\n\t\t\/\/ get the results\n\t\tvar results = plugin.GetVariable(\"_returnResult\");\n\t\t\/\/ we double encoded all null characters as \/\/0 because Flash breaks\n\t\t\/\/ if they are present; turn the \/\/0 back into \/0\n\t\tresults = results.replace(\/\\\\0\/g, \"\\0\");\n\t\treturn results;"}},"dojo.flash.Communicator.prototype._addExternalInterfaceCallback":{"meta":{"summary":"","parameters":{"methodName":{"type":""}},"src":" \tvar wrapperCall = function(){\n\t\t\t\/\/ some browsers don't like us changing values in the 'arguments' array, so\n\t\t\t\/\/ make a fresh copy of it\n\t\t\tvar methodArgs = new Array(arguments.length);\n\t\t\tfor(var i = 0; i < arguments.length; i++){\n\t\t\t\tmethodArgs[i] = arguments[i];\n\t\t\t}\n\t\t\treturn dojo.flash.comm._execFlash(methodName, methodArgs);\n\t\t};\n\t\tdojo.flash.comm[methodName] = wrapperCall;"}},"dojo.flash.Communicator.prototype._encodeData":{"meta":{"summary":"","parameters":{"data":{"type":""}},"src":" \tvar entityRE = \/\\&([^;]*)\\;\/g;\n\t\tdata = data.replace(entityRE, \"&amp;$1;\");\n\t\t\/\/ entity encode XML-ish characters, or Flash's broken XML serializer\n\t\t\/\/ breaks\n\t\tdata = data.replace(\/<\/g, \"&lt;\");\n\t\tdata = data.replace(\/>\/g, \"&gt;\");\n\t\t\/\/ transforming \\ into \\\\ doesn't work; just use a custom encoding\n\t\tdata = data.replace(\"\\\\\", \"&custom_backslash;&custom_backslash;\");\n\t\tdata = data.replace(\/\\n\/g, \"\\\\n\");\n\t\tdata = data.replace(\/\\r\/g, \"\\\\r\");\n\t\tdata = data.replace(\/\\f\/g, \"\\\\f\");\n\t\tdata = data.replace(\/\\0\/g, \"\\\\0\"); \/\/ null character\n\t\tdata = data.replace(\/\\'\/g, \"\\\\\\'\");\n\t\tdata = data.replace(\/\\\"\/g, '\\\\\\\"');\n\t\treturn data;"}},"dojo.flash.Communicator.prototype._decodeData":{"meta":{"summary":"","parameters":{"data":{"type":""}},"src":" \tif(data == null || typeof data == \"undefined\"){\n\t\t\treturn data;\n\t\t}\n\t\t\/\/ certain XMLish characters break Flash's wire serialization for\n\t\t\/\/ ExternalInterface; these are encoded on the \n\t\t\/\/ DojoExternalInterface side into a custom encoding, rather than\n\t\t\/\/ the standard entity encoding, because otherwise we won't be able to\n\t\t\/\/ differentiate between our own encoding and any entity characters\n\t\t\/\/ that are being used in the string itself\n\t\tdata = data.replace(\/\\&custom_lt\\;\/g, \"<\");\n\t\tdata = data.replace(\/\\&custom_gt\\;\/g, \">\");\n\t\t\/\/ Unfortunately, Flash returns us our String with special characters\n\t\t\/\/ like newlines broken into seperate characters. So if \\n represents\n\t\t\/\/ a new line, Flash returns it as \"\\\" and \"n\". This means the character\n\t\t\/\/ is _not_ a newline. This forces us to eval() the string to cause\n\t\t\/\/ escaped characters to turn into their real special character values.\n\t\tdata = eval('\"' + data + '\"');\n\t\treturn data;"}},"dojo.flash.Communicator.prototype._chunkArgumentData":{"meta":{"summary":"","parameters":{"value":{"type":""},"argIndex":{"type":""}},"src":" \tvar plugin = dojo.flash.obj.get();\n\t\t\/\/ cut up the string into pieces, and push over each piece one\n\t\t\/\/ at a time\n\t\tvar numSegments = Math.ceil(value.length \/ 1024);\n\t\tfor(var i = 0; i < numSegments; i++){\n\t\t\tvar startCut = i * 1024;\n\t\t\tvar endCut = i * 1024 + 1024;\n\t\t\tif(i == (numSegments - 1)){\n\t\t\t\tendCut = i * 1024 + value.length;\n\t\t\t}\n\t\t\tvar piece = value.substring(startCut, endCut);\n\t\t\t\/\/ encode each piece seperately, rather than the entire\n\t\t\t\/\/ argument data, because ocassionally a special \n\t\t\t\/\/ character, such as an entity like &foobar;, will fall between\n\t\t\t\/\/ piece boundaries, and we _don't_ want to encode that value if\n\t\t\t\/\/ it falls between boundaries, or else we will end up with incorrect\n\t\t\t\/\/ data when we patch the pieces back together on the other side\n\t\t\tpiece = this._encodeData(piece);\n\t\t\t\/\/ directly use the underlying CallFunction method used by\n\t\t\t\/\/ ExternalInterface, which is vastly faster for large strings\n\t\t\t\/\/ and lets us bypass some Flash serialization bugs\n\t\t\tplugin.CallFunction('<invoke name=\"chunkArgumentData\" '\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ 'returntype=\"javascript\">'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '<arguments>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '<string>' + piece + '<\/string>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '<number>' + argIndex + '<\/number>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '<\/arguments>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '<\/invoke>');\n\t\t}"}},"dojo.flash.Communicator.prototype._chunkReturnData":{"meta":{"summary":"","src":" \tvar plugin = dojo.flash.obj.get();\n\t\tvar numSegments = plugin.getReturnLength();\n\t\tvar resultsArray = new Array();\n\t\tfor(var i = 0; i < numSegments; i++){\n\t\t\t\/\/ directly use the underlying CallFunction method used by\n\t\t\t\/\/ ExternalInterface, which is vastly faster for large strings\n\t\t\tvar piece = \n\t\t\t\t\tplugin.CallFunction('<invoke name=\"chunkReturnData\" '\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ 'returntype=\"javascript\">'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '<arguments>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '<number>' + i + '<\/number>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '<\/arguments>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '<\/invoke>');\n\t\t\t\/\/ remove any leading or trailing JavaScript delimiters, which surround\n\t\t\t\/\/ our String when it comes back from Flash since we bypass Flash's\n\t\t\t\/\/ deserialization routines by directly calling CallFunction on the\n\t\t\t\/\/ plugin\n\t\t\tif(piece == '\"\"' || piece == \"''\"){\n\t\t\t\tpiece = \"\";\n\t\t\t}else{\n\t\t\t\tpiece = piece.substring(1, piece.length-1);\n\t\t\t}\n\t\t\tresultsArray.push(piece);\n\t\t}\n\t\tvar results = resultsArray.join(\"\");\n\t\treturn results;"}},"dojo.flash.Communicator.prototype._execFlash":{"meta":{"summary":"","parameters":{"methodName":{"type":""},"methodArgs":{"type":""}},"src":" \tvar plugin = dojo.flash.obj.get();\n\t\t\/\/ begin Flash method execution\n\t\tplugin.startExec();\n\t\t\/\/ set the number of arguments\n\t\tplugin.setNumberArguments(methodArgs.length);\n\t\t\/\/ chunk and send over each argument\n\t\tfor(var i = 0; i < methodArgs.length; i++){\n\t\t\tthis._chunkArgumentData(methodArgs[i], i);\n\t\t}\n\t\t\/\/ execute the method\n\t\tplugin.exec(methodName);\n\t\t\/\/ get the return result\n\t\tvar results = this._chunkReturnData();\n\t\t\/\/ decode the results\n\t\tresults = this._decodeData(results);\n\t\t\/\/ reset everything\n\t\tplugin.endExec();\n\t\treturn results;"}},"dojo.flash.Install.prototype.needed":{"meta":{"summary":"","src":" \tif(dojo.flash.info.capable == false){\n\t\t\treturn true;\n\t\t}\n\t\t\/\/ are we on the Mac? Safari needs Flash version 8 to do Flash 8\n\t\t\/\/ communication, while Firefox\/Mac needs Flash 8 to fix bugs it has\n\t\t\/\/ with Flash 6 communication\n\t\tif(dojo.render.os.mac == true && !dojo.flash.info.isVersionOrAbove(8, 0, 0)){\n\t\t\treturn true;\n\t\t}\n\t\t\/\/ other platforms need at least Flash 6 or above\n\t\tif(!dojo.flash.info.isVersionOrAbove(6, 0, 0)){\n\t\t\treturn true;\n\t\t}\n\t\t\/\/ otherwise we don't need installation\n\t\treturn false;"}},"dojo.flash.Install.prototype.install":{"meta":{"summary":"","src":" \tdojo.flash.info.installing = true;\n\t\tdojo.flash.installing();\n\t\tif(dojo.flash.info.capable == false){ \/\/ we have no Flash at all\n\t\t\t\/\/dojo.debug(\"Completely new install\");\n\t\t\t\/\/ write out a simple Flash object to force the browser to prompt\n\t\t\t\/\/ the user to install things\n\t\t\tvar installObj = new dojo.flash.Embed(false);\n\t\t\tinstallObj.write(8); \/\/ write out HTML for Flash 8 version+\n\t\t}else if(dojo.flash.info.isVersionOrAbove(6, 0, 65)){ \/\/ Express Install\n\t\t\t\/\/dojo.debug(\"Express install\");\n\t\t\tvar installObj = new dojo.flash.Embed(false);\n\t\t\tinstallObj.write(8, true); \/\/ write out HTML for Flash 8 version+\n\t\t\tinstallObj.setVisible(true);\n\t\t\tinstallObj.center();\n\t\t}else{ \/\/ older Flash install than version 6r65\n\t\t\talert(\"This content requires a more recent version of the Macromedia \"\n\t\t\t\t\t\t+\" Flash Player.\");\n\t\t\twindow.location.href = + dojo.flash.Embed.protocol() +\n\t\t\t\t\t\t\":\/\/www.macromedia.com\/go\/getflashplayer\";\n\t\t}"}},"dojo.flash.Install.prototype._onInstallStatus":{"meta":{"summary":"","parameters":{"msg":{"type":""}},"src":" \tif (msg == \"Download.Complete\"){\n\t\t\t\/\/ Installation is complete.\n\t\t\tdojo.flash._initialize();\n\t\t}else if(msg == \"Download.Cancelled\"){\n\t\t\talert(\"This content requires a more recent version of the Macromedia \"\n\t\t\t\t\t\t+\" Flash Player.\");\n\t\t\twindow.location.href = dojo.flash.Embed.protocol() +\n\t\t\t\t\t\t\":\/\/www.macromedia.com\/go\/getflashplayer\";\n\t\t}else if (msg == \"Download.Failed\"){\n\t\t\t\/\/ The end user failed to download the installer due to a network failure\n\t\t\talert(\"There was an error downloading the Flash Player update. \"\n\t\t\t\t\t\t+ \"Please try again later, or visit macromedia.com to download \"\n\t\t\t\t\t\t+ \"the latest version of the Flash plugin.\");\n\t\t}\t"}}},"objects":{"dojo.flash":{"meta":{"variables":["flash6_version","flash8_version","ready","_visible","_loadedListeners","_installingListeners"]}},"dojo.flash.Info.prototype":{"meta":{"variables":["version","versionMajor","versionMinor","versionRevision","capable","commVersion","installing"]}},"dojo.flash.Embed.prototype":{"meta":{"variables":["width","height","id","_visible"]}}}}}}