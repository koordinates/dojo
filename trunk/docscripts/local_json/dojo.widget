{"dojo.widget.AccordionContainer":{"meta":{"requires":{"common":["dojo.widget.*","dojo.html.*","dojo.widget.AccordionPane"]},"methods":{"dojo.widget.AccordionContainer":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"],"protovariables":{"isContainer":"","labelNodeClass":"","containerNodeClass":"","allowCollapse":""},"parameters":{"rawNode":{"type":""}}}}},"dojo.widget.AccordionContainer.addChild":{"_":{"meta":{"summary":"","parameters":{"widget":{"type":""},"overrideContainerNode":{"type":""},"pos":{"type":""},"ref":{"type":""},"insertIndex":{"type":""}},"src":"\t\t\tif (widget.widgetType != \"AccordionPane\") {\n\t\t\t\tvar wrapper=dojo.widget.createWidget(\"AccordionPane\",{label: widget.label, open: widget.open, labelNodeClass: this.labelNodeClass, containerNodeClass: this.containerNodeClass, allowCollapse: this.allowCollapse });\n\t\t\t\twrapper.addChild(widget);\n\t\t\t\tthis.addWidgetAsDirectChild(wrapper);\n\t\t\t\tthis.registerChild(wrapper);\n\t\t\t\twrapper.setSizes();\n\t\t\t\treturn wrapper;\n\t\t\t} else {\n\t\t\t\tdojo.html.addClass(widget.containerNode, this.containerNodeClass);\n\t\t\t\tdojo.html.addClass(widget.labelNode, this.labelNodeClass);\n\t\t\t\tthis.addWidgetAsDirectChild(widget);\n\t\t\t\tthis.registerChild(widget);\t\n\t\t\t\twidget.setSizes();\n\t\t\t\treturn widget;\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.AccordionContainer.label":{"_":{"meta":{"summary":"","parameters":{"widget":{"type":""},"overrideContainerNode":{"type":""},"pos":{"type":""},"ref":{"type":""},"insertIndex":{"type":""}},"src":"\t\t\tif (widget.widgetType != \"AccordionPane\") {\n\t\t\t\tvar wrapper=dojo.widget.createWidget(\"AccordionPane\",{label: widget.label, open: widget.open, labelNodeClass: this.labelNodeClass, containerNodeClass: this.containerNodeClass, allowCollapse: this.allowCollapse });\n\t\t\t\twrapper.addChild(widget);\n\t\t\t\tthis.addWidgetAsDirectChild(wrapper);\n\t\t\t\tthis.registerChild(wrapper);\n\t\t\t\twrapper.setSizes();\n\t\t\t\treturn wrapper;\n\t\t\t} else {\n\t\t\t\tdojo.html.addClass(widget.containerNode, this.containerNodeClass);\n\t\t\t\tdojo.html.addClass(widget.labelNode, this.labelNodeClass);\n\t\t\t\tthis.addWidgetAsDirectChild(widget);\n\t\t\t\tthis.registerChild(widget);\t\n\t\t\t\twidget.setSizes();\n\t\t\t\treturn widget;\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.AccordionContainer.postCreate":{"_":{"meta":{"summary":"","src":"\t\t\tvar tmpChildren = this.children;\n\t\t\tthis.children=[];\n\t\t\tdojo.html.removeChildren(this.domNode);\n\t\t\tdojo.lang.forEach(tmpChildren, dojo.lang.hitch(this,\"addChild\"));","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.HtmlWidget":{"_":{"meta":{"this_variables":["children"]}}},"dojo.widget.AccordionContainer.removeChild":{"_":{"meta":{"summary":"","parameters":{"widget":{"type":""}},"src":"\t\t\tdojo.widget.AccordionContainer.superclass.removeChild.call(this, widget);\n\t\t\tif(this.children[0]){\n\t\t\t\tthis.children[0].setSizes();\n\t\t\t}","this_inherits":["dojo.widget.AccordionContainer.superclass.removeChild"],"this":"dojo.widget.HtmlWidget"}}},"dojo.widget.AccordionContainer.onResized":{"_":{"meta":{"summary":"","src":"\t\t\tthis.children[0].setSizes();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Widget":{"_":{"meta":{"protovariables":{"label":"","open":""}}}}}}},"dojo.widget.AccordionPane":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.TitlePane","dojo.html.selection"]},"methods":{"dojo.widget.AccordionPane":{"_":{"meta":{"summary":"","inherits":["dojo.widget.TitlePane"],"this_inherits":["dojo.widget.TitlePane"],"parameters":{"rawNode":{"type":""}}}}}}}},"dojo.widget.AnimatedPng":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.HtmlWidget"]},"methods":{"dojo.widget.AnimatedPng":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"],"protovariables":{"isContainer":"","domNode":"","width":"","height":"","aniSrc":"","interval":"","cellWidth":"","cellHeight":"","aniCols":"","aniRows":"","aniCells":"","blankSrc":"","templateString":""},"parameters":{"rawNode":{"type":""}}}}},"dojo.widget.AnimatedPng.postCreate":{"_":{"meta":{"summary":"","src":"\t\t\tthis.cellWidth = this.width;\n\t\t\tthis.cellHeight = this.height;\n\n\t\t\tvar img = new Image();\n\t\t\tvar self = this;\n\n\t\t\timg.onload = function(){ self.initAni(img.width, img.height); };\n\t\t\timg.src = this.aniSrc;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.HtmlWidget":{"_":{"meta":{"this_variables":["cellWidth","cellHeight","domNode.src","domNode.width","domNode.height","domNode.style.backgroundImage","domNode.style.backgroundRepeat","aniCols","aniRows","aniCells","aniFrame","domNode.style.backgroundPosition"]}}},"dojo.widget.AnimatedPng.initAni":{"_":{"meta":{"summary":"","parameters":{"w":{"type":""},"h":{"type":""}},"src":"\t\t\tthis.domNode.src = this.blankSrc;\n\t\t\tthis.domNode.width = this.cellWidth;\n\t\t\tthis.domNode.height = this.cellHeight;\n\t\t\tthis.domNode.style.backgroundImage = 'url('+this.aniSrc+')';\n\t\t\tthis.domNode.style.backgroundRepeat = 'no-repeat';\n\n\t\t\tthis.aniCols = Math.floor(w\/this.cellWidth);\n\t\t\tthis.aniRows = Math.floor(h\/this.cellHeight);\n\t\t\tthis.aniCells = this.aniCols * this.aniRows;\n\t\t\tthis.aniFrame = 0;\n\n\t\t\twindow.setInterval(dojo.lang.hitch(this, 'tick'), this.interval);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.AnimatedPng.tick":{"_":{"meta":{"summary":"","src":"\t\t\tthis.aniFrame++;\n\t\t\tif (this.aniFrame == this.aniCells) this.aniFrame = 0;\n\n\t\t\tvar col = this.aniFrame % this.aniCols;\n\t\t\tvar row = Math.floor(this.aniFrame \/ this.aniCols);\n\n\t\t\tvar bx = -1 * col * this.cellWidth;\n\t\t\tvar by = -1 * row * this.cellHeight;\n\n\t\t\tthis.domNode.style.backgroundPosition = bx+'px '+by+'px';","this":"dojo.widget.HtmlWidget"}}}}}},"dojo.widget.Button":{"meta":{"requires":{"common":["dojo.lang.extras","dojo.html.*","dojo.html.selection","dojo.widget.*"]},"methods":{"dojo.widget.Button":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"],"protovariables":{"isContainer":"","caption":"","disabled":"","templatePath":"","templateCssPath":"","inactiveImg":"","activeImg":"","pressedImg":"","disabledImg":"","width2height":"","containerNode":"","leftImage":"","centerImage":"","rightImage":""},"parameters":{"rawNode":{"type":""}},"this_variables":["arrow","arrow.src","height","containerWidth","leftImage.height","arrowBackgroundImage.height","leftImage.width","centerImage.width","leftPart.style.height","leftPart.style.width","arrowBackgroundImage.width","rightImage.width","rightPart.style.height","rightPart.style.width","domNode.style.height","domNode.style.width","leftImage.src","centerImage.src","arrowBackgroundImage.src","rightImage.src"]}}},"dojo.widget.Button.fillInTemplate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\t\tif(this.caption != \"\"){\n\t\t\t\tthis.containerNode.appendChild(document.createTextNode(this.caption));\n\t\t\t}\n\t\t\tdojo.html.disableSelection(this.containerNode);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Button.postCreate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\t\tthis.sizeMyself();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Button.sizeMyself":{"_":{"meta":{"summary":"","src":"\t\t\t\tvar placeHolder = document.createElement(\"span\");\n\t\t\t\tdojo.html.insertBefore(placeHolder, this.domNode);\n\t\t\t}\n\t\t\tdojo.body().appendChild(this.domNode);\n\t\t\t\n\t\t\tthis.sizeMyselfHelper();\n\t\t\t\n\t\t\t\/\/ Put this.domNode back where it was originally\n\t\t\tif(placeHolder){\n\t\t\t\tdojo.html.insertBefore(this.domNode, placeHolder);\n\t\t\t\tdojo.html.removeNode(placeHolder);\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Button.sizeMyselfHelper":{"_":{"meta":{"summary":"","src":"\t\t\tvar mb = dojo.html.getMarginBox(this.containerNode);\n\t\t\tthis.height = mb.height;\n\t\t\tthis.containerWidth = mb.width;\n\t\t\tvar endWidth= this.height * this.width2height;\n\t\n\t\t\tthis.containerNode.style.left=endWidth+\"px\";\n\t\n\t\t\tthis.leftImage.height = this.rightImage.height = this.centerImage.height = this.height;\n\t\t\tthis.leftImage.width = this.rightImage.width = endWidth+1;\n\t\t\tthis.centerImage.width = this.containerWidth;\n\t\t\tthis.centerImage.style.left=endWidth+\"px\";\n\t\t\tthis._setImage(this.disabled ? this.disabledImg : this.inactiveImg);\n\n\t\t\tif ( this.disabled ) {\n\t\t\t\tdojo.html.prependClass(this.domNode, \"dojoButtonDisabled\");\n\t\t\t} else {\n\t\t\t\tdojo.html.removeClass(this.domNode, \"dojoButtonDisabled\");\n\t\t\t}\n\t\t\t\t\n\t\t\tthis.domNode.style.height=this.height + \"px\";\n\t\t\tthis.domNode.style.width= (this.containerWidth+2*endWidth) + \"px\";","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.HtmlWidget":{"_":{"meta":{"this_variables":["height","containerWidth","containerNode.style.left","leftImage.height","leftImage.width","centerImage.width","centerImage.style.left","domNode.style.height","domNode.style.width","leftImage.src","centerImage.src","rightImage.src","caption","containerNode.innerHTML","disabled"]}}},"dojo.widget.Button.onMouseOver":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tif( this.disabled ){ return; }\n\t\t\tdojo.html.prependClass(this.domNode, \"dojoButtonHover\");\n\t\t\tthis._setImage(this.activeImg);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Button.onMouseDown":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tif( this.disabled ){ return; }\n\t\t\tdojo.html.prependClass(this.domNode, \"dojoButtonDepressed\");\n\t\t\tdojo.html.removeClass(this.domNode, \"dojoButtonHover\");\n\t\t\tthis._setImage(this.pressedImg);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Button.onMouseUp":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tif( this.disabled ){ return; }\n\t\t\tdojo.html.prependClass(this.domNode, \"dojoButtonHover\");\n\t\t\tdojo.html.removeClass(this.domNode, \"dojoButtonDepressed\");\n\t\t\tthis._setImage(this.activeImg);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Button.onMouseOut":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tif( this.disabled ){ return; }\n\t\t\tif( e.toElement && dojo.html.isDescendantOf(e.toElement, this.domNode) ){\n\t\t\t\treturn; \/\/ Ignore IE mouseOut events that dont actually leave button - Prevents hover image flicker in IE\n\t\t\t}\n\t\t\tdojo.html.removeClass(this.domNode, \"dojoButtonHover\");\n\t\t\tthis._setImage(this.inactiveImg);","returns":"Ignore IE mouseOut events that dont actually leave button - Prevents hover image flicker in IE","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Button.buttonClick":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tif( !this.disabled ) { this.onClick(e); }","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Button.onClick":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Button._setImage":{"_":{"meta":{"summary":"","parameters":{"prefix":{"type":""}},"src":"\t\t\tthis.leftImage.src=dojo.uri.dojoUri(prefix + \"l.gif\");\n\t\t\tthis.centerImage.src=dojo.uri.dojoUri(prefix + \"c.gif\");\n\t\t\tthis.rightImage.src=dojo.uri.dojoUri(prefix + \"r.gif\");","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Button._toggleMenu":{"_":{"meta":{"summary":"","parameters":{"menuId":{"type":""}},"src":"\t\t\tvar menu = dojo.widget.getWidgetById(menuId);\n\t\t\tif ( !menu ) { return; }\n\t\n\t\t\tif ( menu.open && !menu.isShowingNow) {\n\t\t\t\tvar pos = dojo.html.getAbsolutePosition(this.domNode, false);\n\t\t\t\tmenu.open(pos.x, pos.y+this.height, this);\n\t\t\t} else if ( menu.close && menu.isShowingNow ){\n\t\t\t\tmenu.close();\n\t\t\t} else {\n\t\t\t\tmenu.toggle();\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Button.setCaption":{"_":{"meta":{"summary":"","parameters":{"content":{"type":""}},"src":"\t\t\tthis.caption=content;\n\t\t\tthis.containerNode.innerHTML=content;\n\t\t\tthis.sizeMyself();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Button.setDisabled":{"_":{"meta":{"summary":"","parameters":{"disabled":{"type":""}},"src":"\t\t\tthis.disabled=disabled;\n\t\t\tthis.sizeMyself();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.DropDownButton":{"_":{"meta":{"summary":"","inherits":["dojo.widget.Button"],"this_inherits":["dojo.widget.Button"],"protovariables":{"menuId":"","arrow":"","downArrow":"","disabledDownArrow":""},"parameters":{"rawNode":{"type":""}}}}},"dojo.widget.DropDownButton.fillInTemplate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\t\tdojo.widget.DropDownButton.superclass.fillInTemplate.call(this, args, frag);\n\t\n\t\t\tthis.arrow = document.createElement(\"img\");\n\t\t\tdojo.html.setClass(this.arrow, \"downArrow\");","this_inherits":["dojo.widget.DropDownButton.superclass.fillInTemplate"],"this":"dojo.widget.Button"}}},"dojo.widget.DropDownButton.sizeMyselfHelper":{"_":{"meta":{"summary":"","src":"\t\t\tthis.containerNode.appendChild(this.arrow);\n\n\t\t\tdojo.widget.DropDownButton.superclass.sizeMyselfHelper.call(this);","this":"dojo.widget.Button"}}},"dojo.widget.DropDownButton.onClick":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tthis._toggleMenu(this.menuId);","this":"dojo.widget.Button"}}},"dojo.widget.ComboButton":{"_":{"meta":{"summary":"","inherits":["dojo.widget.Button"],"this_inherits":["dojo.widget.Button"],"protovariables":{"menuId":"","templatePath":"","leftPart":"","rightPart":"","arrowBackgroundImage":"","splitWidth":"","arrowWidth":""},"parameters":{"rawNode":{"type":""}}}}},"dojo.widget.ComboButton.sizeMyselfHelper":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tvar mb = dojo.html.getMarginBox(this.containerNode);\n\t\t\tthis.height = mb.height;\n\t\t\tthis.containerWidth = mb.width;\n\t\t\tvar endWidth= this.height\/3;\n\t\n\t\t\t\/\/ left part\n\t\t\tthis.leftImage.height = this.rightImage.height = this.centerImage.height = \n\t\t\t\tthis.arrowBackgroundImage.height = this.height;\n\t\t\tthis.leftImage.width = endWidth+1;\n\t\t\tthis.centerImage.width = this.containerWidth;\n\t\t\tthis.leftPart.style.height = this.height + \"px\";\n\t\t\tthis.leftPart.style.width = endWidth + this.containerWidth + \"px\";\n\t\t\tthis._setImageL(this.disabled ? this.disabledImg : this.inactiveImg);\n\t\n\t\t\t\/\/ right part\n\t\t\tthis.arrowBackgroundImage.width=this.arrowWidth;\n\t\t\tthis.rightImage.width = endWidth+1;\n\t\t\tthis.rightPart.style.height = this.height + \"px\";\n\t\t\tthis.rightPart.style.width = this.arrowWidth + endWidth + \"px\";\n\t\t\tthis._setImageR(this.disabled ? this.disabledImg : this.inactiveImg);\n\t\n\t\t\t\/\/ outer container\n\t\t\tthis.domNode.style.height=this.height + \"px\";\n\t\t\tvar totalWidth = this.containerWidth+this.splitWidth+this.arrowWidth+2*endWidth;\n\t\t\tthis.domNode.style.width= totalWidth + \"px\";","this":"dojo.widget.Button"}}},"dojo.widget.ComboButton.leftOver":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tif( this.disabled ){ return; }\n\t\t\tdojo.html.prependClass(this.leftPart, \"dojoButtonHover\");\n\t\t\tthis._setImageL(this.activeImg);","this":"dojo.widget.Button"}}},"dojo.widget.ComboButton.leftDown":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tif( this.disabled ){ return; }\n\t\t\tdojo.html.prependClass(this.leftPart, \"dojoButtonDepressed\");\n\t\t\tdojo.html.removeClass(this.leftPart, \"dojoButtonHover\");\n\t\t\tthis._setImageL(this.pressedImg);","this":"dojo.widget.Button"}}},"dojo.widget.ComboButton.leftUp":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tif( this.disabled ){ return; }\n\t\t\tdojo.html.prependClass(this.leftPart, \"dojoButtonHover\");\n\t\t\tdojo.html.removeClass(this.leftPart, \"dojoButtonDepressed\");\n\t\t\tthis._setImageL(this.activeImg);","this":"dojo.widget.Button"}}},"dojo.widget.ComboButton.leftOut":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tif( this.disabled ){ return; }\n\t\t\tdojo.html.removeClass(this.leftPart, \"dojoButtonHover\");\n\t\t\tthis._setImageL(this.inactiveImg);","this":"dojo.widget.Button"}}},"dojo.widget.ComboButton.leftClick":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tif ( !this.disabled ) {\n\t\t\t\tthis.onClick(e);\n\t\t\t}","this":"dojo.widget.Button"}}},"dojo.widget.ComboButton._setImageL":{"_":{"meta":{"summary":"","parameters":{"prefix":{"type":""}},"src":"\t\t\tthis.leftImage.src=dojo.uri.dojoUri(prefix + \"l.gif\");\n\t\t\tthis.centerImage.src=dojo.uri.dojoUri(prefix + \"c.gif\");","this":"dojo.widget.Button"}}},"dojo.widget.ComboButton.rightOver":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tif( this.disabled ){ return; }\n\t\t\tdojo.html.prependClass(this.rightPart, \"dojoButtonHover\");\n\t\t\tthis._setImageR(this.activeImg);","this":"dojo.widget.Button"}}},"dojo.widget.ComboButton.rightDown":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tif( this.disabled ){ return; }\n\t\t\tdojo.html.prependClass(this.rightPart, \"dojoButtonDepressed\");\n\t\t\tdojo.html.removeClass(this.rightPart, \"dojoButtonHover\");\n\t\t\tthis._setImageR(this.pressedImg);","this":"dojo.widget.Button"}}},"dojo.widget.ComboButton.rightUp":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tif( this.disabled ){ return; }\n\t\t\tdojo.html.prependClass(this.rightPart, \"dojoButtonHover\");\n\t\t\tdojo.html.removeClass(this.rightPart, \"dojoButtonDepressed\");\n\t\t\tthis._setImageR(this.activeImg);","this":"dojo.widget.Button"}}},"dojo.widget.ComboButton.rightOut":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tif( this.disabled ){ return; }\n\t\t\tdojo.html.removeClass(this.rightPart, \"dojoButtonHover\");\n\t\t\tthis._setImageR(this.inactiveImg);","this":"dojo.widget.Button"}}},"dojo.widget.ComboButton.rightClick":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tif( this.disabled ){ return; }\n\t\t\tthis._toggleMenu(this.menuId);","this":"dojo.widget.Button"}}},"dojo.widget.ComboButton._setImageR":{"_":{"meta":{"summary":"","parameters":{"prefix":{"type":""}},"src":"\t\t\tthis.arrowBackgroundImage.src=dojo.uri.dojoUri(prefix + \"c.gif\");\n\t\t\tthis.rightImage.src=dojo.uri.dojoUri(prefix + \"r.gif\");","this":"dojo.widget.Button"}}}}}},"dojo.widget.Chart":{"meta":{"requires":{"common":["dojo.widget.*","dojo.gfx.color","dojo.gfx.color.hsl"]},"methods":{"dojo.widget.Chart":{"_":{"meta":{"summary":""}}},"dojo.widget.Chart.DataSeries":{"_":{"meta":{"summary":""}}}}}},"dojo.widget.Checkbox":{"meta":{"requires":{"common":["dojo.widget.*","dojo.event.*","dojo.html.style"]},"methods":{"dojo.widget.Checkbox":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"],"protovariables":{"templatePath":"","templateCssPath":"","disabled":"","name":"","checked":"","tabIndex":"","id":""}}}},"dojo.widget.Checkbox.postMixInProperties":{"_":{"meta":{"summary":"","src":"\t\t\t\/\/ valid HTML 4.01 and XHTML require checked=\"checked\"\n\t\t\t\/\/ convert to boolean NOTE: this doesn't catch checked with no value in FF\n\t\t\tthis.checked = (this.checked == \"checked\" || this.checked == true);\n\n\t\t\t\/\/ output valid checked and disabled attributes\n\t\t\tthis.disabledStr = this.disabled ? \"disabled=\\\"disabled\\\"\" : \"\";\n\t\t\tthis.checkedStr = this.checked ? \"checked=\\\"checked\\\"\" : \"\";\n\t\t\t\n\t\t\t\/\/ set tabIndex=\"0\" because if tabIndex==\"\" user won't be able to tab to the field\n\t\t\tif(!this.disabled && this.tabIndex==\"\"){ this.tabIndex=\"0\"; }","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.HtmlWidget":{"_":{"meta":{"this_variables":["disabledStr","checkedStr","tabIndex","checked","disabled","inputNode.checked"]}}},"dojo.widget.Checkbox.postCreate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\t\t\tvar labels = document.getElementsByTagName(\"label\");\n\t\t\t\tif (labels != null && labels.length > 0){\n\t\t\t\t\tfor(var i=0; i<labels.length; i++){\n\t\t\t\t\t\tif (labels[i].htmlFor == this.id){\n\t\t\t\t\t\t\tlabels[i].id = (labels[i].htmlFor + \"label\"); \n\t\t\t\t\t\t\tdojo.widget.wai.setAttr(this.domNode, \"waiState\", \"labelledby\", labels[i].id);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Checkbox.fillInTemplate":{"_":{"meta":{"summary":"","src":"\t\t\tthis._setInfo();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Checkbox._onClick":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tif(this.disabled == false){\n\t\t\t\tthis.checked = !this.checked;\n\t\t\t\tthis._setInfo();\n\t\t\t}\n\t\t\te.preventDefault();\n\t\t\tthis.onClick();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Checkbox.onClick":{"_":{"meta":{"summary":"","src":"","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Checkbox.onKey":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tvar k = dojo.event.browser.keys;\n\t\t\tif(e.key == \" \"){\n\t \t\t\tthis._onClick(e);\n\t \t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Checkbox.mouseOver":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tthis.hover(e, true);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Checkbox.mouseOut":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tthis.hover(e, false);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Checkbox.hover":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""},"isOver":{"type":""}},"src":"\t\t\tif (this.disabled == false){\n\t\t\t\tvar state = this.checked ? \"On\" : \"Off\";\n\t\t\t\tvar style = \"dojoHtmlCheckbox\" + state + \"Hover\";\n\t\t\t\tif (isOver){\n\t\t\t\t\tdojo.html.addClass(this.domNode, style);\n\t\t\t\t}else{\n\t\t\t\t\tdojo.html.removeClass(this.domNode,style);\n\t\t\t\t}\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Checkbox._setInfo":{"_":{"meta":{"summary":"","src":"\t\t\tvar state = \"dojoHtmlCheckbox\" + (this.disabled ? \"Disabled\" : \"\") + (this.checked ? \"On\" : \"Off\");\n\t\t\tdojo.html.setClass(this.domNode, \"dojoHtmlCheckbox \" + state);\n\t\t\tthis.inputNode.checked = this.checked;\n\t\t\tdojo.widget.wai.setAttr(this.domNode, \"waiState\", \"checked\", this.checked);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.a11y.Checkbox":{"_":{"meta":{"summary":"","inherits":["dojo.widget.Checkbox"],"this_inherits":["dojo.widget.Checkbox"],"protovariables":{"templatePath":""}}}},"dojo.widget.a11y.Checkbox.postCreate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\t\t\/\/ nothing to do but don't want Checkbox version to run","this":"dojo.widget.Checkbox"}}},"dojo.widget.a11y.Checkbox.fillInTemplate":{"_":{"meta":{"summary":"","src":"","this":"dojo.widget.Checkbox"}}},"dojo.widget.a11y.Checkbox._onClick":{"_":{"meta":{"summary":"","src":"\t\t\tthis.onClick();","this":"dojo.widget.Checkbox"}}}}}},"dojo.widget.CiviCrmDatePicker":{"meta":{"requires":{"common":["dojo.widget.*","dojo.event.*","dojo.widget.DatePicker","dojo.widget.DatePicker","dojo.widget.TimePicker","dojo.html.common"]},"methods":{"dojo.widget.HtmlCiviCrmDatePicker":{"_":{"meta":{"summary":"","src":"\tthis.widgetType = \"CiviCrmDatePicker\";\n\tthis.idPrefix = \"scheduled_date_time\";\n\tthis.mode = \"datetime\"; \/\/ can also be date or time\n\n\tthis.datePicker = null;\n\tthis.timePicker = null;\n\n\t\/\/ html nodes\n\tthis.dateHolderTd = null;\n\tthis.timeHolderTd = null;\n\tthis.formItemsTd = null;\n\tthis.formItemsTr = null;\n\n\tthis.monthSelect = null;\n\tthis.daySelect = null;\n\tthis.yearSelect = null;\n\tthis.hourSelect = null;\n\tthis.minSelect = null;\n\tthis.apSelect = null;\n\n\tthis.templatePath = dojo.uri.dojoUri(\"src\/widget\/templates\/CiviCrmDatePicker.html\");\n\n\tthis.modeFormats = {\n\t\tdate: \"MdY\",\n\t\ttime: \"hiA\"\n\t};\n\n\tthis.formatMappings = {\n\t\t\"M\": \"monthSelect\",\n\t\t\"d\": \"daySelect\",\n\t\t\"Y\": \"yearSelect\",\n\t\t\"h\": \"hourSelect\",\n\t\t\"i\": \"minSelect\",\n\t\t\"A\": \"apSelect\"\n\t};\n\n\tthis.setDateSelects = function(){\n\t\tvar dateObj = this.datePicker.date;\n\t\tthis.monthSelect.value = new String(dateObj.getMonth()+1);\n\t\tthis.daySelect.value = new String(dateObj.getDate());\n\t\tthis.yearSelect.value = new String(dateObj.getFullYear());\n\t}\n\n\tthis.setTimeSelects = function(){\n\t\tvar st = this.timePicker.selectedTime;\n\t\tthis.hourSelect.value = new String(st.hour);\n\t\tthis.minSelect.value = new String(st.minute);\n\t\tthis.apSelect.value = st.amPm.toUpperCase();\n\t}\n\n\tthis.fillInTemplate = function(args, frag){\n\t\tvar nr = frag[\"dojo:\"+this.widgetType.toLowerCase()][\"nodeRef\"];\n\t\tvar sref = {};\n\t\twhile(nr.firstChild){\n\t\t\tif(nr.firstChild.name){\n\t\t\t\tsref[nr.firstChild.name] = nr.firstChild;\n\t\t\t}\n\t\t\tthis.formItemsTd.appendChild(nr.firstChild);\n\t\t}\n\n\t\tif(this.mode.indexOf(\"date\") != -1){\n\t\t\tthis.datePicker = dojo.widget.createWidget(\"DatePicker\", {}, this.dateHolderTd);\n\t\t\tdojo.event.connect(\tthis.datePicker, \"onSetDate\", \n\t\t\t\t\t\t\t\tthis, \"setDateSelects\");\n\n\t\t\tvar mfd = this.modeFormats.date;\n\t\t\tfor(var x=0; x<mfd.length; x++){\n\t\t\t\tthis[this.formatMappings[mfd[x]]] = sref[this.idPrefix+\"[\"+mfd[x]+\"]\"];\n\t\t\t}\n\t\t}\n\t\tif(this.mode.indexOf(\"time\") != -1){\n\t\t\tthis.timePicker = dojo.widget.createWidget(\"TimePicker\", {}, this.timeHolderTd);\n\t\t\tdojo.event.connect(\tthis.timePicker, \"onSetTime\", \n\t\t\t\t\t\t\t\tthis, \"setTimeSelects\");\n\t\t\tvar mfd = this.modeFormats.time;\n\t\t\tfor(var x=0; x<mfd.length; x++){\n\t\t\t\tthis[this.formatMappings[mfd[x]]] = sref[this.idPrefix+\"[\"+mfd[x]+\"]\"];\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.unhide = function(){\n\t\tthis.formItemsTr.style.display = \"\";\n\t}\n\n\tthis.postCreate = function(){\n\t\tdojo.event.kwConnect({\n\t\t\ttype: \"before\", \n\t\t\tsrcObj: dojo.html.getParentByType(this.domNode, \"form\"),\n\t\t\tsrcFunc: \"onsubmit\", \n\t\t\ttargetObj: this,\n\t\t\ttargetFunc: \"unhide\"\n\t\t});\n\t}","this_variables":["widgetType","idPrefix","mode","datePicker","timePicker","dateHolderTd","timeHolderTd","formItemsTd","formItemsTr","monthSelect","daySelect","yearSelect","hourSelect","minSelect","apSelect","templatePath","modeFormats","formatMappings","setDateSelects","monthSelect.value","daySelect.value","yearSelect.value","setTimeSelects","hourSelect.value","minSelect.value","apSelect.value","fillInTemplate","unhide","formItemsTr.style.display","postCreate"],"inherits":["dojo.widget.HtmlWidget"]}}},"dojo.widget.HtmlCiviCrmDatePicker.setDateSelects":{"_":{"meta":{"summary":"","src":"\t\tvar dateObj = this.datePicker.date;\n\t\tthis.monthSelect.value = new String(dateObj.getMonth()+1);\n\t\tthis.daySelect.value = new String(dateObj.getDate());\n\t\tthis.yearSelect.value = new String(dateObj.getFullYear());","this_variables":["monthSelect.value","daySelect.value","yearSelect.value"]}}},"dojo.widget.HtmlCiviCrmDatePicker.setTimeSelects":{"_":{"meta":{"summary":"","src":"\t\tvar st = this.timePicker.selectedTime;\n\t\tthis.hourSelect.value = new String(st.hour);\n\t\tthis.minSelect.value = new String(st.minute);\n\t\tthis.apSelect.value = st.amPm.toUpperCase();","this_variables":["hourSelect.value","minSelect.value","apSelect.value"]}}},"dojo.widget.HtmlCiviCrmDatePicker.fillInTemplate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tvar nr = frag[\"dojo:\"+this.widgetType.toLowerCase()][\"nodeRef\"];\n\t\tvar sref = {};\n\t\twhile(nr.firstChild){\n\t\t\tif(nr.firstChild.name){\n\t\t\t\tsref[nr.firstChild.name] = nr.firstChild;\n\t\t\t}\n\t\t\tthis.formItemsTd.appendChild(nr.firstChild);\n\t\t}\n\n\t\tif(this.mode.indexOf(\"date\") != -1){\n\t\t\tthis.datePicker = dojo.widget.createWidget(\"DatePicker\", {}, this.dateHolderTd);\n\t\t\tdojo.event.connect(\tthis.datePicker, \"onSetDate\", \n\t\t\t\t\t\t\t\tthis, \"setDateSelects\");\n\n\t\t\tvar mfd = this.modeFormats.date;\n\t\t\tfor(var x=0; x<mfd.length; x++){\n\t\t\t\tthis[this.formatMappings[mfd[x]]] = sref[this.idPrefix+\"[\"+mfd[x]+\"]\"];\n\t\t\t}\n\t\t}\n\t\tif(this.mode.indexOf(\"time\") != -1){\n\t\t\tthis.timePicker = dojo.widget.createWidget(\"TimePicker\", {}, this.timeHolderTd);\n\t\t\tdojo.event.connect(\tthis.timePicker, \"onSetTime\", \n\t\t\t\t\t\t\t\tthis, \"setTimeSelects\");\n\t\t\tvar mfd = this.modeFormats.time;\n\t\t\tfor(var x=0; x<mfd.length; x++){\n\t\t\t\tthis[this.formatMappings[mfd[x]]] = sref[this.idPrefix+\"[\"+mfd[x]+\"]\"];\n\t\t\t}\n\t\t}","this_variables":["datePicker","timePicker"]}}},"dojo.widget.HtmlCiviCrmDatePicker.unhide":{"_":{"meta":{"summary":"","src":"\t\tthis.formItemsTr.style.display = \"\";","this_variables":["formItemsTr.style.display"]}}},"dojo.widget.HtmlCiviCrmDatePicker.postCreate":{"_":{"meta":{"summary":"","src":"\t\tdojo.event.kwConnect({\n\t\t\ttype: \"before\", \n\t\t\tsrcObj: dojo.html.getParentByType(this.domNode, \"form\"),\n\t\t\tsrcFunc: \"onsubmit\", \n\t\t\ttargetObj: this,\n\t\t\ttargetFunc: \"unhide\"\n\t\t});"}}}}}},"dojo.widget.ColorPalette":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.Toolbar","dojo.html.layout","dojo.html.display","dojo.html.selection"]},"methods":{"dojo.widget.ToolbarColorDialog":{"_":{"meta":{"summary":"","inherits":["dojo.widget.ToolbarDialog"],"this_inherits":["dojo.widget.ToolbarDialog"]}}},"dojo.widget.ColorPalette":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}}}}},"dojo.widget.ComboBox":{"meta":{"requires":{"common":["dojo.widget.*","dojo.event.*","dojo.io.*","dojo.lfx.*","dojo.html.*","dojo.html.display","dojo.html.layout","dojo.html.iframe","dojo.string","dojo.widget.html.stabile","dojo.widget.Menu2"]},"methods":{"dojo.widget.ComboBox":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"],"protovariables":{"isContainer":"","forceValidOption":"","searchType":"","dataProvider":"","autoComplete":"","formInputName":"","name":"","textInputNode":"","comboBoxValue":"","comboBoxSelectionValue":"","optionsListWrapper":"","optionsListNode":"","downArrowNode":"","cbTableNode":"","searchTimer":"","searchDelay":"","dataUrl":"","fadeTime":"","maxListLength":"","mode":"","selectedResult":"","_highlighted_option":"","_prev_key_backspace":"","_prev_key_esc":"","_gotFocus":"","_mouseover_list":"","dataProviderClass":"","buttonSrc":"","dropdownToggle":"","templatePath":"","templateCssPath":""}}}},"dojo.widget.ComboBox.startSearch":{"_":{"meta":{"summary":"","parameters":{"searchString":{"type":""}},"src":"","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.selectNextResult":{"_":{"meta":{"summary":"","src":"","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.selectPrevResult":{"_":{"meta":{"summary":"","src":"","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.setSelectedResult":{"_":{"meta":{"summary":"","src":"","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.setValue":{"_":{"meta":{"summary":"","parameters":{"value":{"type":""}},"src":"\t\t\tthis.comboBoxValue.value = value;\n\t\t\tif (this.textInputNode.value != value) { \/\/ prevent mucking up of selection\n\t\t\t\tthis.textInputNode.value = value;\n\t\t\t}\n\t\t\tdojo.widget.html.stabile.setState(this.widgetId, this.getState(), true);\n\t\t\tthis.onValueChanged(value);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.HtmlWidget":{"_":{"meta":{"this_variables":["comboBoxValue.value","textInputNode.value","_prev_key_backspace","_prev_key_esc","searchTimer","_prev_key_backspace","_prev_key_esc","searchTimer","_prev_key_backspace","_prev_key_esc","searchTimer","_prev_key_backspace","_prev_key_esc","searchTimer","_prev_key_backspace","_prev_key_esc","searchTimer","_prev_key_backspace","_prev_key_esc","searchTimer","_prev_key_backspace","_prev_key_esc","searchTimer","_prev_key_backspace","_prev_key_esc","searchTimer","_prev_key_backspace","_prev_key_esc","searchTimer","_prev_key_backspace","_prev_key_esc","searchTimer","_prev_key_backspace","_prev_key_esc","searchTimer","_prev_key_backspace","_prev_key_esc","searchTimer","_prev_key_backspace","_prev_key_esc","searchTimer","_prev_key_backspace","_prev_key_esc","searchTimer","comboBoxSelectionValue.value","_highlighted_option","_highlighted_option","_highlighted_option","initialButtonSize","comboBoxValue.name","comboBoxSelectionValue.name","mode","dataProviderClass","dataProvider","popupWidget","optionsListNode","comboBoxValue.name","comboBoxSelectionValue.name","mode","dataProviderClass","dataProvider","popupWidget","optionsListNode","_hasFocus","_hasFocus","blurTimer","_mouseover_list","_mouseover_list","textInputNode.value","selectedResult","textInputNode.value","selectedResult","optionsListNode.innerHTML"]}}},"dojo.widget.ComboBox.onValueChanged":{"_":{"meta":{"summary":"","src":"","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.getValue":{"_":{"meta":{"summary":"","src":"\t\t\treturn this.comboBoxValue.value;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.getState":{"_":{"meta":{"summary":"","src":"\t\t\treturn {value: this.getValue()};","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.value":{"_":{"meta":{"summary":"","src":"\t\t\treturn {value: this.getValue()};","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.setState":{"_":{"meta":{"summary":"","parameters":{"state":{"type":""}},"src":"\t\t\tthis.setValue(state.value);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.getCaretPos":{"_":{"meta":{"summary":"","parameters":{"element":{"type":""}},"src":"\t\t\t\t\/\/ FIXME: this is totally borked on Moz < 1.3. Any recourse?\n\t\t\t\treturn element.selectionStart;\n\t\t\t}else if(dojo.render.html.ie){\n\t\t\t\t\/\/ in the case of a mouse click in a popup being handled,\n\t\t\t\t\/\/ then the document.selection is not the textarea, but the popup\n\t\t\t\t\/\/ var r = document.selection.createRange();\n\t\t\t\t\/\/ hack to get IE 6 to play nice. What a POS browser.\n\t\t\t\tvar tr = document.selection.createRange().duplicate();\n\t\t\t\tvar ntr = element.createTextRange();\n\t\t\t\ttr.move(\"character\",0);\n\t\t\t\tntr.move(\"character\",0);\n\t\t\t\ttry {\n\t\t\t\t\t\/\/ If control doesnt have focus, you get an exception.\n\t\t\t\t\t\/\/ Seems to happen on reverse-tab, but can also happen on tab (seems to be a race condition - only happens sometimes).\n\t\t\t\t\t\/\/ There appears to be no workaround for this - googled for quite a while.\n\t\t\t\t\tntr.setEndPoint(\"EndToEnd\", tr);\n\t\t\t\t\treturn String(ntr.text).replace(\/\\r\/g,\"\").length;\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn 0; \/\/ If focus has shifted, 0 is fine for caret pos.\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}","returns":"If focus has shifted, 0 is fine for caret pos.","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.setCaretPos":{"_":{"meta":{"summary":"","parameters":{"element":{"type":""},"location":{"type":""}},"src":"\t\t\tlocation = parseInt(location);\n\t\t\tthis.setSelectedRange(element, location, location);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.setSelectedRange":{"_":{"meta":{"summary":"","parameters":{"element":{"type":""},"start":{"type":""},"end":{"type":""}},"src":"\t\t\tif(!end){ end = element.value.length; }                                                                  \n\t\t\t\/\/ Mozilla\n\t\t\t\/\/ parts borrowed from http:\/\/www.faqts.com\/knowledge_base\/view.phtml\/aid\/13562\/fid\/130\n\t\t\tif(element.setSelectionRange){\n\t\t\t\telement.focus();\n\t\t\t\telement.setSelectionRange(start, end);\n\t\t\t}else if(element.createTextRange){ \/\/ IE\n\t\t\t\tvar range = element.createTextRange();\n\t\t\t\twith(range){\n\t\t\t\t\tcollapse(true);\n\t\t\t\t\tmoveEnd('character', end);\n\t\t\t\t\tmoveStart('character', start);\n\t\t\t\t\tselect();\n\t\t\t\t}\n\t\t\t}else{ \/\/otherwise try the event-creation hack (our own invention)\n\t\t\t\t\/\/ do we need these?\n\t\t\t\telement.value = element.value;\n\t\t\t\telement.blur();\n\t\t\t\telement.focus();\n\t\t\t\t\/\/ figure out how far back to go\n\t\t\t\tvar dist = parseInt(element.value.length)-end;\n\t\t\t\tvar tchar = String.fromCharCode(37);\n\t\t\t\tvar tcc = tchar.charCodeAt(0);\n\t\t\t\tfor(var x = 0; x < dist; x++){\n\t\t\t\t\tvar te = document.createEvent(\"KeyEvents\");\n\t\t\t\t\tte.initKeyEvent(\"keypress\", true, true, null, false, false, false, false, tcc, tcc);\n\t\t\t\t\telement.dispatchEvent(te);\n\t\t\t\t}\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox._handleKeyEvents":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif(evt.ctrlKey || evt.altKey){ return; }\n\n\t\t\t\/\/ reset these\n\t\t\tthis._prev_key_backspace = false;\n\t\t\tthis._prev_key_esc = false;\n\n\t\t\tvar k = dojo.event.browser.keys;\n\t\t\tvar doSearch = true;\n\n\t\t\t\/\/ mozilla quirk \n\t\t\t\/\/ space has no keyCode in mozilla\n\t\t\tvar keyCode = evt.keyCode;\n\t\t\tif(keyCode==0 && evt.charCode==k.KEY_SPACE){\n\t\t\t\tkeyCode = k.KEY_SPACE;\n\t\t\t}\n\t\t\t\/\/ Safari quirk. keyCodes for arrow keys are different\n\t\t\tif (dojo.render.html.safari) {\n\t\t\t\tswitch(keyCode) {\n\t\t\t\t\tcase 63232: keyCode = k.KEY_UP_ARROW; break;\n\t\t\t\t\tcase 63233: keyCode = k.KEY_DOWN_ARROW; break;\n\t\t\t\t}\n\t\t\t}\n\t\t\tswitch(keyCode){\n\t \t\t\tcase k.KEY_DOWN_ARROW:\n\t\t\t\t\tif(!this.popupWidget.isShowingNow){\n\t\t\t\t\t\tthis.startSearchFromInput();\n\t\t\t\t\t}\n\t\t\t\t\tthis.highlightNextOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_UP_ARROW:\n\t\t\t\t\tthis.highlightPrevOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_ENTER:\n\t\t\t\t\t\/\/ prevent submitting form if we press enter with list open\n\t\t\t\t\tif(this.popupWidget.isShowingNow){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t}\n\t\t\t\t\t\/\/ fallthrough\n\t\t\t\tcase k.KEY_TAB:\n\t\t\t\t\t\/\/ using linux alike tab for autocomplete\n\t\t\t\t\tif(!this.autoComplete && this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption({ 'target': this._highlighted_option, 'noHide': false});\n\t\n\t\t\t\t\t\t\/\/ put caret last\n\t\t\t\t\t\tthis.setSelectedRange(this.textInputNode, this.textInputNode.value.length, null);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_SPACE:\n\t\t\t\t\tif(this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_ESCAPE:\n\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\tthis._prev_key_esc = true;\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_BACKSPACE:\n\t\t\t\t\tthis._prev_key_backspace = true;\n\t\t\t\t\tif(!this.textInputNode.value.length){\n\t\t\t\t\t\tthis.setAllValues(\"\", \"\");\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_RIGHT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_LEFT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_SHIFT:\n\t\t\t\t\tdoSearch = false;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\/\/ non char keys (F1-F12 etc..)  shouldn't open list\n\t\t\t\t\tif(evt.charCode==0){\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.searchTimer){\n\t\t\t\tclearTimeout(this.searchTimer);\n\t\t\t}\n\t\t\tif(doSearch){\n\t\t\t\t\/\/ if we have gotten this far we dont want to keep our highlight\n\t\t\t\tthis.blurOptionNode();\n\t\n\t\t\t\t\/\/ need to wait a tad before start search so that the event bubbles through DOM and we have value visible\n\t\t\t\tthis.searchTimer = setTimeout(dojo.lang.hitch(this, this.startSearchFromInput), this.searchDelay);\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.63232":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif(evt.ctrlKey || evt.altKey){ return; }\n\n\t\t\t\/\/ reset these\n\t\t\tthis._prev_key_backspace = false;\n\t\t\tthis._prev_key_esc = false;\n\n\t\t\tvar k = dojo.event.browser.keys;\n\t\t\tvar doSearch = true;\n\n\t\t\t\/\/ mozilla quirk \n\t\t\t\/\/ space has no keyCode in mozilla\n\t\t\tvar keyCode = evt.keyCode;\n\t\t\tif(keyCode==0 && evt.charCode==k.KEY_SPACE){\n\t\t\t\tkeyCode = k.KEY_SPACE;\n\t\t\t}\n\t\t\t\/\/ Safari quirk. keyCodes for arrow keys are different\n\t\t\tif (dojo.render.html.safari) {\n\t\t\t\tswitch(keyCode) {\n\t\t\t\t\tcase 63232: keyCode = k.KEY_UP_ARROW; break;\n\t\t\t\t\tcase 63233: keyCode = k.KEY_DOWN_ARROW; break;\n\t\t\t\t}\n\t\t\t}\n\t\t\tswitch(keyCode){\n\t \t\t\tcase k.KEY_DOWN_ARROW:\n\t\t\t\t\tif(!this.popupWidget.isShowingNow){\n\t\t\t\t\t\tthis.startSearchFromInput();\n\t\t\t\t\t}\n\t\t\t\t\tthis.highlightNextOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_UP_ARROW:\n\t\t\t\t\tthis.highlightPrevOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_ENTER:\n\t\t\t\t\t\/\/ prevent submitting form if we press enter with list open\n\t\t\t\t\tif(this.popupWidget.isShowingNow){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t}\n\t\t\t\t\t\/\/ fallthrough\n\t\t\t\tcase k.KEY_TAB:\n\t\t\t\t\t\/\/ using linux alike tab for autocomplete\n\t\t\t\t\tif(!this.autoComplete && this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption({ 'target': this._highlighted_option, 'noHide': false});\n\t\n\t\t\t\t\t\t\/\/ put caret last\n\t\t\t\t\t\tthis.setSelectedRange(this.textInputNode, this.textInputNode.value.length, null);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_SPACE:\n\t\t\t\t\tif(this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_ESCAPE:\n\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\tthis._prev_key_esc = true;\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_BACKSPACE:\n\t\t\t\t\tthis._prev_key_backspace = true;\n\t\t\t\t\tif(!this.textInputNode.value.length){\n\t\t\t\t\t\tthis.setAllValues(\"\", \"\");\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_RIGHT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_LEFT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_SHIFT:\n\t\t\t\t\tdoSearch = false;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\/\/ non char keys (F1-F12 etc..)  shouldn't open list\n\t\t\t\t\tif(evt.charCode==0){\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.searchTimer){\n\t\t\t\tclearTimeout(this.searchTimer);\n\t\t\t}\n\t\t\tif(doSearch){\n\t\t\t\t\/\/ if we have gotten this far we dont want to keep our highlight\n\t\t\t\tthis.blurOptionNode();\n\t\n\t\t\t\t\/\/ need to wait a tad before start search so that the event bubbles through DOM and we have value visible\n\t\t\t\tthis.searchTimer = setTimeout(dojo.lang.hitch(this, this.startSearchFromInput), this.searchDelay);\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.63233":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif(evt.ctrlKey || evt.altKey){ return; }\n\n\t\t\t\/\/ reset these\n\t\t\tthis._prev_key_backspace = false;\n\t\t\tthis._prev_key_esc = false;\n\n\t\t\tvar k = dojo.event.browser.keys;\n\t\t\tvar doSearch = true;\n\n\t\t\t\/\/ mozilla quirk \n\t\t\t\/\/ space has no keyCode in mozilla\n\t\t\tvar keyCode = evt.keyCode;\n\t\t\tif(keyCode==0 && evt.charCode==k.KEY_SPACE){\n\t\t\t\tkeyCode = k.KEY_SPACE;\n\t\t\t}\n\t\t\t\/\/ Safari quirk. keyCodes for arrow keys are different\n\t\t\tif (dojo.render.html.safari) {\n\t\t\t\tswitch(keyCode) {\n\t\t\t\t\tcase 63232: keyCode = k.KEY_UP_ARROW; break;\n\t\t\t\t\tcase 63233: keyCode = k.KEY_DOWN_ARROW; break;\n\t\t\t\t}\n\t\t\t}\n\t\t\tswitch(keyCode){\n\t \t\t\tcase k.KEY_DOWN_ARROW:\n\t\t\t\t\tif(!this.popupWidget.isShowingNow){\n\t\t\t\t\t\tthis.startSearchFromInput();\n\t\t\t\t\t}\n\t\t\t\t\tthis.highlightNextOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_UP_ARROW:\n\t\t\t\t\tthis.highlightPrevOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_ENTER:\n\t\t\t\t\t\/\/ prevent submitting form if we press enter with list open\n\t\t\t\t\tif(this.popupWidget.isShowingNow){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t}\n\t\t\t\t\t\/\/ fallthrough\n\t\t\t\tcase k.KEY_TAB:\n\t\t\t\t\t\/\/ using linux alike tab for autocomplete\n\t\t\t\t\tif(!this.autoComplete && this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption({ 'target': this._highlighted_option, 'noHide': false});\n\t\n\t\t\t\t\t\t\/\/ put caret last\n\t\t\t\t\t\tthis.setSelectedRange(this.textInputNode, this.textInputNode.value.length, null);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_SPACE:\n\t\t\t\t\tif(this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_ESCAPE:\n\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\tthis._prev_key_esc = true;\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_BACKSPACE:\n\t\t\t\t\tthis._prev_key_backspace = true;\n\t\t\t\t\tif(!this.textInputNode.value.length){\n\t\t\t\t\t\tthis.setAllValues(\"\", \"\");\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_RIGHT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_LEFT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_SHIFT:\n\t\t\t\t\tdoSearch = false;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\/\/ non char keys (F1-F12 etc..)  shouldn't open list\n\t\t\t\t\tif(evt.charCode==0){\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.searchTimer){\n\t\t\t\tclearTimeout(this.searchTimer);\n\t\t\t}\n\t\t\tif(doSearch){\n\t\t\t\t\/\/ if we have gotten this far we dont want to keep our highlight\n\t\t\t\tthis.blurOptionNode();\n\t\n\t\t\t\t\/\/ need to wait a tad before start search so that the event bubbles through DOM and we have value visible\n\t\t\t\tthis.searchTimer = setTimeout(dojo.lang.hitch(this, this.startSearchFromInput), this.searchDelay);\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.k.KEY_DOWN_ARROW":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif(evt.ctrlKey || evt.altKey){ return; }\n\n\t\t\t\/\/ reset these\n\t\t\tthis._prev_key_backspace = false;\n\t\t\tthis._prev_key_esc = false;\n\n\t\t\tvar k = dojo.event.browser.keys;\n\t\t\tvar doSearch = true;\n\n\t\t\t\/\/ mozilla quirk \n\t\t\t\/\/ space has no keyCode in mozilla\n\t\t\tvar keyCode = evt.keyCode;\n\t\t\tif(keyCode==0 && evt.charCode==k.KEY_SPACE){\n\t\t\t\tkeyCode = k.KEY_SPACE;\n\t\t\t}\n\t\t\t\/\/ Safari quirk. keyCodes for arrow keys are different\n\t\t\tif (dojo.render.html.safari) {\n\t\t\t\tswitch(keyCode) {\n\t\t\t\t\tcase 63232: keyCode = k.KEY_UP_ARROW; break;\n\t\t\t\t\tcase 63233: keyCode = k.KEY_DOWN_ARROW; break;\n\t\t\t\t}\n\t\t\t}\n\t\t\tswitch(keyCode){\n\t \t\t\tcase k.KEY_DOWN_ARROW:\n\t\t\t\t\tif(!this.popupWidget.isShowingNow){\n\t\t\t\t\t\tthis.startSearchFromInput();\n\t\t\t\t\t}\n\t\t\t\t\tthis.highlightNextOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_UP_ARROW:\n\t\t\t\t\tthis.highlightPrevOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_ENTER:\n\t\t\t\t\t\/\/ prevent submitting form if we press enter with list open\n\t\t\t\t\tif(this.popupWidget.isShowingNow){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t}\n\t\t\t\t\t\/\/ fallthrough\n\t\t\t\tcase k.KEY_TAB:\n\t\t\t\t\t\/\/ using linux alike tab for autocomplete\n\t\t\t\t\tif(!this.autoComplete && this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption({ 'target': this._highlighted_option, 'noHide': false});\n\t\n\t\t\t\t\t\t\/\/ put caret last\n\t\t\t\t\t\tthis.setSelectedRange(this.textInputNode, this.textInputNode.value.length, null);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_SPACE:\n\t\t\t\t\tif(this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_ESCAPE:\n\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\tthis._prev_key_esc = true;\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_BACKSPACE:\n\t\t\t\t\tthis._prev_key_backspace = true;\n\t\t\t\t\tif(!this.textInputNode.value.length){\n\t\t\t\t\t\tthis.setAllValues(\"\", \"\");\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_RIGHT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_LEFT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_SHIFT:\n\t\t\t\t\tdoSearch = false;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\/\/ non char keys (F1-F12 etc..)  shouldn't open list\n\t\t\t\t\tif(evt.charCode==0){\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.searchTimer){\n\t\t\t\tclearTimeout(this.searchTimer);\n\t\t\t}\n\t\t\tif(doSearch){\n\t\t\t\t\/\/ if we have gotten this far we dont want to keep our highlight\n\t\t\t\tthis.blurOptionNode();\n\t\n\t\t\t\t\/\/ need to wait a tad before start search so that the event bubbles through DOM and we have value visible\n\t\t\t\tthis.searchTimer = setTimeout(dojo.lang.hitch(this, this.startSearchFromInput), this.searchDelay);\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.k.KEY_UP_ARROW":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif(evt.ctrlKey || evt.altKey){ return; }\n\n\t\t\t\/\/ reset these\n\t\t\tthis._prev_key_backspace = false;\n\t\t\tthis._prev_key_esc = false;\n\n\t\t\tvar k = dojo.event.browser.keys;\n\t\t\tvar doSearch = true;\n\n\t\t\t\/\/ mozilla quirk \n\t\t\t\/\/ space has no keyCode in mozilla\n\t\t\tvar keyCode = evt.keyCode;\n\t\t\tif(keyCode==0 && evt.charCode==k.KEY_SPACE){\n\t\t\t\tkeyCode = k.KEY_SPACE;\n\t\t\t}\n\t\t\t\/\/ Safari quirk. keyCodes for arrow keys are different\n\t\t\tif (dojo.render.html.safari) {\n\t\t\t\tswitch(keyCode) {\n\t\t\t\t\tcase 63232: keyCode = k.KEY_UP_ARROW; break;\n\t\t\t\t\tcase 63233: keyCode = k.KEY_DOWN_ARROW; break;\n\t\t\t\t}\n\t\t\t}\n\t\t\tswitch(keyCode){\n\t \t\t\tcase k.KEY_DOWN_ARROW:\n\t\t\t\t\tif(!this.popupWidget.isShowingNow){\n\t\t\t\t\t\tthis.startSearchFromInput();\n\t\t\t\t\t}\n\t\t\t\t\tthis.highlightNextOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_UP_ARROW:\n\t\t\t\t\tthis.highlightPrevOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_ENTER:\n\t\t\t\t\t\/\/ prevent submitting form if we press enter with list open\n\t\t\t\t\tif(this.popupWidget.isShowingNow){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t}\n\t\t\t\t\t\/\/ fallthrough\n\t\t\t\tcase k.KEY_TAB:\n\t\t\t\t\t\/\/ using linux alike tab for autocomplete\n\t\t\t\t\tif(!this.autoComplete && this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption({ 'target': this._highlighted_option, 'noHide': false});\n\t\n\t\t\t\t\t\t\/\/ put caret last\n\t\t\t\t\t\tthis.setSelectedRange(this.textInputNode, this.textInputNode.value.length, null);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_SPACE:\n\t\t\t\t\tif(this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_ESCAPE:\n\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\tthis._prev_key_esc = true;\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_BACKSPACE:\n\t\t\t\t\tthis._prev_key_backspace = true;\n\t\t\t\t\tif(!this.textInputNode.value.length){\n\t\t\t\t\t\tthis.setAllValues(\"\", \"\");\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_RIGHT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_LEFT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_SHIFT:\n\t\t\t\t\tdoSearch = false;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\/\/ non char keys (F1-F12 etc..)  shouldn't open list\n\t\t\t\t\tif(evt.charCode==0){\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.searchTimer){\n\t\t\t\tclearTimeout(this.searchTimer);\n\t\t\t}\n\t\t\tif(doSearch){\n\t\t\t\t\/\/ if we have gotten this far we dont want to keep our highlight\n\t\t\t\tthis.blurOptionNode();\n\t\n\t\t\t\t\/\/ need to wait a tad before start search so that the event bubbles through DOM and we have value visible\n\t\t\t\tthis.searchTimer = setTimeout(dojo.lang.hitch(this, this.startSearchFromInput), this.searchDelay);\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.k.KEY_ENTER":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif(evt.ctrlKey || evt.altKey){ return; }\n\n\t\t\t\/\/ reset these\n\t\t\tthis._prev_key_backspace = false;\n\t\t\tthis._prev_key_esc = false;\n\n\t\t\tvar k = dojo.event.browser.keys;\n\t\t\tvar doSearch = true;\n\n\t\t\t\/\/ mozilla quirk \n\t\t\t\/\/ space has no keyCode in mozilla\n\t\t\tvar keyCode = evt.keyCode;\n\t\t\tif(keyCode==0 && evt.charCode==k.KEY_SPACE){\n\t\t\t\tkeyCode = k.KEY_SPACE;\n\t\t\t}\n\t\t\t\/\/ Safari quirk. keyCodes for arrow keys are different\n\t\t\tif (dojo.render.html.safari) {\n\t\t\t\tswitch(keyCode) {\n\t\t\t\t\tcase 63232: keyCode = k.KEY_UP_ARROW; break;\n\t\t\t\t\tcase 63233: keyCode = k.KEY_DOWN_ARROW; break;\n\t\t\t\t}\n\t\t\t}\n\t\t\tswitch(keyCode){\n\t \t\t\tcase k.KEY_DOWN_ARROW:\n\t\t\t\t\tif(!this.popupWidget.isShowingNow){\n\t\t\t\t\t\tthis.startSearchFromInput();\n\t\t\t\t\t}\n\t\t\t\t\tthis.highlightNextOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_UP_ARROW:\n\t\t\t\t\tthis.highlightPrevOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_ENTER:\n\t\t\t\t\t\/\/ prevent submitting form if we press enter with list open\n\t\t\t\t\tif(this.popupWidget.isShowingNow){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t}\n\t\t\t\t\t\/\/ fallthrough\n\t\t\t\tcase k.KEY_TAB:\n\t\t\t\t\t\/\/ using linux alike tab for autocomplete\n\t\t\t\t\tif(!this.autoComplete && this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption({ 'target': this._highlighted_option, 'noHide': false});\n\t\n\t\t\t\t\t\t\/\/ put caret last\n\t\t\t\t\t\tthis.setSelectedRange(this.textInputNode, this.textInputNode.value.length, null);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_SPACE:\n\t\t\t\t\tif(this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_ESCAPE:\n\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\tthis._prev_key_esc = true;\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_BACKSPACE:\n\t\t\t\t\tthis._prev_key_backspace = true;\n\t\t\t\t\tif(!this.textInputNode.value.length){\n\t\t\t\t\t\tthis.setAllValues(\"\", \"\");\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_RIGHT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_LEFT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_SHIFT:\n\t\t\t\t\tdoSearch = false;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\/\/ non char keys (F1-F12 etc..)  shouldn't open list\n\t\t\t\t\tif(evt.charCode==0){\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.searchTimer){\n\t\t\t\tclearTimeout(this.searchTimer);\n\t\t\t}\n\t\t\tif(doSearch){\n\t\t\t\t\/\/ if we have gotten this far we dont want to keep our highlight\n\t\t\t\tthis.blurOptionNode();\n\t\n\t\t\t\t\/\/ need to wait a tad before start search so that the event bubbles through DOM and we have value visible\n\t\t\t\tthis.searchTimer = setTimeout(dojo.lang.hitch(this, this.startSearchFromInput), this.searchDelay);\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.k.KEY_TAB":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif(evt.ctrlKey || evt.altKey){ return; }\n\n\t\t\t\/\/ reset these\n\t\t\tthis._prev_key_backspace = false;\n\t\t\tthis._prev_key_esc = false;\n\n\t\t\tvar k = dojo.event.browser.keys;\n\t\t\tvar doSearch = true;\n\n\t\t\t\/\/ mozilla quirk \n\t\t\t\/\/ space has no keyCode in mozilla\n\t\t\tvar keyCode = evt.keyCode;\n\t\t\tif(keyCode==0 && evt.charCode==k.KEY_SPACE){\n\t\t\t\tkeyCode = k.KEY_SPACE;\n\t\t\t}\n\t\t\t\/\/ Safari quirk. keyCodes for arrow keys are different\n\t\t\tif (dojo.render.html.safari) {\n\t\t\t\tswitch(keyCode) {\n\t\t\t\t\tcase 63232: keyCode = k.KEY_UP_ARROW; break;\n\t\t\t\t\tcase 63233: keyCode = k.KEY_DOWN_ARROW; break;\n\t\t\t\t}\n\t\t\t}\n\t\t\tswitch(keyCode){\n\t \t\t\tcase k.KEY_DOWN_ARROW:\n\t\t\t\t\tif(!this.popupWidget.isShowingNow){\n\t\t\t\t\t\tthis.startSearchFromInput();\n\t\t\t\t\t}\n\t\t\t\t\tthis.highlightNextOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_UP_ARROW:\n\t\t\t\t\tthis.highlightPrevOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_ENTER:\n\t\t\t\t\t\/\/ prevent submitting form if we press enter with list open\n\t\t\t\t\tif(this.popupWidget.isShowingNow){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t}\n\t\t\t\t\t\/\/ fallthrough\n\t\t\t\tcase k.KEY_TAB:\n\t\t\t\t\t\/\/ using linux alike tab for autocomplete\n\t\t\t\t\tif(!this.autoComplete && this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption({ 'target': this._highlighted_option, 'noHide': false});\n\t\n\t\t\t\t\t\t\/\/ put caret last\n\t\t\t\t\t\tthis.setSelectedRange(this.textInputNode, this.textInputNode.value.length, null);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_SPACE:\n\t\t\t\t\tif(this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_ESCAPE:\n\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\tthis._prev_key_esc = true;\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_BACKSPACE:\n\t\t\t\t\tthis._prev_key_backspace = true;\n\t\t\t\t\tif(!this.textInputNode.value.length){\n\t\t\t\t\t\tthis.setAllValues(\"\", \"\");\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_RIGHT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_LEFT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_SHIFT:\n\t\t\t\t\tdoSearch = false;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\/\/ non char keys (F1-F12 etc..)  shouldn't open list\n\t\t\t\t\tif(evt.charCode==0){\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.searchTimer){\n\t\t\t\tclearTimeout(this.searchTimer);\n\t\t\t}\n\t\t\tif(doSearch){\n\t\t\t\t\/\/ if we have gotten this far we dont want to keep our highlight\n\t\t\t\tthis.blurOptionNode();\n\t\n\t\t\t\t\/\/ need to wait a tad before start search so that the event bubbles through DOM and we have value visible\n\t\t\t\tthis.searchTimer = setTimeout(dojo.lang.hitch(this, this.startSearchFromInput), this.searchDelay);\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.k.KEY_SPACE":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif(evt.ctrlKey || evt.altKey){ return; }\n\n\t\t\t\/\/ reset these\n\t\t\tthis._prev_key_backspace = false;\n\t\t\tthis._prev_key_esc = false;\n\n\t\t\tvar k = dojo.event.browser.keys;\n\t\t\tvar doSearch = true;\n\n\t\t\t\/\/ mozilla quirk \n\t\t\t\/\/ space has no keyCode in mozilla\n\t\t\tvar keyCode = evt.keyCode;\n\t\t\tif(keyCode==0 && evt.charCode==k.KEY_SPACE){\n\t\t\t\tkeyCode = k.KEY_SPACE;\n\t\t\t}\n\t\t\t\/\/ Safari quirk. keyCodes for arrow keys are different\n\t\t\tif (dojo.render.html.safari) {\n\t\t\t\tswitch(keyCode) {\n\t\t\t\t\tcase 63232: keyCode = k.KEY_UP_ARROW; break;\n\t\t\t\t\tcase 63233: keyCode = k.KEY_DOWN_ARROW; break;\n\t\t\t\t}\n\t\t\t}\n\t\t\tswitch(keyCode){\n\t \t\t\tcase k.KEY_DOWN_ARROW:\n\t\t\t\t\tif(!this.popupWidget.isShowingNow){\n\t\t\t\t\t\tthis.startSearchFromInput();\n\t\t\t\t\t}\n\t\t\t\t\tthis.highlightNextOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_UP_ARROW:\n\t\t\t\t\tthis.highlightPrevOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_ENTER:\n\t\t\t\t\t\/\/ prevent submitting form if we press enter with list open\n\t\t\t\t\tif(this.popupWidget.isShowingNow){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t}\n\t\t\t\t\t\/\/ fallthrough\n\t\t\t\tcase k.KEY_TAB:\n\t\t\t\t\t\/\/ using linux alike tab for autocomplete\n\t\t\t\t\tif(!this.autoComplete && this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption({ 'target': this._highlighted_option, 'noHide': false});\n\t\n\t\t\t\t\t\t\/\/ put caret last\n\t\t\t\t\t\tthis.setSelectedRange(this.textInputNode, this.textInputNode.value.length, null);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_SPACE:\n\t\t\t\t\tif(this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_ESCAPE:\n\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\tthis._prev_key_esc = true;\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_BACKSPACE:\n\t\t\t\t\tthis._prev_key_backspace = true;\n\t\t\t\t\tif(!this.textInputNode.value.length){\n\t\t\t\t\t\tthis.setAllValues(\"\", \"\");\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_RIGHT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_LEFT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_SHIFT:\n\t\t\t\t\tdoSearch = false;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\/\/ non char keys (F1-F12 etc..)  shouldn't open list\n\t\t\t\t\tif(evt.charCode==0){\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.searchTimer){\n\t\t\t\tclearTimeout(this.searchTimer);\n\t\t\t}\n\t\t\tif(doSearch){\n\t\t\t\t\/\/ if we have gotten this far we dont want to keep our highlight\n\t\t\t\tthis.blurOptionNode();\n\t\n\t\t\t\t\/\/ need to wait a tad before start search so that the event bubbles through DOM and we have value visible\n\t\t\t\tthis.searchTimer = setTimeout(dojo.lang.hitch(this, this.startSearchFromInput), this.searchDelay);\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.k.KEY_ESCAPE":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif(evt.ctrlKey || evt.altKey){ return; }\n\n\t\t\t\/\/ reset these\n\t\t\tthis._prev_key_backspace = false;\n\t\t\tthis._prev_key_esc = false;\n\n\t\t\tvar k = dojo.event.browser.keys;\n\t\t\tvar doSearch = true;\n\n\t\t\t\/\/ mozilla quirk \n\t\t\t\/\/ space has no keyCode in mozilla\n\t\t\tvar keyCode = evt.keyCode;\n\t\t\tif(keyCode==0 && evt.charCode==k.KEY_SPACE){\n\t\t\t\tkeyCode = k.KEY_SPACE;\n\t\t\t}\n\t\t\t\/\/ Safari quirk. keyCodes for arrow keys are different\n\t\t\tif (dojo.render.html.safari) {\n\t\t\t\tswitch(keyCode) {\n\t\t\t\t\tcase 63232: keyCode = k.KEY_UP_ARROW; break;\n\t\t\t\t\tcase 63233: keyCode = k.KEY_DOWN_ARROW; break;\n\t\t\t\t}\n\t\t\t}\n\t\t\tswitch(keyCode){\n\t \t\t\tcase k.KEY_DOWN_ARROW:\n\t\t\t\t\tif(!this.popupWidget.isShowingNow){\n\t\t\t\t\t\tthis.startSearchFromInput();\n\t\t\t\t\t}\n\t\t\t\t\tthis.highlightNextOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_UP_ARROW:\n\t\t\t\t\tthis.highlightPrevOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_ENTER:\n\t\t\t\t\t\/\/ prevent submitting form if we press enter with list open\n\t\t\t\t\tif(this.popupWidget.isShowingNow){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t}\n\t\t\t\t\t\/\/ fallthrough\n\t\t\t\tcase k.KEY_TAB:\n\t\t\t\t\t\/\/ using linux alike tab for autocomplete\n\t\t\t\t\tif(!this.autoComplete && this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption({ 'target': this._highlighted_option, 'noHide': false});\n\t\n\t\t\t\t\t\t\/\/ put caret last\n\t\t\t\t\t\tthis.setSelectedRange(this.textInputNode, this.textInputNode.value.length, null);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_SPACE:\n\t\t\t\t\tif(this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_ESCAPE:\n\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\tthis._prev_key_esc = true;\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_BACKSPACE:\n\t\t\t\t\tthis._prev_key_backspace = true;\n\t\t\t\t\tif(!this.textInputNode.value.length){\n\t\t\t\t\t\tthis.setAllValues(\"\", \"\");\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_RIGHT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_LEFT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_SHIFT:\n\t\t\t\t\tdoSearch = false;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\/\/ non char keys (F1-F12 etc..)  shouldn't open list\n\t\t\t\t\tif(evt.charCode==0){\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.searchTimer){\n\t\t\t\tclearTimeout(this.searchTimer);\n\t\t\t}\n\t\t\tif(doSearch){\n\t\t\t\t\/\/ if we have gotten this far we dont want to keep our highlight\n\t\t\t\tthis.blurOptionNode();\n\t\n\t\t\t\t\/\/ need to wait a tad before start search so that the event bubbles through DOM and we have value visible\n\t\t\t\tthis.searchTimer = setTimeout(dojo.lang.hitch(this, this.startSearchFromInput), this.searchDelay);\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.k.KEY_BACKSPACE":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif(evt.ctrlKey || evt.altKey){ return; }\n\n\t\t\t\/\/ reset these\n\t\t\tthis._prev_key_backspace = false;\n\t\t\tthis._prev_key_esc = false;\n\n\t\t\tvar k = dojo.event.browser.keys;\n\t\t\tvar doSearch = true;\n\n\t\t\t\/\/ mozilla quirk \n\t\t\t\/\/ space has no keyCode in mozilla\n\t\t\tvar keyCode = evt.keyCode;\n\t\t\tif(keyCode==0 && evt.charCode==k.KEY_SPACE){\n\t\t\t\tkeyCode = k.KEY_SPACE;\n\t\t\t}\n\t\t\t\/\/ Safari quirk. keyCodes for arrow keys are different\n\t\t\tif (dojo.render.html.safari) {\n\t\t\t\tswitch(keyCode) {\n\t\t\t\t\tcase 63232: keyCode = k.KEY_UP_ARROW; break;\n\t\t\t\t\tcase 63233: keyCode = k.KEY_DOWN_ARROW; break;\n\t\t\t\t}\n\t\t\t}\n\t\t\tswitch(keyCode){\n\t \t\t\tcase k.KEY_DOWN_ARROW:\n\t\t\t\t\tif(!this.popupWidget.isShowingNow){\n\t\t\t\t\t\tthis.startSearchFromInput();\n\t\t\t\t\t}\n\t\t\t\t\tthis.highlightNextOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_UP_ARROW:\n\t\t\t\t\tthis.highlightPrevOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_ENTER:\n\t\t\t\t\t\/\/ prevent submitting form if we press enter with list open\n\t\t\t\t\tif(this.popupWidget.isShowingNow){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t}\n\t\t\t\t\t\/\/ fallthrough\n\t\t\t\tcase k.KEY_TAB:\n\t\t\t\t\t\/\/ using linux alike tab for autocomplete\n\t\t\t\t\tif(!this.autoComplete && this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption({ 'target': this._highlighted_option, 'noHide': false});\n\t\n\t\t\t\t\t\t\/\/ put caret last\n\t\t\t\t\t\tthis.setSelectedRange(this.textInputNode, this.textInputNode.value.length, null);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_SPACE:\n\t\t\t\t\tif(this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_ESCAPE:\n\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\tthis._prev_key_esc = true;\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_BACKSPACE:\n\t\t\t\t\tthis._prev_key_backspace = true;\n\t\t\t\t\tif(!this.textInputNode.value.length){\n\t\t\t\t\t\tthis.setAllValues(\"\", \"\");\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_RIGHT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_LEFT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_SHIFT:\n\t\t\t\t\tdoSearch = false;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\/\/ non char keys (F1-F12 etc..)  shouldn't open list\n\t\t\t\t\tif(evt.charCode==0){\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.searchTimer){\n\t\t\t\tclearTimeout(this.searchTimer);\n\t\t\t}\n\t\t\tif(doSearch){\n\t\t\t\t\/\/ if we have gotten this far we dont want to keep our highlight\n\t\t\t\tthis.blurOptionNode();\n\t\n\t\t\t\t\/\/ need to wait a tad before start search so that the event bubbles through DOM and we have value visible\n\t\t\t\tthis.searchTimer = setTimeout(dojo.lang.hitch(this, this.startSearchFromInput), this.searchDelay);\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.k.KEY_RIGHT_ARROW":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif(evt.ctrlKey || evt.altKey){ return; }\n\n\t\t\t\/\/ reset these\n\t\t\tthis._prev_key_backspace = false;\n\t\t\tthis._prev_key_esc = false;\n\n\t\t\tvar k = dojo.event.browser.keys;\n\t\t\tvar doSearch = true;\n\n\t\t\t\/\/ mozilla quirk \n\t\t\t\/\/ space has no keyCode in mozilla\n\t\t\tvar keyCode = evt.keyCode;\n\t\t\tif(keyCode==0 && evt.charCode==k.KEY_SPACE){\n\t\t\t\tkeyCode = k.KEY_SPACE;\n\t\t\t}\n\t\t\t\/\/ Safari quirk. keyCodes for arrow keys are different\n\t\t\tif (dojo.render.html.safari) {\n\t\t\t\tswitch(keyCode) {\n\t\t\t\t\tcase 63232: keyCode = k.KEY_UP_ARROW; break;\n\t\t\t\t\tcase 63233: keyCode = k.KEY_DOWN_ARROW; break;\n\t\t\t\t}\n\t\t\t}\n\t\t\tswitch(keyCode){\n\t \t\t\tcase k.KEY_DOWN_ARROW:\n\t\t\t\t\tif(!this.popupWidget.isShowingNow){\n\t\t\t\t\t\tthis.startSearchFromInput();\n\t\t\t\t\t}\n\t\t\t\t\tthis.highlightNextOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_UP_ARROW:\n\t\t\t\t\tthis.highlightPrevOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_ENTER:\n\t\t\t\t\t\/\/ prevent submitting form if we press enter with list open\n\t\t\t\t\tif(this.popupWidget.isShowingNow){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t}\n\t\t\t\t\t\/\/ fallthrough\n\t\t\t\tcase k.KEY_TAB:\n\t\t\t\t\t\/\/ using linux alike tab for autocomplete\n\t\t\t\t\tif(!this.autoComplete && this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption({ 'target': this._highlighted_option, 'noHide': false});\n\t\n\t\t\t\t\t\t\/\/ put caret last\n\t\t\t\t\t\tthis.setSelectedRange(this.textInputNode, this.textInputNode.value.length, null);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_SPACE:\n\t\t\t\t\tif(this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_ESCAPE:\n\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\tthis._prev_key_esc = true;\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_BACKSPACE:\n\t\t\t\t\tthis._prev_key_backspace = true;\n\t\t\t\t\tif(!this.textInputNode.value.length){\n\t\t\t\t\t\tthis.setAllValues(\"\", \"\");\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_RIGHT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_LEFT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_SHIFT:\n\t\t\t\t\tdoSearch = false;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\/\/ non char keys (F1-F12 etc..)  shouldn't open list\n\t\t\t\t\tif(evt.charCode==0){\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.searchTimer){\n\t\t\t\tclearTimeout(this.searchTimer);\n\t\t\t}\n\t\t\tif(doSearch){\n\t\t\t\t\/\/ if we have gotten this far we dont want to keep our highlight\n\t\t\t\tthis.blurOptionNode();\n\t\n\t\t\t\t\/\/ need to wait a tad before start search so that the event bubbles through DOM and we have value visible\n\t\t\t\tthis.searchTimer = setTimeout(dojo.lang.hitch(this, this.startSearchFromInput), this.searchDelay);\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.k.KEY_LEFT_ARROW":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif(evt.ctrlKey || evt.altKey){ return; }\n\n\t\t\t\/\/ reset these\n\t\t\tthis._prev_key_backspace = false;\n\t\t\tthis._prev_key_esc = false;\n\n\t\t\tvar k = dojo.event.browser.keys;\n\t\t\tvar doSearch = true;\n\n\t\t\t\/\/ mozilla quirk \n\t\t\t\/\/ space has no keyCode in mozilla\n\t\t\tvar keyCode = evt.keyCode;\n\t\t\tif(keyCode==0 && evt.charCode==k.KEY_SPACE){\n\t\t\t\tkeyCode = k.KEY_SPACE;\n\t\t\t}\n\t\t\t\/\/ Safari quirk. keyCodes for arrow keys are different\n\t\t\tif (dojo.render.html.safari) {\n\t\t\t\tswitch(keyCode) {\n\t\t\t\t\tcase 63232: keyCode = k.KEY_UP_ARROW; break;\n\t\t\t\t\tcase 63233: keyCode = k.KEY_DOWN_ARROW; break;\n\t\t\t\t}\n\t\t\t}\n\t\t\tswitch(keyCode){\n\t \t\t\tcase k.KEY_DOWN_ARROW:\n\t\t\t\t\tif(!this.popupWidget.isShowingNow){\n\t\t\t\t\t\tthis.startSearchFromInput();\n\t\t\t\t\t}\n\t\t\t\t\tthis.highlightNextOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_UP_ARROW:\n\t\t\t\t\tthis.highlightPrevOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_ENTER:\n\t\t\t\t\t\/\/ prevent submitting form if we press enter with list open\n\t\t\t\t\tif(this.popupWidget.isShowingNow){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t}\n\t\t\t\t\t\/\/ fallthrough\n\t\t\t\tcase k.KEY_TAB:\n\t\t\t\t\t\/\/ using linux alike tab for autocomplete\n\t\t\t\t\tif(!this.autoComplete && this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption({ 'target': this._highlighted_option, 'noHide': false});\n\t\n\t\t\t\t\t\t\/\/ put caret last\n\t\t\t\t\t\tthis.setSelectedRange(this.textInputNode, this.textInputNode.value.length, null);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_SPACE:\n\t\t\t\t\tif(this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_ESCAPE:\n\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\tthis._prev_key_esc = true;\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_BACKSPACE:\n\t\t\t\t\tthis._prev_key_backspace = true;\n\t\t\t\t\tif(!this.textInputNode.value.length){\n\t\t\t\t\t\tthis.setAllValues(\"\", \"\");\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_RIGHT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_LEFT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_SHIFT:\n\t\t\t\t\tdoSearch = false;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\/\/ non char keys (F1-F12 etc..)  shouldn't open list\n\t\t\t\t\tif(evt.charCode==0){\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.searchTimer){\n\t\t\t\tclearTimeout(this.searchTimer);\n\t\t\t}\n\t\t\tif(doSearch){\n\t\t\t\t\/\/ if we have gotten this far we dont want to keep our highlight\n\t\t\t\tthis.blurOptionNode();\n\t\n\t\t\t\t\/\/ need to wait a tad before start search so that the event bubbles through DOM and we have value visible\n\t\t\t\tthis.searchTimer = setTimeout(dojo.lang.hitch(this, this.startSearchFromInput), this.searchDelay);\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.k.KEY_SHIFT":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif(evt.ctrlKey || evt.altKey){ return; }\n\n\t\t\t\/\/ reset these\n\t\t\tthis._prev_key_backspace = false;\n\t\t\tthis._prev_key_esc = false;\n\n\t\t\tvar k = dojo.event.browser.keys;\n\t\t\tvar doSearch = true;\n\n\t\t\t\/\/ mozilla quirk \n\t\t\t\/\/ space has no keyCode in mozilla\n\t\t\tvar keyCode = evt.keyCode;\n\t\t\tif(keyCode==0 && evt.charCode==k.KEY_SPACE){\n\t\t\t\tkeyCode = k.KEY_SPACE;\n\t\t\t}\n\t\t\t\/\/ Safari quirk. keyCodes for arrow keys are different\n\t\t\tif (dojo.render.html.safari) {\n\t\t\t\tswitch(keyCode) {\n\t\t\t\t\tcase 63232: keyCode = k.KEY_UP_ARROW; break;\n\t\t\t\t\tcase 63233: keyCode = k.KEY_DOWN_ARROW; break;\n\t\t\t\t}\n\t\t\t}\n\t\t\tswitch(keyCode){\n\t \t\t\tcase k.KEY_DOWN_ARROW:\n\t\t\t\t\tif(!this.popupWidget.isShowingNow){\n\t\t\t\t\t\tthis.startSearchFromInput();\n\t\t\t\t\t}\n\t\t\t\t\tthis.highlightNextOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_UP_ARROW:\n\t\t\t\t\tthis.highlightPrevOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_ENTER:\n\t\t\t\t\t\/\/ prevent submitting form if we press enter with list open\n\t\t\t\t\tif(this.popupWidget.isShowingNow){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t}\n\t\t\t\t\t\/\/ fallthrough\n\t\t\t\tcase k.KEY_TAB:\n\t\t\t\t\t\/\/ using linux alike tab for autocomplete\n\t\t\t\t\tif(!this.autoComplete && this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption({ 'target': this._highlighted_option, 'noHide': false});\n\t\n\t\t\t\t\t\t\/\/ put caret last\n\t\t\t\t\t\tthis.setSelectedRange(this.textInputNode, this.textInputNode.value.length, null);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_SPACE:\n\t\t\t\t\tif(this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_ESCAPE:\n\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\tthis._prev_key_esc = true;\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_BACKSPACE:\n\t\t\t\t\tthis._prev_key_backspace = true;\n\t\t\t\t\tif(!this.textInputNode.value.length){\n\t\t\t\t\t\tthis.setAllValues(\"\", \"\");\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_RIGHT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_LEFT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_SHIFT:\n\t\t\t\t\tdoSearch = false;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\/\/ non char keys (F1-F12 etc..)  shouldn't open list\n\t\t\t\t\tif(evt.charCode==0){\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.searchTimer){\n\t\t\t\tclearTimeout(this.searchTimer);\n\t\t\t}\n\t\t\tif(doSearch){\n\t\t\t\t\/\/ if we have gotten this far we dont want to keep our highlight\n\t\t\t\tthis.blurOptionNode();\n\t\n\t\t\t\t\/\/ need to wait a tad before start search so that the event bubbles through DOM and we have value visible\n\t\t\t\tthis.searchTimer = setTimeout(dojo.lang.hitch(this, this.startSearchFromInput), this.searchDelay);\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.default":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif(evt.ctrlKey || evt.altKey){ return; }\n\n\t\t\t\/\/ reset these\n\t\t\tthis._prev_key_backspace = false;\n\t\t\tthis._prev_key_esc = false;\n\n\t\t\tvar k = dojo.event.browser.keys;\n\t\t\tvar doSearch = true;\n\n\t\t\t\/\/ mozilla quirk \n\t\t\t\/\/ space has no keyCode in mozilla\n\t\t\tvar keyCode = evt.keyCode;\n\t\t\tif(keyCode==0 && evt.charCode==k.KEY_SPACE){\n\t\t\t\tkeyCode = k.KEY_SPACE;\n\t\t\t}\n\t\t\t\/\/ Safari quirk. keyCodes for arrow keys are different\n\t\t\tif (dojo.render.html.safari) {\n\t\t\t\tswitch(keyCode) {\n\t\t\t\t\tcase 63232: keyCode = k.KEY_UP_ARROW; break;\n\t\t\t\t\tcase 63233: keyCode = k.KEY_DOWN_ARROW; break;\n\t\t\t\t}\n\t\t\t}\n\t\t\tswitch(keyCode){\n\t \t\t\tcase k.KEY_DOWN_ARROW:\n\t\t\t\t\tif(!this.popupWidget.isShowingNow){\n\t\t\t\t\t\tthis.startSearchFromInput();\n\t\t\t\t\t}\n\t\t\t\t\tthis.highlightNextOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_UP_ARROW:\n\t\t\t\t\tthis.highlightPrevOption();\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_ENTER:\n\t\t\t\t\t\/\/ prevent submitting form if we press enter with list open\n\t\t\t\t\tif(this.popupWidget.isShowingNow){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t}\n\t\t\t\t\t\/\/ fallthrough\n\t\t\t\tcase k.KEY_TAB:\n\t\t\t\t\t\/\/ using linux alike tab for autocomplete\n\t\t\t\t\tif(!this.autoComplete && this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption({ 'target': this._highlighted_option, 'noHide': false});\n\t\n\t\t\t\t\t\t\/\/ put caret last\n\t\t\t\t\t\tthis.setSelectedRange(this.textInputNode, this.textInputNode.value.length, null);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_SPACE:\n\t\t\t\t\tif(this.popupWidget.isShowingNow && this._highlighted_option){\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tthis.selectOption();\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_ESCAPE:\n\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\tthis._prev_key_esc = true;\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_BACKSPACE:\n\t\t\t\t\tthis._prev_key_backspace = true;\n\t\t\t\t\tif(!this.textInputNode.value.length){\n\t\t\t\t\t\tthis.setAllValues(\"\", \"\");\n\t\t\t\t\t\tthis.hideResultList();\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase k.KEY_RIGHT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_LEFT_ARROW: \/\/ fall through\n\t\t\t\tcase k.KEY_SHIFT:\n\t\t\t\t\tdoSearch = false;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\/\/ non char keys (F1-F12 etc..)  shouldn't open list\n\t\t\t\t\tif(evt.charCode==0){\n\t\t\t\t\t\tdoSearch = false;\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.searchTimer){\n\t\t\t\tclearTimeout(this.searchTimer);\n\t\t\t}\n\t\t\tif(doSearch){\n\t\t\t\t\/\/ if we have gotten this far we dont want to keep our highlight\n\t\t\t\tthis.blurOptionNode();\n\t\n\t\t\t\t\/\/ need to wait a tad before start search so that the event bubbles through DOM and we have value visible\n\t\t\t\tthis.searchTimer = setTimeout(dojo.lang.hitch(this, this.startSearchFromInput), this.searchDelay);\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.onKeyDown":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\t\tthis._handleKeyEvents(evt);\n\t\t\t}\n\t\t\t\/\/ FIXME: What about ESC ??","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.onKeyPress":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif(document.createEvent){            \n\t\t\t\tthis._handleKeyEvents(evt);\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.compositionEnd":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tthis._handleKeyEvents(evt);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.onKeyUp":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tthis.setValue(this.textInputNode.value);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.setSelectedValue":{"_":{"meta":{"summary":"","parameters":{"value":{"type":""}},"src":"","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.setAllValues":{"_":{"meta":{"summary":"","parameters":{"value1":{"type":""},"value2":{"type":""}},"src":"\t\t\tthis.setValue(value1);\n\t\t\tthis.setSelectedValue(value2);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.focusOptionNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\t\tif(this._highlighted_option != node){\n\t\t\t\tthis.blurOptionNode();\n\t\t\t\tthis._highlighted_option = node;\n\t\t\t\tdojo.html.addClass(this._highlighted_option, \"dojoComboBoxItemHighlight\");\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.blurOptionNode":{"_":{"meta":{"summary":"","src":"\t\t\tif(this._highlighted_option){\n\t\t\t\tdojo.html.removeClass(this._highlighted_option, \"dojoComboBoxItemHighlight\");\n\t\t\t\tthis._highlighted_option = null;\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.highlightNextOption":{"_":{"meta":{"summary":"","src":"\t\t\tif((!this._highlighted_option) || !this._highlighted_option.parentNode){\n\t\t\t\tthis.focusOptionNode(this.optionsListNode.firstChild);\n\t\t\t}else if(this._highlighted_option.nextSibling){\n\t\t\t\tthis.focusOptionNode(this._highlighted_option.nextSibling);\n\t\t\t}\n\t\t\tdojo.html.scrollIntoView(this._highlighted_option);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.highlightPrevOption":{"_":{"meta":{"summary":"","src":"\t\t\tif(this._highlighted_option && this._highlighted_option.previousSibling){\n\t\t\t\tthis.focusOptionNode(this._highlighted_option.previousSibling);\n\t\t\t}else{\n\t\t\t\tthis._highlighted_option = null;\n\t\t\t\tthis.hideResultList();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdojo.html.scrollIntoView(this._highlighted_option);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.itemMouseOver":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif (evt.target === this.optionsListNode) { return; }\n\t\t\tthis.focusOptionNode(evt.target);\n\t\t\tdojo.html.addClass(this._highlighted_option, \"dojoComboBoxItemHighlight\");","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.itemMouseOut":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif (evt.target === this.optionsListNode) { return; }\n\t\t\tthis.blurOptionNode();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.onResize":{"_":{"meta":{"summary":"","src":"\t\t\tvar inputSize = dojo.html.getBorderBox(this.textInputNode);\n\t\t\tvar buttonSize = { width: inputSize.height, height: inputSize.height};\n\t\t\tdojo.html.setMarginBox(this.downArrowNode, buttonSize);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.width":{"_":{"meta":{"summary":"","src":"\t\t\tvar inputSize = dojo.html.getBorderBox(this.textInputNode);\n\t\t\tvar buttonSize = { width: inputSize.height, height: inputSize.height};\n\t\t\tdojo.html.setMarginBox(this.downArrowNode, buttonSize);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.postMixInProperties":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\t\tthis.inherited(\"postMixInProperties\", [args, frag]); \n\n\t\t\t\/\/ set image size before instantiating template;\n\t\t\t\/\/ changing it afterwards doesn't work on FF\n\t\t\tvar inputNode = this.getFragNodeRef(frag);\n\t\t\tvar inputSize = dojo.html.getBorderBox(inputNode);\n\t\t\tthis.initialButtonSize = inputSize.height + \"px\";","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.fillInTemplate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\t\tthis.comboBoxSelectionValue.name = this.name+\"_selected\";\n\n\t\t\tvar source = this.getFragNodeRef(frag);\n\t\t\tdojo.html.copyStyle(this.textInputNode, source);\n\n\t\t\tvar dpClass;\n\t\t\tif(this.mode == \"remote\"){\n\t\t\t\tdpClass = dojo.widget.incrementalComboBoxDataProvider;\n\t\t\t}else if(typeof this.dataProviderClass == \"string\"){\n\t\t\t\tdpClass = dojo.evalObjPath(this.dataProviderClass)\n\t\t\t}else{\n\t\t\t\tdpClass = this.dataProviderClass;\n\t\t\t}\n\t\t\tthis.dataProvider = new dpClass();\n\t\t\tthis.dataProvider.init(this, this.getFragNodeRef(frag));\n\n\t\t\tthis.popupWidget = new dojo.widget.createWidget(\"PopupContainer\", \n\t\t\t\t{toggle: this.dropdownToggle, toggleDuration: this.toggleDuration});\n\t\t\tdojo.event.connect(this, 'destroy', this.popupWidget, 'destroy');\n\t\t\tthis.optionsListNode = this.popupWidget.domNode;\n\t\t\tthis.domNode.appendChild(this.optionsListNode);\n\t\t\tdojo.html.addClass(this.optionsListNode, 'dojoComboBoxOptions');\n\t\t\tdojo.event.connect(this.optionsListNode, 'onclick', this, 'selectOption');\n\t\t\tdojo.event.connect(this.optionsListNode, 'onmouseover', this, '_onMouseOver');\n\t\t\tdojo.event.connect(this.optionsListNode, 'onmouseout', this, '_onMouseOut');\n\t\t\t\n\t\t\tdojo.event.connect(this.optionsListNode, \"onmouseover\", this, \"itemMouseOver\");\n\t\t\tdojo.event.connect(this.optionsListNode, \"onmouseout\", this, \"itemMouseOut\");","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.toggle":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\t\tthis.comboBoxSelectionValue.name = this.name+\"_selected\";\n\n\t\t\tvar source = this.getFragNodeRef(frag);\n\t\t\tdojo.html.copyStyle(this.textInputNode, source);\n\n\t\t\tvar dpClass;\n\t\t\tif(this.mode == \"remote\"){\n\t\t\t\tdpClass = dojo.widget.incrementalComboBoxDataProvider;\n\t\t\t}else if(typeof this.dataProviderClass == \"string\"){\n\t\t\t\tdpClass = dojo.evalObjPath(this.dataProviderClass)\n\t\t\t}else{\n\t\t\t\tdpClass = this.dataProviderClass;\n\t\t\t}\n\t\t\tthis.dataProvider = new dpClass();\n\t\t\tthis.dataProvider.init(this, this.getFragNodeRef(frag));\n\n\t\t\tthis.popupWidget = new dojo.widget.createWidget(\"PopupContainer\", \n\t\t\t\t{toggle: this.dropdownToggle, toggleDuration: this.toggleDuration});\n\t\t\tdojo.event.connect(this, 'destroy', this.popupWidget, 'destroy');\n\t\t\tthis.optionsListNode = this.popupWidget.domNode;\n\t\t\tthis.domNode.appendChild(this.optionsListNode);\n\t\t\tdojo.html.addClass(this.optionsListNode, 'dojoComboBoxOptions');\n\t\t\tdojo.event.connect(this.optionsListNode, 'onclick', this, 'selectOption');\n\t\t\tdojo.event.connect(this.optionsListNode, 'onmouseover', this, '_onMouseOver');\n\t\t\tdojo.event.connect(this.optionsListNode, 'onmouseout', this, '_onMouseOut');\n\t\t\t\n\t\t\tdojo.event.connect(this.optionsListNode, \"onmouseover\", this, \"itemMouseOver\");\n\t\t\tdojo.event.connect(this.optionsListNode, \"onmouseout\", this, \"itemMouseOut\");","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.focus":{"_":{"meta":{"summary":" set focus to input node from code","src":"","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.openResultList":{"_":{"meta":{"summary":"","parameters":{"results":{"type":""}},"src":"\t\t\tthis.clearResultList();\n\t\t\tif(!results.length){\n\t\t\t\tthis.hideResultList();\n\t\t\t}\n\n\t\t\tif(\t(this.autoComplete)&&\n\t\t\t\t(results.length)&&\n\t\t\t\t(!this._prev_key_backspace)&&\n\t\t\t\t(this.textInputNode.value.length > 0)){\n\t\t\t\tvar cpos = this.getCaretPos(this.textInputNode);\n\t\t\t\t\/\/ only try to extend if we added the last character at the end of the input\n\t\t\t\tif((cpos+1) > this.textInputNode.value.length){\n\t\t\t\t\t\/\/ only add to input node as we would overwrite Capitalisation of chars\n\t\t\t\t\tthis.textInputNode.value += results[0][0].substr(cpos);\n\t\t\t\t\t\/\/ build a new range that has the distance from the earlier\n\t\t\t\t\t\/\/ caret position to the end of the first string selected\n\t\t\t\t\tthis.setSelectedRange(this.textInputNode, cpos, this.textInputNode.value.length);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar even = true;\n\t\t\twhile(results.length){\n\t\t\t\tvar tr = results.shift();\n\t\t\t\tif(tr){\n\t\t\t\t\tvar td = document.createElement(\"div\");\n\t\t\t\t\ttd.appendChild(document.createTextNode(tr[0]));\n\t\t\t\t\ttd.setAttribute(\"resultName\", tr[0]);\n\t\t\t\t\ttd.setAttribute(\"resultValue\", tr[1]);\n\t\t\t\t\ttd.className = \"dojoComboBoxItem \"+((even) ? \"dojoComboBoxItemEven\" : \"dojoComboBoxItemOdd\");\n\t\t\t\t\teven = (!even);\n\t\t\t\t\tthis.optionsListNode.appendChild(td);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t\/\/ show our list (only if we have content, else nothing)\n\t\t\tthis.showResultList();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.onFocusInput":{"_":{"meta":{"summary":"","src":"\t\t\tthis._hasFocus = true;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.onBlurInput":{"_":{"meta":{"summary":"","src":"\t\t\tthis._hasFocus = false;\n\t\t\tthis._handleBlurTimer(true, 500);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox._handleBlurTimer":{"_":{"meta":{"summary":"","parameters":{"clear":{"type":"Boolean"},"millisec":{"type":"Number"}},"src":"\t\t\tif(this.blurTimer && (clear || millisec)){\n\t\t\t\tclearTimeout(this.blurTimer);\n\t\t\t}\n\t\t\tif(millisec){ \/\/ we ignore that zero is false and never sets as that never happens in this widget\n\t\t\t\tthis.blurTimer = dojo.lang.setTimeout(this, \"checkBlurred\", millisec);\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox._onMouseOver":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif(!this._mouseover_list){\n\t\t\t\tthis._handleBlurTimer(true, 0);\n\t\t\t\tthis._mouseover_list = true;\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox._onMouseOut":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar relTarget = evt.relatedTarget;\n\t\t\tif(!relTarget || relTarget.parentNode!=this.optionsListNode){\n\t\t\t\tthis._mouseover_list = false;\n\t\t\t\tthis._handleBlurTimer(true, 100);\n\t\t\t\tthis.tryFocus();\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox._isInputEqualToResult":{"_":{"meta":{"summary":"","parameters":{"result":{"type":""}},"src":"\t\t\tvar input = this.textInputNode.value;\n\t\t\tif(!this.dataProvider.caseSensitive){\n\t\t\t\tinput = input.toLowerCase();\n\t\t\t\tresult = result.toLowerCase();\n\t\t\t}\n\t\t\treturn (input == result);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox._isValidOption":{"_":{"meta":{"summary":"","src":"\t\t\tvar tgt = dojo.html.firstElement(this.optionsListNode);\n\t\t\tvar isValidOption = false;\n\t\t\tvar tgt = dojo.html.firstElement(this.optionsListNode);\n\t\t\tvar isValidOption = false;\n\t\t\twhile(!isValidOption && tgt){\n\t\t\t\tif(this._isInputEqualToResult(tgt.getAttribute(\"resultName\"))){\n\t\t\t\t\tisValidOption = true;\n\t\t\t\t}else{\n\t\t\t\t\ttgt = dojo.html.nextElement(tgt);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn isValidOption;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.checkBlurred":{"_":{"meta":{"summary":"","src":"\t\t\tif(!this._hasFocus && !this._mouseover_list){\n\t\t\t\tthis.hideResultList();\n\t\t\t\t\/\/ clear the list if the user empties field and moves away.\n\t\t\t\tif(!this.textInputNode.value.length){\n\t\t\t\t\tthis.setAllValues(\"\", \"\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar isValidOption = this._isValidOption();\n\t\t\t\t\/\/ enforce selection from option list\n\t\t\t\tif(this.forceValidOption && !isValidOption){\n\t\t\t\t\tthis.setAllValues(\"\", \"\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(!isValidOption){\/\/ clear\n\t\t\t\t\tthis.setSelectedValue(\"\");\n\t\t\t\t}\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.sizeBackgroundIframe":{"_":{"meta":{"summary":"","src":"\t\t\tvar mb = dojo.html.getMarginBox(this.optionsListNode);\n\t\t\tif( mb.width==0 || mb.height==0 ){\n\t\t\t\t\/\/ need more time to calculate size\n\t\t\t\tdojo.lang.setTimeout(this, \"sizeBackgroundIframe\", 100);\n\t\t\t\treturn;\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.selectOption":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar tgt = null;\n\t\t\tif(!evt){\n\t\t\t\tevt = { target: this._highlighted_option };\n\t\t\t}\n\n\t\t\tif(!dojo.html.isDescendantOf(evt.target, this.optionsListNode)){\n\t\t\t\t\/\/ handle autocompletion where the the user has hit ENTER or TAB\n\t\n\t\t\t\t\/\/ if the input is empty do nothing\n\t\t\t\tif(!this.textInputNode.value.length){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\ttgt = dojo.html.firstElement(this.optionsListNode);\n\n\t\t\t\t\/\/ user has input value not in option list\n\t\t\t\tif(!tgt || !this._isInputEqualToResult(tgt.getAttribute(\"resultName\"))){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\/\/ otherwise the user has accepted the autocompleted value\n\t\t\t}else{\n\t\t\t\ttgt = evt.target; \n\t\t\t}\n\n\t\t\twhile((tgt.nodeType!=1)||(!tgt.getAttribute(\"resultName\"))){\n\t\t\t\ttgt = tgt.parentNode;\n\t\t\t\tif(tgt === dojo.body()){\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.textInputNode.value = tgt.getAttribute(\"resultName\");\n\t\t\tthis.selectedResult = [tgt.getAttribute(\"resultName\"), tgt.getAttribute(\"resultValue\")];\n\t\t\tthis.setAllValues(tgt.getAttribute(\"resultName\"), tgt.getAttribute(\"resultValue\"));\n\t\t\tif(!evt.noHide){\n\t\t\t\tthis.hideResultList();\n\t\t\t\tthis.setSelectedRange(this.textInputNode, 0, null);\n\t\t\t}\n\t\t\tthis.tryFocus();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.target":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar tgt = null;\n\t\t\tif(!evt){\n\t\t\t\tevt = { target: this._highlighted_option };\n\t\t\t}\n\n\t\t\tif(!dojo.html.isDescendantOf(evt.target, this.optionsListNode)){\n\t\t\t\t\/\/ handle autocompletion where the the user has hit ENTER or TAB\n\t\n\t\t\t\t\/\/ if the input is empty do nothing\n\t\t\t\tif(!this.textInputNode.value.length){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\ttgt = dojo.html.firstElement(this.optionsListNode);\n\n\t\t\t\t\/\/ user has input value not in option list\n\t\t\t\tif(!tgt || !this._isInputEqualToResult(tgt.getAttribute(\"resultName\"))){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\/\/ otherwise the user has accepted the autocompleted value\n\t\t\t}else{\n\t\t\t\ttgt = evt.target; \n\t\t\t}\n\n\t\t\twhile((tgt.nodeType!=1)||(!tgt.getAttribute(\"resultName\"))){\n\t\t\t\ttgt = tgt.parentNode;\n\t\t\t\tif(tgt === dojo.body()){\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.textInputNode.value = tgt.getAttribute(\"resultName\");\n\t\t\tthis.selectedResult = [tgt.getAttribute(\"resultName\"), tgt.getAttribute(\"resultValue\")];\n\t\t\tthis.setAllValues(tgt.getAttribute(\"resultName\"), tgt.getAttribute(\"resultValue\"));\n\t\t\tif(!evt.noHide){\n\t\t\t\tthis.hideResultList();\n\t\t\t\tthis.setSelectedRange(this.textInputNode, 0, null);\n\t\t\t}\n\t\t\tthis.tryFocus();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.clearResultList":{"_":{"meta":{"summary":"","src":"\t\t\tif(this.optionsListNode.innerHTML){\n\t\t\t\tthis.optionsListNode.innerHTML = \"\";  \/\/ browser natively knows how to collect this memory\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.hideResultList":{"_":{"meta":{"summary":"","src":"\t\t\tthis.popupWidget.close();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.showResultList":{"_":{"meta":{"summary":"","src":"\t\t\tif(childs.length){\n\t\t\t\tvar visibleCount = this.maxListLength;\n\t\t\t\tif(childs.length < visibleCount){\n\t\t\t\t\tvisibleCount = childs.length;\n\t\t\t\t}\n\n\t\t\t\twith(this.optionsListNode.style)\n\t\t\t\t{\n\t\t\t\t\tdisplay = \"\";\n\t\t\t\t\tif(visibleCount == childs.length){\n\t\t\t\t\t\t\/\/no scrollbar is required, so unset height to let browser calcuate it,\n\t\t\t\t\t\t\/\/as in css, overflow is already set to auto\n\t\t\t\t\t\theight = \"\";\n\t\t\t\t\t}else{\n\t\t\t\t\t\t\/\/show it first to get the correct dojo.style.getOuterHeight(childs[0])\n\t\t\t\t\t\t\/\/FIXME: shall we cache the height of the item?\n\t\t\t\t\t\theight = visibleCount * dojo.html.getMarginBox(childs[0]).height +\"px\";\n\t\t\t\t\t}\n\t\t\t\t\twidth = (dojo.html.getMarginBox(this.domNode).width-2)+\"px\";\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\tthis.popupWidget.open(this.cbTableNode, this, this.downArrowNode);\n\t\t\t}else{\n\t\t\t\tthis.hideResultList();\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.handleArrowClick":{"_":{"meta":{"summary":"","src":"\t\t\tthis._handleBlurTimer(true, 0);\n\t\t\tthis.tryFocus();\n\t\t\tif(this.popupWidget.isShowingNow){\n\t\t\t\tthis.hideResultList();\n\t\t\t}else{\n\t\t\t\t\/\/ forces full population of results, if they click\n\t\t\t\t\/\/ on the arrow it means they want to see more options\n\t\t\t\tthis.startSearch(\"\");\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.tryFocus":{"_":{"meta":{"summary":"","src":"\t\t\ttry {\n\t\t\t\tthis.textInputNode.focus();\n\t\t\t} catch (e) {\n\t\t\t\t\/\/ element isn't focusable if disabled, or not visible etc - not easy to test for.\n\t \t\t};","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.startSearchFromInput":{"_":{"meta":{"summary":"","src":"\t\t\tthis.startSearch(this.textInputNode.value);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.ComboBox.postCreate":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.event.connect(this, \"startSearch\", this.dataProvider, \"startSearch\");\n\t\t\tdojo.event.connect(this.dataProvider, \"provideSearchResults\", this, \"openResultList\");\n\t\t\tdojo.event.connect(this.textInputNode, \"onblur\", this, \"onBlurInput\");\n\t\t\tdojo.event.connect(this.textInputNode, \"onfocus\", this, \"onFocusInput\");\n\n\t\t\tvar s = dojo.widget.html.stabile.getState(this.widgetId);\n\t\t\tif (s) {\n\t\t\t\tthis.setState(s);\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.incrementalComboBoxDataProvider":{"_":{"meta":{"summary":"","parameters":{"url":{"type":""},"limit":{"type":""},"timeout":{"type":""}},"src":"\tthis.searchUrl = url;\n\tthis.inFlight = false;\n\tthis.activeRequest = null;\n\tthis.allowCache = false;\n\n\tthis.cache = {};\n\n\tthis.init = function(cbox){\n\t\tthis.searchUrl = cbox.dataUrl;\n\t};\n\n\tthis.addToCache = function(keyword, data){\n\t\tif(this.allowCache){\n\t\t\tthis.cache[keyword] = data;\n\t\t}\n\t};\n\n\tthis.startSearch = function(searchStr, type, ignoreLimit){\n\t\tif(this.inFlight){\n\t\t\t\/\/ FIXME: implement backoff!\n\t\t}\n\t\tvar tss = encodeURIComponent(searchStr);\n\t\tvar realUrl = dojo.string.substituteParams(this.searchUrl, {\"searchString\": tss});\n\t\tvar _this = this;\n\t\tvar request = dojo.io.bind({\n\t\t\turl: realUrl,\n\t\t\tmethod: \"get\",\n\t\t\tmimetype: \"text\/json\",\n\t\t\tload: function(type, data, evt){\n\t\t\t\t_this.inFlight = false;\n\t\t\t\tif(!dojo.lang.isArray(data)){\n\t\t\t\t\tvar arrData = [];\n\t\t\t\t\tfor(var key in data){\n\t\t\t\t\t\tarrData.push([data[key], key]);\n\t\t\t\t\t}\n\t\t\t\t\tdata = arrData;\n\t\t\t\t}\n\t\t\t\t_this.addToCache(searchStr, data);\n\t\t\t\t_this.provideSearchResults(data);\n\t\t\t}\n\t\t});\n\t\tthis.inFlight = true;\n\t};","this_variables":["searchUrl","inFlight","activeRequest","allowCache","cache","init","addToCache","startSearch"]}}},"dojo.widget.incrementalComboBoxDataProvider.init":{"_":{"meta":{"summary":"","parameters":{"cbox":{"type":""}},"src":"\t\tthis.searchUrl = cbox.dataUrl;","this_variables":["searchUrl"]}}},"dojo.widget.incrementalComboBoxDataProvider.addToCache":{"_":{"meta":{"summary":"","parameters":{"keyword":{"type":""},"data":{"type":""}},"src":"\t\tif(this.allowCache){\n\t\t\tthis.cache[keyword] = data;\n\t\t}"}}},"dojo.widget.incrementalComboBoxDataProvider.startSearch":{"_":{"meta":{"summary":"","parameters":{"searchStr":{"type":""},"type":{"type":""},"ignoreLimit":{"type":""}},"src":"\t\tif(this.inFlight){\n\t\t\t\/\/ FIXME: implement backoff!\n\t\t}\n\t\tvar tss = encodeURIComponent(searchStr);\n\t\tvar realUrl = dojo.string.substituteParams(this.searchUrl, {\"searchString\": tss});\n\t\tvar _this = this;\n\t\tvar request = dojo.io.bind({\n\t\t\turl: realUrl,\n\t\t\tmethod: \"get\",\n\t\t\tmimetype: \"text\/json\",\n\t\t\tload: function(type, data, evt){\n\t\t\t\t_this.inFlight = false;\n\t\t\t\tif(!dojo.lang.isArray(data)){\n\t\t\t\t\tvar arrData = [];\n\t\t\t\t\tfor(var key in data){\n\t\t\t\t\t\tarrData.push([data[key], key]);\n\t\t\t\t\t}\n\t\t\t\t\tdata = arrData;\n\t\t\t\t}\n\t\t\t\t_this.addToCache(searchStr, data);\n\t\t\t\t_this.provideSearchResults(data);\n\t\t\t}\n\t\t});\n\t\tthis.inFlight = true;","this_variables":["inFlight"]}}},"dojo.widget.ComboBoxDataProvider":{"_":{"meta":{"summary":"","parameters":{"dataPairs":{"type":""},"limit":{"type":""},"timeout":{"type":""}},"src":"\tthis.searchTimeout = timeout | 500;\n\tthis.searchLimit = limit | 30;\n\tthis.searchType = \"STARTSTRING\"; \/\/ may also be \"STARTWORD\" or \"SUBSTRING\"\n\tthis.caseSensitive = false;\n\t\/\/ for caching optimizations\n\tthis._lastSearch = \"\";\n\tthis._lastSearchResults = null;\n\n\tthis.init = function(cbox, node){\n\t\tif(!dojo.string.isBlank(cbox.dataUrl)){\n\t\t\tthis.getData(cbox.dataUrl);\n\t\t}else{\n\t\t\t\/\/ check to see if we can populate the list from <option> elements\n\t\t\tif((node)&&(node.nodeName.toLowerCase() == \"select\")){\n\t\t\t\t\/\/ NOTE: we're not handling <optgroup> here yet\n\t\t\t\tvar opts = node.getElementsByTagName(\"option\");\n\t\t\t\tvar ol = opts.length;\n\t\t\t\tvar data = [];\n\t\t\t\tfor(var x=0; x<ol; x++){\n\t\t\t\t\tvar keyValArr = [String(opts[x].innerHTML), String(opts[x].value)];\n\t\t\t\t\tdata.push(keyValArr);\n\t\t\t\t\tif(opts[x].selected){ \n\t\t\t\t\t\tcbox.setAllValues(keyValArr[0], keyValArr[1]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.setData(data);\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.getData = function(url){\n\t\tdojo.io.bind({\n\t\t\turl: url,\n\t\t\tload: dojo.lang.hitch(this, function(type, data, evt){ \n\t\t\t\tif(!dojo.lang.isArray(data)){\n\t\t\t\t\tvar arrData = [];\n\t\t\t\t\tfor(var key in data){\n\t\t\t\t\t\tarrData.push([data[key], key]);\n\t\t\t\t\t}\n\t\t\t\t\tdata = arrData;\n\t\t\t\t}\n\t\t\t\tthis.setData(data);\n\t\t\t}),\n\t\t\tmimetype: \"text\/json\"\n\t\t});\n\t};\n\n\tthis.startSearch = function(searchStr, type, ignoreLimit){\n\t\t\/\/ FIXME: need to add timeout handling here!!\n\t\tthis._preformSearch(searchStr, type, ignoreLimit);\n\t};\n\n\tthis._preformSearch = function(searchStr, type, ignoreLimit){\n\t\t\/\/\n\t\t\/\/\tNOTE: this search is LINEAR, which means that it exhibits perhaps\n\t\t\/\/\tthe worst possible speed characteristics of any search type. It's\n\t\t\/\/\twritten this way to outline the responsibilities and interfaces for\n\t\t\/\/\ta search.\n\t\t\/\/\n\t\tvar st = type||this.searchType;\n\t\t\/\/ FIXME: this is just an example search, which means that we implement\n\t\t\/\/ only a linear search without any of the attendant (useful!) optimizations\n\t\tvar ret = [];\n\t\tif(!this.caseSensitive){\n\t\t\tsearchStr = searchStr.toLowerCase();\n\t\t}\n\t\tfor(var x=0; x<this.data.length; x++){\n\t\t\tif((!ignoreLimit)&&(ret.length >= this.searchLimit)){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\/\/ FIXME: we should avoid copies if possible!\n\t\t\tvar dataLabel = new String((!this.caseSensitive) ? this.data[x][0].toLowerCase() : this.data[x][0]);\n\t\t\tif(dataLabel.length < searchStr.length){\n\t\t\t\t\/\/ this won't ever be a good search, will it? What if we start\n\t\t\t\t\/\/ to support regex search?\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(st == \"STARTSTRING\"){\n\t\t\t\tif(searchStr == dataLabel.substr(0, searchStr.length)){\n\t\t\t\t\tret.push(this.data[x]);\n\t\t\t\t}\n\t\t\t}else if(st == \"SUBSTRING\"){\n\t\t\t\t\/\/ this one is a gimmie\n\t\t\t\tif(dataLabel.indexOf(searchStr) >= 0){\n\t\t\t\t\tret.push(this.data[x]);\n\t\t\t\t}\n\t\t\t}else if(st == \"STARTWORD\"){\n\t\t\t\t\/\/ do a substring search and then attempt to determine if the\n\t\t\t\t\/\/ preceeding char was the beginning of the string or a\n\t\t\t\t\/\/ whitespace char.\n\t\t\t\tvar idx = dataLabel.indexOf(searchStr);\n\t\t\t\tif(idx == 0){\n\t\t\t\t\t\/\/ implicit match\n\t\t\t\t\tret.push(this.data[x]);\n\t\t\t\t}\n\t\t\t\tif(idx <= 0){\n\t\t\t\t\t\/\/ if we didn't match or implicily matched, march onward\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t\/\/ otherwise, we have to go figure out if the match was at the\n\t\t\t\t\/\/ start of a word...\n\t\t\t\t\/\/ this code is taken almost directy from nWidgets\n\t\t\t\tvar matches = false;\n\t\t\t\twhile(idx!=-1){\n\t\t\t\t\t\/\/ make sure the match either starts whole string, or\n\t\t\t\t\t\/\/ follows a space, or follows some punctuation\n\t\t\t\t\tif(\" ,\/(\".indexOf(dataLabel.charAt(idx-1)) != -1){\n\t\t\t\t\t\t\/\/ FIXME: what about tab chars?\n\t\t\t\t\t\tmatches = true; break;\n\t\t\t\t\t}\n\t\t\t\t\tidx = dataLabel.indexOf(searchStr, idx+1);\n\t\t\t\t}\n\t\t\t\tif(!matches){\n\t\t\t\t\tcontinue;\n\t\t\t\t}else{\n\t\t\t\t\tret.push(this.data[x]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.provideSearchResults(ret);\n\t};\n\n\tthis.provideSearchResults = function(resultsDataPairs){\n\t};\n\n\tthis.addData = function(pairs){\n\t\t\/\/ FIXME: incredibly naive and slow!\n\t\tthis.data = this.data.concat(pairs);\n\t};\n\n\tthis.setData = function(pdata){\n\t\t\/\/ populate this.data and initialize lookup structures\n\t\tthis.data = pdata;\n\t};\n\t\n\tif(dataPairs){\n\t\tthis.setData(dataPairs);\n\t}","this_variables":["data","searchTimeout","searchLimit","searchType","caseSensitive","_lastSearch","_lastSearchResults","init","getData","startSearch","_preformSearch","provideSearchResults","addData","setData"]}}},"dojo.widget.ComboBoxDataProvider.init":{"_":{"meta":{"summary":"","parameters":{"cbox":{"type":""},"node":{"type":""}},"src":"\t\tif(!dojo.string.isBlank(cbox.dataUrl)){\n\t\t\tthis.getData(cbox.dataUrl);\n\t\t}else{\n\t\t\t\/\/ check to see if we can populate the list from <option> elements\n\t\t\tif((node)&&(node.nodeName.toLowerCase() == \"select\")){\n\t\t\t\t\/\/ NOTE: we're not handling <optgroup> here yet\n\t\t\t\tvar opts = node.getElementsByTagName(\"option\");\n\t\t\t\tvar ol = opts.length;\n\t\t\t\tvar data = [];\n\t\t\t\tfor(var x=0; x<ol; x++){\n\t\t\t\t\tvar keyValArr = [String(opts[x].innerHTML), String(opts[x].value)];\n\t\t\t\t\tdata.push(keyValArr);\n\t\t\t\t\tif(opts[x].selected){ \n\t\t\t\t\t\tcbox.setAllValues(keyValArr[0], keyValArr[1]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.setData(data);\n\t\t\t}\n\t\t}"}}},"dojo.widget.ComboBoxDataProvider.getData":{"_":{"meta":{"summary":"","parameters":{"url":{"type":""}},"src":"\t\tdojo.io.bind({\n\t\t\turl: url,\n\t\t\tload: dojo.lang.hitch(this, function(type, data, evt){ \n\t\t\t\tif(!dojo.lang.isArray(data)){\n\t\t\t\t\tvar arrData = [];\n\t\t\t\t\tfor(var key in data){\n\t\t\t\t\t\tarrData.push([data[key], key]);\n\t\t\t\t\t}\n\t\t\t\t\tdata = arrData;\n\t\t\t\t}\n\t\t\t\tthis.setData(data);\n\t\t\t}),\n\t\t\tmimetype: \"text\/json\"\n\t\t});"}}},"dojo.widget.ComboBoxDataProvider.startSearch":{"_":{"meta":{"summary":"","parameters":{"searchStr":{"type":""},"type":{"type":""},"ignoreLimit":{"type":""}},"src":""}}},"dojo.widget.ComboBoxDataProvider._preformSearch":{"_":{"meta":{"summary":"","parameters":{"searchStr":{"type":""},"type":{"type":""},"ignoreLimit":{"type":""}},"src":"\t\t\/\/ FIXME: this is just an example search, which means that we implement\n\t\t\/\/ only a linear search without any of the attendant (useful!) optimizations\n\t\tvar ret = [];\n\t\tif(!this.caseSensitive){\n\t\t\tsearchStr = searchStr.toLowerCase();\n\t\t}\n\t\tfor(var x=0; x<this.data.length; x++){\n\t\t\tif((!ignoreLimit)&&(ret.length >= this.searchLimit)){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\/\/ FIXME: we should avoid copies if possible!\n\t\t\tvar dataLabel = new String((!this.caseSensitive) ? this.data[x][0].toLowerCase() : this.data[x][0]);\n\t\t\tif(dataLabel.length < searchStr.length){\n\t\t\t\t\/\/ this won't ever be a good search, will it? What if we start\n\t\t\t\t\/\/ to support regex search?\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(st == \"STARTSTRING\"){\n\t\t\t\tif(searchStr == dataLabel.substr(0, searchStr.length)){\n\t\t\t\t\tret.push(this.data[x]);\n\t\t\t\t}\n\t\t\t}else if(st == \"SUBSTRING\"){\n\t\t\t\t\/\/ this one is a gimmie\n\t\t\t\tif(dataLabel.indexOf(searchStr) >= 0){\n\t\t\t\t\tret.push(this.data[x]);\n\t\t\t\t}\n\t\t\t}else if(st == \"STARTWORD\"){\n\t\t\t\t\/\/ do a substring search and then attempt to determine if the\n\t\t\t\t\/\/ preceeding char was the beginning of the string or a\n\t\t\t\t\/\/ whitespace char.\n\t\t\t\tvar idx = dataLabel.indexOf(searchStr);\n\t\t\t\tif(idx == 0){\n\t\t\t\t\t\/\/ implicit match\n\t\t\t\t\tret.push(this.data[x]);\n\t\t\t\t}\n\t\t\t\tif(idx <= 0){\n\t\t\t\t\t\/\/ if we didn't match or implicily matched, march onward\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t\/\/ otherwise, we have to go figure out if the match was at the\n\t\t\t\t\/\/ start of a word...\n\t\t\t\t\/\/ this code is taken almost directy from nWidgets\n\t\t\t\tvar matches = false;\n\t\t\t\twhile(idx!=-1){\n\t\t\t\t\t\/\/ make sure the match either starts whole string, or\n\t\t\t\t\t\/\/ follows a space, or follows some punctuation\n\t\t\t\t\tif(\" ,\/(\".indexOf(dataLabel.charAt(idx-1)) != -1){\n\t\t\t\t\t\t\/\/ FIXME: what about tab chars?\n\t\t\t\t\t\tmatches = true; break;\n\t\t\t\t\t}\n\t\t\t\t\tidx = dataLabel.indexOf(searchStr, idx+1);\n\t\t\t\t}\n\t\t\t\tif(!matches){\n\t\t\t\t\tcontinue;\n\t\t\t\t}else{\n\t\t\t\t\tret.push(this.data[x]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.provideSearchResults(ret);"}}},"dojo.widget.ComboBoxDataProvider.provideSearchResults":{"_":{"meta":{"summary":"","parameters":{"resultsDataPairs":{"type":""}},"src":""}}},"dojo.widget.ComboBoxDataProvider.addData":{"_":{"meta":{"summary":"","parameters":{"pairs":{"type":""}},"src":"","this_variables":["data"]}}},"dojo.widget.ComboBoxDataProvider.setData":{"_":{"meta":{"summary":"","parameters":{"pdata":{"type":""}},"src":"","this_variables":["data"]}}}}}},"dojo.widget.ContentPane":{"meta":{"requires":{"common":["dojo.widget.*","dojo.io.*","dojo.widget.HtmlWidget","dojo.string","dojo.string.extras","dojo.html.style"]},"methods":{"dojo.widget.ContentPane":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}}}}},"dojo.widget.DatePicker":{"meta":{"requires":{"common":["dojo.date.common","dojo.date.format","dojo.date.serialize","dojo.widget.*","dojo.widget.HtmlWidget","dojo.event.*","dojo.dom","dojo.html.style","dojo.lang.array"]},"methods":{"dojo.widget.DatePicker":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}},"dojo.widget.DatePicker.util.toRfcDate":{"_":{"meta":{"summary":"","parameters":{"jsDate":{"type":""}},"src":"\t\tif(!jsDate) {\n\t\t\tjsDate = new Date();\n\t\t}\n\t\t\/\/ because this is a date picker and not a time picker, we don't return a time\n\t\treturn dojo.date.strftime(jsDate, \"%Y-%m-%d\");"}}},"dojo.widget.DatePicker.util.fromRfcDate":{"_":{"meta":{"summary":"","parameters":{"rfcDate":{"type":""}},"src":"\t\t\trfcDate = rfcDate.replace(\"Tany\",\"\");\n\t\t}\n\t\tvar jsDate = new Date();\n\t\tdojo.date.setIso8601(jsDate, rfcDate);\n\t\treturn jsDate;"}}},"dojo.widget.DatePicker.util.initFirstSaturday":{"_":{"meta":{"summary":"","parameters":{"month":{"type":""},"year":{"type":""}},"src":"\t\tif(!month) {\n\t\t\tmonth = this.date.getMonth();\n\t\t}\n\t\tif(!year) {\n\t\t\tyear = this.date.getFullYear();\n\t\t}\n\t\tvar firstOfMonth = new Date(year, month, 1);\n\t\treturn {year: year, month: month, date: 7 - firstOfMonth.getDay()};"}}}}}},"dojo.widget.DebugConsole":{"meta":{"requires":{"common":["dojo.widget.Widget","dojo.widget.*","dojo.widget.FloatingPane"]},"methods":{"dojo.widget.DebugConsole":{"_":{"meta":{"summary":"","inherits":["dojo.widget.FloatingPane"],"this_inherits":["dojo.widget.FloatingPane"]}}}}}},"dojo.widget.Dialog":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.ContentPane","dojo.event.*","dojo.gfx.color","dojo.html.layout","dojo.html.display","dojo.html.iframe"]},"methods":{"dojo.widget.ModalDialogBase":{"_":{"meta":{"summary":"","protovariables":{"isContainer":"","_scrollConnected":"","focusElement":"","shared":"","bgColor":"","bgOpacity":"","followScroll":"","_fromTrap":""}}}},"dojo.widget.ModalDialogBase.trapTabs":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tif(e.target == this.tabStartOuter) {\n\t\t\t\tif(this._fromTrap) {\n\t\t\t\t\tthis.tabStart.focus();\n\t\t\t\t\tthis._fromTrap = false;\n\t\t\t\t} else {\n\t\t\t\t\tthis._fromTrap = true;\n\t\t\t\t\tthis.tabEnd.focus();\n\t\t\t\t}\n\t\t\t} else if (e.target == this.tabStart) {\n\t\t\t\tif(this._fromTrap) {\n\t\t\t\t\tthis._fromTrap = false;\n\t\t\t\t} else {\n\t\t\t\t\tthis._fromTrap = true;\n\t\t\t\t\tthis.tabEnd.focus();\n\t\t\t\t}\n\t\t\t} else if(e.target == this.tabEndOuter) {\n\t\t\t\tif(this._fromTrap) {\n\t\t\t\t\tthis.tabEnd.focus();\n\t\t\t\t\tthis._fromTrap = false;\n\t\t\t\t} else {\n\t\t\t\t\tthis._fromTrap = true;\n\t\t\t\t\tthis.tabStart.focus();\n\t\t\t\t}\n\t\t\t} else if(e.target == this.tabEnd) {\n\t\t\t\tif(this._fromTrap) {\n\t\t\t\t\tthis._fromTrap = false;\n\t\t\t\t} else {\n\t\t\t\t\tthis._fromTrap = true;\n\t\t\t\t\tthis.tabStart.focus();\n\t\t\t\t}\n\t\t\t}","this":"null"}}},"null":{"_":{"meta":{"this_variables":["_fromTrap","shared.bg","shared.bg.className","shared.bgIframe","shared.bg.style.backgroundColor","bgColor","bgOpacity","shared.bg.style.width","shared.bg.style.height","shared.bg.style.display","domNode.style.display","shared.bg.style.display","shared.bg.style.width"]}}},"dojo.widget.ModalDialogBase.clearTrap":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tvar _this = this;\n\t\t\tsetTimeout(function() {\n\t\t\t\t_this._fromTrap = false;\n\t\t\t}, 100);","this":"null"}}},"dojo.widget.ModalDialogBase.postCreate":{"_":{"meta":{"summary":"","src":"\t\t\twith(this.domNode.style) {\n\t\t\t\tposition = \"absolute\";\n\t\t\t\tzIndex = 999;\n\t\t\t\tdisplay = \"none\";\n\t\t\t\toverflow = \"visible\";\n\t\t\t}\n\t\t\tvar b = dojo.body();\n\t\t\tb.appendChild(this.domNode);\n\n\t\t\tif(!this.shared.bg){\n\t\t\t\tthis.shared.bg = document.createElement(\"div\");\n\t\t\t\tthis.shared.bg.className = \"dialogUnderlay\";\n\t\t\t\twith(this.shared.bg.style) {\n\t\t\t\t\tposition = \"absolute\";\n\t\t\t\t\tleft = top = \"0px\";\n\t\t\t\t\tzIndex = 998;\n\t\t\t\t\tdisplay = \"none\";\n\t\t\t\t}\n\t\t\t\tthis.setBackgroundColor(this.bgColor);\n\t\t\t\tb.appendChild(this.shared.bg);\n\t\n\t\t\t\tthis.shared.bgIframe = new dojo.html.BackgroundIframe(this.shared.bg);\n\t\t\t}","this":"null"}}},"dojo.widget.ModalDialogBase.setBackgroundColor":{"_":{"meta":{"summary":"","parameters":{"color":{"type":""}},"src":"\t\t\tif(arguments.length >= 3) {\n\t\t\t\tcolor = new dojo.gfx.color.Color(arguments[0], arguments[1], arguments[2]);\n\t\t\t} else {\n\t\t\t\tcolor = new dojo.gfx.color.Color(color);\n\t\t\t}\n\t\t\tthis.shared.bg.style.backgroundColor = color.toString();\n\t\t\treturn this.bgColor = color;","this":"null"}}},"dojo.widget.ModalDialogBase.setBackgroundOpacity":{"_":{"meta":{"summary":"","parameters":{"op":{"type":""}},"src":"\t\t\tif(arguments.length == 0) { op = this.bgOpacity; }\n\t\t\tdojo.html.setOpacity(this.shared.bg, op);\n\t\t\ttry {\n\t\t\t\tthis.bgOpacity = dojo.html.getOpacity(this.shared.bg);\n\t\t\t} catch (e) {\n\t\t\t\tthis.bgOpacity = op;\n\t\t\t}\n\t\t\treturn this.bgOpacity;","this":"null"}}},"dojo.widget.ModalDialogBase.sizeBackground":{"_":{"meta":{"summary":"","src":"\t\t\tif(this.bgOpacity > 0) {\n\t\t\t\tvar viewport = dojo.html.getViewport();\n\t\t\t\tvar h = Math.max(\n\t\t\t\t\tdojo.doc().documentElement.scrollHeight || dojo.body().scrollHeight,\n\t\t\t\t\tviewport.height);\n\t\t\t\tvar w = viewport.width;\n\t\t\t\tthis.shared.bg.style.width = w + \"px\";\n\t\t\t\tthis.shared.bg.style.height = h + \"px\";\n\t\t\t}\n\t\t\tthis.shared.bgIframe.onResized();","this":"null"}}},"dojo.widget.ModalDialogBase.showBackground":{"_":{"meta":{"summary":"","src":"\t\t\tthis.sizeBackground();\n\t\t\tif(this.bgOpacity > 0) {\n\t\t\t\tthis.shared.bg.style.display = \"block\";\n\t\t\t}","this":"null"}}},"dojo.widget.ModalDialogBase.placeModalDialog":{"_":{"meta":{"summary":"","src":"\t\t\tvar scroll_offset = dojo.html.getScroll().offset;\n\t\t\tvar viewport_size = dojo.html.getViewport();\n\n\t\t\t\/\/ find the size of the dialog\n\t\t\tvar mb = dojo.html.getMarginBox(this.containerNode);\n\n\t\t\tvar x = scroll_offset.x + (viewport_size.width - mb.width)\/2;\n\t\t\tvar y = scroll_offset.y + (viewport_size.height - mb.height)\/2;\n\n\t\t\twith(this.domNode.style) {\n\t\t\t\tleft = x + \"px\";\n\t\t\t\ttop = y + \"px\";\n\t\t\t}","this":"null"}}},"dojo.widget.ModalDialogBase.showModalDialog":{"_":{"meta":{"summary":"","src":"\t\t\tthis.setBackgroundOpacity();\n\t\t\tthis.showBackground();","this":"null"}}},"dojo.widget.ModalDialogBase.checkSize":{"_":{"meta":{"summary":"","src":"\t\t\tif(this.isShowing()){\n\t\t\t\tthis.sizeBackground();\n\t\t\t\tthis.placeModalDialog();\n\t\t\t\tthis.domNode.style.display=\"block\";\n\t\t\t\tthis.onResized();\n\t\t\t}","this":"null"}}},"dojo.widget.ModalDialogBase.hideModalDialog":{"_":{"meta":{"summary":"","src":"\t\t\t\tdojo.byId(this.focusElement).focus(); \n\t\t\t\tdojo.byId(this.focusElement).blur();\n\t\t\t}\n\n\t\t\tthis.shared.bg.style.display = \"none\";\n\t\t\tthis.shared.bg.style.width = this.shared.bg.style.height = \"1px\";","this":"null"}}},"dojo.widget.Dialog":{"_":{"meta":{"summary":"","inherits":["[dojo.widget.ContentPane, dojo.widget.ModalDialogBase]"],"this_inherits":["[dojo.widget.ContentPane, dojo.widget.ModalDialogBase]"],"protovariables":{"templatePath":"","anim":"","blockDuration":"","lifetime":""}}}},"dojo.widget.Dialog.show":{"_":{"meta":{"summary":"","src":"\t\t\tif (this.followScroll && !this._scrollConnected){\n\t\t\t\tthis._scrollConnected = true;\n\t\t\t\tdojo.event.connect(window, \"onscroll\", this, \"onScroll\");\n\t\t\t}\n\t\t\t\n\t\t\tif(this.lifetime){\n\t\t\t\tthis.timeRemaining = this.lifetime;\n\t\t\t\tif(!this.blockDuration){\n\t\t\t\t\tdojo.event.connect(this.shared.bg, \"onclick\", this, \"hide\");\n\t\t\t\t}else{\n\t\t\t\t\tdojo.event.disconnect(this.shared.bg, \"onclick\", this, \"hide\");\n\t\t\t\t}\n\t\t\t\tif(this.timerNode){\n\t\t\t\t\tthis.timerNode.innerHTML = Math.ceil(this.timeRemaining\/1000);\n\t\t\t\t}\n\t\t\t\tif(this.blockDuration && this.closeNode){\n\t\t\t\t\tif(this.lifetime > this.blockDuration){\n\t\t\t\t\t\tthis.closeNode.style.visibility = \"hidden\";\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.closeNode.style.display = \"none\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.timer = setInterval(dojo.lang.hitch(this, \"onTick\"), 100);\n\t\t\t}\n\n\t\t\tthis.showModalDialog();\n\t\t\tdojo.widget.Dialog.superclass.show.call(this);\n\t\t\tthis.checkSize();","this":"[dojo.widget.ContentPane, dojo.widget.ModalDialogBase]"}}},"[dojo.widget.ContentPane, dojo.widget.ModalDialogBase]":{"_":{"meta":{"this_variables":["_scrollConnected","timeRemaining","timerNode.innerHTML","closeNode.style.visibility","closeNode.style.display","timer","_scrollConnected","timerNode","closeNode","closeNode.style.visibility","timerNode.innerHTML","domNode.style.display"]}}},"dojo.widget.Dialog.onLoad":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.widget.Dialog.superclass.onLoad.call(this);","this":"[dojo.widget.ContentPane, dojo.widget.ModalDialogBase]"}}},"dojo.widget.Dialog.fillInTemplate":{"_":{"meta":{"summary":"","src":"\t\t\t\/\/ dojo.event.connect(this.domNode, \"onclick\", this, \"killEvent\");","this":"[dojo.widget.ContentPane, dojo.widget.ModalDialogBase]"}}},"dojo.widget.Dialog.hide":{"_":{"meta":{"summary":"","src":"\t\t\tthis.hideModalDialog();\n\t\t\tdojo.widget.Dialog.superclass.hide.call(this);\n\n\t\t\tif(this.timer){\n\t\t\t\tclearInterval(this.timer);\n\t\t\t}\n\n\t\t\tif (this._scrollConnected){\n\t\t\t\tthis._scrollConnected = false;\n\t\t\t\tdojo.event.disconnect(window, \"onscroll\", this, \"onScroll\");\n\t\t\t}","this":"[dojo.widget.ContentPane, dojo.widget.ModalDialogBase]"}}},"dojo.widget.Dialog.setTimerNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\t\tthis.timerNode = node;","this":"[dojo.widget.ContentPane, dojo.widget.ModalDialogBase]"}}},"dojo.widget.Dialog.setCloseControl":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\t\tthis.closeNode = node;\n\t\t\tdojo.event.connect(node, \"onclick\", this, \"hide\");","this":"[dojo.widget.ContentPane, dojo.widget.ModalDialogBase]"}}},"dojo.widget.Dialog.setShowControl":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\t\tdojo.event.connect(node, \"onclick\", this, \"show\");","this":"[dojo.widget.ContentPane, dojo.widget.ModalDialogBase]"}}},"dojo.widget.Dialog.onTick":{"_":{"meta":{"summary":"","src":"\t\t\tif(this.timer){\n\t\t\t\tthis.timeRemaining -= 100;\n\t\t\t\tif(this.lifetime - this.timeRemaining >= this.blockDuration){\n\t\t\t\t\tdojo.event.connect(this.shared.bg, \"onclick\", this, \"hide\");\n\t\t\t\t\tif(this.closeNode){\n\t\t\t\t\t\tthis.closeNode.style.visibility = \"visible\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(!this.timeRemaining){\n\t\t\t\t\tclearInterval(this.timer);\n\t\t\t\t\tthis.hide();\n\t\t\t\t}else if(this.timerNode){\n\t\t\t\t\tthis.timerNode.innerHTML = Math.ceil(this.timeRemaining\/1000);\n\t\t\t\t}\n\t\t\t}","this":"[dojo.widget.ContentPane, dojo.widget.ModalDialogBase]"}}},"dojo.widget.Dialog.onScroll":{"_":{"meta":{"summary":"","src":"\t\t\tthis.placeModalDialog();\n\t\t\tthis.domNode.style.display = \"block\";","this":"[dojo.widget.ContentPane, dojo.widget.ModalDialogBase]"}}},"dojo.widget.Dialog.killEvent":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tevt.preventDefault();\n\t\t\tevt.stopPropagation();","this":"[dojo.widget.ContentPane, dojo.widget.ModalDialogBase]"}}}}}},"dojo.widget.DocPane":{"meta":{"requires":{"common":["dojo.widget.*","dojo.io.*","dojo.event.*","dojo.widget.HtmlWidget","dojo.widget.Editor2","dojo.widget.Dialog","dojo.html.common","dojo.html.display"]},"methods":{"dojo.widget.DocPane":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}}}}},"dojo.widget.DomWidget":{"meta":{"requires":{"common":["dojo.event.*","dojo.widget.Widget","dojo.dom","dojo.html.style","dojo.xml.Parse","dojo.uri.*","dojo.lang.func","dojo.lang.extras"]},"methods":{"dojo.widget.DomWidget":{"_":{"meta":{"summary":"","inherits":["dojo.widget.Widget"],"this_inherits":["dojo.widget.Widget"]}}},"dojo.widget.buildFromTemplate":{"_":{"meta":{"summary":"deprecated, use dojo.widget.fillFromTemplateCache","src":""}}},"dojo.widget.fillFromTemplateCache":{"_":{"meta":{"summary":" static method to build from a template w\/ or w\/o a real widget in place","parameters":{"obj":{"type":"DomWidget"},"templatePath":{"type":"String||dojo.uri.Uri"},"templateString":{"type":"String, optional"},"avoidCache":{"type":"Boolean, optional"}},"src":"\t\/\/ DEPRECATED: use Uri objects, not strings\n\tif (tpath && !(tpath instanceof dojo.uri.Uri)) {\n\t\ttpath = dojo.uri.dojoUri(tpath);\n\t\tdojo.deprecated(\"templatePath should be of type dojo.uri.Uri\", null, \"0.4\");\n\t}\n\n\tvar tmplts = dojo.widget._templateCache;\n\tif(!obj[\"widgetType\"]) { \/\/ don't have a real template here\n\t\tdo {\n\t\t\tvar dummyName = \"__dummyTemplate__\" + dojo.widget._templateCache.dummyCount++;\n\t\t} while(tmplts[dummyName]);\n\t\tobj.widgetType = dummyName;\n\t}\n\tvar wt = obj.widgetType;\n\n\tvar ts = tmplts[wt];\n\tif(!ts){\n\t\ttmplts[wt] = { \"string\": null, \"node\": null };\n\t\tif(avoidCache){\n\t\t\tts = {};\n\t\t}else{\n\t\t\tts = tmplts[wt];\n\t\t}\n\t}\n\tif((!obj.templateString)&&(!avoidCache)){\n\t\tobj.templateString = templateString || ts[\"string\"];\n\t}\n\tif((!obj.templateNode)&&(!avoidCache)){\n\t\tobj.templateNode = ts[\"node\"];\n\t}\n\tif((!obj.templateNode)&&(!obj.templateString)&&(tpath)){\n\t\t\/\/ fetch a text fragment and assign it to templateString\n\t\t\/\/ NOTE: we rely on blocking IO here!\n\t\tvar tstring = dojo.hostenv.getText(tpath);\n\t\tif(tstring){\n\t\t\t\/\/ strip <?xml ...?> declarations so that external SVG and XML\n\t\t\t\/\/ documents can be added to a document without worry\n\t\t\ttstring = tstring.replace(\/^\\s*<\\?xml(\\s)+version=[\\'\\\"](\\d)*.(\\d)*[\\'\\\"](\\s)*\\?>\/im, \"\");\n\t\t\tvar matches = tstring.match(\/<body[^>]*>\\s*([\\s\\S]+)\\s*<\\\/body>\/im);\n\t\t\tif(matches){\n\t\t\t\ttstring = matches[1];\n\t\t\t}\n\t\t}else{\n\t\t\ttstring = \"\";\n\t\t}\n\t\tobj.templateString = tstring;\n\t\tif(!avoidCache){\n\t\t\ttmplts[wt][\"string\"] = tstring;\n\t\t}\n\t}\n\tif((!ts[\"string\"])&&(!avoidCache)){\n\t\tts.string = obj.templateString;\n\t}"}}},"dojo.widget.attachTemplateNodes":{"_":{"meta":{"summary":" map widget properties and functions to the handlers specified in the dom node and it's descendants. This function iterates over all nodes and looks for these properties: * dojoAttachPoint * dojoAttachEvent * waiRole * waiState * any \"dojoOn*\" proprties passed in the events array","parameters":{"rootNode":{"type":"DomNode"},"targetObj":{"type":"Widget"},"events":{"type":"Array"}},"src":"\tfunction trim(str){\n\t\treturn str.replace(\/^\\s+|\\s+$\/g, \"\");\n\t}\n\n\tif(!rootNode){ \n\t\trootNode = targetObj.domNode;\n\t}\n\n\tif(rootNode.nodeType != elementNodeType){\n\t\treturn;\n\t}\n\t\/\/ alert(events.length);\n\n\tvar nodes = rootNode.all || rootNode.getElementsByTagName(\"*\");\n\tvar _this = targetObj;\n\tfor(var x=-1; x<nodes.length; x++){\n\t\tvar baseNode = (x == -1) ? rootNode : nodes[x];\n\t\t\/\/ FIXME: is this going to have capitalization problems?  Could use getAttribute(name, 0); to get attributes case-insensitve\n\t\tvar attachPoint = [];\n\t\tif(!targetObj.enableSubWidgets || !baseNode.getAttribute('dojoType')){\n\t\t\tfor(var y=0; y<this.attachProperties.length; y++){\n\t\t\t\tvar tmpAttachPoint = baseNode.getAttribute(this.attachProperties[y]);\n\t\t\t\tif(tmpAttachPoint){\n\t\t\t\t\tattachPoint = tmpAttachPoint.split(\";\");\n\t\t\t\t\tfor(var z=0; z<attachPoint.length; z++){\n\t\t\t\t\t\tif(dojo.lang.isArray(targetObj[attachPoint[z]])){\n\t\t\t\t\t\t\ttargetObj[attachPoint[z]].push(baseNode);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\ttargetObj[attachPoint[z]]=baseNode;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar attachEvent = baseNode.getAttribute(this.eventAttachProperty);\n\t\t\tif(attachEvent){\n\t\t\t\t\/\/ NOTE: we want to support attributes that have the form\n\t\t\t\t\/\/ \"domEvent: nativeEvent; ...\"\n\t\t\t\tvar evts = attachEvent.split(\";\");\n\t\t\t\tfor(var y=0; y<evts.length; y++){\n\t\t\t\t\tif((!evts[y])||(!evts[y].length)){ continue; }\n\t\t\t\t\tvar thisFunc = null;\n\t\t\t\t\tvar tevt = trim(evts[y]);\n\t\t\t\t\tif(evts[y].indexOf(\":\") >= 0){\n\t\t\t\t\t\t\/\/ oh, if only JS had tuple assignment\n\t\t\t\t\t\tvar funcNameArr = tevt.split(\":\");\n\t\t\t\t\t\ttevt = trim(funcNameArr[0]);\n\t\t\t\t\t\tthisFunc = trim(funcNameArr[1]);\n\t\t\t\t\t}\n\t\t\t\t\tif(!thisFunc){\n\t\t\t\t\t\tthisFunc = tevt;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tvar tf = function(){ \n\t\t\t\t\t\tvar ntf = new String(thisFunc);\n\t\t\t\t\t\treturn function(evt){\n\t\t\t\t\t\t\tif(_this[ntf]){\n\t\t\t\t\t\t\t\t_this[ntf](dojo.event.browser.fixEvent(evt, this));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}();\n\t\t\t\t\tdojo.event.browser.addListener(baseNode, tevt, tf, false, true);\n\t\t\t\t\t\/\/ dojo.event.browser.addListener(baseNode, tevt, dojo.lang.hitch(_this, thisFunc));\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfor(var y=0; y<events.length; y++){\n\t\t\t\t\/\/alert(events[x]);\n\t\t\t\tvar evtVal = baseNode.getAttribute(events[y]);\n\t\t\t\tif((evtVal)&&(evtVal.length)){\n\t\t\t\t\tvar thisFunc = null;\n\t\t\t\t\tvar domEvt = events[y].substr(4); \/\/ clober the \"dojo\" prefix\n\t\t\t\t\tthisFunc = trim(evtVal);\n\t\t\t\t\tvar funcs = [thisFunc];\n\t\t\t\t\tif(thisFunc.indexOf(\";\")>=0){\n\t\t\t\t\t\tfuncs = dojo.lang.map(thisFunc.split(\";\"), trim);\n\t\t\t\t\t}\n\t\t\t\t\tfor(var z=0; z<funcs.length; z++){\n\t\t\t\t\t\tif(!funcs[z].length){ continue; }\n\t\t\t\t\t\tvar tf = function(){ \n\t\t\t\t\t\t\tvar ntf = new String(funcs[z]);\n\t\t\t\t\t\t\treturn function(evt){\n\t\t\t\t\t\t\t\tif(_this[ntf]){\n\t\t\t\t\t\t\t\t\t_this[ntf](dojo.event.browser.fixEvent(evt, this));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}();\n\t\t\t\t\t\tdojo.event.browser.addListener(baseNode, domEvt, tf, false, true);\n\t\t\t\t\t\t\/\/ dojo.event.browser.addListener(baseNode, domEvt, dojo.lang.hitch(_this, funcs[z]));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\/\/ continue;\n\n\t\t\/\/ FIXME: we need to put this into some kind of lookup structure\n\t\t\/\/ instead of direct assignment\n\t\tvar tmpltPoint = baseNode.getAttribute(this.templateProperty);\n\t\tif(tmpltPoint){\n\t\t\ttargetObj[tmpltPoint]=baseNode;\n\t\t}\n\n\t\tdojo.lang.forEach(dojo.widget.waiNames, function(name){\n\t\t\tvar wai = dojo.widget.wai[name];\n\t\t\tvar val = baseNode.getAttribute(wai.name);\n\t\t\tif(val){\n\t\t\t\tif(val.indexOf('-') == -1){ \n\t\t\t\t\tdojo.widget.wai.setAttr(baseNode, wai.name, \"role\", val);\n\t\t\t\t}else{\n\t\t\t\t\t\/\/ this is a state-value pair\n\t\t\t\t\tvar statePair = val.split('-');\n\t\t\t\t\tdojo.widget.wai.setAttr(baseNode, wai.name, statePair[0], statePair[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}, this);\n\n\t\tvar onBuild = baseNode.getAttribute(this.onBuildProperty);\n\t\tif(onBuild){\n\t\t\teval(\"var node = baseNode; var widget = targetObj; \"+onBuild);\n\t\t}\n\t}"}}},"dojo.widget.getDojoEventsFromStr":{"_":{"meta":{"summary":" generates a list of properties with names that match the form dojoOn*","parameters":{"str":{"type":"String"}},"src":"\tvar evts = str ? str.match(re)||[] : [];\n\tvar ret = [];\n\tvar lem = {};\n\tfor(var x=0; x<evts.length; x++){\n\t\tif(evts[x].length < 1){ continue; }\n\t\tvar cm = evts[x].replace(\/\\s\/, \"\");\n\t\tcm = (cm.slice(0, cm.length-1));\n\t\tif(!lem[cm]){\n\t\t\tlem[cm] = true;\n\t\t\tret.push(cm);\n\t\t}\n\t}\n\treturn ret; \/\/ Array","returns":"Array"}}}}}},"dojo.widget.DropdownContainer":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.HtmlWidget","dojo.widget.Menu2","dojo.event.*","dojo.html.layout","dojo.html.display","dojo.html.iframe","dojo.html.util"]},"methods":{"dojo.widget.DropdownContainer":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"],"protovariables":{"inputWidth":"","inputId":"","inputName":"","iconURL":"","iconAlt":"","inputNode":"","buttonNode":"","containerNode":"","containerToggle":"","containerToggleDuration":"","containerAnimInProgress":"","templateString":"","templateCssPath":""}}}},"dojo.widget.DropdownContainer.fillInTemplate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\t\tvar source = this.getFragNodeRef(frag);\n\n\t\t\tthis.popup = dojo.widget.createWidget(\"PopupContainer\", {toggle: this.containerToggle});\n\n\t\t\tthis.containerNode = this.popup.domNode;\n\n\t\t\tthis.domNode.appendChild(this.popup.domNode);\n\n\t\t\tif(this.inputId){ this.inputNode.id = this.inputId; }\n\t\t\tif(this.inputName){ this.inputNode.name = this.inputName; }\n\t\t\tthis.inputNode.style.width = this.inputWidth;\n\n\t\t\tdojo.event.connect(this.inputNode, \"onchange\", this, \"onInputChange\");","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.HtmlWidget":{"_":{"meta":{"this_variables":["popup","containerNode","inputNode.id","inputNode.name","inputNode.style.width","popup","containerNode","inputNode.id","inputNode.name","inputNode.style.width"]}}},"dojo.widget.DropdownContainer.toggle":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\t\tvar source = this.getFragNodeRef(frag);\n\n\t\t\tthis.popup = dojo.widget.createWidget(\"PopupContainer\", {toggle: this.containerToggle});\n\n\t\t\tthis.containerNode = this.popup.domNode;\n\n\t\t\tthis.domNode.appendChild(this.popup.domNode);\n\n\t\t\tif(this.inputId){ this.inputNode.id = this.inputId; }\n\t\t\tif(this.inputName){ this.inputNode.name = this.inputName; }\n\t\t\tthis.inputNode.style.width = this.inputWidth;\n\n\t\t\tdojo.event.connect(this.inputNode, \"onchange\", this, \"onInputChange\");","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.DropdownContainer.onIconClick":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif(!this.popup.isShowingNow){\n\t\t\t\tthis.popup.open(this.inputNode, this, this.buttonNode);\n\t\t\t}else{\n\t\t\t\tthis.popup.close();\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.DropdownContainer.hideContainer":{"_":{"meta":{"summary":"","src":"\t\t\tthis.popup.close();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.DropdownContainer.onInputChange":{"_":{"meta":{"summary":"","src":"","this":"dojo.widget.HtmlWidget"}}}}}},"dojo.widget.DropdownDatePicker":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.DropdownContainer","dojo.widget.DatePicker","dojo.event.*","dojo.html.*","dojo.i18n.common"]},"methods":{"dojo.widget.DropdownDatePicker":{"_":{"meta":{"summary":"","inherits":["dojo.widget.DropdownContainer"],"this_inherits":["dojo.widget.DropdownContainer"],"protovariables":{"iconURL":"","zIndex":"","datePicker":"","dateFormat":"","date":""}}}},"dojo.widget.DropdownDatePicker.postMixInProperties":{"_":{"meta":{"summary":"","parameters":{"localProperties":{"type":""},"frag":{"type":""}},"src":"\t\t\tdojo.widget.DropdownDatePicker.superclass.postMixInProperties.apply(this, arguments);\n\t\t\tvar messages = dojo.i18n.getLocalization(\"dojo.widget\", \"DropdownDatePicker\", this.lang);\n\t\t\tthis.iconAlt = messages.selectDate;","this":"dojo.widget.DropdownContainer"}}},"dojo.widget.DropdownContainer":{"_":{"meta":{"this_variables":["iconAlt","date","inputNode.value","datePicker","containerNode.style.zIndex","containerNode.style.backgroundColor","date","inputNode.value","datePicker","containerNode.style.zIndex","containerNode.style.backgroundColor","inputNode.value","datePicker.date"]}}},"dojo.widget.DropdownDatePicker.fillInTemplate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\t\tdojo.widget.DropdownDatePicker.superclass.fillInTemplate.call(this, args, frag);\n\t\t\tvar source = this.getFragNodeRef(frag);\n\t\t\t\n\t\t\tif(args.date){ this.date = new Date(args.date); }\n\t\t\t\n\t\t\tvar dpNode = document.createElement(\"div\");\n\t\t\tthis.containerNode.appendChild(dpNode);\n\t\t\t\n\t\t\tvar dateProps = { widgetContainerId: this.widgetId };\n\t\t\tif(this.date){\n\t\t\t\tdateProps[\"date\"] = this.date;\n\t\t\t\tdateProps[\"storedDate\"] = dojo.widget.DatePicker.util.toRfcDate(this.date);\n\t\t\t\tthis.inputNode.value = dojo.date.strftime(this.date, this.dateFormat);\n\t\t\t}\n\t\t\tthis.datePicker = dojo.widget.createWidget(\"DatePicker\", dateProps, dpNode);\n\t\t\tdojo.event.connect(this.datePicker, \"onSetDate\", this, \"onSetDate\");\n\t\t\tthis.containerNode.style.zIndex = this.zIndex;\n\t\t\tthis.containerNode.style.backgroundColor = \"transparent\";","this_inherits":["dojo.widget.DropdownDatePicker.superclass.fillInTemplate"],"this":"dojo.widget.DropdownContainer"}}},"dojo.widget.DropdownDatePicker.widgetContainerId":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\t\tdojo.widget.DropdownDatePicker.superclass.fillInTemplate.call(this, args, frag);\n\t\t\tvar source = this.getFragNodeRef(frag);\n\t\t\t\n\t\t\tif(args.date){ this.date = new Date(args.date); }\n\t\t\t\n\t\t\tvar dpNode = document.createElement(\"div\");\n\t\t\tthis.containerNode.appendChild(dpNode);\n\t\t\t\n\t\t\tvar dateProps = { widgetContainerId: this.widgetId };\n\t\t\tif(this.date){\n\t\t\t\tdateProps[\"date\"] = this.date;\n\t\t\t\tdateProps[\"storedDate\"] = dojo.widget.DatePicker.util.toRfcDate(this.date);\n\t\t\t\tthis.inputNode.value = dojo.date.strftime(this.date, this.dateFormat);\n\t\t\t}\n\t\t\tthis.datePicker = dojo.widget.createWidget(\"DatePicker\", dateProps, dpNode);\n\t\t\tdojo.event.connect(this.datePicker, \"onSetDate\", this, \"onSetDate\");\n\t\t\tthis.containerNode.style.zIndex = this.zIndex;\n\t\t\tthis.containerNode.style.backgroundColor = \"transparent\";","this_inherits":["dojo.widget.DropdownDatePicker.superclass.fillInTemplate"],"this":"dojo.widget.DropdownContainer"}}},"dojo.widget.DropdownDatePicker.onSetDate":{"_":{"meta":{"summary":"","src":"\t\t\tthis.inputNode.value = dojo.date.format(this.datePicker.date, this.dateFormat);\n\t\t\tthis.hideContainer();","this":"dojo.widget.DropdownContainer"}}},"dojo.widget.DropdownDatePicker.onInputChange":{"_":{"meta":{"summary":"","src":"\t\t\tvar tmp = new Date(this.inputNode.value);\n\t\t\tthis.datePicker.date = tmp;\n\t\t\tthis.datePicker.setDate(dojo.widget.DatePicker.util.toRfcDate(tmp));\n\t\t\tthis.datePicker.initData();\n\t\t\tthis.datePicker.initUI();","this":"dojo.widget.DropdownContainer"}}}}}},"dojo.widget.Editor":{"meta":{"requires":{"common":["dojo.io.*","dojo.widget.*","dojo.widget.Toolbar","dojo.widget.RichText","dojo.widget.ColorPalette","dojo.string.extras"]},"methods":{"dojo.widget.Editor":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\tthis.contentFilters = [];\n\tthis._toolbars = [];","this_variables":["contentFilters","_toolbars","_richText","_toolbarContainer","_toolbarContainer.domNode.style.display","_toolbarContainer.domNode.style.display","_updateToolbarTimer","_updateToolbarLastRan","_richText.contentFilters"],"inherits":["dojo.widget.HtmlWidget"],"protovariables":{"widgetType":"","saveUrl":"","saveMethod":"","saveArgName":"","closeOnSave":"","items":"","formatBlockItems":"","fontNameItems":"","fontSizeItems":"","validateItems":"","_richText":"","_richTextType":"","_toolbarContainer":"","_toolbarContainerType":"","_toolbars":"","_toolbarType":"","_toolbarItemType":"","_updateToolbarLastRan":"","_updateToolbarTimer":"","_updateToolbarFrequency":"","supportedCommands":""}}}},"dojo.widget.Editor.getItemProperties":{"_":{"meta":{"summary":"","parameters":{"name":{"type":""}},"src":"\t\tvar props = {};\n\t\tswitch(name.toLowerCase()) {\n\t\t\tcase \"bold\":\n\t\t\tcase \"italic\":\n\t\t\tcase \"underline\":\n\t\t\tcase \"strikethrough\":\n\t\t\t\tprops.toggleItem = true;\n\t\t\t\tbreak;\n\n\t\t\tcase \"justifygroup\":\n\t\t\t\tprops.defaultButton = \"justifyleft\";\n\t\t\t\tprops.preventDeselect = true;\n\t\t\t\tprops.buttonGroup = true;\n\t\t\t\tbreak;\n\n\t\t\tcase \"listgroup\":\n\t\t\t\tprops.buttonGroup = true;\n\t\t\t\tbreak;\n\n\t\t\tcase \"save\":\n\t\t\tcase \"cancel\":\n\t\t\t\tprops.label = dojo.string.capitalize(name);\n\t\t\t\tbreak;\n\n\t\t\tcase \"forecolor\":\n\t\t\tcase \"hilitecolor\":\n\t\t\t\tprops.name = name;\n\t\t\t\tprops.toggleItem = true; \/\/ FIXME: they aren't exactly toggle items\n\t\t\t\tprops.icon = this.getCommandImage(name);\n\t\t\t\tbreak;\n\n\t\t\tcase \"formatblock\":\n\t\t\t\tprops.name = \"formatBlock\";\n\t\t\t\tprops.values = this.formatBlockItems;\n\t\t\t\tbreak;\n\n\t\t\tcase \"fontname\":\n\t\t\t\tprops.name = \"fontName\";\n\t\t\t\tprops.values = this.fontNameItems;\n\n\t\t\tcase \"fontsize\":\n\t\t\t\tprops.name = \"fontSize\";\n\t\t\t\tprops.values = this.fontSizeItems;\n\t\t}\n\t\treturn props;","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.focusOnLoad":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tvar trt = dojo.widget.createWidget(this._richTextType, {\n\t\t\tfocusOnLoad: this.focusOnLoad,\n\t\t\tminHeight: this.minHeight\n\t\t}, node)\n\t\tvar _this = this;\n\t\t\/\/ this appears to fix a weird timing bug on Safari\n\t\tsetTimeout(function(){\n\t\t\t_this.setRichText(trt);\n\n\t\t\t_this.initToolbar();\n\n\t\t\t_this.fillInTemplate(args, frag);\n\t\t}, 0);","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.minHeight":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tvar trt = dojo.widget.createWidget(this._richTextType, {\n\t\t\tfocusOnLoad: this.focusOnLoad,\n\t\t\tminHeight: this.minHeight\n\t\t}, node)\n\t\tvar _this = this;\n\t\t\/\/ this appears to fix a weird timing bug on Safari\n\t\tsetTimeout(function(){\n\t\t\t_this.setRichText(trt);\n\n\t\t\t_this.initToolbar();\n\n\t\t\t_this.fillInTemplate(args, frag);\n\t\t}, 0);","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.buildRendering":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tvar trt = dojo.widget.createWidget(this._richTextType, {\n\t\t\tfocusOnLoad: this.focusOnLoad,\n\t\t\tminHeight: this.minHeight\n\t\t}, node)\n\t\tvar _this = this;\n\t\t\/\/ this appears to fix a weird timing bug on Safari\n\t\tsetTimeout(function(){\n\t\t\t_this.setRichText(trt);\n\n\t\t\t_this.initToolbar();\n\n\t\t\t_this.fillInTemplate(args, frag);\n\t\t}, 0);","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.setRichText":{"_":{"meta":{"summary":"","parameters":{"richText":{"type":""}},"src":"\t\tif(this._richText && this._richText == richText) {\n\t\t\tdojo.debug(\"Already set the richText to this richText!\");\n\t\t\treturn;\n\t\t}\n\n\t\tif(this._richText && !this._richText.isClosed) {\n\t\t\tdojo.debug(\"You are switching richTexts yet you haven't closed the current one. Losing reference!\");\n\t\t}\n\t\tthis._richText = richText;\n\t\tdojo.event.connect(this._richText, \"close\", this, \"onClose\");\n\t\tdojo.event.connect(this._richText, \"onLoad\", this, \"onLoad\");\n\t\tdojo.event.connect(this._richText, \"onDisplayChanged\", this, \"updateToolbar\");\n\t\tif(this._toolbarContainer) {\n\t\t\tthis._toolbarContainer.enable();\n\t\t\tthis.updateToolbar(true);\n\t\t}","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.initToolbar":{"_":{"meta":{"summary":"","src":"\t\tthis._toolbarContainer = dojo.widget.createWidget(this._toolbarContainerType);\n\t\tvar tb = this.addToolbar();\n\t\tvar last = true;\n\t\tfor(var i = 0; i < this.items.length; i++) {\n\t\t\tif(this.items[i] == \"\\n\") { \/\/ new row\n\t\t\t\ttb = this.addToolbar();\n\t\t\t} else {\n\t\t\t\tif((this.items[i] == \"|\")&&(!last)){\n\t\t\t\t\tlast = true;\n\t\t\t\t}else{\n\t\t\t\t\tlast = this.addItem(this.items[i], tb);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.insertToolbar(this._toolbarContainer.domNode, this._richText.domNode);\n\t\t\/\/ alert(new Date - tic);","returns":"only create it once","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.insertToolbar":{"_":{"meta":{"summary":"","parameters":{"tbNode":{"type":""},"richTextNode":{"type":""}},"src":"\t\tdojo.html.insertBefore(tbNode, richTextNode);\n\t\t\/\/dojo.html.insertBefore(this._toolbarContainer.domNode, this._richText.domNode);","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.addToolbar":{"_":{"meta":{"summary":"","parameters":{"toolbar":{"type":""}},"src":"\t\tthis.initToolbar();\n\t\tif(!(toolbar instanceof dojo.widget.Toolbar)) {\n\t\t\ttoolbar = dojo.widget.createWidget(this._toolbarType);\n\t\t}\n\t\tthis._toolbarContainer.addChild(toolbar);\n\t\tthis._toolbars.push(toolbar);\n\t\treturn toolbar;","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.addItem":{"_":{"meta":{"summary":"","parameters":{"item":{"type":""},"tb":{"type":""},"dontValidate":{"type":""}},"src":"\t\tif(!tb) { tb = this._toolbars[0]; }\n\t\tvar cmd = ((item)&&(!dojo.lang.isUndefined(item[\"getValue\"]))) ?  cmd = item[\"getValue\"](): item;\n\n\t\tvar groups = dojo.widget.Editor.itemGroups;\n\t\tif(item instanceof dojo.widget.ToolbarItem) {\n\t\t\ttb.addChild(item);\n\t\t} else if(groups[cmd]) {\n\t\t\tvar group = groups[cmd];\n\t\t\tvar worked = true;\n\t\t\tif(cmd == \"justifyGroup\" || cmd == \"listGroup\") {\n\t\t\t\tvar btnGroup = [cmd];\n\t\t\t\tfor(var i = 0 ; i < group.length; i++) {\n\t\t\t\t\tif(dontValidate || this.isSupportedCommand(group[i])) {\n\t\t\t\t\t\tbtnGroup.push(this.getCommandImage(group[i]));\n\t\t\t\t\t}else{\n\t\t\t\t\t\tworked = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(btnGroup.length){\n\t\t\t\t\t\/*\n\t\t\t\t\t\/\/ the addChild interface is assinine. Work around it.\n\t\t\t\t\tvar tprops = this.getItemProperties(cmd);\n\t\t\t\t\tvar tmpGroup = dojo.widget.createWidget(\"ToolbarButtonGroup\", tprops);\n\t\t\t\t\tdojo.debug(btnGroup);\n\t\t\t\t\tdojo.event.connect(tmpGroup, \"onClick\", this, \"_action\");\n\t\t\t\t\tdojo.event.connect(tmpGroup, \"onChangeSelect\", this, \"_action\");\n\t\t\t\t\t*\/\n\t\t\t\t\tvar btn = tb.addChild(btnGroup, null, this.getItemProperties(cmd));\n\t\t\t\t\tdojo.event.connect(btn, \"onClick\", this, \"_action\");\n\t\t\t\t\tdojo.event.connect(btn, \"onChangeSelect\", this, \"_action\");\n\t\t\t\t}\n\t\t\t\treturn worked;\n\t\t\t} else {\n\t\t\t\tfor(var i = 0; i < group.length; i++) {\n\t\t\t\t\tif(!this.addItem(group[i], tb)){\n\t\t\t\t\t\tworked = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn worked;\n\t\t\t}\n\t\t} else {\n\t\t\tif((!dontValidate)&&(!this.isSupportedCommand(cmd))){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(dontValidate || this.isSupportedCommand(cmd)) {\n\t\t\t\tcmd = cmd.toLowerCase();\n\t\t\t\tif(cmd == \"formatblock\") {\n\t\t\t\t\tvar select = dojo.widget.createWidget(\"ToolbarSelect\", {\n\t\t\t\t\t\tname: \"formatBlock\",\n\t\t\t\t\t\tvalues: this.formatBlockItems\n\t\t\t\t\t});\n\t\t\t\t\ttb.addChild(select);\n\t\t\t\t\tvar _this = this;\n\t\t\t\t\tdojo.event.connect(select, \"onSetValue\", function(item, value) {\n\t\t\t\t\t\t_this.onAction(\"formatBlock\", value);\n\t\t\t\t\t});\n\t\t\t\t} else if(cmd == \"fontname\") {\n\t\t\t\t\tvar select = dojo.widget.createWidget(\"ToolbarSelect\", {\n\t\t\t\t\t\tname: \"fontName\",\n\t\t\t\t\t\tvalues: this.fontNameItems\n\t\t\t\t\t});\n\t\t\t\t\ttb.addChild(select);\n\t\t\t\t\tdojo.event.connect(select, \"onSetValue\", dojo.lang.hitch(this, function(item, value) {\n\t\t\t\t\t\tthis.onAction(\"fontName\", value);\n\t\t\t\t\t}));\n\t\t\t\t} else if(cmd == \"fontsize\") {\n\t\t\t\t\tvar select = dojo.widget.createWidget(\"ToolbarSelect\", {\n\t\t\t\t\t\tname: \"fontSize\",\n\t\t\t\t\t\tvalues: this.fontSizeItems\n\t\t\t\t\t});\n\t\t\t\t\ttb.addChild(select);\n\t\t\t\t\tdojo.event.connect(select, \"onSetValue\", dojo.lang.hitch(this, function(item, value) {\n\t\t\t\t\t\tthis.onAction(\"fontSize\", value);\n\t\t\t\t\t}));\n\t\t\t\t} else if(dojo.lang.inArray(cmd, [\"forecolor\", \"hilitecolor\"])) {\n\t\t\t\t\tvar btn = tb.addChild(dojo.widget.createWidget(\"ToolbarColorDialog\", this.getItemProperties(cmd)));\n\t\t\t\t\tdojo.event.connect(btn, \"onSetValue\", this, \"_setValue\");\n\t\t\t\t} else {\n\t\t\t\t\tvar btn = tb.addChild(this.getCommandImage(cmd), null, this.getItemProperties(cmd));\n\t\t\t\t\tif(cmd == \"save\"){\n\t\t\t\t\t\tdojo.event.connect(btn, \"onClick\", this, \"_save\");\n\t\t\t\t\t}else if(cmd == \"cancel\"){\n\t\t\t\t\t\tdojo.event.connect(btn, \"onClick\", this, \"_close\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdojo.event.connect(btn, \"onClick\", this, \"_action\");\n\t\t\t\t\t\tdojo.event.connect(btn, \"onChangeSelect\", this, \"_action\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true;","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.name":{"_":{"meta":{"summary":"","parameters":{"item":{"type":""},"tb":{"type":""},"dontValidate":{"type":""}},"src":"\t\tif(!tb) { tb = this._toolbars[0]; }\n\t\tvar cmd = ((item)&&(!dojo.lang.isUndefined(item[\"getValue\"]))) ?  cmd = item[\"getValue\"](): item;\n\n\t\tvar groups = dojo.widget.Editor.itemGroups;\n\t\tif(item instanceof dojo.widget.ToolbarItem) {\n\t\t\ttb.addChild(item);\n\t\t} else if(groups[cmd]) {\n\t\t\tvar group = groups[cmd];\n\t\t\tvar worked = true;\n\t\t\tif(cmd == \"justifyGroup\" || cmd == \"listGroup\") {\n\t\t\t\tvar btnGroup = [cmd];\n\t\t\t\tfor(var i = 0 ; i < group.length; i++) {\n\t\t\t\t\tif(dontValidate || this.isSupportedCommand(group[i])) {\n\t\t\t\t\t\tbtnGroup.push(this.getCommandImage(group[i]));\n\t\t\t\t\t}else{\n\t\t\t\t\t\tworked = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(btnGroup.length){\n\t\t\t\t\t\/*\n\t\t\t\t\t\/\/ the addChild interface is assinine. Work around it.\n\t\t\t\t\tvar tprops = this.getItemProperties(cmd);\n\t\t\t\t\tvar tmpGroup = dojo.widget.createWidget(\"ToolbarButtonGroup\", tprops);\n\t\t\t\t\tdojo.debug(btnGroup);\n\t\t\t\t\tdojo.event.connect(tmpGroup, \"onClick\", this, \"_action\");\n\t\t\t\t\tdojo.event.connect(tmpGroup, \"onChangeSelect\", this, \"_action\");\n\t\t\t\t\t*\/\n\t\t\t\t\tvar btn = tb.addChild(btnGroup, null, this.getItemProperties(cmd));\n\t\t\t\t\tdojo.event.connect(btn, \"onClick\", this, \"_action\");\n\t\t\t\t\tdojo.event.connect(btn, \"onChangeSelect\", this, \"_action\");\n\t\t\t\t}\n\t\t\t\treturn worked;\n\t\t\t} else {\n\t\t\t\tfor(var i = 0; i < group.length; i++) {\n\t\t\t\t\tif(!this.addItem(group[i], tb)){\n\t\t\t\t\t\tworked = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn worked;\n\t\t\t}\n\t\t} else {\n\t\t\tif((!dontValidate)&&(!this.isSupportedCommand(cmd))){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(dontValidate || this.isSupportedCommand(cmd)) {\n\t\t\t\tcmd = cmd.toLowerCase();\n\t\t\t\tif(cmd == \"formatblock\") {\n\t\t\t\t\tvar select = dojo.widget.createWidget(\"ToolbarSelect\", {\n\t\t\t\t\t\tname: \"formatBlock\",\n\t\t\t\t\t\tvalues: this.formatBlockItems\n\t\t\t\t\t});\n\t\t\t\t\ttb.addChild(select);\n\t\t\t\t\tvar _this = this;\n\t\t\t\t\tdojo.event.connect(select, \"onSetValue\", function(item, value) {\n\t\t\t\t\t\t_this.onAction(\"formatBlock\", value);\n\t\t\t\t\t});\n\t\t\t\t} else if(cmd == \"fontname\") {\n\t\t\t\t\tvar select = dojo.widget.createWidget(\"ToolbarSelect\", {\n\t\t\t\t\t\tname: \"fontName\",\n\t\t\t\t\t\tvalues: this.fontNameItems\n\t\t\t\t\t});\n\t\t\t\t\ttb.addChild(select);\n\t\t\t\t\tdojo.event.connect(select, \"onSetValue\", dojo.lang.hitch(this, function(item, value) {\n\t\t\t\t\t\tthis.onAction(\"fontName\", value);\n\t\t\t\t\t}));\n\t\t\t\t} else if(cmd == \"fontsize\") {\n\t\t\t\t\tvar select = dojo.widget.createWidget(\"ToolbarSelect\", {\n\t\t\t\t\t\tname: \"fontSize\",\n\t\t\t\t\t\tvalues: this.fontSizeItems\n\t\t\t\t\t});\n\t\t\t\t\ttb.addChild(select);\n\t\t\t\t\tdojo.event.connect(select, \"onSetValue\", dojo.lang.hitch(this, function(item, value) {\n\t\t\t\t\t\tthis.onAction(\"fontSize\", value);\n\t\t\t\t\t}));\n\t\t\t\t} else if(dojo.lang.inArray(cmd, [\"forecolor\", \"hilitecolor\"])) {\n\t\t\t\t\tvar btn = tb.addChild(dojo.widget.createWidget(\"ToolbarColorDialog\", this.getItemProperties(cmd)));\n\t\t\t\t\tdojo.event.connect(btn, \"onSetValue\", this, \"_setValue\");\n\t\t\t\t} else {\n\t\t\t\t\tvar btn = tb.addChild(this.getCommandImage(cmd), null, this.getItemProperties(cmd));\n\t\t\t\t\tif(cmd == \"save\"){\n\t\t\t\t\t\tdojo.event.connect(btn, \"onClick\", this, \"_save\");\n\t\t\t\t\t}else if(cmd == \"cancel\"){\n\t\t\t\t\t\tdojo.event.connect(btn, \"onClick\", this, \"_close\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdojo.event.connect(btn, \"onClick\", this, \"_action\");\n\t\t\t\t\t\tdojo.event.connect(btn, \"onChangeSelect\", this, \"_action\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true;","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.values":{"_":{"meta":{"summary":"","parameters":{"item":{"type":""},"tb":{"type":""},"dontValidate":{"type":""}},"src":"\t\tif(!tb) { tb = this._toolbars[0]; }\n\t\tvar cmd = ((item)&&(!dojo.lang.isUndefined(item[\"getValue\"]))) ?  cmd = item[\"getValue\"](): item;\n\n\t\tvar groups = dojo.widget.Editor.itemGroups;\n\t\tif(item instanceof dojo.widget.ToolbarItem) {\n\t\t\ttb.addChild(item);\n\t\t} else if(groups[cmd]) {\n\t\t\tvar group = groups[cmd];\n\t\t\tvar worked = true;\n\t\t\tif(cmd == \"justifyGroup\" || cmd == \"listGroup\") {\n\t\t\t\tvar btnGroup = [cmd];\n\t\t\t\tfor(var i = 0 ; i < group.length; i++) {\n\t\t\t\t\tif(dontValidate || this.isSupportedCommand(group[i])) {\n\t\t\t\t\t\tbtnGroup.push(this.getCommandImage(group[i]));\n\t\t\t\t\t}else{\n\t\t\t\t\t\tworked = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(btnGroup.length){\n\t\t\t\t\t\/*\n\t\t\t\t\t\/\/ the addChild interface is assinine. Work around it.\n\t\t\t\t\tvar tprops = this.getItemProperties(cmd);\n\t\t\t\t\tvar tmpGroup = dojo.widget.createWidget(\"ToolbarButtonGroup\", tprops);\n\t\t\t\t\tdojo.debug(btnGroup);\n\t\t\t\t\tdojo.event.connect(tmpGroup, \"onClick\", this, \"_action\");\n\t\t\t\t\tdojo.event.connect(tmpGroup, \"onChangeSelect\", this, \"_action\");\n\t\t\t\t\t*\/\n\t\t\t\t\tvar btn = tb.addChild(btnGroup, null, this.getItemProperties(cmd));\n\t\t\t\t\tdojo.event.connect(btn, \"onClick\", this, \"_action\");\n\t\t\t\t\tdojo.event.connect(btn, \"onChangeSelect\", this, \"_action\");\n\t\t\t\t}\n\t\t\t\treturn worked;\n\t\t\t} else {\n\t\t\t\tfor(var i = 0; i < group.length; i++) {\n\t\t\t\t\tif(!this.addItem(group[i], tb)){\n\t\t\t\t\t\tworked = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn worked;\n\t\t\t}\n\t\t} else {\n\t\t\tif((!dontValidate)&&(!this.isSupportedCommand(cmd))){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(dontValidate || this.isSupportedCommand(cmd)) {\n\t\t\t\tcmd = cmd.toLowerCase();\n\t\t\t\tif(cmd == \"formatblock\") {\n\t\t\t\t\tvar select = dojo.widget.createWidget(\"ToolbarSelect\", {\n\t\t\t\t\t\tname: \"formatBlock\",\n\t\t\t\t\t\tvalues: this.formatBlockItems\n\t\t\t\t\t});\n\t\t\t\t\ttb.addChild(select);\n\t\t\t\t\tvar _this = this;\n\t\t\t\t\tdojo.event.connect(select, \"onSetValue\", function(item, value) {\n\t\t\t\t\t\t_this.onAction(\"formatBlock\", value);\n\t\t\t\t\t});\n\t\t\t\t} else if(cmd == \"fontname\") {\n\t\t\t\t\tvar select = dojo.widget.createWidget(\"ToolbarSelect\", {\n\t\t\t\t\t\tname: \"fontName\",\n\t\t\t\t\t\tvalues: this.fontNameItems\n\t\t\t\t\t});\n\t\t\t\t\ttb.addChild(select);\n\t\t\t\t\tdojo.event.connect(select, \"onSetValue\", dojo.lang.hitch(this, function(item, value) {\n\t\t\t\t\t\tthis.onAction(\"fontName\", value);\n\t\t\t\t\t}));\n\t\t\t\t} else if(cmd == \"fontsize\") {\n\t\t\t\t\tvar select = dojo.widget.createWidget(\"ToolbarSelect\", {\n\t\t\t\t\t\tname: \"fontSize\",\n\t\t\t\t\t\tvalues: this.fontSizeItems\n\t\t\t\t\t});\n\t\t\t\t\ttb.addChild(select);\n\t\t\t\t\tdojo.event.connect(select, \"onSetValue\", dojo.lang.hitch(this, function(item, value) {\n\t\t\t\t\t\tthis.onAction(\"fontSize\", value);\n\t\t\t\t\t}));\n\t\t\t\t} else if(dojo.lang.inArray(cmd, [\"forecolor\", \"hilitecolor\"])) {\n\t\t\t\t\tvar btn = tb.addChild(dojo.widget.createWidget(\"ToolbarColorDialog\", this.getItemProperties(cmd)));\n\t\t\t\t\tdojo.event.connect(btn, \"onSetValue\", this, \"_setValue\");\n\t\t\t\t} else {\n\t\t\t\t\tvar btn = tb.addChild(this.getCommandImage(cmd), null, this.getItemProperties(cmd));\n\t\t\t\t\tif(cmd == \"save\"){\n\t\t\t\t\t\tdojo.event.connect(btn, \"onClick\", this, \"_save\");\n\t\t\t\t\t}else if(cmd == \"cancel\"){\n\t\t\t\t\t\tdojo.event.connect(btn, \"onClick\", this, \"_close\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdojo.event.connect(btn, \"onClick\", this, \"_action\");\n\t\t\t\t\t\tdojo.event.connect(btn, \"onChangeSelect\", this, \"_action\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true;","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.enableToolbar":{"_":{"meta":{"summary":"","src":"\t\tif(this._toolbarContainer) {\n\t\t\tthis._toolbarContainer.domNode.style.display = \"\";\n\t\t\tthis._toolbarContainer.enable();\n\t\t}","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.disableToolbar":{"_":{"meta":{"summary":"","parameters":{"hide":{"type":""}},"src":"\t\tif(hide){\n\t\t\tif(this._toolbarContainer){\n\t\t\t\tthis._toolbarContainer.domNode.style.display = \"none\";\n\t\t\t}\n\t\t}else{\n\t\t\tif(this._toolbarContainer){\n\t\t\t\tthis._toolbarContainer.disable();\n\t\t\t}\n\t\t}","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.updateToolbar":{"_":{"meta":{"summary":"","parameters":{"force":{"type":""}},"src":"\t\tif(!this._toolbarContainer) { return; }\n\n\t\t\/\/ keeps the toolbar from updating too frequently\n\t\t\/\/ TODO: generalize this functionality?\n\t\tvar diff = new Date() - this._updateToolbarLastRan;\n\t\tif(!force && this._updateToolbarLastRan && (diff < this._updateToolbarFrequency)) {\n\t\t\tclearTimeout(this._updateToolbarTimer);\n\t\t\tvar _this = this;\n\t\t\tthis._updateToolbarTimer = setTimeout(function() {\n\t\t\t\t_this.updateToolbar();\n\t\t\t}, this._updateToolbarFrequency\/2);\n\t\t\treturn;\n\t\t} else {\n\t\t\tthis._updateToolbarLastRan = new Date();\n\t\t}\n\t\t\/\/ end frequency checker\n\n\t\tvar items = this._toolbarContainer.getItems();\n\t\tfor(var i = 0; i < items.length; i++) {\n\t\t\tvar item = items[i];\n\t\t\tif(item instanceof dojo.widget.ToolbarSeparator) { continue; }\n\t\t\tvar cmd = item._name;\n\t\t\tif (cmd == \"save\" || cmd == \"cancel\") { continue; }\n\t\t\telse if(cmd == \"justifyGroup\") {\n\t\t\t\ttry {\n\t\t\t\t\tif(!this._richText.queryCommandEnabled(\"justifyleft\")) {\n\t\t\t\t\t\titem.disable(false, true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\titem.enable(false, true);\n\t\t\t\t\t\tvar jitems = item.getItems();\n\t\t\t\t\t\tfor(var j = 0; j < jitems.length; j++) {\n\t\t\t\t\t\t\tvar name = jitems[j]._name;\n\t\t\t\t\t\t\tvar value = this._richText.queryCommandValue(name);\n\t\t\t\t\t\t\tif(typeof value == \"boolean\" && value) {\n\t\t\t\t\t\t\t\tvalue = name;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t} else if(typeof value == \"string\") {\n\t\t\t\t\t\t\t\tvalue = \"justify\"+value;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvalue = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!value) { value = \"justifyleft\"; } \/\/ TODO: query actual style\n\t\t\t\t\t\titem.setValue(value, false, true);\n\t\t\t\t\t}\n\t\t\t\t} catch(err) {}\n\t\t\t} else if(cmd == \"listGroup\") {\n\t\t\t\tvar litems = item.getItems();\n\t\t\t\tfor(var j = 0; j < litems.length; j++) {\n\t\t\t\t\tthis.updateItem(litems[j]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.updateItem(item);\n\t\t\t}\n\t\t}","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.updateItem":{"_":{"meta":{"summary":"","parameters":{"item":{"type":""}},"src":"\t\ttry {\n\t\t\tvar cmd = item._name;\n\t\t\tvar enabled = this._richText.queryCommandEnabled(cmd);\n\t\t\titem.setEnabled(enabled, false, true);\n\n\t\t\tvar active = this._richText.queryCommandState(cmd);\n\t\t\tif(active && cmd == \"underline\") {\n\t\t\t\t\/\/ don't activate underlining if we are on a link\n\t\t\t\tactive = !this._richText.queryCommandEnabled(\"unlink\");\n\t\t\t}\n\t\t\titem.setSelected(active, false, true);\n\t\t\treturn true;\n\t\t} catch(err) {\n\t\t\treturn false;\n\t\t}","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.isSupportedCommand":{"_":{"meta":{"summary":"","parameters":{"cmd":{"type":""}},"src":"\t\tif(!yes) {\n\t\t\ttry {\n\t\t\t\tvar richText = this._richText || dojo.widget.HtmlRichText.prototype;\n\t\t\t\tyes = richText.queryCommandAvailable(cmd);\n\t\t\t} catch(E) {}\n\t\t}\n\t\treturn yes;","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.getCommandImage":{"_":{"meta":{"summary":"","parameters":{"cmd":{"type":""}},"src":"\t\tif(cmd == \"|\") {\n\t\t\treturn cmd;\n\t\t} else {\n\t\t\treturn dojo.uri.dojoUri(\"src\/widget\/templates\/buttons\/\" + cmd + \".gif\");\n\t\t}","this":"dojo.widget.Editor"}}},"dojo.widget.Editor._action":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tthis._fire(\"onAction\", e.getValue());","this":"dojo.widget.Editor"}}},"dojo.widget.Editor._setValue":{"_":{"meta":{"summary":"","parameters":{"a":{"type":""},"b":{"type":""}},"src":"\t\tthis._fire(\"onAction\", a.getValue(), b);","this":"dojo.widget.Editor"}}},"dojo.widget.Editor._save":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tif(this.saveUrl.length){\n\t\t\t\tvar content = {};\n\t\t\t\tcontent[this.saveArgName] = this.getHtml();\n\t\t\t\tdojo.io.bind({\n\t\t\t\t\tmethod: this.saveMethod,\n\t\t\t\t\turl: this.saveUrl,\n\t\t\t\t\tcontent: content\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tdojo.debug(\"please set a saveUrl for the editor\");\n\t\t\t}\n\t\t\tif(this.closeOnSave){\n\t\t\t\tthis._richText.close(e.getName().toLowerCase() == \"save\");\n\t\t\t}\n\t\t}","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.method":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tif(this.saveUrl.length){\n\t\t\t\tvar content = {};\n\t\t\t\tcontent[this.saveArgName] = this.getHtml();\n\t\t\t\tdojo.io.bind({\n\t\t\t\t\tmethod: this.saveMethod,\n\t\t\t\t\turl: this.saveUrl,\n\t\t\t\t\tcontent: content\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tdojo.debug(\"please set a saveUrl for the editor\");\n\t\t\t}\n\t\t\tif(this.closeOnSave){\n\t\t\t\tthis._richText.close(e.getName().toLowerCase() == \"save\");\n\t\t\t}\n\t\t}","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.url":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tif(this.saveUrl.length){\n\t\t\t\tvar content = {};\n\t\t\t\tcontent[this.saveArgName] = this.getHtml();\n\t\t\t\tdojo.io.bind({\n\t\t\t\t\tmethod: this.saveMethod,\n\t\t\t\t\turl: this.saveUrl,\n\t\t\t\t\tcontent: content\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tdojo.debug(\"please set a saveUrl for the editor\");\n\t\t\t}\n\t\t\tif(this.closeOnSave){\n\t\t\t\tthis._richText.close(e.getName().toLowerCase() == \"save\");\n\t\t\t}\n\t\t}","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.content":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tif(this.saveUrl.length){\n\t\t\t\tvar content = {};\n\t\t\t\tcontent[this.saveArgName] = this.getHtml();\n\t\t\t\tdojo.io.bind({\n\t\t\t\t\tmethod: this.saveMethod,\n\t\t\t\t\turl: this.saveUrl,\n\t\t\t\t\tcontent: content\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tdojo.debug(\"please set a saveUrl for the editor\");\n\t\t\t}\n\t\t\tif(this.closeOnSave){\n\t\t\t\tthis._richText.close(e.getName().toLowerCase() == \"save\");\n\t\t\t}\n\t\t}","this":"dojo.widget.Editor"}}},"dojo.widget.Editor._close":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif(!this._richText.isClosed) {\n\t\t\tthis._richText.close(e.getName().toLowerCase() == \"save\");\n\t\t}","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.onAction":{"_":{"meta":{"summary":"","parameters":{"cmd":{"type":""},"value":{"type":""}},"src":"\t\tswitch(cmd) {\n\t\t\tcase \"createlink\":\n\t\t\t\tif(!(value = prompt(\"Please enter the URL of the link:\", \"http:\/\/\"))) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"insertimage\":\n\t\t\t\tif(!(value = prompt(\"Please enter the URL of the image:\", \"http:\/\/\"))) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\tthis._richText.execCommand(cmd, value);","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.fillInTemplate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\t\/\/ dojo.event.connect(this, \"onResized\", this._richText, \"onResized\");","this":"dojo.widget.Editor"}}},"dojo.widget.Editor._fire":{"_":{"meta":{"summary":"","parameters":{"eventName":{"type":""}},"src":"\t\tif(dojo.lang.isFunction(this[eventName])) {\n\t\t\tvar args = [];\n\t\t\tif(arguments.length == 1) {\n\t\t\t\targs.push(this);\n\t\t\t} else {\n\t\t\t\tfor(var i = 1; i < arguments.length; i++) {\n\t\t\t\t\targs.push(arguments[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis[eventName].apply(this, args);\n\t\t}","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.getHtml":{"_":{"meta":{"summary":"","src":"\t\tthis._richText.contentFilters = this._richText.contentFilters.concat(this.contentFilters);\n\t\treturn this._richText.getEditorContent();","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.getEditorContent":{"_":{"meta":{"summary":"","src":"\t\treturn this.getHtml();","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.onClose":{"_":{"meta":{"summary":"","parameters":{"save":{"type":""},"hide":{"type":""}},"src":"\t\tthis.disableToolbar(hide);\n\t\tif(save) {\n\t\t\tthis._fire(\"onSave\");\n\t\t} else {\n\t\t\tthis._fire(\"onCancel\");\n\t\t}","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.onLoad":{"_":{"meta":{"summary":"","src":"","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.onSave":{"_":{"meta":{"summary":"","src":"","this":"dojo.widget.Editor"}}},"dojo.widget.Editor.onCancel":{"_":{"meta":{"summary":"","src":"","this":"dojo.widget.Editor"}}}}}},"dojo.widget.Editor2":{"meta":{"requires":{"common":["dojo.io.*","dojo.html.*","dojo.html.layout","dojo.widget.*","dojo.widget.RichText","dojo.widget.Editor2Toolbar","dojo.widget.FloatingPane","dojo.widget.Editor2Plugin.ContextMenu","dojo.widget.Editor2Plugin.AlwaysShowToolbar"]},"methods":{"dojo.widget.Editor2Dialog":{"_":{"meta":{"summary":"","inherits":["[dojo.widget.HtmlWidget, dojo.widget.FloatingPaneBase, dojo.widget.ModalDialogBase]"],"this_inherits":["[dojo.widget.HtmlWidget, dojo.widget.FloatingPaneBase, dojo.widget.ModalDialogBase]"],"protovariables":{"modal":"","templatePath":"","executeScripts":"","refreshOnShow":"","width":"","height":"","windowState":"","displayCloseAction":"","contentFile":"","contentClass":""}}}},"dojo.widget.Editor2Dialog.fillInTemplate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\t\tthis.fillInFloatingPaneTemplate(args, frag);\n\t\t\tdojo.widget.Editor2Dialog.superclass.fillInTemplate.call(this, args, frag);","this_inherits":["dojo.widget.Editor2Dialog.superclass.fillInTemplate"],"this":"[dojo.widget.HtmlWidget, dojo.widget.FloatingPaneBase, dojo.widget.ModalDialogBase]"}}},"dojo.widget.Editor2Dialog.postCreate":{"_":{"meta":{"summary":"","src":"\t\t\tif(this.contentFile){\n\t\t\t\tdojo.require(this.contentFile);\n\t\t\t}\n\t\t\tif(this.modal){\n\t\t\t\tdojo.widget.ModalDialogBase.prototype.postCreate.call(this);\n\t\t\t}else{\n\t\t\t\twith(this.domNode.style) {\n\t\t\t\t\tzIndex = 999;\n\t\t\t\t\tdisplay = \"none\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tdojo.widget.FloatingPaneBase.prototype.postCreate.apply(this, arguments);\n\t\t\tdojo.widget.Editor2Dialog.superclass.postCreate.call(this);\n\t\t\tif(this.width && this.height){\n\t\t\t\twith(this.domNode.style){\n\t\t\t\t\twidth = this.width;\n\t\t\t\t\theight = this.height;\n\t\t\t\t}\n\t\t\t}","this":"[dojo.widget.HtmlWidget, dojo.widget.FloatingPaneBase, dojo.widget.ModalDialogBase]"}}},"dojo.widget.Editor2Dialog.createContent":{"_":{"meta":{"summary":"","src":"\t\t\tif(!this.contentWidget && this.contentClass){\n\t\t\t\tthis.contentWidget = dojo.widget.createWidget(this.contentClass, {parent: this});\n\t\t\t\tthis.containerNode.appendChild(this.contentWidget.domNode);\n\t\t\t\tdojo.event.connect(this, \"destroy\", this.contentWidget, \"destroy\");\n\t\t\t}","this":"[dojo.widget.HtmlWidget, dojo.widget.FloatingPaneBase, dojo.widget.ModalDialogBase]"}}},"[dojo.widget.HtmlWidget, dojo.widget.FloatingPaneBase, dojo.widget.ModalDialogBase]":{"_":{"meta":{"this_variables":["contentWidget","contentWidget","shared.bg.style.zIndex"]}}},"dojo.widget.Editor2Dialog.parent":{"_":{"meta":{"summary":"","src":"\t\t\tif(!this.contentWidget && this.contentClass){\n\t\t\t\tthis.contentWidget = dojo.widget.createWidget(this.contentClass, {parent: this});\n\t\t\t\tthis.containerNode.appendChild(this.contentWidget.domNode);\n\t\t\t\tdojo.event.connect(this, \"destroy\", this.contentWidget, \"destroy\");\n\t\t\t}","this":"[dojo.widget.HtmlWidget, dojo.widget.FloatingPaneBase, dojo.widget.ModalDialogBase]"}}},"dojo.widget.Editor2Dialog.show":{"_":{"meta":{"summary":"","src":"\t\t\tif(!this.contentWidget){\n\t\t\t\t\/\/buggy IE: if the dialog is hidden, the button widgets\n\t\t\t\t\/\/in the dialog can not be shown, so show it temporary (as the\n\t\t\t\t\/\/dialog may decide not to show it in loadContent() later)\n\t\t\t\tdojo.widget.Editor2Dialog.superclass.show.apply(this, arguments);\n\t\t\t\tthis.createContent();\n\t\t\t\tdojo.widget.Editor2Dialog.superclass.hide.call(this);\n\t\t\t}\n\n\t\t\tif(!this.contentWidget || !this.contentWidget.loadContent()){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.showFloatingPane();\n\t\t\tdojo.widget.Editor2Dialog.superclass.show.apply(this, arguments);\n\t\t\tif(this.modal){\n\t\t\t\tthis.showModalDialog();\n\t\t\t}\n\t\t\tthis.placeModalDialog();\n\t\t\tif(this.modal){\n\t\t\t\t\/\/place the background div under this modal pane\n\t\t\t\tthis.shared.bg.style.zIndex = this.domNode.style.zIndex-1;\n\t\t\t}","this":"[dojo.widget.HtmlWidget, dojo.widget.FloatingPaneBase, dojo.widget.ModalDialogBase]"}}},"dojo.widget.Editor2Dialog.onShow":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.widget.Editor2Dialog.superclass.onShow.call(this);\n\t\t\tthis.onFloatingPaneShow();","this":"[dojo.widget.HtmlWidget, dojo.widget.FloatingPaneBase, dojo.widget.ModalDialogBase]"}}},"dojo.widget.Editor2Dialog.closeWindow":{"_":{"meta":{"summary":"","src":"\t\t\tthis.hide();\n\t\t\tdojo.widget.Editor2Dialog.superclass.closeWindow.apply(this, arguments);","this":"[dojo.widget.HtmlWidget, dojo.widget.FloatingPaneBase, dojo.widget.ModalDialogBase]"}}},"dojo.widget.Editor2Dialog.hide":{"_":{"meta":{"summary":"","src":"\t\t\tif(this.modal){\n\t\t\t\tthis.hideModalDialog();\n\t\t\t}\n\t\t\tdojo.widget.Editor2Dialog.superclass.hide.call(this);","this":"[dojo.widget.HtmlWidget, dojo.widget.FloatingPaneBase, dojo.widget.ModalDialogBase]"}}},"dojo.widget.Editor2DialogContent":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}},"dojo.widget.Editor2":{"_":{"meta":{"summary":"","inherits":["dojo.widget.RichText"],"this_inherits":["dojo.widget.RichText"],"protovariables":{"saveUrl":"","saveMethod":"","saveArgName":"","closeOnSave":"","shareToolbar":"","toolbarAlwaysVisible":"","htmlEditing":"","_inSourceMode":"","_htmlEditNode":"","toolbarWidget":"","scrollInterval":"","toolbarTemplatePath":"","plugins":"","_updateToolbarLastRan":"","_updateToolbarTimer":"","_updateToolbarFrequency":""}}}},"dojo.widget.Editor2.editorOnLoad":{"_":{"meta":{"summary":"","src":"\t\t\tif(this.toolbarAlwaysVisible){\n\t\t\t\tdojo.require(\"dojo.widget.Editor2Plugin.AlwaysShowToolbar\");\n\t\t\t}\n\n\t\t\tvar toolbars = dojo.widget.byType(\"Editor2Toolbar\");\n\t\t\tif((!toolbars.length)||(!this.shareToolbar)){\n\t\t\t\tif(this.toolbarWidget){\n\t\t\t\t\tthis.toolbarWidget.show();\n\t\t\t\t}else{\n\t\t\t\t\tvar tbOpts = {};\n\t\t\t\t\ttbOpts.templatePath = dojo.uri.dojoUri(this.toolbarTemplatePath);\n\t\t\t\t\tif(this.toolbarTemplateCssPath){\n\t\t\t\t\t\ttbOpts.templateCssPath = this.toolbarTemplateCssPath;\n\t\t\t\t\t}\n\t\t\t\t\tthis.toolbarWidget = dojo.widget.createWidget(\"Editor2Toolbar\", tbOpts, this.domNode, \"before\");\n\n\t\t\t\t\tdojo.event.connect(this, \"close\", this.toolbarWidget, \"hide\");\n\t\t\t\t}\n\n\t\t\t\tthis.toolbarLoaded();\n\t\t\t}else{\n\t\t\t\t\/\/ FIXME: \tselecting in one shared toolbar doesn't clobber\n\t\t\t\t\/\/ \t\t\tselection in the others. This is problematic.\n\t\t\t\tthis.toolbarWidget = toolbars[0];\n\t\t\t}\n\n\t\t\tdojo.event.topic.registerPublisher(\"Editor2.clobberFocus\", this, \"clobberFocus\");\n\t\t\tdojo.event.topic.subscribe(\"Editor2.clobberFocus\", this, \"setBlur\");\n\n\t\t\tdojo.event.topic.publish(\"dojo.widget.Editor2::onLoad\", this);\n\/\/\t\t\tdojo.profile.end(\"dojo.widget.Editor2::editorOnLoad\");","this":"dojo.widget.RichText"}}},"dojo.widget.RichText":{"_":{"meta":{"this_variables":["toolbarWidget","loadedPlugins","_inSourceMode","_htmlEditNode","_htmlEditNode.style.display","_htmlEditNode.style.width","_htmlEditNode.style.height","_htmlEditNode.value","_updateToolbarTimer","_updateToolbarLastRan","_htmlEditNode"]}}},"dojo.widget.Editor2.toolbarLoaded":{"_":{"meta":{"summary":"","src":"","this":"dojo.widget.RichText"}}},"dojo.widget.Editor2.registerLoadedPlugin":{"_":{"meta":{"summary":"","parameters":{"obj":{"type":"Object"}},"src":"\t\t\tif(!this.loadedPlugins){\n\t\t\t\tthis.loadedPlugins = [];\n\t\t\t}\n\t\t\tthis.loadedPlugins.push(obj);","this":"dojo.widget.RichText"}}},"dojo.widget.Editor2.unregisterLoadedPlugin":{"_":{"meta":{"summary":"","parameters":{"obj":{"type":"Object"}},"src":"\t\t\tfor(var i in this.loadedPlugins){\n\t\t\t\tif(this.loadedPlugins[i] === obj){\n\t\t\t\t\tdelete this.loadedPlugins[i];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tdojo.debug(\"dojo.widget.Editor2.unregisterLoadedPlugin: unknow plugin object: \"+obj);","this":"dojo.widget.RichText"}}},"dojo.widget.Editor2.execCommand":{"_":{"meta":{"summary":"","parameters":{"command":{"type":""},"argument":{"type":""}},"src":"\t\t\tswitch(command.toLowerCase()){\n\t\t\t\tcase 'htmltoggle':\n\t\t\t\t\tthis.toggleHtmlEditing();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tdojo.widget.Editor2.superclass.execCommand.call(this, command, argument);\n\t\t\t}","this_inherits":["dojo.widget.Editor2.superclass.execCommand"],"this":"dojo.widget.RichText"}}},"dojo.widget.Editor2.default":{"_":{"meta":{"summary":"","parameters":{"command":{"type":""},"argument":{"type":""}},"src":"\t\t\tswitch(command.toLowerCase()){\n\t\t\t\tcase 'htmltoggle':\n\t\t\t\t\treturn this._inSourceMode;\n\t\t\t\tdefault:\n\t\t\t\t\treturn dojo.widget.Editor2.superclass.queryCommandState.call(this, command, argument);\n\t\t\t}","this_inherits":["dojo.widget.Editor2.superclass.queryCommandState"],"this":"dojo.widget.RichText"}}},"dojo.widget.Editor2.queryCommandEnabled":{"_":{"meta":{"summary":"","parameters":{"command":{"type":""},"argument":{"type":""}},"src":"\t\t\tswitch(command.toLowerCase()){\n\t\t\t\tcase 'htmltoggle':\n\t\t\t\t\treturn true;\n\t\t\t\tdefault:\n\t\t\t\t\tif(this._inSourceMode){ return false;}\n\t\t\t\t\treturn dojo.widget.Editor2.superclass.queryCommandEnabled.call(this, command, argument);\n\t\t\t}","this_inherits":["dojo.widget.Editor2.superclass.queryCommandEnabled"],"this":"dojo.widget.RichText"}}},"dojo.widget.Editor2.queryCommandState":{"_":{"meta":{"summary":"","parameters":{"command":{"type":""},"argument":{"type":""}},"src":"\t\t\tswitch(command.toLowerCase()){\n\t\t\t\tcase 'htmltoggle':\n\t\t\t\t\treturn this._inSourceMode;\n\t\t\t\tdefault:\n\t\t\t\t\treturn dojo.widget.Editor2.superclass.queryCommandState.call(this, command, argument);\n\t\t\t}","this_inherits":["dojo.widget.Editor2.superclass.queryCommandState"],"this":"dojo.widget.RichText"}}},"dojo.widget.Editor2.onClick":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tdojo.widget.Editor2.superclass.onClick.call(this, e);\n\t\t\t\/\/if Popup is used, call dojo.widget.PopupManager.onClick\n\t\t\t\/\/manually when click in the editing area to close all\n\t\t\t\/\/open popups (dropdowns) \n\t\t\tif(dojo.widget.PopupManager){\n\t\t\t\tif(!e){ \/\/IE\n\t\t\t\t\te = this.window.event;\n\t\t\t\t}\n\t\t\t\tdojo.widget.PopupManager.onClick(e);\n\t\t\t}","this_inherits":["dojo.widget.Editor2.superclass.onClick"],"this":"dojo.widget.RichText"}}},"dojo.widget.Editor2.clobberFocus":{"_":{"meta":{"summary":"","src":"","this":"dojo.widget.RichText"}}},"dojo.widget.Editor2.save":{"_":{"meta":{"summary":"","src":"                    dojo.debug(\"Editor2.save\");    ","this":"dojo.widget.RichText"}}},"dojo.widget.Editor2.insertImage":{"_":{"meta":{"summary":"","src":"                           dojo.debug(\"Editor2.insertImage\");    ","this":"dojo.widget.RichText"}}},"dojo.widget.Editor2.toggleHtmlEditing":{"_":{"meta":{"summary":"","src":"\t\t\tif(this===dojo.widget.Editor2Manager.getCurrentInstance()){\n\t\t\t\tif(!this._inSourceMode){\n\t\t\t\t\tthis._inSourceMode = true;\n\n\t\t\t\t\tif(!this._htmlEditNode){\n\t\t\t\t\t\tthis._htmlEditNode = dojo.doc().createElement(\"textarea\");\n\t\t\t\t\t\tdojo.html.insertBefore(this._htmlEditNode, this.domNode);\n\t\t\t\t\t}\n\t\t\t\t\tthis._htmlEditNode.style.display = \"\";\n\t\t\t\t\tthis._htmlEditNode.style.width = \"100%\";\n\t\t\t\t\tthis._htmlEditNode.style.height = dojo.html.getBorderBox(this.editNode).height+\"px\";\n\t\t\t\t\tthis._htmlEditNode.value = this.editNode.innerHTML;\n\n\t\t\t\t\twith(this.domNode.style){\n\t\t\t\t\t\tif(this.object){\n\t\t\t\t\t\t\t\/\/activeX object doesn't like to be hidden, so move it outside of screen instead\n\t\t\t\t\t\t\tposition = \"absolute\";\n\t\t\t\t\t\t\tleft = \"-2000px\";\n\t\t\t\t\t\t\ttop = \"-2000px\";\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tdisplay = \"none\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis._inSourceMode = false;\n\n\t\t\t\t\t\/\/In IE activeX mode, if _htmlEditNode is focused,\n\t\t\t\t\t\/\/when toggling, an error would occur, so unfocus it\n\t\t\t\t\tthis._htmlEditNode.blur();\n\n\t\t\t\t\twith(this.domNode.style){\n\t\t\t\t\t\tif(this.object){\n\t\t\t\t\t\t\tposition = \"\";\n\t\t\t\t\t\t\tleft = \"\";\n\t\t\t\t\t\t\ttop = \"\";\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tdisplay = \"\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tdojo.lang.setTimeout(this, \"replaceEditorContent\", 1, this._htmlEditNode.value);\n\t\t\t\t\tthis._htmlEditNode.style.display = \"none\";\n\t\t\t\t\tthis.focus();\n\t\t\t\t}\n\t\t\t\tthis.updateToolbar(true);\n\t\t\t}","this":"dojo.widget.RichText"}}},"dojo.widget.Editor2.setFocus":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.debug(\"setFocus: start \"+this.widgetId);\n\t\t\tif(dojo.widget.Editor2Manager.getCurrentInstance() === this){ return; }\n\n\t\t\tthis.clobberFocus();\n\t\t\t dojo.debug(\"setFocus:\", this);\n\t\t\tdojo.widget.Editor2Manager.setCurrentInstance(this);","this":"dojo.widget.RichText"}}},"dojo.widget.Editor2.setBlur":{"_":{"meta":{"summary":"","src":"\t\t\t dojo.debug(\"setBlur:\", this);\n\t\t\t\/\/dojo.event.disconnect(this.toolbarWidget, \"exec\", this, \"execCommand\");","this":"dojo.widget.RichText"}}},"dojo.widget.Editor2.updateToolbar":{"_":{"meta":{"summary":"","parameters":{"force":{"type":""}},"src":"\t\t\tif((!this.isLoaded)||(!this.toolbarWidget)){ return; }\n\n\t\t\t\/\/ keeps the toolbar from updating too frequently\n\t\t\t\/\/ TODO: generalize this functionality?\n\t\t\tvar diff = new Date() - this._updateToolbarLastRan;\n\t\t\tif( (!force)&&(this._updateToolbarLastRan)&&\n\t\t\t\t((diff < this._updateToolbarFrequency)) ){\n\n\t\t\t\tclearTimeout(this._updateToolbarTimer);\n\t\t\t\tvar _this = this;\n\t\t\t\tthis._updateToolbarTimer = setTimeout(function() {\n\t\t\t\t\t_this.updateToolbar();\n\t\t\t\t}, this._updateToolbarFrequency\/2);\n\t\t\t\treturn;\n\n\t\t\t}else{\n\t\t\t\tthis._updateToolbarLastRan = new Date();\n\t\t\t}\n\t\t\t\/\/ end frequency checker\n\n\t\t\t\/\/TODO\n\t\t\t\/\/if((cmd == \"inserthtml\") || (cmd == \"save\")){ return; }\n\n\t\t\t\/\/IE has the habit of generating events even when this editor is blurred, prevent this\n\t\t\tif(dojo.widget.Editor2Manager.getCurrentInstance() !== this){ return; }\n\n\t\t\tthis.toolbarWidget.update();","this":"dojo.widget.RichText"}}},"dojo.widget.Editor2.destroy":{"_":{"meta":{"summary":"","parameters":{"finalize":{"type":""}},"src":"\t\t\tthis._htmlEditNode = null;\n\t\t\tdojo.event.disconnect(this, \"close\", this.toolbarWidget, \"hide\");\n\t\t\tif(!finalize){\n\t\t\t\tthis.toolbarWidget.destroy();\n\t\t\t}\n\t\t\tdojo.widget.Editor2.superclass.destroy.call(this);","this":"dojo.widget.RichText"}}},"dojo.widget.Editor2.onDisplayChanged":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tdojo.widget.Editor2.superclass.onDisplayChanged.call(this,e);\n\t\t\tthis.updateToolbar();","this_inherits":["dojo.widget.Editor2.superclass.onDisplayChanged"],"this":"dojo.widget.RichText"}}},"dojo.widget.Editor2.onLoad":{"_":{"meta":{"summary":"","src":"\t\t\ttry{\n\t\t\t\tdojo.widget.Editor2.superclass.onLoad.call(this);\n\t\t\t}catch(e){ \/\/ FIXME: debug why this is throwing errors in IE!\n\t\t\t\tdojo.debug(e);\n\t\t\t}\n\t\t\tthis.editorOnLoad();","this":"dojo.widget.RichText"}}},"dojo.widget.Editor2.onFocus":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.widget.Editor2.superclass.onFocus.call(this);\n\t\t\tthis.setFocus();","this":"dojo.widget.RichText"}}},"dojo.widget.Editor2._save":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\t\tdojo.debug(\"save attempt\");\n\t\t\t\tif(this.saveUrl.length){\n\t\t\t\t\tvar content = {};\n\t\t\t\t\tcontent[this.saveArgName] = this.getEditorContent();\n\t\t\t\t\tdojo.io.bind({\n\t\t\t\t\t\tmethod: this.saveMethod,\n\t\t\t\t\t\turl: this.saveUrl,\n\t\t\t\t\t\tcontent: content\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tdojo.debug(\"please set a saveUrl for the editor\");\n\t\t\t\t}\n\t\t\t\tif(this.closeOnSave){\n\t\t\t\t\tthis.close(e.getName().toLowerCase() == \"save\");\n\t\t\t\t}\n\t\t\t}","this":"dojo.widget.RichText"}}},"dojo.widget.Editor2.method":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\t\tdojo.debug(\"save attempt\");\n\t\t\t\tif(this.saveUrl.length){\n\t\t\t\t\tvar content = {};\n\t\t\t\t\tcontent[this.saveArgName] = this.getEditorContent();\n\t\t\t\t\tdojo.io.bind({\n\t\t\t\t\t\tmethod: this.saveMethod,\n\t\t\t\t\t\turl: this.saveUrl,\n\t\t\t\t\t\tcontent: content\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tdojo.debug(\"please set a saveUrl for the editor\");\n\t\t\t\t}\n\t\t\t\tif(this.closeOnSave){\n\t\t\t\t\tthis.close(e.getName().toLowerCase() == \"save\");\n\t\t\t\t}\n\t\t\t}","this":"dojo.widget.RichText"}}},"dojo.widget.Editor2.url":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\t\tdojo.debug(\"save attempt\");\n\t\t\t\tif(this.saveUrl.length){\n\t\t\t\t\tvar content = {};\n\t\t\t\t\tcontent[this.saveArgName] = this.getEditorContent();\n\t\t\t\t\tdojo.io.bind({\n\t\t\t\t\t\tmethod: this.saveMethod,\n\t\t\t\t\t\turl: this.saveUrl,\n\t\t\t\t\t\tcontent: content\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tdojo.debug(\"please set a saveUrl for the editor\");\n\t\t\t\t}\n\t\t\t\tif(this.closeOnSave){\n\t\t\t\t\tthis.close(e.getName().toLowerCase() == \"save\");\n\t\t\t\t}\n\t\t\t}","this":"dojo.widget.RichText"}}},"dojo.widget.Editor2.content":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\t\tdojo.debug(\"save attempt\");\n\t\t\t\tif(this.saveUrl.length){\n\t\t\t\t\tvar content = {};\n\t\t\t\t\tcontent[this.saveArgName] = this.getEditorContent();\n\t\t\t\t\tdojo.io.bind({\n\t\t\t\t\t\tmethod: this.saveMethod,\n\t\t\t\t\t\turl: this.saveUrl,\n\t\t\t\t\t\tcontent: content\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tdojo.debug(\"please set a saveUrl for the editor\");\n\t\t\t\t}\n\t\t\t\tif(this.closeOnSave){\n\t\t\t\t\tthis.close(e.getName().toLowerCase() == \"save\");\n\t\t\t\t}\n\t\t\t}","this":"dojo.widget.RichText"}}}}}},"dojo.widget.Editor2Plugin.AlwaysShowToolbar":{"meta":{"methods":{"dojo.widget.Editor2Plugin.AlwaysShowToolbar":{"_":{"meta":{"summary":""}}}}}},"dojo.widget.Editor2Plugin.ContextMenu":{"meta":{"methods":{"dojo.widget.Editor2Plugin.ContextMenu":{"_":{"meta":{"summary":""}}},"dojo.widget.Editor2Plugin.SimpleContextMenu":{"_":{"meta":{"summary":""}}},"dojo.widget.Editor2Plugin.GenericContextMenu":{"_":{"meta":{"summary":"","inherits":["dojo.widget.Editor2Plugin.SimpleContextMenu"],"this_inherits":["dojo.widget.Editor2Plugin.SimpleContextMenu"]}}},"dojo.widget.Editor2Plugin.LinkContextMenu":{"_":{"meta":{"summary":"","inherits":["dojo.widget.Editor2Plugin.SimpleContextMenu"],"this_inherits":["dojo.widget.Editor2Plugin.SimpleContextMenu"]}}},"dojo.widget.Editor2Plugin.ImageContextMenu":{"_":{"meta":{"summary":"","inherits":["dojo.widget.Editor2Plugin.SimpleContextMenu"],"this_inherits":["dojo.widget.Editor2Plugin.SimpleContextMenu"]}}},"dojo.widget.Editor2ContextMenuItem":{"_":{"meta":{"summary":"","inherits":["dojo.widget.MenuItem2"],"this_inherits":["dojo.widget.MenuItem2"],"protovariables":{"command":""}}}},"dojo.widget.Editor2ContextMenuItem.postCreate":{"_":{"meta":{"summary":"","src":"\t\tif(!this.command){\n\t\t\tthis.command = this.caption;\n\t\t}\n\n\t\tdojo.widget.Editor2ContextMenuItem.superclass.postCreate.apply(this, arguments);","this":"dojo.widget.MenuItem2"}}},"dojo.widget.MenuItem2":{"_":{"meta":{"this_variables":["command","cmd","domNode.style.display","domNode.style.display"]}}},"dojo.widget.Editor2ContextMenuItem.setup":{"_":{"meta":{"summary":"","src":"\t\tthis.cmd = dojo.widget.Editor2Manager.getCommand(this.command);\n\t\tif(!this.cmd){\n\t\t\talert(\"command \" + this.command + \" is not recognized!\");\n\t\t}","this":"dojo.widget.MenuItem2"}}},"dojo.widget.Editor2ContextMenuItem.onClick":{"_":{"meta":{"summary":"","src":"\t\tif(!this.cmd){\n\t\t\tthis.setup();\n\t\t}\n\t\tif(this.cmd){\n\t\t\tthis.cmd.execute();\n\t\t}","this":"dojo.widget.MenuItem2"}}},"dojo.widget.Editor2ContextMenuItem.refresh":{"_":{"meta":{"summary":"","src":"\t\tif(!this.cmd){\n\t\t\tthis.setup();\n\t\t}\n\t\tif(this.cmd){\n\t\t\tif(this.cmd.getState() == dojo.widget.Editor2Manager.commandState.Disabled){\n\t\t\t\tthis.disable();\n\t\t\t\treturn false;\n\t\t\t}else{\n\t\t\t\tthis.enable();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}","this":"dojo.widget.MenuItem2"}}},"dojo.widget.Editor2ContextMenuItem.hide":{"_":{"meta":{"summary":"","src":"\t\tthis.domNode.style.display = \"none\";","this":"dojo.widget.MenuItem2"}}},"dojo.widget.Editor2ContextMenuItem.show":{"_":{"meta":{"summary":"","src":"\t\tthis.domNode.style.display = \"\";","this":"dojo.widget.MenuItem2"}}}}}},"dojo.widget.Editor2Plugin.CreateLinkDialog":{"meta":{"methods":{"dojo.widget.Editor2CreateLinkDialog":{"_":{"meta":{"summary":"","inherits":["dojo.widget.Editor2DialogContent"],"this_inherits":["dojo.widget.Editor2DialogContent"],"protovariables":{"templatePath":"","editableAttributes":"","loadContent":"","ok":""}}}}}}},"dojo.widget.Editor2Plugin.FindReplace":{"meta":{"methods":{"dojo.widget.Editor2Plugin.FindCommand":{"_":{"meta":{"summary":"","inherits":["dojo.widget.Editor2DialogCommand"],"this_inherits":["dojo.widget.Editor2DialogCommand"]}}},"dojo.widget.Editor2Plugin.FindReplace":{"_":{"meta":{"summary":"","parameters":{"name":{"type":""}},"src":"\tvar name = name.toLowerCase();\n\n\tvar item;\n\tif(name == 'replace'){\n\t\titem = new dojo.widget.Editor2ToolbarButton('Replace');\n\t}else if(name == 'find') {\n\t\titem = new dojo.widget.Editor2ToolbarButton('Find');\n\t}\n\n\treturn item;"}}}}}},"dojo.widget.Editor2Plugin.FindReplaceDialog":{"meta":{"methods":{"dojo.widget.Editor2FindDialog":{"_":{"meta":{"summary":"","inherits":["dojo.widget.Editor2DialogContent"],"this_inherits":["dojo.widget.Editor2DialogContent"]}}},"dojo.widget.Editor2ReplaceDialog":{"_":{"meta":{"summary":"","inherits":["dojo.widget.Editor2DialogContent"],"this_inherits":["dojo.widget.Editor2DialogContent"]}}}}}},"dojo.widget.Editor2Plugin.InsertImageDialog":{"meta":{"methods":{"dojo.widget.Editor2InsertImageDialog":{"_":{"meta":{"summary":"","inherits":["dojo.widget.Editor2DialogContent"],"this_inherits":["dojo.widget.Editor2DialogContent"]}}}}}},"dojo.widget.Editor2Plugin.InsertTableDialog":{"meta":{"methods":{"dojo.widget.Editor2InsertTableDialog":{"_":{"meta":{"summary":"","inherits":["dojo.widget.Editor2DialogContent"],"this_inherits":["dojo.widget.Editor2DialogContent"]}}}}}},"dojo.widget.Editor2Plugin.TableOperation":{"meta":{"methods":{"dojo.widget.Editor2Plugin.TableContextMenu":{"_":{"meta":{"summary":"","inherits":["dojo.widget.Editor2Plugin.SimpleContextMenu"],"this_inherits":["dojo.widget.Editor2Plugin.SimpleContextMenu"]}}},"dojo.widget.Editor2Plugin.TableContextMenu.createItems":{"_":{"meta":{"summary":"","src":"\t\t\tthis.items.push(dojo.widget.createWidget(\"Editor2ContextMenuItem\", {caption: \"Delete Table\", command: 'deletetable'}));\n\t\t\tthis.items.push(dojo.widget.createWidget(\"Editor2ContextMenuItem\", {caption: \"Table Property\", command: 'inserttable', iconClass: \"TB_Button_Icon TB_Button_Table\"}));","this":"dojo.widget.Editor2Plugin.SimpleContextMenu"}}},"dojo.widget.Editor2Plugin.TableContextMenu.caption":{"_":{"meta":{"summary":"","src":"\t\t\tthis.items.push(dojo.widget.createWidget(\"Editor2ContextMenuItem\", {caption: \"Delete Table\", command: 'deletetable'}));\n\t\t\tthis.items.push(dojo.widget.createWidget(\"Editor2ContextMenuItem\", {caption: \"Table Property\", command: 'inserttable', iconClass: \"TB_Button_Icon TB_Button_Table\"}));","this":"dojo.widget.Editor2Plugin.SimpleContextMenu"}}},"dojo.widget.Editor2Plugin.TableContextMenu.checkVisibility":{"_":{"meta":{"summary":"","src":"\t\t\tvar curInst = dojo.widget.Editor2Manager.getCurrentInstance();\n\t\t\tvar table = dojo.withGlobal(curInst.window, \"hasAncestorElement\", dojo.html.selection, ['table']);\n\t\n\t\t\tif(dojo.withGlobal(curInst.window, \"hasAncestorElement\", dojo.html.selection, ['table'])){\n\t\t\t\tthis.items[0].show();\n\t\t\t\tthis.items[1].show();\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tthis.items[0].hide();\n\t\t\t\tthis.items[1].hide();\n\t\t\t\treturn false;\n\t\t\t}","this":"dojo.widget.Editor2Plugin.SimpleContextMenu"}}}}}},"dojo.widget.Editor2Plugin.ToolbarDndSupport":{"meta":{"requires":{"common":["dojo.dnd.*"]},"methods":{"dojo.widget.Editor2Plugin.ToolbarDndSupport":{"_":{"meta":{"summary":""}}}}}},"dojo.widget.Editor2Plugin._":{"meta":{"requires":{"common":["dojo.widget.Editor2","dojo.widget.Editor2Toolbar"]}}},"dojo.widget.Editor2Toolbar":{"meta":{"requires":{"common":["dojo.lang.*","dojo.widget.*","dojo.event.*","dojo.html.layout","dojo.html.display","dojo.widget.RichText","dojo.widget.Menu2","dojo.widget.ColorPalette","dojo.widget.ContentPane"]},"methods":{"dojo.widget.Editor2ToolbarButton":{"_":{"meta":{"summary":""}}},"dojo.widget.Editor2ToolbarDropDownButton":{"_":{"meta":{"summary":"","inherits":["dojo.widget.Editor2ToolbarButton"],"this_inherits":["dojo.widget.Editor2ToolbarButton"]}}},"dojo.widget.Editor2ToolbarColorPaletteButton":{"_":{"meta":{"summary":"","inherits":["dojo.widget.Editor2ToolbarDropDownButton"],"this_inherits":["dojo.widget.Editor2ToolbarDropDownButton"]}}},"dojo.widget.Editor2ToolbarFormatBlockPlainSelect":{"_":{"meta":{"summary":"","inherits":["dojo.widget.Editor2ToolbarButton"],"this_inherits":["dojo.widget.Editor2ToolbarButton"]}}},"dojo.widget.Editor2ToolbarComboItem":{"_":{"meta":{"summary":"","inherits":["dojo.widget.Editor2ToolbarDropDownButton"],"this_inherits":["dojo.widget.Editor2ToolbarDropDownButton"]}}},"dojo.widget.Editor2ToolbarFormatBlockSelect":{"_":{"meta":{"summary":"","inherits":["dojo.widget.Editor2ToolbarComboItem"],"this_inherits":["dojo.widget.Editor2ToolbarComboItem"]}}},"dojo.widget.Editor2ToolbarFontSizeSelect":{"_":{"meta":{"summary":"","inherits":["dojo.widget.Editor2ToolbarComboItem"],"this_inherits":["dojo.widget.Editor2ToolbarComboItem"]}}},"dojo.widget.Editor2ToolbarFontNameSelect":{"_":{"meta":{"summary":"","inherits":["dojo.widget.Editor2ToolbarFontSizeSelect"],"this_inherits":["dojo.widget.Editor2ToolbarFontSizeSelect"]}}},"dojo.widget.Editor2Toolbar":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"],"protovariables":{"templatePath":"","templateCssPath":"","saveButton":"","ToolbarLatchedItemStyle":"","ToolbarEnabledItemStyle":"","ToolbarDisabledItemStyle":"","ToolbarHighlightedItemStyle":"","ToolbarHighlightedSelectStyle":"","ToolbarHighlightedSelectItemStyle":""}}}},"dojo.widget.Editor2Toolbar.postCreate":{"_":{"meta":{"summary":"","src":"\t\t\tvar nodes = dojo.html.getElementsByClass(\"dojoEditorToolbarItem\", this.domNode                         \n\n\t\t\tthis.items = {};\n\t\t\tfor(var x=0; x<nodes.length; x++){\n\t\t\t\tvar node = nodes[x];\n\t\t\t\tvar itemname = node.getAttribute(\"dojoETItemName\");\n\t\t\t\tif(itemname){\n\t\t\t\t\tvar item = dojo.widget.Editor2ToolbarItemManager.getToolbarItem(itemname);\n\t\t\t\t\tif(item){\n\t\t\t\t\t\titem.create(node, this);\n\t\t\t\t\t\tthis.items[itemname.toLowerCase()] = item;\n\t\t\t\t\t}else{\n\t\t\t\t\t\t\/\/hide unsupported toolbar items\n\t\t\t\t\t\tnode.style.display = \"none\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.HtmlWidget":{"_":{"meta":{"this_variables":["items"]}}},"dojo.widget.Editor2Toolbar.wikiwordClick":{"_":{"meta":{"summary":"","src":"","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Editor2Toolbar.saveClick":{"_":{"meta":{"summary":"","src":"","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Editor2Toolbar.update":{"_":{"meta":{"summary":"","src":"\t\t\tfor(var cmd in this.items){\n\t\t\t\tthis.items[cmd].refreshState();\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Editor2Toolbar.destroy":{"_":{"meta":{"summary":"","src":"\t\t\tfor(var it in this.items){\n\t\t\t\tthis.items[it].destroy();\n\t\t\t\tdelete this.items[it];\n\t\t\t}\n\t\t\tdojo.widget.Editor2Toolbar.superclass.destroy.call(this);","this":"dojo.widget.HtmlWidget"}}}}}},"dojo.widget.FilteringTable":{"meta":{"requires":{"common":["dojo.date.format","dojo.data.SimpleStore","dojo.html.*","dojo.html.util","dojo.html.style","dojo.html.selection","dojo.event.*","dojo.widget.*","dojo.widget.HtmlWidget"]},"methods":{"dojo.widget.FilteringTable":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}}}}},"dojo.widget.FisheyeList":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.HtmlWidget","dojo.html.style","dojo.html.selection","dojo.html.util","dojo.event.*"]},"methods":{"dojo.widget.FisheyeList":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}},"dojo.widget.FisheyeListItem":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}}}}},"dojo.widget.FloatingPane":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.Manager","dojo.html.*","dojo.html.layout","dojo.html.shadow","dojo.html.iframe","dojo.html.selection","dojo.widget.html.layout","dojo.widget.ContentPane","dojo.dnd.HtmlDragMove","dojo.dnd.HtmlDragMoveSource","dojo.dnd.HtmlDragMoveObject","dojo.widget.ResizeHandle","dojo.widget.Dialog"]},"methods":{"dojo.widget.FloatingPaneBase":{"_":{"meta":{"summary":"","protovariables":{"title":"","iconSrc":"","hasShadow":"","constrainToContainer":"","taskBarId":"","resizable":"","titleBarDisplay":"","windowState":"","displayCloseAction":"","displayMinimizeAction":"","displayMaximizeAction":"","maxTaskBarConnectAttempts":"","taskBarConnectAttempts":"","templatePath":"","templateCssPath":"","drag":""}}}},"dojo.widget.FloatingPaneBase.fillInFloatingPaneTemplate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\t\tdojo.html.copyStyle(this.domNode, source);\n\t\n\t\t\t\/\/ necessary for safari, khtml (for computing width\/height)\n\t\t\tdojo.body().appendChild(this.domNode);\n\t\n\t\t\t\/\/ if display:none then state=minimized, otherwise state=normal\n\t\t\tif(!this.isShowing()){\n\t\t\t\tthis.windowState=\"minimized\";\n\t\t\t}\n\t\n\t\t\t\/\/ <img src=\"\"> can hang IE!  better get rid of it\n\t\t\tif(this.iconSrc==\"\"){\n\t\t\t\tdojo.html.removeNode(this.titleBarIcon);\n\t\t\t}else{\n\t\t\t\tthis.titleBarIcon.src = this.iconSrc.toString();\/\/ dojo.uri.Uri obj req. toString()\n\t\t\t}\n\t\n\t\t\tif(this.titleBarDisplay!=\"none\"){\t\n\t\t\t\tthis.titleBar.style.display=\"\";\n\t\t\t\tdojo.html.disableSelection(this.titleBar);\n\t\n\t\t\t\tthis.titleBarIcon.style.display = (this.iconSrc==\"\" ? \"none\" : \"\");\n\t\n\t\t\t\tthis.minimizeAction.style.display = (this.displayMinimizeAction ? \"\" : \"none\");\n\t\t\t\tthis.maximizeAction.style.display= \n\t\t\t\t\t(this.displayMaximizeAction && this.windowState!=\"maximized\" ? \"\" : \"none\");\n\t\t\t\tthis.restoreAction.style.display= \n\t\t\t\t\t(this.displayMaximizeAction && this.windowState==\"maximized\" ? \"\" : \"none\");\n\t\t\t\tthis.closeAction.style.display= (this.displayCloseAction ? \"\" : \"none\");\n\t\n\t\t\t\tthis.drag = new dojo.dnd.HtmlDragMoveSource(this.domNode);\t\n\t\t\t\tif (this.constrainToContainer) {\n\t\t\t\t\tthis.drag.constrainTo();\n\t\t\t\t}\n\t\t\t\tthis.drag.setDragHandle(this.titleBar);\n\t\n\t\t\t\tvar self = this;\n\t\n\t\t\t\tdojo.event.topic.subscribe(\"dragMove\",\n\t\t\t\t\tfunction (info){\n\t\t\t\t\t\tif (info.source.domNode == self.domNode){\n\t\t\t\t\t\t\tdojo.event.topic.publish('floatingPaneMove', { source: self } );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\n\t\t\tif(this.resizable){\n\t\t\t\tthis.resizeBar.style.display=\"\";\n\t\t\t\tthis.resizeHandle = dojo.widget.createWidget(\"ResizeHandle\", {targetElmId: this.widgetId, id:this.widgetId+\"_resize\"});\n\t\t\t\tthis.resizeBar.appendChild(this.resizeHandle.domNode);\n\t\t\t}\n\t\n\t\t\t\/\/ add a drop shadow\n\t\t\tif(this.hasShadow){\n\t\t\t\tthis.shadow=new dojo.html.shadow(this.domNode);\n\t\t\t}\n\t\n\t\t\t\/\/ Prevent IE bleed-through problem\n\t\t\tthis.bgIframe = new dojo.html.BackgroundIframe(this.domNode);\n\t\n\t\t\tif( this.taskBarId ){\n\t\t\t\tthis.taskBarSetup();\n\t\t\t}\n\t\n\t\t\t\/\/ counteract body.appendChild above\n\t\t\tdojo.body().removeChild(this.domNode);","this":"null"}}},"null":{"_":{"meta":{"this_variables":["windowState","titleBarIcon.src","titleBar.style.display","titleBarIcon.style.display","minimizeAction.style.display","maximizeAction.style.display","restoreAction.style.display","closeAction.style.display","drag","resizeBar.style.display","resizeHandle","shadow","bgIframe","windowState","titleBarIcon.src","titleBar.style.display","titleBarIcon.style.display","minimizeAction.style.display","maximizeAction.style.display","restoreAction.style.display","closeAction.style.display","drag","resizeBar.style.display","resizeHandle","shadow","bgIframe","windowState","titleBarIcon.src","titleBar.style.display","titleBarIcon.style.display","minimizeAction.style.display","maximizeAction.style.display","restoreAction.style.display","closeAction.style.display","drag","resizeBar.style.display","resizeHandle","shadow","bgIframe","previous","parentPrevious","domNode.parentNode.style.overflow","domNode.style.top","maximizeAction.style.display","restoreAction.style.display","resizeHandle.domNode.style.display","windowState","previous","parentPrevious","domNode.parentNode.style.overflow","domNode.style.top","maximizeAction.style.display","restoreAction.style.display","resizeHandle.domNode.style.display","windowState","previous","parentPrevious","domNode.parentNode.style.overflow","domNode.style.top","maximizeAction.style.display","restoreAction.style.display","resizeHandle.domNode.style.display","windowState","previous","parentPrevious","domNode.parentNode.style.overflow","domNode.style.top","maximizeAction.style.display","restoreAction.style.display","resizeHandle.domNode.style.display","windowState","previous","parentPrevious","domNode.parentNode.style.overflow","domNode.style.top","maximizeAction.style.display","restoreAction.style.display","resizeHandle.domNode.style.display","windowState","previous","parentPrevious","domNode.parentNode.style.overflow","domNode.style.top","maximizeAction.style.display","restoreAction.style.display","resizeHandle.domNode.style.display","windowState","previous","parentPrevious","domNode.parentNode.style.overflow","domNode.style.top","maximizeAction.style.display","restoreAction.style.display","resizeHandle.domNode.style.display","windowState","lastWindowState","windowState","domNode.parentNode.style.overflow","windowState","previous","parentPrevious","restoreAction.style.display","maximizeAction.style.display","resizeHandle.domNode.style.display","windowState","width","windowState"]}}},"dojo.widget.FloatingPaneBase.source":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\t\tdojo.html.copyStyle(this.domNode, source);\n\t\n\t\t\t\/\/ necessary for safari, khtml (for computing width\/height)\n\t\t\tdojo.body().appendChild(this.domNode);\n\t\n\t\t\t\/\/ if display:none then state=minimized, otherwise state=normal\n\t\t\tif(!this.isShowing()){\n\t\t\t\tthis.windowState=\"minimized\";\n\t\t\t}\n\t\n\t\t\t\/\/ <img src=\"\"> can hang IE!  better get rid of it\n\t\t\tif(this.iconSrc==\"\"){\n\t\t\t\tdojo.html.removeNode(this.titleBarIcon);\n\t\t\t}else{\n\t\t\t\tthis.titleBarIcon.src = this.iconSrc.toString();\/\/ dojo.uri.Uri obj req. toString()\n\t\t\t}\n\t\n\t\t\tif(this.titleBarDisplay!=\"none\"){\t\n\t\t\t\tthis.titleBar.style.display=\"\";\n\t\t\t\tdojo.html.disableSelection(this.titleBar);\n\t\n\t\t\t\tthis.titleBarIcon.style.display = (this.iconSrc==\"\" ? \"none\" : \"\");\n\t\n\t\t\t\tthis.minimizeAction.style.display = (this.displayMinimizeAction ? \"\" : \"none\");\n\t\t\t\tthis.maximizeAction.style.display= \n\t\t\t\t\t(this.displayMaximizeAction && this.windowState!=\"maximized\" ? \"\" : \"none\");\n\t\t\t\tthis.restoreAction.style.display= \n\t\t\t\t\t(this.displayMaximizeAction && this.windowState==\"maximized\" ? \"\" : \"none\");\n\t\t\t\tthis.closeAction.style.display= (this.displayCloseAction ? \"\" : \"none\");\n\t\n\t\t\t\tthis.drag = new dojo.dnd.HtmlDragMoveSource(this.domNode);\t\n\t\t\t\tif (this.constrainToContainer) {\n\t\t\t\t\tthis.drag.constrainTo();\n\t\t\t\t}\n\t\t\t\tthis.drag.setDragHandle(this.titleBar);\n\t\n\t\t\t\tvar self = this;\n\t\n\t\t\t\tdojo.event.topic.subscribe(\"dragMove\",\n\t\t\t\t\tfunction (info){\n\t\t\t\t\t\tif (info.source.domNode == self.domNode){\n\t\t\t\t\t\t\tdojo.event.topic.publish('floatingPaneMove', { source: self } );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\n\t\t\tif(this.resizable){\n\t\t\t\tthis.resizeBar.style.display=\"\";\n\t\t\t\tthis.resizeHandle = dojo.widget.createWidget(\"ResizeHandle\", {targetElmId: this.widgetId, id:this.widgetId+\"_resize\"});\n\t\t\t\tthis.resizeBar.appendChild(this.resizeHandle.domNode);\n\t\t\t}\n\t\n\t\t\t\/\/ add a drop shadow\n\t\t\tif(this.hasShadow){\n\t\t\t\tthis.shadow=new dojo.html.shadow(this.domNode);\n\t\t\t}\n\t\n\t\t\t\/\/ Prevent IE bleed-through problem\n\t\t\tthis.bgIframe = new dojo.html.BackgroundIframe(this.domNode);\n\t\n\t\t\tif( this.taskBarId ){\n\t\t\t\tthis.taskBarSetup();\n\t\t\t}\n\t\n\t\t\t\/\/ counteract body.appendChild above\n\t\t\tdojo.body().removeChild(this.domNode);","this":"null"}}},"dojo.widget.FloatingPaneBase.targetElmId":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\t\tdojo.html.copyStyle(this.domNode, source);\n\t\n\t\t\t\/\/ necessary for safari, khtml (for computing width\/height)\n\t\t\tdojo.body().appendChild(this.domNode);\n\t\n\t\t\t\/\/ if display:none then state=minimized, otherwise state=normal\n\t\t\tif(!this.isShowing()){\n\t\t\t\tthis.windowState=\"minimized\";\n\t\t\t}\n\t\n\t\t\t\/\/ <img src=\"\"> can hang IE!  better get rid of it\n\t\t\tif(this.iconSrc==\"\"){\n\t\t\t\tdojo.html.removeNode(this.titleBarIcon);\n\t\t\t}else{\n\t\t\t\tthis.titleBarIcon.src = this.iconSrc.toString();\/\/ dojo.uri.Uri obj req. toString()\n\t\t\t}\n\t\n\t\t\tif(this.titleBarDisplay!=\"none\"){\t\n\t\t\t\tthis.titleBar.style.display=\"\";\n\t\t\t\tdojo.html.disableSelection(this.titleBar);\n\t\n\t\t\t\tthis.titleBarIcon.style.display = (this.iconSrc==\"\" ? \"none\" : \"\");\n\t\n\t\t\t\tthis.minimizeAction.style.display = (this.displayMinimizeAction ? \"\" : \"none\");\n\t\t\t\tthis.maximizeAction.style.display= \n\t\t\t\t\t(this.displayMaximizeAction && this.windowState!=\"maximized\" ? \"\" : \"none\");\n\t\t\t\tthis.restoreAction.style.display= \n\t\t\t\t\t(this.displayMaximizeAction && this.windowState==\"maximized\" ? \"\" : \"none\");\n\t\t\t\tthis.closeAction.style.display= (this.displayCloseAction ? \"\" : \"none\");\n\t\n\t\t\t\tthis.drag = new dojo.dnd.HtmlDragMoveSource(this.domNode);\t\n\t\t\t\tif (this.constrainToContainer) {\n\t\t\t\t\tthis.drag.constrainTo();\n\t\t\t\t}\n\t\t\t\tthis.drag.setDragHandle(this.titleBar);\n\t\n\t\t\t\tvar self = this;\n\t\n\t\t\t\tdojo.event.topic.subscribe(\"dragMove\",\n\t\t\t\t\tfunction (info){\n\t\t\t\t\t\tif (info.source.domNode == self.domNode){\n\t\t\t\t\t\t\tdojo.event.topic.publish('floatingPaneMove', { source: self } );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\n\t\t\tif(this.resizable){\n\t\t\t\tthis.resizeBar.style.display=\"\";\n\t\t\t\tthis.resizeHandle = dojo.widget.createWidget(\"ResizeHandle\", {targetElmId: this.widgetId, id:this.widgetId+\"_resize\"});\n\t\t\t\tthis.resizeBar.appendChild(this.resizeHandle.domNode);\n\t\t\t}\n\t\n\t\t\t\/\/ add a drop shadow\n\t\t\tif(this.hasShadow){\n\t\t\t\tthis.shadow=new dojo.html.shadow(this.domNode);\n\t\t\t}\n\t\n\t\t\t\/\/ Prevent IE bleed-through problem\n\t\t\tthis.bgIframe = new dojo.html.BackgroundIframe(this.domNode);\n\t\n\t\t\tif( this.taskBarId ){\n\t\t\t\tthis.taskBarSetup();\n\t\t\t}\n\t\n\t\t\t\/\/ counteract body.appendChild above\n\t\t\tdojo.body().removeChild(this.domNode);","this":"null"}}},"dojo.widget.FloatingPaneBase.postCreate":{"_":{"meta":{"summary":"","src":"\t\t\tif (dojo.hostenv.post_load_) {\n\t\t\t\tthis.setInitialWindowState();\n\t\t\t} else {\n\t\t\t\tdojo.addOnLoad(this, \"setInitialWindowState\");\n\t\t\t}","this":"null"}}},"dojo.widget.FloatingPaneBase.maximizeWindow":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar mb = dojo.html.getMarginBox(this.domNode);\n\t\t\tthis.previous={\n\t\t\t\twidth: mb.width || this.width,\n\t\t\t\theight: mb.height || this.height,\n\t\t\t\tleft: this.domNode.style.left,\n\t\t\t\ttop: this.domNode.style.top,\n\t\t\t\tbottom: this.domNode.style.bottom,\n\t\t\t\tright: this.domNode.style.right\n\t\t\t};\n\t\t\tif(this.domNode.parentNode.style.overflow.toLowerCase() != 'hidden'){\n\t\t\t\tthis.parentPrevious={\n\t\t\t\t\toverflow: this.domNode.parentNode.style.overflow\n\t\t\t\t};\n\t\t\t\tdojo.debug(this.domNode.parentNode.style.overflow);\n\t\t\t\tthis.domNode.parentNode.style.overflow = 'hidden';\n\t\t\t}\n\n\t\t\tthis.domNode.style.left =\n\t\t\t\tdojo.html.getPixelValue(this.domNode.parentNode, \"padding-left\", true) + \"px\";\n\t\t\tthis.domNode.style.top =\n\t\t\t\tdojo.html.getPixelValue(this.domNode.parentNode, \"padding-top\", true) + \"px\";\n\n\t\t\tif ((this.domNode.parentNode.nodeName.toLowerCase() == 'body')) {\n\t\t\t\tvar viewport = dojo.html.getViewport();\n\t\t\t\tvar padding = dojo.html.getPadding(dojo.body());\n\t\t\t\tthis.resizeTo(viewport.width-padding.width, viewport.height-padding.height);\n\t\t\t} else {\n\t\t\t\tvar content = dojo.html.getContentBox(this.domNode.parentNode);\n\t\t\t\tthis.resizeTo(content.width, content.height);\n\t\t\t}\n\t\t\tthis.maximizeAction.style.display=\"none\";\n\t\t\tthis.restoreAction.style.display=\"\";\n\n\t\t\t\/\/disable resize and drag\n\t\t\tif(this.resizeHandle){\n\t\t\t\tthis.resizeHandle.domNode.style.display=\"none\";\n\t\t\t}\n\t\t\tthis.drag.setDragHandle(null);\n\n\t\t\tthis.windowState=\"maximized\";","this":"null"}}},"dojo.widget.FloatingPaneBase.width":{"_":{"meta":{"summary":"","parameters":{"w":{"type":""},"h":{"type":""}},"src":"\t\t\tdojo.html.setMarginBox(this.domNode, { width: w, height: h });\n\t\n\t\t\tdojo.widget.html.layout(this.domNode,\n\t\t\t\t[\n\t\t\t\t  {domNode: this.titleBar, layoutAlign: \"top\"},\n\t\t\t\t  {domNode: this.resizeBar, layoutAlign: \"bottom\"},\n\t\t\t\t  {domNode: this.containerNode, layoutAlign: \"client\"}\n\t\t\t\t] );\n\t\n\t\t\t\/\/ If any of the children have layoutAlign specified, obey it\n\t\t\tdojo.widget.html.layout(this.containerNode, this.children, \"top-bottom\");\n\t\t\t\n\t\t\tthis.bgIframe.onResized();\n\t\t\tif(this.shadow){ this.shadow.size(w, h); }\n\t\t\tthis.onResized();","this":"null"}}},"dojo.widget.FloatingPaneBase.height":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar mb = dojo.html.getMarginBox(this.domNode);\n\t\t\tthis.previous={\n\t\t\t\twidth: mb.width || this.width,\n\t\t\t\theight: mb.height || this.height,\n\t\t\t\tleft: this.domNode.style.left,\n\t\t\t\ttop: this.domNode.style.top,\n\t\t\t\tbottom: this.domNode.style.bottom,\n\t\t\t\tright: this.domNode.style.right\n\t\t\t};\n\t\t\tif(this.domNode.parentNode.style.overflow.toLowerCase() != 'hidden'){\n\t\t\t\tthis.parentPrevious={\n\t\t\t\t\toverflow: this.domNode.parentNode.style.overflow\n\t\t\t\t};\n\t\t\t\tdojo.debug(this.domNode.parentNode.style.overflow);\n\t\t\t\tthis.domNode.parentNode.style.overflow = 'hidden';\n\t\t\t}\n\n\t\t\tthis.domNode.style.left =\n\t\t\t\tdojo.html.getPixelValue(this.domNode.parentNode, \"padding-left\", true) + \"px\";\n\t\t\tthis.domNode.style.top =\n\t\t\t\tdojo.html.getPixelValue(this.domNode.parentNode, \"padding-top\", true) + \"px\";\n\n\t\t\tif ((this.domNode.parentNode.nodeName.toLowerCase() == 'body')) {\n\t\t\t\tvar viewport = dojo.html.getViewport();\n\t\t\t\tvar padding = dojo.html.getPadding(dojo.body());\n\t\t\t\tthis.resizeTo(viewport.width-padding.width, viewport.height-padding.height);\n\t\t\t} else {\n\t\t\t\tvar content = dojo.html.getContentBox(this.domNode.parentNode);\n\t\t\t\tthis.resizeTo(content.width, content.height);\n\t\t\t}\n\t\t\tthis.maximizeAction.style.display=\"none\";\n\t\t\tthis.restoreAction.style.display=\"\";\n\n\t\t\t\/\/disable resize and drag\n\t\t\tif(this.resizeHandle){\n\t\t\t\tthis.resizeHandle.domNode.style.display=\"none\";\n\t\t\t}\n\t\t\tthis.drag.setDragHandle(null);\n\n\t\t\tthis.windowState=\"maximized\";","this":"null"}}},"dojo.widget.FloatingPaneBase.left":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar mb = dojo.html.getMarginBox(this.domNode);\n\t\t\tthis.previous={\n\t\t\t\twidth: mb.width || this.width,\n\t\t\t\theight: mb.height || this.height,\n\t\t\t\tleft: this.domNode.style.left,\n\t\t\t\ttop: this.domNode.style.top,\n\t\t\t\tbottom: this.domNode.style.bottom,\n\t\t\t\tright: this.domNode.style.right\n\t\t\t};\n\t\t\tif(this.domNode.parentNode.style.overflow.toLowerCase() != 'hidden'){\n\t\t\t\tthis.parentPrevious={\n\t\t\t\t\toverflow: this.domNode.parentNode.style.overflow\n\t\t\t\t};\n\t\t\t\tdojo.debug(this.domNode.parentNode.style.overflow);\n\t\t\t\tthis.domNode.parentNode.style.overflow = 'hidden';\n\t\t\t}\n\n\t\t\tthis.domNode.style.left =\n\t\t\t\tdojo.html.getPixelValue(this.domNode.parentNode, \"padding-left\", true) + \"px\";\n\t\t\tthis.domNode.style.top =\n\t\t\t\tdojo.html.getPixelValue(this.domNode.parentNode, \"padding-top\", true) + \"px\";\n\n\t\t\tif ((this.domNode.parentNode.nodeName.toLowerCase() == 'body')) {\n\t\t\t\tvar viewport = dojo.html.getViewport();\n\t\t\t\tvar padding = dojo.html.getPadding(dojo.body());\n\t\t\t\tthis.resizeTo(viewport.width-padding.width, viewport.height-padding.height);\n\t\t\t} else {\n\t\t\t\tvar content = dojo.html.getContentBox(this.domNode.parentNode);\n\t\t\t\tthis.resizeTo(content.width, content.height);\n\t\t\t}\n\t\t\tthis.maximizeAction.style.display=\"none\";\n\t\t\tthis.restoreAction.style.display=\"\";\n\n\t\t\t\/\/disable resize and drag\n\t\t\tif(this.resizeHandle){\n\t\t\t\tthis.resizeHandle.domNode.style.display=\"none\";\n\t\t\t}\n\t\t\tthis.drag.setDragHandle(null);\n\n\t\t\tthis.windowState=\"maximized\";","this":"null"}}},"dojo.widget.FloatingPaneBase.top":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar mb = dojo.html.getMarginBox(this.domNode);\n\t\t\tthis.previous={\n\t\t\t\twidth: mb.width || this.width,\n\t\t\t\theight: mb.height || this.height,\n\t\t\t\tleft: this.domNode.style.left,\n\t\t\t\ttop: this.domNode.style.top,\n\t\t\t\tbottom: this.domNode.style.bottom,\n\t\t\t\tright: this.domNode.style.right\n\t\t\t};\n\t\t\tif(this.domNode.parentNode.style.overflow.toLowerCase() != 'hidden'){\n\t\t\t\tthis.parentPrevious={\n\t\t\t\t\toverflow: this.domNode.parentNode.style.overflow\n\t\t\t\t};\n\t\t\t\tdojo.debug(this.domNode.parentNode.style.overflow);\n\t\t\t\tthis.domNode.parentNode.style.overflow = 'hidden';\n\t\t\t}\n\n\t\t\tthis.domNode.style.left =\n\t\t\t\tdojo.html.getPixelValue(this.domNode.parentNode, \"padding-left\", true) + \"px\";\n\t\t\tthis.domNode.style.top =\n\t\t\t\tdojo.html.getPixelValue(this.domNode.parentNode, \"padding-top\", true) + \"px\";\n\n\t\t\tif ((this.domNode.parentNode.nodeName.toLowerCase() == 'body')) {\n\t\t\t\tvar viewport = dojo.html.getViewport();\n\t\t\t\tvar padding = dojo.html.getPadding(dojo.body());\n\t\t\t\tthis.resizeTo(viewport.width-padding.width, viewport.height-padding.height);\n\t\t\t} else {\n\t\t\t\tvar content = dojo.html.getContentBox(this.domNode.parentNode);\n\t\t\t\tthis.resizeTo(content.width, content.height);\n\t\t\t}\n\t\t\tthis.maximizeAction.style.display=\"none\";\n\t\t\tthis.restoreAction.style.display=\"\";\n\n\t\t\t\/\/disable resize and drag\n\t\t\tif(this.resizeHandle){\n\t\t\t\tthis.resizeHandle.domNode.style.display=\"none\";\n\t\t\t}\n\t\t\tthis.drag.setDragHandle(null);\n\n\t\t\tthis.windowState=\"maximized\";","this":"null"}}},"dojo.widget.FloatingPaneBase.bottom":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar mb = dojo.html.getMarginBox(this.domNode);\n\t\t\tthis.previous={\n\t\t\t\twidth: mb.width || this.width,\n\t\t\t\theight: mb.height || this.height,\n\t\t\t\tleft: this.domNode.style.left,\n\t\t\t\ttop: this.domNode.style.top,\n\t\t\t\tbottom: this.domNode.style.bottom,\n\t\t\t\tright: this.domNode.style.right\n\t\t\t};\n\t\t\tif(this.domNode.parentNode.style.overflow.toLowerCase() != 'hidden'){\n\t\t\t\tthis.parentPrevious={\n\t\t\t\t\toverflow: this.domNode.parentNode.style.overflow\n\t\t\t\t};\n\t\t\t\tdojo.debug(this.domNode.parentNode.style.overflow);\n\t\t\t\tthis.domNode.parentNode.style.overflow = 'hidden';\n\t\t\t}\n\n\t\t\tthis.domNode.style.left =\n\t\t\t\tdojo.html.getPixelValue(this.domNode.parentNode, \"padding-left\", true) + \"px\";\n\t\t\tthis.domNode.style.top =\n\t\t\t\tdojo.html.getPixelValue(this.domNode.parentNode, \"padding-top\", true) + \"px\";\n\n\t\t\tif ((this.domNode.parentNode.nodeName.toLowerCase() == 'body')) {\n\t\t\t\tvar viewport = dojo.html.getViewport();\n\t\t\t\tvar padding = dojo.html.getPadding(dojo.body());\n\t\t\t\tthis.resizeTo(viewport.width-padding.width, viewport.height-padding.height);\n\t\t\t} else {\n\t\t\t\tvar content = dojo.html.getContentBox(this.domNode.parentNode);\n\t\t\t\tthis.resizeTo(content.width, content.height);\n\t\t\t}\n\t\t\tthis.maximizeAction.style.display=\"none\";\n\t\t\tthis.restoreAction.style.display=\"\";\n\n\t\t\t\/\/disable resize and drag\n\t\t\tif(this.resizeHandle){\n\t\t\t\tthis.resizeHandle.domNode.style.display=\"none\";\n\t\t\t}\n\t\t\tthis.drag.setDragHandle(null);\n\n\t\t\tthis.windowState=\"maximized\";","this":"null"}}},"dojo.widget.FloatingPaneBase.right":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar mb = dojo.html.getMarginBox(this.domNode);\n\t\t\tthis.previous={\n\t\t\t\twidth: mb.width || this.width,\n\t\t\t\theight: mb.height || this.height,\n\t\t\t\tleft: this.domNode.style.left,\n\t\t\t\ttop: this.domNode.style.top,\n\t\t\t\tbottom: this.domNode.style.bottom,\n\t\t\t\tright: this.domNode.style.right\n\t\t\t};\n\t\t\tif(this.domNode.parentNode.style.overflow.toLowerCase() != 'hidden'){\n\t\t\t\tthis.parentPrevious={\n\t\t\t\t\toverflow: this.domNode.parentNode.style.overflow\n\t\t\t\t};\n\t\t\t\tdojo.debug(this.domNode.parentNode.style.overflow);\n\t\t\t\tthis.domNode.parentNode.style.overflow = 'hidden';\n\t\t\t}\n\n\t\t\tthis.domNode.style.left =\n\t\t\t\tdojo.html.getPixelValue(this.domNode.parentNode, \"padding-left\", true) + \"px\";\n\t\t\tthis.domNode.style.top =\n\t\t\t\tdojo.html.getPixelValue(this.domNode.parentNode, \"padding-top\", true) + \"px\";\n\n\t\t\tif ((this.domNode.parentNode.nodeName.toLowerCase() == 'body')) {\n\t\t\t\tvar viewport = dojo.html.getViewport();\n\t\t\t\tvar padding = dojo.html.getPadding(dojo.body());\n\t\t\t\tthis.resizeTo(viewport.width-padding.width, viewport.height-padding.height);\n\t\t\t} else {\n\t\t\t\tvar content = dojo.html.getContentBox(this.domNode.parentNode);\n\t\t\t\tthis.resizeTo(content.width, content.height);\n\t\t\t}\n\t\t\tthis.maximizeAction.style.display=\"none\";\n\t\t\tthis.restoreAction.style.display=\"\";\n\n\t\t\t\/\/disable resize and drag\n\t\t\tif(this.resizeHandle){\n\t\t\t\tthis.resizeHandle.domNode.style.display=\"none\";\n\t\t\t}\n\t\t\tthis.drag.setDragHandle(null);\n\n\t\t\tthis.windowState=\"maximized\";","this":"null"}}},"dojo.widget.FloatingPaneBase.overflow":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar mb = dojo.html.getMarginBox(this.domNode);\n\t\t\tthis.previous={\n\t\t\t\twidth: mb.width || this.width,\n\t\t\t\theight: mb.height || this.height,\n\t\t\t\tleft: this.domNode.style.left,\n\t\t\t\ttop: this.domNode.style.top,\n\t\t\t\tbottom: this.domNode.style.bottom,\n\t\t\t\tright: this.domNode.style.right\n\t\t\t};\n\t\t\tif(this.domNode.parentNode.style.overflow.toLowerCase() != 'hidden'){\n\t\t\t\tthis.parentPrevious={\n\t\t\t\t\toverflow: this.domNode.parentNode.style.overflow\n\t\t\t\t};\n\t\t\t\tdojo.debug(this.domNode.parentNode.style.overflow);\n\t\t\t\tthis.domNode.parentNode.style.overflow = 'hidden';\n\t\t\t}\n\n\t\t\tthis.domNode.style.left =\n\t\t\t\tdojo.html.getPixelValue(this.domNode.parentNode, \"padding-left\", true) + \"px\";\n\t\t\tthis.domNode.style.top =\n\t\t\t\tdojo.html.getPixelValue(this.domNode.parentNode, \"padding-top\", true) + \"px\";\n\n\t\t\tif ((this.domNode.parentNode.nodeName.toLowerCase() == 'body')) {\n\t\t\t\tvar viewport = dojo.html.getViewport();\n\t\t\t\tvar padding = dojo.html.getPadding(dojo.body());\n\t\t\t\tthis.resizeTo(viewport.width-padding.width, viewport.height-padding.height);\n\t\t\t} else {\n\t\t\t\tvar content = dojo.html.getContentBox(this.domNode.parentNode);\n\t\t\t\tthis.resizeTo(content.width, content.height);\n\t\t\t}\n\t\t\tthis.maximizeAction.style.display=\"none\";\n\t\t\tthis.restoreAction.style.display=\"\";\n\n\t\t\t\/\/disable resize and drag\n\t\t\tif(this.resizeHandle){\n\t\t\t\tthis.resizeHandle.domNode.style.display=\"none\";\n\t\t\t}\n\t\t\tthis.drag.setDragHandle(null);\n\n\t\t\tthis.windowState=\"maximized\";","this":"null"}}},"dojo.widget.FloatingPaneBase.minimizeWindow":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tthis.hide();\n\t\t\tfor(var attr in this.parentPrevious){\n\t\t\t\tthis.domNode.parentNode.style[attr] = this.parentPrevious[attr];\n\t\t\t}\n\t\t\tthis.lastWindowState = this.windowState;\n\t\t\tthis.windowState = \"minimized\";","this":"null"}}},"dojo.widget.FloatingPaneBase.restoreWindow":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif (this.windowState==\"minimized\") {\n\t\t\t\tthis.show();\n\t\t\t\tif(this.lastWindowState == \"maximized\"){\n\t\t\t\t\tthis.domNode.parentNode.style.overflow = 'hidden';\n\t\t\t\t\tthis.windowState=\"maximized\";\n\t\t\t\t}else{ \/\/normal\n\t\t\t\t\tthis.windowState=\"normal\";\n\t\t\t\t}\n\t\t\t} else if (this.windowState==\"maximized\"){\n\t\t\t\tfor(var attr in this.previous){\n\t\t\t\t\tthis.domNode.style[attr] = this.previous[attr];\n\t\t\t\t}\n\t\t\t\tfor(var attr in this.parentPrevious){\n\t\t\t\t\tthis.domNode.parentNode.style[attr] = this.parentPrevious[attr];\n\t\t\t\t}\n\t\t\t\tthis.resizeTo(this.previous.width, this.previous.height);\n\t\t\t\tthis.previous=null;\n\t\t\t\tthis.parentPrevious=null;\n\n\t\t\t\tthis.restoreAction.style.display=\"none\";\n\t\t\t\tthis.maximizeAction.style.display=this.displayMaximizeAction ? \"\" : \"none\";\n\n\t\t\t\tif(this.resizeHandle){\n\t\t\t\t\tthis.resizeHandle.domNode.style.display=\"\";\n\t\t\t\t}\n\t\t\t\tthis.drag.setDragHandle(this.titleBar);\n\t\t\t\tthis.windowState=\"normal\";\n\t\t\t} else { \/\/normal\n\t\t\t\t\/\/ do nothing\n\t\t\t}","this":"null"}}},"dojo.widget.FloatingPaneBase.toggleDisplay":{"_":{"meta":{"summary":"","src":"\t\t\tif(this.windowState==\"minimized\"){\n\t\t\t\tthis.restoreWindow();\n\t\t\t}else{\n\t\t\t\tthis.minimizeWindow();\n\t\t\t}","this":"null"}}},"dojo.widget.FloatingPaneBase.closeWindow":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tdojo.html.removeNode(this.domNode);\n\t\t\tthis.destroy();","this":"null"}}},"dojo.widget.FloatingPaneBase.onMouseDown":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tthis.bringToTop();","this":"null"}}},"dojo.widget.FloatingPaneBase.bringToTop":{"_":{"meta":{"summary":"","src":"\t\t\tvar floatingPanes= dojo.widget.manager.getWidgetsByType(this.widgetType);\n\t\t\tvar windows = [];\n\t\t\tfor (var x=0; x<floatingPanes.length; x++) {\n\t\t\t\tif (this.widgetId != floatingPanes[x].widgetId) {\n\t\t\t\t\t\twindows.push(floatingPanes[x]);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\twindows.sort(function(a,b) {\n\t\t\t\treturn a.domNode.style.zIndex - b.domNode.style.zIndex;\n\t\t\t});\n\t\t\t\n\t\t\twindows.push(this);\n\t\n\t\t\tvar floatingPaneStartingZ = 100;\n\t\t\tfor (x=0; x<windows.length;x++) {\n\t\t\t\twindows[x].domNode.style.zIndex = floatingPaneStartingZ + x*2;\n\t\t\t}","this":"null"}}},"dojo.widget.FloatingPaneBase.setInitialWindowState":{"_":{"meta":{"summary":"","src":"\t\t\tif(this.isShowing()){\n\t\t\t\tthis.width=-1;\t\/\/ force resize\n\t\t\t\tvar mb = dojo.html.getMarginBox(this.domNode);\n\t\t\t\tthis.resizeTo(mb.width, mb.height);\n\t\t\t}\n\t\t\tif (this.windowState == \"maximized\") {\n\t\t\t\tthis.maximizeWindow();\n\t\t\t\tthis.show();\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\tif (this.windowState==\"normal\") {\n\t\t\t\tthis.show();\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\tif (this.windowState==\"minimized\") {\n\t\t\t\tthis.hide();\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\tthis.windowState=\"minimized\";","this":"null"}}},"dojo.widget.FloatingPaneBase.taskBarSetup":{"_":{"meta":{"summary":"","src":"\t\t\tvar taskbar = dojo.widget.getWidgetById(this.taskBarId);\n\t\t\tif (!taskbar){\n\t\t\t\tif (this.taskBarConnectAttempts <  this.maxTaskBarConnectAttempts) {\n\t\t\t\t\tdojo.lang.setTimeout(this, this.taskBarSetup, 50);\n\t\t\t\t\tthis.taskBarConnectAttempts++;\n\t\t\t\t} else {\n\t\t\t\t\tdojo.debug(\"Unable to connect to the taskBar\");\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttaskbar.addChild(this);","this":"null"}}},"dojo.widget.FloatingPaneBase.showFloatingPane":{"_":{"meta":{"summary":"","src":"\t\t\tthis.bringToTop();","this":"null"}}},"dojo.widget.FloatingPaneBase.onFloatingPaneShow":{"_":{"meta":{"summary":"","src":"\t\t\tvar mb = dojo.html.getMarginBox(this.domNode);\n\t\t\tthis.resizeTo(mb.width, mb.height);","this":"null"}}},"dojo.widget.FloatingPaneBase.resizeTo":{"_":{"meta":{"summary":"","parameters":{"w":{"type":""},"h":{"type":""}},"src":"\t\t\tdojo.html.setMarginBox(this.domNode, { width: w, height: h });\n\t\n\t\t\tdojo.widget.html.layout(this.domNode,\n\t\t\t\t[\n\t\t\t\t  {domNode: this.titleBar, layoutAlign: \"top\"},\n\t\t\t\t  {domNode: this.resizeBar, layoutAlign: \"bottom\"},\n\t\t\t\t  {domNode: this.containerNode, layoutAlign: \"client\"}\n\t\t\t\t] );\n\t\n\t\t\t\/\/ If any of the children have layoutAlign specified, obey it\n\t\t\tdojo.widget.html.layout(this.containerNode, this.children, \"top-bottom\");\n\t\t\t\n\t\t\tthis.bgIframe.onResized();\n\t\t\tif(this.shadow){ this.shadow.size(w, h); }\n\t\t\tthis.onResized();","this":"null"}}},"dojo.widget.FloatingPaneBase.domNode":{"_":{"meta":{"summary":"","parameters":{"w":{"type":""},"h":{"type":""}},"src":"\t\t\tdojo.html.setMarginBox(this.domNode, { width: w, height: h });\n\t\n\t\t\tdojo.widget.html.layout(this.domNode,\n\t\t\t\t[\n\t\t\t\t  {domNode: this.titleBar, layoutAlign: \"top\"},\n\t\t\t\t  {domNode: this.resizeBar, layoutAlign: \"bottom\"},\n\t\t\t\t  {domNode: this.containerNode, layoutAlign: \"client\"}\n\t\t\t\t] );\n\t\n\t\t\t\/\/ If any of the children have layoutAlign specified, obey it\n\t\t\tdojo.widget.html.layout(this.containerNode, this.children, \"top-bottom\");\n\t\t\t\n\t\t\tthis.bgIframe.onResized();\n\t\t\tif(this.shadow){ this.shadow.size(w, h); }\n\t\t\tthis.onResized();","this":"null"}}},"dojo.widget.FloatingPaneBase.checkSize":{"_":{"meta":{"summary":"","src":"\t\t\t\/\/ checkSize() is called when the user has resized the browser window,\n\t\t\t\/\/ but that doesn't affect this widget (or this widget's children)\n\t\t\t\/\/ so it can be safely ignored...\n\t\t\t\/\/ TODO: unless we are maximized.  then we should resize ourself.","this":"null"}}},"dojo.widget.FloatingPane":{"_":{"meta":{"summary":"","inherits":["[dojo.widget.ContentPane, dojo.widget.FloatingPaneBase]"],"this_inherits":["[dojo.widget.ContentPane, dojo.widget.FloatingPaneBase]"]}}},"dojo.widget.FloatingPane.fillInTemplate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tthis.fillInFloatingPaneTemplate(args, frag);\n\t\tdojo.widget.FloatingPane.superclass.fillInTemplate.call(this, args, frag);\n\t},\n\tpostCreate: function(){\n\t\tdojo.widget.FloatingPaneBase.prototype.postCreate.apply(this, arguments);\n\t\tdojo.widget.FloatingPane.superclass.postCreate.apply(this, arguments);\n\t},\n\tshow: function(){\n\t\tdojo.widget.FloatingPane.superclass.show.apply(this, arguments);\n\t\tthis.showFloatingPane();\n\t},\n\tonShow: function(){\n\t\tdojo.widget.FloatingPane.superclass.onShow.call(this);\n\t\tthis.onFloatingPaneShow();","this_inherits":["dojo.widget.FloatingPane.superclass.fillInTemplate"],"this":"[dojo.widget.ContentPane, dojo.widget.FloatingPaneBase]"}}},"dojo.widget.FloatingPane.postCreate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tthis.fillInFloatingPaneTemplate(args, frag);\n\t\tdojo.widget.FloatingPane.superclass.fillInTemplate.call(this, args, frag);\n\t},\n\tpostCreate: function(){\n\t\tdojo.widget.FloatingPaneBase.prototype.postCreate.apply(this, arguments);\n\t\tdojo.widget.FloatingPane.superclass.postCreate.apply(this, arguments);\n\t},\n\tshow: function(){\n\t\tdojo.widget.FloatingPane.superclass.show.apply(this, arguments);\n\t\tthis.showFloatingPane();\n\t},\n\tonShow: function(){\n\t\tdojo.widget.FloatingPane.superclass.onShow.call(this);\n\t\tthis.onFloatingPaneShow();","this_inherits":["dojo.widget.FloatingPane.superclass.fillInTemplate"],"this":"[dojo.widget.ContentPane, dojo.widget.FloatingPaneBase]"}}},"dojo.widget.FloatingPane.show":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tthis.fillInFloatingPaneTemplate(args, frag);\n\t\tdojo.widget.FloatingPane.superclass.fillInTemplate.call(this, args, frag);\n\t},\n\tpostCreate: function(){\n\t\tdojo.widget.FloatingPaneBase.prototype.postCreate.apply(this, arguments);\n\t\tdojo.widget.FloatingPane.superclass.postCreate.apply(this, arguments);\n\t},\n\tshow: function(){\n\t\tdojo.widget.FloatingPane.superclass.show.apply(this, arguments);\n\t\tthis.showFloatingPane();\n\t},\n\tonShow: function(){\n\t\tdojo.widget.FloatingPane.superclass.onShow.call(this);\n\t\tthis.onFloatingPaneShow();","this_inherits":["dojo.widget.FloatingPane.superclass.fillInTemplate"],"this":"[dojo.widget.ContentPane, dojo.widget.FloatingPaneBase]"}}},"dojo.widget.FloatingPane.onShow":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tthis.fillInFloatingPaneTemplate(args, frag);\n\t\tdojo.widget.FloatingPane.superclass.fillInTemplate.call(this, args, frag);\n\t},\n\tpostCreate: function(){\n\t\tdojo.widget.FloatingPaneBase.prototype.postCreate.apply(this, arguments);\n\t\tdojo.widget.FloatingPane.superclass.postCreate.apply(this, arguments);\n\t},\n\tshow: function(){\n\t\tdojo.widget.FloatingPane.superclass.show.apply(this, arguments);\n\t\tthis.showFloatingPane();\n\t},\n\tonShow: function(){\n\t\tdojo.widget.FloatingPane.superclass.onShow.call(this);\n\t\tthis.onFloatingPaneShow();","this_inherits":["dojo.widget.FloatingPane.superclass.fillInTemplate"],"this":"[dojo.widget.ContentPane, dojo.widget.FloatingPaneBase]"}}},"dojo.widget.ModalFloatingPane":{"_":{"meta":{"summary":"","inherits":["[dojo.widget.FloatingPane, dojo.widget.ModalDialogBase]"],"this_inherits":["[dojo.widget.FloatingPane, dojo.widget.ModalDialogBase]"],"protovariables":{"windowState":"","displayCloseAction":""}}}},"dojo.widget.ModalFloatingPane.postCreate":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.widget.ModalDialogBase.prototype.postCreate.call(this);\n\t\t\tdojo.widget.ModalFloatingPane.superclass.postCreate.call(this);","this":"[dojo.widget.FloatingPane, dojo.widget.ModalDialogBase]"}}},"dojo.widget.ModalFloatingPane.show":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.widget.ModalFloatingPane.superclass.show.apply(this, arguments);\n\t\t\tthis.showModalDialog();\n\t\t\tthis.placeModalDialog();\n\t\t\t\/\/place the background div under this modal pane\n\t\t\tthis.shared.bg.style.zIndex = this.domNode.style.zIndex-1;","this":"[dojo.widget.FloatingPane, dojo.widget.ModalDialogBase]"}}},"[dojo.widget.FloatingPane, dojo.widget.ModalDialogBase]":{"_":{"meta":{"this_variables":["shared.bg.style.zIndex"]}}},"dojo.widget.ModalFloatingPane.hide":{"_":{"meta":{"summary":"","src":"\t\t\tthis.hideModalDialog();\n\t\t\tdojo.widget.ModalFloatingPane.superclass.hide.apply(this, arguments);","this":"[dojo.widget.FloatingPane, dojo.widget.ModalDialogBase]"}}},"dojo.widget.ModalFloatingPane.closeWindow":{"_":{"meta":{"summary":"","src":"\t\t\tthis.hide();\n\t\t\tdojo.widget.ModalFloatingPane.superclass.closeWindow.apply(this, arguments);","this":"[dojo.widget.FloatingPane, dojo.widget.ModalDialogBase]"}}}}}},"dojo.widget.GoogleMap":{"meta":{"requires":{"common":["dojo.event.*","dojo.math","dojo.widget.*","dojo.uri.Uri","dojo.widget.HtmlWidget"]},"methods":{"dojo.widget.GoogleMap":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}}}}},"dojo.widget.HslColorPicker":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.HtmlWidget","dojo.widget.HslColorPicker","dojo.math","dojo.svg","dojo.gfx.color","dojo.gfx.color.hsl"]},"methods":{"dojo.widget.svg.HslColorPicker":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}}}}},"dojo.widget.HtmlWidget":{"meta":{"requires":{"common":["dojo.widget.DomWidget","dojo.html.util","dojo.html.display","dojo.html.layout","dojo.lang.extras","dojo.lang.func","dojo.lfx.toggle"]},"methods":{"dojo.widget.HtmlWidget":{"_":{"meta":{"summary":"","inherits":["dojo.widget.DomWidget"],"this_inherits":["dojo.widget.DomWidget"],"protovariables":{"widgetType":"","templateCssPath":"","templatePath":"","lang":"","toggle":"","toggleDuration":"","animationInProgress":""}}}},"dojo.widget.HtmlWidget.initialize":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"","this":"dojo.widget.DomWidget"}}},"dojo.widget.HtmlWidget.postMixInProperties":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tif(this.lang === \"\"){this.lang = null;}\n\t\t\/\/ now that we know the setting for toggle, get toggle object\n\t\t\/\/ (default to plain toggler if user specified toggler not present)\n\t\tthis.toggleObj =\n\t\t\tdojo.lfx.toggle[this.toggle.toLowerCase()] || dojo.lfx.toggle.plain;","this":"dojo.widget.DomWidget"}}},"dojo.widget.DomWidget":{"_":{"meta":{"this_variables":["toggleObj","animationInProgress","isHidden","animationInProgress","animationInProgress","isHidden","animationInProgress","width","height"]}}},"dojo.widget.HtmlWidget.getContainerHeight":{"_":{"meta":{"summary":"","src":"","this":"dojo.widget.DomWidget"}}},"dojo.widget.HtmlWidget.getContainerWidth":{"_":{"meta":{"summary":"","src":"\t\treturn this.parent.domNode.offsetWidth;","this":"dojo.widget.DomWidget"}}},"dojo.widget.HtmlWidget.setNativeHeight":{"_":{"meta":{"summary":"","parameters":{"height":{"type":""}},"src":"\t\tvar ch = this.getContainerHeight();","this":"dojo.widget.DomWidget"}}},"dojo.widget.HtmlWidget.createNodesFromText":{"_":{"meta":{"summary":"","parameters":{"txt":{"type":""},"wrap":{"type":""}},"src":"\t\treturn dojo.html.createNodesFromText(txt, wrap);","this":"dojo.widget.DomWidget"}}},"dojo.widget.HtmlWidget.destroyRendering":{"_":{"meta":{"summary":"","parameters":{"finalize":{"type":""}},"src":"\t\ttry{\n\t\t\tif(!finalize && this.domNode){\n\t\t\t\tdojo.event.browser.clean(this.domNode);\n\t\t\t}\n\t\t\tthis.domNode.parentNode.removeChild(this.domNode);\n\t\t\tdelete this.domNode;\n\t\t}catch(e){ \/* squelch! *\/ }","this":"dojo.widget.DomWidget"}}},"dojo.widget.HtmlWidget.isShowing":{"_":{"meta":{"summary":"","src":"\t\treturn dojo.html.isShowing(this.domNode);","this":"dojo.widget.DomWidget"}}},"dojo.widget.HtmlWidget.toggleShowing":{"_":{"meta":{"summary":"","src":"\t\t\tthis.show();\n\t\t}else{\n\t\t\tthis.hide();\n\t\t}","this":"dojo.widget.DomWidget"}}},"dojo.widget.HtmlWidget.show":{"_":{"meta":{"summary":"","src":"\t\tthis.animationInProgress=true;\n\t\tthis.isHidden = false;\n\t\tthis.toggleObj.show(this.domNode, this.toggleDuration, null,\n\t\t\tdojo.lang.hitch(this, this.onShow), this.explodeSrc);","this":"dojo.widget.DomWidget"}}},"dojo.widget.HtmlWidget.onShow":{"_":{"meta":{"summary":"","src":"\t\tthis.animationInProgress=false;\n\t\tthis.checkSize();","this":"dojo.widget.DomWidget"}}},"dojo.widget.HtmlWidget.hide":{"_":{"meta":{"summary":"","src":"\t\tthis.animationInProgress = true;\n\t\tthis.isHidden = true;\n\t\tthis.toggleObj.hide(this.domNode, this.toggleDuration, null,\n\t\t\tdojo.lang.hitch(this, this.onHide), this.explodeSrc);","this":"dojo.widget.DomWidget"}}},"dojo.widget.HtmlWidget.onHide":{"_":{"meta":{"summary":"","src":"\t\tthis.animationInProgress=false;","this":"dojo.widget.DomWidget"}}},"dojo.widget.HtmlWidget._isResized":{"_":{"meta":{"summary":"","parameters":{"w":{"type":""},"h":{"type":""}},"src":"\t\t\/\/ If my parent has been resized and I have style=\"height: 100%\"\n\t\t\/\/ or something similar then my size has changed too.\n\t\tvar wh = dojo.html.getMarginBox(this.domNode);\n\t\tvar width=w||wh.width;\n\t\tvar height=h||wh.height;\n\t\tif(this.width == width && this.height == height){ return false; }\n\n\t\tthis.width=width;\n\t\tthis.height=height;\n\t\treturn true;","this":"dojo.widget.DomWidget"}}},"dojo.widget.HtmlWidget.checkSize":{"_":{"meta":{"summary":"","src":"\t\tif(!this._isResized()){ return; }\n\t\tthis.onResized();","this":"dojo.widget.DomWidget"}}},"dojo.widget.HtmlWidget.resizeTo":{"_":{"meta":{"summary":"","parameters":{"w":{"type":""},"h":{"type":""}},"src":"\t\tif(!this._isResized(w,h)){ return; }\n\t\tdojo.html.setMarginBox(this.domNode, { width: w, height: h });\n\t\tthis.onResized();","this":"dojo.widget.DomWidget"}}},"dojo.widget.HtmlWidget.width":{"_":{"meta":{"summary":"","parameters":{"w":{"type":""},"h":{"type":""}},"src":"\t\tif(!this._isResized(w,h)){ return; }\n\t\tdojo.html.setMarginBox(this.domNode, { width: w, height: h });\n\t\tthis.onResized();","this":"dojo.widget.DomWidget"}}},"dojo.widget.HtmlWidget.resizeSoon":{"_":{"meta":{"summary":"","src":"\t\tif(this.isShowing()){\n\t\t\tdojo.lang.setTimeout(this, this.onResized, 0);\n\t\t}","this":"dojo.widget.DomWidget"}}},"dojo.widget.HtmlWidget.onResized":{"_":{"meta":{"summary":"","src":"\t\tdojo.lang.forEach(this.children, function(child){ if(child.checkSize){child.checkSize();} });","this":"dojo.widget.DomWidget"}}}}}},"dojo.widget.InlineEditBox":{"meta":{"requires":{"common":["dojo.widget.*","dojo.event.*","dojo.lfx.*","dojo.gfx.color","dojo.string","dojo.html.*","dojo.html.layout"]},"methods":{"dojo.widget.InlineEditBox":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}}}}},"dojo.widget.LayoutContainer":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.html.layout"]},"methods":{"dojo.widget.LayoutContainer":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}},"dojo.widget.Widget":{"_":{"meta":{"protovariables":{"layoutAlign":""}}}}}}},"dojo.widget.LinkPane":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.ContentPane","dojo.html.style"]},"methods":{"dojo.widget.LinkPane":{"_":{"meta":{"summary":"","inherits":["dojo.widget.ContentPane"],"this_inherits":["dojo.widget.ContentPane"]}}}}}},"dojo.widget.Manager":{"meta":{"requires":{"common":["dojo.lang.array","dojo.lang.func","dojo.event.*"]},"methods":{"dojo.widget.manager.getUniqueId":{"_":{"meta":{"summary":"","parameters":{"widgetType":{"type":""}},"src":"\t\treturn widgetType + \"_\" + (widgetTypeCtr[widgetType] != undefined ?\n\t\t\t++widgetTypeCtr[widgetType] : widgetTypeCtr[widgetType] = 0);"}}},"dojo.widget.manager.add":{"_":{"meta":{"summary":"","parameters":{"widget":{"type":""}},"src":"\t\t\/\/ Opera9 uses ID (caps)\n\t\tif(!widget.extraArgs[\"id\"]){\n\t\t\twidget.extraArgs[\"id\"] = widget.extraArgs[\"ID\"];\n\t\t}\n\t\t\/\/ FIXME: the rest of this method is very slow!\n\t\tif(widget.widgetId == \"\"){\n\t\t\tif(widget[\"id\"]){\n\t\t\t\twidget.widgetId = widget[\"id\"];\n\t\t\t}else if(widget.extraArgs[\"id\"]){\n\t\t\t\twidget.widgetId = widget.extraArgs[\"id\"];\n\t\t\t}else{\n\t\t\t\twidget.widgetId = this.getUniqueId(widget.widgetType);\n\t\t\t}\n\t\t}\n\t\tif(this.widgetIds[widget.widgetId]){\n\t\t\tdojo.debug(\"widget ID collision on ID: \"+widget.widgetId);\n\t\t}\n\t\tthis.widgetIds[widget.widgetId] = widget;\n\t\t\/\/ Widget.destroy already calls removeById(), so we don't need to\n\t\t\/\/ connect() it here\n\t\t\/\/dojo.profile.end(\"dojo.widget.manager.add\");"}}},"dojo.widget.manager.destroyAll":{"_":{"meta":{"summary":"","src":"\t\tfor(var x=this.widgets.length-1; x>=0; x--){\n\t\t\ttry{\n\t\t\t\t\/\/ this.widgets[x].destroyChildren();\n\t\t\t\tthis.widgets[x].destroy(true);\n\t\t\t\tdelete this.widgets[x];\n\t\t\t}catch(e){ }\n\t\t}"}}},"dojo.widget.manager.remove":{"_":{"meta":{"summary":"","parameters":{"widgetIndex":{"type":""}},"src":"\t\tif(dojo.lang.isNumber(widgetIndex)){\n\t\t\tvar tw = this.widgets[widgetIndex].widgetId;\n\t\t\tdelete this.widgetIds[tw];\n\t\t\tthis.widgets.splice(widgetIndex, 1);\n\t\t}else{\n\t\t\tthis.removeById(widgetIndex);\n\t\t}"}}},"dojo.widget.manager.removeById":{"_":{"meta":{"summary":"","parameters":{"id":{"type":""}},"src":"\t\tif(!dojo.lang.isString(id)){\n\t\t\tid = id[\"widgetId\"];\n\t\t\tif(!id){ dojo.debug(\"invalid widget or id passed to removeById\"); return; }\n\t\t}\n\t\tfor (var i=0; i<this.widgets.length; i++){\n\t\t\tif(this.widgets[i].widgetId == id){\n\t\t\t\tthis.remove(i);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}"}}},"dojo.widget.manager.getWidgetById":{"_":{"meta":{"summary":"","parameters":{"id":{"type":""}},"src":"\t\tif(dojo.lang.isString(id)){\n\t\t\treturn this.widgetIds[id];\n\t\t}\n\t\treturn id;"}}},"dojo.widget.manager.getWidgetsByType":{"_":{"meta":{"summary":"","parameters":{"type":{"type":""}},"src":"\t\tvar lt = type.toLowerCase();\n\t\tvar getType = (type.indexOf(\":\") < 0 ? \n\t\t\tfunction(x) { return x.widgetType.toLowerCase(); } :\n\t\t\tfunction(x) { return x.getNamespacedType(); }\n\t\t);\n\t\tvar ret = [];\n\t\tdojo.lang.forEach(this.widgets, function(x){\n\t\t\tif(getType(x) == lt){ret.push(x);}\n\t\t});\n\t\treturn ret;"}}},"dojo.widget.manager.getWidgetsByFilter":{"_":{"meta":{"summary":"","parameters":{"unaryFunc":{"type":""},"onlyOne":{"type":""}},"src":"\t\tvar ret = [];\n\t\tdojo.lang.every(this.widgets, function(x){\n\t\t\tif(unaryFunc(x)){\n\t\t\t\tret.push(x);\n\t\t\t\tif(onlyOne){return false;}\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t\treturn (onlyOne ? ret[0] : ret);"}}},"dojo.widget.manager.getAllWidgets":{"_":{"meta":{"summary":"","src":"\t\treturn this.widgets.concat();"}}},"dojo.widget.manager.getWidgetByNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":"DOMNode"}},"src":"\t\tvar w=this.getAllWidgets();\n\t\tnode = dojo.byId(node);\n\t\tfor(var i=0; i<w.length; i++){\n\t\t\tif(w[i].domNode==node){\n\t\t\t\treturn w[i];\n\t\t\t}\n\t\t}\n\t\treturn null;"}}},"dojo.widget.manager.registerWidgetPackage":{"_":{"meta":{"summary":"","parameters":{"pname":{"type":""}},"src":"\t\tif(!widgetPackages[pname]){\n\t\t\twidgetPackages[pname] = true;\n\t\t\twidgetPackages.push(pname);\n\t\t}"}}},"dojo.widget.manager.getWidgetPackageList":{"_":{"meta":{"summary":"","src":"\t\treturn dojo.lang.map(widgetPackages, function(elt) { return(elt!==true ? elt : undefined); });"}}},"dojo.widget.manager.getImplementation":{"_":{"meta":{"summary":"","parameters":{"widgetName":{"type":""},"ctorObject":{"type":""},"mixins":{"type":""},"ns":{"type":""}},"src":"\t\tif(impl){ \n\t\t\t\/\/ var tic = new Date();\n\t\t\tvar ret = ctorObject ? new impl(ctorObject) : new impl();\n\t\t\t\/\/ dojo.debug(new Date() - tic);\n\t\t\treturn ret;\n\t\t}"}}},"dojo.widget.manager.getImplementationName":{"_":{"meta":{"summary":"","parameters":{"widgetName":{"type":""},"ns":{"type":""}},"src":"\t\t\/\/ default to dojo namespace\n\t\tns=ns||\"dojo\";\n\t\t\/\/ use cache if available\n\t\tvar imps = knownWidgetImplementations[ns] || (knownWidgetImplementations[ns]={});\n\t\t\/\/if(!knownWidgetImplementations[ns]){knownWidgetImplementations[ns]={};}\n\t\tvar impl = imps[lowerCaseWidgetName];\n\t\tif(impl){\n\t\t\treturn impl;\n\t\t}\n\t\t\n\t\t\/\/ (one time) store a list of the render prefixes we are capable of rendering\n\t\tif(!renderPrefixCache.length){\n\t\t\tbuildPrefixCache();\n\t\t}\n\n\t\t\/\/ lookup namespace\n\t\tvar nsObj = dojo[\"namespace\"].get(ns);\n\t\tif(!nsObj){\n\t\t\t\/\/ default to <ns>.widget by convention\n\t\t\tdojo.namespace.register(ns, ns + '.widget');\n\t\t\tnsObj = dojo[\"namespace\"].get(ns);\n\t\t}\n\t\t\n\t\t\/\/ allow the namespace to resolve the widget module\n\t\tif(nsObj){nsObj.resolve(widgetName);}\n\n\t\t\/\/ locate a widget implementation in the registered module for our current rendering environment\n\t\timpl = findImplementation(lowerCaseWidgetName, nsObj.module);\n\t\tif(impl){return(imps[lowerCaseWidgetName] = impl)};\n\n\t\t\/\/ try to load a manifest to resolve this implemenation\n\t\tnsObj = dojo[\"namespace\"].require(ns);\n\t\tif((nsObj)&&(nsObj.resolver)){\n\t\t\tnsObj.resolve(widgetName);\n\t\t\timpl = findImplementation(lowerCaseWidgetName, nsObj.module);\n\t\t\tif(impl){return(imps[lowerCaseWidgetName] = impl)};\n\t\t}\n\t\n\t\t\/\/ this is an error condition under new rules\n\t\tdojo.deprecated('dojo.widget.Manager.getImplementationName', \n\t\t\t'Could not locate widget implementation for \"' + widgetName + '\" in \"' + nsObj.module + '\" registered to namespace \"' + nsObj.name + '\". '\t\t\t\t\t\t\t\t\t\t\n\t\t\t+ \"Developers must specify correct namespaces for all non-Dojo widgets\", \"0.5\");\n\n\t\t\/\/ backward compat: if the user has not specified any namespace and their widget is not in dojo.widget.*\n\t\t\/\/ search registered widget packages [sic]\n\t\t\/\/ note: registerWidgetPackage itself is now deprecated \n\t\tfor(var i=0; i<widgetPackages.length; i++){\n\t\t\timpl = findImplementation(lowerCaseWidgetName, widgetPackages[i]);\n\t\t\tif(impl){return(imps[lowerCaseWidgetName] = impl)};\n\t\t}\n\t\t\n\t\tthrow new Error('Could not locate widget implementation for \"' + widgetName + '\" in \"' + nsObj.module + '\" registered to namespace \"' + nsObj.name + '\"');"}}},"dojo.widget.manager.onWindowResized":{"_":{"meta":{"summary":"","src":"\t\tif(this.resizing){\n\t\t\treturn;\t\/\/ duplicate event\n\t\t}\n\t\ttry{\n\t\t\tthis.resizing=true;\n\t\t\tfor(var id in this.topWidgets){\n\t\t\t\tvar child = this.topWidgets[id];\n\t\t\t\tif(child.checkSize ){\n\t\t\t\t\tchild.checkSize();\n\t\t\t\t}\n\t\t\t}\n\t\t}catch(e){\n\t\t}finally{\n\t\t\tthis.resizing=false;\n\t\t}","this_variables":["resizing"],"returns":"duplicate event"}}}}}},"dojo.widget.Menu2":{"meta":{"requires":{"common":["dojo.html.style","dojo.html.layout","dojo.html.selection","dojo.html.iframe","dojo.event.*","dojo.widget.*","dojo.widget.HtmlWidget"]},"methods":{"dojo.widget.PopupContainerBase":{"_":{"meta":{"summary":""}}},"dojo.widget.PopupContainer":{"_":{"meta":{"summary":"","inherits":["[dojo.widget.HtmlWidget, dojo.widget.PopupContainerBase]"],"this_inherits":["[dojo.widget.HtmlWidget, dojo.widget.PopupContainerBase]"]}}},"dojo.widget.PopupMenu2":{"_":{"meta":{"summary":"","inherits":["dojo.widget.PopupContainer"],"this_inherits":["dojo.widget.PopupContainer"]}}},"dojo.widget.MenuItem2":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}},"dojo.widget.MenuSeparator2":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}},"dojo.widget.MenuBar2":{"_":{"meta":{"summary":"","inherits":["dojo.widget.PopupMenu2"],"this_inherits":["dojo.widget.PopupMenu2"]}}},"dojo.widget.MenuBarItem2":{"_":{"meta":{"summary":"","inherits":["dojo.widget.MenuItem2"],"this_inherits":["dojo.widget.MenuItem2"]}}},"dojo.widget.PopupManager.registerWin":{"_":{"meta":{"summary":"","parameters":{"win":{"type":""}},"src":"\t\tif(!win.__PopupManagerRegistered)\n\t\t{\n\t\t\tdojo.event.connect(win.document, 'onmousedown', this, 'onClick');\n\t\t\tdojo.event.connect(win, \"onscroll\", this, \"onClick\");\n\t\t\tdojo.event.connect(win.document, this._keyEventName, this, 'onKeyPress');\n\t\t\twin.__PopupManagerRegistered = true;\n\t\t\tthis.registeredWindows.push(win);\n\t\t}"}}},"dojo.widget.PopupManager.registerAllWindows":{"_":{"meta":{"summary":"","parameters":{"targetWindow":{"type":""}},"src":"\t\t\ttargetWindow = dojo.html.getDocumentWindow(window.top.document);\n\t\t}\n\n\t\tthis.registerWin(targetWindow);\n\n\t\tfor (var i = 0; i < targetWindow.frames.length; i++){\n\t\t\ttry{\n\t\t\t\t\/\/do not remove  dojo.html.getDocumentWindow, see comment in it\n\t\t\t\tvar win = dojo.html.getDocumentWindow(targetWindow.frames[i].document);\n\t\t\t\tif(win){\n\t\t\t\t\tthis.registerAllWindows(win);\n\t\t\t\t}\n\t\t\t}catch(e){ \/* squelch error for cross domain iframes *\/ }\n\t\t}"}}},"dojo.widget.PopupManager.closed":{"_":{"meta":{"summary":"","parameters":{"menu":{"type":""}},"src":"\t\tif (this.currentMenu == menu){\n\t\t\tthis.currentMenu = null;\n\t\t\tthis.currentButton = null;\n\t\t\tthis.currentFocusMenu = null;\n\t\t}","this_variables":["currentMenu","currentButton","currentFocusMenu"]}}},"dojo.widget.PopupManager.opened":{"_":{"meta":{"summary":"","parameters":{"menu":{"type":""},"button":{"type":""}},"src":"\t\tif (menu == this.currentMenu){ return; }\n\n\t\tif (this.currentMenu){\n\t\t\tthis.currentMenu.close();\n\t\t}\n\n\t\tthis.currentMenu = menu;\n\t\tthis.currentFocusMenu = menu;\n\t\tthis.currentButton = button;","this_variables":["currentMenu","currentFocusMenu","currentButton"]}}},"dojo.widget.PopupManager.setFocusedMenu":{"_":{"meta":{"summary":"","parameters":{"menu":{"type":""}},"src":"\t\tthis.currentFocusMenu = menu;","this_variables":["currentFocusMenu"]}}},"dojo.widget.PopupManager.onKeyPress":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif(!this.currentMenu || !this.currentMenu.isShowingNow){ return; }\n\n\t\tvar m = this.currentFocusMenu;\n\t\twhile (m){\n\t\t\tif(m.processKey(e)){\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tm = m.parentPopup;\n\t\t}"}}},"dojo.widget.PopupManager.onClick":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif (!this.currentMenu){ return; }\n\n\t\tvar scrolloffset = dojo.html.getScroll().offset;\n\n\t\t\/\/ starting from the base menu, perform a hit test\n\t\t\/\/ and exit when one succeeds\n\n\t\tvar m = this.currentMenu;\n\n\t\twhile (m){\n\t\t\tif(dojo.html.overElement(m.domNode, e) || dojo.html.isDescendantOf(e.target, m.domNode)){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tm = m.currentSubpopup;\n\t\t}\n\n\t\t\/\/ Also, if user clicked the button that opened this menu, then\n\t\t\/\/ that button will send the menu a close() command, so this code\n\t\t\/\/ shouldn't try to close the menu.  Closing twice messes up animation.\n\t\tif (this.currentButton && dojo.html.overElement(this.currentButton, e)){\n\t\t\treturn;\n\t\t}\n\n\t\t\/\/ the click didn't fall within the open menu tree\n\t\t\/\/ so close it\n\n\t\tthis.currentMenu.close();"}}},"dojo.widget.Menu2.OperaAndKonqFixer.fixNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":" \t\tif (implement){\n \t\t\t\/\/ attach stub oncontextmenu function\n \t\t\tif (!dojo.lang.isFunction(node.oncontextmenu)){\n \t\t\t\tnode.oncontextmenu = function(e){\/*stub*\/}\n \t\t\t}\n\n \t\t\t\/\/ attach control function for oncontextmenu\n \t\t\tif (dojo.render.html.opera){\n \t\t\t\t\/\/ opera\n \t\t\t\t\/\/ listen to ctrl-click events\n \t\t\t\tnode._menufixer_opera = function(e){\n \t\t\t\t\tif (e.ctrlKey){\n \t\t\t\t\t\tthis.oncontextmenu(e);\n \t\t\t\t\t}\n \t\t\t\t};\n\n \t\t\t\tdojo.event.connect(node, \"onclick\", node, \"_menufixer_opera\");\n\n \t\t\t} else {\n \t\t\t\t\/\/ konqueror\n \t\t\t\t\/\/ rightclick, listen to mousedown events\n \t\t\t\tnode._menufixer_konq = function(e){\n \t\t\t\t\tif (e.button==2 ){\n \t\t\t\t\t\te.preventDefault(); \/\/ need to prevent browsers menu\n \t\t\t\t\t\tthis.oncontextmenu(e);\n \t\t\t\t\t}\n \t\t\t\t};\n\n \t\t\t\tdojo.event.connect(node, \"onmousedown\", node, \"_menufixer_konq\");\n \t\t\t}\n \t\t}"}}},"dojo.widget.Menu2.OperaAndKonqFixer.cleanNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":" \t\tif (implement){\n \t\t\t\/\/ checks needed if we gets a non fixed node\n \t\t\tif (node._menufixer_opera){\n \t\t\t\tdojo.event.disconnect(node, \"onclick\", node, \"_menufixer_opera\");\n \t\t\t\tdelete node._menufixer_opera;\n \t\t\t} else if(node._menufixer_konq){\n \t\t\t\tdojo.event.disconnect(node, \"onmousedown\", node, \"_menufixer_konq\");\n \t\t\t\tdelete node._menufixer_konq;\n \t\t\t}\n \t\t\tif (node.oncontextmenu){\n \t\t\t\tdelete node.oncontextmenu;\n \t\t\t}\n \t\t}"}}}}}},"dojo.widget.MonthlyCalendar":{"meta":{"requires":{"common":["dojo.date.common","dojo.date.format","dojo.widget.*","dojo.widget.DatePicker","dojo.event.*","dojo.html.*"]},"methods":{"dojo.widget.MonthlyCalendar":{"_":{"meta":{"summary":"","inherits":["dojo.widget.DatePicker"],"this_inherits":["dojo.widget.DatePicker"]}}},"dojo.widget.MonthlyCalendar.util.toRfcDate":{"_":{"meta":{"summary":"","parameters":{"jsDate":{"type":""}},"src":"\t\tif(!jsDate) {\n\t\t\tjsDate = this.today;\n\t\t}\n\t\tvar year = jsDate.getFullYear();\n\t\tvar month = jsDate.getMonth() + 1;\n\t\tif (month < 10) {\n\t\t\tmonth = \"0\" + month.toString();\n\t\t}\n\t\tvar date = jsDate.getDate();\n\t\tif (date < 10) {\n\t\t\tdate = \"0\" + date.toString();\n\t\t}\n\t\t\/\/ because this is a date picker and not a time picker, we treat time \n\t\t\/\/ as zero\n\t\treturn year + \"-\" + month + \"-\" + date + \"T00:00:00+00:00\";"}}},"dojo.widget.MonthlyCalendar.util.fromRfcDate":{"_":{"meta":{"summary":"","parameters":{"rfcDate":{"type":""}},"src":"\t\tvar tempDate = rfcDate.split(\"-\");\n\t\tif(tempDate.length < 3) {\n\t\t\treturn new Date();\n\t\t}\n\t\t\/\/ fullYear, month, date\n\t\treturn new Date(parseInt(tempDate[0]), (parseInt(tempDate[1], 10) - 1), parseInt(tempDate[2].substr(0,2), 10));"}}},"dojo.widget.MonthlyCalendar.util.initFirstSaturday":{"_":{"meta":{"summary":"","parameters":{"month":{"type":""},"year":{"type":""}},"src":"\t\tif(!month) {\n\t\t\tmonth = this.date.getMonth();\n\t\t}\n\t\tif(!year) {\n\t\t\tyear = this.date.getFullYear();\n\t\t}\n\t\tvar firstOfMonth = new Date(year, month, 1);\n\t\treturn {year: year, month: month, date: 7 - firstOfMonth.getDay()};"}}}}}},"dojo.widget.Parse":{"meta":{"requires":{"common":["dojo.widget.Manager","dojo.dom","dojo.namespace"]},"methods":{"dojo.widget.Parse":{"_":{"meta":{"summary":"","parameters":{"fragment":{"type":""}},"src":"\tthis.propertySetsList = [];\n\tthis.fragment = fragment;\n\t\n\tthis.createComponents = function(frag, parentComp){\n\t\tvar comps = [];\n\t\tvar built = false;\n\t\t\/\/ if we have items to parse\/create at this level, do it!\n\t\ttry{\n\t\t\tif((frag)&&(frag[\"tagName\"])&&(frag!=frag[\"nodeRef\"])){\n\t\t\t\t\n\t\t\t\t\/\/ these are in fact, not ever for widgets per-se anymore, \n\t\t\t\t\/\/ but for other markup elements (aka components)\n\t\t\t\tvar djTags = dojo.widget.tags;\n\t\t\t\t\n\t\t\t\t\/\/ we split so that you can declare multiple \n\t\t\t\t\/\/ non-destructive components from the same ctor node\n\t\t\t\tvar tna = String(frag[\"tagName\"]).split(\";\");\n\t\t\t\tfor(var x=0; x<tna.length; x++){\n\t\t\t\t\tvar ltn = (tna[x].replace(\/^\\s+|\\s+$\/g, \"\")).toLowerCase();\n\t\t\t\t\t\/\/ FIXME: unsure what this does\n\t\t\t\t\tfrag.tagName = ltn;\n\t\t\t\t\tif(djTags[ltn]){\n\t\t\t\t\t\tbuilt = true;\n\t\t\t\t\t\tvar ret = djTags[ltn](frag, this, parentComp, frag[\"index\"]);\n\t\t\t\t\t\tcomps.push(ret);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\/\/ we require a namespace prefix, default to dojo:\n\t\t\t\t\t\tif (ltn.indexOf(\":\") == -1){\n\t\t\t\t\t\t\tltn = \"dojo:\"+ltn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\/\/ FIXME: handling failure condition correctly?\n\t\t\t\t\t\t\/\/var ret = djTags[ltn](frag, this, parentComp, frag[\"index\"]);\n\t\t\t\t\t\tvar ret = dojo.widget.buildWidgetFromParseTree(ltn, frag, this, parentComp, frag[\"index\"]);\n\t\t\t\t\t\tif (ret) {\n\t\t\t\t\t\t\tbuilt = true;\n\t\t\t\t\t\t\tcomps.push(ret);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}catch(e){\n\t\t\tdojo.debug(\"dojo.widget.Parse: error:\", e);\n\t\t\t\/\/ throw e;\n\t\t\t\/\/ IE is such a bitch sometimes\n\t\t}\n\t\t\/\/ if there's a sub-frag, build widgets from that too\n\t\tif(!built){\n\t\t\tcomps = comps.concat(this.createSubComponents(frag, parentComp));\n\t\t}\n\t\treturn comps;\n\t}\n\n\t\/*\tcreateSubComponents recurses over a raw JavaScript object structure,\n\t\t\tand calls the corresponding handler for its normalized tagName if it exists\n\t*\/\n\tthis.createSubComponents = function(fragment, parentComp){\n\t\tvar frag, comps = [];\n\t\tfor(var item in fragment){\n\t\t\tfrag = fragment[item];\n\t\t\tif ((frag)&&(typeof frag == \"object\")&&(frag!=fragment.nodeRef)&&(frag!=fragment[\"tagName\"])){\n\t\t\t\tcomps = comps.concat(this.createComponents(frag, parentComp));\n\t\t\t}\n\t\t}\n\t\treturn comps;\n\t}\n\n\t\/*  parsePropertySets checks the top level of a raw JavaScript object\n\t\t\tstructure for any propertySets.  It stores an array of references to \n\t\t\tpropertySets that it finds.\n\t*\/\n\tthis.parsePropertySets = function(fragment){\n\t\treturn [];\n\t\t\/*\n\t\tvar propertySets = [];\n\t\tfor(var item in fragment){\n\t\t\tif((fragment[item][\"tagName\"] == \"dojo:propertyset\")){\n\t\t\t\tpropertySets.push(fragment[item]);\n\t\t\t}\n\t\t}\n\t\t\/\/ FIXME: should we store these propertySets somewhere for later retrieval\n\t\tthis.propertySetsList.push(propertySets);\n\t\treturn propertySets;\n\t\t*\/\n\t}\n\t\n\t\/*  parseProperties checks a raw JavaScript object structure for\n\t\t\tproperties, and returns an array of properties that it finds.\n\t*\/\n\tthis.parseProperties = function(fragment){\n\t\tvar properties = {};\n\t\tfor(var item in fragment){\n\t\t\t\/\/ FIXME: need to check for undefined?\n\t\t\t\/\/ case: its a tagName or nodeRef\n\t\t\tif((fragment[item] == fragment[\"tagName\"])||(fragment[item] == fragment.nodeRef)){\n\t\t\t\t\/\/ do nothing\n\t\t\t}else{\n\t\t\t\tif((fragment[item][\"tagName\"])&&\n\t\t\t\t\t(dojo.widget.tags[fragment[item].tagName.toLowerCase()])){\n\t\t\t\t\t\/\/ TODO: it isn't a property or property set, it's a fragment, \n\t\t\t\t\t\/\/ so do something else\n\t\t\t\t\t\/\/ FIXME: needs to be a better\/stricter check\n\t\t\t\t\t\/\/ TODO: handle xlink:href for external property sets\n\t\t\t\t}else if((fragment[item][0])&&(fragment[item][0].value!=\"\")&&(fragment[item][0].value!=null)){\n\t\t\t\t\ttry{\n\t\t\t\t\t\t\/\/ FIXME: need to allow more than one provider\n\t\t\t\t\t\tif(item.toLowerCase() == \"dataprovider\") {\n\t\t\t\t\t\t\tvar _this = this;\n\t\t\t\t\t\t\tthis.getDataProvider(_this, fragment[item][0].value);\n\t\t\t\t\t\t\tproperties.dataProvider = this.dataProvider;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tproperties[item] = fragment[item][0].value;\n\t\t\t\t\t\tvar nestedProperties = this.parseProperties(fragment[item]);\n\t\t\t\t\t\t\/\/ FIXME: this kind of copying is expensive and inefficient!\n\t\t\t\t\t\tfor(var property in nestedProperties){\n\t\t\t\t\t\t\tproperties[property] = nestedProperties[property];\n\t\t\t\t\t\t}\n\t\t\t\t\t}catch(e){ dojo.debug(e); }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn properties;\n\t}\n\n\t\/* getPropertySetById returns the propertySet that matches the provided id\n\t*\/\n\t\n\tthis.getDataProvider = function(objRef, dataUrl){\n\t\t\/\/ FIXME: this is currently sync.  To make this async, we made need to move \n\t\t\/\/this step into the widget ctor, so that it is loaded when it is needed \n\t\t\/\/ to populate the widget\n\t\tdojo.io.bind({\n\t\t\turl: dataUrl,\n\t\t\tload: function(type, evaldObj){\n\t\t\t\tif(type==\"load\"){\n\t\t\t\t\tobjRef.dataProvider = evaldObj;\n\t\t\t\t}\n\t\t\t},\n\t\t\tmimetype: \"text\/javascript\",\n\t\t\tsync: true\n\t\t});\n\t}\n\n\t\n\tthis.getPropertySetById = function(propertySetId){\n\t\tfor(var x = 0; x < this.propertySetsList.length; x++){\n\t\t\tif(propertySetId == this.propertySetsList[x][\"id\"][0].value){\n\t\t\t\treturn this.propertySetsList[x];\n\t\t\t}\n\t\t}\n\t\treturn \"\";\n\t}\n\t\n\t\/* getPropertySetsByType returns the propertySet(s) that match(es) the\n\t * provided componentClass\n\t *\/\n\tthis.getPropertySetsByType = function(componentType){\n\t\tvar propertySets = [];\n\t\tfor(var x=0; x < this.propertySetsList.length; x++){\n\t\t\tvar cpl = this.propertySetsList[x];\n\t\t\tvar cpcc = cpl[\"componentClass\"]||cpl[\"componentType\"]||null;\n\t\t\tvar propertySetId = this.propertySetsList[x][\"id\"][0].value;\n\t\t\tif((cpcc)&&(propertySetId == cpcc[0].value)){\n\t\t\t\tpropertySets.push(cpl);\n\t\t\t}\n\t\t}\n\t\treturn propertySets;\n\t}\n\t\n\t\/* getPropertySets returns the propertySet for a given component fragment\n\t*\/\n\tthis.getPropertySets = function(fragment){\n\t\tvar ppl = \"dojo:propertyproviderlist\";\n\t\tvar propertySets = [];\n\t\tvar tagname = fragment[\"tagName\"];\n\t\tif(fragment[ppl]){ \n\t\t\tvar propertyProviderIds = fragment[ppl].value.split(\" \");\n\t\t\t\/\/ FIXME: should the propertyProviderList attribute contain #\n\t\t\t\/\/ \t\t  syntax for reference to ids or not?\n\t\t\t\/\/ FIXME: need a better test to see if this is local or external\n\t\t\t\/\/ FIXME: doesn't handle nested propertySets, or propertySets that\n\t\t\t\/\/ \t\t  just contain information about css documents, etc.\n\t\t\tfor(var propertySetId in propertyProviderIds){\n\t\t\t\tif((propertySetId.indexOf(\"..\")==-1)&&(propertySetId.indexOf(\":\/\/\")==-1)){\n\t\t\t\t\t\/\/ get a reference to a propertySet within the current parsed structure\n\t\t\t\t\tvar propertySet = this.getPropertySetById(propertySetId);\n\t\t\t\t\tif(propertySet != \"\"){\n\t\t\t\t\t\tpropertySets.push(propertySet);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\t\/\/ FIXME: add code to parse and return a propertySet from\n\t\t\t\t\t\/\/ another document\n\t\t\t\t\t\/\/ alex: is this even necessaray? Do we care? If so, why?\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\/\/ we put the typed ones first so that the parsed ones override when\n\t\t\/\/ iteration happens.\n\t\treturn (this.getPropertySetsByType(tagname)).concat(propertySets);\n\t}\n\t\n\t\/* \n\t\tnodeRef is the node to be replaced... in the future, we might want to add \n\t\tan alternative way to specify an insertion point\n\n\t\tcomponentName is the expected dojo widget name, i.e. Button of ContextMenu\n\n\t\tproperties is an object of name value pairs\n\t\tnamespace is the namespace of the widget.  Defaults to \"dojo\"\n\t*\/\n\tthis.createComponentFromScript = function(nodeRef, componentName, properties, ns){\n\t\tproperties.fastMixIn = true;\t\t\t\n\t\t\/\/ FIXME: we pulled it apart and now we put it back together ... \n\t\tvar ltn = (ns || \"dojo\") + \":\" + componentName.toLowerCase();\n\t\tif(dojo.widget.tags[ltn]){\n\t\t\treturn [dojo.widget.tags[ltn](properties, this, null, null, properties)];\n\t\t}\n\t\treturn [dojo.widget.buildWidgetFromParseTree(ltn, properties, this, null, null, properties)];\n\t}","this_variables":["propertySetsList","fragment","createComponents","createSubComponents","parsePropertySets","parseProperties","getDataProvider","getPropertySetById","getPropertySetsByType","getPropertySets","createComponentFromScript"]}}},"dojo.widget.Parse.createComponents":{"_":{"meta":{"summary":"","parameters":{"frag":{"type":""},"parentComp":{"type":""}},"src":"\t\tvar comps = [];\n\t\tvar built = false;\n\t\t\/\/ if we have items to parse\/create at this level, do it!\n\t\ttry{\n\t\t\tif((frag)&&(frag[\"tagName\"])&&(frag!=frag[\"nodeRef\"])){\n\t\t\t\t\n\t\t\t\t\/\/ these are in fact, not ever for widgets per-se anymore, \n\t\t\t\t\/\/ but for other markup elements (aka components)\n\t\t\t\tvar djTags = dojo.widget.tags;\n\t\t\t\t\n\t\t\t\t\/\/ we split so that you can declare multiple \n\t\t\t\t\/\/ non-destructive components from the same ctor node\n\t\t\t\tvar tna = String(frag[\"tagName\"]).split(\";\");\n\t\t\t\tfor(var x=0; x<tna.length; x++){\n\t\t\t\t\tvar ltn = (tna[x].replace(\/^\\s+|\\s+$\/g, \"\")).toLowerCase();\n\t\t\t\t\t\/\/ FIXME: unsure what this does\n\t\t\t\t\tfrag.tagName = ltn;\n\t\t\t\t\tif(djTags[ltn]){\n\t\t\t\t\t\tbuilt = true;\n\t\t\t\t\t\tvar ret = djTags[ltn](frag, this, parentComp, frag[\"index\"]);\n\t\t\t\t\t\tcomps.push(ret);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\/\/ we require a namespace prefix, default to dojo:\n\t\t\t\t\t\tif (ltn.indexOf(\":\") == -1){\n\t\t\t\t\t\t\tltn = \"dojo:\"+ltn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\/\/ FIXME: handling failure condition correctly?\n\t\t\t\t\t\t\/\/var ret = djTags[ltn](frag, this, parentComp, frag[\"index\"]);\n\t\t\t\t\t\tvar ret = dojo.widget.buildWidgetFromParseTree(ltn, frag, this, parentComp, frag[\"index\"]);\n\t\t\t\t\t\tif (ret) {\n\t\t\t\t\t\t\tbuilt = true;\n\t\t\t\t\t\t\tcomps.push(ret);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}catch(e){\n\t\t\tdojo.debug(\"dojo.widget.Parse: error:\", e);\n\t\t\t\/\/ throw e;\n\t\t\t\/\/ IE is such a bitch sometimes\n\t\t}\n\t\t\/\/ if there's a sub-frag, build widgets from that too\n\t\tif(!built){\n\t\t\tcomps = comps.concat(this.createSubComponents(frag, parentComp));\n\t\t}\n\t\treturn comps;"}}},"dojo.widget.Parse.createSubComponents":{"_":{"meta":{"summary":"","parameters":{"fragment":{"type":""},"parentComp":{"type":""}},"src":"\t\tvar frag, comps = [];\n\t\tfor(var item in fragment){\n\t\t\tfrag = fragment[item];\n\t\t\tif ((frag)&&(typeof frag == \"object\")&&(frag!=fragment.nodeRef)&&(frag!=fragment[\"tagName\"])){\n\t\t\t\tcomps = comps.concat(this.createComponents(frag, parentComp));\n\t\t\t}\n\t\t}\n\t\treturn comps;"}}},"dojo.widget.Parse.parsePropertySets":{"_":{"meta":{"summary":"","parameters":{"fragment":{"type":""}},"src":"\t\treturn [];\n\t\t\/*\n\t\tvar propertySets = [];\n\t\tfor(var item in fragment){\n\t\t\tif((fragment[item][\"tagName\"] == \"dojo:propertyset\")){\n\t\t\t\tpropertySets.push(fragment[item]);\n\t\t\t}\n\t\t}\n\t\t\/\/ FIXME: should we store these propertySets somewhere for later retrieval\n\t\tthis.propertySetsList.push(propertySets);\n\t\treturn propertySets;\n\t\t*\/"}}},"dojo.widget.Parse.parseProperties":{"_":{"meta":{"summary":"","parameters":{"fragment":{"type":""}},"src":"\t\tvar properties = {};\n\t\tfor(var item in fragment){\n\t\t\t\/\/ FIXME: need to check for undefined?\n\t\t\t\/\/ case: its a tagName or nodeRef\n\t\t\tif((fragment[item] == fragment[\"tagName\"])||(fragment[item] == fragment.nodeRef)){\n\t\t\t\t\/\/ do nothing\n\t\t\t}else{\n\t\t\t\tif((fragment[item][\"tagName\"])&&\n\t\t\t\t\t(dojo.widget.tags[fragment[item].tagName.toLowerCase()])){\n\t\t\t\t\t\/\/ TODO: it isn't a property or property set, it's a fragment, \n\t\t\t\t\t\/\/ so do something else\n\t\t\t\t\t\/\/ FIXME: needs to be a better\/stricter check\n\t\t\t\t\t\/\/ TODO: handle xlink:href for external property sets\n\t\t\t\t}else if((fragment[item][0])&&(fragment[item][0].value!=\"\")&&(fragment[item][0].value!=null)){\n\t\t\t\t\ttry{\n\t\t\t\t\t\t\/\/ FIXME: need to allow more than one provider\n\t\t\t\t\t\tif(item.toLowerCase() == \"dataprovider\") {\n\t\t\t\t\t\t\tvar _this = this;\n\t\t\t\t\t\t\tthis.getDataProvider(_this, fragment[item][0].value);\n\t\t\t\t\t\t\tproperties.dataProvider = this.dataProvider;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tproperties[item] = fragment[item][0].value;\n\t\t\t\t\t\tvar nestedProperties = this.parseProperties(fragment[item]);\n\t\t\t\t\t\t\/\/ FIXME: this kind of copying is expensive and inefficient!\n\t\t\t\t\t\tfor(var property in nestedProperties){\n\t\t\t\t\t\t\tproperties[property] = nestedProperties[property];\n\t\t\t\t\t\t}\n\t\t\t\t\t}catch(e){ dojo.debug(e); }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn properties;"}}},"dojo.widget.Parse.getDataProvider":{"_":{"meta":{"summary":"","parameters":{"objRef":{"type":""},"dataUrl":{"type":""}},"src":"\t\t\turl: dataUrl,\n\t\t\tload: function(type, evaldObj){\n\t\t\t\tif(type==\"load\"){\n\t\t\t\t\tobjRef.dataProvider = evaldObj;\n\t\t\t\t}\n\t\t\t},\n\t\t\tmimetype: \"text\/javascript\",\n\t\t\tsync: true\n\t\t});"}}},"dojo.widget.Parse.getPropertySetById":{"_":{"meta":{"summary":"","parameters":{"propertySetId":{"type":""}},"src":"\t\tfor(var x = 0; x < this.propertySetsList.length; x++){\n\t\t\tif(propertySetId == this.propertySetsList[x][\"id\"][0].value){\n\t\t\t\treturn this.propertySetsList[x];\n\t\t\t}\n\t\t}\n\t\treturn \"\";"}}},"dojo.widget.Parse.getPropertySetsByType":{"_":{"meta":{"summary":"","parameters":{"componentType":{"type":""}},"src":"\t\tvar propertySets = [];\n\t\tfor(var x=0; x < this.propertySetsList.length; x++){\n\t\t\tvar cpl = this.propertySetsList[x];\n\t\t\tvar cpcc = cpl[\"componentClass\"]||cpl[\"componentType\"]||null;\n\t\t\tvar propertySetId = this.propertySetsList[x][\"id\"][0].value;\n\t\t\tif((cpcc)&&(propertySetId == cpcc[0].value)){\n\t\t\t\tpropertySets.push(cpl);\n\t\t\t}\n\t\t}\n\t\treturn propertySets;"}}},"dojo.widget.Parse.getPropertySets":{"_":{"meta":{"summary":"","parameters":{"fragment":{"type":""}},"src":"\t\tvar ppl = \"dojo:propertyproviderlist\";\n\t\tvar propertySets = [];\n\t\tvar tagname = fragment[\"tagName\"];\n\t\tif(fragment[ppl]){ \n\t\t\tvar propertyProviderIds = fragment[ppl].value.split(\" \");\n\t\t\t\/\/ FIXME: should the propertyProviderList attribute contain #\n\t\t\t\/\/ \t\t  syntax for reference to ids or not?\n\t\t\t\/\/ FIXME: need a better test to see if this is local or external\n\t\t\t\/\/ FIXME: doesn't handle nested propertySets, or propertySets that\n\t\t\t\/\/ \t\t  just contain information about css documents, etc.\n\t\t\tfor(var propertySetId in propertyProviderIds){\n\t\t\t\tif((propertySetId.indexOf(\"..\")==-1)&&(propertySetId.indexOf(\":\/\/\")==-1)){\n\t\t\t\t\t\/\/ get a reference to a propertySet within the current parsed structure\n\t\t\t\t\tvar propertySet = this.getPropertySetById(propertySetId);\n\t\t\t\t\tif(propertySet != \"\"){\n\t\t\t\t\t\tpropertySets.push(propertySet);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\t\/\/ FIXME: add code to parse and return a propertySet from\n\t\t\t\t\t\/\/ another document\n\t\t\t\t\t\/\/ alex: is this even necessaray? Do we care? If so, why?\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\/\/ we put the typed ones first so that the parsed ones override when\n\t\t\/\/ iteration happens.\n\t\treturn (this.getPropertySetsByType(tagname)).concat(propertySets);"}}},"dojo.widget.Parse.createComponentFromScript":{"_":{"meta":{"summary":"","parameters":{"nodeRef":{"type":""},"componentName":{"type":""},"properties":{"type":""},"ns":{"type":""}},"src":"\t\tproperties.fastMixIn = true;\t\t\t\n\t\t\/\/ FIXME: we pulled it apart and now we put it back together ... \n\t\tvar ltn = (ns || \"dojo\") + \":\" + componentName.toLowerCase();\n\t\tif(dojo.widget.tags[ltn]){\n\t\t\treturn [dojo.widget.tags[ltn](properties, this, null, null, properties)];\n\t\t}\n\t\treturn [dojo.widget.buildWidgetFromParseTree(ltn, properties, this, null, null, properties)];"}}},"dojo.widget.getParser":{"_":{"meta":{"summary":"","parameters":{"name":{"type":""}},"src":"\tif(!name){ name = \"dojo\"; }\n\tif(!this._parser_collection[name]){\n\t\tthis._parser_collection[name] = new dojo.widget.Parse();\n\t}\n\treturn this._parser_collection[name];"}}},"dojo.widget.createWidget":{"_":{"meta":{"summary":"","parameters":{"name":{"type":""},"props":{"type":""},"refNode":{"type":""},"position":{"type":""}},"src":"\tvar isNode = false;\n\tvar isNameStr = (typeof name == \"string\");\n\tif(isNameStr){\n\t\tvar pos = name.indexOf(\":\");\n\t\tvar ns = (pos > -1) ? name.substring(0,pos) : \"dojo\";\n\t\tif(pos > -1){ name = name.substring(pos+1); }\n\t\tvar lowerCaseName = name.toLowerCase();\n\t\tvar namespacedName = ns + \":\" + lowerCaseName;\n\t\tisNode = (dojo.byId(name) && (!dojo.widget.tags[namespacedName])); \n\t}\n\n\tif((arguments.length == 1) && ((isNode)||(!isNameStr))){\n\t\t\/\/ we got a DOM node \n\t\tvar xp = new dojo.xml.Parse(); \n\t\t\/\/ FIXME: we should try to find the parent! \n\t\tvar tn = (isNode) ? dojo.byId(name) : name; \n\t\treturn dojo.widget.getParser().createComponents(xp.parseElement(tn, null, true))[0]; \n\t}\n\t\n\tfunction fromScript(placeKeeperNode, name, props, ns){\n\t\tprops[namespacedName] = { \n\t\t\tdojotype: [{value: lowerCaseName}],\n\t\t\tnodeRef: placeKeeperNode,\n\t\t\tfastMixIn: true\n\t\t};\n\t\tprops[\"namespace\"] = ns;\n\t\treturn dojo.widget.getParser().createComponentFromScript(placeKeeperNode, name, props, ns);\n\t}\n\n\tprops = props||{};\n\tvar notRef = false;\n\tvar tn = null;\n\tvar h = dojo.render.html.capable;\n\tif(h){\n\t\ttn = document.createElement(\"span\");\n\t}\n\tif(!refNode){\n\t\tnotRef = true;\n\t\trefNode = tn;\n\t\tif(h){\n\t\t\tdojo.body().appendChild(refNode);\n\t\t}\n\t}else if(position){\n\t\tdojo.dom.insertAtPosition(tn, refNode, position);\n\t}else{ \/\/ otherwise don't replace, but build in-place\n\t\ttn = refNode;\n\t}\n\tvar widgetArray = fromScript(tn, name.toLowerCase(), props, ns);\n\tif (!widgetArray || !widgetArray[0] || typeof widgetArray[0].widgetType == \"undefined\") {\n\t\tthrow new Error(\"createWidget: Creation of \\\"\" + name + \"\\\" widget failed.\");\n\t}\n\tif (notRef) {\n\t\tif (widgetArray[0].domNode.parentNode) {\n\t\t\twidgetArray[0].domNode.parentNode.removeChild(widgetArray[0].domNode);\n\t\t}\n\t}\n\treturn widgetArray[0]; \/\/ just return the widget","returns":"just return the widget"}}}}}},"dojo.widget.RemoteTabController":{"meta":{"requires":{"common":["dojo.widget.*","dojo.event.*"]},"methods":{"dojo.widget.RemoteTabController":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}}}}},"dojo.widget.ResizableTextarea":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.LayoutContainer","dojo.widget.ResizeHandle"]},"methods":{"dojo.widget.ResizableTextarea":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}}}}},"dojo.widget.ResizeHandle":{"meta":{"requires":{"common":["dojo.widget.*","dojo.html.layout","dojo.event.*"]},"methods":{"dojo.widget.ResizeHandle":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}}}}},"dojo.widget.RichText":{"meta":{"requires":{"common":["dojo.widget.*","dojo.html.*","dojo.html.layout","dojo.event.*","dojo.string.extras"]},"methods":{"dojo.widget.RichText":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"],"protovariables":{"inheritWidth":"","focusOnLoad":"","saveName":"","_content":"","height":"","minHeight":"","isClosed":"","isLoaded":"","useActiveX":"","relativeImageUrls":"","_SEPARATOR":""}}}},"dojo.widget.RichText.fillInTemplate":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.event.topic.publish(\"dojo.widget.RichText::init\", this);\n\t\t\tthis.open();\n\n\t\t\t\/\/ add the formatting functions\n\t\t\tvar funcs = [\"queryCommandEnabled\", \"queryCommandState\",\n\t\t\t\t\"queryCommandValue\", \"execCommand\"];\n\t\t\tfor(var i = 0; i < funcs.length; i++){\n\t\t\t\tdojo.event.connect(\"around\", this, funcs[i], this, \"_normalizeCommand\");\n\t\t\t}\n\t\t\t\n\t\t\t\/\/ backwards compatibility, needs to be removed\n\t\t\tdojo.event.connect(this, \"onKeyPressed\", this, \"afterKeyPress\");\n\t\t\tdojo.event.connect(this, \"onKeyPress\", this, \"keyPress\");\n\t\t\tdojo.event.connect(this, \"onKeyDown\", this, \"keyDown\");\n\t\t\tdojo.event.connect(this, \"onKeyUp\", this, \"keyUp\");\n\n\t\t\t\/\/ add default some key handlers\t\t\n\t\t\tvar ctrl = this.KEY_CTRL;\n\t\t\tvar exec = function (cmd, arg) {\n\t\t\t\treturn arguments.length == 1 ? function () { this.execCommand(cmd); } :\n\t\t\t\t\tfunction () { this.execCommand(cmd, arg); }","this":"dojo.widget.HtmlWidget"}}},"isSignificantNode":{"_":{"meta":{"summary":"","parameters":{"element":{"type":""}},"src":"\t\t\t\t\t&& dojo.html.getStyle(element, \"display\") != \"none\" \n\t\t\t\t\t&& !dojo.html.isPositionAbsolute(element);"}}},"this.iframe.onload":{"_":{"meta":{"summary":"","src":"\t\t\t\t\tsetTimeout(ifrFunc, 250);"}}},"isSupportedBy":{"_":{"meta":{"summary":"","parameters":{"browsers":{"type":""}},"src":"\t\t\t\treturn {\n\t\t\t\t\tie: Boolean(browsers & ie),\n\t\t\t\t\tmozilla: Boolean(browsers & mozilla),\n\t\t\t\t\tsafari: Boolean(browsers & safari),\n\t\t\t\t\tsafari420: Boolean(browsers & safari420),\n\t\t\t\t\topera: Boolean(browsers & opera)\n\t\t\t\t}"}}}}}},"dojo.widget.Rounded":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.ContentPane","dojo.html.style","dojo.html.display","dojo.gfx.color"]},"methods":{"dojo.widget.Rounded":{"_":{"meta":{"summary":"","inherits":["dojo.widget.ContentPane"],"this_inherits":["dojo.widget.ContentPane"]}}}}}},"dojo.widget.Select":{"meta":{"requires":{"common":["dojo.widget.ComboBox","dojo.widget.*","dojo.widget.html.stabile"]},"methods":{"dojo.widget.Select":{"_":{"meta":{"summary":"","inherits":["dojo.widget.ComboBox"],"this_inherits":["dojo.widget.ComboBox"],"protovariables":{"forceValidOption":""}}}},"dojo.widget.Select.setValue":{"_":{"meta":{"summary":"","parameters":{"value":{"type":""}},"src":"\t\t\tthis.comboBoxValue.value = value;\n\t\t\tdojo.widget.html.stabile.setState(this.widgetId, this.getState(), true);\n\t\t\tthis.onValueChanged(value);","this":"dojo.widget.ComboBox"}}},"dojo.widget.ComboBox":{"_":{"meta":{"this_variables":["comboBoxValue.value","comboBoxSelectionValue.value","textInputNode.value"]}}},"dojo.widget.Select.setLabel":{"_":{"meta":{"summary":"","parameters":{"value":{"type":""}},"src":"\t\t\tif (this.textInputNode.value != value) { \/\/ prevent mucking up of selection\n\t\t\t\tthis.textInputNode.value = value;\n\t\t\t}","this":"dojo.widget.ComboBox"}}},"dojo.widget.Select.getLabel":{"_":{"meta":{"summary":"","src":"\t\t\treturn this.comboBoxSelectionValue.value;","this":"dojo.widget.ComboBox"}}},"dojo.widget.Select.getState":{"_":{"meta":{"summary":"","src":"\t\t\treturn {\n\t\t\t\tvalue: this.getValue(),\n\t\t\t\tlabel: this.getLabel()\n\t\t\t};","this":"dojo.widget.ComboBox"}}},"dojo.widget.Select.value":{"_":{"meta":{"summary":"","src":"\t\t\treturn {\n\t\t\t\tvalue: this.getValue(),\n\t\t\t\tlabel: this.getLabel()\n\t\t\t};","this":"dojo.widget.ComboBox"}}},"dojo.widget.Select.label":{"_":{"meta":{"summary":"","src":"\t\t\treturn {\n\t\t\t\tvalue: this.getValue(),\n\t\t\t\tlabel: this.getLabel()\n\t\t\t};","this":"dojo.widget.ComboBox"}}},"dojo.widget.Select.onKeyUp":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tthis.setLabel(this.textInputNode.value);","this":"dojo.widget.ComboBox"}}},"dojo.widget.Select.setState":{"_":{"meta":{"summary":"","parameters":{"state":{"type":""}},"src":"\t\t\tthis.setValue(state.value);\n\t\t\tthis.setLabel(state.label);","this":"dojo.widget.ComboBox"}}},"dojo.widget.Select.setAllValues":{"_":{"meta":{"summary":"","parameters":{"value1":{"type":""},"value2":{"type":""}},"src":"\t\t\tthis.setValue(value2);\n\t\t\tthis.setLabel(value1);","this":"dojo.widget.ComboBox"}}}}}},"dojo.widget.Show":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.HtmlWidget","dojo.uri.Uri","dojo.event.*","dojo.animation.Animation","dojo.math.curves","dojo.lang.common","dojo.lang.func"]},"methods":{"dojo.widget.Show":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}}}}},"dojo.widget.ShowAction":{"meta":{"requires":{"common":["dojo.widget.*"]},"methods":{"dojo.widget.ShowAction":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}}}}},"dojo.widget.ShowSlide":{"meta":{"requires":{"common":["dojo.widget.*","dojo.lang.common","dojo.widget.HtmlWidget","dojo.lfx.html","dojo.html.display","dojo.html.layout","dojo.animation.Animation","dojo.gfx.color"]},"methods":{"dojo.widget.ShowSlide":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}}}}},"dojo.widget.SlideShow":{"meta":{"requires":{"common":["dojo.event.*","dojo.widget.*","dojo.lfx.*","dojo.html.display"]},"methods":{"dojo.widget.SlideShow":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"],"protovariables":{"templatePath":"","templateCssPath":"","imgUrls":"","imgUrlBase":"","urlsIdx":"","transitionInterval":"","imgWidth":"","imgHeight":"","background":"","foreground":"","stopped":"","fadeAnim":"","imagesContainer":"","startStopButton":"","controlsContainer":"","img1":"","img2":"","preventCache":""}}}},"dojo.widget.SlideShow.delay":{"_":{"meta":{"summary":"","src":"\t\t\t\tsrcObj: this[this.background],\n\t\t\t\tsrcFunc: \"onload\",\n\t\t\t\tadviceObj: this,\n\t\t\t\tadviceFunc: \"backgroundImageLoaded\",\n\t\t\t\tonce: true, \/\/ make sure we only ever hear about it once\n\t\t\t\tdelay: this.delay\n\t\t\t});\n\t\t\tdojo.html.setOpacity(this[this.background], 1.0);\n\t\t\tthis[this.background].src = this.imgUrlBase+this.imgUrls[this.urlsIdx++];\n\t\t\tif(this.urlsIdx>(this.imgUrls.length-1)){\n\t\t\t\tthis.urlsIdx = 0;\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.HtmlWidget":{"_":{"meta":{"this_variables":["urlsIdx","preventCache","img2.src","img1.src","stopped","startStopButton.value","fadeAnim","foreground","background","urlsIdx","urlsIdx","urlsIdx","urlsIdx","urlsIdx","urlsIdx"]}}},"dojo.widget.SlideShow.fillInTemplate":{"_":{"meta":{"summary":"","src":"\t\t\t\tthis.preventCache = true;\n\t\t\t}\n\t\t\tdojo.html.setOpacity(this.img1, 0.9999);\n\t\t\tdojo.html.setOpacity(this.img2, 0.9999);\n\t\t\twith(this.imagesContainer.style){\n\t\t\t\twidth = this.imgWidth+\"px\";\n\t\t\t\theight = this.imgHeight+\"px\";\n\t\t\t}\n\t\t\twith(this.img1.style){\n\t\t\t\twidth = this.imgWidth+\"px\";\n\t\t\t\theight = this.imgHeight+\"px\";\n\t\t\t}\n\t\t\twith(this.img2.style){\n\t\t\t\twidth = this.imgWidth+\"px\";\n\t\t\t\theight = this.imgHeight+\"px\";\n\t\t\t}\n\t\t\tif(this.imgUrls.length>1){\n\t\t\t\tthis.img2.src = this.imgUrlBase+this.imgUrls[this.urlsIdx++] + this.getUrlSuffix();\n\t\t\t\tthis.endTransition();\n\t\t\t}else{\n\t\t\t\tthis.img1.src = this.imgUrlBase+this.imgUrls[this.urlsIdx++] + this.getUrlSuffix();\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.SlideShow.getUrlSuffix":{"_":{"meta":{"summary":"","src":"\t\t\tif(this.preventCache) {\n\t\t\t\treturn \"?ts=\" + (new Date()).getTime();\n\t\t\t} else {\n\t\t\t\treturn \"\";\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.SlideShow.togglePaused":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.debug(\"pause\");\n\t\t\tif(this.stopped){\n\t\t\t\tthis.stopped = false;\n\t\t\t\tthis.backgroundImageLoaded();\n\t\t\t\tthis.startStopButton.value= \"pause\";\n\t\t\t}else{\n\t\t\t\tthis.stopped = true;\n\t\t\t\tthis.startStopButton.value= \"play\";\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.SlideShow.backgroundImageLoaded":{"_":{"meta":{"summary":"","src":"\t\t\t\/\/ actually start the fadeOut effect\n\t\t\t\/\/ NOTE: if we wanted to use other transition types, we'd set them up\n\t\t\t\/\/ \t\t here as well\n\t\t\tif(this.fadeAnim) {\n\t\t\t\tthis.fadeAnim.stop();\n\t\t\t}\n\t\t\tthis.fadeAnim = dojo.lfx.fadeOut(this[this.foreground], \n\t\t\t\tthis.transitionInterval, null);\n\t\t\tdojo.event.connect(this.fadeAnim,\"onEnd\",this,\"endTransition\");\n\t\t\tthis.fadeAnim.play();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.SlideShow.endTransition":{"_":{"meta":{"summary":"","src":"\t\t\twith(this[this.foreground].style){ zIndex = parseInt(zIndex)-1; }\n\n\t\t\t\/\/ fg\/bg book-keeping\n\t\t\tvar tmp = this.foreground;\n\t\t\tthis.foreground = this.background;\n\t\t\tthis.background = tmp;\n\t\t\t\/\/ keep on truckin\n\t\t\tthis.loadNextImage();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.SlideShow.loadNextImage":{"_":{"meta":{"summary":"","src":"\t\t\t\tsrcObj: this[this.background],\n\t\t\t\tsrcFunc: \"onload\",\n\t\t\t\tadviceObj: this,\n\t\t\t\tadviceFunc: \"backgroundImageLoaded\",\n\t\t\t\tonce: true, \/\/ make sure we only ever hear about it once\n\t\t\t\tdelay: this.delay\n\t\t\t});\n\t\t\tdojo.html.setOpacity(this[this.background], 1.0);\n\t\t\tthis[this.background].src = this.imgUrlBase+this.imgUrls[this.urlsIdx++];\n\t\t\tif(this.urlsIdx>(this.imgUrls.length-1)){\n\t\t\t\tthis.urlsIdx = 0;\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.SlideShow.srcObj":{"_":{"meta":{"summary":"","src":"\t\t\t\tsrcObj: this[this.background],\n\t\t\t\tsrcFunc: \"onload\",\n\t\t\t\tadviceObj: this,\n\t\t\t\tadviceFunc: \"backgroundImageLoaded\",\n\t\t\t\tonce: true, \/\/ make sure we only ever hear about it once\n\t\t\t\tdelay: this.delay\n\t\t\t});\n\t\t\tdojo.html.setOpacity(this[this.background], 1.0);\n\t\t\tthis[this.background].src = this.imgUrlBase+this.imgUrls[this.urlsIdx++];\n\t\t\tif(this.urlsIdx>(this.imgUrls.length-1)){\n\t\t\t\tthis.urlsIdx = 0;\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.SlideShow.srcFunc":{"_":{"meta":{"summary":"","src":"\t\t\t\tsrcObj: this[this.background],\n\t\t\t\tsrcFunc: \"onload\",\n\t\t\t\tadviceObj: this,\n\t\t\t\tadviceFunc: \"backgroundImageLoaded\",\n\t\t\t\tonce: true, \/\/ make sure we only ever hear about it once\n\t\t\t\tdelay: this.delay\n\t\t\t});\n\t\t\tdojo.html.setOpacity(this[this.background], 1.0);\n\t\t\tthis[this.background].src = this.imgUrlBase+this.imgUrls[this.urlsIdx++];\n\t\t\tif(this.urlsIdx>(this.imgUrls.length-1)){\n\t\t\t\tthis.urlsIdx = 0;\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.SlideShow.adviceObj":{"_":{"meta":{"summary":"","src":"\t\t\t\tsrcObj: this[this.background],\n\t\t\t\tsrcFunc: \"onload\",\n\t\t\t\tadviceObj: this,\n\t\t\t\tadviceFunc: \"backgroundImageLoaded\",\n\t\t\t\tonce: true, \/\/ make sure we only ever hear about it once\n\t\t\t\tdelay: this.delay\n\t\t\t});\n\t\t\tdojo.html.setOpacity(this[this.background], 1.0);\n\t\t\tthis[this.background].src = this.imgUrlBase+this.imgUrls[this.urlsIdx++];\n\t\t\tif(this.urlsIdx>(this.imgUrls.length-1)){\n\t\t\t\tthis.urlsIdx = 0;\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.SlideShow.adviceFunc":{"_":{"meta":{"summary":"","src":"\t\t\t\tsrcObj: this[this.background],\n\t\t\t\tsrcFunc: \"onload\",\n\t\t\t\tadviceObj: this,\n\t\t\t\tadviceFunc: \"backgroundImageLoaded\",\n\t\t\t\tonce: true, \/\/ make sure we only ever hear about it once\n\t\t\t\tdelay: this.delay\n\t\t\t});\n\t\t\tdojo.html.setOpacity(this[this.background], 1.0);\n\t\t\tthis[this.background].src = this.imgUrlBase+this.imgUrls[this.urlsIdx++];\n\t\t\tif(this.urlsIdx>(this.imgUrls.length-1)){\n\t\t\t\tthis.urlsIdx = 0;\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.SlideShow.once":{"_":{"meta":{"summary":"","src":"\t\t\t\tsrcObj: this[this.background],\n\t\t\t\tsrcFunc: \"onload\",\n\t\t\t\tadviceObj: this,\n\t\t\t\tadviceFunc: \"backgroundImageLoaded\",\n\t\t\t\tonce: true, \/\/ make sure we only ever hear about it once\n\t\t\t\tdelay: this.delay\n\t\t\t});\n\t\t\tdojo.html.setOpacity(this[this.background], 1.0);\n\t\t\tthis[this.background].src = this.imgUrlBase+this.imgUrls[this.urlsIdx++];\n\t\t\tif(this.urlsIdx>(this.imgUrls.length-1)){\n\t\t\t\tthis.urlsIdx = 0;\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}}}}},"dojo.widget.Slider":{"meta":{"requires":{"common":["dojo.event.*","dojo.dnd.*","dojo.dnd.HtmlDragMove","dojo.widget.*","dojo.html.layout"]},"methods":{"dojo.widget._SliderDragMoveSource":{"_":{"meta":{"summary":"","inherits":["dojo.dnd.HtmlDragMoveSource"],"this_inherits":["dojo.dnd.HtmlDragMoveSource"]}}},"dojo.widget._SliderDragMoveObject":{"_":{"meta":{"summary":"","inherits":["dojo.dnd.HtmlDragMoveObject"],"this_inherits":["dojo.dnd.HtmlDragMoveObject"]}}},"dojo.widget.Slider":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"],"protovariables":{"minimumX":"","minimumY":"","maximumX":"","maximumY":"","snapValuesX":"","snapValuesY":"","_snapToGrid":"","isEnableX":"","isEnableY":"","_valueSizeX":"","_valueSizeY":"","_minX":"","_minY":"","_constraintWidth":"","_constraintHeight":"","_clipLeft":"","_clipRight":"","_clipTop":"","_clipBottom":"","_clipXdelta":"","_clipYdelta":"","initialValueX":"","initialValueY":"","flipX":"","flipY":"","clickSelect":"","activeDrag":"","templateCssPath":"","templatePath":"","sliderHandleNode":"","constrainingContainerNode":"","sliderBackgroundNode":"","progressBackgroundNode":"","topButtonNode":"","leftButtonNode":"","rightButtonNode":"","bottomButtonNode":"","focusNode":"","isDragInProgress":"","widgetStyle":"","buttonStyleX":"","buttonStyleY":"","bottomButtonSrc":"","topButtonSrc":"","leftButtonSrc":"","rightButtonSrc":"","backgroundSrc":"","progressBackgroundSrc":"","backgroundSize":"","backgroundStyle":"","handleStyle":"","handleSrc":"","showButtons":"","_eventCount":"","_typamaticTimer":"","_typamaticFunction":"","defaultTimeout":"","timeoutChangeRate":"","_currentTimeout":""},"this_variables":["initialValueX","minimumX","maximumX","snapValuesX","buttonStyleX","flipX","initialValueY","minimumY","maximumY","snapValuesY","buttonStyleY","flipY"]}}},"dojo.widget.Slider._handleKeyEvents":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar k = dojo.event.browser.keys;\n\t\t\tvar keyCode = evt.keyCode;\n\n\t\t\tswitch(keyCode){\n\t\t\t\tcase k.KEY_LEFT_ARROW:\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\tthis._leftButtonPressed(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_RIGHT_ARROW:\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\tthis._rightButtonPressed(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_DOWN_ARROW:\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\tthis._bottomButtonPressed(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_UP_ARROW:\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\tthis._topButtonPressed(evt);\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._eventCount++;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider.k.KEY_LEFT_ARROW":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif(typeof evt == \"object\" && evt != null && typeof evt.keyCode != \"undefined\" && evt.keyCode != null){\n\t\t\t\tvar keyCode = evt.keyCode;\n\t\t\t\tvar k = dojo.event.browser.keys;\n\n\t\t\t\tswitch(keyCode){\n\t\t\t\t\tcase k.KEY_LEFT_ARROW:\n\t\t\t\t\tcase k.KEY_RIGHT_ARROW:\n\t\t\t\t\tcase k.KEY_DOWN_ARROW:\n\t\t\t\t\tcase k.KEY_UP_ARROW:\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._releaseButton(this.topButtonNode);\n\t\t\tthis._releaseButton(this.bottomButtonNode);\n\t\t\tthis._releaseButton(this.leftButtonNode);\n\t\t\tthis._releaseButton(this.rightButtonNode);\n\t\t\tthis._eventCount++;\n\t\t\tif(this._typamaticTimer != null){\n\t\t\t\tclearTimeout(this._typamaticTimer);\n\t\t\t}\n\t\t\tthis._typamaticTimer = null;\n\t\t\tthis._currentTimeout = this.defaultTimeout;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.HtmlWidget":{"_":{"meta":{"this_variables":["_typamaticTimer","_currentTimeout","_typamaticTimer","_currentTimeout","_typamaticTimer","_currentTimeout","_typamaticTimer","_currentTimeout","_typamaticTimer","_currentTimeout","_typamaticNode","_typamaticTimer","_currentTimeout","topBorderNode.style.padding","bottomBorderNode.style.padding","topBorderNode.style.paddingBottom","bottomBorderNode.style.paddingTop","rightBorderNode.style.paddingRight","leftBorderNode.style.paddingLeft","domNode.style.padding","topBorderNode.style.borderStyle","rightBorderNode.style.borderStyle","bottomBorderNode.style.borderStyle","leftBorderNode.style.borderStyle","topBorderNode.style.borderColor","rightBorderNode.style.borderColor","bottomBorderNode.style.borderColor","leftBorderNode.style.borderColor","topBorderNode.style.borderWidth","bottomBorderNode.style.borderWidth","topBorderNode.style.borderBottomWidth","bottomBorderNode.style.borderTopWidth","rightBorderNode.style.borderRightWidth","leftBorderNode.style.borderLeftWidth","domNode.style.borderWidth","_handleMove","rightButtonNode.style.width","rightButtonNode.style.visibility","leftButtonNode.style.width","leftButtonNode.style.visibility","bottomButtonNode.style.width","bottomButtonNode.style.visibility","topButtonNode.style.width","topButtonNode.style.visibility","sliderHandleNode.style.left","_clipLeft","_clipRight","progressBackgroundNode.style.clip","_constraintWidth","_clipLeft","_clipXdelta","_clipTop","_clipBottom","snapValuesX","_valueSizeX","sliderHandleNode.style.top","_clipTop","_clipBottom","progressBackgroundNode.style.clip","_constraintHeight","_clipTop","_clipYdelta","_clipLeft","_clipRight","snapValuesY","_valueSizeY"]}}},"dojo.widget.Slider.k.KEY_RIGHT_ARROW":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif(typeof evt == \"object\" && evt != null && typeof evt.keyCode != \"undefined\" && evt.keyCode != null){\n\t\t\t\tvar keyCode = evt.keyCode;\n\t\t\t\tvar k = dojo.event.browser.keys;\n\n\t\t\t\tswitch(keyCode){\n\t\t\t\t\tcase k.KEY_LEFT_ARROW:\n\t\t\t\t\tcase k.KEY_RIGHT_ARROW:\n\t\t\t\t\tcase k.KEY_DOWN_ARROW:\n\t\t\t\t\tcase k.KEY_UP_ARROW:\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._releaseButton(this.topButtonNode);\n\t\t\tthis._releaseButton(this.bottomButtonNode);\n\t\t\tthis._releaseButton(this.leftButtonNode);\n\t\t\tthis._releaseButton(this.rightButtonNode);\n\t\t\tthis._eventCount++;\n\t\t\tif(this._typamaticTimer != null){\n\t\t\t\tclearTimeout(this._typamaticTimer);\n\t\t\t}\n\t\t\tthis._typamaticTimer = null;\n\t\t\tthis._currentTimeout = this.defaultTimeout;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider.k.KEY_DOWN_ARROW":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif(typeof evt == \"object\" && evt != null && typeof evt.keyCode != \"undefined\" && evt.keyCode != null){\n\t\t\t\tvar keyCode = evt.keyCode;\n\t\t\t\tvar k = dojo.event.browser.keys;\n\n\t\t\t\tswitch(keyCode){\n\t\t\t\t\tcase k.KEY_LEFT_ARROW:\n\t\t\t\t\tcase k.KEY_RIGHT_ARROW:\n\t\t\t\t\tcase k.KEY_DOWN_ARROW:\n\t\t\t\t\tcase k.KEY_UP_ARROW:\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._releaseButton(this.topButtonNode);\n\t\t\tthis._releaseButton(this.bottomButtonNode);\n\t\t\tthis._releaseButton(this.leftButtonNode);\n\t\t\tthis._releaseButton(this.rightButtonNode);\n\t\t\tthis._eventCount++;\n\t\t\tif(this._typamaticTimer != null){\n\t\t\t\tclearTimeout(this._typamaticTimer);\n\t\t\t}\n\t\t\tthis._typamaticTimer = null;\n\t\t\tthis._currentTimeout = this.defaultTimeout;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider.k.KEY_UP_ARROW":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif(typeof evt == \"object\" && evt != null && typeof evt.keyCode != \"undefined\" && evt.keyCode != null){\n\t\t\t\tvar keyCode = evt.keyCode;\n\t\t\t\tvar k = dojo.event.browser.keys;\n\n\t\t\t\tswitch(keyCode){\n\t\t\t\t\tcase k.KEY_LEFT_ARROW:\n\t\t\t\t\tcase k.KEY_RIGHT_ARROW:\n\t\t\t\t\tcase k.KEY_DOWN_ARROW:\n\t\t\t\t\tcase k.KEY_UP_ARROW:\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._releaseButton(this.topButtonNode);\n\t\t\tthis._releaseButton(this.bottomButtonNode);\n\t\t\tthis._releaseButton(this.leftButtonNode);\n\t\t\tthis._releaseButton(this.rightButtonNode);\n\t\t\tthis._eventCount++;\n\t\t\tif(this._typamaticTimer != null){\n\t\t\t\tclearTimeout(this._typamaticTimer);\n\t\t\t}\n\t\t\tthis._typamaticTimer = null;\n\t\t\tthis._currentTimeout = this.defaultTimeout;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider._onKeyDown":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\t\tthis._handleKeyEvents(evt);\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider._onKeyPress":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif(document.createEvent){            \n\t\t\t\tthis._handleKeyEvents(evt);\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider._pressButton":{"_":{"meta":{"summary":"","parameters":{"buttonNode":{"type":""}},"src":"\t\t\tbuttonNode.className = buttonNode.className.replace(\"Outset\",\"Inset\");","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider._releaseButton":{"_":{"meta":{"summary":"","parameters":{"buttonNode":{"type":""}},"src":"\t\t\tbuttonNode.className = buttonNode.className.replace(\"Inset\",\"Outset\");","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider._buttonPressed":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""},"buttonNode":{"type":""}},"src":"\t\t\tthis._setFocus();\n\t\t\tif(typeof evt == \"object\"){\n\t\t\t\tif(this._typamaticTimer != null){\n\t\t\t\t\tif(this._typamaticNode == buttonNode){\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tclearTimeout(this._typamaticTimer);\n\t\t\t\t}\n\t\t\t\tthis._buttonReleased(null);\n\t\t\t\tthis._eventCount++;\n\t\t\t\tthis._typamaticTimer = null;\n\t\t\t\tthis._currentTimeout = this.defaultTimeout;\n\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t}else if (evt != this._eventCount){\n\t\t\t\tthis._buttonReleased(null);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (buttonNode == this.leftButtonNode && this.isEnableX) {\n\t\t\t\tthis._snapX(dojo.html.getPixelValue (this.sliderHandleNode,\"left\") - this._valueSizeX, this._handleMove );\n\t\t\t}\n\t\t\telse if (buttonNode == this.rightButtonNode && this.isEnableX) {\n\t\t\t\tthis._snapX(dojo.html.getPixelValue (this.sliderHandleNode,\"left\") + this._valueSizeX, this._handleMove );\n\t\t\t}\n\t\t\telse if (buttonNode == this.topButtonNode && this.isEnableY) {\n\t\t\t\tthis._snapY(dojo.html.getPixelValue (this.sliderHandleNode,\"top\") - this._valueSizeY, this._handleMove );\n\t\t\t}\n\t\t\telse if (buttonNode == this.bottomButtonNode && this.isEnableY) {\n\t\t\t\tthis._snapY(dojo.html.getPixelValue (this.sliderHandleNode,\"top\") + this._valueSizeY, this._handleMove );\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis._pressButton(buttonNode);\n\t\t\tthis.notifyListeners();\n\t\t\tthis._typamaticNode = buttonNode;\n\t\t\tthis._typamaticTimer = dojo.lang.setTimeout(this, \"_buttonPressed\", this._currentTimeout, this._eventCount, buttonNode);\n\t\t\tthis._currentTimeout = Math.round(this._currentTimeout * this.timeoutChangeRate);\n\t\t\treturn false;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider._bottomButtonPressed":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\treturn this._buttonPressed(evt,this.bottomButtonNode);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider._bottomButtonDoubleClicked":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar rc = this._bottomButtonPressed(evt);\n\t\t\tdojo.lang.setTimeout( this, \"_buttonReleased\", 50, null);\n\t\t\treturn rc;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider._topButtonPressed":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\treturn this._buttonPressed(evt,this.topButtonNode);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider._topButtonDoubleClicked":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar rc = this._topButtonPressed(evt);\n\t\t\tdojo.lang.setTimeout( this, \"_buttonReleased\", 50, null);\n\t\t\treturn rc;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider._leftButtonPressed":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\treturn this._buttonPressed(evt,this.leftButtonNode);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider._leftButtonDoubleClicked":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar rc = this._leftButtonPressed(evt);\n\t\t\tdojo.lang.setTimeout( this, \"_buttonReleased\", 50, null);\n\t\t\treturn rc;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider._rightButtonPressed":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\treturn this._buttonPressed(evt,this.rightButtonNode);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider._rightButtonDoubleClicked":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar rc = this._rightButtonPressed(evt);\n\t\t\tdojo.lang.setTimeout( this, \"_buttonReleased\", 50, null);\n\t\t\treturn rc;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider._buttonReleased":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif(typeof evt == \"object\" && evt != null && typeof evt.keyCode != \"undefined\" && evt.keyCode != null){\n\t\t\t\tvar keyCode = evt.keyCode;\n\t\t\t\tvar k = dojo.event.browser.keys;\n\n\t\t\t\tswitch(keyCode){\n\t\t\t\t\tcase k.KEY_LEFT_ARROW:\n\t\t\t\t\tcase k.KEY_RIGHT_ARROW:\n\t\t\t\t\tcase k.KEY_DOWN_ARROW:\n\t\t\t\t\tcase k.KEY_UP_ARROW:\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._releaseButton(this.topButtonNode);\n\t\t\tthis._releaseButton(this.bottomButtonNode);\n\t\t\tthis._releaseButton(this.leftButtonNode);\n\t\t\tthis._releaseButton(this.rightButtonNode);\n\t\t\tthis._eventCount++;\n\t\t\tif(this._typamaticTimer != null){\n\t\t\t\tclearTimeout(this._typamaticTimer);\n\t\t\t}\n\t\t\tthis._typamaticTimer = null;\n\t\t\tthis._currentTimeout = this.defaultTimeout;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider._mouseWheeled":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar scrollAmount = 0;\n\t\t\tif(typeof evt.wheelDelta == 'number'){ \/\/ IE\n\t\t\t\tscrollAmount = evt.wheelDelta;\n\t\t\t}else if (typeof evt.detail == 'number'){ \/\/ Mozilla+Firefox\n\t\t\t\tscrollAmount = -evt.detail;\n\t\t\t}\n\t\t\tif (this.isEnableY) {\n\t\t\t\tif(scrollAmount > 0){\n\t\t\t\t\tthis._topButtonPressed(evt);\n\t\t\t\t\tthis._buttonReleased(evt);\n\t\t\t\t}else if (scrollAmount < 0){\n\t\t\t\t\tthis._bottomButtonPressed(evt);\n\t\t\t\t\tthis._buttonReleased(evt);\n\t\t\t\t}\n\t\t\t} else if (this.isEnableX) {\n\t\t\t\tif(scrollAmount > 0){\n\t\t\t\t\tthis._rightButtonPressed(evt);\n\t\t\t\t\tthis._buttonReleased(evt);\n\t\t\t\t}else if (scrollAmount < 0){\n\t\t\t\t\tthis._leftButtonPressed(evt);\n\t\t\t\t\tthis._buttonReleased(evt);\n\t\t\t\t}\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider._discardEvent":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tdojo.event.browser.stopEvent(evt);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider._setFocus":{"_":{"meta":{"summary":"","src":"\t\t\tif (this.focusNode.focus) {\n\t\t\t\tthis.focusNode.focus();\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider._removeComments":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""}},"src":"\t\t\tvar children = parent.childNodes;\n\t\t\tfor (var i = children.length-1; i >= 0; i--) {\n\t\t\t\tvar aChild = children.item(i);\n\t\t\t\tif (aChild  != null) {\n\t\t\t\t\tswitch(aChild.nodeType){\n\t\t\t\t\t\tcase 1: \/\/ recurse\n\t\t\t\t\t\t\tthis._removeComments(aChild);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 8: \/\/ comment\n\t\t\t\t\t\t\tparent.removeChild(aChild);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider.1":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""}},"src":"\t\t\tvar children = parent.childNodes;\n\t\t\tfor (var i = children.length-1; i >= 0; i--) {\n\t\t\t\tvar aChild = children.item(i);\n\t\t\t\tif (aChild  != null) {\n\t\t\t\t\tswitch(aChild.nodeType){\n\t\t\t\t\t\tcase 1: \/\/ recurse\n\t\t\t\t\t\t\tthis._removeComments(aChild);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 8: \/\/ comment\n\t\t\t\t\t\t\tparent.removeChild(aChild);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider.8":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""}},"src":"\t\t\tvar children = parent.childNodes;\n\t\t\tfor (var i = children.length-1; i >= 0; i--) {\n\t\t\t\tvar aChild = children.item(i);\n\t\t\t\tif (aChild  != null) {\n\t\t\t\t\tswitch(aChild.nodeType){\n\t\t\t\t\t\tcase 1: \/\/ recurse\n\t\t\t\t\t\t\tthis._removeComments(aChild);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 8: \/\/ comment\n\t\t\t\t\t\t\tparent.removeChild(aChild);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider.fillInTemplate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\t\tthis._removeComments(this.domNode);\n\t\t\tvar source = this.getFragNodeRef(frag);\n\t\t\tdojo.html.copyStyle(this.domNode, source);\n\t\t\t\/\/ the user's style for the widget might include border and padding\n\t\t\t\/\/ unfortunately, border isn't supported for inline elements\n\t\t\t\/\/ so I get to fake everyone out by setting the border and padding\n\t\t\t\/\/ of the outer table cells\n\t\t\tvar padding = this.domNode.style.padding;\n\t\t\tif (dojo.lang.isString(padding) && padding != \"\" && padding != \"0px\" && padding != \"0px 0px 0px 0px\") {\n\t\t\t\tthis.topBorderNode.style.padding = \n\t\t\t\t\tthis.bottomBorderNode.style.padding = padding;\n\t\t\t\tthis.topBorderNode.style.paddingBottom = \"0px\";\n\t\t\t\tthis.bottomBorderNode.style.paddingTop = \"0px\";\n\t\t\t\tthis.rightBorderNode.style.paddingRight = this.domNode.style.paddingRight;\n\t\t\t\tthis.leftBorderNode.style.paddingLeft= this.domNode.style.paddingLeft;\n\t\t\t\tthis.domNode.style.padding = \"0px 0px 0px 0px\";\n\t\t\t}\n\t\t\tvar borderWidth = this.domNode.style.borderWidth;\n\t\t\tif (dojo.lang.isString(borderWidth) && borderWidth != \"\" && borderWidth != \"0px\" && borderWidth != \"0px 0px 0px 0px\") {\n\t\t\t\tthis.topBorderNode.style.borderStyle = \n\t\t\t\t\tthis.rightBorderNode.style.borderStyle = \n\t\t\t\t\tthis.bottomBorderNode.style.borderStyle = \n\t\t\t\t\tthis.leftBorderNode.style.borderStyle = \n\t\t\t\t\t\tthis.domNode.style.borderStyle;\n\t\t\t\tthis.topBorderNode.style.borderColor = \n\t\t\t\t\tthis.rightBorderNode.style.borderColor = \n\t\t\t\t\tthis.bottomBorderNode.style.borderColor = \n\t\t\t\t\tthis.leftBorderNode.style.borderColor = \n\t\t\t\t\t\tthis.domNode.style.borderColor;\n\t\t\t\tthis.topBorderNode.style.borderWidth = \n\t\t\t\t\tthis.bottomBorderNode.style.borderWidth = borderWidth;\n\t\t\t\tthis.topBorderNode.style.borderBottomWidth = \"0px\";\n\t\t\t\tthis.bottomBorderNode.style.borderTopWidth = \"0px\";\n\t\t\t\tthis.rightBorderNode.style.borderRightWidth = this.domNode.style.borderRightWidth;\n\t\t\t\tthis.leftBorderNode.style.borderLeftWidth = this.domNode.style.borderLeftWidth;\n\t\t\t\tthis.domNode.style.borderWidth = \"0px 0px 0px 0px\";\n\t\t\t}\n\n\t\t\t\/\/ dojo.debug (\"fillInTemplate - className = \" + this.domNode.className);\n\n\t\t\t\/\/ setup drag-n-drop for the sliderHandle\n\t\t\tthis._handleMove = new dojo.widget._SliderDragMoveSource (this.sliderHandleNode);\n\t\t\tthis._handleMove.setParent (this);\n\n\t\t\tif (this.clickSelect) {\n\t\t\t\tdojo.event.connect (this.constrainingContainerNode, \"onmousedown\", this, \"onClick\");\n\t\t\t} \n\n\t\t\tif (this.isEnableX) {\n\t\t\t\tthis.setValueX (!isNaN(this.initialValueX) ? this.initialValueX : (!isNaN(this.minimumX) ? this.minimumX : 0));\n\t\t\t}\n\t\t\tif (!this.isEnableX || !this.showButtons) {\n\t\t\t\tthis.rightButtonNode.style.width = \"1px\"; \/\/ allow the border to show\n\t\t\t\tthis.rightButtonNode.style.visibility = \"hidden\";\n\t\t\t\tthis.leftButtonNode.style.width = \"1px\"; \/\/ allow the border to show\n\t\t\t\tthis.leftButtonNode.style.visibility = \"hidden\";\n\t\t\t}\n\t\t\tif (this.isEnableY) {\n\t\t\t\tthis.setValueY (!isNaN(this.initialValueY) ? this.initialValueY : (!isNaN(this.minimumY) ? this.minimumY : 0));\n\t\t\t}\n\t\t\tif (!this.isEnableY || !this.showButtons) {\n\t\t\t\tthis.bottomButtonNode.style.width = \"1px\"; \/\/ allow the border to show\n\t\t\t\tthis.bottomButtonNode.style.visibility = \"hidden\";\n\t\t\t\tthis.topButtonNode.style.width = \"1px\"; \/\/ allow the border to show\n\t\t\t\tthis.topButtonNode.style.visibility = \"hidden\";\n\t\t\t}\n\t\t\tif(this.focusNode.addEventListener){\n\t\t\t\t\/\/ dojo.event.connect() doesn't seem to work with DOMMouseScroll\n\t\t\t\tthis.focusNode.addEventListener('DOMMouseScroll', dojo.lang.hitch(this, \"_mouseWheeled\"), false); \/\/ Mozilla + Firefox + Netscape\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider._snapX":{"_":{"meta":{"summary":"","parameters":{"x":{"type":""},"handleMove":{"type":""}},"src":"\t\t\tif (x < 0) { x = 0; }\n\t\t\telse if (x > this._constraintWidth) { x = this._constraintWidth; }\n\t\t\telse {\n\t\t\t\tvar selectedValue = Math.round (x \/ this._valueSizeX);\n\t\t\t\tx = Math.round (selectedValue * this._valueSizeX);\n\t\t\t}\n\t\t\tthis.sliderHandleNode.style.left = x + \"px\";\n\t\t\tif (this.flipX) {\n\t\t\t\tthis._clipLeft = x + this._clipXdelta;\n\t\t\t} else {\n\t\t\t\tthis._clipRight = x + this._clipXdelta;\n\t\t\t}\n\t\t\tthis.progressBackgroundNode.style.clip = \"rect(\"+this._clipTop+\"px,\"+this._clipRight+\"px,\"+this._clipBottom+\"px,\"+this._clipLeft+\"px)\";","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider._calc_valueSizeX":{"_":{"meta":{"summary":"","src":"\t\t\tvar constrainingCtrBox = dojo.html.getContentBox(this.constrainingContainerNode);\n\t\t\tvar sliderHandleBox = dojo.html.getContentBox(this.sliderHandleNode);\n\t\t\tif (constrainingCtrBox.width <= 0 || sliderHandleBox.width <= 0) { \n\t\t\t\treturn false; \n\t\t\t}\n\n\t\t\tthis._constraintWidth = constrainingCtrBox.width \n\t\t\t\t+ dojo.html.getPadding(this.constrainingContainerNode).width\n\t\t\t\t- sliderHandleBox.width;\n\n\t\t\tif (this.flipX) {\n\t\t\t\tthis._clipLeft = this._clipRight = constrainingCtrBox.width;\n\t\t\t} else {\n\t\t\t\tthis._clipLeft = this._clipRight = 0;\n\t\t\t}\n\t\t\tthis._clipXdelta = sliderHandleBox.width >> 1;\n\t\t\tif (!this.isEnableY) {\n\t\t\t\tthis._clipTop = 0;\n\t\t\t\tthis._clipBottom = constrainingCtrBox.height;\n\t\t\t}\n\n\t\t\tif (this._constraintWidth <= 0) { return false; }\n\t\t\tif (this.snapValuesX == 0) {\n\t\t\t\tthis.snapValuesX = this._constraintWidth + 1;\n\t\t\t}\n\n\t\t\tthis._valueSizeX = this._constraintWidth \/ (this.snapValuesX - 1);\n\t\t\treturn true;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider.setValueX":{"_":{"meta":{"summary":"","parameters":{"value":{"type":""}},"src":"\t\t\tif (0.0 == this._valueSizeX) {\n\t\t\t\tif (this._calc_valueSizeX () == false) {\n\t\t\t\t\tdojo.lang.setTimeout(this, \"setValueX\", 100, value);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (isNaN(value)) {\n\t\t\t\tvalue = 0;\n\t\t\t}\n\t\t\tif (value > this.maximumX) {\n\t\t\t\tvalue = this.maximumX;\n\t\t\t}\n\t\t\telse if (value < this.minimumX) {\n\t\t\t\tvalue = this.minimumX;\n\t\t\t}\n\t\t\tvar pixelPercent = (value-this.minimumX) \/ (this.maximumX-this.minimumX);\n\t\t\tif (this.flipX) {\n\t\t\t\tpixelPercent = 1.0 - pixelPercent;\n\t\t\t}\n\t\t\tthis._snapX (pixelPercent * this._constraintWidth, this._handleMove);\n\t\t\tthis.notifyListeners();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider.getValueX":{"_":{"meta":{"summary":"","src":"\t\t\tvar pixelPercent = dojo.html.getPixelValue (this.sliderHandleNode,\"left\") \/ this._constraintWidth;\n\t\t\tif (this.flipX) {\n\t\t\t\tpixelPercent = 1.0 - pixelPercent;\n\t\t\t}\n\t\t\treturn Math.round (pixelPercent * (this.snapValuesX-1)) * ((this.maximumX-this.minimumX) \/ (this.snapValuesX-1)) + this.minimumX;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider._snapY":{"_":{"meta":{"summary":"","parameters":{"y":{"type":""},"handleMove":{"type":""}},"src":"\t\t\tif (y < 0) { y = 0; }\n\t\t\telse if (y > this._constraintHeight) { y = this._constraintHeight; }\n\t\t\telse {\n\t\t\t\tvar selectedValue = Math.round (y \/ this._valueSizeY);\n\t\t\t\ty = Math.round (selectedValue * this._valueSizeY);\n\t\t\t}\n\t\t\tthis.sliderHandleNode.style.top = y + \"px\";\n\t\t\tif (this.flipY) {\n\t\t\t\tthis._clipTop = y + this._clipYdelta;\n\t\t\t} else {\n\t\t\t\tthis._clipBottom = y + this._clipYdelta;\n\t\t\t}\n\t\t\tthis.progressBackgroundNode.style.clip = \"rect(\"+this._clipTop+\"px,\"+this._clipRight+\"px,\"+this._clipBottom+\"px,\"+this._clipLeft+\"px)\";","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider._calc_valueSizeY":{"_":{"meta":{"summary":"","src":"\t\t\tvar constrainingCtrBox = dojo.html.getContentBox(this.constrainingContainerNode);\n\t\t\tvar sliderHandleBox = dojo.html.getContentBox(this.sliderHandleNode);\n\t\t\tif (constrainingCtrBox.height <= 0 || sliderHandleBox.height <= 0) { \n\t\t\t\treturn false; \n\t\t\t}\n\n\t\t\tthis._constraintHeight = constrainingCtrBox.height\n\t\t\t\t+ dojo.html.getPadding(this.constrainingContainerNode).height\n\t\t\t\t- sliderHandleBox.height;\n\n\t\t\tif (this.flipY) {\n\t\t\t\tthis._clipTop = this._clipBottom = constrainingCtrBox.height;\n\t\t\t} else {\n\t\t\t\tthis._clipTop = this._clipBottom = 0;\n\t\t\t}\n\t\t\tthis._clipYdelta = sliderHandleBox.height >> 1;\n\t\t\tif (!this.isEnableX) {\n\t\t\t\tthis._clipLeft = 0;\n\t\t\t\tthis._clipRight = constrainingCtrBox.width;\n\t\t\t}\n\n\t\t\tif (this._constraintHeight <= 0) { return false; }\n\t\t\tif (this.snapValuesY == 0) {\n\t\t\t\tthis.snapValuesY = this._constraintHeight + 1;\n\t\t\t}\n\n\t\t\tthis._valueSizeY = this._constraintHeight \/ (this.snapValuesY - 1);\n\t\t\treturn true;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider.setValueY":{"_":{"meta":{"summary":"","parameters":{"value":{"type":""}},"src":"\t\t\tif (0.0 == this._valueSizeY) {\n\t\t\t\tif (this._calc_valueSizeY () == false) {\n\t\t\t\t\tdojo.lang.setTimeout(this, \"setValueY\", 100, value);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (isNaN(value)) {\n\t\t\t\tvalue = 0;\n\t\t\t}\n\t\t\tif (value > this.maximumY) {\n\t\t\t\tvalue = this.maximumY;\n\t\t\t}\n\t\t\telse if (value < this.minimumY) {\n\t\t\t\tvalue = this.minimumY;\n\t\t\t}\n\t\t\tvar pixelPercent = (value-this.minimumY) \/ (this.maximumY-this.minimumY);\n\t\t\tif (this.flipY) {\n\t\t\t\tpixelPercent = 1.0 - pixelPercent;\n\t\t\t}\n\t\t\tthis._snapY (pixelPercent * this._constraintHeight, this._handleMove);\n\t\t\tthis.notifyListeners();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider.getValueY":{"_":{"meta":{"summary":"","src":"\t\t\tvar pixelPercent = dojo.html.getPixelValue (this.sliderHandleNode,\"top\") \/ this._constraintHeight;\n\t\t\tif (this.flipY) {\n\t\t\t\tpixelPercent = 1.0 - pixelPercent;\n\t\t\t}\n\t\t\treturn Math.round (pixelPercent * (this.snapValuesY-1)) * ((this.maximumY-this.minimumY) \/ (this.snapValuesY-1)) + this.minimumY;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider.onClick":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif (this.isDragInProgress) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar offset = dojo.html.getScroll().offset;\n\t\t\tvar parent = dojo.html.getAbsolutePosition(this.constrainingContainerNode, true);\n\t\t\tvar content = dojo.html.getContentBox(this._handleMove.domNode);\t\t\t\n\t\t\tif (this.isEnableX) {\n\t\t\t\tvar x = offset.x + evt.clientX - parent.x - (content.width >> 1);\n\t\t\t\tthis._snapX(x, this._handleMove);\n\t\t\t}\n\t\t\tif (this.isEnableY) {\n\t\t\t\tvar y = offset.y + evt.clientY - parent.y - (content.height >> 1);\n\t\t\t\tthis._snapY(y, this._handleMove);\n\t\t\t}\n\t\t\tthis.notifyListeners();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider.notifyListeners":{"_":{"meta":{"summary":"","src":"\t\t\tthis.onValueChanged(this.getValueX(), this.getValueY());","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Slider.onValueChanged":{"_":{"meta":{"summary":"","parameters":{"x":{"type":""},"y":{"type":""}},"src":"","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.SliderHorizontal":{"_":{"meta":{"summary":"","inherits":["dojo.widget.Slider"],"this_inherits":["dojo.widget.Slider"],"protovariables":{"widgetType":"","isEnableX":"","isEnableY":"","initialValue":"","snapValues":"","minimum":"","maximum":"","buttonStyle":"","backgroundSize":"","backgroundSrc":"","flip":""}}}},"dojo.widget.SliderHorizontal.postMixInProperties":{"_":{"meta":{"summary":"","src":"\t\t\tif (!isNaN(parseFloat(this.initialValue))) {\n\t\t\t\tthis.initialValueX = parseFloat(this.initialValue);\n\t\t\t}\n\t\t\tif (!isNaN(parseFloat(this.minimum))) {\n\t\t\t\tthis.minimumX = parseFloat(this.minimum);\n\t\t\t}\n\t\t\tif (!isNaN(parseFloat(this.maximum))) {\n\t\t\t\tthis.maximumX = parseFloat(this.maximum);\n\t\t\t}\n\t\t\tif (!isNaN(parseInt(this.snapValues))) {\n\t\t\t\tthis.snapValuesX = parseInt(this.snapValues);\n\t\t\t}\n\t\t\tif (dojo.lang.isString(this.buttonStyle) && this.buttonStyle != \"\") {\n\t\t\t\tthis.buttonStyleX = this.buttonStyle;\n\t\t\t}\n\t\t\tif (dojo.lang.isBoolean(this.flip)) {\n\t\t\t\tthis.flipX = this.flip;\n\t\t\t}","this":"dojo.widget.Slider"}}},"dojo.widget.SliderHorizontal.notifyListeners":{"_":{"meta":{"summary":"","src":"\t\t\tthis.onValueChanged(this.getValueX());","this":"dojo.widget.Slider"}}},"dojo.widget.SliderHorizontal.getValue":{"_":{"meta":{"summary":"","src":"\t\t\treturn this.getValueX ();","this":"dojo.widget.Slider"}}},"dojo.widget.SliderHorizontal.setValue":{"_":{"meta":{"summary":"","parameters":{"value":{"type":""}},"src":"\t\t\tthis.setValueX (value);","this":"dojo.widget.Slider"}}},"dojo.widget.SliderHorizontal.onValueChanged":{"_":{"meta":{"summary":"","parameters":{"value":{"type":""}},"src":"","this":"dojo.widget.Slider"}}},"dojo.widget.SliderVertical":{"_":{"meta":{"summary":"","inherits":["dojo.widget.Slider"],"this_inherits":["dojo.widget.Slider"],"protovariables":{"widgetType":"","isEnableX":"","isEnableY":"","initialValue":"","snapValues":"","minimum":"","maximum":"","buttonStyle":"","backgroundSize":"","backgroundSrc":"","flip":""}}}},"dojo.widget.SliderVertical.postMixInProperties":{"_":{"meta":{"summary":"","src":"\t\t\tif (!isNaN(parseFloat(this.initialValue))) {\n\t\t\t\tthis.initialValueY = parseFloat(this.initialValue);\n\t\t\t}\n\t\t\tif (!isNaN(parseFloat(this.minimum))) {\n\t\t\t\tthis.minimumY = parseFloat(this.minimum);\n\t\t\t}\n\t\t\tif (!isNaN(parseFloat(this.maximum))) {\n\t\t\t\tthis.maximumY = parseFloat(this.maximum);\n\t\t\t}\n\t\t\tif (!isNaN(parseInt(this.snapValues))) {\n\t\t\t\tthis.snapValuesY = parseInt(this.snapValues);\n\t\t\t}\n\t\t\tif (dojo.lang.isString(this.buttonStyle) && this.buttonStyle != \"\") {\n\t\t\t\tthis.buttonStyleY = this.buttonStyle;\n\t\t\t}\n\t\t\tif (dojo.lang.isBoolean(this.flip)) {\n\t\t\t\tthis.flipY = this.flip;\n\t\t\t}","this":"dojo.widget.Slider"}}},"dojo.widget.SliderVertical.notifyListeners":{"_":{"meta":{"summary":"","src":"\t\t\tthis.onValueChanged(this.getValueY());","this":"dojo.widget.Slider"}}},"dojo.widget.SliderVertical.getValue":{"_":{"meta":{"summary":"","src":"\t\t\treturn this.getValueY ();","this":"dojo.widget.Slider"}}},"dojo.widget.SliderVertical.setValue":{"_":{"meta":{"summary":"","parameters":{"value":{"type":""}},"src":"\t\t\tthis.setValueY (value);","this":"dojo.widget.Slider"}}},"dojo.widget.SliderVertical.onValueChanged":{"_":{"meta":{"summary":"","parameters":{"value":{"type":""}},"src":"","this":"dojo.widget.Slider"}}}}}},"dojo.widget.SortableTable":{"meta":{"requires":{"common":["dojo.lang.common","dojo.date.format","dojo.html.*","dojo.html.selection","dojo.html.util","dojo.html.style","dojo.event.*","dojo.widget.*","dojo.widget.HtmlWidget"]},"methods":{"dojo.widget.SortableTable":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}}}}},"dojo.widget.Spinner":{"meta":{"requires":{"common":["dojo.io.*","dojo.lfx.*","dojo.html.*","dojo.html.layout","dojo.string","dojo.widget.*","dojo.widget.validate"]},"methods":{"dojo.widget.Spinner":{"_":{"meta":{"summary":"","protovariables":{"upArrowNode":"","downArrowNode":"","_inputWidget":"","_typamaticTimer":"","_typamaticFunction":"","defaultTimeout":"","timeoutChangeRate":"","_currentTimeout":"","_eventCount":"","templatePath":"","templateCssPath":"","incrementSrc":"","decrementSrc":""}}}},"dojo.widget.Spinner._handleKeyEvents":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar k = dojo.event.browser.keys;\n\t\t\tvar keyCode = evt.keyCode;\n\n\t\t\tswitch(keyCode){\n \t\t\tcase k.KEY_DOWN_ARROW:\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\tthis._downArrowPressed(evt);\n\t\t\t\t\treturn;\n\t\t\t\tcase k.KEY_UP_ARROW:\n\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\tthis._upArrowPressed(evt);\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._eventCount++;","this":"null"}}},"dojo.widget.Spinner.k.KEY_DOWN_ARROW":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tthis.textbox.focus();\n\t\t\tif(evt != null && typeof evt == \"object\" && evt.keyCode && evt.keyCode != null){\n\t\t\t\tvar keyCode = evt.keyCode;\n\t\t\t\tvar k = dojo.event.browser.keys;\n\n\t\t\t\tswitch(keyCode){\n\t\t\t\t\tcase k.KEY_DOWN_ARROW:\n\t\t\t\t\tcase k.KEY_UP_ARROW:\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._releaseButton(this.upArrowNode);\n\t\t\tthis._releaseButton(this.downArrowNode);\n\t\t\tthis._eventCount++;\n\t\t\tif(this._typamaticTimer != null){\n\t\t\t\tdojo.lang.clearTimeout(this._typamaticTimer);\n\t\t\t}\n\t\t\tthis._typamaticTimer = null;\n\t\t\tthis._currentTimeout = this.defaultTimeout;","this":"null"}}},"null":{"_":{"meta":{"this_variables":["_typamaticTimer","_currentTimeout","_typamaticTimer","_currentTimeout","buttonSize","buttonSize","_typamaticTimer","_currentTimeout","_typamaticNode","_typamaticTimer","_currentTimeout","textbox.selectionEnd","textbox.selectionEnd","buttonSize"]}}},"dojo.widget.Spinner.k.KEY_UP_ARROW":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tthis.textbox.focus();\n\t\t\tif(evt != null && typeof evt == \"object\" && evt.keyCode && evt.keyCode != null){\n\t\t\t\tvar keyCode = evt.keyCode;\n\t\t\t\tvar k = dojo.event.browser.keys;\n\n\t\t\t\tswitch(keyCode){\n\t\t\t\t\tcase k.KEY_DOWN_ARROW:\n\t\t\t\t\tcase k.KEY_UP_ARROW:\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._releaseButton(this.upArrowNode);\n\t\t\tthis._releaseButton(this.downArrowNode);\n\t\t\tthis._eventCount++;\n\t\t\tif(this._typamaticTimer != null){\n\t\t\t\tdojo.lang.clearTimeout(this._typamaticTimer);\n\t\t\t}\n\t\t\tthis._typamaticTimer = null;\n\t\t\tthis._currentTimeout = this.defaultTimeout;","this":"null"}}},"dojo.widget.Spinner.onSpinnerKeyDown":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\t\tthis._handleKeyEvents(evt);\n\t\t\t}","this":"null"}}},"dojo.widget.Spinner.onSpinnerKeyPress":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tif(document.createEvent){            \n\t\t\t\tthis._handleKeyEvents(evt);\n\t\t\t}","this":"null"}}},"dojo.widget.Spinner.onSpinnerKeyUp":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tthis._arrowReleased(evt);\n\t\t\tthis.onkeyup(evt);","this":"null"}}},"dojo.widget.Spinner.resize":{"_":{"meta":{"summary":"","src":"\t\t\tvar inputSize = dojo.html.getBorderBox(this.textbox);\n\t\t\tthis.buttonSize = { width: inputSize.height \/ 2, height: inputSize.height \/ 2 };\n\t\t\tif(this.upArrowNode){\n\t\t\t\tdojo.html.setMarginBox(this.upArrowNode, this.buttonSize);\n\t\t\t\tdojo.html.setMarginBox(this.downArrowNode, this.buttonSize);\n\t\t\t}","this":"null"}}},"dojo.widget.Spinner.width":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\t\tthis.inherited(\"postMixInProperties\");\n\n\t\t\t\/\/ set image size before instantiating template;\n\t\t\t\/\/ changing it aftwards doesn't work on FF\n\t\t\tvar inputNode = this.getFragNodeRef(frag);\n\t\t\tvar inputSize = dojo.html.getBorderBox(inputNode);\n\t\t\tthis.buttonSize = { width: inputSize.height \/ 2 - 1, height: inputSize.height \/ 2 - 1};","this":"null"}}},"dojo.widget.Spinner._pressButton":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\t\twith(node.style){\n\t\t\t\tborderWidth = \"1px 0px 0px 1px\";\n\t\t\t\tborderStyle = \"inset\";\n\t\t\t}","this":"null"}}},"dojo.widget.Spinner._releaseButton":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\t\twith(node.style){\n\t\t\t\tborderWidth = \"0px 1px 1px 0px\";\n\t\t\t\tborderStyle = \"outset\";\n\t\t\t}","this":"null"}}},"dojo.widget.Spinner._arrowPressed":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""},"direction":{"type":""}},"src":"\t\t\tvar nodePressed = (direction == -1) ? this.downArrowNode : this.upArrowNode;\n\t\t\tvar nodeReleased = (direction == +1) ? this.downArrowNode : this.upArrowNode;\n\t\t\tif(typeof evt != \"number\"){\n\t\t\t\tif(this._typamaticTimer != null){\n\t\t\t\t\tif(this._typamaticNode == nodePressed){\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tdojo.lang.clearTimeout(this._typamaticTimer);\n\t\t\t\t}\n\t\t\t\tthis._releaseButton(nodeReleased);\n\t\t\t\tthis._eventCount++;\n\t\t\t\tthis._typamaticTimer = null;\n\t\t\t\tthis._currentTimeout = this.defaultTimeout;\n\n\t\t\t}else if (evt != this._eventCount){\n\t\t\t\tthis._releaseButton(nodePressed);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._pressButton(nodePressed);\n\t\t\tthis.setCursorX(this.adjustValue(direction,this.getCursorX()));\n\t\t\tthis._typamaticNode = nodePressed;\n\t\t\tthis._typamaticTimer = dojo.lang.setTimeout(this, \"_arrowPressed\", this._currentTimeout, this._eventCount, direction);\n\t\t\tthis._currentTimeout = Math.round(this._currentTimeout * this.timeoutChangeRate);","this":"null"}}},"dojo.widget.Spinner._downArrowPressed":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\treturn this._arrowPressed(evt,-1);","this":"null"}}},"dojo.widget.Spinner._downArrowDoubleClicked":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar rc = this._downArrowPressed(evt);\n\t\t\tdojo.lang.setTimeout(this, \"_arrowReleased\", 50, null);\n\t\t\treturn rc;","this":"null"}}},"dojo.widget.Spinner._upArrowPressed":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\treturn this._arrowPressed(evt,+1);","this":"null"}}},"dojo.widget.Spinner._upArrowDoubleClicked":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar rc = this._upArrowPressed(evt);\n\t\t\tdojo.lang.setTimeout(this, \"_arrowReleased\", 50, null);\n\t\t\treturn rc;","this":"null"}}},"dojo.widget.Spinner._arrowReleased":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tthis.textbox.focus();\n\t\t\tif(evt != null && typeof evt == \"object\" && evt.keyCode && evt.keyCode != null){\n\t\t\t\tvar keyCode = evt.keyCode;\n\t\t\t\tvar k = dojo.event.browser.keys;\n\n\t\t\t\tswitch(keyCode){\n\t\t\t\t\tcase k.KEY_DOWN_ARROW:\n\t\t\t\t\tcase k.KEY_UP_ARROW:\n\t\t\t\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._releaseButton(this.upArrowNode);\n\t\t\tthis._releaseButton(this.downArrowNode);\n\t\t\tthis._eventCount++;\n\t\t\tif(this._typamaticTimer != null){\n\t\t\t\tdojo.lang.clearTimeout(this._typamaticTimer);\n\t\t\t}\n\t\t\tthis._typamaticTimer = null;\n\t\t\tthis._currentTimeout = this.defaultTimeout;","this":"null"}}},"dojo.widget.Spinner._mouseWheeled":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar scrollAmount = 0;\n\t\t\tif(typeof evt.wheelDelta == 'number'){ \/\/ IE\n\t\t\t\tscrollAmount = evt.wheelDelta;\n\t\t\t}else if (typeof evt.detail == 'number'){ \/\/ Mozilla+Firefox\n\t\t\t\tscrollAmount = -evt.detail;\n\t\t\t}\n\t\t\tif(scrollAmount > 0){\n\t\t\t\tthis._upArrowPressed(evt);\n\t\t\t\tthis._arrowReleased(evt);\n\t\t\t}else if (scrollAmount < 0){\n\t\t\t\tthis._downArrowPressed(evt);\n\t\t\t\tthis._arrowReleased(evt);\n\t\t\t}","this":"null"}}},"dojo.widget.Spinner._discardEvent":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tdojo.event.browser.stopEvent(evt);","this":"null"}}},"dojo.widget.Spinner.getCursorX":{"_":{"meta":{"summary":"","src":"\t\t\tvar x = -1;\n\t\t\ttry{\n\t\t\t\tthis.textbox.focus();\n\t\t\t\tif (typeof this.textbox.selectionEnd == \"number\"){\n\t\t\t\t\tx = this.textbox.selectionEnd;\n\t\t\t\t}else if (document.selection && document.selection.createRange) {\n\t\t\t\t\tvar range = document.selection.createRange().duplicate();\n\t\t\t\t\tif(range.parentElement() == this.textbox){\n\t\t\t\t\t\trange.moveStart('textedit', -1);\n\t\t\t\t\t\tx = range.text.length;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}catch(e){ \/* squelch! *\/ }\n\t\t\treturn x;","this":"null"}}},"dojo.widget.Spinner.setCursorX":{"_":{"meta":{"summary":"","parameters":{"x":{"type":""}},"src":"\t\t\ttry{\n\t\t\t\tthis.textbox.focus();\n\t\t\t\tif(!x){ x = 0 }\n\t\t\t\tif(typeof this.textbox.selectionEnd == \"number\"){\n\t\t\t\tthis.textbox.selectionEnd = x;\n\t\t\t\t}else if(this.textbox.createTextRange){\n\t\t\t\tvar range = this.textbox.createTextRange();\n\t\t\t\trange.collapse(true);\n\t\t\t\trange.moveEnd('character', x);\n\t\t\t\trange.moveStart('character', x);\n\t\t\t\trange.select();\n\t\t\t\t}\n\t\t\t}catch(e){ \/* squelch! *\/ }","this":"null"}}},"dojo.widget.Spinner.postMixInProperties":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\t\tthis.inherited(\"postMixInProperties\");\n\n\t\t\t\/\/ set image size before instantiating template;\n\t\t\t\/\/ changing it aftwards doesn't work on FF\n\t\t\tvar inputNode = this.getFragNodeRef(frag);\n\t\t\tvar inputSize = dojo.html.getBorderBox(inputNode);\n\t\t\tthis.buttonSize = { width: inputSize.height \/ 2 - 1, height: inputSize.height \/ 2 - 1};","this":"null"}}},"dojo.widget.Spinner.postCreate":{"_":{"meta":{"summary":"","src":"\t\t\tthis.inherited(\"postCreate\");\n\n\t\t\t\/\/ extra listeners\n\t\t\tif(this.textbox.addEventListener){\n\t\t\t\t\/\/ dojo.event.connect() doesn't seem to work with DOMMouseScroll\n\t\t\t\tthis.textbox.addEventListener('DOMMouseScroll', dojo.lang.hitch(this, \"_mouseWheeled\"), false); \/\/ Mozilla + Firefox + Netscape\n\t\t\t}else{\n\t\t\t\tdojo.event.connect(this.textbox, \"onmousewheel\", this, \"_mouseWheeled\"); \/\/ IE + Safari\n\t\t\t}\n\t\t\t\/\/dojo.event.connect(window, \"onchange\", this, \"resize\");","this":"null"}}},"dojo.widget.SpinnerIntegerTextbox":{"_":{"meta":{"summary":"","inherits":["[dojo.widget.validate.IntegerTextbox, dojo.widget.Spinner]"],"this_inherits":["[dojo.widget.validate.IntegerTextbox, dojo.widget.Spinner]"]}}},"dojo.widget.SpinnerRealNumberTextbox":{"_":{"meta":{"summary":"","inherits":["[dojo.widget.validate.RealNumberTextbox, dojo.widget.Spinner]"],"this_inherits":["[dojo.widget.validate.RealNumberTextbox, dojo.widget.Spinner]"]}}},"dojo.widget.SpinnerTimeTextbox":{"_":{"meta":{"summary":"","inherits":["[dojo.widget.validate.TimeTextbox, dojo.widget.Spinner]"],"this_inherits":["[dojo.widget.validate.TimeTextbox, dojo.widget.Spinner]"]}}}}}},"dojo.widget.SplitContainer":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.ContentPane","dojo.widget.HtmlWidget","dojo.html.style","dojo.html.layout","dojo.html.selection","dojo.io","dojo.io.cookie","dojo.json"]},"methods":{"dojo.widget.SplitContainer":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}},"dojo.widget.SplitContainerPanel":{"_":{"meta":{"summary":"","inherits":["dojo.widget.ContentPane"],"this_inherits":["dojo.widget.ContentPane"]}}},"dojo.widget.Widget":{"_":{"meta":{"protovariables":{"sizeMin":"","sizeShare":""}}}}}}},"dojo.widget.SvgButton":{"meta":{"requires":{"common":["dojo.widget.Button"]},"methods":{"dojo.widget.SvgButton":{"_":{"meta":{"summary":"","src":"\tdojo.widget.SvgWidget.call(this);\n\n\t\/\/ FIXME: freaking implement this already!\n\tthis.onFoo = function(){ alert(\"bar\"); }\n\n\tthis.label = \"huzzah!\";\n\n\tthis.setLabel = function(x, y, textSize, label, shape){\n\t\t\/\/var labelNode = this.domNode.ownerDocument.createTextNode(this.label);\n\t\t\/\/var textNode = this.domNode.ownerDocument.createElement(\"text\");\n\t\tvar coords = dojo.widget.SvgButton.prototype.coordinates(x, y, textSize, label, shape);\n\t\tvar textString = \"\";\n\t\tswitch(shape) {\n\t\t\tcase \"ellipse\":\n\t\t\t\ttextString = \"<text x='\"+ coords[6] + \"' y='\"+ coords[7] + \"'>\"+ label + \"<\/text>\";\n\t\t\t\t\/\/textNode.setAttribute(\"x\", coords[6]);\n\t\t\t\t\/\/textNode.setAttribute(\"y\", coords[7]);\n\t\t\t\tbreak;\n\t\t\tcase \"rectangle\":\n\t\t\t\t\/\/FIXME: implement\n\t\t\t\ttextString = \"\";\n\t\t\t\t\/\/textNode.setAttribute(\"x\", coords[6]);\n\t\t\t\t\/\/textNode.setAttribute(\"y\", coords[7]);\n\t\t\t\tbreak;\n\t\t\tcase \"circle\":\n\t\t\t\t\/\/FIXME: implement\n\t\t\t\ttextString = \"\";\n\t\t\t\t\/\/textNode.setAttribute(\"x\", coords[6]);\n\t\t\t\t\/\/textNode.setAttribute(\"y\", coords[7]);\n\t\t\t\tbreak;\n\t\t}\n\t\t\/\/textNode.appendChild(labelNode);\n\t\t\/\/this.domNode.appendChild(textNode);\n\t\treturn textString;\n\t\t\/\/alert(textNode.getComputedTextLength());\n\t}\n\n\tthis.fillInTemplate = function(x, y, textSize, label, shape){\n\t\t\/\/ the idea is to set the text to the appropriate place given its length\n\t\t\/\/ and the template shape\n\t\t\n\t\t\/\/ FIXME: For now, assuming text sizes are integers in SVG units\n\t\tthis.textSize = textSize || 12;\n\t\tthis.label = label;\n\t\t\/\/ FIXEME: for now, I'm going to fake this... need to come up with a real way to \n\t\t\/\/ determine the actual width of the text, such as computedStyle\n\t\tvar textWidth = this.label.length*this.textSize ;\n\t\t\/\/this.setLabel();\n\t}","this_variables":["onFoo","label","setLabel","fillInTemplate","textSize"],"inherits":["dojo.widget.DomButton"]}}},"dojo.widget.SvgButton.onFoo":{"_":{"meta":{"summary":"","src":"                          alert(\"bar\");   "}}},"dojo.widget.SvgButton.setLabel":{"_":{"meta":{"summary":"","parameters":{"x":{"type":""},"y":{"type":""},"textSize":{"type":""},"label":{"type":""},"shape":{"type":""}},"src":"\t\tvar textString = \"\";\n\t\tswitch(shape) {\n\t\t\tcase \"ellipse\":\n\t\t\t\ttextString = \"<text x='\"+ coords[6] + \"' y='\"+ coords[7] + \"'>\"+ label + \"<\/text>\";\n\t\t\t\t\/\/textNode.setAttribute(\"x\", coords[6]);\n\t\t\t\t\/\/textNode.setAttribute(\"y\", coords[7]);\n\t\t\t\tbreak;\n\t\t\tcase \"rectangle\":\n\t\t\t\t\/\/FIXME: implement\n\t\t\t\ttextString = \"\";\n\t\t\t\t\/\/textNode.setAttribute(\"x\", coords[6]);\n\t\t\t\t\/\/textNode.setAttribute(\"y\", coords[7]);\n\t\t\t\tbreak;\n\t\t\tcase \"circle\":\n\t\t\t\t\/\/FIXME: implement\n\t\t\t\ttextString = \"\";\n\t\t\t\t\/\/textNode.setAttribute(\"x\", coords[6]);\n\t\t\t\t\/\/textNode.setAttribute(\"y\", coords[7]);\n\t\t\t\tbreak;\n\t\t}\n\t\t\/\/textNode.appendChild(labelNode);\n\t\t\/\/this.domNode.appendChild(textNode);\n\t\treturn textString;\n\t\t\/\/alert(textNode.getComputedTextLength());"}}},"dojo.widget.SvgButton.fillInTemplate":{"_":{"meta":{"summary":"","parameters":{"x":{"type":""},"y":{"type":""},"textSize":{"type":""},"label":{"type":""},"shape":{"type":""}},"src":"\t\tthis.label = label;\n\t\t\/\/ FIXEME: for now, I'm going to fake this... need to come up with a real way to \n\t\t\/\/ determine the actual width of the text, such as computedStyle\n\t\tvar textWidth = this.label.length*this.textSize ;\n\t\t\/\/this.setLabel();","this_variables":["textSize","label"]}}},"dojo.widget.SvgButton.shapeString":{"_":{"meta":{"summary":"","parameters":{"x":{"type":""},"y":{"type":""},"textSize":{"type":""},"label":{"type":""},"shape":{"type":""}},"src":"\tswitch(shape) {\n\t\tcase \"ellipse\":\n\t\t\tvar coords = dojo.widget.SvgButton.prototype.coordinates(x, y, textSize, label, shape)\n\t\t\treturn \"<ellipse cx='\"+ coords[4]+\"' cy='\"+ coords[5]+\"' rx='\"+ coords[2]+\"' ry='\"+ coords[3]+\"'\/>\";\n\t\t\tbreak;\n\t\tcase \"rect\":\n\t\t\t\/\/FIXME: implement\n\t\t\treturn \"\";\n\t\t\t\/\/return \"<rect x='110' y='45' width='70' height='30'\/>\";\n\t\t\tbreak;\n\t\tcase \"circle\":\n\t\t\t\/\/FIXME: implement\n\t\t\treturn \"\";\n\t\t\t\/\/return \"<circle cx='210' cy='60' r='23'\/>\";\n\t\t\tbreak;\n\t}","this":"dojo.widget.SvgButton"}}},"dojo.widget.SvgButton.coordinates":{"_":{"meta":{"summary":"","parameters":{"x":{"type":""},"y":{"type":""},"textSize":{"type":""},"label":{"type":""},"shape":{"type":""}},"src":"\tswitch(shape) {\n\t\tcase \"ellipse\":\n\t\t\tvar buttonWidth = label.length*textSize;\n\t\t\tvar buttonHeight = textSize*2.5\n\t\t\tvar rx = buttonWidth\/2;\n\t\t\tvar ry = buttonHeight\/2;\n\t\t\tvar cx = rx + x;\n\t\t\tvar cy = ry + y;\n\t\t\tvar textX = cx - rx*textSize\/25;\n\t\t\tvar textY = cy*1.1;\n\t\t\treturn [buttonWidth, buttonHeight, rx, ry, cx, cy, textX, textY];\n\t\t\tbreak;\n\t\tcase \"rectangle\":\n\t\t\t\/\/FIXME: implement\n\t\t\treturn \"\";\n\t\t\tbreak;\n\t\tcase \"circle\":\n\t\t\t\/\/FIXME: implement\n\t\t\treturn \"\";\n\t\t\tbreak;\n\t}","this":"dojo.widget.SvgButton"}}},"dojo.widget.SvgButton.labelString":{"_":{"meta":{"summary":"","parameters":{"x":{"type":""},"y":{"type":""},"textSize":{"type":""},"label":{"type":""},"shape":{"type":""}},"src":"\tvar textString = \"\";\n\tvar coords = dojo.widget.SvgButton.prototype.coordinates(x, y, textSize, label, shape);\n\tswitch(shape) {\n\t\tcase \"ellipse\":\n\t\t\ttextString = \"<text x='\"+ coords[6] + \"' y='\"+ coords[7] + \"'>\"+ label + \"<\/text>\";\n\t\t\tbreak;\n\t\tcase \"rectangle\":\n\t\t\t\/\/FIXME: implement\n\t\t\ttextString = \"\";\n\t\t\tbreak;\n\t\tcase \"circle\":\n\t\t\t\/\/FIXME: implement\n\t\t\ttextString = \"\";\n\t\t\tbreak;\n\t}\n\treturn textString;","this":"dojo.widget.SvgButton"}}},"dojo.widget.SvgButton.templateString":{"_":{"meta":{"summary":"","parameters":{"x":{"type":""},"y":{"type":""},"textSize":{"type":""},"label":{"type":""},"shape":{"type":""}},"src":"\treturn \"<g class='dojoButton' dojoAttachEvent='onClick; onMouseMove: onFoo;' dojoAttachPoint='labelNode'>\"+ dojo.widgets.SVGButton.prototype.shapeString(x, y, textSize, label, shape) + dojo.widget.SVGButton.prototype.labelString(x, y, textSize, label, shape) + \"<\/g>\";","this":"dojo.widget.SvgButton"}}}}}},"dojo.widget.SvgWidget":{"meta":{"requires":{"common":["dojo.widget.DomWidget","dojo.dom"]},"methods":{"tf":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.widget.SvgWidget.call(this);\n\t\t\tthis.buildRendering = function(){ return; }\n\t\t\tthis.destroyRendering = function(){ return; }\n\t\t\tthis.postInitialize = function(){ return; }\n\t\t\tthis.cleanUp = function(){ return; }\n\t\t\tthis.widgetType = \"SVGRootWidget\";\n\t\t\tthis.domNode = document.documentElement;\n\t\t}\n\t\tvar wm = dojo.widget.manager;\n\t\twm.root = rw;\n\t\twm.add(rw);\n\n\t\t\/\/ extend the widgetManager with a getWidgetFromNode method\n\t\twm.getWidgetFromNode = function(node){\n\t\t\tvar filter = function(x){\n\t\t\t\tif(x.domNode == node){\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar widgets = [];\n\t\t\twhile((node)&&(widgets.length < 1)){\n\t\t\t\twidgets = this.getWidgetsByFilter(filter);\n\t\t\t\tnode = node.parentNode;\n\t\t\t}\n\t\t\tif(widgets.length > 0){\n\t\t\t\treturn widgets[0];\n\t\t\t}else{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\twm.getWidgetFromEvent = function(domEvt){\n\t\t\treturn this.getWidgetFromNode(domEvt.target);\n\t\t}\n\n\t\twm.getWidgetFromPrimitive = wm.getWidgetFromNode;","this_variables":["buildRendering","destroyRendering","postInitialize","cleanUp","widgetType","domNode"]}}},"tf.buildRendering":{"_":{"meta":{"summary":"","src":"                                     return;   "}}},"tf.destroyRendering":{"_":{"meta":{"summary":"","src":"                                       return;   "}}},"tf.postInitialize":{"_":{"meta":{"summary":"","src":"                                     return;   "}}},"tf.cleanUp":{"_":{"meta":{"summary":"","src":"                              return;   "}}}}}},"dojo.widget.SwtWidget":{"meta":{"requires":{"common":["dojo.event.*","dojo.widget.Widget","dojo.uri.*","dojo.lang.func","dojo.lang.extras"]},"methods":{"dojo.widget.SwtWidget":{"_":{"meta":{"summary":"","inherits":["dojo.widget.Widget"],"this_inherits":["dojo.widget.Widget"]}}},"dojo.widget.manager.startShell":{"_":{"meta":{"summary":"","src":"\t\tvar sh = dojo.widget.SwtWidget.prototype.shell;\n\t\tvar d = dojo.widget.SwtWidget.prototype.display;\n\t\tsh.open();\n\t\twhile(!sh.isDisposed()){\n\t\t\tdojo.widget.manager.doNext();\n\t\t\tif(!d.readAndDispatch()){\n\t\t\t\td.sleep();\n\t\t\t}\n\t\t}\n\t\td.dispose();"}}}}}},"dojo.widget.TabContainer":{"meta":{"requires":{"common":["dojo.lang.func","dojo.widget.*","dojo.widget.HtmlWidget","dojo.event.*","dojo.html.selection","dojo.widget.html.layout"]},"methods":{"dojo.widget.TabContainer":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"],"protovariables":{"isContainer":"","labelPosition":"","closeButton":"","useVisibility":"","doLayout":"","templatePath":"","templateCssPath":"","selectedTab":""}}}},"dojo.widget.TabContainer.fillInTemplate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tdojo.html.copyStyle(this.domNode, source);\n\n\t\tdojo.widget.TabContainer.superclass.fillInTemplate.call(this, args, frag);","this_inherits":["dojo.widget.TabContainer.superclass.fillInTemplate"],"this":"dojo.widget.HtmlWidget"}}},"dojo.widget.TabContainer.postCreate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\t\tthis._setupTab(this.children[i]);\n\t\t}\n\n\t\tif (this.closeButton==\"pane\") {\n\t\t\tvar img = this._setupCloseButton(\"pane\");\n\t\t\tthis.dojoTabLabels.appendChild(img);\n\t\t\tdojo.event.connect(img, \"onclick\", dojo.lang.hitch(this, \n\t\t\t\t\tfunction(){ this._runOnCloseTab(this.selectedTabWidget); }\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\tif(!this.doLayout){\n\t\t\tdojo.html.addClass(this.dojoTabLabels, \"dojoTabNoLayout\");\n\t\t\tif (this.labelPosition == 'bottom') {\n\t\t\t\tvar p = this.dojoTabLabels.parentNode;\n\t\t\t\tp.removeChild(this.dojoTabLabels);\n\t\t\t\tp.appendChild(this.dojoTabLabels);\n\t\t\t}\n\t\t}\n\t\tdojo.html.addClass(this.dojoTabLabels, \"dojoTabLabels-\"+this.labelPosition);\n\n\t\tthis._doSizing();\n\n\t\t\/\/ Display the selected tab\n\t\tif(this.selectedTabWidget){\n\t\t\tthis.selectTab(this.selectedTabWidget, true);\n\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.HtmlWidget":{"_":{"meta":{"this_variables":["labelPosition","closeButton","selectedTabWidget","selectedTabWidget","selectedTabWidget","closeButton"]}}},"dojo.widget.TabContainer.addChild":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"overrideContainerNode":{"type":""},"pos":{"type":""},"ref":{"type":""},"insertIndex":{"type":""}},"src":"\t\tdojo.widget.TabContainer.superclass.addChild.call(this,child, overrideContainerNode, pos, ref, insertIndex);\n\n\t\t\/\/ in case the tab labels have overflowed from one line to two lines\n\t\tthis._doSizing();","this_inherits":["dojo.widget.TabContainer.superclass.addChild"],"this":"dojo.widget.HtmlWidget"}}},"dojo.widget.TabContainer._setupTab":{"_":{"meta":{"summary":"","parameters":{"tab":{"type":""}},"src":"\t\ttab.domNode.style.display=\"none\";\n\n\t\t\/\/ Create label\n\t\ttab.div = document.createElement(\"div\");\n\t\tdojo.html.addClass(tab.div, \"dojoTabPaneTab\");\n\t\tvar innerDiv = document.createElement(\"div\");\n\t\t\/\/ need inner span so focus rectangle is drawn properly\n\t\tvar titleSpan = document.createElement(\"span\");\n\t\ttitleSpan.innerHTML = tab.label;\n\t\ttitleSpan.tabIndex=\"-1\";\n\t\t\/\/ set role on tab title\n\t\tdojo.widget.wai.setAttr(titleSpan, \"waiRole\", \"role\", \"tab\");\n\t\tinnerDiv.appendChild(titleSpan);\n\t\tdojo.html.disableSelection(titleSpan); \n\t\t\n\t\tif(this.closeButton==\"tab\" || tab.tabCloseButton){\n\t\t\tvar closeButton = this._setupCloseButton(\"tab\");\n\t\t\tinnerDiv.appendChild(closeButton);\n\t\t\tdojo.event.connect(closeButton, \"onclick\", dojo.lang.hitch(this, \n\t\t\t\tfunction(evt){ \n\t\t\t\t\tthis._runOnCloseTab(tab); dojo.event.browser.stopEvent(evt);}\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\ttab.div.appendChild(innerDiv);\n\t\ttab.div.tabTitle=titleSpan;\n\t\tthis.dojoTabLabels.appendChild(tab.div);\n\n\t\tdojo.event.connect(tab.div, \"onclick\", dojo.lang.hitch(this, \n\t\t\t\tfunction(){ this.selectTab(tab); }\n\t\t\t)\n\t\t);\n\t\tdojo.event.connect(tab.div, \"onkeydown\", dojo.lang.hitch(this, \n\t\t\t\tfunction(evt){ this.tabNavigation(evt, tab); } \n\t\t\t)\n\t\t);\n\n\t\tif(!this.selectedTabWidget || this.selectedTab==tab.widgetId || tab.selected || (this.children.length==0)){\n\t\t\t\/\/ Deselect old tab and select new one\n\t\t\t\/\/ We do this instead of calling selectTab in this case, becuase other wise other widgets\n\t\t\t\/\/ listening for addChild and selectTab can run into a race condition\n\t\t\tif(this.selectedTabWidget){\n\t\t\t\tthis._hideTab(this.selectedTabWidget);\n\t\t\t}\n\t\t\tthis.selectedTabWidget = tab;\n\t\t\tthis._showTab(tab);\n\n\t\t} else {\n\t\t\tthis._hideTab(tab);\n\t\t}\n\n\t\tdojo.html.addClass(tab.domNode, \"dojoTabPane\");\n\n\t\tif(this.doLayout){\n\t\t\twith(tab.domNode.style){\n\t\t\t\ttop = dojo.html.getPixelValue(this.containerNode, \"padding-top\", true);\n\t\t\t\tleft = dojo.html.getPixelValue(this.containerNode, \"padding-left\", true);\n\t\t\t}\n\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.TabContainer._doSizing":{"_":{"meta":{"summary":"","src":"\t\tif(!this.doLayout){ return; }\n\n\t\t\/\/ position the labels and the container node\n\t\tvar labelAlign=this.labelPosition.replace(\/-h\/,\"\");\n\t\tvar children = [\n\t\t\t{domNode: this.dojoTabLabels, layoutAlign: labelAlign},\n\t\t\t{domNode: this.containerNode, layoutAlign: \"client\"}\n\t\t];\n\n\t\tdojo.widget.html.layout(this.domNode, children);\n\n\t\t\/\/ size the current tab\n\t\t\/\/ TODO: should have ptr to current tab rather than searching\n\t\tvar content = dojo.html.getContentBox(this.containerNode);\n\t\tdojo.lang.forEach(this.children, function(child){\n\t\t\tif(child.selected){\n\t\t\t\tchild.resizeTo(content.width, content.height);\n\t\t\t}\n\t\t});","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.TabContainer.domNode":{"_":{"meta":{"summary":"","src":"\t\tif(!this.doLayout){ return; }\n\n\t\t\/\/ position the labels and the container node\n\t\tvar labelAlign=this.labelPosition.replace(\/-h\/,\"\");\n\t\tvar children = [\n\t\t\t{domNode: this.dojoTabLabels, layoutAlign: labelAlign},\n\t\t\t{domNode: this.containerNode, layoutAlign: \"client\"}\n\t\t];\n\n\t\tdojo.widget.html.layout(this.domNode, children);\n\n\t\t\/\/ size the current tab\n\t\t\/\/ TODO: should have ptr to current tab rather than searching\n\t\tvar content = dojo.html.getContentBox(this.containerNode);\n\t\tdojo.lang.forEach(this.children, function(child){\n\t\t\tif(child.selected){\n\t\t\t\tchild.resizeTo(content.width, content.height);\n\t\t\t}\n\t\t});","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.TabContainer.removeChild":{"_":{"meta":{"summary":"","parameters":{"tab":{"type":""}},"src":"\t\tif(this.closeButton == \"tab\"){\n\t\t\tvar img = tab.div.lastChild.lastChild;\n\t\t\tif(img){\n\t\t\t\tdojo.html.removeClass(img, \"dojoTabPaneTabClose\");\n\t\t\t}\n\t\t}\n\n\t\tdojo.widget.TabContainer.superclass.removeChild.call(this, tab);\n\n\t\tdojo.html.removeClass(tab.domNode, \"dojoTabPane\");\n\t\tthis.dojoTabLabels.removeChild(tab.div);\n\t\tdelete(tab.div);\n\n\t\tif (this.selectedTabWidget === tab) {\n\t\t\tthis.selectedTabWidget = undefined;\n\t\t\tif (this.children.length > 0) {\n\t\t\t\tthis.selectTab(this.children[0], true);\n\t\t\t}\n\t\t}\n\n\t\t\/\/ in case the tab labels have overflowed from one line to two lines\n\t\tthis._doSizing();","this_inherits":["dojo.widget.TabContainer.superclass.removeChild"],"this":"dojo.widget.HtmlWidget"}}},"dojo.widget.TabContainer.selectTab":{"_":{"meta":{"summary":"","parameters":{"tab":{"type":""},"_noRefresh":{"type":""}},"src":"\t\t\tthis._hideTab(this.selectedTabWidget);\n\t\t}\n\t\tthis.selectedTabWidget = tab;\n\t\tthis._showTab(tab, _noRefresh);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.TabContainer._setupCloseButton":{"_":{"meta":{"summary":"","parameters":{"type":{"type":""}},"src":"\t\tvar prefix = \"\";\n\t\tvar elemType = \"div\";\n\t\tif (type == \"pane\"){\n\t\t\tprefix = \"dojoTabPanePane\";\n\t\t}else if (type == \"tab\"){\n\t\t\telemType = \"span\";\n\t\t\tprefix = \"dojoTabPaneTab\";\n\t\t}\n\t\t\/\/else bad type - create a div but styles will be invalid\n\t\tvar div = document.createElement(elemType);\n\t\tdojo.html.addClass(div, prefix + \"Close \" + prefix + \"CloseImage\");\n\t\tdojo.event.connect(div, \"onmouseover\", function(){ dojo.html.addClass(div, prefix + \"CloseHover\"); });\n\t\tdojo.event.connect(div, \"onmouseout\", function(){ dojo.html.removeClass(div, prefix + \"CloseHover\"); });\n\t\t\n\t\treturn div;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.TabContainer.tabNavigation":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""},"tab":{"type":""}},"src":"\t\tif( (evt.keyCode == evt.KEY_RIGHT_ARROW)||\n\t\t\t(evt.keyCode == evt.KEY_LEFT_ARROW) ){\n\t\t\tvar current = null;\n\t\t\tvar next = null;\n\t\t\tfor(var i=0; i < this.children.length; i++){\n\t\t\t\tif(this.children[i] == tab){\n\t\t\t\t\tcurrent = i; \n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(evt.keyCode == evt.KEY_RIGHT_ARROW){\n\t\t\t\tnext = this.children[ (current+1) % this.children.length ]; \n\t\t\t}else{ \/\/ is LEFT_ARROW\n\t\t\t\tnext = this.children[ (current+ (this.children.length-1)) % this.children.length ];\n\t\t\t}\n\t\t\tthis.selectTab(next);\n\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\tnext.div.tabTitle.focus();\n\t\t} ","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.TabContainer.keyDown":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif(e.keyCode == e.KEY_UP_ARROW && e.ctrlKey){\n\t\t\t\/\/ set focus to current tab\n\t\t\tthis.selectTab(this.selectedTabWidget);\n\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\tthis.selectedTabWidget.div.tabTitle.focus();\n\t\t}else if(e.keyCode == e.KEY_DELETE && e.altKey){\n\t\t\tif (this.closeButton == \"tab\" || this.closeButton == \"pane\" || this.selectedTabWidget.tabCloseButton){\n\t\t\t\tthis._runOnCloseTab(this.selectedTabWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t}\n\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.TabContainer._showTab":{"_":{"meta":{"summary":"","parameters":{"tab":{"type":""},"_noRefresh":{"type":""}},"src":"\t\tdojo.html.addClass(tab.div, \"current\");\n\t\ttab.selected=true;\n\t\ttab.div.tabTitle.setAttribute(\"tabIndex\",\"0\");\n\t\tif ( this.useVisibility && !dojo.render.html.ie){\n\t\t\ttab.domNode.style.visibility=\"visible\";\n\t\t}else{\n\t\t\t\/\/ make sure we dont refresh onClose and on postCreate\n\t\t\t\/\/ speeds up things a bit when using refreshOnShow and fixes #646\n\t\t\tif(_noRefresh && tab.refreshOnShow){\n\t\t\t\tvar tmp = tab.refreshOnShow;\n\t\t\t\ttab.refreshOnShow = false;\n\t\t\t\ttab.show();\n\t\t\t\ttab.refreshOnShow = tmp;\n\t\t\t}else{\n\t\t\t\ttab.show();\n\t\t\t}\n\n\t\t\tif(this.doLayout){\n\t\t\t\tvar content = dojo.html.getContentBox(this.containerNode);\n\t\t\t\ttab.resizeTo(content.width, content.height);\n\t\t\t}\n\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.TabContainer._hideTab":{"_":{"meta":{"summary":"","parameters":{"tab":{"type":""}},"src":"\t\tdojo.html.removeClass(tab.div, \"current\");\n\t\ttab.div.tabTitle.setAttribute(\"tabIndex\",\"-1\");\n\t\ttab.selected=false;\n\t\tif( this.useVisibility ){\n\t\t\ttab.domNode.style.visibility=\"hidden\";\n\t\t}else{\n\t\t\ttab.hide();\n\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.TabContainer._runOnCloseTab":{"_":{"meta":{"summary":"","parameters":{"tab":{"type":""}},"src":"\t\tvar onc = tab.extraArgs.onClose || tab.extraArgs.onclose;\n\t\tvar fcn = dojo.lang.isFunction(onc) ? onc : window[onc];\n\t\tvar remove = dojo.lang.isFunction(fcn) ? fcn(this,tab) : true;\n\t\tif(remove) {\n\t\t\tthis.removeChild(tab);\n\t\t\t\/\/ makes sure we can clean up executeScripts in ContentPane onUnLoad\n\t\t\ttab.destroy();\n\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.TabContainer.onResized":{"_":{"meta":{"summary":"","src":"\t\tthis._doSizing();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.a11y.TabContainer":{"_":{"meta":{"summary":"","inherits":["dojo.widget.TabContainer"],"this_inherits":["dojo.widget.TabContainer"],"protovariables":{"templateCssPath":"","imgPath":""}}}},"dojo.widget.a11y.TabContainer._setupCloseButton":{"_":{"meta":{"summary":"","parameters":{"type":{"type":""}},"src":"\t\t\tvar typeClass=\"\";\n\t\t\tif (type == \"pane\"){\n\t\t\t\ttypeClass = \"dojoTabPanePaneClose\";\n\t\t\t}else if(type == \"tab\"){\n\t\t\t\ttypeClass = \"dojoTabPaneTabClose\";\n\t\t\t}\n\t\t\tvar img = document.createElement(\"img\");\n\t\t\tdojo.html.addClass(img, typeClass);\n\t\t\timg.src = this.imgPath;\n\t\t\timg.alt = \"[x]\";\n\t\t\t\t\t\t\n\t\t\treturn img;","this":"dojo.widget.TabContainer"}}},"dojo.widget.Widget":{"_":{"meta":{"protovariables":{"label":"","selected":"","tabCloseButton":""}}}}}}},"dojo.widget.TaskBar":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.FloatingPane","dojo.widget.HtmlWidget","dojo.event.*","dojo.html.selection"]},"methods":{"dojo.widget.TaskBarItem":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}},"dojo.widget.TaskBar":{"_":{"meta":{"summary":"","inherits":["dojo.widget.FloatingPane"],"this_inherits":["dojo.widget.FloatingPane"]}}}}}},"dojo.widget.TimePicker":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.HtmlWidget","dojo.event.*","dojo.date.format","dojo.dom","dojo.html.style"]},"methods":{"dojo.widget.TimePicker":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}},"dojo.widget.TimePicker.util.toRfcDateTime":{"_":{"meta":{"summary":"","parameters":{"jsDate":{"type":""}},"src":"\t\tif(!jsDate) {\n\t\t\tjsDate = new Date();\n\t\t}\n\t\tjsDate.setSeconds(0);\n\t\treturn dojo.date.strftime(jsDate, \"%Y-%m-%dT%H:%M:00%z\"); \/\/FIXME: use dojo.date.toRfc3339 instead","returns":"FIXME: use dojo.date.toRfc3339 instead"}}},"dojo.widget.TimePicker.util.fromRfcDateTime":{"_":{"meta":{"summary":"","parameters":{"rfcDate":{"type":""},"useDefaultMinutes":{"type":""},"isAnyTime":{"type":""}},"src":"\t\tvar tempDate = new Date();\n\t\tif(!rfcDate || rfcDate.indexOf(\"T\")==-1) {\n\t\t\tif(useDefaultMinutes) {\n\t\t\t\ttempDate.setMinutes(Math.floor(tempDate.getMinutes()\/5)*5);\n\t\t\t} else {\n\t\t\t\ttempDate.setMinutes(0);\n\t\t\t}\n\t\t} else {\n\t\t\tvar tempTime = rfcDate.split(\"T\")[1].split(\":\");\n\t\t\t\/\/ fullYear, month, date\n\t\t\tvar tempDate = new Date();\n\t\t\ttempDate.setHours(tempTime[0]);\n\t\t\ttempDate.setMinutes(tempTime[1]);\n\t\t}\n\t\treturn tempDate;"}}},"dojo.widget.TimePicker.util.toAmPmHour":{"_":{"meta":{"summary":"","parameters":{"hour":{"type":""}},"src":"\t\tvar amPmHour = hour;\n\t\tvar isAm = true;\n\t\tif (amPmHour == 0) {\n\t\t\tamPmHour = 12;\n\t\t} else if (amPmHour>12) {\n\t\t\tamPmHour = amPmHour - 12;\n\t\t\tisAm = false;\n\t\t} else if (amPmHour == 12) {\n\t\t\tisAm = false;\n\t\t}\n\t\treturn [amPmHour, isAm];"}}},"dojo.widget.TimePicker.util.fromAmPmHour":{"_":{"meta":{"summary":"","parameters":{"amPmHour":{"type":""},"isAm":{"type":""}},"src":"\t\tvar hour = parseInt(amPmHour, 10);\n\t\tif(isAm && hour == 12) {\n\t\t\thour = 0;\n\t\t} else if (!isAm && hour<12) {\n\t\t\thour = hour + 12;\n\t\t}\n\t\treturn hour;"}}}}}},"dojo.widget.TitlePane":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.HtmlWidget","dojo.html.style","dojo.lfx.*"]},"methods":{"dojo.widget.TitlePane":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}}}}},"dojo.widget.Toaster":{"meta":{"requires":{"common":["dojo.widget.*","dojo.lfx.*","dojo.html.iframe"]},"methods":{"dojo.widget.Toaster":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"],"protovariables":{"templateString":"","templateCssPath":"","clipNode":"","messageTopic":"","contentNode":"","_scrollConnected":"","messageTypes":"","clipCssClass":"","containerCssClass":"","contentCssClass":"","messageCssClass":"","warningCssClass":"","errorCssClass":"","fatalCssClass":"","positionDirection":"","positionDirectionTypes":"","showDelay":"","slideAnim":"","fadeAnim":"","bgIframe":""}}}},"dojo.widget.Toaster.postCreate":{"_":{"meta":{"summary":"","src":"\t\t\tthis.hide();\n\t\t\tdojo.html.setClass(this.clipNode, this.clipCssClass);\n\t\t\tdojo.html.addClass(this.containerNode, this.containerCssClass);\n\t\t\tdojo.html.setClass(this.contentNode, this.contentCssClass);\n\t\t\tif(this.messageTopic){\n\t\t\t\tdojo.event.topic.subscribe(this.messageTopic, this, \"setContent\");\n\t\t\t}\n\t\t\tif(!this.positionDirection || !dojo.lang.inArray(this.positionDirectionTypes, this.positionDirection)){\n\t\t\t\tthis.positionDirection = this.positionDirectionTypes.BRU;\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.HtmlWidget":{"_":{"meta":{"this_variables":["positionDirection","contentNode.innerHTML","containerNode.style.left","containerNode.style.top","slideAnim","fadeAnim","contentNode.innerHTML","containerNode.style.left","containerNode.style.top","slideAnim","fadeAnim","contentNode.innerHTML","containerNode.style.left","containerNode.style.top","slideAnim","fadeAnim","contentNode.innerHTML","containerNode.style.left","containerNode.style.top","slideAnim","fadeAnim","contentNode.innerHTML","containerNode.style.left","containerNode.style.top","slideAnim","fadeAnim","contentNode.innerHTML","containerNode.style.left","containerNode.style.top","slideAnim","fadeAnim","contentNode.innerHTML","containerNode.style.left","containerNode.style.top","slideAnim","fadeAnim","clipNode.style.height","clipNode.style.width","clipNode.style.top","clipNode.style.left","clipNode.style.clip","bgIframe","_scrollConnected","_scrollConnected"]}}},"dojo.widget.Toaster.setContent":{"_":{"meta":{"summary":"","parameters":{"msg":{"type":""},"messageType":{"type":""}},"src":"\t\t\t\tdojo.lang.setTimeout(50, dojo.lang.hitch(this, function(){\n\t\t\t\t\tthis.setContent(msg, messageType);\n\t\t\t\t}));\n\t\t\t\treturn;\n\t\t\t}else if(this.slideAnim){\n\t\t\t\tthis.slideAnim.stop();\n\t\t\t\tif(this.fadeAnim) this.fadeAnim.stop();\n\t\t\t}\n\t\t\tif(!msg){\n\t\t\t\tdojo.debug(this.widgetId + \".setContent() incoming content was null, ignoring.\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(!this.positionDirection || !dojo.lang.inArray(this.positionDirectionTypes, this.positionDirection)){\n\t\t\t\tdojo.raise(this.widgetId + \".positionDirection is an invalid value: \" + this.positionDirection);\n\t\t\t}\n\n\t\t\t\/\/ determine type of content and apply appropriately\n\t\t\tdojo.html.removeClass(this.containerNode, this.messageCssClass);\n\t\t\tdojo.html.removeClass(this.containerNode, this.warningCssClass);\n\t\t\tdojo.html.removeClass(this.containerNode, this.errorCssClass);\n\t\t\tdojo.html.removeClass(this.containerNode, this.fatalCssClass);\n\n\t\t\tdojo.html.clearOpacity(this.containerNode);\n\t\t\t\n\t\t\tif(msg instanceof String || typeof msg == \"string\"){\n\t\t\t\tthis.contentNode.innerHTML = msg;\n\t\t\t}else if(dojo.html.isNode(msg)){\n\t\t\t\tthis.contentNode.innerHTML = dojo.html.getContentAsString(msg);\n\t\t\t}else{\n\t\t\t\tdojo.raise(\"Toaster.setContent(): msg is of unknown type:\" + msg);\n\t\t\t}\n\n\t\t\tswitch(messageType){\n\t\t\t\tcase this.messageTypes.WARNING:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.warningCssClass);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.messageTypes.ERROR:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.errorCssClass);\n\t\t\t\t\tbreak\n\t\t\t\tcase this.messageTypes.FATAL:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.fatalCssClass);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.messageTypes.MESSAGE:\n\t\t\t\tdefault:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.messageCssClass);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t\/\/ now do funky animation of widget appearing from\n\t\t\t\/\/ bottom right of page and up\n\t\t\tthis.show();\n\n\t\t\tvar nodeSize = dojo.html.getMarginBox(this.containerNode);\n\n\t\t\t\/\/ sets up initial position of container node and slide-out direction\n\t\t\tif(this.positionDirection.indexOf(\"-up\") >= 0){\n\t\t\t\tthis.containerNode.style.left=0+\"px\";\n\t\t\t\tthis.containerNode.style.top=nodeSize.height + 10 + \"px\";\n\t\t\t}else if(this.positionDirection.indexOf(\"-left\") >= 0){\n\t\t\t\tthis.containerNode.style.left=nodeSize.width + 10 +\"px\";\n\t\t\t\tthis.containerNode.style.top=0+\"px\";\n\t\t\t}else if(this.positionDirection.indexOf(\"-right\") >= 0){\n\t\t\t\tthis.containerNode.style.left = 0 - nodeSize.width - 10 + \"px\";\n\t\t\t\tthis.containerNode.style.top = 0+\"px\";\n\t\t\t}else if(this.positionDirection.indexOf(\"-down\") >= 0){\n\t\t\t\tthis.containerNode.style.left = 0+\"px\";\n\t\t\t\tthis.containerNode.style.top = 0 - nodeSize.height - 10 + \"px\";\n\t\t\t}else{\n\t\t\t\tdojo.raise(this.widgetId + \".positionDirection is an invalid value: \" + this.positionDirection);\n\t\t\t}\n\n\t\t\tthis.slideAnim = dojo.lfx.html.slideTo(\n\t\t\t\tthis.containerNode,\n\t\t\t\t{ top: 0, left: 0 },\n\t\t\t\t450,\n\t\t\t\tnull,\n\t\t\t\tdojo.lang.hitch(this, function(nodes, anim){\n\t\t\t\t\tdojo.lang.setTimeout(dojo.lang.hitch(this, function(evt){\n\t\t\t\t\t\t\/\/ we must hide the iframe in order to fade\n\t\t\t\t\t\t\/\/ TODO: figure out how to fade with a BackgroundIframe\n\t\t\t\t\t\tif(this.bgIframe){\n\t\t\t\t\t\t\tthis.bgIframe.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\/\/ can't do a fadeHide because we're fading the\n\t\t\t\t\t\t\/\/ inner node rather than the clipping node\n\t\t\t\t\t\tthis.fadeAnim = dojo.lfx.html.fadeOut(\n\t\t\t\t\t\t\tthis.containerNode,\n\t\t\t\t\t\t\t1000,\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tdojo.lang.hitch(this, function(evt){\n\t\t\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t\t})).play();\n\t\t\t\t\t}), this.showDelay);\n\t\t\t\t})).play();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Toaster.this.messageTypes.WARNING":{"_":{"meta":{"summary":"","parameters":{"msg":{"type":""},"messageType":{"type":""}},"src":"\t\t\t\tdojo.lang.setTimeout(50, dojo.lang.hitch(this, function(){\n\t\t\t\t\tthis.setContent(msg, messageType);\n\t\t\t\t}));\n\t\t\t\treturn;\n\t\t\t}else if(this.slideAnim){\n\t\t\t\tthis.slideAnim.stop();\n\t\t\t\tif(this.fadeAnim) this.fadeAnim.stop();\n\t\t\t}\n\t\t\tif(!msg){\n\t\t\t\tdojo.debug(this.widgetId + \".setContent() incoming content was null, ignoring.\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(!this.positionDirection || !dojo.lang.inArray(this.positionDirectionTypes, this.positionDirection)){\n\t\t\t\tdojo.raise(this.widgetId + \".positionDirection is an invalid value: \" + this.positionDirection);\n\t\t\t}\n\n\t\t\t\/\/ determine type of content and apply appropriately\n\t\t\tdojo.html.removeClass(this.containerNode, this.messageCssClass);\n\t\t\tdojo.html.removeClass(this.containerNode, this.warningCssClass);\n\t\t\tdojo.html.removeClass(this.containerNode, this.errorCssClass);\n\t\t\tdojo.html.removeClass(this.containerNode, this.fatalCssClass);\n\n\t\t\tdojo.html.clearOpacity(this.containerNode);\n\t\t\t\n\t\t\tif(msg instanceof String || typeof msg == \"string\"){\n\t\t\t\tthis.contentNode.innerHTML = msg;\n\t\t\t}else if(dojo.html.isNode(msg)){\n\t\t\t\tthis.contentNode.innerHTML = dojo.html.getContentAsString(msg);\n\t\t\t}else{\n\t\t\t\tdojo.raise(\"Toaster.setContent(): msg is of unknown type:\" + msg);\n\t\t\t}\n\n\t\t\tswitch(messageType){\n\t\t\t\tcase this.messageTypes.WARNING:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.warningCssClass);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.messageTypes.ERROR:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.errorCssClass);\n\t\t\t\t\tbreak\n\t\t\t\tcase this.messageTypes.FATAL:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.fatalCssClass);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.messageTypes.MESSAGE:\n\t\t\t\tdefault:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.messageCssClass);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t\/\/ now do funky animation of widget appearing from\n\t\t\t\/\/ bottom right of page and up\n\t\t\tthis.show();\n\n\t\t\tvar nodeSize = dojo.html.getMarginBox(this.containerNode);\n\n\t\t\t\/\/ sets up initial position of container node and slide-out direction\n\t\t\tif(this.positionDirection.indexOf(\"-up\") >= 0){\n\t\t\t\tthis.containerNode.style.left=0+\"px\";\n\t\t\t\tthis.containerNode.style.top=nodeSize.height + 10 + \"px\";\n\t\t\t}else if(this.positionDirection.indexOf(\"-left\") >= 0){\n\t\t\t\tthis.containerNode.style.left=nodeSize.width + 10 +\"px\";\n\t\t\t\tthis.containerNode.style.top=0+\"px\";\n\t\t\t}else if(this.positionDirection.indexOf(\"-right\") >= 0){\n\t\t\t\tthis.containerNode.style.left = 0 - nodeSize.width - 10 + \"px\";\n\t\t\t\tthis.containerNode.style.top = 0+\"px\";\n\t\t\t}else if(this.positionDirection.indexOf(\"-down\") >= 0){\n\t\t\t\tthis.containerNode.style.left = 0+\"px\";\n\t\t\t\tthis.containerNode.style.top = 0 - nodeSize.height - 10 + \"px\";\n\t\t\t}else{\n\t\t\t\tdojo.raise(this.widgetId + \".positionDirection is an invalid value: \" + this.positionDirection);\n\t\t\t}\n\n\t\t\tthis.slideAnim = dojo.lfx.html.slideTo(\n\t\t\t\tthis.containerNode,\n\t\t\t\t{ top: 0, left: 0 },\n\t\t\t\t450,\n\t\t\t\tnull,\n\t\t\t\tdojo.lang.hitch(this, function(nodes, anim){\n\t\t\t\t\tdojo.lang.setTimeout(dojo.lang.hitch(this, function(evt){\n\t\t\t\t\t\t\/\/ we must hide the iframe in order to fade\n\t\t\t\t\t\t\/\/ TODO: figure out how to fade with a BackgroundIframe\n\t\t\t\t\t\tif(this.bgIframe){\n\t\t\t\t\t\t\tthis.bgIframe.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\/\/ can't do a fadeHide because we're fading the\n\t\t\t\t\t\t\/\/ inner node rather than the clipping node\n\t\t\t\t\t\tthis.fadeAnim = dojo.lfx.html.fadeOut(\n\t\t\t\t\t\t\tthis.containerNode,\n\t\t\t\t\t\t\t1000,\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tdojo.lang.hitch(this, function(evt){\n\t\t\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t\t})).play();\n\t\t\t\t\t}), this.showDelay);\n\t\t\t\t})).play();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Toaster.this.messageTypes.ERROR":{"_":{"meta":{"summary":"","parameters":{"msg":{"type":""},"messageType":{"type":""}},"src":"\t\t\t\tdojo.lang.setTimeout(50, dojo.lang.hitch(this, function(){\n\t\t\t\t\tthis.setContent(msg, messageType);\n\t\t\t\t}));\n\t\t\t\treturn;\n\t\t\t}else if(this.slideAnim){\n\t\t\t\tthis.slideAnim.stop();\n\t\t\t\tif(this.fadeAnim) this.fadeAnim.stop();\n\t\t\t}\n\t\t\tif(!msg){\n\t\t\t\tdojo.debug(this.widgetId + \".setContent() incoming content was null, ignoring.\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(!this.positionDirection || !dojo.lang.inArray(this.positionDirectionTypes, this.positionDirection)){\n\t\t\t\tdojo.raise(this.widgetId + \".positionDirection is an invalid value: \" + this.positionDirection);\n\t\t\t}\n\n\t\t\t\/\/ determine type of content and apply appropriately\n\t\t\tdojo.html.removeClass(this.containerNode, this.messageCssClass);\n\t\t\tdojo.html.removeClass(this.containerNode, this.warningCssClass);\n\t\t\tdojo.html.removeClass(this.containerNode, this.errorCssClass);\n\t\t\tdojo.html.removeClass(this.containerNode, this.fatalCssClass);\n\n\t\t\tdojo.html.clearOpacity(this.containerNode);\n\t\t\t\n\t\t\tif(msg instanceof String || typeof msg == \"string\"){\n\t\t\t\tthis.contentNode.innerHTML = msg;\n\t\t\t}else if(dojo.html.isNode(msg)){\n\t\t\t\tthis.contentNode.innerHTML = dojo.html.getContentAsString(msg);\n\t\t\t}else{\n\t\t\t\tdojo.raise(\"Toaster.setContent(): msg is of unknown type:\" + msg);\n\t\t\t}\n\n\t\t\tswitch(messageType){\n\t\t\t\tcase this.messageTypes.WARNING:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.warningCssClass);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.messageTypes.ERROR:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.errorCssClass);\n\t\t\t\t\tbreak\n\t\t\t\tcase this.messageTypes.FATAL:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.fatalCssClass);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.messageTypes.MESSAGE:\n\t\t\t\tdefault:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.messageCssClass);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t\/\/ now do funky animation of widget appearing from\n\t\t\t\/\/ bottom right of page and up\n\t\t\tthis.show();\n\n\t\t\tvar nodeSize = dojo.html.getMarginBox(this.containerNode);\n\n\t\t\t\/\/ sets up initial position of container node and slide-out direction\n\t\t\tif(this.positionDirection.indexOf(\"-up\") >= 0){\n\t\t\t\tthis.containerNode.style.left=0+\"px\";\n\t\t\t\tthis.containerNode.style.top=nodeSize.height + 10 + \"px\";\n\t\t\t}else if(this.positionDirection.indexOf(\"-left\") >= 0){\n\t\t\t\tthis.containerNode.style.left=nodeSize.width + 10 +\"px\";\n\t\t\t\tthis.containerNode.style.top=0+\"px\";\n\t\t\t}else if(this.positionDirection.indexOf(\"-right\") >= 0){\n\t\t\t\tthis.containerNode.style.left = 0 - nodeSize.width - 10 + \"px\";\n\t\t\t\tthis.containerNode.style.top = 0+\"px\";\n\t\t\t}else if(this.positionDirection.indexOf(\"-down\") >= 0){\n\t\t\t\tthis.containerNode.style.left = 0+\"px\";\n\t\t\t\tthis.containerNode.style.top = 0 - nodeSize.height - 10 + \"px\";\n\t\t\t}else{\n\t\t\t\tdojo.raise(this.widgetId + \".positionDirection is an invalid value: \" + this.positionDirection);\n\t\t\t}\n\n\t\t\tthis.slideAnim = dojo.lfx.html.slideTo(\n\t\t\t\tthis.containerNode,\n\t\t\t\t{ top: 0, left: 0 },\n\t\t\t\t450,\n\t\t\t\tnull,\n\t\t\t\tdojo.lang.hitch(this, function(nodes, anim){\n\t\t\t\t\tdojo.lang.setTimeout(dojo.lang.hitch(this, function(evt){\n\t\t\t\t\t\t\/\/ we must hide the iframe in order to fade\n\t\t\t\t\t\t\/\/ TODO: figure out how to fade with a BackgroundIframe\n\t\t\t\t\t\tif(this.bgIframe){\n\t\t\t\t\t\t\tthis.bgIframe.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\/\/ can't do a fadeHide because we're fading the\n\t\t\t\t\t\t\/\/ inner node rather than the clipping node\n\t\t\t\t\t\tthis.fadeAnim = dojo.lfx.html.fadeOut(\n\t\t\t\t\t\t\tthis.containerNode,\n\t\t\t\t\t\t\t1000,\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tdojo.lang.hitch(this, function(evt){\n\t\t\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t\t})).play();\n\t\t\t\t\t}), this.showDelay);\n\t\t\t\t})).play();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Toaster.this.messageTypes.FATAL":{"_":{"meta":{"summary":"","parameters":{"msg":{"type":""},"messageType":{"type":""}},"src":"\t\t\t\tdojo.lang.setTimeout(50, dojo.lang.hitch(this, function(){\n\t\t\t\t\tthis.setContent(msg, messageType);\n\t\t\t\t}));\n\t\t\t\treturn;\n\t\t\t}else if(this.slideAnim){\n\t\t\t\tthis.slideAnim.stop();\n\t\t\t\tif(this.fadeAnim) this.fadeAnim.stop();\n\t\t\t}\n\t\t\tif(!msg){\n\t\t\t\tdojo.debug(this.widgetId + \".setContent() incoming content was null, ignoring.\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(!this.positionDirection || !dojo.lang.inArray(this.positionDirectionTypes, this.positionDirection)){\n\t\t\t\tdojo.raise(this.widgetId + \".positionDirection is an invalid value: \" + this.positionDirection);\n\t\t\t}\n\n\t\t\t\/\/ determine type of content and apply appropriately\n\t\t\tdojo.html.removeClass(this.containerNode, this.messageCssClass);\n\t\t\tdojo.html.removeClass(this.containerNode, this.warningCssClass);\n\t\t\tdojo.html.removeClass(this.containerNode, this.errorCssClass);\n\t\t\tdojo.html.removeClass(this.containerNode, this.fatalCssClass);\n\n\t\t\tdojo.html.clearOpacity(this.containerNode);\n\t\t\t\n\t\t\tif(msg instanceof String || typeof msg == \"string\"){\n\t\t\t\tthis.contentNode.innerHTML = msg;\n\t\t\t}else if(dojo.html.isNode(msg)){\n\t\t\t\tthis.contentNode.innerHTML = dojo.html.getContentAsString(msg);\n\t\t\t}else{\n\t\t\t\tdojo.raise(\"Toaster.setContent(): msg is of unknown type:\" + msg);\n\t\t\t}\n\n\t\t\tswitch(messageType){\n\t\t\t\tcase this.messageTypes.WARNING:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.warningCssClass);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.messageTypes.ERROR:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.errorCssClass);\n\t\t\t\t\tbreak\n\t\t\t\tcase this.messageTypes.FATAL:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.fatalCssClass);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.messageTypes.MESSAGE:\n\t\t\t\tdefault:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.messageCssClass);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t\/\/ now do funky animation of widget appearing from\n\t\t\t\/\/ bottom right of page and up\n\t\t\tthis.show();\n\n\t\t\tvar nodeSize = dojo.html.getMarginBox(this.containerNode);\n\n\t\t\t\/\/ sets up initial position of container node and slide-out direction\n\t\t\tif(this.positionDirection.indexOf(\"-up\") >= 0){\n\t\t\t\tthis.containerNode.style.left=0+\"px\";\n\t\t\t\tthis.containerNode.style.top=nodeSize.height + 10 + \"px\";\n\t\t\t}else if(this.positionDirection.indexOf(\"-left\") >= 0){\n\t\t\t\tthis.containerNode.style.left=nodeSize.width + 10 +\"px\";\n\t\t\t\tthis.containerNode.style.top=0+\"px\";\n\t\t\t}else if(this.positionDirection.indexOf(\"-right\") >= 0){\n\t\t\t\tthis.containerNode.style.left = 0 - nodeSize.width - 10 + \"px\";\n\t\t\t\tthis.containerNode.style.top = 0+\"px\";\n\t\t\t}else if(this.positionDirection.indexOf(\"-down\") >= 0){\n\t\t\t\tthis.containerNode.style.left = 0+\"px\";\n\t\t\t\tthis.containerNode.style.top = 0 - nodeSize.height - 10 + \"px\";\n\t\t\t}else{\n\t\t\t\tdojo.raise(this.widgetId + \".positionDirection is an invalid value: \" + this.positionDirection);\n\t\t\t}\n\n\t\t\tthis.slideAnim = dojo.lfx.html.slideTo(\n\t\t\t\tthis.containerNode,\n\t\t\t\t{ top: 0, left: 0 },\n\t\t\t\t450,\n\t\t\t\tnull,\n\t\t\t\tdojo.lang.hitch(this, function(nodes, anim){\n\t\t\t\t\tdojo.lang.setTimeout(dojo.lang.hitch(this, function(evt){\n\t\t\t\t\t\t\/\/ we must hide the iframe in order to fade\n\t\t\t\t\t\t\/\/ TODO: figure out how to fade with a BackgroundIframe\n\t\t\t\t\t\tif(this.bgIframe){\n\t\t\t\t\t\t\tthis.bgIframe.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\/\/ can't do a fadeHide because we're fading the\n\t\t\t\t\t\t\/\/ inner node rather than the clipping node\n\t\t\t\t\t\tthis.fadeAnim = dojo.lfx.html.fadeOut(\n\t\t\t\t\t\t\tthis.containerNode,\n\t\t\t\t\t\t\t1000,\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tdojo.lang.hitch(this, function(evt){\n\t\t\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t\t})).play();\n\t\t\t\t\t}), this.showDelay);\n\t\t\t\t})).play();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Toaster.this.messageTypes.MESSAGE":{"_":{"meta":{"summary":"","parameters":{"msg":{"type":""},"messageType":{"type":""}},"src":"\t\t\t\tdojo.lang.setTimeout(50, dojo.lang.hitch(this, function(){\n\t\t\t\t\tthis.setContent(msg, messageType);\n\t\t\t\t}));\n\t\t\t\treturn;\n\t\t\t}else if(this.slideAnim){\n\t\t\t\tthis.slideAnim.stop();\n\t\t\t\tif(this.fadeAnim) this.fadeAnim.stop();\n\t\t\t}\n\t\t\tif(!msg){\n\t\t\t\tdojo.debug(this.widgetId + \".setContent() incoming content was null, ignoring.\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(!this.positionDirection || !dojo.lang.inArray(this.positionDirectionTypes, this.positionDirection)){\n\t\t\t\tdojo.raise(this.widgetId + \".positionDirection is an invalid value: \" + this.positionDirection);\n\t\t\t}\n\n\t\t\t\/\/ determine type of content and apply appropriately\n\t\t\tdojo.html.removeClass(this.containerNode, this.messageCssClass);\n\t\t\tdojo.html.removeClass(this.containerNode, this.warningCssClass);\n\t\t\tdojo.html.removeClass(this.containerNode, this.errorCssClass);\n\t\t\tdojo.html.removeClass(this.containerNode, this.fatalCssClass);\n\n\t\t\tdojo.html.clearOpacity(this.containerNode);\n\t\t\t\n\t\t\tif(msg instanceof String || typeof msg == \"string\"){\n\t\t\t\tthis.contentNode.innerHTML = msg;\n\t\t\t}else if(dojo.html.isNode(msg)){\n\t\t\t\tthis.contentNode.innerHTML = dojo.html.getContentAsString(msg);\n\t\t\t}else{\n\t\t\t\tdojo.raise(\"Toaster.setContent(): msg is of unknown type:\" + msg);\n\t\t\t}\n\n\t\t\tswitch(messageType){\n\t\t\t\tcase this.messageTypes.WARNING:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.warningCssClass);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.messageTypes.ERROR:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.errorCssClass);\n\t\t\t\t\tbreak\n\t\t\t\tcase this.messageTypes.FATAL:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.fatalCssClass);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.messageTypes.MESSAGE:\n\t\t\t\tdefault:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.messageCssClass);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t\/\/ now do funky animation of widget appearing from\n\t\t\t\/\/ bottom right of page and up\n\t\t\tthis.show();\n\n\t\t\tvar nodeSize = dojo.html.getMarginBox(this.containerNode);\n\n\t\t\t\/\/ sets up initial position of container node and slide-out direction\n\t\t\tif(this.positionDirection.indexOf(\"-up\") >= 0){\n\t\t\t\tthis.containerNode.style.left=0+\"px\";\n\t\t\t\tthis.containerNode.style.top=nodeSize.height + 10 + \"px\";\n\t\t\t}else if(this.positionDirection.indexOf(\"-left\") >= 0){\n\t\t\t\tthis.containerNode.style.left=nodeSize.width + 10 +\"px\";\n\t\t\t\tthis.containerNode.style.top=0+\"px\";\n\t\t\t}else if(this.positionDirection.indexOf(\"-right\") >= 0){\n\t\t\t\tthis.containerNode.style.left = 0 - nodeSize.width - 10 + \"px\";\n\t\t\t\tthis.containerNode.style.top = 0+\"px\";\n\t\t\t}else if(this.positionDirection.indexOf(\"-down\") >= 0){\n\t\t\t\tthis.containerNode.style.left = 0+\"px\";\n\t\t\t\tthis.containerNode.style.top = 0 - nodeSize.height - 10 + \"px\";\n\t\t\t}else{\n\t\t\t\tdojo.raise(this.widgetId + \".positionDirection is an invalid value: \" + this.positionDirection);\n\t\t\t}\n\n\t\t\tthis.slideAnim = dojo.lfx.html.slideTo(\n\t\t\t\tthis.containerNode,\n\t\t\t\t{ top: 0, left: 0 },\n\t\t\t\t450,\n\t\t\t\tnull,\n\t\t\t\tdojo.lang.hitch(this, function(nodes, anim){\n\t\t\t\t\tdojo.lang.setTimeout(dojo.lang.hitch(this, function(evt){\n\t\t\t\t\t\t\/\/ we must hide the iframe in order to fade\n\t\t\t\t\t\t\/\/ TODO: figure out how to fade with a BackgroundIframe\n\t\t\t\t\t\tif(this.bgIframe){\n\t\t\t\t\t\t\tthis.bgIframe.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\/\/ can't do a fadeHide because we're fading the\n\t\t\t\t\t\t\/\/ inner node rather than the clipping node\n\t\t\t\t\t\tthis.fadeAnim = dojo.lfx.html.fadeOut(\n\t\t\t\t\t\t\tthis.containerNode,\n\t\t\t\t\t\t\t1000,\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tdojo.lang.hitch(this, function(evt){\n\t\t\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t\t})).play();\n\t\t\t\t\t}), this.showDelay);\n\t\t\t\t})).play();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Toaster.default":{"_":{"meta":{"summary":"","parameters":{"msg":{"type":""},"messageType":{"type":""}},"src":"\t\t\t\tdojo.lang.setTimeout(50, dojo.lang.hitch(this, function(){\n\t\t\t\t\tthis.setContent(msg, messageType);\n\t\t\t\t}));\n\t\t\t\treturn;\n\t\t\t}else if(this.slideAnim){\n\t\t\t\tthis.slideAnim.stop();\n\t\t\t\tif(this.fadeAnim) this.fadeAnim.stop();\n\t\t\t}\n\t\t\tif(!msg){\n\t\t\t\tdojo.debug(this.widgetId + \".setContent() incoming content was null, ignoring.\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(!this.positionDirection || !dojo.lang.inArray(this.positionDirectionTypes, this.positionDirection)){\n\t\t\t\tdojo.raise(this.widgetId + \".positionDirection is an invalid value: \" + this.positionDirection);\n\t\t\t}\n\n\t\t\t\/\/ determine type of content and apply appropriately\n\t\t\tdojo.html.removeClass(this.containerNode, this.messageCssClass);\n\t\t\tdojo.html.removeClass(this.containerNode, this.warningCssClass);\n\t\t\tdojo.html.removeClass(this.containerNode, this.errorCssClass);\n\t\t\tdojo.html.removeClass(this.containerNode, this.fatalCssClass);\n\n\t\t\tdojo.html.clearOpacity(this.containerNode);\n\t\t\t\n\t\t\tif(msg instanceof String || typeof msg == \"string\"){\n\t\t\t\tthis.contentNode.innerHTML = msg;\n\t\t\t}else if(dojo.html.isNode(msg)){\n\t\t\t\tthis.contentNode.innerHTML = dojo.html.getContentAsString(msg);\n\t\t\t}else{\n\t\t\t\tdojo.raise(\"Toaster.setContent(): msg is of unknown type:\" + msg);\n\t\t\t}\n\n\t\t\tswitch(messageType){\n\t\t\t\tcase this.messageTypes.WARNING:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.warningCssClass);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.messageTypes.ERROR:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.errorCssClass);\n\t\t\t\t\tbreak\n\t\t\t\tcase this.messageTypes.FATAL:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.fatalCssClass);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.messageTypes.MESSAGE:\n\t\t\t\tdefault:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.messageCssClass);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t\/\/ now do funky animation of widget appearing from\n\t\t\t\/\/ bottom right of page and up\n\t\t\tthis.show();\n\n\t\t\tvar nodeSize = dojo.html.getMarginBox(this.containerNode);\n\n\t\t\t\/\/ sets up initial position of container node and slide-out direction\n\t\t\tif(this.positionDirection.indexOf(\"-up\") >= 0){\n\t\t\t\tthis.containerNode.style.left=0+\"px\";\n\t\t\t\tthis.containerNode.style.top=nodeSize.height + 10 + \"px\";\n\t\t\t}else if(this.positionDirection.indexOf(\"-left\") >= 0){\n\t\t\t\tthis.containerNode.style.left=nodeSize.width + 10 +\"px\";\n\t\t\t\tthis.containerNode.style.top=0+\"px\";\n\t\t\t}else if(this.positionDirection.indexOf(\"-right\") >= 0){\n\t\t\t\tthis.containerNode.style.left = 0 - nodeSize.width - 10 + \"px\";\n\t\t\t\tthis.containerNode.style.top = 0+\"px\";\n\t\t\t}else if(this.positionDirection.indexOf(\"-down\") >= 0){\n\t\t\t\tthis.containerNode.style.left = 0+\"px\";\n\t\t\t\tthis.containerNode.style.top = 0 - nodeSize.height - 10 + \"px\";\n\t\t\t}else{\n\t\t\t\tdojo.raise(this.widgetId + \".positionDirection is an invalid value: \" + this.positionDirection);\n\t\t\t}\n\n\t\t\tthis.slideAnim = dojo.lfx.html.slideTo(\n\t\t\t\tthis.containerNode,\n\t\t\t\t{ top: 0, left: 0 },\n\t\t\t\t450,\n\t\t\t\tnull,\n\t\t\t\tdojo.lang.hitch(this, function(nodes, anim){\n\t\t\t\t\tdojo.lang.setTimeout(dojo.lang.hitch(this, function(evt){\n\t\t\t\t\t\t\/\/ we must hide the iframe in order to fade\n\t\t\t\t\t\t\/\/ TODO: figure out how to fade with a BackgroundIframe\n\t\t\t\t\t\tif(this.bgIframe){\n\t\t\t\t\t\t\tthis.bgIframe.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\/\/ can't do a fadeHide because we're fading the\n\t\t\t\t\t\t\/\/ inner node rather than the clipping node\n\t\t\t\t\t\tthis.fadeAnim = dojo.lfx.html.fadeOut(\n\t\t\t\t\t\t\tthis.containerNode,\n\t\t\t\t\t\t\t1000,\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tdojo.lang.hitch(this, function(evt){\n\t\t\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t\t})).play();\n\t\t\t\t\t}), this.showDelay);\n\t\t\t\t})).play();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Toaster.top":{"_":{"meta":{"summary":"","parameters":{"msg":{"type":""},"messageType":{"type":""}},"src":"\t\t\t\tdojo.lang.setTimeout(50, dojo.lang.hitch(this, function(){\n\t\t\t\t\tthis.setContent(msg, messageType);\n\t\t\t\t}));\n\t\t\t\treturn;\n\t\t\t}else if(this.slideAnim){\n\t\t\t\tthis.slideAnim.stop();\n\t\t\t\tif(this.fadeAnim) this.fadeAnim.stop();\n\t\t\t}\n\t\t\tif(!msg){\n\t\t\t\tdojo.debug(this.widgetId + \".setContent() incoming content was null, ignoring.\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(!this.positionDirection || !dojo.lang.inArray(this.positionDirectionTypes, this.positionDirection)){\n\t\t\t\tdojo.raise(this.widgetId + \".positionDirection is an invalid value: \" + this.positionDirection);\n\t\t\t}\n\n\t\t\t\/\/ determine type of content and apply appropriately\n\t\t\tdojo.html.removeClass(this.containerNode, this.messageCssClass);\n\t\t\tdojo.html.removeClass(this.containerNode, this.warningCssClass);\n\t\t\tdojo.html.removeClass(this.containerNode, this.errorCssClass);\n\t\t\tdojo.html.removeClass(this.containerNode, this.fatalCssClass);\n\n\t\t\tdojo.html.clearOpacity(this.containerNode);\n\t\t\t\n\t\t\tif(msg instanceof String || typeof msg == \"string\"){\n\t\t\t\tthis.contentNode.innerHTML = msg;\n\t\t\t}else if(dojo.html.isNode(msg)){\n\t\t\t\tthis.contentNode.innerHTML = dojo.html.getContentAsString(msg);\n\t\t\t}else{\n\t\t\t\tdojo.raise(\"Toaster.setContent(): msg is of unknown type:\" + msg);\n\t\t\t}\n\n\t\t\tswitch(messageType){\n\t\t\t\tcase this.messageTypes.WARNING:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.warningCssClass);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.messageTypes.ERROR:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.errorCssClass);\n\t\t\t\t\tbreak\n\t\t\t\tcase this.messageTypes.FATAL:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.fatalCssClass);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.messageTypes.MESSAGE:\n\t\t\t\tdefault:\n\t\t\t\t\tdojo.html.addClass(this.containerNode, this.messageCssClass);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t\/\/ now do funky animation of widget appearing from\n\t\t\t\/\/ bottom right of page and up\n\t\t\tthis.show();\n\n\t\t\tvar nodeSize = dojo.html.getMarginBox(this.containerNode);\n\n\t\t\t\/\/ sets up initial position of container node and slide-out direction\n\t\t\tif(this.positionDirection.indexOf(\"-up\") >= 0){\n\t\t\t\tthis.containerNode.style.left=0+\"px\";\n\t\t\t\tthis.containerNode.style.top=nodeSize.height + 10 + \"px\";\n\t\t\t}else if(this.positionDirection.indexOf(\"-left\") >= 0){\n\t\t\t\tthis.containerNode.style.left=nodeSize.width + 10 +\"px\";\n\t\t\t\tthis.containerNode.style.top=0+\"px\";\n\t\t\t}else if(this.positionDirection.indexOf(\"-right\") >= 0){\n\t\t\t\tthis.containerNode.style.left = 0 - nodeSize.width - 10 + \"px\";\n\t\t\t\tthis.containerNode.style.top = 0+\"px\";\n\t\t\t}else if(this.positionDirection.indexOf(\"-down\") >= 0){\n\t\t\t\tthis.containerNode.style.left = 0+\"px\";\n\t\t\t\tthis.containerNode.style.top = 0 - nodeSize.height - 10 + \"px\";\n\t\t\t}else{\n\t\t\t\tdojo.raise(this.widgetId + \".positionDirection is an invalid value: \" + this.positionDirection);\n\t\t\t}\n\n\t\t\tthis.slideAnim = dojo.lfx.html.slideTo(\n\t\t\t\tthis.containerNode,\n\t\t\t\t{ top: 0, left: 0 },\n\t\t\t\t450,\n\t\t\t\tnull,\n\t\t\t\tdojo.lang.hitch(this, function(nodes, anim){\n\t\t\t\t\tdojo.lang.setTimeout(dojo.lang.hitch(this, function(evt){\n\t\t\t\t\t\t\/\/ we must hide the iframe in order to fade\n\t\t\t\t\t\t\/\/ TODO: figure out how to fade with a BackgroundIframe\n\t\t\t\t\t\tif(this.bgIframe){\n\t\t\t\t\t\t\tthis.bgIframe.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\/\/ can't do a fadeHide because we're fading the\n\t\t\t\t\t\t\/\/ inner node rather than the clipping node\n\t\t\t\t\t\tthis.fadeAnim = dojo.lfx.html.fadeOut(\n\t\t\t\t\t\t\tthis.containerNode,\n\t\t\t\t\t\t\t1000,\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tdojo.lang.hitch(this, function(evt){\n\t\t\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t\t})).play();\n\t\t\t\t\t}), this.showDelay);\n\t\t\t\t})).play();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Toaster.placeClip":{"_":{"meta":{"summary":"","src":"\t\t\tvar scroll = dojo.html.getScroll();\n\t\t\tvar view = dojo.html.getViewport();\n\n\t\t\tvar nodeSize = dojo.html.getMarginBox(this.containerNode);\n\n\t\t\t\/\/ sets up the size of the clipping node\n\t\t\tthis.clipNode.style.height = nodeSize.height+\"px\";\n\t\t\tthis.clipNode.style.width = nodeSize.width+\"px\";\n\n\t\t\t\/\/ sets up the position of the clipping node\n\t\t\tif(this.positionDirection.match(\/^t\/)){\n\t\t\t\tthis.clipNode.style.top = scroll.top+\"px\";\n\t\t\t}else if(this.positionDirection.match(\/^b\/)){\n\t\t\t\tthis.clipNode.style.top = (view.height - nodeSize.height - 2 + scroll.top)+\"px\";\n\t\t\t}\n\t\t\tif(this.positionDirection.match(\/^[tb]r-\/)){\n\t\t\t\tthis.clipNode.style.left = (view.width - nodeSize.width - 1 - scroll.left)+\"px\";\n\t\t\t}else if(this.positionDirection.match(\/^[tb]l-\/)){\n\t\t\t\tthis.clipNode.style.left = 0 + \"px\";\n\t\t\t}\n\n\t\t\tthis.clipNode.style.clip = \"rect(0px, \" + nodeSize.width + \"px, \" + nodeSize.height + \"px, 0px)\";\n\n\t\t\tif(dojo.render.html.ie){\n\t\t\t\tif(!this.bgIframe){\n\t\t\t\t\tthis.bgIframe = new dojo.html.BackgroundIframe(this.containerNode);\n\t\t\t\t\tthis.bgIframe.setZIndex(this.containerNode);\n\t\t\t\t}\n\t\t\t\tthis.bgIframe.onResized();\n\t\t\t\tthis.bgIframe.show();\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Toaster.onSelect":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Toaster.onScroll":{"_":{"meta":{"summary":"","src":"\t\t\tthis.placeClip();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Toaster.show":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.widget.Toaster.superclass.show.call(this);\n\n\t\t\tthis.placeClip();\n\n\t\t\tif(!this._scrollConnected){\n\t\t\t\tthis._scrollConnected = true;\n\t\t\t\tdojo.event.connect(window, \"onscroll\", this, \"onScroll\");\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.Toaster.hide":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.widget.Toaster.superclass.hide.call(this);\n\n\t\t\tif(this._scrollConnected){\n\t\t\t\tthis._scrollConnected = false;\n\t\t\t\tdojo.event.disconnect(window, \"onscroll\", this, \"onScroll\");\n\t\t\t}\n\n\t\t\tdojo.html.setOpacity(this.containerNode, 1.0);","this":"dojo.widget.HtmlWidget"}}}}}},"dojo.widget.Toggler":{"meta":{"requires":{"common":["dojo.widget.*","dojo.event.*"]},"methods":{"dojo.widget.Toggler":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}}}}},"dojo.widget.Toolbar":{"meta":{"requires":{"common":["dojo.widget.*","dojo.html.style"]},"methods":{"dojo.widget.ToolbarContainer":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}},"dojo.widget.Toolbar":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}},"dojo.widget.ToolbarItem":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}},"dojo.widget.ToolbarButtonGroup":{"_":{"meta":{"summary":"","inherits":["dojo.widget.ToolbarItem"],"this_inherits":["dojo.widget.ToolbarItem"]}}},"dojo.widget.ToolbarButton":{"_":{"meta":{"summary":"","inherits":["dojo.widget.ToolbarItem"],"this_inherits":["dojo.widget.ToolbarItem"]}}},"dojo.widget.ToolbarDialog":{"_":{"meta":{"summary":"","inherits":["dojo.widget.ToolbarButton"],"this_inherits":["dojo.widget.ToolbarButton"]}}},"dojo.widget.ToolbarMenu":{"_":{"meta":{"summary":"","inherits":["dojo.widget.ToolbarDialog"],"this_inherits":["dojo.widget.ToolbarDialog"]}}},"dojo.widget.ToolbarSeparator":{"_":{"meta":{"summary":"","inherits":["dojo.widget.ToolbarItem"],"this_inherits":["dojo.widget.ToolbarItem"]}}},"dojo.widget.ToolbarSpace":{"_":{"meta":{"summary":"","inherits":["dojo.widget.ToolbarSeparator"],"this_inherits":["dojo.widget.ToolbarSeparator"]}}},"dojo.widget.ToolbarSelect":{"_":{"meta":{"summary":"","inherits":["dojo.widget.ToolbarItem"],"this_inherits":["dojo.widget.ToolbarItem"]}}},"dojo.widget.ToolbarItem.make":{"_":{"meta":{"summary":"","parameters":{"wh":{"type":""},"whIsType":{"type":""},"props":{"type":""}},"src":"\tvar item = null;\n\n\tif(wh instanceof Array) {\n\t\titem = dojo.widget.createWidget(\"ToolbarButtonGroup\", props);\n\t\titem.setName(wh[0]);\n\t\tfor(var i = 1; i < wh.length; i++) {\n\t\t\titem.addChild(wh[i]);\n\t\t}\n\t} else if(wh instanceof dojo.widget.ToolbarItem) {\n\t\titem = wh;\n\t} else if(wh instanceof dojo.uri.Uri) {\n\t\titem = dojo.widget.createWidget(\"ToolbarButton\",\n\t\t\tdojo.lang.mixin(props||{}, {icon: new dojo.widget.Icon(wh.toString())}));\n\t} else if(whIsType) {\n\t\titem = dojo.widget.createWidget(wh, props);\n\t} else if(typeof wh == \"string\" || wh instanceof String) {\n\t\tswitch(wh.charAt(0)) {\n\t\t\tcase \"|\":\n\t\t\tcase \"-\":\n\t\t\tcase \"\/\":\n\t\t\t\titem = dojo.widget.createWidget(\"ToolbarSeparator\", props);\n\t\t\t\tbreak;\n\t\t\tcase \" \":\n\t\t\t\tif(wh.length == 1) {\n\t\t\t\t\titem = dojo.widget.createWidget(\"ToolbarSpace\", props);\n\t\t\t\t} else {\n\t\t\t\t\titem = dojo.widget.createWidget(\"ToolbarFlexibleSpace\", props);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif(\/\\.(gif|jpg|jpeg|png)$\/i.test(wh)) {\n\t\t\t\t\titem = dojo.widget.createWidget(\"ToolbarButton\",\n\t\t\t\t\t\tdojo.lang.mixin(props||{}, {icon: new dojo.widget.Icon(wh.toString())}));\n\t\t\t\t} else {\n\t\t\t\t\titem = dojo.widget.createWidget(\"ToolbarButton\",\n\t\t\t\t\t\tdojo.lang.mixin(props||{}, {label: wh.toString()}));\n\t\t\t\t}\n\t\t}\n\t} else if(wh && wh.tagName && \/^img$\/i.test(wh.tagName)) {\n\t\titem = dojo.widget.createWidget(\"ToolbarButton\",\n\t\t\tdojo.lang.mixin(props||{}, {icon: wh}));\n\t} else {\n\t\titem = dojo.widget.createWidget(\"ToolbarButton\",\n\t\t\tdojo.lang.mixin(props||{}, {label: wh.toString()}));\n\t}\n\treturn item;"}}},"dojo.widget.ToolbarMenuItem":{"_":{"meta":{"summary":"","src":""}}},"dojo.widget.Icon":{"_":{"meta":{"summary":"","parameters":{"enabled":{"type":""},"disabled":{"type":""},"hovered":{"type":""},"selected":{"type":""}},"src":"\tif(!arguments.length){\n\t\t\/\/ FIXME: should this be dojo.raise?\n\t\tthrow new Error(\"Icon must have at least an enabled state\");\n\t}\n\tvar states = [\"enabled\", \"disabled\", \"hovered\", \"selected\"];\n\tvar currentState = \"enabled\";\n\tvar domNode = document.createElement(\"img\");\n\n\tthis.getState = function(){ return currentState; }\n\tthis.setState = function(value){\n\t\tif(dojo.lang.inArray(value, states)){\n\t\t\tif(this[value]){\n\t\t\t\tcurrentState = value;\n\t\t\t\tvar img = this[currentState];\n\t\t\t\tif ((dojo.render.html.ie55 || dojo.render.html.ie60) && img.src && img.src.match(\/[.]png$\/i) ) {\n\t\t\t\t\tdomNode.width = img.width||img.offsetWidth;\n\t\t\t\t\tdomNode.height = img.height||img.offsetHeight;\n\t\t\t\t\tdomNode.setAttribute(\"src\", dojo.uri.dojoUri(\"src\/widget\/templates\/images\/blank.gif\").uri);\n\t\t\t\t\tdomNode.style.filter=\"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='\"+img.src+\"',sizingMethod='image')\";\n\t\t\t\t} else {\n\t\t\t\t\tdomNode.setAttribute(\"src\", img.src);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tthrow new Error(\"Invalid state set on Icon (state: \" + value + \")\");\n\t\t}\n\t}\n\n\tthis.setSrc = function(state, value){\n\t\tif(\/^img$\/i.test(value.tagName)){\n\t\t\tthis[state] = value;\n\t\t}else if(typeof value == \"string\" || value instanceof String\n\t\t\t|| value instanceof dojo.uri.Uri){\n\t\t\tthis[state] = new Image();\n\t\t\tthis[state].src = value.toString();\n\t\t}\n\t\treturn this[state];\n\t}\n\n\tthis.setIcon = function(icon){\n\t\tfor(var i = 0; i < states.length; i++){\n\t\t\tif(icon[states[i]]){\n\t\t\t\tthis.setSrc(states[i], icon[states[i]]);\n\t\t\t}\n\t\t}\n\t\tthis.update();\n\t}\n\n\tthis.enable = function(){ this.setState(\"enabled\"); }\n\tthis.disable = function(){ this.setState(\"disabled\"); }\n\tthis.hover = function(){ this.setState(\"hovered\"); }\n\tthis.select = function(){ this.setState(\"selected\"); }\n\n\tthis.getSize = function(){\n\t\treturn {\n\t\t\twidth: domNode.width||domNode.offsetWidth,\n\t\t\theight: domNode.height||domNode.offsetHeight\n\t\t};\n\t}\n\n\tthis.setSize = function(w, h){\n\t\tdomNode.width = w;\n\t\tdomNode.height = h;\n\t\treturn { width: w, height: h };\n\t}\n\n\tthis.getNode = function(){\n\t\treturn domNode;\n\t}\n\n\tthis.getSrc = function(state){\n\t\tif(state){ return this[state].src; }\n\t\treturn domNode.src||\"\";\n\t}\n\n\tthis.update = function(){\n\t\tthis.setState(currentState);\n\t}\n\n\tfor(var i = 0; i < states.length; i++){\n\t\tvar arg = arguments[i];\n\t\tvar state = states[i];\n\t\tthis[state] = null;\n\t\tif(!arg){ continue; }\n\t\tthis.setSrc(state, arg);\n\t}\n\n\tthis.enable();","this_variables":["getState","setState","setSrc","setIcon","enable","disable","hover","select","getSize","setSize","getNode","getSrc","update"]}}},"dojo.widget.Icon.getState":{"_":{"meta":{"summary":"","src":"                             return currentState;   "}}},"dojo.widget.Icon.setState":{"_":{"meta":{"summary":"","parameters":{"value":{"type":""}},"src":"\t\tif(dojo.lang.inArray(value, states)){\n\t\t\tif(this[value]){\n\t\t\t\tcurrentState = value;\n\t\t\t\tvar img = this[currentState];\n\t\t\t\tif ((dojo.render.html.ie55 || dojo.render.html.ie60) && img.src && img.src.match(\/[.]png$\/i) ) {\n\t\t\t\t\tdomNode.width = img.width||img.offsetWidth;\n\t\t\t\t\tdomNode.height = img.height||img.offsetHeight;\n\t\t\t\t\tdomNode.setAttribute(\"src\", dojo.uri.dojoUri(\"src\/widget\/templates\/images\/blank.gif\").uri);\n\t\t\t\t\tdomNode.style.filter=\"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='\"+img.src+\"',sizingMethod='image')\";\n\t\t\t\t} else {\n\t\t\t\t\tdomNode.setAttribute(\"src\", img.src);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tthrow new Error(\"Invalid state set on Icon (state: \" + value + \")\");\n\t\t}"}}},"dojo.widget.Icon.setSrc":{"_":{"meta":{"summary":"","parameters":{"state":{"type":""},"value":{"type":""}},"src":"\t\tif(\/^img$\/i.test(value.tagName)){\n\t\t\tthis[state] = value;\n\t\t}else if(typeof value == \"string\" || value instanceof String\n\t\t\t|| value instanceof dojo.uri.Uri){\n\t\t\tthis[state] = new Image();\n\t\t\tthis[state].src = value.toString();\n\t\t}\n\t\treturn this[state];"}}},"dojo.widget.Icon.setIcon":{"_":{"meta":{"summary":"","parameters":{"icon":{"type":""}},"src":"\t\tfor(var i = 0; i < states.length; i++){\n\t\t\tif(icon[states[i]]){\n\t\t\t\tthis.setSrc(states[i], icon[states[i]]);\n\t\t\t}\n\t\t}\n\t\tthis.update();"}}},"dojo.widget.Icon.enable":{"_":{"meta":{"summary":"","src":"                           this.setState(\"enabled\");   "}}},"dojo.widget.Icon.disable":{"_":{"meta":{"summary":"","src":"                            this.setState(\"disabled\");   "}}},"dojo.widget.Icon.hover":{"_":{"meta":{"summary":"","src":"                          this.setState(\"hovered\");   "}}},"dojo.widget.Icon.select":{"_":{"meta":{"summary":"","src":"                           this.setState(\"selected\");   "}}},"dojo.widget.Icon.getSize":{"_":{"meta":{"summary":"","src":"\t\treturn {\n\t\t\twidth: domNode.width||domNode.offsetWidth,\n\t\t\theight: domNode.height||domNode.offsetHeight\n\t\t};"}}},"dojo.widget.Icon.setSize":{"_":{"meta":{"summary":"","parameters":{"w":{"type":""},"h":{"type":""}},"src":"\t\tdomNode.width = w;\n\t\tdomNode.height = h;\n\t\treturn { width: w, height: h };"}}},"dojo.widget.Icon.getNode":{"_":{"meta":{"summary":"","src":"\t\treturn domNode;"}}},"dojo.widget.Icon.getSrc":{"_":{"meta":{"summary":"","parameters":{"state":{"type":""}},"src":"\t\tif(state){ return this[state].src; }\n\t\treturn domNode.src||\"\";"}}},"dojo.widget.Icon.update":{"_":{"meta":{"summary":"","src":"\t\tthis.setState(currentState);"}}},"dojo.widget.Icon.make":{"_":{"meta":{"summary":"","parameters":{"a":{"type":""},"":{"type":""}},"src":"\tfor(var i = 0; i < arguments.length; i++){\n\t\tif(arguments[i] instanceof dojo.widget.Icon){\n\t\t\treturn arguments[i];\n\t\t}\n\t}\n\n\treturn new dojo.widget.Icon(a,b,c,d);"}}}}}},"dojo.widget.Tooltip":{"meta":{"requires":{"common":["dojo.widget.ContentPane","dojo.widget.Menu2","dojo.uri.Uri","dojo.widget.*","dojo.event.*","dojo.html.style","dojo.html.util","dojo.html.iframe"]},"methods":{"dojo.widget.Tooltip":{"_":{"meta":{"summary":"","inherits":["[dojo.widget.ContentPane, dojo.widget.PopupContainerBase]"],"this_inherits":["[dojo.widget.ContentPane, dojo.widget.PopupContainerBase]"],"protovariables":{"isContainer":"","caption":"","showDelay":"","hideDelay":"","connectId":"","templateCssPath":"","connectNode":""}}}},"dojo.widget.Tooltip.fillInTemplate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\t\tif(this.caption != \"\"){\n\t\t\t\tthis.domNode.appendChild(document.createTextNode(this.caption));\n\t\t\t}\n\t\t\tthis.connectNode = dojo.byId(this.connectId);\n\t\t\tdojo.widget.Tooltip.superclass.fillInTemplate.call(this, args, frag);\n\n\t\t\tthis.addOnLoad(this, \"_LoadedContent\");\n\t\t\tdojo.html.addClass(this.domNode, \"dojoTooltip\");\n\n\t\t\t\/\/copy style from input node to output node\n\t\t\tvar source = this.getFragNodeRef(frag);\n\t\t\tdojo.html.copyStyle(this.domNode, source);\n\n\t\t\t\/\/apply the necessary css rules to the node so that it can popup\n\t\t\tthis.applyPopupBasicStyle();","this_inherits":["dojo.widget.Tooltip.superclass.fillInTemplate"],"this":"[dojo.widget.ContentPane, dojo.widget.PopupContainerBase]"}}},"[dojo.widget.ContentPane, dojo.widget.PopupContainerBase]":{"_":{"meta":{"this_variables":["connectNode","mouse","showTimer","mouse","hideTimer","mouse","hideTimer"]}}},"dojo.widget.Tooltip.postCreate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\t\tdojo.event.connect(this.connectNode, \"onmouseover\", this, \"onMouseOver\");\n\t\t\tdojo.widget.Tooltip.superclass.postCreate.call(this, args, frag);","this_inherits":["dojo.widget.Tooltip.superclass.postCreate"],"this":"[dojo.widget.ContentPane, dojo.widget.PopupContainerBase]"}}},"dojo.widget.Tooltip.onMouseOver":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tthis.mouse = {x: e.pageX, y: e.pageY};\n\n\t\t\tif(!this.showTimer){\n\t\t\t\tthis.showTimer = setTimeout(dojo.lang.hitch(this, \"open\"), this.showDelay);\n\t\t\t\tdojo.event.connect(document.documentElement, \"onmousemove\", this, \"onMouseMove\");\n\t\t\t}","this":"[dojo.widget.ContentPane, dojo.widget.PopupContainerBase]"}}},"dojo.widget.Tooltip.x":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tthis.mouse = {x: e.pageX, y: e.pageY};\n\n\t\t\tif(dojo.html.overElement(this.connectNode, e) || dojo.html.overElement(this.domNode, e)){\n\t\t\t\t\/\/ If the tooltip has been scheduled to be erased, cancel that timer\n\t\t\t\t\/\/ since we are hovering over element\/tooltip again\n\t\t\t\tif(this.hideTimer) {\n\t\t\t\t\tclearTimeout(this.hideTimer);\n\t\t\t\t\tdelete this.hideTimer;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t\/\/ mouse has been moved off the element\/tooltip\n\t\t\t\t\/\/ note: can't use onMouseOut to detect this because the \"explode\" effect causes\n\t\t\t\t\/\/ spurious onMouseOut\/onMouseOver events (due to interference from outline)\n\t\t\t\tif(this.showTimer){\n\t\t\t\t\tclearTimeout(this.showTimer);\n\t\t\t\t\tdelete this.showTimer;\n\t\t\t\t}\n\t\t\t\tif(this.isShowingNow && !this.hideTimer){\n\t\t\t\t\tthis.hideTimer = setTimeout(dojo.lang.hitch(this, \"close\"), this.hideDelay);\n\t\t\t\t}\n\t\t\t}","this":"[dojo.widget.ContentPane, dojo.widget.PopupContainerBase]"}}},"dojo.widget.Tooltip.onMouseMove":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tthis.mouse = {x: e.pageX, y: e.pageY};\n\n\t\t\tif(dojo.html.overElement(this.connectNode, e) || dojo.html.overElement(this.domNode, e)){\n\t\t\t\t\/\/ If the tooltip has been scheduled to be erased, cancel that timer\n\t\t\t\t\/\/ since we are hovering over element\/tooltip again\n\t\t\t\tif(this.hideTimer) {\n\t\t\t\t\tclearTimeout(this.hideTimer);\n\t\t\t\t\tdelete this.hideTimer;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t\/\/ mouse has been moved off the element\/tooltip\n\t\t\t\t\/\/ note: can't use onMouseOut to detect this because the \"explode\" effect causes\n\t\t\t\t\/\/ spurious onMouseOut\/onMouseOver events (due to interference from outline)\n\t\t\t\tif(this.showTimer){\n\t\t\t\t\tclearTimeout(this.showTimer);\n\t\t\t\t\tdelete this.showTimer;\n\t\t\t\t}\n\t\t\t\tif(this.isShowingNow && !this.hideTimer){\n\t\t\t\t\tthis.hideTimer = setTimeout(dojo.lang.hitch(this, \"close\"), this.hideDelay);\n\t\t\t\t}\n\t\t\t}","this":"[dojo.widget.ContentPane, dojo.widget.PopupContainerBase]"}}},"dojo.widget.Tooltip.open":{"_":{"meta":{"summary":"","src":"\t\t\tif (this.isShowingNow) { return; }\n\n\t\t\tdojo.widget.PopupContainerBase.prototype.open.call(this, this.mouse.x, this.mouse.y, null, [this.mouse.x, this.mouse.y], \"TL,TR,BL,BR\", [10,15]);","this_inherits":["dojo.widget.PopupContainerBase.prototype.open"],"this":"[dojo.widget.ContentPane, dojo.widget.PopupContainerBase]"}}},"dojo.widget.Tooltip.close":{"_":{"meta":{"summary":"","src":"\t\t\tif (this.isShowingNow) {\n\t\t\t\tif ( this.showTimer ) {\n\t\t\t\t\tclearTimeout(this.showTimer);\n\t\t\t\t\tdelete this.showTimer;\n\t\t\t\t}\n\t\t\t\tif ( this.hideTimer ) {\n\t\t\t\t\tclearTimeout(this.hideTimer);\n\t\t\t\t\tdelete this.hideTimer;\n\t\t\t\t}\n\t\t\t\tdojo.event.disconnect(document.documentElement, \"onmousemove\", this, \"onMouseMove\");\n\t\t\t\tdojo.widget.PopupContainerBase.prototype.close.call(this);\n\t\t\t}","this":"[dojo.widget.ContentPane, dojo.widget.PopupContainerBase]"}}},"dojo.widget.Tooltip.position":{"_":{"meta":{"summary":"","src":"\t\t\tthis.move(this.mouse.x, this.mouse.y, [10,15], \"TL,TR,BL,BR\");","this":"[dojo.widget.ContentPane, dojo.widget.PopupContainerBase]"}}},"dojo.widget.Tooltip._LoadedContent":{"_":{"meta":{"summary":"","src":"\t\t\tif(this.isShowingNow){\n\t\t\t\t\/\/ the tooltip has changed size due to downloaded contents, so reposition it\n\t\t\t\tthis.position();\n\t\t\t}","this":"[dojo.widget.ContentPane, dojo.widget.PopupContainerBase]"}}},"dojo.widget.Tooltip.checkSize":{"_":{"meta":{"summary":"","src":"\t\t\t\/\/ checkSize() is called when the user has resized the browser window,\n\t\t\t\/\/ but that doesn't affect this widget (or this widget's children)\n\t\t\t\/\/ so it can be safely ignored","this":"[dojo.widget.ContentPane, dojo.widget.PopupContainerBase]"}}}}}},"dojo.widget.Tree":{"meta":{"requires":{"common":["dojo.widget.*","dojo.event.*","dojo.io.*","dojo.widget.HtmlWidget","dojo.widget.TreeNode","dojo.html.common","dojo.html.selection","dojo.widget.TreeBasicController","dojo.widget.TreeSelector"]},"methods":{"dojo.widget.Tree":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\n\tthis.eventNames = {};\n\n\tthis.tree = this;\n\tthis.DNDAcceptTypes = [];\n\tthis.actionsDisabled = [];","this_variables":["eventNames","tree","DNDAcceptTypes","actionsDisabled","controller","controller","selector","selector","DNDMode","expandLevel","menu","containerNode","state","lockLevel"],"inherits":["dojo.widget.HtmlWidget"],"protovariables":{"widgetType":"","eventNamesDefault":"","isContainer":"","DNDMode":"","lockLevel":"","strictFolders":"","DNDModes":"","BETWEEN":"","ONTO":"","DNDAcceptTypes":"","templateCssPath":"","templateString":"","isExpanded":"","isTree":"","controller":"","selector":"","menu":"","expandLevel":"","blankIconSrc":"","gridIconSrcT":"","gridIconSrcL":"","gridIconSrcV":"","gridIconSrcP":"","gridIconSrcC":"","gridIconSrcX":"","gridIconSrcY":"","gridIconSrcZ":"","expandIconSrcPlus":"","expandIconSrcMinus":"","expandIconSrcLoading":"","iconWidth":"","iconHeight":"","showGrid":"","showRootGrid":"","actions":""}}}},"dojo.widget.Tree.objectId":{"_":{"meta":{"summary":"","src":"\t\tvar info = {\n\t\t\twidgetId: this.widgetId,\n\t\t\tobjectId: this.objectId\n\t\t}\n\n\t\treturn info;","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.actionIsDisabled":{"_":{"meta":{"summary":"","parameters":{"action":{"type":""}},"src":"\t\tvar _this = this;\n\t\treturn dojo.lang.inArray(_this.actionsDisabled, action)","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.getInfo":{"_":{"meta":{"summary":"","src":"\t\tvar info = {\n\t\t\twidgetId: this.widgetId,\n\t\t\tobjectId: this.objectId\n\t\t}\n\n\t\treturn info;","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.widgetId":{"_":{"meta":{"summary":"","src":"\t\tvar info = {\n\t\t\twidgetId: this.widgetId,\n\t\t\tobjectId: this.objectId\n\t\t}\n\n\t\treturn info;","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.initializeController":{"_":{"meta":{"summary":"","src":"\t\tif (this.controller != \"off\") {\n\t\t\tif (this.controller) {\n\t\t\t\tthis.controller = dojo.widget.byId(this.controller);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t\/\/ create default controller here\n\t\t\t\tdojo.require(\"dojo.widget.TreeBasicController\");\n\t\t\t\tthis.controller = dojo.widget.createWidget(\"TreeBasicController\",\n\t\t\t\t\t{ DNDController: (this.DNDMode ? \"create\" : \"\"), dieWithTree: true }\n\t\t\t\t );\n\n\t\t\t}\n\t\t\tthis.controller.listenTree(this); \/\/ controller listens to my events\n\n\t\t} else {\n\t\t\tthis.controller = null;\n\t\t}","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.DNDController":{"_":{"meta":{"summary":"","src":"\t\tif (this.controller != \"off\") {\n\t\t\tif (this.controller) {\n\t\t\t\tthis.controller = dojo.widget.byId(this.controller);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t\/\/ create default controller here\n\t\t\t\tdojo.require(\"dojo.widget.TreeBasicController\");\n\t\t\t\tthis.controller = dojo.widget.createWidget(\"TreeBasicController\",\n\t\t\t\t\t{ DNDController: (this.DNDMode ? \"create\" : \"\"), dieWithTree: true }\n\t\t\t\t );\n\n\t\t\t}\n\t\t\tthis.controller.listenTree(this); \/\/ controller listens to my events\n\n\t\t} else {\n\t\t\tthis.controller = null;\n\t\t}","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.initializeSelector":{"_":{"meta":{"summary":"","src":"\t\tif (this.selector != \"off\") {\n\t\t\tif (this.selector) {\n\t\t\t\tthis.selector = dojo.widget.byId(this.selector);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t\/\/ create default controller here\n\t\t\t\tdojo.require(\"dojo.widget.TreeSelector\");\n\t\t\t\tthis.selector = dojo.widget.createWidget(\"TreeSelector\", {dieWithTree: true});\n\t\t\t}\n\n\t\t\tthis.selector.listenTree(this);\n\n\t\t} else {\n\t\t\tthis.selector = null;\n\t\t}","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.dieWithTree":{"_":{"meta":{"summary":"","src":"\t\tif (this.selector != \"off\") {\n\t\t\tif (this.selector) {\n\t\t\t\tthis.selector = dojo.widget.byId(this.selector);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t\/\/ create default controller here\n\t\t\t\tdojo.require(\"dojo.widget.TreeSelector\");\n\t\t\t\tthis.selector = dojo.widget.createWidget(\"TreeSelector\", {dieWithTree: true});\n\t\t\t}\n\n\t\t\tthis.selector.listenTree(this);\n\n\t\t} else {\n\t\t\tthis.selector = null;\n\t\t}","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.initialize":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tvar _this = this;\n\n\t\tfor(name in this.eventNamesDefault) {\n\t\t\tif (dojo.lang.isUndefined(this.eventNames[name])) {\n\t\t\t\tthis.eventNames[name] = this.widgetId+\"\/\"+this.eventNamesDefault[name];\n\t\t\t}\n\t\t}\n\n\t\tfor(var i=0; i<this.actionsDisabled.length; i++) {\n\t\t\tthis.actionsDisabled[i] = this.actionsDisabled[i].toUpperCase();\n\t\t}\n\n\t\tif (this.DNDMode == \"off\") {\n\t\t\tthis.DNDMode = 0;\n\t\t} else if (this.DNDMode == \"between\") {\n\t\t\tthis.DNDMode = this.DNDModes.ONTO | this.DNDModes.BETWEEN;\n\t\t} else if (this.DNDMode == \"onto\") {\n\t\t\tthis.DNDMode = this.DNDModes.ONTO;\n\t\t}\n\n\t\tthis.expandLevel = parseInt(this.expandLevel);\n\n\t\tthis.initializeSelector();\n\t\tthis.initializeController();\n\n\t\tif (this.menu) {\n\t\t\tthis.menu = dojo.widget.byId(this.menu);\n\t\t\tthis.menu.listenTree(this);\n\t\t}\n\n\n\t\tthis.containerNode = this.domNode;","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.postCreate":{"_":{"meta":{"summary":"","src":"\t\tthis.createDOMNode();","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.createDOMNode":{"_":{"meta":{"summary":"","src":"\t\tdojo.html.disableSelection(this.domNode);\n\n\t\tfor(var i=0; i<this.children.length; i++){\n\t\t\tthis.children[i].parent = this; \/\/ root nodes have tree as parent\n\n\t\t\tvar node = this.children[i].createDOMNode(this, 0);\n\n\n\t\t\tthis.domNode.appendChild(node);\n\t\t}\n\n\n\t\tif (!this.showRootGrid){\n\t\t\tfor(var i=0; i<this.children.length; i++){\n\t\t\t\tthis.children[i].expand();\n\t\t\t}\n\t\t}\n\n\t\tdojo.event.topic.publish(this.eventNames.treeCreate, { source: this } );","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.source":{"_":{"meta":{"summary":"","src":"\t\tdojo.event.topic.publish(this.tree.eventNames.treeDestroy, { source: this } );\n\n\t\treturn dojo.widget.HtmlWidget.prototype.destroy.apply(this, arguments);","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.destroy":{"_":{"meta":{"summary":"","src":"\t\tdojo.event.topic.publish(this.tree.eventNames.treeDestroy, { source: this } );\n\n\t\treturn dojo.widget.HtmlWidget.prototype.destroy.apply(this, arguments);","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.addChild":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"index":{"type":""}},"src":"\t\t\tchild: child,\n\t\t\tindex: index,\n\t\t\tparent: this,\n\t\t\t\/\/ remember if dom was already initialized\n\t\t\t\/\/ initialized => no createDOMNode => no createDOMNode event\n\t\t\tdomNodeInitialized: child.domNodeInitialized\n\t\t}\n\n\t\tthis.doAddChild.apply(this, arguments);\n\n\t\tdojo.event.topic.publish(this.tree.eventNames.addChild, message);","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.child":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""}},"src":"\t\tif (!child.parent) return;\n\n\t\tvar oldTree = child.tree;\n\t\tvar oldParent = child.parent;\n\n\t\tvar removedChild = this.doRemoveNode.apply(this, arguments);\n\n\n\t\tdojo.event.topic.publish(this.tree.eventNames.removeNode,\n\t\t\t{ child: removedChild, tree: oldTree, parent: oldParent }\n\t\t);\n\n\t\treturn removedChild;","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.index":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"index":{"type":""}},"src":"\t\t\tchild: child,\n\t\t\tindex: index,\n\t\t\tparent: this,\n\t\t\t\/\/ remember if dom was already initialized\n\t\t\t\/\/ initialized => no createDOMNode => no createDOMNode event\n\t\t\tdomNodeInitialized: child.domNodeInitialized\n\t\t}\n\n\t\tthis.doAddChild.apply(this, arguments);\n\n\t\tdojo.event.topic.publish(this.tree.eventNames.addChild, message);","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.parent":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"index":{"type":""}},"src":"\t\t\tchild: child,\n\t\t\tindex: index,\n\t\t\tparent: this,\n\t\t\t\/\/ remember if dom was already initialized\n\t\t\t\/\/ initialized => no createDOMNode => no createDOMNode event\n\t\t\tdomNodeInitialized: child.domNodeInitialized\n\t\t}\n\n\t\tthis.doAddChild.apply(this, arguments);\n\n\t\tdojo.event.topic.publish(this.tree.eventNames.addChild, message);","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.domNodeInitialized":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"index":{"type":""}},"src":"\t\t\tchild: child,\n\t\t\tindex: index,\n\t\t\tparent: this,\n\t\t\t\/\/ remember if dom was already initialized\n\t\t\t\/\/ initialized => no createDOMNode => no createDOMNode event\n\t\t\tdomNodeInitialized: child.domNodeInitialized\n\t\t}\n\n\t\tthis.doAddChild.apply(this, arguments);\n\n\t\tdojo.event.topic.publish(this.tree.eventNames.addChild, message);","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.doAddChild":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"index":{"type":""}},"src":"\t\tif (dojo.lang.isUndefined(index)) {\n\t\t\tindex = this.children.length;\n\t\t}\n\n\t\tif (!child.isTreeNode){\n\t\t\tdojo.raise(\"You can only add TreeNode widgets to a \"+this.widgetType+\" widget!\");\n\t\t\treturn;\n\t\t}\n\n\t\t\/\/ usually it is impossible to change \"isFolder\" state, but if anyone wants to add a child to leaf,\n\t\t\/\/ it is possible program-way.\n\t\tif (this.isTreeNode){\n\t\t\tif (!this.isFolder) { \/\/ just became a folder.\n\t\t\t\t\/\/dojo.debug(\"becoming folder \"+this);\n\t\t\t\tthis.setFolder();\n\t\t\t}\n\t\t}\n\n\t\t\/\/ adjust tree\n\t\tvar _this = this;\n\t\tdojo.lang.forEach(child.getDescendants(), function(elem) { elem.tree = _this.tree; });\n\n\t\t\/\/ fix parent\n\t\tchild.parent = this;\n\n\n\t\t\/\/ no dynamic loading for those who become parents\n\t\tif (this.isTreeNode) {\n\t\t\tthis.state = this.loadStates.LOADED;\n\t\t}\n\n\t\t\/\/ add new child into DOM after it was added into children\n\t\tif (index < this.children.length) { \/\/ children[] already has child\n\t\t\t\/\/dojo.debug(\"Inserting before \"+this.children[index].title);\n\t\t\tdojo.html.insertBefore(child.domNode, this.children[index].domNode);\n\t\t} else {\n\t\t\tthis.containerNode.appendChild(child.domNode);\n\t\t\tif (this.isExpanded && this.isTreeNode) {\n\t\t\t\t\/* When I add children to hidden containerNode => show container w\/ them *\/\n\t\t\t\tthis.showChildren();\n\t\t\t}\n\t\t}\n\n\n\t\tthis.children.splice(index, 0, child);\n\n\t\t\/\/dojo.debugShallow(this.children);\n\n\n\t\t\/\/ if node exists - adjust its depth, otherwise build it\n\t\tif (child.domNodeInitialized) {\n\t\t\tvar d = this.isTreeNode ? this.depth : -1;\n\t\t\tchild.adjustDepth( d - child.depth + 1 );\n\n\n\t\t\t\/\/ update icons to link generated dom with Tree => updateParentGrid\n\t\t\t\/\/ if I moved child from LastNode inside the tree => need to link it up'n'down =>\n\t\t\t\/\/ updateExpandGridColumn\n\t\t\t\/\/ if I change depth => need to update all grid..\n\t\t\tchild.updateIconTree();\n\t\t} else {\n\t\t\t\/\/dojo.debug(\"Create domnode \");\n\t\t\tchild.depth = this.isTreeNode ? this.depth+1 : 0;\n\t\t\tchild.createDOMNode(child.tree, child.depth);\n\t\t}\n\n\n\n\t\t\/\/ Use-case:\n\t\t\/\/ When previous sibling was created => it was last, no children after it\n\t\t\/\/ so it did not create link down => let's add it for all descendants\n\t\t\/\/ Use-case:\n\t\t\/\/ a child was moved down under the last node so last node should be updated\n\t\tvar prevSibling = child.getPreviousSibling();\n\t\tif (child.isLastNode() && prevSibling) {\n\t\t\tprevSibling.updateExpandGridColumn();\n\t\t}\n\n\n\t\t\/\/dojo.debug(\"Added child \"+child);","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.makeBlankImg":{"_":{"meta":{"summary":"","src":"\t\tvar img = document.createElement('img');\n\n\t\timg.style.width = this.iconWidth + 'px';\n\t\timg.style.height = this.iconHeight + 'px';\n\t\timg.src = this.blankIconSrc;\n\t\timg.style.verticalAlign = 'middle';\n\n\t\treturn img;","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.updateIconTree":{"_":{"meta":{"summary":"","src":"\t\t\tthis.updateIcons();\n\t\t}\n\n\t\tfor(var i=0; i<this.children.length; i++){\n\t\t\tthis.children[i].updateIconTree();\n\t\t}","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.toString":{"_":{"meta":{"summary":"","src":"\t\treturn \"[\"+this.widgetType+\" ID:\"+this.widgetId+\"]\"","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.move":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""}},"src":"\t\tvar oldTree = child.tree;\n\n\t\tthis.doMove.apply(this, arguments);\n\n\t\tvar newParent = child.parent;\n\t\tvar newTree = child.tree;\n\n\t\tvar message = {\n\t\t\t\toldParent: oldParent, oldTree: oldTree,\n\t\t\t\tnewParent: newParent, newTree: newTree,\n\t\t\t\tchild: child\n\t\t};\n\n\t\t\/* publish events here about structural changes for both source and target trees *\/\n\t\tdojo.event.topic.publish(oldTree.eventNames.moveFrom, message);\n\t\tdojo.event.topic.publish(newTree.eventNames.moveTo, message);","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.oldParent":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""}},"src":"\t\tvar oldTree = child.tree;\n\n\t\tthis.doMove.apply(this, arguments);\n\n\t\tvar newParent = child.parent;\n\t\tvar newTree = child.tree;\n\n\t\tvar message = {\n\t\t\t\toldParent: oldParent, oldTree: oldTree,\n\t\t\t\tnewParent: newParent, newTree: newTree,\n\t\t\t\tchild: child\n\t\t};\n\n\t\t\/* publish events here about structural changes for both source and target trees *\/\n\t\tdojo.event.topic.publish(oldTree.eventNames.moveFrom, message);\n\t\tdojo.event.topic.publish(newTree.eventNames.moveTo, message);","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.newParent":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""}},"src":"\t\tvar oldTree = child.tree;\n\n\t\tthis.doMove.apply(this, arguments);\n\n\t\tvar newParent = child.parent;\n\t\tvar newTree = child.tree;\n\n\t\tvar message = {\n\t\t\t\toldParent: oldParent, oldTree: oldTree,\n\t\t\t\tnewParent: newParent, newTree: newTree,\n\t\t\t\tchild: child\n\t\t};\n\n\t\t\/* publish events here about structural changes for both source and target trees *\/\n\t\tdojo.event.topic.publish(oldTree.eventNames.moveFrom, message);\n\t\tdojo.event.topic.publish(newTree.eventNames.moveTo, message);","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.doMove":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""}},"src":"\t\tnewParent.doAddChild(child, index);","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.removeNode":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""}},"src":"\t\tif (!child.parent) return;\n\n\t\tvar oldTree = child.tree;\n\t\tvar oldParent = child.parent;\n\n\t\tvar removedChild = this.doRemoveNode.apply(this, arguments);\n\n\n\t\tdojo.event.topic.publish(this.tree.eventNames.removeNode,\n\t\t\t{ child: removedChild, tree: oldTree, parent: oldParent }\n\t\t);\n\n\t\treturn removedChild;","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.doRemoveNode":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""}},"src":"\t\tif (!child.parent) return;\n\n\t\tvar parent = child.parent;\n\n\t\tvar children = parent.children;\n\n\n\t\tvar index = child.getParentIndex();\n\t\tif (index < 0) {\n\t\t\tdojo.raise(\"Couldn't find node \"+child+\" for removal\");\n\t\t}\n\n\n\t\tchildren.splice(index,1);\n\t\tdojo.html.removeNode(child.domNode);\n\n\t\tif (parent.children.length == 0 && !parent.isTree) {\n\t\t\tparent.containerNode.style.display = \"none\";\n\t\t}\n\n\t\t\/\/ if WAS last node (children.length decreased already) and has prevSibling\n\t\tif (index == children.length && index>0) {\n\t\t\tchildren[index-1].updateExpandGridColumn();\n\t\t}\n\t\t\/\/ if it WAS first node in WHOLE TREE -\n\t\t\/\/ update link up of its former lower neighbour(if exists still)\n\t\tif (parent instanceof dojo.widget.Tree && index == 0 && children.length>0) {\n\t\t\tchildren[0].updateExpandGrid();\n\t\t}\n\n\t\t\/\/parent.updateIconTree();\n\n\n\t\tchild.parent = child.tree = null;\n\n\t\treturn child;","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.markLoading":{"_":{"meta":{"summary":"","src":"\t\t\/\/ no way to mark tree loading","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.unMarkLoading":{"_":{"meta":{"summary":"","src":"\t\t\/\/ no way to show that tree finished loading","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.lock":{"_":{"meta":{"summary":"","src":"\t\t!this.lockLevel && this.markLoading();\n\t\tthis.lockLevel++;","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.unlock":{"_":{"meta":{"summary":"","src":"\t\tif (!this.lockLevel) {\n\t\t\tdojo.raise(\"unlock: not locked\");\n\t\t}\n\t\tthis.lockLevel--;\n\t\t!this.lockLevel && this.unMarkLoading();","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.isLocked":{"_":{"meta":{"summary":"","src":"\t\tvar node = this;\n\t\twhile (true) {\n\t\t\tif (node.lockLevel) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (node instanceof dojo.widget.Tree) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tnode = node.parent;\n\t\t}\n\n\t\treturn false;","this":"dojo.widget.Tree"}}},"dojo.widget.Tree.flushLock":{"_":{"meta":{"summary":"","src":"\t\tthis.lockLevel = 0;\n\t\tthis.unMarkLoading();","this":"dojo.widget.Tree"}}}}}},"dojo.widget.TreeBasicController":{"meta":{"requires":{"common":["dojo.event.*","dojo.json","dojo.io.*","dojo.dnd.TreeDragAndDrop"]},"methods":{"dojo.widget.TreeBasicController":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);","inherits":["dojo.widget.HtmlWidget"],"protovariables":{"widgetType":"","DNDController":"","dieWithTree":""},"this_variables":["DNDController","node","expandLevel","process"]}}},"handler":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"expandLevel":{"type":""}},"src":"\t\t\tthis.node = node;\n\t\t\tthis.expandLevel = expandLevel;\n\t\t\t\/\/ recursively expand opened node\n\t\t\tthis.process = function() {\n\t\t\t\t\/\/dojo.debug(\"Process \"+node+\" level \"+level);\n\t\t\t\tfor(var i=0; i<this.node.children.length; i++) {\n\t\t\t\t\tvar child = node.children[i];\n\n\t\t\t\t\t_this.expandToLevel(child, this.expandLevel);\n\t\t\t\t}\n\t\t\t};","this_variables":["node","expandLevel","process"]}}},"handler.process":{"_":{"meta":{"summary":"","src":"\t\t\t\t\tvar child = node.children[i];\n\n\t\t\t\t\t_this.expandToLevel(child, this.expandLevel);\n\t\t\t\t}"}}},"dojo.widget.TreeBasicController.initialize":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\t\tdojo.require(\"dojo.dnd.TreeDragAndDrop\");\n\t\t\tthis.DNDController = new dojo.dnd.TreeDNDController(this);\n\t\t}","this":"dojo.widget.TreeBasicController"}}},"dojo.widget.TreeBasicController.listenTree":{"_":{"meta":{"summary":"","parameters":{"tree":{"type":""}},"src":"\t\tdojo.event.topic.subscribe(tree.eventNames.treeClick, this, \"onTreeClick\");\n\t\tdojo.event.topic.subscribe(tree.eventNames.treeCreate, this, \"onTreeCreate\");\n\t\tdojo.event.topic.subscribe(tree.eventNames.treeDestroy, this, \"onTreeDestroy\");\n\n\t\tif (this.DNDController) {\n\t\t\tthis.DNDController.listenTree(tree);\n\t\t}","this":"dojo.widget.TreeBasicController"}}},"dojo.widget.TreeBasicController.unlistenTree":{"_":{"meta":{"summary":"","parameters":{"tree":{"type":""}},"src":"\t\tdojo.event.topic.unsubscribe(tree.eventNames.createDOMNode, this, \"onCreateDOMNode\");\n\t\tdojo.event.topic.unsubscribe(tree.eventNames.treeClick, this, \"onTreeClick\");\n\t\tdojo.event.topic.unsubscribe(tree.eventNames.treeCreate, this, \"onTreeCreate\");\n\t\tdojo.event.topic.unsubscribe(tree.eventNames.treeDestroy, this, \"onTreeDestroy\");","this":"dojo.widget.TreeBasicController"}}},"dojo.widget.TreeBasicController.onTreeDestroy":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tvar tree = message.source;\n\n\t\tthis.unlistenTree(tree);\n\n\t\tif (this.dieWithTree) {\n\t\t\t\/\/alert(\"Killing myself \"+this.widgetId);\n\t\t\tthis.destroy();\n\t\t\t\/\/dojo.debug(\"done\");\n\t\t}","this":"dojo.widget.TreeBasicController"}}},"dojo.widget.TreeBasicController.onCreateDOMNode":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tvar node = message.source;\n\n\n\t\tif (node.expandLevel > 0) {\n\t\t\tthis.expandToLevel(node, node.expandLevel);\n\t\t}","this":"dojo.widget.TreeBasicController"}}},"dojo.widget.TreeBasicController.onTreeCreate":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tvar tree = message.source;\n\t\tvar _this = this;\n\t\tif (tree.expandLevel) {\n\t\t\tdojo.lang.forEach(tree.children,\n\t\t\t\tfunction(child) {\n\t\t\t\t\t_this.expandToLevel(child, tree.expandLevel-1)\n\t\t\t\t}\n\t\t\t);\n\t\t}","this":"dojo.widget.TreeBasicController"}}},"dojo.widget.TreeBasicController.expandToLevel":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"level":{"type":""}},"src":"\t\tif (level == 0) return;\n\n\t\tvar children = node.children;\n\t\tvar _this = this;\n\n\t\tvar handler = function(node, expandLevel) {\n\t\t\tthis.node = node;\n\t\t\tthis.expandLevel = expandLevel;\n\t\t\t\/\/ recursively expand opened node\n\t\t\tthis.process = function() {\n\t\t\t\t\/\/dojo.debug(\"Process \"+node+\" level \"+level);\n\t\t\t\tfor(var i=0; i<this.node.children.length; i++) {\n\t\t\t\t\tvar child = node.children[i];\n\n\t\t\t\t\t_this.expandToLevel(child, this.expandLevel);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tvar h = new handler(node, level-1);\n\n\n\t\tthis.expand(node, false, h, h.process);","this":"dojo.widget.TreeBasicController"}}},"dojo.widget.TreeBasicController.onTreeClick":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tvar node = message.source;\n\n\t\tif(node.isLocked()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (node.isExpanded){\n\t\t\tthis.collapse(node);\n\t\t} else {\n\t\t\tthis.expand(node);\n\t\t}","this":"dojo.widget.TreeBasicController"}}},"dojo.widget.TreeBasicController.expand":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\tnode.expand();\n\t\tif (callFunc) callFunc.apply(callObj, [node]);","this":"dojo.widget.TreeBasicController"}}},"dojo.widget.TreeBasicController.collapse":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tnode.collapse();","this":"dojo.widget.TreeBasicController"}}},"dojo.widget.TreeBasicController.canMove":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""}},"src":"\t\tif (child.actionIsDisabled(child.actions.MOVE)) {\n\t\t\treturn false;\n\t\t}\n\n\t\t\/\/ if we move under same parent then no matter if ADDCHILD disabled for him\n\t\t\/\/ but if we move to NEW parent then check if action is disabled for him\n\t\t\/\/ also covers case for newParent being a non-folder in strict mode etc\n\t\tif (child.parent !== newParent && newParent.actionIsDisabled(newParent.actions.ADDCHILD)) {\n\t\t\treturn false;\n\t\t}\n\n\t\t\/\/ Can't move parent under child. check whether new parent is child of \"child\".\n\t\tvar node = newParent;\n\t\twhile(node.isTreeNode) {\n\t\t\t\/\/dojo.debugShallow(node.title)\n\t\t\tif (node === child) {\n\t\t\t\t\/\/ parent of newParent is child\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tnode = node.parent;\n\t\t}\n\n\t\treturn true;","this":"dojo.widget.TreeBasicController"}}},"dojo.widget.TreeBasicController.move":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""}},"src":"\t\t\treturn false;\n\t\t}\n\n\t\tvar result = this.doMove(child, newParent, index);\n\n\t\tif (!result) return result;\n\n\t\tif (newParent.isTreeNode) {\n\t\t\tthis.expand(newParent);\n\t\t}\n\n\t\treturn result;","this":"dojo.widget.TreeBasicController"}}},"dojo.widget.TreeBasicController.doMove":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""}},"src":"\t\tchild.tree.move(child, newParent, index);\n\n\t\treturn true;","this":"dojo.widget.TreeBasicController"}}},"dojo.widget.TreeBasicController.canRemoveNode":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""}},"src":"\t\tif (child.actionIsDisabled(child.actions.REMOVE)) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;","this":"dojo.widget.TreeBasicController"}}},"dojo.widget.TreeBasicController.removeNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\tif (!this.canRemoveNode(node)) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this.doRemoveNode(node, callObj, callFunc);","this":"dojo.widget.TreeBasicController"}}},"dojo.widget.TreeBasicController.doRemoveNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\tnode.tree.removeNode(node);\n\n\t\tif (callFunc) {\n\t\t\tcallFunc.apply(dojo.lang.isUndefined(callObj) ? this : callObj, [node]);\n\t\t}","this":"dojo.widget.TreeBasicController"}}},"dojo.widget.TreeBasicController.canCreateChild":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"data":{"type":""}},"src":"\t\tif (parent.actionIsDisabled(parent.actions.ADDCHILD)) return false;\n\n\t\treturn true;","this":"dojo.widget.TreeBasicController"}}},"dojo.widget.TreeBasicController.createChild":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"data":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\tif (!this.canCreateChild(parent, index, data)) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this.doCreateChild.apply(this, arguments);","this":"dojo.widget.TreeBasicController"}}},"dojo.widget.TreeBasicController.doCreateChild":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"data":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\tvar widgetType = data.widgetType ? data.widgetType : \"TreeNode\";\n\n\t\tvar newChild = dojo.widget.createWidget(widgetType, data);\n\n\t\tparent.addChild(newChild, index);\n\n\t\tthis.expand(parent);\n\n\t\tif (callFunc) {\n\t\t\tcallFunc.apply(callObj, [newChild]);\n\t\t}\n\n\t\treturn newChild;","this":"dojo.widget.TreeBasicController"}}}}}},"dojo.widget.TreeBasicControllerV3":{"meta":{"requires":{"common":["dojo.event.*","dojo.json","dojo.io.*","dojo.widget.TreeCommon","dojo.widget.TreeNodeV3","dojo.widget.TreeV3","dojo.widget.TreeTimeoutIterator"]},"methods":{"dojo.widget.TreeBasicControllerV3":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\t\n\tthis.listenedTrees = {};","this_variables":["listenedTrees","editor","editor.controller","onExpandClickHandler"],"inherits":["dojo.widget.HtmlWidget","dojo.widget.TreeCommon"],"protovariables":{"widgetType":"","listenTreeEvents":"","editor":"","batchExpandTimeout":""}}}},"filter":{"_":{"meta":{"summary":"","parameters":{"elem":{"type":""}},"src":"\t\t\treturn (elem instanceof dojo.widget.Widget) && elem.isFolder && elem.isExpanded;"}}},"filterFunc":{"_":{"meta":{"summary":"","parameters":{"elem":{"type":""}},"src":"\t\t\tvar res = elem.isFolder || elem.children && elem.children.length;\n\t\t\t\/\/dojo.debug(\"Filter \"+elem+ \" result:\"+res);\n\t\t\treturn res;"}}},"callFunc":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"iterator":{"type":""}},"src":"\t\t\t this.expand(node, true);\n\t\t\t iterator.forward();"}}},"dojo.widget.TreeBasicControllerV3.listenNodeFilter":{"_":{"meta":{"summary":"","parameters":{"elem":{"type":""}},"src":"                                    return elem.isFolder && elem instanceof dojo.widget.Widget   ","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.listenNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\t\/\/dojo.event.connect(node.expandNode, \"onclick\", this, \"onExpandClick\");","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.unlistenNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tdojo.event.browser.removeListener(node.expandNode, \"onclick\", this.onExpandClickHandler);\n\t\t\/\/dojo.event.disconnect(node.expandNode, \"onclick\", this, \"onExpandClick\");","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.onAfterSetFolder":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.onAfterUnsetFolder":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tthis.unlistenNode(message.source);","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.initialize":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""}},"src":"\t\tif (args.editor) {\n\t\t\tthis.editor = dojo.widget.byId(args.editor);\n\t\t\tthis.editor.controller = this;\n\t\t}\n\t\t\n\t\tthis.onExpandClickHandler =  dojo.lang.hitch(this, this.onExpandClick)","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.getInfo":{"_":{"meta":{"summary":"","parameters":{"elem":{"type":""}},"src":"\t\treturn elem.getInfo();","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.onAfterChangeTree":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\t\tif (message.node.expandLevel > 0) {\n\t\t\t\tthis.expandToLevel(message.node, message.node.expandLevel);\t\t\t\t\n\t\t\t}\n\t\t\tif (message.node.loadLevel > 0) {\n\t\t\t\tthis.loadToLevel(message.node, message.node.loadLevel);\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t\/\/dojo.profile.end(\"onTreeChange\");\n\t\t\treturn; \n\t\t}\n\t\t            \n\t\tif (!message.newTree || !this.listenedTrees[message.newTree.widgetId]) {\n\t\t\t\/\/ I got this message because node leaves me (oldtree)\n\t\t\t\/**\n\t\t\t * clean all folders that I listen. I don't listen to non-folders.\n\t\t\t *\/\n\t\t\tthis.processDescendants(message.node, this.listenNodeFilter, this.unlistenNode);\n\t\t}\t\t\n\t\t\n\t\tif (!message.oldTree || !this.listenedTrees[message.oldTree.widgetId]) {\n\t\t\t\/\/ we have new node\n\t\t\tthis.processDescendants(message.node, this.listenNodeFilter, this.listenNode);\n\t\t}\n\t\t\n\t\t\/\/dojo.profile.end(\"onTreeChange\");","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3._getNextSibling":{"_":{"meta":{"summary":"","parameters":{"nodeWidget":{"type":""}},"src":"\t\tvar parent = nodeWidget.parent;\n\t\tvar children = parent.children;\n\t\tfor (var i=0; i < (children.length-1); i++) {\n\t\t\tif (children[i] == nodeWidget) { return children[i+1]; }\n\t\t}\n\t\treturn null;","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3._getPreviousSibling":{"_":{"meta":{"summary":"","parameters":{"nodeWidget":{"type":""}},"src":"\t\tvar parent = nodeWidget.parent;\n\t\tvar children = parent.children;\n\t\tfor (var i=children.length-1; i > 0; i--) {\n\t\t\tif (children[i] == nodeWidget) { return children[i-1]; }\n\t\t}\n\t\treturn null;","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3._focusNextVisible":{"_":{"meta":{"summary":"","parameters":{"treeWidget":{"type":""},"nodeWidget":{"type":""}},"src":"\t\tvar returnWidget = null;\n\t\ttry {\n\t\t\t\/\/ if this is an expanded folder, get the first child\n\t\t\tif (nodeWidget.isFolder && nodeWidget.isExpanded && nodeWidget.children && nodeWidget.children.length > 0) {\n\t\t\t\treturnWidget = nodeWidget;\n\t\t\t\tnodeWidget = nodeWidget.children[0];\n\t\t\t} else {\n\t\t\t\t\/\/ find a parent node with a sibling\n\t\t\t\twhile (nodeWidget.isTreeNode) {\n\t\t\t\t\treturnWidget = nodeWidget;\n\t\t\t\t\tvar nextSibling = this._getNextSibling(nodeWidget);\n\t\t\t\t\tif (nextSibling) {\n\t\t\t\t\t\tnodeWidget = nextSibling;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tnodeWidget = nodeWidget.parent;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (nodeWidget && nodeWidget.isTreeNode) {\n\t\t\t\treturnWidget = nodeWidget;\n\t\t\t}\n\t\t} catch(e) {}\n\t\tif (returnWidget && returnWidget.isTreeNode) {\n\t\t\tthis._focusLabel(treeWidget, returnWidget);\n\t\t\treturn returnWidget;\n\t\t}\n\t\treturn null;","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3._focusPreviousVisible":{"_":{"meta":{"summary":"","parameters":{"treeWidget":{"type":""},"nodeWidget":{"type":""}},"src":"\t\tvar returnWidget = null;\n\t\ttry {\n\t\t\treturnWidget = nodeWidget;\n\t\t\t\/\/ if younger siblings\n\t\t\tvar previousSibling = this._getPreviousSibling(nodeWidget);\n\t\t\tif (previousSibling) {\n\t\t\t\tnodeWidget = previousSibling;\n\t\t\t\t\/\/ if the previous nodeWidget is expanded, dive in deep\n\t\t\t\twhile (nodeWidget.isFolder && nodeWidget.isExpanded && nodeWidget.children && nodeWidget.children.length > 0) {\n\t\t\t\t\treturnWidget = nodeWidget;\n\t\t\t\t\t\/\/ move to the last child\n\t\t\t\t\tnodeWidget = nodeWidget.children[nodeWidget.children.length-1];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t\/\/ if this is the first child, return the parent\n\t\t\t\tnodeWidget = nodeWidget.parent;\n\t\t\t}\n\t\t\tif (nodeWidget && nodeWidget.isTreeNode) {\n\t\t\t\treturnWidget = nodeWidget;\n\t\t\t}\n\t\t} catch(e) {}\n\t\tif (returnWidget && returnWidget.isTreeNode) {\n\t\t\tthis._focusLabel(treeWidget, returnWidget);\n\t\t\treturn returnWidget;\n\t\t}\n\t\treturn null;","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3._focusZoomIn":{"_":{"meta":{"summary":"","parameters":{"treeWidget":{"type":""},"nodeWidget":{"type":""}},"src":"\t\tvar returnWidget = null;\n\t\ttry {\n\t\t\treturnWidget = nodeWidget;\n\t\t\t\/\/ if not expanded, expand, else move to 1st child\n\t\t\tif (nodeWidget.isFolder && !nodeWidget.isExpanded) {\n\t\t\t\tthis.expand(nodeWidget);\n\t\t\t}else if (nodeWidget.children && nodeWidget.children.length > 0) {\n\t\t\t\tnodeWidget = nodeWidget.children[0];\n\t\t\t}\n\t\t\tif (nodeWidget && nodeWidget.isTreeNode) {\n\t\t\t\treturnWidget = nodeWidget;\n\t\t\t}\n\t\t} catch(e) {}\n\t\tif (returnWidget && returnWidget.isTreeNode) {\n\t\t\tthis._focusLabel(treeWidget, returnWidget);\n\t\t\treturn returnWidget;\n\t\t}\n\t\treturn null;","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3._focusZoomOut":{"_":{"meta":{"summary":"","parameters":{"treeWidget":{"type":""},"nodeWidget":{"type":""}},"src":"\t\tvar returnWidget = null;\n\t\ttry {\n\t\t\treturnWidget = nodeWidget;\n\t\t\t\/\/ if not expanded, expand, else move to 1st child\n\t\t\tif (nodeWidget.isFolder && nodeWidget.isExpanded) {\n\t\t\t\tthis.collapse(nodeWidget);\n\t\t\t} else {\n\t\t\t\t nodeWidget = nodeWidget.parent;\n\t\t\t}\n\t\t\tif (nodeWidget && nodeWidget.isTreeNode) {\n\t\t\t\treturnWidget = nodeWidget;\n\t\t\t}\n\t\t} catch(e) {}\n\t\tif (returnWidget && returnWidget.isTreeNode) {\n\t\t\tthis._focusLabel(treeWidget, returnWidget);\n\t\t\treturn returnWidget;\n\t\t}\n\t\treturn null;","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.onFocusNode":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar labelNode = e.target;\n\t\tif (labelNode) {\n\t\t\tdojo.html.addClass(labelNode, \"TreeLabelFocused\");\n\t\t\tdojo.event.browser.stopEvent(e);\n\t\t}","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.onBlurNode":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar labelNode = e.target;\n\t\tif (labelNode) {\n\t\t\tlabelNode.setAttribute(\"tabIndex\", \"-1\");\n\t\t\tdojo.html.removeClass(labelNode, \"TreeLabelFocused\");\n\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\tvar nodeWidget = this.getWidgetByNode(labelNode);\n\t\t\tvar treeWidget = nodeWidget._treeWidget;\n\t\t\tif (!treeWidget || !treeWidget.isTree) { return; }\n\t\t\t\/\/ this could have been set to -1 by the shift+TAB processing\n\t\t\ttreeWidget.domNode.setAttribute(\"tabIndex\", \"0\");\n\t\t}","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3._focusLabel":{"_":{"meta":{"summary":"","parameters":{"treeWidget":{"type":""},"nodeWidget":{"type":""}},"src":"\t\ttry {\n\t\t\tif (treeWidget && nodeWidget && nodeWidget.labelNode) {\n\t\t\t\tvar lastFocused = treeWidget.lastFocused;\n\t\t\t\tvar labelNode;\n\t\t\t\tif (lastFocused && lastFocused.labelNode) {\n\t\t\t\t\tlabelNode = lastFocused.labelNode;\n\t\t\t\t\t\/\/ help Opera out with blur events\n\t\t\t\t\tdojo.event.disconnect(labelNode, \"onblur\", this, \"onBlurNode\");\n\t\t\t\t\tlabelNode.setAttribute(\"tabIndex\", \"-1\");\n\t\t\t\t\tdojo.html.removeClass(labelNode, \"TreeLabelFocused\");\n\t\t\t\t}\n\t\t\t\t\/\/ set tabIndex so that the tab key can find this node\n\t\t\t\tlabelNode = nodeWidget.labelNode;\n\t\t\t\tlabelNode.setAttribute(\"tabIndex\", \"0\");\n\t\t\t\tnodeWidget._treeWidget = treeWidget;\n\t\t\t\ttreeWidget.lastFocused = nodeWidget;\n\t\t\t\t\/\/ add an outline - this helps opera a lot\n\t\t\t\tdojo.html.addClass(labelNode, \"TreeLabelFocused\");\n\t\t\t\tdojo.event.connectOnce(labelNode, \"onblur\", this, \"onBlurNode\");\n\t\t\t\t\/\/ prevent the domNode from seeing the focus event\n\t\t\t\tdojo.event.connectOnce(labelNode, \"onfocus\", this, \"onFocusNode\");\n\t\t\t\t\/\/ set focus so that the label wil be voiced using screen readers\n\t\t\t\tlabelNode.focus();\n\t\t\t}\n\t\t} catch(e) {}","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.onKey":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif (!e.key || e.ctrkKey || e.altKey) { return; }\n\t\t\/\/ pretend the key was directed toward the current focused node (helps opera out)\n\t\tvar treeWidget = this.getWidgetByNode(e.currentTarget);\n\t\tif (!treeWidget || !treeWidget.isTree) { return; }\n\t\tif (treeWidget.lastFocused && treeWidget.lastFocused.labelNode) {\n\t\t\tnodeWidget = treeWidget.lastFocused;\n\t\t} else {\n\t\t\tnodeWidget = this.getWidgetByNode(e.target);\n\t\t}\n\t\tif (!nodeWidget || !nodeWidget.isTreeNode) { return; }\n\t\tswitch(e.key) {\n\t\t\tcase e.KEY_TAB:\n\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\t\/\/ we're moving backwards so don't tab to the domNode\n\t\t\t\t\t\/\/ it'll be added back in onBlurNode\n\t\t\t\t\ttreeWidget.domNode.setAttribute(\"tabIndex\", \"-1\");\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_RIGHT_ARROW:\n\t\t\t\tthis._focusZoomIn(treeWidget, nodeWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_LEFT_ARROW:\n\t\t\t\tthis._focusZoomOut(treeWidget, nodeWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_UP_ARROW:\n\t\t\t\tthis._focusPreviousVisible(treeWidget, nodeWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_DOWN_ARROW:\n\t\t\t\tthis._focusNextVisible(treeWidget, nodeWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t\tbreak;\n\t\t}","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.e.KEY_TAB":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif (!e.key || e.ctrkKey || e.altKey) { return; }\n\t\t\/\/ pretend the key was directed toward the current focused node (helps opera out)\n\t\tvar treeWidget = this.getWidgetByNode(e.currentTarget);\n\t\tif (!treeWidget || !treeWidget.isTree) { return; }\n\t\tif (treeWidget.lastFocused && treeWidget.lastFocused.labelNode) {\n\t\t\tnodeWidget = treeWidget.lastFocused;\n\t\t} else {\n\t\t\tnodeWidget = this.getWidgetByNode(e.target);\n\t\t}\n\t\tif (!nodeWidget || !nodeWidget.isTreeNode) { return; }\n\t\tswitch(e.key) {\n\t\t\tcase e.KEY_TAB:\n\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\t\/\/ we're moving backwards so don't tab to the domNode\n\t\t\t\t\t\/\/ it'll be added back in onBlurNode\n\t\t\t\t\ttreeWidget.domNode.setAttribute(\"tabIndex\", \"-1\");\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_RIGHT_ARROW:\n\t\t\t\tthis._focusZoomIn(treeWidget, nodeWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_LEFT_ARROW:\n\t\t\t\tthis._focusZoomOut(treeWidget, nodeWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_UP_ARROW:\n\t\t\t\tthis._focusPreviousVisible(treeWidget, nodeWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_DOWN_ARROW:\n\t\t\t\tthis._focusNextVisible(treeWidget, nodeWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t\tbreak;\n\t\t}","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.e.KEY_RIGHT_ARROW":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif (!e.key || e.ctrkKey || e.altKey) { return; }\n\t\t\/\/ pretend the key was directed toward the current focused node (helps opera out)\n\t\tvar treeWidget = this.getWidgetByNode(e.currentTarget);\n\t\tif (!treeWidget || !treeWidget.isTree) { return; }\n\t\tif (treeWidget.lastFocused && treeWidget.lastFocused.labelNode) {\n\t\t\tnodeWidget = treeWidget.lastFocused;\n\t\t} else {\n\t\t\tnodeWidget = this.getWidgetByNode(e.target);\n\t\t}\n\t\tif (!nodeWidget || !nodeWidget.isTreeNode) { return; }\n\t\tswitch(e.key) {\n\t\t\tcase e.KEY_TAB:\n\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\t\/\/ we're moving backwards so don't tab to the domNode\n\t\t\t\t\t\/\/ it'll be added back in onBlurNode\n\t\t\t\t\ttreeWidget.domNode.setAttribute(\"tabIndex\", \"-1\");\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_RIGHT_ARROW:\n\t\t\t\tthis._focusZoomIn(treeWidget, nodeWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_LEFT_ARROW:\n\t\t\t\tthis._focusZoomOut(treeWidget, nodeWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_UP_ARROW:\n\t\t\t\tthis._focusPreviousVisible(treeWidget, nodeWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_DOWN_ARROW:\n\t\t\t\tthis._focusNextVisible(treeWidget, nodeWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t\tbreak;\n\t\t}","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.e.KEY_LEFT_ARROW":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif (!e.key || e.ctrkKey || e.altKey) { return; }\n\t\t\/\/ pretend the key was directed toward the current focused node (helps opera out)\n\t\tvar treeWidget = this.getWidgetByNode(e.currentTarget);\n\t\tif (!treeWidget || !treeWidget.isTree) { return; }\n\t\tif (treeWidget.lastFocused && treeWidget.lastFocused.labelNode) {\n\t\t\tnodeWidget = treeWidget.lastFocused;\n\t\t} else {\n\t\t\tnodeWidget = this.getWidgetByNode(e.target);\n\t\t}\n\t\tif (!nodeWidget || !nodeWidget.isTreeNode) { return; }\n\t\tswitch(e.key) {\n\t\t\tcase e.KEY_TAB:\n\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\t\/\/ we're moving backwards so don't tab to the domNode\n\t\t\t\t\t\/\/ it'll be added back in onBlurNode\n\t\t\t\t\ttreeWidget.domNode.setAttribute(\"tabIndex\", \"-1\");\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_RIGHT_ARROW:\n\t\t\t\tthis._focusZoomIn(treeWidget, nodeWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_LEFT_ARROW:\n\t\t\t\tthis._focusZoomOut(treeWidget, nodeWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_UP_ARROW:\n\t\t\t\tthis._focusPreviousVisible(treeWidget, nodeWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_DOWN_ARROW:\n\t\t\t\tthis._focusNextVisible(treeWidget, nodeWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t\tbreak;\n\t\t}","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.e.KEY_UP_ARROW":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif (!e.key || e.ctrkKey || e.altKey) { return; }\n\t\t\/\/ pretend the key was directed toward the current focused node (helps opera out)\n\t\tvar treeWidget = this.getWidgetByNode(e.currentTarget);\n\t\tif (!treeWidget || !treeWidget.isTree) { return; }\n\t\tif (treeWidget.lastFocused && treeWidget.lastFocused.labelNode) {\n\t\t\tnodeWidget = treeWidget.lastFocused;\n\t\t} else {\n\t\t\tnodeWidget = this.getWidgetByNode(e.target);\n\t\t}\n\t\tif (!nodeWidget || !nodeWidget.isTreeNode) { return; }\n\t\tswitch(e.key) {\n\t\t\tcase e.KEY_TAB:\n\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\t\/\/ we're moving backwards so don't tab to the domNode\n\t\t\t\t\t\/\/ it'll be added back in onBlurNode\n\t\t\t\t\ttreeWidget.domNode.setAttribute(\"tabIndex\", \"-1\");\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_RIGHT_ARROW:\n\t\t\t\tthis._focusZoomIn(treeWidget, nodeWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_LEFT_ARROW:\n\t\t\t\tthis._focusZoomOut(treeWidget, nodeWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_UP_ARROW:\n\t\t\t\tthis._focusPreviousVisible(treeWidget, nodeWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_DOWN_ARROW:\n\t\t\t\tthis._focusNextVisible(treeWidget, nodeWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t\tbreak;\n\t\t}","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.e.KEY_DOWN_ARROW":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif (!e.key || e.ctrkKey || e.altKey) { return; }\n\t\t\/\/ pretend the key was directed toward the current focused node (helps opera out)\n\t\tvar treeWidget = this.getWidgetByNode(e.currentTarget);\n\t\tif (!treeWidget || !treeWidget.isTree) { return; }\n\t\tif (treeWidget.lastFocused && treeWidget.lastFocused.labelNode) {\n\t\t\tnodeWidget = treeWidget.lastFocused;\n\t\t} else {\n\t\t\tnodeWidget = this.getWidgetByNode(e.target);\n\t\t}\n\t\tif (!nodeWidget || !nodeWidget.isTreeNode) { return; }\n\t\tswitch(e.key) {\n\t\t\tcase e.KEY_TAB:\n\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\t\/\/ we're moving backwards so don't tab to the domNode\n\t\t\t\t\t\/\/ it'll be added back in onBlurNode\n\t\t\t\t\ttreeWidget.domNode.setAttribute(\"tabIndex\", \"-1\");\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_RIGHT_ARROW:\n\t\t\t\tthis._focusZoomIn(treeWidget, nodeWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_LEFT_ARROW:\n\t\t\t\tthis._focusZoomOut(treeWidget, nodeWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_UP_ARROW:\n\t\t\t\tthis._focusPreviousVisible(treeWidget, nodeWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_DOWN_ARROW:\n\t\t\t\tthis._focusNextVisible(treeWidget, nodeWidget);\n\t\t\t\tdojo.event.browser.stopEvent(e);\n\t\t\t\tbreak;\n\t\t}","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.onClick":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif (!treeWidget || !treeWidget.isTree) { return; }\n\t\tvar nodeWidget = this.getWidgetByNode(e.target);\n\t\tif (!nodeWidget || !nodeWidget.isTreeNode) { return; }\n\t\tthis._focusLabel(treeWidget, nodeWidget);","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.onFocusTree":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif (!e.currentTarget) { return; }\n\t\ttry {\n\t\t\tvar treeWidget = this.getWidgetByNode(e.currentTarget);\n\t\t\tif (!treeWidget || !treeWidget.isTree) { return; }\n\t\t\t\/\/ on first focus, choose the root node\n\t\t\tvar nodeWidget = this.getWidgetByNode(treeWidget.domNode.firstChild);\n\t\t\tif (nodeWidget && nodeWidget.isTreeNode) {\n\t\t\t\tif (treeWidget.lastFocused && treeWidget.lastFocused.isTreeNode) { \/\/ onClick could have chosen a non-root node\n\t\t\t\t\tnodeWidget = treeWidget.lastFocused;\n\t\t\t\t}\n\t\t\t\tthis._focusLabel(treeWidget, nodeWidget);\n\t\t\t}\n\t\t}\n\t\tcatch(e) {}","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.onAfterTreeCreate":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tvar tree = message.source;\n\t\tdojo.event.browser.addListener(tree.domNode, \"onKey\", dojo.lang.hitch(this, this.onKey));\n\t\tdojo.event.browser.addListener(tree.domNode, \"onclick\", dojo.lang.hitch(this, this.onClick));\n\t\tdojo.event.browser.addListener(tree.domNode, \"onfocus\", dojo.lang.hitch(this, this.onFocusTree));\n\t\ttree.domNode.setAttribute(\"tabIndex\", \"0\");\n\t\tif (tree.expandLevel) {\t\t\t\t\t\t\t\t\n\t\t\tthis.expandToLevel(tree, tree.expandLevel)\n\t\t}\n\t\tif (tree.loadLevel) {\n\t\t\tthis.loadToLevel(tree, tree.loadLevel);\n\t\t}","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.expandAll":{"_":{"meta":{"summary":"","parameters":{"nodeOrTree":{"type":""}},"src":"\t\treturn this.expandToLevel(nodeOrTree, Number.POSITIVE_INFINITY);","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.collapseAll":{"_":{"meta":{"summary":"","parameters":{"nodeOrTree":{"type":""}},"src":"\t\tvar _this = this;\n\t\t\n\t\tvar filter = function(elem) {\n\t\t\treturn (elem instanceof dojo.widget.Widget) && elem.isFolder && elem.isExpanded;\n\t\t}\n\t\t\n\t\tif (nodeOrTree.isTreeNode) {\t\t\n\t\t\tthis.processDescendants(nodeOrTree, filter, this.collapse);\n\t\t} else if (nodeOrTree.isTree) {\n\t\t\tdojo.lang.forEach(nodeOrTree.children,function(c) { _this.processDescendants(c, filter, _this.collapse) });\n\t\t}","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.expandToLevel":{"_":{"meta":{"summary":"","parameters":{"nodeOrTree":{"type":""},"level":{"type":""}},"src":"\t\tdojo.require(\"dojo.widget.TreeTimeoutIterator\");\n\t\t\n\t\tvar filterFunc = function(elem) {\n\t\t\tvar res = elem.isFolder || elem.children && elem.children.length;\n\t\t\t\/\/dojo.debug(\"Filter \"+elem+ \" result:\"+res);\n\t\t\treturn res;\n\t\t};\n\t\tvar callFunc = function(node, iterator) {\n\t\t\t this.expand(node, true);\n\t\t\t iterator.forward();\n\t\t}\n\t\t\t\n\t\tvar iterator = new dojo.widget.TreeTimeoutIterator(nodeOrTree, callFunc, this);\n\t\titerator.setFilter(filterFunc);\n\t\t\n\t\t\n\t\titerator.timeout = this.batchExpandTimeout;\n\t\t\n\t\t\/\/dojo.debug(\"here \"+nodeOrTree+\" level \"+level);\n\t\t\n\t\titerator.setMaxLevel(nodeOrTree.isTreeNode ? level-1 : level);\n\t\t\n\t\t\n\t\treturn iterator.start(nodeOrTree.isTreeNode);","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.getWidgetByNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tvar widgetId;\n\t\tvar newNode = node;\n\t\twhile (! (widgetId = newNode.widgetId) ) {\n\t\t\tnewNode = newNode.parentNode;\n\t\t\tif (newNode == null) { break; }\n\t\t}\n\t\tif (widgetId) { return dojo.widget.byId(widgetId); }\n\t\telse if (node == null) { return null; }\n\t\telse{ return dojo.widget.manager.byNode(node); }","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.onExpandClick":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif (node.isExpanded){\n\t\t\tthis.collapse(node);\n\t\t} else {\n\t\t\tthis.expand(node);\n\t\t}","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.expand":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\t\tnode.expand(); \/\/ skip trees or non-folders\n\t\t}","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.collapse":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tnode.collapse();\t","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.canEditLabel":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tif (node.actionIsDisabledNow(node.actions.EDIT)) return false;\n\n\t\treturn true;","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.editLabelStart":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tif (!this.canEditLabel(node)) {\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tif (!this.editor.isClosed()) {\n\t\t\t\/\/dojo.debug(\"editLabelStart editor open\");\n\t\t\tthis.editLabelFinish(this.editor.saveOnBlur);\t\t\t\n\t\t}\n\t\t\t\t\n\t\tthis.doEditLabelStart(node);","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.editLabelFinish":{"_":{"meta":{"summary":"","parameters":{"save":{"type":""}},"src":"\t\tthis.doEditLabelFinish(save);\t\t","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.doEditLabelStart":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tif (!this.editor) {\n\t\t\tdojo.raise(this.widgetType+\": no editor specified\");\n\t\t}\n\t\t\n\t\t\/\/dojo.debug(\"editLabelStart editor open \"+node);\n\t\t\n\t\tthis.editor.open(node);\t\t","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.doEditLabelFinish":{"_":{"meta":{"summary":"","parameters":{"save":{"type":""},"server_data":{"type":""}},"src":"\t\t\tdojo.raise(this.widgetType+\": no editor specified\");\n\t\t}\n\n\t\tvar node = this.editor.node;\t\n\t\tvar editorTitle = this.editor.getContents();\n\t\t\n\t\tthis.editor.close(save);\n\n\t\tif (save) {\n\t\t\tvar data = {title:editorTitle};\n\t\t\tdojo.lang.mixin(data, server_data);\n\t\t\t\n\t\t\t\n\t\t\tif (node.isPhantom) {\t\t\t\n\t\t\t\t\/\/ I can't just set node phantom's title, because widgetId\/objectId\/widgetName...\n\t\t\t\t\/\/ may be provided by server\n\t\t\t\tvar parent = node.parent;\n\t\t\t\tvar index = node.getParentIndex();\t\t\t\t\n\t\t\t\tnode.destroy();\n\t\t\t\t\/\/ new node was added!\n\t\t\t\tdojo.widget.TreeBasicControllerV3.prototype.doCreateChild.call(this, parent, index, data);\n\t\t\t} else {\n\t\t\t\tvar title = server_data && server_data.title ? server_data.title : editorTitle;\n\t\t\t\t\/\/ use special method to make sure everything updated and event sent\n\t\t\t\tnode.setTitle(title); \n\t\t\t}\n\t\t} else {\n\t\t\t\/\/dojo.debug(\"Kill phantom on cancel\");\n\t\t\tif (node.isPhantom) {\n\t\t\t\tnode.destroy();\n\t\t\t}\n\t\t}","this_inherits":["dojo.widget.TreeBasicControllerV3.prototype.doCreateChild"],"this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.title":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""}},"src":"\t\tvar data = {title:parent.tree.defaultChildTitle};\n\t\t\n\t\tif (!this.canCreateChild(parent, index, data)) {\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tvar child = this.doCreateChild(parent, index, data);\n\t\tif (!child) return false;\n\t\tthis.exposeCreateChild(parent, index, data);\n\t\t\n\t\tchild.isPhantom = true;\n\t\t\n\t\tif (!this.editor.isClosed()) {\n\t\t\t\/\/dojo.debug(\"editLabelStart editor open\");\n\t\t\tthis.editLabelFinish(this.editor.saveOnBlur);\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t\t\t\n\t\tthis.doEditLabelStart(child);\t\t","this_inherits":["dojo.widget.TreeBasicControllerV3.prototype.doCreateChild"],"this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.makeDefaultNode":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""}},"src":"\t\tvar data = {title:parent.tree.defaultChildTitle};\n\t\treturn dojo.widget.TreeBasicControllerV3.prototype.doCreateChild.call(this,parent,index,data);","this_inherits":["dojo.widget.TreeBasicControllerV3.prototype.doCreateChild"],"this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.runStages":{"_":{"meta":{"summary":"","parameters":{"check":{"type":""},"prepare":{"type":""},"make":{"type":""},"finalize":{"type":""},"expose":{"type":""},"args":{"type":""}},"src":"\t\tif (check && !check.apply(this, args)) {\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tif (prepare && !prepare.apply(this, args)) {\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tvar result = make.apply(this, args);\n\t\t\n\t\t\n\t\tif (finalize) {\n\t\t\tfinalize.apply(this,args);\t\t\t\n\t\t}\n\t\t\t\n\t\tif (!result) {\n\t\t\treturn result;\n\t\t}\n\t\t\n\t\t\t\n\t\tif (expose) {\n\t\t\texpose.apply(this, args);\n\t\t}\n\t\t\n\t\treturn result;","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.createAndEdit":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""}},"src":"\t\tvar data = {title:parent.tree.defaultChildTitle};\n\t\t\n\t\tif (!this.canCreateChild(parent, index, data)) {\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tvar child = this.doCreateChild(parent, index, data);\n\t\tif (!child) return false;\n\t\tthis.exposeCreateChild(parent, index, data);\n\t\t\n\t\tchild.isPhantom = true;\n\t\t\n\t\tif (!this.editor.isClosed()) {\n\t\t\t\/\/dojo.debug(\"editLabelStart editor open\");\n\t\t\tthis.editLabelFinish(this.editor.saveOnBlur);\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t\t\t\n\t\tthis.doEditLabelStart(child);\t\t","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.canClone":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""},"deep":{"type":""}},"src":"\t\treturn true;","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.clone":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""},"deep":{"type":""}},"src":"\t\treturn this.runStages(\n\t\t\tthis.canClone, this.prepareClone, this.doClone, this.finalizeClone, this.exposeClone, arguments\n\t\t);\t\t\t","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.exposeClone":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""}},"src":"\t\tif (newParent.isTreeNode) {\n\t\t\tthis.expand(newParent);\n\t\t}","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.doClone":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""},"deep":{"type":""}},"src":"\t\tnewParent.addChild(cloned, index);\n\t\t\t\t\n\t\treturn cloned;","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.canDetach":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""}},"src":"\t\tif (child.actionIsDisabledNow(child.actions.DETACH)) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.detach":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\treturn this.runStages(\n\t\t\tthis.canDetach, this.prepareDetach, this.doDetach, this.finalizeDetach, this.exposeDetach, arguments\n\t\t);\t\t\t","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.doDetach":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\tnode.detach();","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.canDestroy":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""}},"src":"\t\tif (child.parent && !this.canDetach(child)) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.destroy":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\treturn this.runStages(\n\t\t\tthis.canDestroy, this.prepareDestroy, this.doDestroy, this.finalizeDestroy, this.exposeDestroy, arguments\n\t\t);\t\t\t","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.doDestroy":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tnode.destroy();","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.canMoveNotANode":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"parent":{"type":""}},"src":"\t\tif (child.treeCanMove) {\n\t\t\treturn child.treeCanMove(parent);\n\t\t}\n\t\t\n\t\treturn true;","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.canMove":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""}},"src":"\t\tif (!child.isTreeNode) {\n\t\t\treturn this.canMoveNotANode(child, newParent);\n\t\t}\n\t\t\t\t\t\t\n\t\tif (child.actionIsDisabledNow(child.actions.MOVE)) {\n\t\t\treturn false;\n\t\t}\n\n\t\t\/\/ if we move under same parent then no matter if ADDCHILD disabled for him\n\t\t\/\/ but if we move to NEW parent then check if action is disabled for him\n\t\t\/\/ also covers case for newParent being a non-folder in strict mode etc\n\t\tif (child.parent !== newParent && newParent.actionIsDisabledNow(newParent.actions.ADDCHILD)) {\n\t\t\treturn false;\n\t\t}\n\n\t\t\/\/ Can't move parent under child. check whether new parent is child of \"child\".\n\t\tvar node = newParent;\n\t\twhile(node.isTreeNode) {\n\t\t\t\/\/dojo.debugShallow(node.title)\n\t\t\tif (node === child) {\n\t\t\t\t\/\/ parent of newParent is child\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tnode = node.parent;\n\t\t}\n\n\t\treturn true;","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.move":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":",..."}},"src":"\t\treturn this.runStages(this.canMove, this.prepareMove, this.doMove, this.finalizeMove, this.exposeMove, arguments);\t\t\t","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.doMove":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""}},"src":"\t\treturn true;","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.exposeMove":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""}},"src":"\t\tif (newParent.isTreeNode) {\n\t\t\tthis.expand(newParent);\n\t\t}","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.canCreateChild":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"data":{"type":""}},"src":"\t\tif (parent.actionIsDisabledNow(parent.actions.ADDCHILD)) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.createChild":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"data":{"type":""}},"src":"\t\treturn this.runStages(this.canCreateChild, this.prepareCreateChild, this.doCreateChild, this.finalizeCreateChild, this.exposeCreateChild, arguments);\t\t","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.doCreateChild":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"data":{"type":""}},"src":"\t\t\/\/var newChild = dojo.widget.createWidget(widgetType, data);\n\n\t\tparent.addChild(newChild, index);\n\n\t\treturn newChild;","this":"dojo.widget.TreeBasicControllerV3"}}},"dojo.widget.TreeBasicControllerV3.exposeCreateChild":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""}},"src":"\t\treturn this.expand(parent);","this":"dojo.widget.TreeBasicControllerV3"}}}}}},"dojo.widget.TreeCommon":{"meta":{"requires":{"common":["dojo.widget.*"]},"methods":{"dojo.widget.TreeCommon":{"_":{"meta":{"summary":"","src":"","protovariables":{"listenTreeEvents":"","listenedTrees":"","listenNodeFilter":""}}}},"dojo.widget.TreeCommon.listenTree":{"_":{"meta":{"summary":"","parameters":{"tree":{"type":""}},"src":"\t\tif (this.listenedTrees[tree.widgetId]) {\n\t\t\treturn; \/\/ already listening\n\t\t}\n\t\t\n\t\tdojo.lang.forEach(this.listenTreeEvents, function(event) {\n\t\t\tvar eventHandler =  \"on\" + event.charAt(0).toUpperCase() + event.substr(1);\n\t\t\t\/\/dojo.debug(\"subscribe: event \"+tree.eventNames[event]+\" widget \"+_this+\" handler \"+eventHandler);\n\t\t\tdojo.event.topic.subscribe(tree.eventNames[event], _this, eventHandler);\n\t\t});\n\t\t\n\t\t\n\t\tvar filter;\n\t\t\n\t\tif (this.listenNodeFilter) {\t\t\t\n\t\t\tthis.processDescendants(tree, this.listenNodeFilter, this.listenNode, true);\n\t\t}\n\t\t\n\t\t\/**\n\t\t * remember that I listen to this tree. No unbinding\/binding\/deselection\n\t\t * needed when transfer between listened trees\n\t\t *\/\n\t\tthis.listenedTrees[tree.widgetId] = true;","returns":"already listening","this":"dojo.widget.TreeCommon"}}},"dojo.widget.TreeCommon.listenNode":{"_":{"meta":{"summary":"","src":"","this":"dojo.widget.TreeCommon"}}},"dojo.widget.TreeCommon.unlistenNode":{"_":{"meta":{"summary":"","src":"","this":"dojo.widget.TreeCommon"}}},"dojo.widget.TreeCommon.unlistenTree":{"_":{"meta":{"summary":"","parameters":{"tree":{"type":""},"nodeFilter":{"type":""}},"src":"\t\tvar _this = this;\n\t\n\t\tif (!this.listenedTrees[tree.widgetId]) {\n\t\t\treturn; \n\t\t}\n\t\t\n\t\tdojo.lang.forEach(this.listenTreeEvents, function(event) {\n\t\t\tvar eventHandler =  \"on\" + event.charAt(0).toUpperCase() + event.substr(1);\n\t\t\tdojo.event.topic.unsubscribe(tree.eventNames[event], _this, eventHandler);\n\t\t});\n\t\t\n\t\t\n\t\tif (this.listenNodeFilter) {\n\t\t\tthis.processDescendants(tree, this.listenNodeFilter, this.unlistenNode, true);\n\t\t}\n\t\t\n\t\tdelete this.listenedTrees[tree.widgetId];","this":"dojo.widget.TreeCommon"}}},"dojo.widget.TreeCommon.domElement2TreeNode":{"_":{"meta":{"summary":"","parameters":{"domElement":{"type":""}},"src":"\t\twhile (domElement && !domElement.widgetId) {\n\t\t\tdomElement = domElement.parentNode;\n\t\t}\n\t\t\n\t\tif (!domElement) {\n\t\t\tdojo.raise(\"domElement2TreeNode couldnt detect widget\");\n\t\t}\n\t\t\n\t\treturn dojo.widget.byId(domElement.widgetId);","this":"dojo.widget.TreeCommon"}}},"dojo.widget.TreeCommon.processDescendants":{"_":{"meta":{"summary":"","parameters":{"elem":{"type":""},"filter":{"type":""},"func":{"type":""},"skipFirst":{"type":""}},"src":"\t\tvar _this = this;\n\t\t\n\t\tif (!skipFirst) {\n\t\t\tif (!filter.call(_this,elem)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfunc.call(_this,elem);\t        \n\t\t}\n\t\t\n\t\t\n\t\tvar stack = [elem]\n\t\twhile (elem = stack.pop()) {\n\t\t\tdojo.lang.forEach(elem.children, function(elem) {\n\t\t\t\tif (filter.call(_this, elem)) {\t\t\n\t\t\t\t\tfunc.call(_this, elem);\n\t\t\t\t\tstack.push(elem);\n\t\t\t\t}\n\t\t\t});\n\t\t}","this":"dojo.widget.TreeCommon"}}}}}},"dojo.widget.TreeContextMenu":{"meta":{"requires":{"common":["dojo.event.*","dojo.io.*","dojo.widget.Menu2"]},"methods":{"dojo.widget.TreeContextMenu":{"_":{"meta":{"summary":"","src":"\tdojo.widget.PopupMenu2.call(this);\n\n\tthis.listenedTrees = [];","this_variables":["listenedTrees"],"inherits":["dojo.widget.PopupMenu2"],"protovariables":{"widgetType":""}}}},"dojo.widget.TreeMenuItem":{"_":{"meta":{"summary":"","src":"\tdojo.widget.MenuItem2.call(this);","inherits":["dojo.widget.MenuItem2"],"protovariables":{"widgetType":"","treeActions":""},"this_variables":["treeActions"]}}},"dojo.widget.TreeContextMenu.open":{"_":{"meta":{"summary":"","parameters":{"x":{"type":""},"y":{"type":""},"parentMenu":{"type":""},"explodeSrc":{"type":""}},"src":"\t\tvar result = dojo.widget.PopupMenu2.prototype.open.apply(this, arguments);\n\n\t\t\/* publish many events here about structural changes *\/\n\t\tdojo.event.topic.publish(this.eventNames.open, { menu:this });\n\n\t\treturn result;","this":"dojo.widget.TreeContextMenu"}}},"dojo.widget.TreeContextMenu.menu":{"_":{"meta":{"summary":"","parameters":{"x":{"type":""},"y":{"type":""},"parentMenu":{"type":""},"explodeSrc":{"type":""}},"src":"\t\tvar result = dojo.widget.PopupMenu2.prototype.open.apply(this, arguments);\n\n\t\t\/* publish many events here about structural changes *\/\n\t\tdojo.event.topic.publish(this.eventNames.open, { menu:this });\n\n\t\treturn result;","this":"dojo.widget.TreeContextMenu"}}},"dojo.widget.TreeContextMenu.listenTree":{"_":{"meta":{"summary":"","parameters":{"tree":{"type":""}},"src":"\t\tfor(var i=0; i<nodes.length; i++) {\n\t\t\tif (!nodes[i].isTreeNode) continue;\n\t\t\tthis.bindDomNode(nodes[i].labelNode);\n\t\t}\n\n\n\t\t\/* bind context menu to all nodes that will be created in the future (e.g loaded from server)*\/\n\t\tvar _this = this;\n\t\tdojo.event.topic.subscribe(tree.eventNames.createDOMNode, this, \"onCreateDOMNode\");\n\t\tdojo.event.topic.subscribe(tree.eventNames.moveFrom, this, \"onMoveFrom\");\n\t\tdojo.event.topic.subscribe(tree.eventNames.moveTo, this, \"onMoveTo\");\n\t\tdojo.event.topic.subscribe(tree.eventNames.removeNode, this, \"onRemoveNode\");\n\t\tdojo.event.topic.subscribe(tree.eventNames.addChild, this, \"onAddChild\");\n\t\tdojo.event.topic.subscribe(tree.eventNames.treeDestroy, this, \"onTreeDestroy\");\n\n\t\tthis.listenedTrees.push(tree);","this":"dojo.widget.TreeContextMenu"}}},"dojo.widget.TreeContextMenu.unlistenTree":{"_":{"meta":{"summary":"","parameters":{"tree":{"type":""}},"src":"\t\tdojo.event.topic.unsubscribe(tree.eventNames.moveFrom, this, \"onMoveFrom\");\n\t\tdojo.event.topic.unsubscribe(tree.eventNames.moveTo, this, \"onMoveTo\");\n\t\tdojo.event.topic.unsubscribe(tree.eventNames.removeNode, this, \"onRemoveNode\");\n\t\tdojo.event.topic.unsubscribe(tree.eventNames.addChild, this, \"onAddChild\");\n\t\tdojo.event.topic.unsubscribe(tree.eventNames.treeDestroy, this, \"onTreeDestroy\");\n\n\t\tfor(var i=0; i<this.listenedTrees.length; i++){\n           if(this.listenedTrees[i] === tree){\n                   this.listenedTrees.splice(i, 1);\n                   break;\n           }\n\t\t}","this":"dojo.widget.TreeContextMenu"}}},"dojo.widget.TreeContextMenu.onTreeDestroy":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tthis.unlistenTree(message.source);","this":"dojo.widget.TreeContextMenu"}}},"dojo.widget.TreeContextMenu.bindTreeNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tvar _this = this;\n\t\t\/\/dojo.debug(\"bind to \"+node);\n\t\tdojo.lang.forEach(node.getDescendants(),\n\t\t\tfunction(e) {_this.bindDomNode(e.labelNode); }\n\t\t);","this":"dojo.widget.TreeContextMenu"}}},"dojo.widget.TreeContextMenu.unBindTreeNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tvar _this = this;\n\t\t\/\/dojo.debug(\"Unbind from \"+node);\n\t\tdojo.lang.forEach(node.getDescendants(),\n\t\t\tfunction(e) {_this.unBindDomNode(e.labelNode); }\n\t\t);","this":"dojo.widget.TreeContextMenu"}}},"dojo.widget.TreeContextMenu.onCreateDOMNode":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tthis.bindTreeNode(message.source);","this":"dojo.widget.TreeContextMenu"}}},"dojo.widget.TreeContextMenu.onMoveFrom":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tif (!dojo.lang.inArray(this.listenedTrees, message.newTree)) {\n\t\t\tthis.unBindTreeNode(message.child);\n\t\t}","this":"dojo.widget.TreeContextMenu"}}},"dojo.widget.TreeContextMenu.onMoveTo":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tif (dojo.lang.inArray(this.listenedTrees, message.newTree)) {\n\t\t\tthis.bindTreeNode(message.child);\n\t\t}","this":"dojo.widget.TreeContextMenu"}}},"dojo.widget.TreeContextMenu.onRemoveNode":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tthis.unBindTreeNode(message.child);","this":"dojo.widget.TreeContextMenu"}}},"dojo.widget.TreeContextMenu.onAddChild":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tif (message.domNodeInitialized) {\n\t\t\t\/\/ dom node was there already => I did not process onNodeDomCreate\n\t\t\tthis.bindTreeNode(message.child);\n\t\t}","this":"dojo.widget.TreeContextMenu"}}},"dojo.widget.TreeMenuItem.initialize":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tthis.treeActions = this.treeActions.split(\",\");\n\t\tfor(var i=0; i<this.treeActions.length; i++) {\n\t\t\tthis.treeActions[i] = this.treeActions[i].toUpperCase();\n\t\t}","this":"dojo.widget.TreeMenuItem"}}},"dojo.widget.TreeMenuItem.getTreeNode":{"_":{"meta":{"summary":"","src":"\t\tvar menu = this;\n\n\t\twhile (! (menu instanceof dojo.widget.TreeContextMenu) ) {\n\t\t\tmenu = menu.parent;\n\t\t}\n\n\t\tvar source = menu.getTopOpenEvent().target;\n\n\t\twhile (!source.getAttribute('treeNode') && source.tagName != 'body') {\n\t\t\tsource = source.parentNode;\n\t\t}\n\t\tif (source.tagName == 'body') {\n\t\t\tdojo.raise(\"treeNode not detected\");\n\t\t}\n\t\tvar treeNode = dojo.widget.manager.getWidgetById(source.getAttribute('treeNode'));\n\n\t\treturn treeNode;","this":"dojo.widget.TreeMenuItem"}}},"dojo.widget.TreeMenuItem.menuOpen":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tvar treeNode = this.getTreeNode();\n\n\t\tthis.setDisabled(false); \/\/ enable by default\n\n\t\tvar _this = this;\n\t\tdojo.lang.forEach(_this.treeActions,\n\t\t\tfunction(action) {\n\t\t\t\t_this.setDisabled( treeNode.actionIsDisabled(action) );\n\t\t\t}\n\t\t);","this":"dojo.widget.TreeMenuItem"}}},"dojo.widget.TreeMenuItem.toString":{"_":{"meta":{"summary":"","src":"\t\treturn \"[\"+this.widgetType+\" node \"+this.getTreeNode()+\"]\";","this":"dojo.widget.TreeMenuItem"}}}}}},"dojo.widget.TreeContextMenuV3":{"meta":{"requires":{"common":["dojo.event.*","dojo.io.*","dojo.widget.Menu2","dojo.widget.TreeCommon"]},"methods":{"dojo.widget.TreeContextMenuV3":{"_":{"meta":{"summary":"","src":"\tdojo.widget.PopupMenu2.call(this);\n\n\tthis.listenedTrees = {};","this_variables":["listenedTrees"],"inherits":["dojo.widget.PopupMenu2","dojo.widget.TreeCommon"],"protovariables":{"widgetType":"","listenTreeEvents":""}}}},"dojo.widget.TreeMenuItemV3":{"_":{"meta":{"summary":"","src":"\tdojo.widget.MenuItem2.call(this);\n\t\n\tthis.treeActions = [];","this_variables":["treeActions"],"inherits":["dojo.widget.MenuItem2","dojo.widget.TreeCommon"],"protovariables":{"widgetType":"","treeActions":""}}}},"dojo.widget.TreeContextMenuV3.open":{"_":{"meta":{"summary":"","parameters":{"x":{"type":""},"y":{"type":""},"parentMenu":{"type":""},"explodeSrc":{"type":""}},"src":"\t\tvar result = dojo.widget.PopupMenu2.prototype.open.apply(this, arguments);\n\n\t\t\/* publish many events here about structural changes *\/\n\t\tdojo.event.topic.publish(this.eventNames.open, { menu:this });\n\n\t\treturn result;","this":"dojo.widget.TreeContextMenuV3"}}},"dojo.widget.TreeContextMenuV3.menu":{"_":{"meta":{"summary":"","parameters":{"x":{"type":""},"y":{"type":""},"parentMenu":{"type":""},"explodeSrc":{"type":""}},"src":"\t\tvar result = dojo.widget.PopupMenu2.prototype.open.apply(this, arguments);\n\n\t\t\/* publish many events here about structural changes *\/\n\t\tdojo.event.topic.publish(this.eventNames.open, { menu:this });\n\n\t\treturn result;","this":"dojo.widget.TreeContextMenuV3"}}},"dojo.widget.TreeContextMenuV3.listenNodeFilter":{"_":{"meta":{"summary":"","parameters":{"elem":{"type":""}},"src":"                                    return elem instanceof dojo.widget.Widget   ","this":"dojo.widget.TreeContextMenuV3"}}},"dojo.widget.TreeContextMenuV3.onBeforeTreeDestroy":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tthis.unlistenTree(message.source);","this":"dojo.widget.TreeContextMenuV3"}}},"dojo.widget.TreeContextMenuV3.onAfterChangeTree":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\t\t\/\/ I got this message because node leaves me (oldtree)\n\t\t\tthis.processDescendants(message.node, this.listenNodeFilter, this.unlistenNode);\n\t\t}\t\t\n\t\t\n\t\tif (!message.oldTree || !this.listenedTrees[message.oldTree.widgetId]) {\n\t\t\t\/\/ we have new node\n\t\t\tthis.processDescendants(message.node, this.listenNodeFilter, this.listenNode);\n\t\t}\n\t\t\n\t\t\/\/dojo.profile.end(\"onTreeChange\");","this":"dojo.widget.TreeContextMenuV3"}}},"dojo.widget.TreeContextMenuV3.listenNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tthis.bindDomNode(node.labelNode);","this":"dojo.widget.TreeContextMenuV3"}}},"dojo.widget.TreeContextMenuV3.unlistenNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tthis.unBindDomNode(node.labelNode);","this":"dojo.widget.TreeContextMenuV3"}}},"dojo.widget.TreeMenuItemV3.initialize":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tfor(var i=0; i<this.treeActions.length; i++) {\n\t\t\tthis.treeActions[i] = this.treeActions[i].toUpperCase();\n\t\t}","this":"dojo.widget.TreeMenuItemV3"}}},"dojo.widget.TreeMenuItemV3.getTreeNode":{"_":{"meta":{"summary":"","src":"\t\tvar menu = this;\n\n\t\t\/\/ FIXME: change to dojo.widget[this.widgetType]\n\t\twhile (! (menu instanceof dojo.widget.TreeContextMenuV3) ) {\n\t\t\tmenu = menu.parent;\n\t\t}\n\n\t\tvar source = menu.getTopOpenEvent().target;\n\n\t\tvar treeNode = this.domElement2TreeNode(source);\n\t\t\n\t\treturn treeNode;","this":"dojo.widget.TreeMenuItemV3"}}},"dojo.widget.TreeMenuItemV3.menuOpen":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tvar treeNode = this.getTreeNode();\n\n\t\tthis.setDisabled(false); \/\/ enable by default\n\n\t\tvar _this = this;\n\t\tdojo.lang.forEach(_this.treeActions,\n\t\t\tfunction(action) {\n\t\t\t\t_this.setDisabled( treeNode.actionIsDisabledNow(action) );\n\t\t\t}\n\t\t);","this":"dojo.widget.TreeMenuItemV3"}}},"dojo.widget.TreeMenuItemV3.toString":{"_":{"meta":{"summary":"","src":"\t\treturn \"[\"+this.widgetType+\" node \"+this.getTreeNode()+\"]\";","this":"dojo.widget.TreeMenuItemV3"}}}}}},"dojo.widget.TreeControllerExtension":{"meta":{"methods":{"dojo.widget.TreeControllerExtension":{"_":{"meta":{"summary":"","src":"","this_variables":["node","savedIndices","process"]}}},"handler":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"savedIndices":{"type":""}},"src":"\t\t\tthis.node = node;                \n\t\t\tthis.savedIndices = savedIndices; \/\/[i];\n\t\t\t\/\/ recursively read next savedIndices level and apply to opened node\n\t\t\tthis.process = function() {\n\t\t\t\t\/\/dojo.debug(\"Callback applied for \"+this.node);\n\t\t\t\t_this.restoreExpandedIndices(this.node, this.savedIndices, field);\n\t\t\t};","this_variables":["node","savedIndices","process"]}}},"handler.process":{"_":{"meta":{"summary":"","src":""}}},"dojo.widget.TreeControllerExtension.saveExpandedIndices":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"field":{"type":""}},"src":"\t\tvar obj = {};\n\n\t\tfor(var i=0; i<node.children.length; i++) {\n\t\t\tif (node.children[i].isExpanded) {\n\t\t\t\tvar key = dojo.lang.isUndefined(field) ? i : node.children[i][field];\n\t\t\t\tobj[key] = this.saveExpandedIndices(node.children[i], field);\n\t\t\t}\n\t\t}\n\n\t\treturn obj;","this":"dojo.widget.TreeControllerExtension"}}},"dojo.widget.TreeControllerExtension.restoreExpandedIndices":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"savedIndices":{"type":""},"field":{"type":""}},"src":"\t\tvar _this = this;\n\n\t\tvar handler = function(node, savedIndices) {\n\t\t\tthis.node = node; \/\/.children[i];\n\t\t\tthis.savedIndices = savedIndices; \/\/[i];\n\t\t\t\/\/ recursively read next savedIndices level and apply to opened node\n\t\t\tthis.process = function() {\n\t\t\t\t\/\/dojo.debug(\"Callback applied for \"+this.node);\n\t\t\t\t_this.restoreExpandedIndices(this.node, this.savedIndices, field);\n\t\t\t};\n\t\t}\n\n\n\t\tfor(var i=0; i<node.children.length; i++) {\n\t\t\tvar child = node.children[i];\n\n\t\t\tvar found = false;\n\t\t\tvar key = -1;\n\n\t\t\t\/\/dojo.debug(\"Check \"+child)\n\t\t\t\/\/ process field set case\n\t\t\tif (dojo.lang.isUndefined(field) && savedIndices[i]) {\n\t\t\t\tfound = true;\n\t\t\t\tkey = i;\n\t\t\t}\n\n\t\t\t\/\/ process case when field is not set\n\t\t\tif (field) {\n\t\t\t\tfor(var key in savedIndices) {\n\t\t\t\t\t\/\/dojo.debug(\"Compare \"+key+\" \"+child[field])\n\t\t\t\t\tif (key == child[field]) {\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t\/\/ if we found anything - expand it\n\t\t\tif (found) {\n\t\t\t\t\/\/dojo.debug(\"Found at \"+key)\n\t\t\t\tvar h = new handler(child, savedIndices[key]);\n\t\t\t\t_this.expand(child, false, h, h.process);\n\t\t\t} else if (child.isExpanded) { \/\/ not found, so collapse\n\t\t\t\t\/\/dojo.debug(\"Collapsing all descendants \"+node.children[i])\n\t\t\t\tdojo.lang.forEach(child.getDescendants(), function(elem) { _this.collapse(elem); });\n\t\t\t\t\/\/this.collapse(node.children[i]);\n\t\t\t}\n\n\t\t}","this":"dojo.widget.TreeControllerExtension"}}}}}},"dojo.widget.TreeDemo":{"meta":{"requires":{"common":["dojo.Deferred"]}}},"dojo.widget.TreeDeselectOnDblselect":{"meta":{"requires":{"common":["dojo.widget.HtmlWidget","dojo.widget.TreeSelectorV3"]},"methods":{"dojo.widget.TreeDeselectOnDblselect":{"_":{"meta":{"summary":"","src":"","inherits":["dojo.widget.HtmlWidget"],"protovariables":{"widgetType":"","selector":""},"this_variables":["selector"]}}},"dojo.widget.TreeDeselectOnDblselect.initialize":{"_":{"meta":{"summary":"","src":"\t\tthis.selector = dojo.widget.byId(this.selector);\n\t\t\/\/dojo.debug(\"OK \"+this.selector);\n\t\tdojo.event.topic.subscribe(this.selector.eventNames.dblselect, this, \"onDblselect\");\t\t","this":"dojo.widget.TreeDeselectOnDblselect"}}},"dojo.widget.TreeDeselectOnDblselect.onDblselect":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"","this":"dojo.widget.TreeDeselectOnDblselect"}}}}}},"dojo.widget.TreeDisableWrapExtension":{"meta":{"requires":{"common":["dojo.widget.HtmlWidget","dojo.widget.TreeExtension"]},"methods":{"dojo.widget.TreeDisableWrapExtension":{"_":{"meta":{"summary":"","src":"\tdojo.widget.TreeExtension.call( this );\t","inherits":["dojo.widget.TreeExtension"],"protovariables":{"widgetType":"","templateCssPath":""}}}},"dojo.widget.TreeDisableWrapExtension.listenTree":{"_":{"meta":{"summary":"","parameters":{"tree":{"type":""}},"src":"\t\tvar wrappingDiv = document.createElement( \"div\" );\n\t\tvar clazz = tree.classPrefix+\"DisableWrap\";\n\t\tif (dojo.render.html.ie) {\n\t\t\tclazz = clazz+' '+ tree.classPrefix+\"IEDisableWrap\";\n\t\t}\n\t\tdojo.html.setClass(wrappingDiv, clazz);\n\t\t\n\t\tvar table = document.createElement( \"table\" );\n\t\twrappingDiv.appendChild( table );\n\t\t\n\t\tvar tbody = document.createElement( \"tbody\" );\n\t\ttable.appendChild( tbody );\n\t\t\n\t\tvar tr = document.createElement( \"tr\" );\n\t\ttbody.appendChild( tr );\n\t\t\n\t\tvar td = document.createElement( \"td\" );\n\t\ttr.appendChild( td );\n\t\t\n\t\tif( tree.domNode.parentNode ) {\n\t\t\ttree.domNode.parentNode.replaceChild( wrappingDiv, tree.domNode );\n\t\t}\n\t\t\n\t\ttd.appendChild( tree.domNode );\n\t\ttree.domNode = wrappingDiv;","this":"dojo.widget.TreeDisableWrapExtension"}}}}}},"dojo.widget.TreeDndControllerV3":{"meta":{"requires":{"common":["dojo.dnd.TreeDragAndDropV3"]},"methods":{"dojo.widget.TreeDndControllerV3":{"_":{"meta":{"summary":"","src":"\tthis.dragSources = {};\n\n\tthis.dropTargets = {};\n\t\n\tthis.listenedTrees = {};","this_variables":["dragSources","dropTargets","listenedTrees","treeController"],"inherits":["dojo.widget.HtmlWidget","dojo.widget.TreeCommon"],"protovariables":{"widgetType":"","listenTreeEvents":""}}}},"dojo.widget.TreeDndControllerV3.listenNodeFilter":{"_":{"meta":{"summary":"","parameters":{"elem":{"type":""}},"src":"                                    return elem instanceof dojo.widget.Widget    ","this":"dojo.widget.TreeDndControllerV3"}}},"dojo.widget.TreeDndControllerV3.initialize":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""}},"src":"\t\tthis.treeController = dojo.lang.isString(args.controller) ? dojo.widget.byId(args.controller) : args.controller;\n\t\t\n\t\tif (!this.treeController) {\n\t\t\tdojo.raise(\"treeController must be declared\");\n\t\t}","this":"dojo.widget.TreeDndControllerV3"}}},"dojo.widget.TreeDndControllerV3.onBeforeTreeDestroy":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tthis.unlistenTree(message.source);","this":"dojo.widget.TreeDndControllerV3"}}},"dojo.widget.TreeDndControllerV3.onAfterAddChild":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"","this":"dojo.widget.TreeDndControllerV3"}}},"dojo.widget.TreeDndControllerV3.onAfterChangeTree":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\t\/\/dojo.debug(\"HERE\");\n\t\t\n\t\tif (!message.newTree || !this.listenedTrees[message.newTree.widgetId]) {\t\t\t\n\t\t\tthis.processDescendants(message.node, this.listenNodeFilter, this.unlistenNode);\n\t\t}\t\t\n\t\t\n\t\tif (!this.listenedTrees[message.oldTree.widgetId]) {\n\t\t\t\/\/ we have new node\n\t\t\tthis.processDescendants(message.node, this.listenNodeFilter, this.listenNode);\t\n\t\t}\n\t\t\/\/dojo.profile.end(\"onTreeChange\");","this":"dojo.widget.TreeDndControllerV3"}}},"dojo.widget.TreeDndControllerV3.listenNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tif (this.dragSources[node.widgetId] || this.dropTargets[node.widgetId]) return;\n\n\t\n\t\t\/* I drag label, not domNode, because large domNodes are very slow to copy and large to drag *\/\n\n\t\tvar source = null;\n\t\tvar target = null;\n\n\t\n\t\tif (!node.actionIsDisabled(node.actions.MOVE)) {\n\t\t\t\/\/dojo.debug(\"reg source\")\n\t\t\t\n\t\t\t\/\/dojo.profile.start(\"Dnd source \"+node);\t\t\n\t\t\tvar source = this.makeDragSource(node);\n\t\t\t\/\/dojo.profile.end(\"Dnd source \"+node);\t\t\n\n\t\t\tthis.dragSources[node.widgetId] = source;\n\t\t}\n\n\t\t\/\/dojo.profile.start(\"Dnd target \"+node);\t\t\n\t\t\/\/dojo.debug(\"reg target\");\n\t\tvar target = this.makeDropTarget(node);\n\t\t\/\/dojo.profile.end(\"Dnd target \"+node);\t\t\n\n\t\tthis.dropTargets[node.widgetId] = target;\n\n\t\t\/\/dojo.profile.end(\"Dnd listenNode \"+node);\t\t","this":"dojo.widget.TreeDndControllerV3"}}},"dojo.widget.TreeDndControllerV3.makeDragSource":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\treturn new dojo.dnd.TreeDragSourceV3(node.contentNode, this, node.tree.widgetId, node);","this":"dojo.widget.TreeDndControllerV3"}}},"dojo.widget.TreeDndControllerV3.makeDropTarget":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\t return new dojo.dnd.TreeDropTargetV3(node.contentNode, this.treeController, node.tree.DndAcceptTypes, node);","this":"dojo.widget.TreeDndControllerV3"}}},"dojo.widget.TreeDndControllerV3.unlistenNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tif (this.dragSources[node.widgetId]) {\n\t\t\tdojo.dnd.dragManager.unregisterDragSource(this.dragSources[node.widgetId]);\n\t\t\tdelete this.dragSources[node.widgetId];\n\t\t}\n\n\t\tif (this.dropTargets[node.widgetId]) {\n\t\t\tdojo.dnd.dragManager.unregisterDropTarget(this.dropTargets[node.widgetId]);\n\t\t\tdelete this.dropTargets[node.widgetId];\n\t\t}","this":"dojo.widget.TreeDndControllerV3"}}}}}},"dojo.widget.TreeDocIconExtension":{"meta":{"requires":{"common":["dojo.widget.HtmlWidget","dojo.widget.TreeExtension"]},"methods":{"dojo.widget.TreeDocIconExtension":{"_":{"meta":{"summary":"","src":"\tdojo.widget.TreeExtension.call(this);\t","inherits":["dojo.widget.TreeExtension"],"protovariables":{"widgetType":"","templateCssPath":"","listenTreeEvents":""}}}},"dojo.widget.TreeDocIconExtension.listenNodeFilter":{"_":{"meta":{"summary":"","parameters":{"elem":{"type":""}},"src":"                                    return elem instanceof dojo.widget.Widget    ","this":"dojo.widget.TreeDocIconExtension"}}},"dojo.widget.TreeDocIconExtension.getNodeType":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tvar nodeType = node.getNodeType();\n\t\tif (!nodeType) { \/\/ set default type\n\t\t\tnodeType = node.isFolder ? \"Folder\" : \"Document\";\n\t\t}\n\t\treturn nodeType;","this":"dojo.widget.TreeDocIconExtension"}}},"dojo.widget.TreeDocIconExtension.setNodeTypeClass":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tvar reg = new RegExp(\"(^|\\\\s)\"+node.tree.classPrefix+\"Icon\\\\w+\",'g');\t\t\t\n\t\t\t\t\n\t\tvar clazz = dojo.html.getClass(node.iconNode).replace(reg,'') + ' ' + node.tree.classPrefix+'Icon'+this.getNodeType(node);\n\t\tdojo.html.setClass(node.iconNode, clazz);\t\t","this":"dojo.widget.TreeDocIconExtension"}}},"dojo.widget.TreeDocIconExtension.onAfterSetFolder":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\t\t\/\/ on node-initialize time when folder is set there is no iconNode\n\t\t\t\/\/ this case will be processed in treeChange anyway\t\t\t\n\t\t\tthis.setNodeTypeClass(message.source);\n\t\t}","this":"dojo.widget.TreeDocIconExtension"}}},"dojo.widget.TreeDocIconExtension.onAfterUnsetFolder":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tthis.setNodeTypeClass(message.source);","this":"dojo.widget.TreeDocIconExtension"}}},"dojo.widget.TreeDocIconExtension.listenNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tvar clazz = node.tree.classPrefix+\"IconContent\";\n\t\tif (dojo.render.html.ie) {\n\t\t\tclazz = clazz+' '+ node.tree.classPrefix+\"IEIconContent\";\n\t\t}\n\t\tdojo.html.setClass(node.contentIconNode, clazz);\n\t\t\n\t\tnode.contentNode.parentNode.replaceChild(node.contentIconNode, node.expandNode);\n\t\t\t\t\t\t\t\t\t  \n\t  \tnode.iconNode = document.createElement(\"div\");\n\t\tdojo.html.setClass(node.iconNode, node.tree.classPrefix+\"Icon\"+' '+node.tree.classPrefix+'Icon'+this.getNodeType(node));\n\t\t\n\t\tnode.contentIconNode.appendChild(node.expandNode);\n\t\tnode.contentIconNode.appendChild(node.iconNode);\n\t\t\n\t\tdojo.dom.removeNode(node.contentNode);\n\t\tnode.contentIconNode.appendChild(node.contentNode);\n\t\t\n\t\n\t\t\n\t\t\/\/dojo.html.insertAfter(node.iconNode, node.expandNode);\n\t\t\n\t\t\/\/dojo.debug(\"listenNode out \"+node);","this":"dojo.widget.TreeDocIconExtension"}}},"dojo.widget.TreeDocIconExtension.onAfterChangeTree":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tvar _this = this;\n\t\t\n\t\t\/\/dojo.debug(message.node)\n\t\t\n\t\tif (!message.oldTree || !this.listenedTrees[message.oldTree.widgetId]) {\t\t\t\n\t\t\t\/\/ moving from old tree to our tree\n\t\t\tthis.processDescendants(message.node,\n\t\t\t\tthis.listenNodeFilter,\n\t\t\t\tthis.listenNode\n\t\t\t);\n\t\t}","this":"dojo.widget.TreeDocIconExtension"}}}}}},"dojo.widget.TreeEditor":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.HtmlWidget","dojo.widget.RichText"]},"methods":{"dojo.widget.TreeEditor":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}}}}},"dojo.widget.TreeEmphaseOnSelect":{"meta":{"requires":{"common":["dojo.widget.HtmlWidget","dojo.widget.TreeSelectorV3","dojo.html.selection"]},"methods":{"dojo.widget.TreeEmphaseOnSelect":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\tthis.saveSelected = {}","this_variables":["saveSelected","selector"],"inherits":["dojo.widget.HtmlWidget"],"protovariables":{"widgetType":"","selector":""}}}},"dojo.widget.TreeEmphaseOnSelect.initialize":{"_":{"meta":{"summary":"","src":"\t\tthis.selector = dojo.widget.byId(this.selector);\n\t\t\n\t\tdojo.event.topic.subscribe(this.selector.eventNames.select, this, \"onSelect\");\n\t\t\/\/dojo.event.topic.subscribe(this.selector.eventNames.listenNode, this, \"onDeselect\");\n\t\t\/\/dojo.event.topic.subscribe(this.selector.eventNames.unlistenNode, this, \"onDeselect\");\n\t\tdojo.event.topic.subscribe(this.selector.eventNames.deselect, this, \"onDeselect\");\t","this":"dojo.widget.TreeEmphaseOnSelect"}}},"dojo.widget.TreeEmphaseOnSelect.onSelect":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tvar domNode = message.node.labelNode;\n\t\t\n\t\tdojo.html.clearSelection(domNode);\n\t\t\n\n\t\tdojo.html.addClass(domNode, message.node.tree.classPrefix+'NodeEmphased');\n\t\t\/\/dojo.debug(\"after select \"+dojo.html.getClass(message.node.labelNode))","this":"dojo.widget.TreeEmphaseOnSelect"}}},"dojo.widget.TreeEmphaseOnSelect.onDeselect":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tvar domNode = message.node.labelNode;\n\t\t\n\t\t\/\/dojo.debug(dojo.html.getClass(message.node.labelNode))\t\t\n\t\tdojo.html.removeClass(domNode, message.node.tree.classPrefix+'NodeEmphased');","this":"dojo.widget.TreeEmphaseOnSelect"}}}}}},"dojo.widget.TreeExtension":{"meta":{"requires":{"common":["dojo.widget.HtmlWidget","dojo.widget.TreeCommon"]},"methods":{"dojo.widget.TreeExtension":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\t\n\tthis.listenedTrees = {}","this_variables":["listenedTrees"],"inherits":["dojo.widget.HtmlWidget","dojo.widget.TreeCommon"]}}}}}},"dojo.widget.TreeLinkExtension":{"meta":{"requires":{"common":["dojo.widget.HtmlWidget","dojo.widget.TreeExtension"]},"methods":{"dojo.widget.TreeLinkExtension":{"_":{"meta":{"summary":"","src":"\tdojo.widget.TreeExtension.call(this);\n\t\n\tthis.params = {}","this_variables":["params"],"inherits":["dojo.widget.TreeExtension"],"protovariables":{"widgetType":"","listenTreeEvents":""}}}},"dojo.widget.TreeLinkExtension.listenTree":{"_":{"meta":{"summary":"","parameters":{"tree":{"type":""}},"src":"\t\tdojo.widget.TreeCommon.prototype.listenTree.call(this,tree);\n\t\t\n\t\tvar labelNode = tree.labelNodeTemplate;\n\t\tvar newLabel = this.makeALabel();\n\t\tdojo.html.setClass(newLabel, dojo.html.getClass(labelNode));\n\t\tlabelNode.parentNode.replaceChild(newLabel, labelNode);\t\t","this_inherits":["dojo.widget.TreeCommon.prototype.listenTree"],"this":"dojo.widget.TreeLinkExtension"}}},"dojo.widget.TreeLinkExtension.makeALabel":{"_":{"meta":{"summary":"","src":"\t\tvar newLabel = document.createElement(\"a\");\n\t\t\n\t\tfor(key in this.params) {\n\t\t\tif (key in {}) continue;\n\t\t\tnewLabel.setAttribute(key, this.params[key]);\n\t\t}\n\t\t\n\t\treturn newLabel;","this":"dojo.widget.TreeLinkExtension"}}},"dojo.widget.TreeLinkExtension.onAfterChangeTree":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tvar _this = this;\n\t\t\n\t\t\n\t\t\/\/ only for new nodes\n\t\tif (!message.oldTree) {\n\t\t\tthis.listenNode(message.node);\n\t\t}","this":"dojo.widget.TreeLinkExtension"}}},"dojo.widget.TreeLinkExtension.listenNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tfor(key in node.object) {\n\t\t\tif (key in {}) continue;\n\t\t\tnode.labelNode.setAttribute(key, node.object[key]);\n\t\t}","this":"dojo.widget.TreeLinkExtension"}}}}}},"dojo.widget.TreeLoadingController":{"meta":{"requires":{"common":["dojo.widget.TreeBasicController","dojo.event.*","dojo.json","dojo.io.*"]},"methods":{"dojo.widget.TreeLoadingController":{"_":{"meta":{"summary":"","src":"\tdojo.widget.TreeBasicController.call(this);","inherits":["dojo.widget.TreeBasicController"],"protovariables":{"widgetType":"","RPCUrl":"","RPCActionParam":""},"this_variables":["RPCUrl"]}}},"handle":{"_":{"meta":{"summary":"","parameters":{"type":{"type":""},"data":{"type":""},"evt":{"type":""}},"src":"\t\t\t\tdojo.lang.forEach(kw.lock,\n\t\t\t\t\tfunction(t) { t.unlock() }\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif(type == \"load\"){\n\t\t\t\tkw.load.call(this, data);\n\t\t\t}else{\n\t\t\t\tthis.RPCErrorHandler(type, data, evt);\n\t\t\t}","this_inherits":["kw.load"]}}},"dojo.widget.TreeLoadingController.RPCErrorHandler":{"_":{"meta":{"summary":"","parameters":{"type":{"type":""},"obj":{"type":""},"evt":{"type":""}},"src":"\t\talert( \"RPC Error: \" + (obj.message||\"no message\"));","this":"dojo.widget.TreeLoadingController"}}},"dojo.widget.TreeLoadingController.preventCache":{"_":{"meta":{"summary":"","parameters":{"kw":{"type":""}},"src":"\t\tvar _this = this;\n\n\t\tvar handle = function(type, data, evt) {\n\t\t\t\/\/ unlock BEFORE any processing is done\n\t\t\t\/\/ so errorHandler may apply locking\n\t\t\tif (kw.lock) {\n\t\t\t\tdojo.lang.forEach(kw.lock,\n\t\t\t\t\tfunction(t) { t.unlock() }\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif(type == \"load\"){\n\t\t\t\tkw.load.call(this, data);\n\t\t\t}else{\n\t\t\t\tthis.RPCErrorHandler(type, data, evt);\n\t\t\t}\n\n\t\t}\n\n\t\tif (kw.lock) {\n\t\t\tdojo.lang.forEach(kw.lock,\n\t\t\t\tfunction(t) { t.lock() }\n\t\t\t);\n\t\t}\n\n\n\t\tdojo.io.bind({\n\t\t\turl: kw.url,\n\t\t\t\/* I hitch to get this.loadOkHandler *\/\n\t\t\thandle: dojo.lang.hitch(this, handle),\n\t\t\tmimetype: \"text\/json\",\n\t\t\tpreventCache: _this.preventCache,\n\t\t\tsync: kw.sync,\n\t\t\tcontent: { data: dojo.json.serialize(kw.params) }\n\t\t});","this_inherits":["kw.load"],"this":"dojo.widget.TreeLoadingController"}}},"dojo.widget.TreeLoadingController.getRPCUrl":{"_":{"meta":{"summary":"","parameters":{"action":{"type":""}},"src":"\t\t\tvar dir = document.location.href.substr(0, document.location.href.lastIndexOf('\/'));\n\t\t\tvar localUrl = dir+\"\/\"+action;\n\t\t\t\/\/dojo.debug(localUrl);\n\t\t\treturn localUrl;\n\t\t}\n\n\t\tif (!this.RPCUrl) {\n\t\t\tdojo.raise(\"Empty RPCUrl: can't load\");\n\t\t}\n\n\t\treturn this.RPCUrl + ( this.RPCUrl.indexOf(\"?\") > -1 ? \"&\" : \"?\") + this.RPCActionParam+\"=\"+action;","this":"dojo.widget.TreeLoadingController"}}},"dojo.widget.TreeLoadingController.loadProcessResponse":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"result":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\tif (!dojo.lang.isUndefined(result.error)) {\n\t\t\tthis.RPCErrorHandler(\"server\", result.error);\n\t\t\treturn false;\n\t\t}\n\n\t\t\/\/dojo.debugShallow(result);\n\n\t\tvar newChildren = result;\n\n\t\tif (!dojo.lang.isArray(newChildren)) {\n\t\t\tdojo.raise('loadProcessResponse: Not array loaded: '+newChildren);\n\t\t}\n\n\t\tfor(var i=0; i<newChildren.length; i++) {\n\t\t\t\/\/ looks like dojo.widget.manager needs no special \"add\" command\n\t\t\tnewChildren[i] = dojo.widget.createWidget(node.widgetType, newChildren[i]);\n\t\t\tnode.addChild(newChildren[i]);\n\t\t}\n\n\n\t\t\/\/node.addAllChildren(newChildren);\n\n\t\tnode.state = node.loadStates.LOADED;\n\n\t\t\/\/dojo.debug(callFunc);\n\n\t\tif (dojo.lang.isFunction(callFunc)) {\n\t\t\tcallFunc.apply(dojo.lang.isUndefined(callObj) ? this : callObj, [node, newChildren]);\n\t\t}\n\t\t\/\/this.expand(node);","this":"dojo.widget.TreeLoadingController"}}},"dojo.widget.TreeLoadingController.getInfo":{"_":{"meta":{"summary":"","parameters":{"obj":{"type":""}},"src":"\t\treturn obj.getInfo();","this":"dojo.widget.TreeLoadingController"}}},"dojo.widget.TreeLoadingController.runRPC":{"_":{"meta":{"summary":"","parameters":{"kw":{"type":""}},"src":"\t\tvar _this = this;\n\n\t\tvar handle = function(type, data, evt) {\n\t\t\t\/\/ unlock BEFORE any processing is done\n\t\t\t\/\/ so errorHandler may apply locking\n\t\t\tif (kw.lock) {\n\t\t\t\tdojo.lang.forEach(kw.lock,\n\t\t\t\t\tfunction(t) { t.unlock() }\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif(type == \"load\"){\n\t\t\t\tkw.load.call(this, data);\n\t\t\t}else{\n\t\t\t\tthis.RPCErrorHandler(type, data, evt);\n\t\t\t}\n\n\t\t}\n\n\t\tif (kw.lock) {\n\t\t\tdojo.lang.forEach(kw.lock,\n\t\t\t\tfunction(t) { t.lock() }\n\t\t\t);\n\t\t}\n\n\n\t\tdojo.io.bind({\n\t\t\turl: kw.url,\n\t\t\t\/* I hitch to get this.loadOkHandler *\/\n\t\t\thandle: dojo.lang.hitch(this, handle),\n\t\t\tmimetype: \"text\/json\",\n\t\t\tpreventCache: _this.preventCache,\n\t\t\tsync: kw.sync,\n\t\t\tcontent: { data: dojo.json.serialize(kw.params) }\n\t\t});","this_inherits":["kw.load"],"this":"dojo.widget.TreeLoadingController"}}},"dojo.widget.TreeLoadingController.url":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\tvar _this = this;\n\n\t\tvar params = {\n\t\t\tnode: this.getInfo(node),\n\t\t\ttree: this.getInfo(node.tree)\n\t\t};\n\n\t\t\/\/dojo.debug(callFunc)\n\n\t\tthis.runRPC({\n\t\t\turl: this.getRPCUrl('getChildren'),\n\t\t\tload: function(result) {\n\t\t\t\t_this.loadProcessResponse(node, result, callObj, callFunc) ;\n\t\t\t},\n\t\t\tsync: sync,\n\t\t\tlock: [node],\n\t\t\tparams: params\n\t\t});","this":"dojo.widget.TreeLoadingController"}}},"dojo.widget.TreeLoadingController.handle":{"_":{"meta":{"summary":"","parameters":{"kw":{"type":""}},"src":"\t\tvar _this = this;\n\n\t\tvar handle = function(type, data, evt) {\n\t\t\t\/\/ unlock BEFORE any processing is done\n\t\t\t\/\/ so errorHandler may apply locking\n\t\t\tif (kw.lock) {\n\t\t\t\tdojo.lang.forEach(kw.lock,\n\t\t\t\t\tfunction(t) { t.unlock() }\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif(type == \"load\"){\n\t\t\t\tkw.load.call(this, data);\n\t\t\t}else{\n\t\t\t\tthis.RPCErrorHandler(type, data, evt);\n\t\t\t}\n\n\t\t}\n\n\t\tif (kw.lock) {\n\t\t\tdojo.lang.forEach(kw.lock,\n\t\t\t\tfunction(t) { t.lock() }\n\t\t\t);\n\t\t}\n\n\n\t\tdojo.io.bind({\n\t\t\turl: kw.url,\n\t\t\t\/* I hitch to get this.loadOkHandler *\/\n\t\t\thandle: dojo.lang.hitch(this, handle),\n\t\t\tmimetype: \"text\/json\",\n\t\t\tpreventCache: _this.preventCache,\n\t\t\tsync: kw.sync,\n\t\t\tcontent: { data: dojo.json.serialize(kw.params) }\n\t\t});","this_inherits":["kw.load"],"this":"dojo.widget.TreeLoadingController"}}},"dojo.widget.TreeLoadingController.mimetype":{"_":{"meta":{"summary":"","parameters":{"kw":{"type":""}},"src":"\t\tvar _this = this;\n\n\t\tvar handle = function(type, data, evt) {\n\t\t\t\/\/ unlock BEFORE any processing is done\n\t\t\t\/\/ so errorHandler may apply locking\n\t\t\tif (kw.lock) {\n\t\t\t\tdojo.lang.forEach(kw.lock,\n\t\t\t\t\tfunction(t) { t.unlock() }\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif(type == \"load\"){\n\t\t\t\tkw.load.call(this, data);\n\t\t\t}else{\n\t\t\t\tthis.RPCErrorHandler(type, data, evt);\n\t\t\t}\n\n\t\t}\n\n\t\tif (kw.lock) {\n\t\t\tdojo.lang.forEach(kw.lock,\n\t\t\t\tfunction(t) { t.lock() }\n\t\t\t);\n\t\t}\n\n\n\t\tdojo.io.bind({\n\t\t\turl: kw.url,\n\t\t\t\/* I hitch to get this.loadOkHandler *\/\n\t\t\thandle: dojo.lang.hitch(this, handle),\n\t\t\tmimetype: \"text\/json\",\n\t\t\tpreventCache: _this.preventCache,\n\t\t\tsync: kw.sync,\n\t\t\tcontent: { data: dojo.json.serialize(kw.params) }\n\t\t});","this_inherits":["kw.load"],"this":"dojo.widget.TreeLoadingController"}}},"dojo.widget.TreeLoadingController.sync":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\tvar _this = this;\n\n\t\tvar params = {\n\t\t\tnode: this.getInfo(node),\n\t\t\ttree: this.getInfo(node.tree)\n\t\t};\n\n\t\t\/\/dojo.debug(callFunc)\n\n\t\tthis.runRPC({\n\t\t\turl: this.getRPCUrl('getChildren'),\n\t\t\tload: function(result) {\n\t\t\t\t_this.loadProcessResponse(node, result, callObj, callFunc) ;\n\t\t\t},\n\t\t\tsync: sync,\n\t\t\tlock: [node],\n\t\t\tparams: params\n\t\t});","this":"dojo.widget.TreeLoadingController"}}},"dojo.widget.TreeLoadingController.content":{"_":{"meta":{"summary":"","parameters":{"kw":{"type":""}},"src":"\t\tvar _this = this;\n\n\t\tvar handle = function(type, data, evt) {\n\t\t\t\/\/ unlock BEFORE any processing is done\n\t\t\t\/\/ so errorHandler may apply locking\n\t\t\tif (kw.lock) {\n\t\t\t\tdojo.lang.forEach(kw.lock,\n\t\t\t\t\tfunction(t) { t.unlock() }\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif(type == \"load\"){\n\t\t\t\tkw.load.call(this, data);\n\t\t\t}else{\n\t\t\t\tthis.RPCErrorHandler(type, data, evt);\n\t\t\t}\n\n\t\t}\n\n\t\tif (kw.lock) {\n\t\t\tdojo.lang.forEach(kw.lock,\n\t\t\t\tfunction(t) { t.lock() }\n\t\t\t);\n\t\t}\n\n\n\t\tdojo.io.bind({\n\t\t\turl: kw.url,\n\t\t\t\/* I hitch to get this.loadOkHandler *\/\n\t\t\thandle: dojo.lang.hitch(this, handle),\n\t\t\tmimetype: \"text\/json\",\n\t\t\tpreventCache: _this.preventCache,\n\t\t\tsync: kw.sync,\n\t\t\tcontent: { data: dojo.json.serialize(kw.params) }\n\t\t});","this_inherits":["kw.load"],"this":"dojo.widget.TreeLoadingController"}}},"dojo.widget.TreeLoadingController.loadRemote":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\tvar _this = this;\n\n\t\tvar params = {\n\t\t\tnode: this.getInfo(node),\n\t\t\ttree: this.getInfo(node.tree)\n\t\t};\n\n\t\t\/\/dojo.debug(callFunc)\n\n\t\tthis.runRPC({\n\t\t\turl: this.getRPCUrl('getChildren'),\n\t\t\tload: function(result) {\n\t\t\t\t_this.loadProcessResponse(node, result, callObj, callFunc) ;\n\t\t\t},\n\t\t\tsync: sync,\n\t\t\tlock: [node],\n\t\t\tparams: params\n\t\t});","this":"dojo.widget.TreeLoadingController"}}},"dojo.widget.TreeLoadingController.node":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\tvar _this = this;\n\n\t\tvar params = {\n\t\t\tnode: this.getInfo(node),\n\t\t\ttree: this.getInfo(node.tree)\n\t\t};\n\n\t\t\/\/dojo.debug(callFunc)\n\n\t\tthis.runRPC({\n\t\t\turl: this.getRPCUrl('getChildren'),\n\t\t\tload: function(result) {\n\t\t\t\t_this.loadProcessResponse(node, result, callObj, callFunc) ;\n\t\t\t},\n\t\t\tsync: sync,\n\t\t\tlock: [node],\n\t\t\tparams: params\n\t\t});","this":"dojo.widget.TreeLoadingController"}}},"dojo.widget.TreeLoadingController.tree":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\tvar _this = this;\n\n\t\tvar params = {\n\t\t\tnode: this.getInfo(node),\n\t\t\ttree: this.getInfo(node.tree)\n\t\t};\n\n\t\t\/\/dojo.debug(callFunc)\n\n\t\tthis.runRPC({\n\t\t\turl: this.getRPCUrl('getChildren'),\n\t\t\tload: function(result) {\n\t\t\t\t_this.loadProcessResponse(node, result, callObj, callFunc) ;\n\t\t\t},\n\t\t\tsync: sync,\n\t\t\tlock: [node],\n\t\t\tparams: params\n\t\t});","this":"dojo.widget.TreeLoadingController"}}},"dojo.widget.TreeLoadingController.load":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\tvar _this = this;\n\n\t\tvar params = {\n\t\t\tnode: this.getInfo(node),\n\t\t\ttree: this.getInfo(node.tree)\n\t\t};\n\n\t\t\/\/dojo.debug(callFunc)\n\n\t\tthis.runRPC({\n\t\t\turl: this.getRPCUrl('getChildren'),\n\t\t\tload: function(result) {\n\t\t\t\t_this.loadProcessResponse(node, result, callObj, callFunc) ;\n\t\t\t},\n\t\t\tsync: sync,\n\t\t\tlock: [node],\n\t\t\tparams: params\n\t\t});","this":"dojo.widget.TreeLoadingController"}}},"dojo.widget.TreeLoadingController.lock":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\tvar _this = this;\n\n\t\tvar params = {\n\t\t\tnode: this.getInfo(node),\n\t\t\ttree: this.getInfo(node.tree)\n\t\t};\n\n\t\t\/\/dojo.debug(callFunc)\n\n\t\tthis.runRPC({\n\t\t\turl: this.getRPCUrl('getChildren'),\n\t\t\tload: function(result) {\n\t\t\t\t_this.loadProcessResponse(node, result, callObj, callFunc) ;\n\t\t\t},\n\t\t\tsync: sync,\n\t\t\tlock: [node],\n\t\t\tparams: params\n\t\t});","this":"dojo.widget.TreeLoadingController"}}},"dojo.widget.TreeLoadingController.params":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\tvar _this = this;\n\n\t\tvar params = {\n\t\t\tnode: this.getInfo(node),\n\t\t\ttree: this.getInfo(node.tree)\n\t\t};\n\n\t\t\/\/dojo.debug(callFunc)\n\n\t\tthis.runRPC({\n\t\t\turl: this.getRPCUrl('getChildren'),\n\t\t\tload: function(result) {\n\t\t\t\t_this.loadProcessResponse(node, result, callObj, callFunc) ;\n\t\t\t},\n\t\t\tsync: sync,\n\t\t\tlock: [node],\n\t\t\tparams: params\n\t\t});","this":"dojo.widget.TreeLoadingController"}}},"dojo.widget.TreeLoadingController.expand":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\tif (node.state == node.loadStates.UNCHECKED && node.isFolder) {\n\n\t\t\tthis.loadRemote(node, sync,\n\t\t\t\tthis,\n\t\t\t\tfunction(node, newChildren) {\n\t\t\t\t\tthis.expand(node, sync, callObj, callFunc);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\treturn;\n\t\t}\n\n\t\tdojo.widget.TreeBasicController.prototype.expand.apply(this, arguments);","this":"dojo.widget.TreeLoadingController"}}},"dojo.widget.TreeLoadingController.doMove":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""}},"src":"\t\t\tthis.loadRemote(newParent, true);\n\t\t}\n\n\t\treturn dojo.widget.TreeBasicController.prototype.doMove.apply(this, arguments);","this":"dojo.widget.TreeLoadingController"}}},"dojo.widget.TreeLoadingController.doCreateChild":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"data":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\t\tthis.loadRemote(parent, true);\n\t\t}\n\n\t\treturn dojo.widget.TreeBasicController.prototype.doCreateChild.apply(this, arguments);","this":"dojo.widget.TreeLoadingController"}}}}}},"dojo.widget.TreeLoadingControllerV3":{"meta":{"requires":{"common":["dojo.widget.TreeBasicControllerV3","dojo.event.*","dojo.json","dojo.io.*","dojo.Deferred","dojo.DeferredList"]},"methods":{"dojo.Error":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""},"extra":{"type":""}},"src":"\tthis.message = message;\n\tthis.extra = extra;\n\tthis.stack = (new Error()).stack;\t","this_variables":["message","extra","stack"]}}},"dojo.CommunicationError":{"_":{"meta":{"summary":"","src":"\tdojo.Error.apply(this, arguments);\n\tthis.name=\"CommunicationError\"","this_variables":["name"],"inherits":["dojo.Error"]}}},"dojo.LockedError":{"_":{"meta":{"summary":"","src":"\tdojo.Error.apply(this, arguments);\n\tthis.name=\"LockedError\"","this_variables":["name"],"inherits":["dojo.Error"]}}},"dojo.FormatError":{"_":{"meta":{"summary":"","src":"\tdojo.Error.apply(this, arguments);\n\tthis.name=\"FormatError\"","this_variables":["name"],"inherits":["dojo.Error"]}}},"dojo.RpcError":{"_":{"meta":{"summary":"","src":"\tdojo.Error.apply(this, arguments);\n\tthis.name=\"RpcError\"","this_variables":["name"],"inherits":["dojo.Error"]}}},"dojo.widget.TreeLoadingControllerV3":{"_":{"meta":{"summary":"","src":"\tdojo.widget.TreeBasicControllerV3.call(this);","inherits":["dojo.widget.TreeBasicControllerV3"],"protovariables":{"widgetType":"","RpcUrl":"","RpcActionParam":"","batchExpandTimeout":""},"this_variables":["RpcUrl"]}}},"recurseOnExpand":{"_":{"meta":{"summary":"","src":"\t\t\tvar children = widget.children;\n\t\t\tvar deferreds = [];\t\t\n\t\t\tfor(var i=0; i<children.length; i++) {\n\t\t\t\t\/\/dojo.debug(\"push recursive call for \"+node.children[i]+\" level \"+level);\n\t\t\t\tdeferreds.push(_this.recurseToLevel(children[i], level-1, callFunc, callObj, sync));\n\t\t\t}\n\t\t\treturn new dojo.DeferredList(deferreds);"}}},"dojo.widget.TreeLoadingControllerV3.preventCache":{"_":{"meta":{"summary":"","parameters":{"kw":{"type":""}},"src":"\t\tvar _this = this;\n\t\t\n\t\tvar deferred = new dojo.Deferred();\n\t\t\n\t\tdojo.io.bind({\n\t\t\turl: kw.url,\t\t\t\n\t\t\thandle: this.getDeferredBindHandler(deferred),\n\t\t\tmimetype: \"text\/javascript\",\n\t\t\tpreventCache: this.preventCache,\n\t\t\tsync: kw.sync,\n\t\t\tcontent: { data: dojo.json.serialize(kw.params) }\n\t\t});\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.checkValidRpcResponse":{"_":{"meta":{"summary":"","parameters":{"type":{"type":""},"obj":{"type":""}},"src":"\t\tif (type != \"load\") {\n\t\t\tvar extra = {}\t\t\t\t\n\t\t\tfor(var i=1; i<arguments.length;i++) {\n\t\t\t\tdojo.lang.mixin(extra, arguments[i]);\t\t\t\t\t\n\t\t\t}\n\t\t\treturn new dojo.CommunicationError(obj, extra);\t\t\t\t\n\t\t}\n\t\t\n\t\tif (typeof obj != 'object') {\n\t\t\treturn new dojo.FormatError(\"Wrong server answer format \"+(obj && obj.toSource ? obj.toSource() : obj)+\" type \"+(typeof obj), obj);\n\t\t}\n\t\t\n\t\t\/\/dojo.debugShallow(obj);\n\t\t\t\n\t\tif (!dojo.lang.isUndefined(obj.error)) {\n\t\t\treturn new dojo.RpcError(obj.error, obj);\n\t\t}\n\t\t\n\t\treturn false;","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.getDeferredBindHandler":{"_":{"meta":{"summary":" create callback that calls the Deferred's callback method","parameters":{"deferred":{"type":"dojo.rpc.Deferred"}},"src":"\t\t\tfunction(type, obj){\t\t\t\t\n\t\t\t\t\/\/dojo.debug(\"getDeferredBindHandler \"+obj.toSource());\n\t\t\t\t\t\t\t\t\n\t\t\t\tvar error = this.checkValidRpcResponse.apply(this, arguments);\n\t\t\t\t\n\t\t\t\tif (error) {\n\t\t\t\t\tdeferred.errback(error);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tdeferred.callback(obj);\t\t\t\t\t\t\t\t\n\t\t\t}\n\t\t);","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.getRpcUrl":{"_":{"meta":{"summary":"","parameters":{"action":{"type":""}},"src":"\t\t\tvar dir = document.location.href.substr(0, document.location.href.lastIndexOf('\/'));\n\t\t\tvar localUrl = dir+\"\/local\/\"+action;\n\t\t\t\/\/dojo.debug(localUrl);\n\t\t\treturn localUrl;\t\n\t\t}\n\n\t\tif (!this.RpcUrl) {\n\t\t\tdojo.raise(\"Empty RpcUrl: can't load\");\n\t\t}\n\t\t\n\t\tvar url = this.RpcUrl;\n\t\t\n\t\tif (url.indexOf(\"\/\") != 0) { \/\/ not absolute\n\t\t\tvar protocol = document.location.href.replace(\/:\\\/\\\/.*\/,'');\n\t\t\tvar prefix = document.location.href.substring(protocol.length+3);\n\t\t\t\n\t\t\tif (prefix.lastIndexOf(\"\/\") != prefix.length-1) {\n\t\t\t\tprefix = prefix.replace(\/\\\/[^\\\/]+$\/,'\/'); \/\/ strip file name\n\t\t\t}\n\t\t\tif (prefix.lastIndexOf(\"\/\") != prefix.length-1) {\n\t\t\t\tprefix = prefix+'\/'; \/\/ add \/ if not exists it all\n\t\t\t}\n\t\t\t\/\/dojo.debug(url);\n\t\t\turl = protocol + ':\/\/' + prefix + url;\n\t\t}\n\t\t\t\n\n\t\treturn url + (url.indexOf(\"?\")>-1 ? \"&\" : \"?\") + this.RpcActionParam+\"=\"+action;","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.loadProcessResponse":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"result":{"type":""}},"src":"\t\t\tthrow new dojo.FormatError('loadProcessResponse: Not array loaded: '+result);\n\t\t}\n\n\t\tnode.setChildren(result);","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.runRpc":{"_":{"meta":{"summary":"","parameters":{"kw":{"type":""}},"src":"\t\tvar _this = this;\n\t\t\n\t\tvar deferred = new dojo.Deferred();\n\t\t\n\t\tdojo.io.bind({\n\t\t\turl: kw.url,\t\t\t\n\t\t\thandle: this.getDeferredBindHandler(deferred),\n\t\t\tmimetype: \"text\/javascript\",\n\t\t\tpreventCache: this.preventCache,\n\t\t\tsync: kw.sync,\n\t\t\tcontent: { data: dojo.json.serialize(kw.params) }\n\t\t});\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.url":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""}},"src":"\t\tvar _this = this;\n\n\t\tvar params = {\n\t\t\tnode: this.getInfo(node),\n\t\t\ttree: this.getInfo(node.tree)\n\t\t};\n\n\t\t\n\t\tvar deferred = this.runRpc({\n\t\t\turl: this.getRpcUrl('getChildren'),\n\t\t\tsync: sync,\n\t\t\tparams: params\n\t\t});\n\t\t\n\t\tdeferred.addCallback(function(res) { return _this.loadProcessResponse(node,res) });\n\t\t\n\t\t\t\t\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.handle":{"_":{"meta":{"summary":"","parameters":{"kw":{"type":""}},"src":"\t\tvar _this = this;\n\t\t\n\t\tvar deferred = new dojo.Deferred();\n\t\t\n\t\tdojo.io.bind({\n\t\t\turl: kw.url,\t\t\t\n\t\t\thandle: this.getDeferredBindHandler(deferred),\n\t\t\tmimetype: \"text\/javascript\",\n\t\t\tpreventCache: this.preventCache,\n\t\t\tsync: kw.sync,\n\t\t\tcontent: { data: dojo.json.serialize(kw.params) }\n\t\t});\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.mimetype":{"_":{"meta":{"summary":"","parameters":{"kw":{"type":""}},"src":"\t\tvar _this = this;\n\t\t\n\t\tvar deferred = new dojo.Deferred();\n\t\t\n\t\tdojo.io.bind({\n\t\t\turl: kw.url,\t\t\t\n\t\t\thandle: this.getDeferredBindHandler(deferred),\n\t\t\tmimetype: \"text\/javascript\",\n\t\t\tpreventCache: this.preventCache,\n\t\t\tsync: kw.sync,\n\t\t\tcontent: { data: dojo.json.serialize(kw.params) }\n\t\t});\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.sync":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""}},"src":"\t\tvar _this = this;\n\n\t\tvar params = {\n\t\t\tnode: this.getInfo(node),\n\t\t\ttree: this.getInfo(node.tree)\n\t\t};\n\n\t\t\n\t\tvar deferred = this.runRpc({\n\t\t\turl: this.getRpcUrl('getChildren'),\n\t\t\tsync: sync,\n\t\t\tparams: params\n\t\t});\n\t\t\n\t\tdeferred.addCallback(function(res) { return _this.loadProcessResponse(node,res) });\n\t\t\n\t\t\t\t\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.content":{"_":{"meta":{"summary":"","parameters":{"kw":{"type":""}},"src":"\t\tvar _this = this;\n\t\t\n\t\tvar deferred = new dojo.Deferred();\n\t\t\n\t\tdojo.io.bind({\n\t\t\turl: kw.url,\t\t\t\n\t\t\thandle: this.getDeferredBindHandler(deferred),\n\t\t\tmimetype: \"text\/javascript\",\n\t\t\tpreventCache: this.preventCache,\n\t\t\tsync: kw.sync,\n\t\t\tcontent: { data: dojo.json.serialize(kw.params) }\n\t\t});\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.loadRemote":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""}},"src":"\t\tvar _this = this;\n\n\t\tvar params = {\n\t\t\tnode: this.getInfo(node),\n\t\t\ttree: this.getInfo(node.tree)\n\t\t};\n\n\t\t\n\t\tvar deferred = this.runRpc({\n\t\t\turl: this.getRpcUrl('getChildren'),\n\t\t\tsync: sync,\n\t\t\tparams: params\n\t\t});\n\t\t\n\t\tdeferred.addCallback(function(res) { return _this.loadProcessResponse(node,res) });\n\t\t\n\t\t\t\t\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.node":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""}},"src":"\t\tvar _this = this;\n\n\t\tvar params = {\n\t\t\tnode: this.getInfo(node),\n\t\t\ttree: this.getInfo(node.tree)\n\t\t};\n\n\t\t\n\t\tvar deferred = this.runRpc({\n\t\t\turl: this.getRpcUrl('getChildren'),\n\t\t\tsync: sync,\n\t\t\tparams: params\n\t\t});\n\t\t\n\t\tdeferred.addCallback(function(res) { return _this.loadProcessResponse(node,res) });\n\t\t\n\t\t\t\t\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.tree":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""}},"src":"\t\tvar _this = this;\n\n\t\tvar params = {\n\t\t\tnode: this.getInfo(node),\n\t\t\ttree: this.getInfo(node.tree)\n\t\t};\n\n\t\t\n\t\tvar deferred = this.runRpc({\n\t\t\turl: this.getRpcUrl('getChildren'),\n\t\t\tsync: sync,\n\t\t\tparams: params\n\t\t});\n\t\t\n\t\tdeferred.addCallback(function(res) { return _this.loadProcessResponse(node,res) });\n\t\t\n\t\t\t\t\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.params":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""}},"src":"\t\tvar _this = this;\n\n\t\tvar params = {\n\t\t\tnode: this.getInfo(node),\n\t\t\ttree: this.getInfo(node.tree)\n\t\t};\n\n\t\t\n\t\tvar deferred = this.runRpc({\n\t\t\turl: this.getRpcUrl('getChildren'),\n\t\t\tsync: sync,\n\t\t\tparams: params\n\t\t});\n\t\t\n\t\tdeferred.addCallback(function(res) { return _this.loadProcessResponse(node,res) });\n\t\t\n\t\t\t\t\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.recurseToLevel":{"_":{"meta":{"summary":"","parameters":{"widget":{"type":""},"level":{"type":""},"callFunc":{"type":""},"callObj":{"type":""},"skipFirst":{"type":""},"sync":{"type":""}},"src":"\t\tif (level == 0) return;\n\n\n\t\t\n\t\tif (!skipFirst) {\n\t\t\tvar deferred = callFunc.call(callObj, widget, sync);\n\t\t} else {\n\t\t\tvar deferred = dojo.Deferred.prototype.makeCalled();\n\t\t}\n\t\t\n\t\t\/\/dojo.debug(\"expand deferred saved \"+node+\" sync \"+sync);\n\t\t\n\t\t\n\t\tvar _this = this;\n\t\t\n\t\tvar recurseOnExpand = function() {\n\t\t\tvar children = widget.children;\n\t\t\tvar deferreds = [];\t\t\n\t\t\tfor(var i=0; i<children.length; i++) {\n\t\t\t\t\/\/dojo.debug(\"push recursive call for \"+node.children[i]+\" level \"+level);\n\t\t\t\tdeferreds.push(_this.recurseToLevel(children[i], level-1, callFunc, callObj, sync));\n\t\t\t}\n\t\t\treturn new dojo.DeferredList(deferreds);\n\t\t}\n\t\t\n\t\tdeferred.addCallback(recurseOnExpand);\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.expandToLevel":{"_":{"meta":{"summary":"","parameters":{"nodeOrTree":{"type":""},"level":{"type":""},"sync":{"type":""}},"src":"\t\treturn this.recurseToLevel(nodeOrTree, nodeOrTree.isTree ? level+1 : level, this.expand, this, nodeOrTree.isTree, sync);","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.loadToLevel":{"_":{"meta":{"summary":"","parameters":{"nodeOrTree":{"type":""},"level":{"type":""},"sync":{"type":""}},"src":"\t\treturn this.recurseToLevel(nodeOrTree, nodeOrTree.isTree ? level+1 : level, this.loadIfNeeded, this, nodeOrTree.isTree, sync);","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.loadAll":{"_":{"meta":{"summary":"","parameters":{"nodeOrTree":{"type":""},"sync":{"type":""}},"src":"\t\treturn this.loadToLevel(nodeOrTree, Number.POSITIVE_INFINITY, sync);","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.expand":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""}},"src":"\t\tvar deferred = this.startProcessing(node);\n\t\t\n\t\tdeferred.addCallback(function() {\n\t\t\treturn _this.loadIfNeeded(node, sync);\n\t\t});\n\t\t\t\t\n\t\tdeferred.addCallback(function(res) {\n\t\t\t\/\/dojo.debug(\"Activated callback dojo.widget.TreeBasicControllerV3.prototype.expand(node); \"+res);\n\t\t\tdojo.widget.TreeBasicControllerV3.prototype.expand(node);\n\t\t\treturn res;\n\t\t});\n\t\t\n\t\tdeferred.addBoth(function(res) {\n\t\t\t_this.finishProcessing(node);\n\t\t\treturn res;\n\t\t});\n\t\t\n\t\t\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.loadIfNeeded":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""}},"src":"\t\tif (node.state == node.loadStates.UNCHECKED && node.isFolder && !node.children.length) {\n\t\t\t\/\/ populate deferred with other things to pre-do\n\t\t\tdeferred = this.loadRemote(node, sync);\t\t\t\n\t\t} else {\n\t\t\t\/* \"fake action\" here *\/\n\t\t\tdeferred = new dojo.Deferred();\n\t\t\tdeferred.callback();\n\t\t}\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.runStages":{"_":{"meta":{"summary":"","parameters":{"check":{"type":""},"prepare":{"type":""},"make":{"type":""},"finalize":{"type":""},"expose":{"type":""},"args":{"type":""}},"src":"\t\tvar _this = this;\n\t\t\n\t\tif (check && !check.apply(this, args)) {\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tvar deferred = dojo.Deferred.prototype.makeCalled();\n\t\t\n\t\t\n\t\tif (prepare) {\n\t\t\tdeferred.addCallback(function() {\n\t\t\t\treturn prepare.apply(_this, args);\n\t\t\t});\n\t\t}\n\t\t\n\t\t\n\t\t\/\/deferred.addCallback(function(res) { dojo.debug(\"Prepare fired \"+res); return res});\n\t\t\n\t\tvar _this = this;\n\t\tdeferred.addCallback(function() {\t\t\t\n\t\t\tvar res = make.apply(_this, args);\n\t\t\t\/\/res.addBoth(function(r) {dojo.debugShallow(r); return r;});\n\t\t\treturn res;\n\t\t});\n\t\t\n\t\t\/\/deferred.addCallback(function(res) { dojo.debug(\"Main fired \"+res); return res});\n\t\t\n\t\tif (finalize) {\n\t\t\tdeferred.addBoth(function(res) {\n\t\t\t\tfinalize.apply(_this, args);\n\t\t\t\treturn res;\n\t\t\t});\n\t\t}\n\t\t\t\n\t\t\t\t\n\t\t\/\/ exposer does not affect result\n\t\tif (expose) {\n\t\t\tdeferred.addCallback(function(res) {\n\t\t\t\texpose.apply(_this, args);\n\t\t\t\treturn res;\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.startProcessing":{"_":{"meta":{"summary":"","parameters":{"nodesArray":{"type":""}},"src":"\t\tvar deferred = new dojo.Deferred();\n\t\t\n\t\t\n\t\tvar nodes = dojo.lang.isArray(nodesArray) ? nodesArray : arguments;\n\t\t\n\t\t\/*\n\t\tfor(var i=0;i<nodes.length;i++) {\n\t\t\tdojo.debug(nodes[i]);\n\t\t}*\/\n\t\t\n\t\tfor(var i=0;i<nodes.length;i++) {\n\t\t\tif (nodes[i].isLocked()) {\n\t\t\t\tdeferred.errback(new dojo.LockedError(\"item locked \"+nodes[i], nodes[i]));\n\t\t\t\t\/\/dojo.debug(\"startProcessing errback \"+arguments[i]);\n\t\t\t\treturn deferred;\n\t\t\t}\n\t\t\tif (nodes[i].isTreeNode) {\n\t\t\t\t\/\/dojo.debug(\"mark \"+nodes[i]);\n\t\t\t\tnodes[i].markProcessing();\n\t\t\t}\n\t\t\tnodes[i].lock();\n\t\t}\n\t\t\t\t\n\t\t\/\/dojo.debug(\"startProcessing callback\");\n\t\t\t\t\n\t\tdeferred.callback();\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.finishProcessing":{"_":{"meta":{"summary":"","parameters":{"nodesArray":{"type":""}},"src":"\t\tvar nodes = dojo.lang.isArray(nodesArray) ? nodesArray : arguments;\n\t\t\n\t\tfor(var i=0;i<nodes.length;i++) {\n\t\t\tif (!nodes[i].hasLock()) {\n\t\t\t\t\/\/ is not processed. probably we locked it and then met bad node in startProcessing\n\t\t\t\tcontinue; \n\t\t\t}\n\t\t\t\/\/dojo.debug(\"has lock\");\t\n\t\t\tnodes[i].unlock();\n\t\t\tif (nodes[i].isTreeNode) {\n\t\t\t\tnodes[i].unmarkProcessing();\n\t\t\t}\n\t\t}","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.refresh":{"_":{"meta":{"summary":"","parameters":{"nodeOrTree":{"type":""},"sync":{"type":""}},"src":"\t\tdojo.lang.forEach(nodeOrTree.children, function(child) {\n\t\t\tif (child instanceof dojo.widget.Widget) {\n\t\t\t\tchild.destroy();\n\t\t\t}\n\t\t});\n\t\t\n\t\tnodeOrTree.state == nodeOrTree.loadStates.UNCHECKED;\n\t\t\n\t\t\n\t\treturn this.loadRemote(nodeOrTree, sync);","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.prepareMove":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""},"sync":{"type":""}},"src":"\t\tvar deferred = this.startProcessing(newParent);\n\t\tdeferred.addCallback(dojo.lang.hitch(this, function() {\n\t\t\treturn this.loadIfNeeded(newParent, sync);\n\t\t}));\n\t\treturn deferred;","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.finalizeMove":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""}},"src":"\t\tthis.finishProcessing(newParent);","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.prepareCreateChild":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"data":{"type":""},"sync":{"type":""}},"src":"\t\tvar deferred = this.startProcessing(parent);\n\t\t\n\t\tdeferred.addCallback(dojo.lang.hitch(this, function() {\n\t\t\treturn this.loadIfNeeded(parent, sync);\n\t\t}));\n\t\treturn deferred;","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.finalizeCreateChild":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""}},"src":"\t\tthis.finishProcessing(parent);","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.prepareClone":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""},"deep":{"type":""},"sync":{"type":""}},"src":"\t\tvar deferred = this.startProcessing(child, newParent);\n\t\tdeferred.addCallback(dojo.lang.hitch(this, function() {\n\t\t\treturn this.loadIfNeeded(newParent, sync);\n\t\t}));\t\t\n\t\treturn deferred;\t","this":"dojo.widget.TreeLoadingControllerV3"}}},"dojo.widget.TreeLoadingControllerV3.finalizeClone":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""}},"src":"\t\tthis.finishProcessing(child, newParent);","this":"dojo.widget.TreeLoadingControllerV3"}}}}}},"dojo.widget.TreeNode":{"meta":{"requires":{"common":["dojo.html.*","dojo.event.*","dojo.io.*"]},"methods":{"dojo.widget.TreeNode":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\n\tthis.actionsDisabled = [];","this_variables":["actionsDisabled","state","expandLevel","_markLoadingSavedIcon","expandIcon.src","expandIcon.src","_markLoadingSavedIcon","expandIcon.src","isFolder","tree","depth","imgs","expandIcon","childIcon","state","domNodeInitialized","isExpanded","expandIcon.src","childIcon.src","childIcon.style.display","isExpanded","isExpanded","titleNode.innerHTML","afterLabelNode.innerHTML"],"inherits":["dojo.widget.HtmlWidget"],"protovariables":{"widgetType":"","loadStates":"","actions":"","isContainer":"","lockLevel":"","templateString":"","childIconSrc":"","childIconFolderSrc":"","childIconDocumentSrc":"","childIcon":"","isTreeNode":"","afterLabel":"","afterLabelNode":"","expandIcon":"","title":"","object":"","labelNode":"","titleNode":"","imgs":"","expandLevel":"","tree":"","depth":"","isExpanded":"","state":"","domNodeInitialized":""}}}},"dojo.widget.TreeNode.objectId":{"_":{"meta":{"summary":"","src":"\t\t\twidgetId: this.widgetId,\n\t\t\tobjectId: this.objectId,\n\t\t\tindex: this.getParentIndex(),\n\t\t\tisFolder: this.isFolder\n\t\t}\n\n\t\treturn info;","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.isFolder":{"_":{"meta":{"summary":"","src":"\t\t\twidgetId: this.widgetId,\n\t\t\tobjectId: this.objectId,\n\t\t\tindex: this.getParentIndex(),\n\t\t\tisFolder: this.isFolder\n\t\t}\n\n\t\treturn info;","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.isFirstNode":{"_":{"meta":{"summary":"","src":"\t\treturn this.getParentIndex() == 0 ? true: false;","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.true":{"_":{"meta":{"summary":"","src":"\t\treturn this.getParentIndex() == 0 ? true: false;","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.isLastNode":{"_":{"meta":{"summary":"","src":"\t\treturn this.getParentIndex() == this.parent.children.length-1 ? true : false;","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.lock":{"_":{"meta":{"summary":"","src":"                   return this.tree.lock.apply(this, arguments)    ","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.unlock":{"_":{"meta":{"summary":"","src":"                     return this.tree.unlock.apply(this, arguments)    ","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.isLocked":{"_":{"meta":{"summary":"","src":"                       return this.tree.isLocked.apply(this, arguments)    ","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.cleanLock":{"_":{"meta":{"summary":"","src":"                        return this.tree.cleanLock.apply(this, arguments)    ","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.actionIsDisabled":{"_":{"meta":{"summary":"","parameters":{"action":{"type":""}},"src":"\t\tvar _this = this;\n\n\t\tvar disabled = false;\n\n\t\tif (this.tree.strictFolders && action == this.actions.ADDCHILD && !this.isFolder) {\n\t\t\tdisabled = true;\n\t\t}\n\n\t\tif (dojo.lang.inArray(_this.actionsDisabled, action)) {\n\t\t\tdisabled = true;\n\t\t}\n\n\t\tif (this.isLocked()) {\n\t\t\tdisabled = true;\n\t\t}\n\n\t\treturn disabled;","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.getInfo":{"_":{"meta":{"summary":"","src":"\t\t\twidgetId: this.widgetId,\n\t\t\tobjectId: this.objectId,\n\t\t\tindex: this.getParentIndex(),\n\t\t\tisFolder: this.isFolder\n\t\t}\n\n\t\treturn info;","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.widgetId":{"_":{"meta":{"summary":"","src":"\t\t\twidgetId: this.widgetId,\n\t\t\tobjectId: this.objectId,\n\t\t\tindex: this.getParentIndex(),\n\t\t\tisFolder: this.isFolder\n\t\t}\n\n\t\treturn info;","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.index":{"_":{"meta":{"summary":"","src":"\t\t\twidgetId: this.widgetId,\n\t\t\tobjectId: this.objectId,\n\t\t\tindex: this.getParentIndex(),\n\t\t\tisFolder: this.isFolder\n\t\t}\n\n\t\treturn info;","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.initialize":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tfor(var i=0; i<this.actionsDisabled.length; i++) {\n\t\t\tthis.actionsDisabled[i] = this.actionsDisabled[i].toUpperCase();\n\t\t}\n\n\t\tthis.expandLevel = parseInt(this.expandLevel);","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.adjustDepth":{"_":{"meta":{"summary":"","parameters":{"depthDiff":{"type":""}},"src":"\t\tfor(var i=0; i<this.children.length; i++) {\n\t\t\tthis.children[i].adjustDepth(depthDiff);\n\t\t}\n\n\t\tthis.depth += depthDiff;\n\n\t\tif (depthDiff>0) {\n\t\t\tfor(var i=0; i<depthDiff; i++) {\n\t\t\t\tvar img = this.tree.makeBlankImg();\n\t\t\t\tthis.imgs.unshift(img);\n\t\t\t\t\/\/dojo.debugShallow(this.domNode);\n\t\t\t\tdojo.html.insertBefore(this.imgs[0], this.domNode.firstChild);\n\n\t\t\t}\n\t\t}\n\t\tif (depthDiff<0) {\n\t\t\tfor(var i=0; i<-depthDiff;i++) {\n\t\t\t\tthis.imgs.shift();\n\t\t\t\tdojo.html.removeNode(this.domNode.firstChild);\n\t\t\t}\n\t\t}","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.markLoading":{"_":{"meta":{"summary":"","src":"\t\tthis._markLoadingSavedIcon = this.expandIcon.src;\n\t\tthis.expandIcon.src = this.tree.expandIconSrcLoading;","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.unMarkLoading":{"_":{"meta":{"summary":"","src":"\t\tif (!this._markLoadingSavedIcon) return;\n\n\t\tvar im = new Image();\n\t\tim.src = this.tree.expandIconSrcLoading;\n\n\t\t\/\/dojo.debug(\"Unmark \"+this.expandIcon.src+\" : \"+im.src);\n\t\tif (this.expandIcon.src == im.src) {\n\t\t\tthis.expandIcon.src = this._markLoadingSavedIcon;\n\t\t}\n\t\tthis._markLoadingSavedIcon = null;","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.setFolder":{"_":{"meta":{"summary":"","src":"\t\tdojo.event.connect(this.expandIcon, 'onclick', this, 'onTreeClick');\n\t\tthis.expandIcon.src = this.isExpanded ? this.tree.expandIconSrcMinus : this.tree.expandIconSrcPlus;\n\t\tthis.isFolder = true;","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.createDOMNode":{"_":{"meta":{"summary":"","parameters":{"tree":{"type":""},"depth":{"type":""}},"src":"\t\tthis.tree = tree;\n\t\tthis.depth = depth;\n\n\n\t\t\/\/\n\t\t\/\/ add the tree icons\n\t\t\/\/\n\n\t\tthis.imgs = [];\n\n\t\tfor(var i=0; i<this.depth+1; i++){\n\n\t\t\tvar img = this.tree.makeBlankImg();\n\n\t\t\tthis.domNode.insertBefore(img, this.labelNode);\n\n\t\t\tthis.imgs.push(img);\n\t\t}\n\n\n\t\tthis.expandIcon = this.imgs[this.imgs.length-1];\n\n\n\t\tthis.childIcon = this.tree.makeBlankImg();\n\n\t\t\/\/ add to images before the title\n\t\tthis.imgs.push(this.childIcon);\n\n\t\tdojo.html.insertBefore(this.childIcon, this.titleNode);\n\n\t\t\/\/ node with children(from source html) becomes folder on build stage.\n\t\tif (this.children.length || this.isFolder) {\n\t\t\tthis.setFolder();\n\t\t}\n\t\telse {\n\t\t\t\/\/ leaves are always loaded\n\t\t\t\/\/dojo.debug(\"Set \"+this+\" state to loaded\");\n\t\t\tthis.state = this.loadStates.LOADED;\n\t\t}\n\n\t\tdojo.event.connect(this.childIcon, 'onclick', this, 'onIconClick');\n\n\n\t\t\/\/\n\t\t\/\/ create the child rows\n\t\t\/\/\n\n\n\t\tfor(var i=0; i<this.children.length; i++){\n\t\t\tthis.children[i].parent = this;\n\n\t\t\tvar node = this.children[i].createDOMNode(this.tree, this.depth+1);\n\n\t\t\tthis.containerNode.appendChild(node);\n\t\t}\n\n\n\t\tif (this.children.length) {\n\t\t\tthis.state = this.loadStates.LOADED;\n\t\t}\n\n\t\tthis.updateIcons();\n\n\t\tthis.domNodeInitialized = true;\n\n\t\tdojo.event.topic.publish(this.tree.eventNames.createDOMNode, { source: this } );\n\n\t\treturn this.domNode;","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.source":{"_":{"meta":{"summary":"","src":"\t\tif (!this.isExpanded) return;\n\n\t\tthis.hideChildren();\n\t\tthis.isExpanded = false;\n\n\t\tthis.updateExpandIcon();\n\n\t\tdojo.event.topic.publish(this.tree.eventNames.collapse, {source: this} );","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.onTreeClick":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tdojo.event.topic.publish(this.tree.eventNames.treeClick, { source: this, event: e });","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.onIconClick":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tdojo.event.topic.publish(this.tree.eventNames.iconClick, { source: this, event: e });","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.onTitleClick":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tdojo.event.topic.publish(this.tree.eventNames.titleClick, { source: this, event: e });","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.markSelected":{"_":{"meta":{"summary":"","src":"\t\tdojo.html.addClass(this.titleNode, 'dojoTreeNodeLabelSelected');","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.unMarkSelected":{"_":{"meta":{"summary":"","src":"","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.updateExpandIcon":{"_":{"meta":{"summary":"","src":"\t\tif (this.isFolder){\n\t\t\tthis.expandIcon.src = this.isExpanded ? this.tree.expandIconSrcMinus : this.tree.expandIconSrcPlus;\n\t\t} else {\n\t\t\tthis.expandIcon.src = this.tree.blankIconSrc;\n\t\t}","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.updateExpandGrid":{"_":{"meta":{"summary":"","src":"\t\tif (this.tree.showGrid){\n\t\t\tif (this.depth){\n\t\t\t\tthis.setGridImage(-2, this.isLastNode() ? this.tree.gridIconSrcL : this.tree.gridIconSrcT);\n\t\t\t}else{\n\t\t\t\tif (this.isFirstNode()){\n\t\t\t\t\tthis.setGridImage(-2, this.isLastNode() ? this.tree.gridIconSrcX : this.tree.gridIconSrcY);\n\t\t\t\t}else{\n\t\t\t\t\tthis.setGridImage(-2, this.isLastNode() ? this.tree.gridIconSrcL : this.tree.gridIconSrcT);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tthis.setGridImage(-2, this.tree.blankIconSrc);\n\t\t}","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.updateChildGrid":{"_":{"meta":{"summary":"","src":"\t\tif ((this.depth || this.tree.showRootGrid) && this.tree.showGrid){\n\t\t\tthis.setGridImage(-1, (this.children.length && this.isExpanded) ? this.tree.gridIconSrcP : this.tree.gridIconSrcC);\n\t\t}else{\n\t\t\tif (this.tree.showGrid && !this.tree.showRootGrid){\n\t\t\t\tthis.setGridImage(-1, (this.children.length && this.isExpanded) ? this.tree.gridIconSrcZ : this.tree.blankIconSrc);\n\t\t\t}else{\n\t\t\t\tthis.setGridImage(-1, this.tree.blankIconSrc);\n\t\t\t}\n\t\t}","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.updateParentGrid":{"_":{"meta":{"summary":"","src":"\t\tvar parent = this.parent;\n\n\t\t\/\/dojo.debug(\"updateParentGrid \"+this);\n\n\t\tfor(var i=0; i<this.depth; i++){\n\n\t\t\t\/\/dojo.debug(\"Parent \"+parent);\n\n\t\t\tvar idx = this.imgs.length-(3+i);\n\t\t\tvar img = (this.tree.showGrid && !parent.isLastNode()) ? this.tree.gridIconSrcV : this.tree.blankIconSrc;\n\n\t\t\t\/\/dojo.debug(\"Image \"+img+\" for \"+idx);\n\n\t\t\tthis.setGridImage(idx, img);\n\n\t\t\tparent = parent.parent;\n\t\t}","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.updateExpandGridColumn":{"_":{"meta":{"summary":"","src":"\t\tif (!this.tree.showGrid) return;\n\n\t\tvar _this = this;\n\n\t\tvar icon = this.isLastNode() ? this.tree.blankIconSrc : this.tree.gridIconSrcV;\n\n\t\tdojo.lang.forEach(_this.getDescendants(),\n\t\t\tfunction(node) { node.setGridImage(_this.depth, icon); }\n\t\t);\n\n\t\tthis.updateExpandGrid();","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.updateIcons":{"_":{"meta":{"summary":"","src":"\t\t\/\/\n\t\t\/\/ set the expand icon\n\t\t\/\/\n\n\n\t\t\/\/\n\t\t\/\/ set the child icon\n\t\t\/\/\n\t\tthis.buildChildIcon();\n\n\t\tthis.updateExpandGrid();\n\t\tthis.updateChildGrid();\n\t\tthis.updateParentGrid();\n\n\n\n\t\tdojo.profile.stop(\"updateIcons\")","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.buildChildIcon":{"_":{"meta":{"summary":"","src":"\t\t\tthis.childIcon.src = this.childIconSrc;\n\t\t}\n\t\tthis.childIcon.style.display = this.childIconSrc ? 'inline' : 'none';","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.setGridImage":{"_":{"meta":{"summary":"","parameters":{"idx":{"type":""},"src":{"type":""}},"src":"\t\tif (idx < 0){\n\t\t\tidx = this.imgs.length + idx;\n\t\t}\n\n\t\t\/\/if (idx >= this.imgs.length-2) return;\n\t\tthis.imgs[idx].style.backgroundImage = 'url(' + src + ')';","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.updateIconTree":{"_":{"meta":{"summary":"","src":"\t\tthis.tree.updateIconTree.call(this);","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.expand":{"_":{"meta":{"summary":"","src":"\t\tif (this.isExpanded) return;\n\n\t\tif (this.children.length) {\n\t\t\tthis.showChildren();\n\t\t}\n\n\t\tthis.isExpanded = true;\n\n\t\tthis.updateExpandIcon();\n\n\t\tdojo.event.topic.publish(this.tree.eventNames.expand, {source: this} );","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.collapse":{"_":{"meta":{"summary":"","src":"\t\tif (!this.isExpanded) return;\n\n\t\tthis.hideChildren();\n\t\tthis.isExpanded = false;\n\n\t\tthis.updateExpandIcon();\n\n\t\tdojo.event.topic.publish(this.tree.eventNames.collapse, {source: this} );","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.hideChildren":{"_":{"meta":{"summary":"","src":"\t\tthis.tree.toggleObj.hide(\n\t\t\tthis.containerNode, this.toggleDuration, this.explodeSrc, dojo.lang.hitch(this, \"onHide\")\n\t\t);\n\n\t\t\/* if dnd is in action, recalculate changed coordinates *\/\n\t\tif(dojo.exists(dojo, 'dnd.dragManager.dragObjects') && dojo.dnd.dragManager.dragObjects.length) {\n\t\t\tdojo.dnd.dragManager.cacheTargetLocations();\n\t\t}","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.showChildren":{"_":{"meta":{"summary":"","src":"\t\tthis.tree.toggleObj.show(\n\t\t\tthis.containerNode, this.toggleDuration, this.explodeSrc, dojo.lang.hitch(this, \"onShow\")\n\t\t);\n\n\t\t\/* if dnd is in action, recalculate changed coordinates *\/\n\t\tif(dojo.exists(dojo, 'dnd.dragManager.dragObjects') && dojo.dnd.dragManager.dragObjects.length) {\n\t\t\tdojo.dnd.dragManager.cacheTargetLocations();\n\t\t}","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.addChild":{"_":{"meta":{"summary":"","src":"\t\treturn this.tree.addChild.apply(this, arguments);","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.doAddChild":{"_":{"meta":{"summary":"","src":"\t\treturn this.tree.doAddChild.apply(this, arguments);","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.edit":{"_":{"meta":{"summary":"","parameters":{"props":{"type":""}},"src":"\t\tdojo.lang.mixin(this, props);\n\t\tif (props.title) {\n\t\t\tthis.titleNode.innerHTML = this.title;\n\t\t}\n\n\t\tif (props.afterLabel) {\n\t\t\tthis.afterLabelNode.innerHTML = this.afterLabel;\n\t\t}\n\n\t\tif (props.childIconSrc) {\n\t\t\tthis.buildChildIcon();\n\t\t}","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.removeNode":{"_":{"meta":{"summary":"","src":"                         return this.tree.removeNode.apply(this, arguments)    ","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.doRemoveNode":{"_":{"meta":{"summary":"","src":"                           return this.tree.doRemoveNode.apply(this, arguments)    ","this":"dojo.widget.TreeNode"}}},"dojo.widget.TreeNode.toString":{"_":{"meta":{"summary":"","src":"\t\treturn \"[\"+this.widgetType+\" Tree:\"+this.tree+\" ID:\"+this.widgetId+\" Title:\"+this.title+\"]\";","this":"dojo.widget.TreeNode"}}}}}},"dojo.widget.TreeNodeV3":{"meta":{"requires":{"common":["dojo.html.*","dojo.event.*","dojo.io.*","dojo.widget.TreeWithNode"]},"methods":{"dojo.widget.TreeNodeV3":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\n\tthis.actionsDisabled = [];","this_variables":["actionsDisabled","markProcessingSavedClass","tree","domNode","expandNode","contentNode","labelNode","domNode.widgetId","labelNode.innerHTML","isFolder","labelNode.innerHTML","isFolder","tree","isFolder","tree","containerNode","parent","tryLazyInit","isExpanded","isExpanded","labelNode.innerHTML"],"inherits":["dojo.widget.HtmlWidget"],"object_inherits":["dojo.widget.TreeWithNode"],"protovariables":{"widgetType":"","tryLazyInit":"","actions":"","labelStyle":"","contentStyle":"","expandNode":"","labelNode":"","nodeType":"","cloneProperties":"","isTreeNode":"","object":"","title":"","isFolder":"","contentNode":"","expandClass":"","isExpanded":"","containerNode":""}}}},"dojo.widget.TreeNodeV3.getNodeType":{"_":{"meta":{"summary":"","src":"\t\treturn this.nodeType;","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.clone":{"_":{"meta":{"summary":"","parameters":{"deep":{"type":""}},"src":"\t\tvar ret = new this.constructor();\n\t\t\n\t\t\/\/dojo.debug(\"start cloning props \"+this);\n\t\t\n\t\tfor(var i=0; i<this.cloneProperties.length; i++) {\n\t\t\tvar prop = this.cloneProperties[i];\n\t\t\t\/\/dojo.debug(\"cloning \"+prop+ \":\" +this[prop]);\n\t\t\tret[prop] = dojo.lang.shallowCopy(this[prop], true);\t\t\t\n\t\t}\n\t\t\n\t\tif (this.tree.unsetFolderOnEmpty && !deep && this.isFolder) {\n\t\t\tret.isFolder = false;\n\t\t}\n\t\t\n\t\t\/\/dojo.debug(\"cloned props \"+this);\n\t\t\n\t\tret.toggleObj = this.toggleObj;\n\t\t\n\t\tdojo.widget.manager.add(ret);\n\t\t\n\t\tret.tree = this.tree;\n\t\tret.buildRendering({},{});\n\t\tret.initialize({},{});\n\t\t\t\t\n\t\tif (deep && this.children.length) {\n\t\t\t\/\/dojo.debug(\"deeper copy start\");\n\t\t\tfor(var i=0; i<this.children.length; i++) {\n\t\t\t\tvar child = this.children[i];\n\t\t\t\t\/\/dojo.debug(\"copy child \"+child);\n\t\t\t\tif (child.clone) {\n\t\t\t\t\tret.children.push(child.clone(deep));\n\t\t\t\t} else {\n\t\t\t\t\tret.children.push(dojo.lang.shallowCopy(child, deep));\n\t\t\t\t}\n\t\t\t}\n\t\t\t\/\/dojo.debug(\"deeper copy end\");\n\t\t\tret.setChildren();\n\t\t}\n\t\t\n\t\t\n\t\t\t\t\n\t\treturn ret;","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.markProcessing":{"_":{"meta":{"summary":"","src":"\t\tthis.markProcessingSavedClass = dojo.html.getClass(this.expandNode);\n\t\tdojo.html.setClass(this.expandNode, this.tree.classPrefix+'ExpandLoading');\t\t\t","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.unmarkProcessing":{"_":{"meta":{"summary":"","src":"\t\tdojo.html.setClass(this.expandNode, this.markProcessingSavedClass);\t\t\t","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.buildRendering":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"fragment":{"type":""},"parent":{"type":""}},"src":"\t\tif (args.tree) {\n\t\t\tthis.tree = dojo.lang.isString(args.tree) ? dojo.widget.manager.getWidgetById(args.tree) : args.tree;\t\t\t\n\t\t} else if (parent && parent.tree) {\n\t\t\tthis.tree = parent.tree;\n\t\t} \n\t\t\n\t\tif (!this.tree) {\n\t\t\tdojo.raise(\"Can't evaluate tree from arguments or parent\");\n\t\t}\n\t\t\n\t\t\n\t\t\/\/dojo.profile.start(\"buildRendering - cloneNode\");\n\t\t\n\t\tthis.domNode = this.tree.nodeTemplate.cloneNode(true);\n\t\tthis.expandNode = this.domNode.firstChild;\n\t\tthis.contentNode = this.domNode.childNodes[1];\n\t\tthis.labelNode = this.contentNode.firstChild;\n\t\t\n\t\tif (this.labelStyle) {\n\t\t\tdojo.html.setStyleText(this.labelNode, this.labelStyle);\n\t\t}\n\t\t\n\t\tif (this.contentStyle) {\n\t\t\tdojo.html.setStyleText(this.contentNode, this.contentStyle);\n\t\t}\n\n\n\t\t\/*\n\t\tthis.domNode = this.tree.nodeTemplate.cloneNode(false);\n\t\tthis.expandNode = this.tree.expandNodeTemplate.cloneNode(false);\n\t\tthis.labelNode = this.tree.labelNodeTemplate.cloneNode(false);\n\t\tthis.contentNode = this.tree.contentNodeTemplate.cloneNode(false);\n\t\t\n\t\tthis.domNode.appendChild(this.expandNode);\n\t\tthis.domNode.appendChild(this.contentNode);\n\t\tthis.contentNode.appendChild(this.labelNode);\n\t\t*\/\n\t\t\n\t\t\/\/dojo.profile.end(\"buildRendering - cloneNode\");\n\t\t\n\t\t\n\t\t\n\t\tthis.domNode.widgetId = this.widgetId;\n\t\t\n\t\t\/\/dojo.profile.start(\"buildRendering - innerHTML\");\n\t\tthis.labelNode.innerHTML = this.title;\n\t\t\/\/dojo.profile.end(\"buildRendering - innerHTML\");","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.getInfo":{"_":{"meta":{"summary":"","src":"\t\t\twidgetId: this.widgetId,\n\t\t\tobjectId: this.objectId,\n\t\t\tindex: this.getParentIndex()\n\t\t}\n\n\t\treturn info;","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.widgetId":{"_":{"meta":{"summary":"","src":"\t\t\twidgetId: this.widgetId,\n\t\t\tobjectId: this.objectId,\n\t\t\tindex: this.getParentIndex()\n\t\t}\n\n\t\treturn info;","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.objectId":{"_":{"meta":{"summary":"","src":"\t\t\twidgetId: this.widgetId,\n\t\t\tobjectId: this.objectId,\n\t\t\tindex: this.getParentIndex()\n\t\t}\n\n\t\treturn info;","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.index":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"dontPublishEvent":{"type":""}},"src":"\t\t\tthis.updateTree(parent.tree);\n\t\t}\n\t\t\n\t\tif (parent.isTreeNode) {\n\t\t\tif (!parent.isFolder) {\n\t\t\t\t\/\/dojo.debug(\"folderize parent \"+parent);\n\t\t\t\tparent.setFolder();\n\t\t\t\tparent.state = parent.loadStates.LOADED;\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\tvar siblingsCount = parent.children.length;\n\t\t\n\t\t\/\/ setFolder works BEFORE insertNode\n\t\tthis.insertNode(parent, index);\n\t\t\n\t\t\n\t\tthis.viewAddLayout();\n\t\n\t\t\n\t\t\/\/dojo.debug(\"siblings \"+parent.children);\n\t\t\n\t\tif (siblingsCount > 1) {\n\t\t\tif (index == 0 && parent.children[1] instanceof dojo.widget.Widget) {\n\t\t\t\tparent.children[1].viewUpdateLayout();\t\t\t\t\n\t\t\t}\n\t\t\tif (index == siblingsCount-1 && parent.children[siblingsCount-2] instanceof dojo.widget.Widget) {\n\t\t\t\tparent.children[siblingsCount-2].viewUpdateLayout();\t\t\t\n\t\t\t}\n\t\t} else if (parent.isTreeNode) {\n\t\t\t\/\/ added as the first child\n\t\t\t\/\/dojo.debug(\"added as first\");\n\t\t\tparent.viewSetHasChildren();\n\t\t}\n\t\t\n\t\tif (!dontPublishEvent) {\n\n\t\t\tvar message = {\n\t\t\t\tchild: this,\n\t\t\t\tindex: index,\n\t\t\t\tparent: parent\n\t\t\t}\n\t\t\t\t\n\t\t\tdojo.event.topic.publish(this.tree.eventNames.afterAddChild, message);\n\t\t}\n\n\t\t\/\/dojo.profile.end(\"addedTo\");","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.setFolder":{"_":{"meta":{"summary":"","src":"\t\tthis.viewSetExpand();\n\t\tif (!this.containerNode) { \/\/ maybe this node was unfolderized and still has container\n\t\t\tthis.viewAddContainer(); \/\/ all folders have container.\n\t\t}\n\t\t\/\/dojo.debug(\"publish \"+this.tree.eventNames.setFolder);\n\t\tdojo.event.topic.publish(this.tree.eventNames.afterSetFolder, { source: this });","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.source":{"_":{"meta":{"summary":"","parameters":{"title":{"type":""}},"src":"\t\tvar oldTitle = this.title;\n\t\t\n\t\tthis.labelNode.innerHTML = this.title = title;\n\t\t\t\t\n\t\tdojo.event.topic.publish(this.tree.eventNames.afterSetTitle, { source: this, oldTitle:oldTitle });","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.initialize":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""},"parent":{"type":""}},"src":"\t\t\tthis.isFolder = true;\n\t\t}\n\t\t\n\t\tif (this.children.length || this.isFolder) {\n\t\t\t\/\/dojo.debug(\"children found\");\n\t\t\t\/\/dojo.debug(this.children);\n\t\t\t\/\/dojo.debug(\"isFolder \"+args.isFolder);\n\t\t\t\n\t\t\t\/\/ viewSetExpand for Folder is set here also\n\t\t\tthis.setFolder();\t\t\t\n\t\t} else {\n\t\t\t\/\/ set expandicon for leaf \t\n\t\t\tthis.viewSetExpand();\n\t\t}\n\t\t\n\t\tfor(var i=0; i<this.actionsDisabled.length;i++) {\n\t\t\tthis.actionsDisabled[i] = this.actionsDisabled[i].toUpperCase();\n\t\t}\n\t\t\/\/dojo.debug(\"publish \"+this.tree.eventNames.changeTree);\n\t\t\n\t\tdojo.event.topic.publish(this.tree.eventNames.afterChangeTree, {oldTree:null, newTree:this.tree, node:this} );\n\t\t\n\t\t\n\t\t\/\/dojo.profile.end(\"initialize\");\n\t\t\n\t\t\/\/dojo.debug(\"initialize out \"+this);\n\t\t\/\/dojo.debug(this+\" parent \"+parent);","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.oldTree":{"_":{"meta":{"summary":"","parameters":{"newTree":{"type":""}},"src":"\t\tif (this.tree === newTree) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tvar oldTree = this.tree;\n\t\t\n\t\t\n\t\tdojo.lang.forEach(this.getDescendants(),\n\t\t\tfunction(elem) {\t\t\t\n\t\t\t\telem.tree = newTree;\t\t\t\n\t\t});\n\t\t\n\t\t\/**\n\t\t * UNTESTED\n\t\t * changes class prefix for all domnodes when moving between trees\n\t\t *\/\n\t\tif (oldTree.classPrefix != newTree.classPrefix) {\n\t\t\tvar stack = [this.domNode]\n\t\t\tvar elem;\n\t\t\tvar reg = new RegExp(\"(^|\\\\s)\"+oldTree.classPrefix, \"g\");\n\t\t\t\n\t\t\twhile (elem = stack.pop()) {\n\t\t\t\tfor(var i=0; i<elem.childNodes.length; i++) {\n\t\t\t\t\tvar childNode = elem.childNodes[i]\n\t\t\t\t\tif (childNode.nodeType != 1) continue;\n\t\t\t\t\t\/\/ change prefix for classes\n\t\t\t\t\tdojo.html.setClass(childNode, dojo.html.getClass(childNode).replace(reg, '$1'+newTree.classPrefix));\n\t\t\t\t\tstack.push(childNode);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tvar message = {oldTree:oldTree, newTree:newTree, node:this}\n\t\t\n\t\tdojo.event.topic.publish(this.tree.eventNames.afterChangeTree, message );\t\t\n\t\tdojo.event.topic.publish(newTree.eventNames.afterChangeTree, message );","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.unsetFolder":{"_":{"meta":{"summary":"","src":"\t\tthis.isFolder = false;\n\t\tthis.viewSetExpand();\t\t\n\t\tdojo.event.topic.publish(this.tree.eventNames.afterUnsetFolder, { source: this });","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.insertNode":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""}},"src":"\t\tif (!index) index = 0;\n\t\t\/\/dojo.debug(\"insertNode \"+this+\" parent \"+parent+\" before \"+index);\n\t\t\n\t\tif (index==0) {\n\t\t\tdojo.html.prependChild(this.domNode, parent.containerNode);\n\t\t} else {\n\t\t\tdojo.html.insertAfter(this.domNode, parent.children[index-1].domNode);\n\t\t}","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.updateTree":{"_":{"meta":{"summary":"","parameters":{"newTree":{"type":""}},"src":"\t\tif (this.tree === newTree) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tvar oldTree = this.tree;\n\t\t\n\t\t\n\t\tdojo.lang.forEach(this.getDescendants(),\n\t\t\tfunction(elem) {\t\t\t\n\t\t\t\telem.tree = newTree;\t\t\t\n\t\t});\n\t\t\n\t\t\/**\n\t\t * UNTESTED\n\t\t * changes class prefix for all domnodes when moving between trees\n\t\t *\/\n\t\tif (oldTree.classPrefix != newTree.classPrefix) {\n\t\t\tvar stack = [this.domNode]\n\t\t\tvar elem;\n\t\t\tvar reg = new RegExp(\"(^|\\\\s)\"+oldTree.classPrefix, \"g\");\n\t\t\t\n\t\t\twhile (elem = stack.pop()) {\n\t\t\t\tfor(var i=0; i<elem.childNodes.length; i++) {\n\t\t\t\t\tvar childNode = elem.childNodes[i]\n\t\t\t\t\tif (childNode.nodeType != 1) continue;\n\t\t\t\t\t\/\/ change prefix for classes\n\t\t\t\t\tdojo.html.setClass(childNode, dojo.html.getClass(childNode).replace(reg, '$1'+newTree.classPrefix));\n\t\t\t\t\tstack.push(childNode);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tvar message = {oldTree:oldTree, newTree:newTree, node:this}\n\t\t\n\t\tdojo.event.topic.publish(this.tree.eventNames.afterChangeTree, message );\t\t\n\t\tdojo.event.topic.publish(newTree.eventNames.afterChangeTree, message );","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.addedTo":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"dontPublishEvent":{"type":""}},"src":"\t\t\tthis.updateTree(parent.tree);\n\t\t}\n\t\t\n\t\tif (parent.isTreeNode) {\n\t\t\tif (!parent.isFolder) {\n\t\t\t\t\/\/dojo.debug(\"folderize parent \"+parent);\n\t\t\t\tparent.setFolder();\n\t\t\t\tparent.state = parent.loadStates.LOADED;\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\tvar siblingsCount = parent.children.length;\n\t\t\n\t\t\/\/ setFolder works BEFORE insertNode\n\t\tthis.insertNode(parent, index);\n\t\t\n\t\t\n\t\tthis.viewAddLayout();\n\t\n\t\t\n\t\t\/\/dojo.debug(\"siblings \"+parent.children);\n\t\t\n\t\tif (siblingsCount > 1) {\n\t\t\tif (index == 0 && parent.children[1] instanceof dojo.widget.Widget) {\n\t\t\t\tparent.children[1].viewUpdateLayout();\t\t\t\t\n\t\t\t}\n\t\t\tif (index == siblingsCount-1 && parent.children[siblingsCount-2] instanceof dojo.widget.Widget) {\n\t\t\t\tparent.children[siblingsCount-2].viewUpdateLayout();\t\t\t\n\t\t\t}\n\t\t} else if (parent.isTreeNode) {\n\t\t\t\/\/ added as the first child\n\t\t\t\/\/dojo.debug(\"added as first\");\n\t\t\tparent.viewSetHasChildren();\n\t\t}\n\t\t\n\t\tif (!dontPublishEvent) {\n\n\t\t\tvar message = {\n\t\t\t\tchild: this,\n\t\t\t\tindex: index,\n\t\t\t\tparent: parent\n\t\t\t}\n\t\t\t\t\n\t\t\tdojo.event.topic.publish(this.tree.eventNames.afterAddChild, message);\n\t\t}\n\n\t\t\/\/dojo.profile.end(\"addedTo\");","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.child":{"_":{"meta":{"summary":"","src":"\t\tif (!this.parent) return;\n\n\t\tvar parent = this.parent;\n\t\tvar index = this.getParentIndex();\n\n\t\tthis.doDetach.apply(this, arguments);\n\n\t\tdojo.event.topic.publish(this.tree.eventNames.afterDetach,\n\t\t\t{ child: this, parent: parent, index:index }\n\t\t);","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.parent":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"dontPublishEvent":{"type":""}},"src":"\t\t\tthis.updateTree(parent.tree);\n\t\t}\n\t\t\n\t\tif (parent.isTreeNode) {\n\t\t\tif (!parent.isFolder) {\n\t\t\t\t\/\/dojo.debug(\"folderize parent \"+parent);\n\t\t\t\tparent.setFolder();\n\t\t\t\tparent.state = parent.loadStates.LOADED;\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\tvar siblingsCount = parent.children.length;\n\t\t\n\t\t\/\/ setFolder works BEFORE insertNode\n\t\tthis.insertNode(parent, index);\n\t\t\n\t\t\n\t\tthis.viewAddLayout();\n\t\n\t\t\n\t\t\/\/dojo.debug(\"siblings \"+parent.children);\n\t\t\n\t\tif (siblingsCount > 1) {\n\t\t\tif (index == 0 && parent.children[1] instanceof dojo.widget.Widget) {\n\t\t\t\tparent.children[1].viewUpdateLayout();\t\t\t\t\n\t\t\t}\n\t\t\tif (index == siblingsCount-1 && parent.children[siblingsCount-2] instanceof dojo.widget.Widget) {\n\t\t\t\tparent.children[siblingsCount-2].viewUpdateLayout();\t\t\t\n\t\t\t}\n\t\t} else if (parent.isTreeNode) {\n\t\t\t\/\/ added as the first child\n\t\t\t\/\/dojo.debug(\"added as first\");\n\t\t\tparent.viewSetHasChildren();\n\t\t}\n\t\t\n\t\tif (!dontPublishEvent) {\n\n\t\t\tvar message = {\n\t\t\t\tchild: this,\n\t\t\t\tindex: index,\n\t\t\t\tparent: parent\n\t\t\t}\n\t\t\t\t\n\t\t\tdojo.event.topic.publish(this.tree.eventNames.afterAddChild, message);\n\t\t}\n\n\t\t\/\/dojo.profile.end(\"addedTo\");","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.createSimple":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"parent":{"type":""}},"src":"\t\t\tvar tree = args.tree;\n\t\t} else if (parent) {\n\t\t\tvar tree = parent.tree;\n\t\t} else {\n\t\t\tdojo.raise(\"createSimple: can't evaluate tree\");\n\t\t}\n\t\ttree = dojo.widget.byId(tree);\n\t\t\n\t\t\/\/dojo.debug(tree);\n\t\t\n\t\tvar treeNode = new tree.defaultChildWidget(); \n\t\t\/\/dojo.profile.end(this.widgetType+\" createSimple constructor\");\n\t\t\n\t\t\/\/dojo.profile.start(this.widgetType+\" createSimple mixin\");\t\t\n\t\tfor(var x in args){ \/\/ fastMixIn\t\t\t\n\t\t\ttreeNode[x] = args[x];\n\t\t}\n\t\t\n\t\t\n\t\t\/\/dojo.profile.end(this.widgetType+\" createSimple mixin\");\n\t\t\n\t\t\t\t\n\t\t\/\/ HtmlWidget.postMixIn \n\t\ttreeNode.toggleObj = dojo.lfx.toggle[treeNode.toggle.toLowerCase()] || dojo.lfx.toggle.plain;\n\n\t\t\/\/dojo.profile.start(this.widgetType + \" manager\");\n\t\tdojo.widget.manager.add(treeNode);\n\t\t\/\/dojo.profile.end(this.widgetType + \" manager\");\n\t\t\n\t\t\/\/dojo.profile.start(this.widgetType + \" buildRendering\");\n\t\ttreeNode.buildRendering(args, {}, parent);\t\t\n\t\t\/\/dojo.profile.end(this.widgetType + \" buildRendering\");\n\t\t\n\t\ttreeNode.initialize(args, {}, parent);\n\t\t\n\t\t\/\/dojo.profile.end(this.widgetType+\"createSimple\");\n\t\tif (treeNode.parent) {\n\t\t\tdelete dojo.widget.manager.topWidgets[treeNode.widgetId];\n\t\t}\n\t\t\n\t\treturn treeNode;","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.viewUpdateLayout":{"_":{"meta":{"summary":"","src":"\t\tthis.viewAddLayout();\n\t\t\/\/dojo.profile.end(\"viewUpdateLayout\");\t","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.viewAddContainer":{"_":{"meta":{"summary":"","src":"\t\tthis.domNode.appendChild(this.containerNode);","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.viewAddLayout":{"_":{"meta":{"summary":"","src":"\t\t\t\/\/dojo.debug(\"Parent isTree => add isTreeRoot\");\n\t\t\t\n\t\t\t\/\/ use setClass, not addClass for speed\n\t\t\tdojo.html.setClass(this.domNode, dojo.html.getClass(this.domNode) + ' '+this.tree.classPrefix+'IsRoot')\n\t\t}\n\t\t\/\/dojo.debug(this.parent.children.length);\n\t\t\/\/dojo.debug(this.parent.children[this.parent.children.length-1]);\n\t\tif (this.isLastNode()) {\n\t\t\t\/\/dojo.debug(\"Checked last node for \"+this);\n\t\t\t\/\/dojo.debug(\"Parent last is \"+this.parent.children[this.parent.children.length-1]);\n\t\t\t\/\/dojo.debug(\"last node => add isTreeLast for \"+this);\n\t\t\tdojo.html.setClass(this.domNode, dojo.html.getClass(this.domNode) + ' '+this.tree.classPrefix+'IsLast')\t\t\t\n\t\t}\n\t\t\/\/dojo.profile.end(\"viewAddLayout\");\n\t\t\/\/dojo.debug(\"viewAddLayout out\");","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.viewRemoveLayout":{"_":{"meta":{"summary":"","src":"\t\tdojo.html.removeClass(this.domNode, this.tree.classPrefix+\"IsLast\");\n\t\t\/\/dojo.profile.end(\"viewRemoveLayout\");","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.viewGetExpandClass":{"_":{"meta":{"summary":"","src":"\t\tif (this.isFolder) {\t\t\t\n\t\t\treturn this.isExpanded ? \"ExpandOpen\" : \"ExpandClosed\";\n\t\t} else {\n\t\t\treturn \"ExpandLeaf\";\n\t\t}","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.viewSetExpand":{"_":{"meta":{"summary":"","src":"\t\tvar reg = new RegExp(\"(^|\\\\s)\"+this.tree.classPrefix+\"Expand\\\\w+\",'g');\t\t\t\n\t\t\t\n\t\tdojo.html.setClass(this.domNode, dojo.html.getClass(this.domNode).replace(reg,'') + ' '+expand);\n\t\t\n\t\t\/\/dojo.debug(dojo.html.getClass(this.domNode))\n\t\t\/\/dojo.profile.end(\"viewSetExpand\");\n\t\tthis.viewSetHasChildrenAndExpand();","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.viewGetChildrenClass":{"_":{"meta":{"summary":"","src":"\t\treturn 'Children'+(this.children.length ? 'Yes' : 'No');","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.viewSetHasChildren":{"_":{"meta":{"summary":"","src":"\t\tvar reg = new RegExp(\"(^|\\\\s)\"+this.tree.classPrefix+\"Children\\\\w+\",'g');\t\t\t\n\t\t\n\t\tdojo.html.setClass(this.domNode, dojo.html.getClass(this.domNode).replace(reg,'') + ' '+clazz);\n\t\t\n\t\tthis.viewSetHasChildrenAndExpand();","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.viewSetHasChildrenAndExpand":{"_":{"meta":{"summary":"","src":"\t\tvar clazz = this.tree.classPrefix+'State'+this.viewGetChildrenClass()+'-'+this.viewGetExpandClass();\n\t\t\n\t\tvar reg = new RegExp(\"(^|\\\\s)\"+this.tree.classPrefix+\"State[\\\\w-]+\",'g');\t\t\t\n\t\t\n\t\tdojo.html.setClass(this.domNode, dojo.html.getClass(this.domNode).replace(reg,'') + ' '+clazz);\t\t","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.detach":{"_":{"meta":{"summary":"","src":"\t\tif (!this.parent) return;\n\n\t\tvar parent = this.parent;\n\t\tvar index = this.getParentIndex();\n\n\t\tthis.doDetach.apply(this, arguments);\n\n\t\tdojo.event.topic.publish(this.tree.eventNames.afterDetach,\n\t\t\t{ child: this, parent: parent, index:index }\n\t\t);","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.doDetach":{"_":{"meta":{"summary":"","src":"\t\t\/\/dojo.debug(parent.containerNode.style.display)\n\t\t\n\t\tif (!parent) return;\n\t\t\n\t\tvar index = this.getParentIndex();\n\t\t\n\t\t\n\t\tthis.viewRemoveLayout();\n\t\t\n\t\tdojo.widget.DomWidget.prototype.removeChild.call(parent, this);\n\t\t\n\t\tvar siblingsCount = parent.children.length;\n\t\t\n\t\t\/\/dojo.debug(\"siblingsCount \"+siblingsCount);\n\t\t\n\t\tif (siblingsCount > 0) {\n\t\t\tif (index == 0) {\t\/\/ deleted first node => update new first\n\t\t\t\tparent.children[0].viewUpdateLayout();\t\t\n\t\t\t}\n\t\t\tif (index == siblingsCount) { \/\/ deleted last node\n\t\t\t\tparent.children[siblingsCount-1].viewUpdateLayout();\t\t\n\t\t\t}\n\t\t} else {\n\t\t\tif (parent.isTreeNode) {\n\t\t\t\tparent.viewSetHasChildren();\n\t\t\t}\n\t\t}\n\t\t\t\t\n\t\tif (this.tree.unsetFolderOnEmpty && !parent.children.length && parent.isTreeNode) {\n\t\t\tparent.unsetFolder();\n\t\t}\t\t\n\t\t\n\t\t\/\/dojo.debug(parent.containerNode.style.display)\n\t\t\n\t\tthis.parent = null;","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.destroy":{"_":{"meta":{"summary":"","src":"\t\tdojo.event.topic.publish(this.tree.eventNames.beforeNodeDestroy, { source: this } );\n\t\t\n\t\tthis.detach();\t\t\n\n\t\treturn dojo.widget.HtmlWidget.prototype.destroy.apply(this, arguments);","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.expand":{"_":{"meta":{"summary":"","src":"\t\tif (this.isExpanded) return;\n\n\n\t\t\/\/dojo.profile.start(\"expand \"+this);\n\t\t\n\t\t\/\/dojo.debug(\"expand in \"+this);\n\t\t\n\t\t\/\/dojo.profile.start(\"expand - lazy init \"+this);\n\t\tif (this.tryLazyInit) {\n\t\t\tthis.setChildren();\n\t\t\tthis.tryLazyInit = false;\n\t\t}\n\t\t\n\t\t\/\/dojo.profile.end(\"expand - lazy init \"+this);\n\t\t\n\t\t\n\t\tthis.isExpanded = true;\n\n\t\tthis.viewSetExpand();\n\n\t\t\/\/dojo.profile.start(\"expand - showChildren \"+this);\n\t\t\n\t\t\/**\n\t\t * no matter if I have children or not. need to show\/hide container anyway.\n\t\t * use case: empty folder is expanded => then child is added, container already shown all fine\n\t\t *\/\n\t\tthis.showChildren();\n\t\t\n\t\t\/\/dojo.profile.end(\"expand - showChildren \"+this);\n\t\t\n\t\t\n\t\t\/\/dojo.profile.start(\"expand - viewSetExpand \"+this);\n\t\t\t\t\n\t\t\/\/dojo.profile.end(\"expand - viewSetExpand \"+this);\n\n\t\t\/\/dojo.profile.start(\"expand - event \"+this);\n\n\t\t\n\t\t\/\/dojo.profile.end(\"expand - event \"+this);\n\t\t\n\t\t\/\/dojo.profile.end(\"expand \"+this);","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.collapse":{"_":{"meta":{"summary":"","src":"\t\tif (!this.isExpanded) return;\n\n\t\t\n\t\tthis.isExpanded = false;\n\t\t\n\t\tthis.hideChildren();","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.hideChildren":{"_":{"meta":{"summary":"","src":"\t\tthis.tree.toggleObj.hide(\n\t\t\tthis.containerNode, this.toggleDuration, this.explodeSrc, dojo.lang.hitch(this, \"onHideChildren\")\n\t\t);","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.showChildren":{"_":{"meta":{"summary":"","src":"\t\tthis.tree.toggleObj.show(\n\t\t\tthis.containerNode, this.toggleDuration, this.explodeSrc, dojo.lang.hitch(this, \"onShowChildren\")\n\t\t);","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.onShowChildren":{"_":{"meta":{"summary":"","src":"\t\tthis.onShow();\n\t\tdojo.event.topic.publish(this.tree.eventNames.afterExpand, {source: this} );\t\t","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.onHideChildren":{"_":{"meta":{"summary":"","src":"\t\tthis.viewSetExpand();\n\t\tthis.onHide();\n\t\tdojo.event.topic.publish(this.tree.eventNames.afterCollapse, {source: this} );","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.setTitle":{"_":{"meta":{"summary":"","parameters":{"title":{"type":""}},"src":"\t\tvar oldTitle = this.title;\n\t\t\n\t\tthis.labelNode.innerHTML = this.title = title;\n\t\t\t\t\n\t\tdojo.event.topic.publish(this.tree.eventNames.afterSetTitle, { source: this, oldTitle:oldTitle });","this":"dojo.widget.TreeNodeV3"}}},"dojo.widget.TreeNodeV3.toString":{"_":{"meta":{"summary":"","src":"\t\treturn '['+this.widgetType+', '+this.title+']';","this":"dojo.widget.TreeNodeV3"}}}}}},"dojo.widget.TreeRPCController":{"meta":{"requires":{"common":["dojo.event.*","dojo.json","dojo.io.*","dojo.widget.TreeLoadingController"]},"methods":{"dojo.widget.TreeRPCController":{"_":{"meta":{"summary":"","src":"\tdojo.widget.TreeLoadingController.call(this);","inherits":["dojo.widget.TreeLoadingController"],"protovariables":{"widgetType":""}}}},"dojo.widget.TreeRPCController.doMove":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""}},"src":"\t\t\t\/\/ where from\n\t\t\tchild: this.getInfo(child),\n\t\t\tchildTree: this.getInfo(child.tree),\n\t\t\t\/\/ where to\n\t\t\tnewParent: this.getInfo(newParent),\n\t\t\tnewParentTree: this.getInfo(newParent.tree),\n\t\t\tnewIndex: index\n\t\t};\n\n\t\tvar success;\n\n\t\tthis.runRPC({\t\t\n\t\t\turl: this.getRPCUrl('move'),\n\t\t\t\/* I hitch to get this.loadOkHandler *\/\n\t\t\tload: function(response){\n\t\t\t\tsuccess = this.doMoveProcessResponse(response, child, newParent, index) ;\n\t\t\t},\n\t\t\tsync: true,\n\t\t\tlock: [child, newParent],\n\t\t\tparams: params\n\t\t});\n\n\n\t\treturn success;","this":"dojo.widget.TreeRPCController"}}},"dojo.widget.TreeRPCController.child":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""}},"src":"\t\t\t\/\/ where from\n\t\t\tchild: this.getInfo(child),\n\t\t\tchildTree: this.getInfo(child.tree),\n\t\t\t\/\/ where to\n\t\t\tnewParent: this.getInfo(newParent),\n\t\t\tnewParentTree: this.getInfo(newParent.tree),\n\t\t\tnewIndex: index\n\t\t};\n\n\t\tvar success;\n\n\t\tthis.runRPC({\t\t\n\t\t\turl: this.getRPCUrl('move'),\n\t\t\t\/* I hitch to get this.loadOkHandler *\/\n\t\t\tload: function(response){\n\t\t\t\tsuccess = this.doMoveProcessResponse(response, child, newParent, index) ;\n\t\t\t},\n\t\t\tsync: true,\n\t\t\tlock: [child, newParent],\n\t\t\tparams: params\n\t\t});\n\n\n\t\treturn success;","this":"dojo.widget.TreeRPCController"}}},"dojo.widget.TreeRPCController.childTree":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""}},"src":"\t\t\t\/\/ where from\n\t\t\tchild: this.getInfo(child),\n\t\t\tchildTree: this.getInfo(child.tree),\n\t\t\t\/\/ where to\n\t\t\tnewParent: this.getInfo(newParent),\n\t\t\tnewParentTree: this.getInfo(newParent.tree),\n\t\t\tnewIndex: index\n\t\t};\n\n\t\tvar success;\n\n\t\tthis.runRPC({\t\t\n\t\t\turl: this.getRPCUrl('move'),\n\t\t\t\/* I hitch to get this.loadOkHandler *\/\n\t\t\tload: function(response){\n\t\t\t\tsuccess = this.doMoveProcessResponse(response, child, newParent, index) ;\n\t\t\t},\n\t\t\tsync: true,\n\t\t\tlock: [child, newParent],\n\t\t\tparams: params\n\t\t});\n\n\n\t\treturn success;","this":"dojo.widget.TreeRPCController"}}},"dojo.widget.TreeRPCController.newParent":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""}},"src":"\t\t\t\/\/ where from\n\t\t\tchild: this.getInfo(child),\n\t\t\tchildTree: this.getInfo(child.tree),\n\t\t\t\/\/ where to\n\t\t\tnewParent: this.getInfo(newParent),\n\t\t\tnewParentTree: this.getInfo(newParent.tree),\n\t\t\tnewIndex: index\n\t\t};\n\n\t\tvar success;\n\n\t\tthis.runRPC({\t\t\n\t\t\turl: this.getRPCUrl('move'),\n\t\t\t\/* I hitch to get this.loadOkHandler *\/\n\t\t\tload: function(response){\n\t\t\t\tsuccess = this.doMoveProcessResponse(response, child, newParent, index) ;\n\t\t\t},\n\t\t\tsync: true,\n\t\t\tlock: [child, newParent],\n\t\t\tparams: params\n\t\t});\n\n\n\t\treturn success;","this":"dojo.widget.TreeRPCController"}}},"dojo.widget.TreeRPCController.newParentTree":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""}},"src":"\t\t\t\/\/ where from\n\t\t\tchild: this.getInfo(child),\n\t\t\tchildTree: this.getInfo(child.tree),\n\t\t\t\/\/ where to\n\t\t\tnewParent: this.getInfo(newParent),\n\t\t\tnewParentTree: this.getInfo(newParent.tree),\n\t\t\tnewIndex: index\n\t\t};\n\n\t\tvar success;\n\n\t\tthis.runRPC({\t\t\n\t\t\turl: this.getRPCUrl('move'),\n\t\t\t\/* I hitch to get this.loadOkHandler *\/\n\t\t\tload: function(response){\n\t\t\t\tsuccess = this.doMoveProcessResponse(response, child, newParent, index) ;\n\t\t\t},\n\t\t\tsync: true,\n\t\t\tlock: [child, newParent],\n\t\t\tparams: params\n\t\t});\n\n\n\t\treturn success;","this":"dojo.widget.TreeRPCController"}}},"dojo.widget.TreeRPCController.newIndex":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""}},"src":"\t\t\t\/\/ where from\n\t\t\tchild: this.getInfo(child),\n\t\t\tchildTree: this.getInfo(child.tree),\n\t\t\t\/\/ where to\n\t\t\tnewParent: this.getInfo(newParent),\n\t\t\tnewParentTree: this.getInfo(newParent.tree),\n\t\t\tnewIndex: index\n\t\t};\n\n\t\tvar success;\n\n\t\tthis.runRPC({\t\t\n\t\t\turl: this.getRPCUrl('move'),\n\t\t\t\/* I hitch to get this.loadOkHandler *\/\n\t\t\tload: function(response){\n\t\t\t\tsuccess = this.doMoveProcessResponse(response, child, newParent, index) ;\n\t\t\t},\n\t\t\tsync: true,\n\t\t\tlock: [child, newParent],\n\t\t\tparams: params\n\t\t});\n\n\n\t\treturn success;","this":"dojo.widget.TreeRPCController"}}},"dojo.widget.TreeRPCController.url":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"output":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\t\tvar params = {\n\t\t\t\ttree: this.getInfo(parent.tree),\n\t\t\t\tparent: this.getInfo(parent),\n\t\t\t\tindex: index,\n\t\t\t\tdata: output\n\t\t\t}\n\n\t\t\tthis.runRPC({\n\t\t\t\turl: this.getRPCUrl('createChild'),\n\t\t\t\tload: function(response) {\n\t\t\t\t\t\/\/ suggested data is dead, fresh data from server is used\n\t\t\t\t\tthis.doCreateChildProcessResponse( response, parent, index, callObj, callFunc) \n\t\t\t\t},\n\t\t\t\tparams: params,\n\t\t\t\tlock: [parent]\n\t\t\t});","this":"dojo.widget.TreeRPCController"}}},"dojo.widget.TreeRPCController.load":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"output":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\t\tvar params = {\n\t\t\t\ttree: this.getInfo(parent.tree),\n\t\t\t\tparent: this.getInfo(parent),\n\t\t\t\tindex: index,\n\t\t\t\tdata: output\n\t\t\t}\n\n\t\t\tthis.runRPC({\n\t\t\t\turl: this.getRPCUrl('createChild'),\n\t\t\t\tload: function(response) {\n\t\t\t\t\t\/\/ suggested data is dead, fresh data from server is used\n\t\t\t\t\tthis.doCreateChildProcessResponse( response, parent, index, callObj, callFunc) \n\t\t\t\t},\n\t\t\t\tparams: params,\n\t\t\t\tlock: [parent]\n\t\t\t});","this":"dojo.widget.TreeRPCController"}}},"dojo.widget.TreeRPCController.sync":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""}},"src":"\t\t\t\/\/ where from\n\t\t\tchild: this.getInfo(child),\n\t\t\tchildTree: this.getInfo(child.tree),\n\t\t\t\/\/ where to\n\t\t\tnewParent: this.getInfo(newParent),\n\t\t\tnewParentTree: this.getInfo(newParent.tree),\n\t\t\tnewIndex: index\n\t\t};\n\n\t\tvar success;\n\n\t\tthis.runRPC({\t\t\n\t\t\turl: this.getRPCUrl('move'),\n\t\t\t\/* I hitch to get this.loadOkHandler *\/\n\t\t\tload: function(response){\n\t\t\t\tsuccess = this.doMoveProcessResponse(response, child, newParent, index) ;\n\t\t\t},\n\t\t\tsync: true,\n\t\t\tlock: [child, newParent],\n\t\t\tparams: params\n\t\t});\n\n\n\t\treturn success;","this":"dojo.widget.TreeRPCController"}}},"dojo.widget.TreeRPCController.lock":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"output":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\t\tvar params = {\n\t\t\t\ttree: this.getInfo(parent.tree),\n\t\t\t\tparent: this.getInfo(parent),\n\t\t\t\tindex: index,\n\t\t\t\tdata: output\n\t\t\t}\n\n\t\t\tthis.runRPC({\n\t\t\t\turl: this.getRPCUrl('createChild'),\n\t\t\t\tload: function(response) {\n\t\t\t\t\t\/\/ suggested data is dead, fresh data from server is used\n\t\t\t\t\tthis.doCreateChildProcessResponse( response, parent, index, callObj, callFunc) \n\t\t\t\t},\n\t\t\t\tparams: params,\n\t\t\t\tlock: [parent]\n\t\t\t});","this":"dojo.widget.TreeRPCController"}}},"dojo.widget.TreeRPCController.params":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"output":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\t\tvar params = {\n\t\t\t\ttree: this.getInfo(parent.tree),\n\t\t\t\tparent: this.getInfo(parent),\n\t\t\t\tindex: index,\n\t\t\t\tdata: output\n\t\t\t}\n\n\t\t\tthis.runRPC({\n\t\t\t\turl: this.getRPCUrl('createChild'),\n\t\t\t\tload: function(response) {\n\t\t\t\t\t\/\/ suggested data is dead, fresh data from server is used\n\t\t\t\t\tthis.doCreateChildProcessResponse( response, parent, index, callObj, callFunc) \n\t\t\t\t},\n\t\t\t\tparams: params,\n\t\t\t\tlock: [parent]\n\t\t\t});","this":"dojo.widget.TreeRPCController"}}},"dojo.widget.TreeRPCController.doMoveProcessResponse":{"_":{"meta":{"summary":"","parameters":{"response":{"type":""},"child":{"type":""},"newParent":{"type":""},"index":{"type":""}},"src":"\t\tif(!dojo.lang.isUndefined(response.error)){\n\t\t\tthis.RPCErrorHandler(\"server\", response.error);\n\t\t\treturn false;\n\t\t}\n\n\t\tvar args = [child, newParent, index];\n\t\treturn dojo.widget.TreeLoadingController.prototype.doMove.apply(this, args);","this":"dojo.widget.TreeRPCController"}}},"dojo.widget.TreeRPCController.doRemoveNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\tvar params = {\n\t\t\tnode: this.getInfo(node),\n\t\t\ttree: this.getInfo(node.tree)\n\t\t}\n\n\t\tthis.runRPC({\n\t\t\t\turl: this.getRPCUrl('removeNode'),\n\t\t\t\t\/* I hitch to get this.loadOkHandler *\/\n\t\t\t\tload: function(response){\n\t\t\t\t\tthis.doRemoveNodeProcessResponse(response, node, callObj, callFunc) \n\t\t\t\t},\n\t\t\t\tparams: params,\n\t\t\t\tlock: [node]\n\t\t});","this":"dojo.widget.TreeRPCController"}}},"dojo.widget.TreeRPCController.node":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\tvar params = {\n\t\t\tnode: this.getInfo(node),\n\t\t\ttree: this.getInfo(node.tree)\n\t\t}\n\n\t\tthis.runRPC({\n\t\t\t\turl: this.getRPCUrl('removeNode'),\n\t\t\t\t\/* I hitch to get this.loadOkHandler *\/\n\t\t\t\tload: function(response){\n\t\t\t\t\tthis.doRemoveNodeProcessResponse(response, node, callObj, callFunc) \n\t\t\t\t},\n\t\t\t\tparams: params,\n\t\t\t\tlock: [node]\n\t\t});","this":"dojo.widget.TreeRPCController"}}},"dojo.widget.TreeRPCController.tree":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"output":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\t\tvar params = {\n\t\t\t\ttree: this.getInfo(parent.tree),\n\t\t\t\tparent: this.getInfo(parent),\n\t\t\t\tindex: index,\n\t\t\t\tdata: output\n\t\t\t}\n\n\t\t\tthis.runRPC({\n\t\t\t\turl: this.getRPCUrl('createChild'),\n\t\t\t\tload: function(response) {\n\t\t\t\t\t\/\/ suggested data is dead, fresh data from server is used\n\t\t\t\t\tthis.doCreateChildProcessResponse( response, parent, index, callObj, callFunc) \n\t\t\t\t},\n\t\t\t\tparams: params,\n\t\t\t\tlock: [parent]\n\t\t\t});","this":"dojo.widget.TreeRPCController"}}},"dojo.widget.TreeRPCController.doRemoveNodeProcessResponse":{"_":{"meta":{"summary":"","parameters":{"response":{"type":""},"node":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\tif(!dojo.lang.isUndefined(response.error)){\n\t\t\tthis.RPCErrorHandler(\"server\", response.error);\n\t\t\treturn false;\n\t\t}\n\n\t\tif(!response){ return false; }\n\n\t\tif(response == true){\n\t\t\t\/* change parent succeeded *\/\n\t\t\tvar args = [ node, callObj, callFunc ];\n\t\t\tdojo.widget.TreeLoadingController.prototype.doRemoveNode.apply(this, args);\n\n\t\t\treturn;\n\t\t}else if(dojo.lang.isObject(response)){\n\t\t\tdojo.raise(response.error);\n\t\t}else{\n\t\t\tdojo.raise(\"Invalid response \"+response)\n\t\t}","this":"dojo.widget.TreeRPCController"}}},"dojo.widget.TreeRPCController.doCreateChild":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"output":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\t\tvar params = {\n\t\t\t\ttree: this.getInfo(parent.tree),\n\t\t\t\tparent: this.getInfo(parent),\n\t\t\t\tindex: index,\n\t\t\t\tdata: output\n\t\t\t}\n\n\t\t\tthis.runRPC({\n\t\t\t\turl: this.getRPCUrl('createChild'),\n\t\t\t\tload: function(response) {\n\t\t\t\t\t\/\/ suggested data is dead, fresh data from server is used\n\t\t\t\t\tthis.doCreateChildProcessResponse( response, parent, index, callObj, callFunc) \n\t\t\t\t},\n\t\t\t\tparams: params,\n\t\t\t\tlock: [parent]\n\t\t\t});","this":"dojo.widget.TreeRPCController"}}},"dojo.widget.TreeRPCController.parent":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"output":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\t\tvar params = {\n\t\t\t\ttree: this.getInfo(parent.tree),\n\t\t\t\tparent: this.getInfo(parent),\n\t\t\t\tindex: index,\n\t\t\t\tdata: output\n\t\t\t}\n\n\t\t\tthis.runRPC({\n\t\t\t\turl: this.getRPCUrl('createChild'),\n\t\t\t\tload: function(response) {\n\t\t\t\t\t\/\/ suggested data is dead, fresh data from server is used\n\t\t\t\t\tthis.doCreateChildProcessResponse( response, parent, index, callObj, callFunc) \n\t\t\t\t},\n\t\t\t\tparams: params,\n\t\t\t\tlock: [parent]\n\t\t\t});","this":"dojo.widget.TreeRPCController"}}},"dojo.widget.TreeRPCController.index":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"output":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\t\tvar params = {\n\t\t\t\ttree: this.getInfo(parent.tree),\n\t\t\t\tparent: this.getInfo(parent),\n\t\t\t\tindex: index,\n\t\t\t\tdata: output\n\t\t\t}\n\n\t\t\tthis.runRPC({\n\t\t\t\turl: this.getRPCUrl('createChild'),\n\t\t\t\tload: function(response) {\n\t\t\t\t\t\/\/ suggested data is dead, fresh data from server is used\n\t\t\t\t\tthis.doCreateChildProcessResponse( response, parent, index, callObj, callFunc) \n\t\t\t\t},\n\t\t\t\tparams: params,\n\t\t\t\tlock: [parent]\n\t\t\t});","this":"dojo.widget.TreeRPCController"}}},"dojo.widget.TreeRPCController.data":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"output":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\t\tvar params = {\n\t\t\t\ttree: this.getInfo(parent.tree),\n\t\t\t\tparent: this.getInfo(parent),\n\t\t\t\tindex: index,\n\t\t\t\tdata: output\n\t\t\t}\n\n\t\t\tthis.runRPC({\n\t\t\t\turl: this.getRPCUrl('createChild'),\n\t\t\t\tload: function(response) {\n\t\t\t\t\t\/\/ suggested data is dead, fresh data from server is used\n\t\t\t\t\tthis.doCreateChildProcessResponse( response, parent, index, callObj, callFunc) \n\t\t\t\t},\n\t\t\t\tparams: params,\n\t\t\t\tlock: [parent]\n\t\t\t});","this":"dojo.widget.TreeRPCController"}}},"dojo.widget.TreeRPCController.doCreateChildProcessResponse":{"_":{"meta":{"summary":"","parameters":{"response":{"type":""},"parent":{"type":""},"index":{"type":""},"callObj":{"type":""},"callFunc":{"type":""}},"src":"\t\tif(!dojo.lang.isUndefined(response.error)){\n\t\t\tthis.RPCErrorHandler(\"server\",response.error);\n\t\t\treturn false;\n\t\t}\n\n\t\tif(!dojo.lang.isObject(response)){\n\t\t\tdojo.raise(\"Invalid result \"+response)\n\t\t}\n\n\t\tvar args = [parent, index, response, callObj, callFunc];\n\t\t\n\t\tdojo.widget.TreeLoadingController.prototype.doCreateChild.apply(this, args);","this":"dojo.widget.TreeRPCController"}}}}}},"dojo.widget.TreeRpcControllerV3":{"meta":{"requires":{"common":["dojo.event.*","dojo.json","dojo.io.*","dojo.widget.TreeLoadingControllerV3"]},"methods":{"dojo.widget.TreeRpcControllerV3":{"_":{"meta":{"summary":"","src":"\tdojo.widget.TreeLoadingControllerV3.call(this);","inherits":["dojo.widget.TreeLoadingControllerV3"],"protovariables":{"widgetType":"","extraRpcOnEdit":""}}}},"dojo.widget.TreeRpcControllerV3.doMove":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""},"sync":{"type":""}},"src":"\t\t\t\/\/ where from\n\t\t\tchild: this.getInfo(child),\n\t\t\tchildTree: this.getInfo(child.tree),\n\t\t\t\/\/ where to\n\t\t\tnewParent: this.getInfo(newParent),\n\t\t\tnewParentTree: this.getInfo(newParent.tree),\n\t\t\tnewIndex: index\n\t\t};\n\n\n\t\tvar deferred = this.runRpc({\t\t\n\t\t\turl: this.getRpcUrl('move'),\n\t\t\tsync: sync,\t\t\t\n\t\t\tparams: params\n\t\t});\n\n\t\tvar _this = this;\n\t\tvar args = arguments;\t\n\t\t\n\t\t\/\/deferred.addCallback(function(res) { dojo.debug(\"doMove fired \"+res); return res});\n\t\t\n\t\tdeferred.addCallback(function() {\t\t\t\n\t\t\tdojo.widget.TreeBasicControllerV3.prototype.doMove.apply(_this,args);\n\t\t});\n\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.child":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""},"sync":{"type":""},"deep":{"type":""}},"src":"\t\tvar params = {\n\t\t\tchild: this.getInfo(child),\n\t\t\tnewParent: this.getInfo(newParent),\n\t\t\tindex: index,\n\t\t\tdeep: deep ? true : false, \/\/ undefined -> false\n\t\t\ttree: this.getInfo(child.tree)\n\t\t}\n\t\t\n\t\t\n\t\tvar deferred = this.runRpc({\n\t\t\turl: this.getRpcUrl('clone'),\n\t\t\tsync: sync,\n\t\t\tparams: params\n\t\t});\n\t\t\n\t\tvar _this = this;\n\t\tvar args = arguments;\n\t\t\n\t\tdeferred.addCallback(function() {\t\t\t\n\t\t\tdojo.widget.TreeBasicControllerV3.prototype.doClone.apply(_this,args);\n\t\t});\n\t\t\n\t\t\t\t\t\t\n\t\treturn deferred;\t","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.childTree":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""},"sync":{"type":""}},"src":"\t\t\t\/\/ where from\n\t\t\tchild: this.getInfo(child),\n\t\t\tchildTree: this.getInfo(child.tree),\n\t\t\t\/\/ where to\n\t\t\tnewParent: this.getInfo(newParent),\n\t\t\tnewParentTree: this.getInfo(newParent.tree),\n\t\t\tnewIndex: index\n\t\t};\n\n\n\t\tvar deferred = this.runRpc({\t\t\n\t\t\turl: this.getRpcUrl('move'),\n\t\t\tsync: sync,\t\t\t\n\t\t\tparams: params\n\t\t});\n\n\t\tvar _this = this;\n\t\tvar args = arguments;\t\n\t\t\n\t\t\/\/deferred.addCallback(function(res) { dojo.debug(\"doMove fired \"+res); return res});\n\t\t\n\t\tdeferred.addCallback(function() {\t\t\t\n\t\t\tdojo.widget.TreeBasicControllerV3.prototype.doMove.apply(_this,args);\n\t\t});\n\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.newParent":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""},"sync":{"type":""},"deep":{"type":""}},"src":"\t\tvar params = {\n\t\t\tchild: this.getInfo(child),\n\t\t\tnewParent: this.getInfo(newParent),\n\t\t\tindex: index,\n\t\t\tdeep: deep ? true : false, \/\/ undefined -> false\n\t\t\ttree: this.getInfo(child.tree)\n\t\t}\n\t\t\n\t\t\n\t\tvar deferred = this.runRpc({\n\t\t\turl: this.getRpcUrl('clone'),\n\t\t\tsync: sync,\n\t\t\tparams: params\n\t\t});\n\t\t\n\t\tvar _this = this;\n\t\tvar args = arguments;\n\t\t\n\t\tdeferred.addCallback(function() {\t\t\t\n\t\t\tdojo.widget.TreeBasicControllerV3.prototype.doClone.apply(_this,args);\n\t\t});\n\t\t\n\t\t\t\t\t\t\n\t\treturn deferred;\t","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.newParentTree":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""},"sync":{"type":""}},"src":"\t\t\t\/\/ where from\n\t\t\tchild: this.getInfo(child),\n\t\t\tchildTree: this.getInfo(child.tree),\n\t\t\t\/\/ where to\n\t\t\tnewParent: this.getInfo(newParent),\n\t\t\tnewParentTree: this.getInfo(newParent.tree),\n\t\t\tnewIndex: index\n\t\t};\n\n\n\t\tvar deferred = this.runRpc({\t\t\n\t\t\turl: this.getRpcUrl('move'),\n\t\t\tsync: sync,\t\t\t\n\t\t\tparams: params\n\t\t});\n\n\t\tvar _this = this;\n\t\tvar args = arguments;\t\n\t\t\n\t\t\/\/deferred.addCallback(function(res) { dojo.debug(\"doMove fired \"+res); return res});\n\t\t\n\t\tdeferred.addCallback(function() {\t\t\t\n\t\t\tdojo.widget.TreeBasicControllerV3.prototype.doMove.apply(_this,args);\n\t\t});\n\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.newIndex":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""},"sync":{"type":""}},"src":"\t\t\t\/\/ where from\n\t\t\tchild: this.getInfo(child),\n\t\t\tchildTree: this.getInfo(child.tree),\n\t\t\t\/\/ where to\n\t\t\tnewParent: this.getInfo(newParent),\n\t\t\tnewParentTree: this.getInfo(newParent.tree),\n\t\t\tnewIndex: index\n\t\t};\n\n\n\t\tvar deferred = this.runRpc({\t\t\n\t\t\turl: this.getRpcUrl('move'),\n\t\t\tsync: sync,\t\t\t\n\t\t\tparams: params\n\t\t});\n\n\t\tvar _this = this;\n\t\tvar args = arguments;\t\n\t\t\n\t\t\/\/deferred.addCallback(function(res) { dojo.debug(\"doMove fired \"+res); return res});\n\t\t\n\t\tdeferred.addCallback(function() {\t\t\t\n\t\t\tdojo.widget.TreeBasicControllerV3.prototype.doMove.apply(_this,args);\n\t\t});\n\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.url":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""},"sync":{"type":""},"node":{"type":""},"newContent":{"type":""},"deep":{"type":""}},"src":"\t\tvar params = {\n\t\t\tchild: this.getInfo(child),\n\t\t\tnewParent: this.getInfo(newParent),\n\t\t\tindex: index,\n\t\t\tdeep: deep ? true : false, \/\/ undefined -> false\n\t\t\ttree: this.getInfo(child.tree)\n\t\t}\n\t\t\n\t\t\n\t\tvar deferred = this.runRpc({\n\t\t\turl: this.getRpcUrl('clone'),\n\t\t\tsync: sync,\n\t\t\tparams: params\n\t\t});\n\t\t\n\t\tvar _this = this;\n\t\tvar args = arguments;\n\t\t\n\t\tdeferred.addCallback(function() {\t\t\t\n\t\t\tdojo.widget.TreeBasicControllerV3.prototype.doClone.apply(_this,args);\n\t\t});\n\t\t\n\t\t\t\t\t\t\n\t\treturn deferred;\t","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.sync":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""},"sync":{"type":""},"node":{"type":""},"newContent":{"type":""},"deep":{"type":""}},"src":"\t\tvar params = {\n\t\t\tchild: this.getInfo(child),\n\t\t\tnewParent: this.getInfo(newParent),\n\t\t\tindex: index,\n\t\t\tdeep: deep ? true : false, \/\/ undefined -> false\n\t\t\ttree: this.getInfo(child.tree)\n\t\t}\n\t\t\n\t\t\n\t\tvar deferred = this.runRpc({\n\t\t\turl: this.getRpcUrl('clone'),\n\t\t\tsync: sync,\n\t\t\tparams: params\n\t\t});\n\t\t\n\t\tvar _this = this;\n\t\tvar args = arguments;\n\t\t\n\t\tdeferred.addCallback(function() {\t\t\t\n\t\t\tdojo.widget.TreeBasicControllerV3.prototype.doClone.apply(_this,args);\n\t\t});\n\t\t\n\t\t\t\t\t\t\n\t\treturn deferred;\t","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.params":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""},"sync":{"type":""},"node":{"type":""},"newContent":{"type":""},"deep":{"type":""}},"src":"\t\tvar params = {\n\t\t\tchild: this.getInfo(child),\n\t\t\tnewParent: this.getInfo(newParent),\n\t\t\tindex: index,\n\t\t\tdeep: deep ? true : false, \/\/ undefined -> false\n\t\t\ttree: this.getInfo(child.tree)\n\t\t}\n\t\t\n\t\t\n\t\tvar deferred = this.runRpc({\n\t\t\turl: this.getRpcUrl('clone'),\n\t\t\tsync: sync,\n\t\t\tparams: params\n\t\t});\n\t\t\n\t\tvar _this = this;\n\t\tvar args = arguments;\n\t\t\n\t\tdeferred.addCallback(function() {\t\t\t\n\t\t\tdojo.widget.TreeBasicControllerV3.prototype.doClone.apply(_this,args);\n\t\t});\n\t\t\n\t\t\t\t\t\t\n\t\treturn deferred;\t","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.prepareDetach":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""}},"src":"\t\tvar deferred = this.startProcessing(node);\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.finalizeDetach":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tthis.finishProcessing(node);","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.doDetach":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""}},"src":"\t\tvar params = {\n\t\t\tnode: this.getInfo(node),\n\t\t\ttree: this.getInfo(node.tree)\n\t\t}\n\n\t\tvar deferred = this.runRpc({\n\t\t\turl: this.getRpcUrl('detach'),\n\t\t\tsync: sync,\n\t\t\tparams: params\t\t\t\n\t\t});\n\t\t\n\t\t\n\t\tvar _this = this;\n\t\tvar args = arguments;\n\t\t\n\t\tdeferred.addCallback(function() {\t\t\t\n\t\t\tdojo.widget.TreeBasicControllerV3.prototype.doDetach.apply(_this,args);\n\t\t});\n\t\t\n\t\t\t\t\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.node":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""},"newContent":{"type":""}},"src":"\t\tvar params = {\n\t\t\tnode: this.getInfo(node),\n\t\t\ttree: this.getInfo(node.tree)\n\t\t}\n\n\t\tvar deferred = this.runRpc({\n\t\t\turl: this.getRpcUrl('destroy'),\n\t\t\tsync: sync,\n\t\t\tparams: params\t\t\t\n\t\t});\n\t\t\n\t\t\n\t\tvar _this = this;\n\t\tvar args = arguments;\n\t\t\n\t\tdeferred.addCallback(function() {\t\t\t\n\t\t\tdojo.widget.TreeBasicControllerV3.prototype.doDestroy.apply(_this,args);\n\t\t});\n\t\t\n\t\t\t\t\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.tree":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""},"newContent":{"type":""},"child":{"type":""},"newParent":{"type":""},"index":{"type":""},"deep":{"type":""}},"src":"\t\tvar params = {\n\t\t\tchild: this.getInfo(child),\n\t\t\tnewParent: this.getInfo(newParent),\n\t\t\tindex: index,\n\t\t\tdeep: deep ? true : false, \/\/ undefined -> false\n\t\t\ttree: this.getInfo(child.tree)\n\t\t}\n\t\t\n\t\t\n\t\tvar deferred = this.runRpc({\n\t\t\turl: this.getRpcUrl('clone'),\n\t\t\tsync: sync,\n\t\t\tparams: params\n\t\t});\n\t\t\n\t\tvar _this = this;\n\t\tvar args = arguments;\n\t\t\n\t\tdeferred.addCallback(function() {\t\t\t\n\t\t\tdojo.widget.TreeBasicControllerV3.prototype.doClone.apply(_this,args);\n\t\t});\n\t\t\n\t\t\t\t\t\t\n\t\treturn deferred;\t","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.requestEditConfirmation":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"action":{"type":""},"sync":{"type":""}},"src":"\t\tif (!this.extraRpcOnEdit) {\t\t\t\n\t\t\treturn dojo.Deferred.prototype.makeCalled();\n\t\t}\n\t\n\t\t\/\/dojo.debug(\"requestEditConfirmation \"+node+\" \"+action);\n\t\t\n\t\tvar _this = this;\n\t\n\t\tvar deferred = this.startProcessing(node);\n\t\t\t\n\t\t\/\/dojo.debug(\"startProcessing \"+node);\n\t\t\n\t\tvar params = {\n\t\t\tnode: this.getInfo(node),\n\t\t\ttree: this.getInfo(node.tree)\n\t\t}\n\t\t\n\t\tdeferred.addCallback(function() {\n\t\t\t\/\/dojo.debug(\"add action on requestEditConfirmation \"+action);\n\t\t\treturn _this.runRpc({\n\t\t\t\turl: _this.getRpcUrl(action),\n\t\t\t\tsync: sync,\n\t\t\t\tparams: params\t\t\t\n\t\t\t});\n\t\t});\n\t\t\n\t\t\n\t\tdeferred.addBoth(function(r) {\n\t\t\t\/\/dojo.debug(\"finish rpc with \"+r);\n\t\t\t_this.finishProcessing(node);\n\t\t\treturn r;\n\t\t});\n\t\n\t\treturn deferred;","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.editLabelSave":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"newContent":{"type":""},"sync":{"type":""}},"src":"\t\tvar deferred = this.startProcessing(node);\n\t\t\t\t\t\t\n\t\tvar _this = this;\n\t\t\n\t\tvar params = {\n\t\t\tnode: this.getInfo(node),\n\t\t\ttree: this.getInfo(node.tree),\n\t\t\tnewContent: newContent\n\t\t}\n\t\t\n\t\n\t\tdeferred.addCallback(function() {\n\t\t\treturn _this.runRpc({\n\t\t\t\turl: _this.getRpcUrl('editLabelSave'),\n\t\t\t\tsync: sync,\n\t\t\t\tparams: params\t\t\t\n\t\t\t});\n\t\t});\n\t\t\n\t\t\n\t\tdeferred.addBoth(function(r) {\n\t\t\t_this.finishProcessing(node);\n\t\t\treturn r;\n\t\t});\n\t\n\t\treturn deferred;","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.newContent":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"newContent":{"type":""},"sync":{"type":""}},"src":"\t\tvar deferred = this.startProcessing(node);\n\t\t\t\t\t\t\n\t\tvar _this = this;\n\t\t\n\t\tvar params = {\n\t\t\tnode: this.getInfo(node),\n\t\t\ttree: this.getInfo(node.tree),\n\t\t\tnewContent: newContent\n\t\t}\n\t\t\n\t\n\t\tdeferred.addCallback(function() {\n\t\t\treturn _this.runRpc({\n\t\t\t\turl: _this.getRpcUrl('editLabelSave'),\n\t\t\t\tsync: sync,\n\t\t\t\tparams: params\t\t\t\n\t\t\t});\n\t\t});\n\t\t\n\t\t\n\t\tdeferred.addBoth(function(r) {\n\t\t\t_this.finishProcessing(node);\n\t\t\treturn r;\n\t\t});\n\t\n\t\treturn deferred;","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.editLabelStart":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""}},"src":"\t\tif (!this.canEditLabel(node)) {\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tvar _this = this;\n\t\t\n\t\tif (!this.editor.isClosed()) {\n\t\t\t\/\/dojo.debug(\"editLabelStart editor open\");\n\t\t\tvar deferred = this.editLabelFinish(this.editor.saveOnBlur, sync);\n\t\t\tdeferred.addCallback(function() {\n\t\t\t\treturn _this.editLabelStart(node, sync);\n\t\t\t});\n\t\t\treturn deferred;\n\t\t}\n\t\t\t\t\t\t\n\t\t\/\/dojo.debug(\"editLabelStart closed, request\");\n\t\tvar deferred = this.requestEditConfirmation(node, 'editLabelStart', sync);\n\t\t\n\t\tdeferred.addCallback(function() {\n\t\t\t\/\/dojo.debug(\"start edit\");\n\t\t\t_this.doEditLabelStart(node);\n\t\t});\n\t\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.editLabelFinish":{"_":{"meta":{"summary":"","parameters":{"save":{"type":""},"sync":{"type":""}},"src":"\t\tvar _this = this;\n\t\t\n\t\tvar node = this.editor.node;\n\t\t\n\t\tvar deferred = dojo.Deferred.prototype.makeCalled();\n\t\t\n\t\tif (!save && !node.isPhantom) {\n\t\t\tdeferred = this.requestEditConfirmation(this.editor.node,'editLabelFinishCancel', sync);\n\t\t}\n\t\t\n\t\tif (save) {\n\t\t\tif (node.isPhantom) {\n\t\t\t\tdeferred = this.sendCreateChildRequest(\n\t\t\t\t\tnode.parent,\n\t\t\t\t\tnode.getParentIndex(),\n\t\t\t\t\t{title:this.editor.getContents()},\n\t\t\t\t\tsync\n\t\t\t\t);\n\t\t\t} else {\t\t\t\t\n\t\t\t\t\/\/ this deferred has new information from server\n\t\t\t\tdeferred = this.editLabelSave(node, this.editor.getContents(), sync);\n\t\t\t}\n\t\t}\n\t\t\n\t\tdeferred.addCallback(function(server_data) {\t\t\t\n\t\t\t_this.doEditLabelFinish(save, server_data);\n\t\t});\n\t\t\n\t\tdeferred.addErrback(function(r) {\n\t\t\t\/\/dojo.debug(\"Error occured\");\n\t\t\t\/\/dojo.debugShallow(r);\n\t\t\t_this.doEditLabelFinish(false);\n\t\t\treturn false;\n\t\t});\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.title":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"sync":{"type":""}},"src":"\t\tvar data = {title:parent.tree.defaultChildTitle};\n\t\t\n\t\tif (!this.canCreateChild(parent, index, data)) {\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\t\/* close editor first *\/\n\t\tif (!this.editor.isClosed()) {\n\t\t\t\/\/dojo.debug(\"editLabelStart editor open\");\n\t\t\tvar deferred = this.editLabelFinish(this.editor.saveOnBlur, sync);\n\t\t\tdeferred.addCallback(function() {\n\t\t\t\treturn _this.createAndEdit(parent, index, sync);\n\t\t\t});\n\t\t\treturn deferred;\n\t\t}\n\t\t\t\n\t\tvar _this = this;\n\t\t\n\t\t\/* load parent and create child*\/\n\t\tvar deferred = this.prepareCreateChild(parent, index, data, sync);\n\t\t\n\t\t\n\t\tdeferred.addCallback(function() {\n\t\t\tvar child = _this.makeDefaultNode(parent, index);\t\t\t\n\t\t\tchild.isPhantom = true;\n\t\t\treturn child;\n\t\t});\n\t\t\n\t\t\n\t\tdeferred.addBoth(function(r) {\n\t\t\t_this.finalizeCreateChild(parent, index, data, sync);\n\t\t\treturn r;\n\t\t});\n\t\t\n\t\t\/* expand parent *\/\n\t\tdeferred.addCallback(function(child) {\n\t\t\tvar d = _this.exposeCreateChild(parent, index, data, sync);\n\t\t\td.addCallback(function() { return child });\n\t\t\treturn d;\n\t\t});\n\t\t\n\t\t\n\t\tdeferred.addCallback(function(child) {\n\t\t\t\/\/dojo.debug(\"start edit\");\n\t\t\t_this.doEditLabelStart(child);\n\t\t\treturn child;\n\t\t});\n\t\t\n\t\t\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.createAndEdit":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"sync":{"type":""}},"src":"\t\tvar data = {title:parent.tree.defaultChildTitle};\n\t\t\n\t\tif (!this.canCreateChild(parent, index, data)) {\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\t\/* close editor first *\/\n\t\tif (!this.editor.isClosed()) {\n\t\t\t\/\/dojo.debug(\"editLabelStart editor open\");\n\t\t\tvar deferred = this.editLabelFinish(this.editor.saveOnBlur, sync);\n\t\t\tdeferred.addCallback(function() {\n\t\t\t\treturn _this.createAndEdit(parent, index, sync);\n\t\t\t});\n\t\t\treturn deferred;\n\t\t}\n\t\t\t\n\t\tvar _this = this;\n\t\t\n\t\t\/* load parent and create child*\/\n\t\tvar deferred = this.prepareCreateChild(parent, index, data, sync);\n\t\t\n\t\t\n\t\tdeferred.addCallback(function() {\n\t\t\tvar child = _this.makeDefaultNode(parent, index);\t\t\t\n\t\t\tchild.isPhantom = true;\n\t\t\treturn child;\n\t\t});\n\t\t\n\t\t\n\t\tdeferred.addBoth(function(r) {\n\t\t\t_this.finalizeCreateChild(parent, index, data, sync);\n\t\t\treturn r;\n\t\t});\n\t\t\n\t\t\/* expand parent *\/\n\t\tdeferred.addCallback(function(child) {\n\t\t\tvar d = _this.exposeCreateChild(parent, index, data, sync);\n\t\t\td.addCallback(function() { return child });\n\t\t\treturn d;\n\t\t});\n\t\t\n\t\t\n\t\tdeferred.addCallback(function(child) {\n\t\t\t\/\/dojo.debug(\"start edit\");\n\t\t\t_this.doEditLabelStart(child);\n\t\t\treturn child;\n\t\t});\n\t\t\n\t\t\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.prepareDestroy":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""}},"src":"\t\treturn deferred;","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.finalizeDestroy":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tthis.finishProcessing(node);","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.doDestroy":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"sync":{"type":""}},"src":"\t\tvar params = {\n\t\t\tnode: this.getInfo(node),\n\t\t\ttree: this.getInfo(node.tree)\n\t\t}\n\n\t\tvar deferred = this.runRpc({\n\t\t\turl: this.getRpcUrl('destroy'),\n\t\t\tsync: sync,\n\t\t\tparams: params\t\t\t\n\t\t});\n\t\t\n\t\t\n\t\tvar _this = this;\n\t\tvar args = arguments;\n\t\t\n\t\tdeferred.addCallback(function() {\t\t\t\n\t\t\tdojo.widget.TreeBasicControllerV3.prototype.doDestroy.apply(_this,args);\n\t\t});\n\t\t\n\t\t\t\t\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.sendCreateChildRequest":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"data":{"type":""},"sync":{"type":""}},"src":"\t\tvar params = {\n\t\t\ttree: this.getInfo(parent.tree),\n\t\t\tparent: this.getInfo(parent),\n\t\t\tindex: index,\n\t\t\tdata: data\n\t\t}\n\n\t\tvar deferred = this.runRpc({\n\t\t\turl: this.getRpcUrl('createChild'),\n\t\t\tsync: sync,\n\t\t\tparams: params\n\t\t});\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.parent":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"data":{"type":""},"sync":{"type":""}},"src":"\t\tvar params = {\n\t\t\ttree: this.getInfo(parent.tree),\n\t\t\tparent: this.getInfo(parent),\n\t\t\tindex: index,\n\t\t\tdata: data\n\t\t}\n\n\t\tvar deferred = this.runRpc({\n\t\t\turl: this.getRpcUrl('createChild'),\n\t\t\tsync: sync,\n\t\t\tparams: params\n\t\t});\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.index":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""},"deep":{"type":""},"sync":{"type":""}},"src":"\t\tvar params = {\n\t\t\tchild: this.getInfo(child),\n\t\t\tnewParent: this.getInfo(newParent),\n\t\t\tindex: index,\n\t\t\tdeep: deep ? true : false, \/\/ undefined -> false\n\t\t\ttree: this.getInfo(child.tree)\n\t\t}\n\t\t\n\t\t\n\t\tvar deferred = this.runRpc({\n\t\t\turl: this.getRpcUrl('clone'),\n\t\t\tsync: sync,\n\t\t\tparams: params\n\t\t});\n\t\t\n\t\tvar _this = this;\n\t\tvar args = arguments;\n\t\t\n\t\tdeferred.addCallback(function() {\t\t\t\n\t\t\tdojo.widget.TreeBasicControllerV3.prototype.doClone.apply(_this,args);\n\t\t});\n\t\t\n\t\t\t\t\t\t\n\t\treturn deferred;\t","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.data":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"data":{"type":""},"sync":{"type":""}},"src":"\t\tvar params = {\n\t\t\ttree: this.getInfo(parent.tree),\n\t\t\tparent: this.getInfo(parent),\n\t\t\tindex: index,\n\t\t\tdata: data\n\t\t}\n\n\t\tvar deferred = this.runRpc({\n\t\t\turl: this.getRpcUrl('createChild'),\n\t\t\tsync: sync,\n\t\t\tparams: params\n\t\t});\n\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.doCreateChild":{"_":{"meta":{"summary":"","parameters":{"parent":{"type":""},"index":{"type":""},"data":{"type":""},"sync":{"type":""}},"src":"\t\tif (dojo.lang.isUndefined(data.title)) {\n\t\t\tdata.title = parent.tree.defaultChildTitle;\n\t\t}\n\n\t\tvar deferred = this.sendCreateChildRequest(parent,index,data,sync);\n\t\t\n\t\tvar _this = this;\n\t\tvar args = arguments;\n\t\t\n\t\t\n\t\tdeferred.addCallback(function(server_data) {\n\t\t\tdojo.lang.mixin(server_data, data); \/\/ add my data as less priority\n\t\t\t\/\/dojo.debug(\"Create \");\n\t\t\t\/\/dojo.debug(server_data);\n\t\t\treturn dojo.widget.TreeBasicControllerV3.prototype.doCreateChild.call(_this,parent,index,server_data);\n\t\t});\n\t\t\n\t\t\t\t\t\t\n\t\treturn deferred;","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.doClone":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""},"deep":{"type":""},"sync":{"type":""}},"src":"\t\tvar params = {\n\t\t\tchild: this.getInfo(child),\n\t\t\tnewParent: this.getInfo(newParent),\n\t\t\tindex: index,\n\t\t\tdeep: deep ? true : false, \/\/ undefined -> false\n\t\t\ttree: this.getInfo(child.tree)\n\t\t}\n\t\t\n\t\t\n\t\tvar deferred = this.runRpc({\n\t\t\turl: this.getRpcUrl('clone'),\n\t\t\tsync: sync,\n\t\t\tparams: params\n\t\t});\n\t\t\n\t\tvar _this = this;\n\t\tvar args = arguments;\n\t\t\n\t\tdeferred.addCallback(function() {\t\t\t\n\t\t\tdojo.widget.TreeBasicControllerV3.prototype.doClone.apply(_this,args);\n\t\t});\n\t\t\n\t\t\t\t\t\t\n\t\treturn deferred;\t","this":"dojo.widget.TreeRpcControllerV3"}}},"dojo.widget.TreeRpcControllerV3.deep":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""},"deep":{"type":""},"sync":{"type":""}},"src":"\t\tvar params = {\n\t\t\tchild: this.getInfo(child),\n\t\t\tnewParent: this.getInfo(newParent),\n\t\t\tindex: index,\n\t\t\tdeep: deep ? true : false, \/\/ undefined -> false\n\t\t\ttree: this.getInfo(child.tree)\n\t\t}\n\t\t\n\t\t\n\t\tvar deferred = this.runRpc({\n\t\t\turl: this.getRpcUrl('clone'),\n\t\t\tsync: sync,\n\t\t\tparams: params\n\t\t});\n\t\t\n\t\tvar _this = this;\n\t\tvar args = arguments;\n\t\t\n\t\tdeferred.addCallback(function() {\t\t\t\n\t\t\tdojo.widget.TreeBasicControllerV3.prototype.doClone.apply(_this,args);\n\t\t});\n\t\t\n\t\t\t\t\t\t\n\t\treturn deferred;\t","this":"dojo.widget.TreeRpcControllerV3"}}}}}},"dojo.widget.TreeSelector":{"meta":{"requires":{"common":["dojo.widget.HtmlWidget"]},"methods":{"dojo.widget.TreeSelector":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\n\n\tthis.eventNames = {};\n\n\tthis.listenedTrees = [];","this_variables":["eventNames","listenedTrees","selectedNode","selectedNode","selectedNode","selectedNode"],"inherits":["dojo.widget.HtmlWidget"],"protovariables":{"widgetType":"","selectedNode":"","dieWithTree":"","eventNamesDefault":""}}}},"dojo.widget.TreeSelector.initialize":{"_":{"meta":{"summary":"","src":"\t\tfor(name in this.eventNamesDefault) {\n\t\t\tif (dojo.lang.isUndefined(this.eventNames[name])) {\n\t\t\t\tthis.eventNames[name] = this.widgetId+\"\/\"+this.eventNamesDefault[name];\n\t\t\t}\n\t\t}","this":"dojo.widget.TreeSelector"}}},"dojo.widget.TreeSelector.destroy":{"_":{"meta":{"summary":"","src":"\t\tdojo.event.topic.publish(this.eventNames.destroy, { source: this } );\n\n\t\treturn dojo.widget.HtmlWidget.prototype.destroy.apply(this, arguments);","this":"dojo.widget.TreeSelector"}}},"dojo.widget.TreeSelector.source":{"_":{"meta":{"summary":"","src":"\t\tdojo.event.topic.publish(this.eventNames.destroy, { source: this } );\n\n\t\treturn dojo.widget.HtmlWidget.prototype.destroy.apply(this, arguments);","this":"dojo.widget.TreeSelector"}}},"dojo.widget.TreeSelector.listenTree":{"_":{"meta":{"summary":"","parameters":{"tree":{"type":""}},"src":"\t\tdojo.event.topic.subscribe(tree.eventNames.titleClick, this, \"select\");\n\t\tdojo.event.topic.subscribe(tree.eventNames.iconClick, this, \"select\");\n\t\tdojo.event.topic.subscribe(tree.eventNames.collapse, this, \"onCollapse\");\n\t\tdojo.event.topic.subscribe(tree.eventNames.moveFrom, this, \"onMoveFrom\");\n\t\tdojo.event.topic.subscribe(tree.eventNames.removeNode, this, \"onRemoveNode\");\n\t\tdojo.event.topic.subscribe(tree.eventNames.treeDestroy, this, \"onTreeDestroy\");\n\n\t\t\/* remember all my trees to deselect when element is movedFrom them *\/\n\t\tthis.listenedTrees.push(tree);","this":"dojo.widget.TreeSelector"}}},"dojo.widget.TreeSelector.unlistenTree":{"_":{"meta":{"summary":"","parameters":{"tree":{"type":""}},"src":"\t\tdojo.event.topic.unsubscribe(tree.eventNames.titleClick, this, \"select\");\n\t\tdojo.event.topic.unsubscribe(tree.eventNames.iconClick, this, \"select\");\n\t\tdojo.event.topic.unsubscribe(tree.eventNames.collapse, this, \"onCollapse\");\n\t\tdojo.event.topic.unsubscribe(tree.eventNames.moveFrom, this, \"onMoveFrom\");\n\t\tdojo.event.topic.unsubscribe(tree.eventNames.removeNode, this, \"onRemoveNode\");\n\t\tdojo.event.topic.unsubscribe(tree.eventNames.treeDestroy, this, \"onTreeDestroy\");\n\n\n\t\tfor(var i=0; i<this.listenedTrees.length; i++){\n           if(this.listenedTrees[i] === tree){\n                   this.listenedTrees.splice(i, 1);\n                   break;\n           }\n\t\t}","this":"dojo.widget.TreeSelector"}}},"dojo.widget.TreeSelector.onTreeDestroy":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tthis.unlistenTree(message.source);\n\n\t\tif (this.dieWithTree) {\n\t\t\t\/\/dojo.debug(\"Killing myself \"+this.widgetId);\n\t\t\tthis.destroy();\n\t\t\t\/\/dojo.debug(\"done\");\n\t\t}","this":"dojo.widget.TreeSelector"}}},"dojo.widget.TreeSelector.onCollapse":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tif (!this.selectedNode) return;\n\n\t\tvar node = message.source;\n\t\tvar parent = this.selectedNode.parent;\n\t\twhile (parent !== node && parent.isTreeNode) {\n\t\t\tparent = parent.parent;\n\t\t}\n\t\tif (parent.isTreeNode) {\n\t\t\tthis.deselect();\n\t\t}","this":"dojo.widget.TreeSelector"}}},"dojo.widget.TreeSelector.select":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tvar node = message.source;\n\t\tvar e = message.event;\n\n\t\tif (this.selectedNode === node) {\n\t\t\tif(e.ctrlKey || e.shiftKey || e.metaKey){\n\t\t\t\t\/\/ If the node is currently selected, and they select it again while holding\n\t\t\t\t\/\/ down a meta key, it deselects it\n\t\t\t\tthis.deselect();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdojo.event.topic.publish(this.eventNames.dblselect, { node: node });\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.selectedNode) {\n\t\t\tthis.deselect();\n\t\t}\n\n\t\tthis.doSelect(node);\n\n\t\tdojo.event.topic.publish(this.eventNames.select, {node: node} );","this":"dojo.widget.TreeSelector"}}},"dojo.widget.TreeSelector.node":{"_":{"meta":{"summary":"","src":"\t\tvar node = this.selectedNode;\n\n\t\tthis.selectedNode = null;\n\t\tnode.unMarkSelected();\n\t\tdojo.event.topic.publish(this.eventNames.deselect, {node: node} );","this":"dojo.widget.TreeSelector"}}},"dojo.widget.TreeSelector.onMoveFrom":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tif (message.child !== this.selectedNode) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!dojo.lang.inArray(this.listenedTrees, message.newTree)) {\n\t\t\tthis.deselect();\n\t\t}","this":"dojo.widget.TreeSelector"}}},"dojo.widget.TreeSelector.onRemoveNode":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tif (message.child !== this.selectedNode) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.deselect();","this":"dojo.widget.TreeSelector"}}},"dojo.widget.TreeSelector.doSelect":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tnode.markSelected();\n\n\t\tthis.selectedNode = node;","this":"dojo.widget.TreeSelector"}}},"dojo.widget.TreeSelector.deselect":{"_":{"meta":{"summary":"","src":"\t\tvar node = this.selectedNode;\n\n\t\tthis.selectedNode = null;\n\t\tnode.unMarkSelected();\n\t\tdojo.event.topic.publish(this.eventNames.deselect, {node: node} );","this":"dojo.widget.TreeSelector"}}}}}},"dojo.widget.TreeSelectorV3":{"meta":{"requires":{"common":["dojo.widget.HtmlWidget","dojo.widget.TreeCommon"]},"methods":{"dojo.widget.TreeSelectorV3":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\n\tthis.eventNames = {};\n\n\tthis.listenedTrees = {};\n\tthis.selectedNodes = [];","this_variables":["eventNames","listenedTrees","selectedNodes","onLabelClickHandler","onLabelDblClickHandler"],"inherits":["dojo.widget.HtmlWidget","dojo.widget.TreeCommon"],"protovariables":{"widgetType":"","listenTreeEvents":"","allowedMulti":"","eventNamesDefault":""}}}},"dojo.widget.TreeSelectorV3.listenNodeFilter":{"_":{"meta":{"summary":"","parameters":{"elem":{"type":""}},"src":"                                    return elem instanceof dojo.widget.Widget    ","this":"dojo.widget.TreeSelectorV3"}}},"dojo.widget.TreeSelectorV3.initialize":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""}},"src":"\t\tfor(name in this.eventNamesDefault) {\n\t\t\tif (dojo.lang.isUndefined(this.eventNames[name])) {\n\t\t\t\tthis.eventNames[name] = this.widgetId+\"\/\"+this.eventNamesDefault[name];\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.onLabelClickHandler =  dojo.lang.hitch(this, this.onLabelClick);\n\t\tthis.onLabelDblClickHandler =  dojo.lang.hitch(this, this.onLabelDblClick);","this":"dojo.widget.TreeSelectorV3"}}},"dojo.widget.TreeSelectorV3.listenNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tif (node.actionIsDisabled(node.actions.SELECT)) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t\/\/dojo.debug((new Error()).stack)\n\t\t\/\/\tdojo.debug(\"listen \"+node);\n\t\tdojo.event.browser.addListener(node.labelNode, \"onclick\", this.onLabelClickHandler);\n\t\tif (dojo.render.html.ie) {\n\t\t\tdojo.event.browser.addListener(node.labelNode, \"ondblclick\", this.onLabelDblClickHandler);\n\t\t}\n\t\tdojo.event.topic.publish(this.eventNames.listenNode, { node: node });","this":"dojo.widget.TreeSelectorV3"}}},"dojo.widget.TreeSelectorV3.node":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tvar index = dojo.lang.find(this.selectedNodes, node, true);\n\t\tif (index < 0) {\n\t\t\t\/\/dojo.debug(\"not selected\");\n\t\t\treturn; \/\/ not selected\n\t\t}\n\t\t\n\t\t\/\/dojo.debug(\"deselect \"+node);\n\t\t\n\t\t\n\t\tthis.selectedNodes.splice(index, 1);\n\t\tdojo.event.topic.publish(this.eventNames.deselect, {node: node} );\n\t\t\/\/dojo.debug(\"deselect\");","returns":"not selected","this":"dojo.widget.TreeSelectorV3"}}},"dojo.widget.TreeSelectorV3.unlistenNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tif (node.actionIsDisabled(node.actions.SELECT)) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t\/\/dojo.debug(\"unlisten \"+node);\n\t\t\n\t\tdojo.event.browser.removeListener(node.labelNode, \"onclick\", this.onLabelClickHandler);\n\t\tif (dojo.render.html.ie) {\n\t\t\tdojo.event.browser.removeListener(node.labelNode, \"ondblclick\", this.onLabelDblClickHandler);\n\t\t}\n\t\tdojo.event.topic.publish(this.eventNames.unlistenNode, { node: node });","this":"dojo.widget.TreeSelectorV3"}}},"dojo.widget.TreeSelectorV3.onAfterAddChild":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"","this":"dojo.widget.TreeSelectorV3"}}},"dojo.widget.TreeSelectorV3.onBeforeTreeDestroy":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tthis.unlistenTree(message.source);","this":"dojo.widget.TreeSelectorV3"}}},"dojo.widget.TreeSelectorV3.onAfterCollapse":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tthis.deselectIfAncestorMatch(message.source);\t\t","this":"dojo.widget.TreeSelectorV3"}}},"dojo.widget.TreeSelectorV3.onLabelDblClick":{"_":{"meta":{"summary":"","parameters":{"event":{"type":""}},"src":"\t\tthis.onLabelClick(event);\t\t\t","this":"dojo.widget.TreeSelectorV3"}}},"dojo.widget.TreeSelectorV3.checkSpecialEvent":{"_":{"meta":{"summary":"","parameters":{"event":{"type":""}},"src":"\t\treturn event.shiftKey || event.ctrlKey;","this":"dojo.widget.TreeSelectorV3"}}},"dojo.widget.TreeSelectorV3.onLabelClick":{"_":{"meta":{"summary":"","parameters":{"event":{"type":""}},"src":"\t\tvar node = this.domElement2TreeNode(event.target);\n\t\t\n\t\t\/\/dojo.debug(\"click \"+node+ \"special \"+this.checkSpecialEvent(event));\n\t\t\/\/dojo.html.setClass(event.target, \"TreeLabel TreeNodeEmphased\");\n\t\t\n\t\tif (dojo.lang.inArray(this.selectedNodes, node)) {\t\t\t\n\t\t\tif(this.checkSpecialEvent(event)){\t\t\t\t\n\t\t\t\t\/\/ If the node is currently selected, and they select it again while holding\n\t\t\t\t\/\/ down a meta key, it deselects it\n\t\t\t\tthis.deselect(node);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tvar _this = this;\n\t\t\tdojo.lang.forEach(this.selectedNodes, function(selectedNode) {\n\t\t\t\tif (selectedNode !== node) {\n\t\t\t\t\t_this.deselect(selectedNode);\n\t\t\t\t}\n\t\t\t});\n\t\t\tdojo.event.topic.publish(this.eventNames.dblselect, { node: node });\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t\/\/ if unselected node..\n\t\t\n\t\t\n\t\t\/\/ deselect all if no meta key or disallowed\n\t\tif (!this.checkSpecialEvent(event) || !this.allowedMulti) {\n\t\t\t\/\/dojo.debug(\"deselect All\");\n\t\t\tthis.deselectAll();\n\t\t}\n\t\t\n\t\t\/\/dojo.debug(\"select\");\n\n\t\tthis.select(node);","this":"dojo.widget.TreeSelectorV3"}}},"dojo.widget.TreeSelectorV3.deselectIfAncestorMatch":{"_":{"meta":{"summary":"","parameters":{"ancestor":{"type":""}},"src":"\t\tdojo.lang.forEach(this.selectedNodes, function(node) {\n\t\t\tvar selectedNode = node;\n\t\t\twhile (node && node.isTreeNode) {\n\t\t\t\tif (node === ancestor) {\n\t\t\t\t\t_this.deselect(selectedNode); \n\t\t\t\t\treturn;\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\tnode = node.parent;\n\t\t\t}\n\t\t});","this":"dojo.widget.TreeSelectorV3"}}},"dojo.widget.TreeSelectorV3.onAfterChangeTree":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tif (!message.newTree || !this.listenedTrees[message.newTree.widgetId]) {\n\t\t\t\/\/ moving from our trfee to new one\n\t\t\t\n\t\t\tif (this.selectedNode && message.node.children) {\n\t\t\t\tthis.deselectIfAncestorMatch(message.node);\n\t\t\t}\n\t\t\t\n\t\t\tthis.processDescendants(message.node, this.listenNodeFilter, this.unlistenNode);\t\t\t\t\t\n\t\t\t\n\t\t}\n\t\tif (!message.oldTree || !this.listenedTrees[message.oldTree.widgetId]) {\n\t\t\t\/\/dojo.debugShallow(\"listen! \"+this.listenedTrees);\n\t\t\t\/\/ moving from old tree to our tree\n\t\t\tthis.processDescendants(message.node, this.listenNodeFilter, this.listenNode);\t\t\t\n\t\t}","this":"dojo.widget.TreeSelectorV3"}}},"dojo.widget.TreeSelectorV3.onAfterDetach":{"_":{"meta":{"summary":"","parameters":{"message":{"type":""}},"src":"\t\tthis.deselectIfAncestorMatch(message.child);\t\t","this":"dojo.widget.TreeSelectorV3"}}},"dojo.widget.TreeSelectorV3.select":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tvar index = dojo.lang.find(this.selectedNodes, node, true);\n\t\t\n\t\tif (index >=0 ) {\n\t\t\treturn; \/\/ already selected\n\t\t}\n\t\t\n\t\t\/\/dojo.debug(\"select \"+node);\n\t\tthis.selectedNodes.push(node);\n\t\t\t\t\t\t\n\t\tdojo.event.topic.publish(this.eventNames.select, {node: node} );","returns":"already selected","this":"dojo.widget.TreeSelectorV3"}}},"dojo.widget.TreeSelectorV3.deselect":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tvar index = dojo.lang.find(this.selectedNodes, node, true);\n\t\tif (index < 0) {\n\t\t\t\/\/dojo.debug(\"not selected\");\n\t\t\treturn; \/\/ not selected\n\t\t}\n\t\t\n\t\t\/\/dojo.debug(\"deselect \"+node);\n\t\t\n\t\t\n\t\tthis.selectedNodes.splice(index, 1);\n\t\tdojo.event.topic.publish(this.eventNames.deselect, {node: node} );\n\t\t\/\/dojo.debug(\"deselect\");","returns":"not selected","this":"dojo.widget.TreeSelectorV3"}}},"dojo.widget.TreeSelectorV3.deselectAll":{"_":{"meta":{"summary":"","src":"\t\t\tthis.deselect(this.selectedNodes[0]);\n\t\t}","this":"dojo.widget.TreeSelectorV3"}}}}}},"dojo.widget.TreeTimeoutIterator":{"meta":{"requires":{"common":["dojo.event.*","dojo.json","dojo.io.*","dojo.widget.TreeCommon"]},"methods":{"dojo.widget.TreeTimeoutIterator":{"_":{"meta":{"summary":"","parameters":{"elem":{"type":""},"callFunc":{"type":""},"callObj":{"type":""}},"src":"\tvar _this = this;\n\t\n\tthis.currentParent = elem;\n\t\n\tthis.callFunc = callFunc;\n\tthis.callObj = callObj ? callObj: this;\n\tthis.stack = [];","this_variables":["currentParent","callFunc","callObj","stack","filterFunc","filterObj","maxStackDepth","finishFunc","finishObj","currentParent","currentIndex","currentParent","currentIndex"],"protovariables":{"maxStackDepth":"","stack":"","currentParent":"","currentIndex":""}}}},"dojo.widget.TreeTimeoutIterator.filterFunc":{"_":{"meta":{"summary":"","src":"                          return true    ","this":"dojo.widget.TreeTimeoutIterator"}}},"dojo.widget.TreeTimeoutIterator.finishFunc":{"_":{"meta":{"summary":"","src":"                          return true    ","this":"dojo.widget.TreeTimeoutIterator"}}},"dojo.widget.TreeTimeoutIterator.setFilter":{"_":{"meta":{"summary":"","parameters":{"func":{"type":""},"obj":{"type":""}},"src":"\t\tthis.filterFunc = func;\n\t\tthis.filterObj = obj;","this":"dojo.widget.TreeTimeoutIterator"}}},"dojo.widget.TreeTimeoutIterator.setMaxLevel":{"_":{"meta":{"summary":"","parameters":{"level":{"type":""}},"src":"\t\tif (level<1) {\n\t\t\tdojo.raise(\"setMaxLevel: level=\"+level+\" should be >=1\");\n\t\t}\n\t\t\n\t\tthis.maxStackDepth = level-2;","this":"dojo.widget.TreeTimeoutIterator"}}},"dojo.widget.TreeTimeoutIterator.forward":{"_":{"meta":{"summary":"","parameters":{"timeout":{"type":""}},"src":"\t\tvar _this = this;\n\t\t\n\t\tif (this.timeout) {\n\t\t\t\/\/ tid will be assigned at the end of outer func execution\n\t\t\tvar tid = setTimeout(function() {_this.processNext(); clearTimeout(tid); }, _this.timeout);\n\t\t} else {\n\t\t\treturn this.processNext();\n\t\t}","this":"dojo.widget.TreeTimeoutIterator"}}},"dojo.widget.TreeTimeoutIterator.start":{"_":{"meta":{"summary":"","parameters":{"processFirst":{"type":""}},"src":"\t\tif (processFirst) {\n\t\t\treturn this.callFunc.call(this.callObj, this.currentParent, this);\t\t\t\n\t\t}\n\t\t\n\t\treturn this.processNext();","this":"dojo.widget.TreeTimeoutIterator"}}},"dojo.widget.TreeTimeoutIterator.processNext":{"_":{"meta":{"summary":"","src":"\t\tvar _this = this;\n\t\t\n\t\tvar found;\n\t\t\n\t\tvar next;\n\t\t\t\n\t\t\n\t\twhile (true) {\n\t\t\tvar children = this.currentParent.children;\n\t\t\n\t\t\tif (children && children.length) {\n\t\t\n\t\t\t\t\/\/ look for a node that can be the next target\n\t\t\t\tdo {\t\t\t\t\t\n\t\t\t\t\tnext = children[this.currentIndex];\n\t\t\t\t\t\/\/dojo.debug(\"check \"+next);\n\t\t\t\t} while (this.currentIndex++ < children.length && !(found = this.filterFunc.call(this.filterObj,next)));\n\t\t\t\n\t\t\t\n\t\t\t\tif (found) {\n\t\t\t\t\t\/\/dojo.debug(\"found \"+next);\n\t\t\t\t\t\/\/ move to next node as new parent if depth is fine\n\t\t\t\t\t\/\/ I can't check current children to decide whether to move it or not,\n\t\t\t\t\t\/\/ because expand may populate children\t\t\t\t\t\n\t\t\t\t\tif (next.isFolder && this.stack.length <= this.maxStackDepth) {\n\t\t\t\t\t\tthis.moveParent(next,0);\n\t\t\t\t\t}\n\t\t\t\t\t\/\/dojo.debug(\"Run callFunc on \"+next);\n\t\t\t\t\treturn this.callFunc.call(this.callObj, next, this);\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t\t\t\n\t\t\tif (this.stack.length) {\n\t\t\t\tthis.popParent();\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t\n\t\t\tbreak;\n\t\t}\n\n\t\t\/**\n\t\t * couldn't find next node to process, finish here\n\t\t *\/\n\t\treturn this.finishFunc.call(this.finishObj);","this":"dojo.widget.TreeTimeoutIterator"}}},"dojo.widget.TreeTimeoutIterator.setFinish":{"_":{"meta":{"summary":"","parameters":{"func":{"type":""},"obj":{"type":""}},"src":"\t\tthis.finishFunc = func;\n\t\tthis.finishObj = obj;","this":"dojo.widget.TreeTimeoutIterator"}}},"dojo.widget.TreeTimeoutIterator.popParent":{"_":{"meta":{"summary":"","src":"\t\tvar p = this.stack.pop();\n\t\t\/\/dojo.debug(\"Pop \"+p[0]+\":\"+p[1]);\t\t\n\t\tthis.currentParent = p[0];\n\t\tthis.currentIndex = p[1];","this":"dojo.widget.TreeTimeoutIterator"}}},"dojo.widget.TreeTimeoutIterator.moveParent":{"_":{"meta":{"summary":"","parameters":{"nextParent":{"type":""},"nextIndex":{"type":""}},"src":"\t\tthis.currentParent = nextParent;\n\t\tthis.currentIndex = nextIndex;","this":"dojo.widget.TreeTimeoutIterator"}}}}}},"dojo.widget.TreeV3":{"meta":{"requires":{"common":["dojo.widget.TreeWithNode","dojo.widget.*","dojo.event.*","dojo.io.*","dojo.widget.HtmlWidget","dojo.widget.TreeNodeV3"]},"methods":{"dojo.widget.TreeV3":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\n\tthis.eventNames = {};\n\t\n\tthis.DndAcceptTypes = [];\n\tthis.actionsDisabled = [];\n\t\n\tthis.listeners = [];\n\t\n\tthis.tree = this;","this_variables":["eventNames","DndAcceptTypes","actionsDisabled","listeners","tree","nodeTemplate","expandNodeTemplate","labelNodeTemplate","contentNodeTemplate","containerNodeTemplate","DndMode","defaultChildWidget","containerNode"],"inherits":["dojo.widget.HtmlWidget"],"object_inherits":["dojo.widget.TreeWithNode"],"protovariables":{"widgetType":"","DndMode":"","defaultChildWidget":"","defaultChildTitle":"","eagerWidgetInstantiation":"","eventNamesDefault":"","classPrefix":"","style":"","allowAddChildToLeaf":"","unsetFolderOnEmpty":"","DndModes":"","BETWEEN":"","ONTO":"","DndAcceptTypes":"","templateCssPath":"","templateString":"","isExpanded":"","isTree":"","actions":""}}}},"dojo.widget.TreeV3.createNode":{"_":{"meta":{"summary":"","parameters":{"data":{"type":""}},"src":"\t\tdata.tree = this.widgetId;\t\t\n\t\t\n\t\tif (data.widgetName) {\n\t\t\t\/\/ TODO: check if such widget has createSimple\t\t\t\n\t\t\treturn dojo.widget.createWidget(data.widgetName, data);\t\t\n\t\t} else if (this.defaultChildWidget.prototype.createSimple) {\t\t\t\n\t\t\treturn this.defaultChildWidget.prototype.createSimple(data);\t\t\t\t\t\n\t\t} else {\n\t\t\tvar ns = this.defaultChildWidget.prototype[\"namespace\"]; \n\t\t\tvar wt = this.defaultChildWidget.prototype.widgetType; \n\n\t\t\treturn dojo.widget.createWidget(ns + \":\" + wt, data); \n\t\t}","this":"dojo.widget.TreeV3"}}},"dojo.widget.TreeV3.makeNodeTemplate":{"_":{"meta":{"summary":"","src":"\t\tvar domNode = document.createElement(\"div\");\n\t\tdojo.html.setClass(domNode, this.classPrefix+\"Node \"+this.classPrefix+\"ExpandLeaf \"+this.classPrefix+\"ChildrenNo\");\t\t\n\t\tthis.nodeTemplate = domNode;\n\t\t\n\t\tvar expandNode = document.createElement(\"div\");\n\t\tvar clazz = this.classPrefix+\"Expand\";\n\t\tif (dojo.render.html.ie) {\n\t\t\tclazz = clazz + ' ' + this.classPrefix+\"IEExpand\";\n\t\t}\n\t\tdojo.html.setClass(expandNode, clazz);\n\t\t\n\t\tthis.expandNodeTemplate = expandNode;\n\n\t\t\/\/ need <span> inside <div>\n\t\t\/\/ div for multiline support, span for styling exactly the text, not whole line\n\t\tvar labelNode = document.createElement(\"span\");\n\t\tdojo.html.setClass(labelNode, this.classPrefix+\"Label\");\n\t\tthis.labelNodeTemplate = labelNode;\n\t\t\n\t\tvar contentNode = document.createElement(\"div\");\n\t\tvar clazz = this.classPrefix+\"Content\";\n\t\t\n\t\t\/**\n\t\t * IE does not support min-height properly so I have to rely\n\t\t * on this hack\n\t\t * FIXME: do it in CSS only, remove iconHeight from code\n\t\t *\/\n\t\tif (dojo.render.html.ie) {\n\t\t\tclazz = clazz + ' ' + this.classPrefix+\"IEContent\";\n\t\t}\t\n\t\t\n\t\t\t\t\n\t\tdojo.html.setClass(contentNode, clazz);\n\t\t\n\t\tthis.contentNodeTemplate = contentNode;\n\t\t\n\t\tdomNode.appendChild(expandNode);\n\t\tdomNode.appendChild(contentNode);\n\t\tcontentNode.appendChild(labelNode);","this":"dojo.widget.TreeV3"}}},"dojo.widget.TreeV3.makeContainerNodeTemplate":{"_":{"meta":{"summary":"","src":"\t\tvar div = document.createElement('div');\n\t\tdiv.style.display = 'none';\t\t\t\n\t\tdojo.html.setClass(div, this.classPrefix+\"Container\");\n\t\t\n\t\tthis.containerNodeTemplate = div;","this":"dojo.widget.TreeV3"}}},"dojo.widget.TreeV3.getInfo":{"_":{"meta":{"summary":"","src":"\t\tvar info = {\n\t\t\twidgetId: this.widgetId,\n\t\t\tobjectId: this.objectId\n\t\t}\n\n\t\treturn info;","this":"dojo.widget.TreeV3"}}},"dojo.widget.TreeV3.widgetId":{"_":{"meta":{"summary":"","src":"\t\tvar info = {\n\t\t\twidgetId: this.widgetId,\n\t\t\tobjectId: this.objectId\n\t\t}\n\n\t\treturn info;","this":"dojo.widget.TreeV3"}}},"dojo.widget.TreeV3.objectId":{"_":{"meta":{"summary":"","src":"\t\tvar info = {\n\t\t\twidgetId: this.widgetId,\n\t\t\tobjectId: this.objectId\n\t\t}\n\n\t\treturn info;","this":"dojo.widget.TreeV3"}}},"dojo.widget.TreeV3.adjustEventNames":{"_":{"meta":{"summary":"","src":"\t\tfor(var name in this.eventNamesDefault) {\n\t\t\tif (dojo.lang.isUndefined(this.eventNames[name])) {\n\t\t\t\tthis.eventNames[name] = this.widgetId+\"\/\"+this.eventNamesDefault[name];\n\t\t\t}\n\t\t}","this":"dojo.widget.TreeV3"}}},"dojo.widget.TreeV3.adjustDndMode":{"_":{"meta":{"summary":"","src":"\t\tvar _this = this;\n\t\t\n\t\t\n\t\tvar DndMode = 0;\n\t\tdojo.lang.forEach(this.DndMode.split(';'),\n\t\t\tfunction(elem) {\n\t\t\t\tvar mode = _this.DndModes[dojo.string.trim(elem).toUpperCase()];\n\t\t\t\tif (mode) DndMode = DndMode | mode;\n\t\t\t}\n\t\t );\n\t\n\t\t\n\t\tthis.DndMode = DndMode;","this":"dojo.widget.TreeV3"}}},"dojo.widget.TreeV3.destroy":{"_":{"meta":{"summary":"","src":"\t\tdojo.event.topic.publish(this.tree.eventNames.beforeTreeDestroy, { source: this } );\n\n\t\treturn dojo.widget.HtmlWidget.prototype.destroy.apply(this, arguments);","this":"dojo.widget.TreeV3"}}},"dojo.widget.TreeV3.source":{"_":{"meta":{"summary":"","src":"\t\tdojo.event.topic.publish(this.eventNames.afterTreeCreate, { source: this } );","this":"dojo.widget.TreeV3"}}},"dojo.widget.TreeV3.initialize":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""}},"src":"\t\tfor(var i=0; i<this.actionsDisabled.length;i++) {\n\t\t\tthis.actionsDisabled[i] = this.actionsDisabled[i].toUpperCase();\n\t\t}\n\t\t\n\t\t\/\/dojo.debug(args.defaultChildWidget ? true : false)\n\t\t\n\t\tif (!args.defaultChildWidget) {\n\t\t\tthis.defaultChildWidget = dojo.widget.TreeNodeV3;\n\t\t} else {\n\t\t\tthis.defaultChildWidget = dojo.lang.getObjPathValue(args.defaultChildWidget);\n\t\t}\n\t\t\n\t\tthis.adjustEventNames();\n\t\tthis.adjustDndMode();\n\n\t\tthis.makeNodeTemplate();\n\t\tthis.makeContainerNodeTemplate();\n\t\t\n\t\tthis.containerNode = this.domNode;\n\t\t\n\t\tdojo.html.setClass(this.domNode, this.classPrefix+\"Container\");\n\t\t\n\t\tvar _this = this;\n\t\t\t\n\t\t\n\t\t\t\t\n\t\tdojo.lang.forEach(this.listeners,\n\t\t\tfunction(elem) {\n\t\t\t\tvar t = dojo.lang.isString(elem) ? dojo.widget.byId(elem) : elem;\n\t\t\t\tt.listenTree(_this)\t\t\t\t\n\t\t\t}\n\t\t);","this":"dojo.widget.TreeV3"}}},"dojo.widget.TreeV3.postCreate":{"_":{"meta":{"summary":"","src":"\t\tdojo.event.topic.publish(this.eventNames.afterTreeCreate, { source: this } );","this":"dojo.widget.TreeV3"}}},"dojo.widget.TreeV3.move":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""}},"src":"\t\tif (!child.parent) {\n\t\t\tdojo.raise(this.widgetType+\": child can be moved only while it's attached\");\n\t\t}\n\t\t\n\t\tvar oldParent = child.parent;\n\t\tvar oldTree = child.tree;\n\t\tvar oldIndex = child.getParentIndex();\n\t\tvar newTree = newParent.tree;\n\t\tvar newParent = newParent;\n\t\tvar newIndex = index;\n\n\t\tvar message = {\n\t\t\t\toldParent: oldParent, oldTree: oldTree, oldIndex: oldIndex,\n\t\t\t\tnewParent: newParent, newTree: newTree, newIndex: newIndex,\n\t\t\t\tchild: child\n\t\t};\n\n\t\tdojo.event.topic.publish(oldTree.eventNames.beforeMoveFrom, message);\n\t\tdojo.event.topic.publish(newTree.eventNames.beforeMoveTo, message);\n\t\t\n\t\tthis.doMove.apply(this, arguments);\n\n\t\t\n\t\t\/* publish events here about structural changes for both source and target trees *\/\n\t\tdojo.event.topic.publish(oldTree.eventNames.afterMoveFrom, message);\n\t\tdojo.event.topic.publish(newTree.eventNames.afterMoveTo, message);","this":"dojo.widget.TreeV3"}}},"dojo.widget.TreeV3.oldParent":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""}},"src":"\t\tif (!child.parent) {\n\t\t\tdojo.raise(this.widgetType+\": child can be moved only while it's attached\");\n\t\t}\n\t\t\n\t\tvar oldParent = child.parent;\n\t\tvar oldTree = child.tree;\n\t\tvar oldIndex = child.getParentIndex();\n\t\tvar newTree = newParent.tree;\n\t\tvar newParent = newParent;\n\t\tvar newIndex = index;\n\n\t\tvar message = {\n\t\t\t\toldParent: oldParent, oldTree: oldTree, oldIndex: oldIndex,\n\t\t\t\tnewParent: newParent, newTree: newTree, newIndex: newIndex,\n\t\t\t\tchild: child\n\t\t};\n\n\t\tdojo.event.topic.publish(oldTree.eventNames.beforeMoveFrom, message);\n\t\tdojo.event.topic.publish(newTree.eventNames.beforeMoveTo, message);\n\t\t\n\t\tthis.doMove.apply(this, arguments);\n\n\t\t\n\t\t\/* publish events here about structural changes for both source and target trees *\/\n\t\tdojo.event.topic.publish(oldTree.eventNames.afterMoveFrom, message);\n\t\tdojo.event.topic.publish(newTree.eventNames.afterMoveTo, message);","this":"dojo.widget.TreeV3"}}},"dojo.widget.TreeV3.newParent":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""}},"src":"\t\tif (!child.parent) {\n\t\t\tdojo.raise(this.widgetType+\": child can be moved only while it's attached\");\n\t\t}\n\t\t\n\t\tvar oldParent = child.parent;\n\t\tvar oldTree = child.tree;\n\t\tvar oldIndex = child.getParentIndex();\n\t\tvar newTree = newParent.tree;\n\t\tvar newParent = newParent;\n\t\tvar newIndex = index;\n\n\t\tvar message = {\n\t\t\t\toldParent: oldParent, oldTree: oldTree, oldIndex: oldIndex,\n\t\t\t\tnewParent: newParent, newTree: newTree, newIndex: newIndex,\n\t\t\t\tchild: child\n\t\t};\n\n\t\tdojo.event.topic.publish(oldTree.eventNames.beforeMoveFrom, message);\n\t\tdojo.event.topic.publish(newTree.eventNames.beforeMoveTo, message);\n\t\t\n\t\tthis.doMove.apply(this, arguments);\n\n\t\t\n\t\t\/* publish events here about structural changes for both source and target trees *\/\n\t\tdojo.event.topic.publish(oldTree.eventNames.afterMoveFrom, message);\n\t\tdojo.event.topic.publish(newTree.eventNames.afterMoveTo, message);","this":"dojo.widget.TreeV3"}}},"dojo.widget.TreeV3.child":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""}},"src":"\t\tif (!child.parent) {\n\t\t\tdojo.raise(this.widgetType+\": child can be moved only while it's attached\");\n\t\t}\n\t\t\n\t\tvar oldParent = child.parent;\n\t\tvar oldTree = child.tree;\n\t\tvar oldIndex = child.getParentIndex();\n\t\tvar newTree = newParent.tree;\n\t\tvar newParent = newParent;\n\t\tvar newIndex = index;\n\n\t\tvar message = {\n\t\t\t\toldParent: oldParent, oldTree: oldTree, oldIndex: oldIndex,\n\t\t\t\tnewParent: newParent, newTree: newTree, newIndex: newIndex,\n\t\t\t\tchild: child\n\t\t};\n\n\t\tdojo.event.topic.publish(oldTree.eventNames.beforeMoveFrom, message);\n\t\tdojo.event.topic.publish(newTree.eventNames.beforeMoveTo, message);\n\t\t\n\t\tthis.doMove.apply(this, arguments);\n\n\t\t\n\t\t\/* publish events here about structural changes for both source and target trees *\/\n\t\tdojo.event.topic.publish(oldTree.eventNames.afterMoveFrom, message);\n\t\tdojo.event.topic.publish(newTree.eventNames.afterMoveTo, message);","this":"dojo.widget.TreeV3"}}},"dojo.widget.TreeV3.doMove":{"_":{"meta":{"summary":"","parameters":{"child":{"type":""},"newParent":{"type":""},"index":{"type":""}},"src":"\t\t\/\/dojo.debug(\"addChild \"+child+\" to \"+newParent+\" at \"+index);\n\n\t\tnewParent.doAddChild(child, index);","this":"dojo.widget.TreeV3"}}},"dojo.widget.TreeV3.toString":{"_":{"meta":{"summary":"","src":"\t\treturn \"[\"+this.widgetType+\" ID:\"+this.widgetId\t+\"]\"","this":"dojo.widget.TreeV3"}}}}}},"dojo.widget.Widget":{"meta":{"requires":{"common":["dojo.lang.func","dojo.lang.array","dojo.lang.extras","dojo.lang.declare","dojo.namespace","dojo.widget.Manager","dojo.event.*","dojo.a11y"]},"methods":{"dojo.widget.Widget":{"_":{"meta":{"summary":""}}},"dojo.widget.tags.addParseTreeHandler":{"_":{"meta":{"summary":"deprecated!","parameters":{"type":{"type":"String"}},"src":"\t\/*\n\tvar ltype = type.toLowerCase();\n\tthis[ltype] = function(fragment, widgetParser, parentComp, insertionIndex, localProps){\n\t\tvar _ltype = ltype;\n\t\tdojo.profile.start(_ltype);\n\t\tvar n = dojo.widget.buildWidgetFromParseTree(ltype, fragment, widgetParser, parentComp, insertionIndex, localProps);\n\t\tdojo.profile.end(_ltype);\n\t\treturn n;\n\t}\n\t*\/"}}},"dojo.widget.buildWidgetFromParseTree":{"_":{"meta":{"summary":"creates a tree of widgets from the data structure produced by the first-pass parser (frag) test for accessibility mode","parameters":{"type":{"type":"String"},"frag":{"type":"Object"},"parser":{"type":"dojo.widget.Parse"},"parentComp":{"type":"Widget, optional"},"insertionIndex":{"type":"int, optional"},"localProps":{"type":"Object"}},"src":"\t\/\/dojo.profile.start(\"buildWidgetFromParseTree\");\n\t\/\/ FIXME: for codepath from createComponentFromScript, we are now splitting a path \n\t\/\/ that we already split and then joined\n\tvar stype = type.split(\":\");\n\tstype = (stype.length == 2) ? stype[1] : type;\n\t\n\t\/\/ FIXME: we don't seem to be doing anything with this!\n\t\/\/ var propertySets = parser.getPropertySets(frag);\n\tvar localProperties = localProps || parser.parseProperties(frag[frag[\"namespace\"]+\":\"+stype]);\n\tvar twidget = dojo.widget.manager.getImplementation(stype,null,null,frag[\"namespace\"]);\n\tif(!twidget){\n\t\tthrow new Error('cannot find \"' + type + '\" widget');\n\t}else if (!twidget.create){\n\t\tthrow new Error('\"' + type + '\" widget object has no \"create\" method and does not appear to implement *Widget');\n\t}\n\tlocalProperties[\"dojoinsertionindex\"] = insertionIndex;\n\t\/\/ FIXME: we lose no less than 5ms in construction!\n\tvar ret = twidget.create(localProperties, frag, parentComp, frag[\"namespace\"]);\n\t\/\/ dojo.profile.end(\"buildWidgetFromParseTree\");\n\treturn ret;"}}},"dojo.widget.defineWidget":{"_":{"meta":{"summary":"Create a widget constructor function (aka widgetClass)","parameters":{"widgetClass":{"type":"String"},"renderer":{"type":"String"},"superclasses":{"type":"function||array"},"init":{"type":"function"},"props":{"type":"Object"}},"src":"\t\tdojo.widget._defineWidget(arguments[0], arguments[3], arguments[1], arguments[4], arguments[2]);\n\t}else{\n\t\t\/\/ widgetClass\n\t\tvar args = [ arguments[0] ], p = 3;\n\t\tif(dojo.lang.isString(arguments[1])){\n\t\t\t\/\/ renderer, superclass\n\t\t\targs.push(arguments[1], arguments[2]);\n\t\t}else{\n\t\t\t\/\/ superclass\n\t\t\targs.push('', arguments[1]);\n\t\t\tp = 2;\n\t\t}\n\t\tif(dojo.lang.isFunction(arguments[p])){\n\t\t\t\/\/ init (function), props (object) \n\t\t\targs.push(arguments[p], arguments[p+1]);\n\t\t}else{\n\t\t\t\/\/ props (object) \n\t\t\targs.push(null, arguments[p]);\n\t\t}\n\t\tdojo.widget._defineWidget.apply(this, args);\n\t}"}}},"dojo.widget._defineWidget":{"_":{"meta":{"summary":"","parameters":{"widgetClass":{"type":"string"},"renderer":{"type":"string"},"superclasses":{"type":"function||array"},"init":{"type":"function"},"props":{"type":"object"}},"src":"\tvar type = module.pop(); \/\/ type <= WidgetName, module <= foo.bar.baz<.renderer>\n\tvar regx = \"\\\\.(\" + (renderer ? renderer + '|' : '') + dojo.widget.defineWidget.renderers + \")\\\\.\";\n\tvar r = widgetClass.search(new RegExp(regx));\n\tmodule = (r < 0 ? module.join(\".\") : widgetClass.substr(0, r));\n\n\t\/\/ deprecated in favor of namespace system, remove for 0.5\n\tdojo.widget.manager.registerWidgetPackage(module);\n\t\n\tvar pos = module.indexOf(\".\");\n\tvar nsName = (pos > -1) ? module.substring(0,pos) : module;\n\n\t\/\/ FIXME: hrm, this might make things simpler\n\t\/\/dojo.widget.tags.addParseTreeHandler(nsName+\":\"+type.toLowerCase());\n\t\n\tprops=(props)||{};\n\tprops.widgetType = type;\n\tif((!init)&&(props[\"classConstructor\"])){\n\t\tinit = props.classConstructor;\n\t\tdelete props.classConstructor;\n\t}\n\tdojo.declare(widgetClass, superclasses, init, props);"}}}}}},"dojo.widget.Wizard":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.LayoutContainer","dojo.widget.ContentPane","dojo.event.*","dojo.html.style"]},"methods":{"dojo.widget.WizardContainer":{"_":{"meta":{"summary":"","inherits":["dojo.widget.LayoutContainer"],"this_inherits":["dojo.widget.LayoutContainer"]}}},"dojo.widget.WizardPane":{"_":{"meta":{"summary":"","inherits":["dojo.widget.ContentPane"],"this_inherits":["dojo.widget.ContentPane"]}}}}}},"dojo.widget.YahooMap":{"meta":{"requires":{"common":["dojo.event.*","dojo.math","dojo.widget.*","dojo.widget.HtmlWidget"]},"methods":{"dojo.widget.YahooMap":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"]}}}}}},"dojo.widget._":{"meta":{"requires":{"common":["dojo.xml.Parse","dojo.widget.Widget","dojo.widget.Parse","dojo.widget.Manager"],"browser":["dojo.widget.DomWidget","dojo.widget.HtmlWidget"],"dashboard":["dojo.widget.DomWidget","dojo.widget.HtmlWidget"],"svg":["dojo.widget.SvgWidget"],"rhino":["dojo.widget.SwtWidget"]}}},"dojo.widget.demoEngine.DemoContainer":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.HtmlWidget","dojo.widget.demoEngine.DemoPane","dojo.widget.demoEngine.SourcePane","dojo.widget.TabContainer"]},"methods":{"my.widget.demoEngine.DemoContainer":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"],"protovariables":{"templatePath":"","templateCssPath":""}}}},"my.widget.demoEngine.DemoContainer.postCreate":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.html.addClass(this.domNode,this.domNodeClass);\n\t\t\tdojo.html.addClass(this.tabNode, this.tabClass);\n\t\t\tdojo.html.addClass(this.returnImageNode, this.returnClass);\n\t\t\tthis.returnImageNode.src=this.returnImage;\n\n\t\t\tthis.tabContainer = dojo.widget.createWidget(\"TabContainer\",{},this.tabNode);\n\n\t\t\tthis.demoTab = dojo.widget.createWidget(\"DemoPane\",{});\n\t\t\tthis.tabContainer.addChild(this.demoTab);\n\n\t\t\tthis.sourceTab= dojo.widget.createWidget(\"SourcePane\",{});\n\t\t\tthis.tabContainer.addChild(this.sourceTab);\n\n\t\t\tdojo.html.setOpacity(this.domNode,0);\n\t\t\tdojo.html.hide(this.domNode);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.HtmlWidget":{"_":{"meta":{"this_variables":["returnImageNode.src","tabContainer","demoTab","sourceTab"]}}},"my.widget.demoEngine.DemoContainer.loadDemo":{"_":{"meta":{"summary":"","parameters":{"url":{"type":""}},"src":"\t\t\tthis.demoTab.setHref(url);\n\t\t\tthis.sourceTab.setHref(url);\n\t\t\tthis.showDemo();","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.DemoContainer.setName":{"_":{"meta":{"summary":"","parameters":{"name":{"type":""}},"src":"\t\t\tdojo.html.removeChildren(this.demoNameNode);\n\t\t\tthis.demoNameNode.appendChild(document.createTextNode(name));","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.DemoContainer.setSummary":{"_":{"meta":{"summary":"","parameters":{"summary":{"type":""}},"src":"\t\t\tdojo.html.removeChildren(this.summaryNode);\n\t\t\tthis.summaryNode.appendChild(document.createTextNode(summary));","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.DemoContainer.showSource":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.html.removeClass(this.demoButtonNode,this.selectedButtonClass);\n\t\t\tdojo.html.addClass(this.sourceButtonNode,this.selectedButtonClass);\n\t\t\tthis.tabContainer.selectTab(this.sourceTab);\t","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.DemoContainer.showDemo":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.html.removeClass(this.sourceButtonNode,this.selectedButtonClass);\n\t\t\tdojo.html.addClass(this.demoButtonNode,this.selectedButtonClass);\n\t\t\tthis.tabContainer.selectTab(this.demoTab);","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.DemoContainer.returnToDemos":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.debug(\"Return To Demos\");","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.DemoContainer.show":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.html.setOpacity(this.domNode,1);\n\t\t\tdojo.html.show(this.domNode);\n\t\t\tthis.tabContainer.checkSize();","this":"dojo.widget.HtmlWidget"}}}}}},"dojo.widget.demoEngine.DemoItem":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.HtmlWidget"]},"methods":{"my.widget.demoEngine.DemoItem":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"],"protovariables":{"templatePath":"","templateCssPath":""}}}},"my.widget.demoEngine.DemoItem.postCreate":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.html.addClass(this.domNode,this.domNodeClass);\n\t\t\tdojo.html.addClass(this.summaryBoxNode, this.summaryBoxClass);\n\t\t\tdojo.html.addClass(this.screenshotTdNode, this.screenshotTdClass);\n\t\t\tdojo.html.addClass(this.summaryContainerNode, this.summaryContainerClass);\n\t\t\tdojo.html.addClass(this.summaryNode, this.summaryClass);\n\t\t\tdojo.html.addClass(this.viewDemoLinkNode, this.viewDemoLinkClass);\n\n\t\t\tthis.nameNode.appendChild(document.createTextNode(this.name));\n\t\t\tthis.descriptionNode.appendChild(document.createTextNode(this.description));\n\t\t\tthis.thumbnailImageNode.src = this.thumbnail;\n\t\t\tthis.thumbnailImageNode.name=this.name;\n\t\t\tthis.viewDemoImageNode.src = this.viewDemoImage;\n\t\t\tthis.viewDemoImageNode.name=this.name;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.HtmlWidget":{"_":{"meta":{"this_variables":["thumbnailImageNode.src","thumbnailImageNode.name","viewDemoImageNode.src","viewDemoImageNode.name"]}}},"my.widget.demoEngine.DemoItem.onSelectDemo":{"_":{"meta":{"summary":"","src":"\t\t\t\/\/Attach to this to do something when a demo is selected","this":"dojo.widget.HtmlWidget"}}}}}},"dojo.widget.demoEngine.DemoNavigator":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.HtmlWidget","dojo.widget.Button","dojo.widget.demoEngine.DemoItem","dojo.io.*","dojo.lfx.*","dojo.lang.common"]},"methods":{"my.widget.demoEngine.DemoNavigator":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"],"protovariables":{"templatePath":"","templateCssPath":""}}}},"my.widget.demoEngine.DemoNavigator.postCreate":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.html.addClass(this.domNode,this.domNodeClass);\n\t\t\tdojo.html.addClass(this.demoListWrapperNode,this.demoListWrapperClass);\n\t\t\tdojo.html.addClass(this.demoListContainerNode,this.demoListContainerClass);\n\n\t\t\tif (dojo.render.html.ie) {\n\t\t\t\tdojo.debug(\"render ie\");\n\t\t\t\tdojo.html.hide(this.demoListWrapperNode); \n\t\t\t} else {\n\t\t\t\tdojo.debug(\"render non-ie\");\n\t\t\t\tdojo.lfx.html.fadeHide(this.demoListWrapperNode, 0).play();\t\n\t\t\t}\n\n\t\t\tthis.getRegistry(this.demoRegistryUrl);\n\n\t\t\tthis.demoContainer = dojo.widget.createWidget(\"DemoContainer\",{returnImage: this.returnImage},this.demoNode);\n\t\t\tdojo.event.connect(this.demoContainer,\"returnToDemos\", this, \"returnToDemos\");\n\t\t\tthis.demoContainer.hide();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.HtmlWidget":{"_":{"meta":{"this_variables":["demoContainer","demoContainer","registry","registry.categories","registry.categories","demoListChildren"]}}},"my.widget.demoEngine.DemoNavigator.returnImage":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.html.addClass(this.domNode,this.domNodeClass);\n\t\t\tdojo.html.addClass(this.demoListWrapperNode,this.demoListWrapperClass);\n\t\t\tdojo.html.addClass(this.demoListContainerNode,this.demoListContainerClass);\n\n\t\t\tif (dojo.render.html.ie) {\n\t\t\t\tdojo.debug(\"render ie\");\n\t\t\t\tdojo.html.hide(this.demoListWrapperNode); \n\t\t\t} else {\n\t\t\t\tdojo.debug(\"render non-ie\");\n\t\t\t\tdojo.lfx.html.fadeHide(this.demoListWrapperNode, 0).play();\t\n\t\t\t}\n\n\t\t\tthis.getRegistry(this.demoRegistryUrl);\n\n\t\t\tthis.demoContainer = dojo.widget.createWidget(\"DemoContainer\",{returnImage: this.returnImage},this.demoNode);\n\t\t\tdojo.event.connect(this.demoContainer,\"returnToDemos\", this, \"returnToDemos\");\n\t\t\tthis.demoContainer.hide();","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.DemoNavigator.returnToDemos":{"_":{"meta":{"summary":"","src":"\t\t\tthis.demoContainer.hide();\n\t\t\tif (dojo.render.html.ie) {\n\t\t\t\tdojo.debug(\"render ie\");\n\t\t\t\tdojo.html.show(this.navigationContainer) ;\n\t\t\t} else {\t\n\t\t\t\tdojo.debug(\"render non-ie\");\n\t\t\t\tdojo.lfx.html.fadeShow(this.navigationContainer,250).play();\n\t\t\t}\n\n\t\t\t\/\/if (dojo.render.html.ie) {\n\t\t\t\/\/\tdojo.html.setOpacity(this.navigationContainer);\n\t\t\t\/\/}\n\n\t\t\tdojo.lang.forEach(this.categoriesChildren, dojo.lang.hitch(this, function(child){\n\t\t\t\tchild.checkSize();\n\t\t\t}));\n\n\t\t\tdojo.lang.forEach(this.demoListChildren, dojo.lang.hitch(this, function(child){\n\t\t\t\tchild.checkSize();\n\t\t\t}));","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.DemoNavigator.show":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.html.setOpacity(this.domNode,1);\n\t\t\t\/\/dojo.html.setOpacity(this.navigationContainer);\t\n\t\t\t\/\/dojo.html.show(this.navigationContainer);\n\t\t\tdojo.html.setOpacity(this.navigationContainer,1);\n\n\t\t\tdojo.lang.forEach(this.categoriesChildren, dojo.lang.hitch(this, function(child){\n\t\t\t\tchild.checkSize();\n\t\t\t}));\n\n\t\t\tdojo.lang.forEach(this.demoListChildren, dojo.lang.hitch(this, function(child){\n\t\t\t\tchild.checkSize();\n\t\t\t}));","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.DemoNavigator.getRegistry":{"_":{"meta":{"summary":"","parameters":{"url":{"type":""}},"src":"\t\t\tdojo.io.bind({\n\t\t\t\turl: url,\n\t\t\t\tload: dojo.lang.hitch(this,this.processRegistry),\n\t\t\t\tmimetype: \"text\/json\"\n\t\t\t});","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.DemoNavigator.url":{"_":{"meta":{"summary":"","parameters":{"url":{"type":""}},"src":"\t\t\tdojo.io.bind({\n\t\t\t\turl: url,\n\t\t\t\tload: dojo.lang.hitch(this,this.processRegistry),\n\t\t\t\tmimetype: \"text\/json\"\n\t\t\t});","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.DemoNavigator.load":{"_":{"meta":{"summary":"","parameters":{"url":{"type":""}},"src":"\t\t\tdojo.io.bind({\n\t\t\t\turl: url,\n\t\t\t\tload: dojo.lang.hitch(this,this.processRegistry),\n\t\t\t\tmimetype: \"text\/json\"\n\t\t\t});","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.DemoNavigator.mimetype":{"_":{"meta":{"summary":"","parameters":{"url":{"type":""}},"src":"\t\t\tdojo.io.bind({\n\t\t\t\turl: url,\n\t\t\t\tload: dojo.lang.hitch(this,this.processRegistry),\n\t\t\t\tmimetype: \"text\/json\"\n\t\t\t});","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.DemoNavigator.processRegistry":{"_":{"meta":{"summary":"","parameters":{"type":{"type":""},"egistry":{"type":""},"":{"type":""}},"src":"\t\t\tdojo.debug(\"Processing Registry\");\n\t\t\tthis.registry = registry;\n\t\t\tdojo.lang.forEach(this.registry.navigation, dojo.lang.hitch(this,this.addCategory)); ","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.DemoNavigator.addCategory":{"_":{"meta":{"summary":"","parameters":{"category":{"type":""}},"src":"\t\t\t\tvar newCat = dojo.widget.createWidget(\"Button\",{caption: category.name});\n\n\t\t\t\tif(!dojo.lang.isObject(this.registry.categories)) {\n\t\t\t\t\tthis.registry.categories=function(){};\n\t\t\t\t}\n\n\t\t\t\tthis.registry.categories[category.name] = category;\n\t\t\t\tthis.categoriesChildren.push(newCat);\n\t\t\t\tthis.categoriesButtonsNode.appendChild(newCat.domNode);\t\n\t\t\t\tnewCat.domNode.categoryName = category.name;\n\t\t\t\tdojo.event.connect(newCat,\"onClick\", this, \"onSelectCategory\");","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.DemoNavigator.caption":{"_":{"meta":{"summary":"","parameters":{"category":{"type":""}},"src":"\t\t\t\tvar newCat = dojo.widget.createWidget(\"Button\",{caption: category.name});\n\n\t\t\t\tif(!dojo.lang.isObject(this.registry.categories)) {\n\t\t\t\t\tthis.registry.categories=function(){};\n\t\t\t\t}\n\n\t\t\t\tthis.registry.categories[category.name] = category;\n\t\t\t\tthis.categoriesChildren.push(newCat);\n\t\t\t\tthis.categoriesButtonsNode.appendChild(newCat.domNode);\t\n\t\t\t\tnewCat.domNode.categoryName = category.name;\n\t\t\t\tdojo.event.connect(newCat,\"onClick\", this, \"onSelectCategory\");","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.DemoNavigator.addDemo":{"_":{"meta":{"summary":"","parameters":{"demoName":{"type":""}},"src":"\t\t\tvar demo = this.registry.definitions[demoName];\n\n\t\t\tif (dojo.render.html.ie) {\n\t\t\t\tdojo.html.show(this.demoListWrapperNode) \n\t\t\t} else {\n\t\t\t\tdojo.lfx.html.fadeShow(this.demoListWrapperNode, 250).play();\n\t\t\t}\n\n\t\t\tvar newDemo = dojo.widget.createWidget(\"DemoItem\",{viewDemoImage: this.viewDemoImage, name: demoName, description: demo.description, thumbnail: demo.thumbnail});\n\t\t\tthis.demoListChildren.push(newDemo);\n\t\t\tthis.demoListContainerNode.appendChild(newDemo.domNode);\t\n\t\t\tdojo.event.connect(newDemo,\"onSelectDemo\",this,\"onSelectDemo\");","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.DemoNavigator.viewDemoImage":{"_":{"meta":{"summary":"","parameters":{"demoName":{"type":""}},"src":"\t\t\tvar demo = this.registry.definitions[demoName];\n\n\t\t\tif (dojo.render.html.ie) {\n\t\t\t\tdojo.html.show(this.demoListWrapperNode) \n\t\t\t} else {\n\t\t\t\tdojo.lfx.html.fadeShow(this.demoListWrapperNode, 250).play();\n\t\t\t}\n\n\t\t\tvar newDemo = dojo.widget.createWidget(\"DemoItem\",{viewDemoImage: this.viewDemoImage, name: demoName, description: demo.description, thumbnail: demo.thumbnail});\n\t\t\tthis.demoListChildren.push(newDemo);\n\t\t\tthis.demoListContainerNode.appendChild(newDemo.domNode);\t\n\t\t\tdojo.event.connect(newDemo,\"onSelectDemo\",this,\"onSelectDemo\");","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.DemoNavigator.onSelectCategory":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tcatName = e.currentTarget.categoryName;\t\n\t\t\tdojo.debug(\"Selected Category: \" + catName);\n\t\t\t\/\/Remove current list of demos\n\t\t\tdojo.lang.forEach(this.demoListChildren, function(child) {\n\t\t\t\t\tchild.destroy();\n\t\t\t});\n\t\t\tthis.demoListChildren=[];\n\n\t\t\t\/\/add demos from this cat\n\t\t\tdojo.lang.forEach(this.registry.categories[catName].demos, dojo.lang.hitch(this,function(demoName){\n\t\t\t\tthis.addDemo(demoName);\n\t\t\t}));","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.DemoNavigator.onSelectDemo":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tif (dojo.render.html.ie) {\n\t\t\t\tdojo.debug(\"render ie\");\n\t\t\t\tdojo.html.hide(this.navigationContainer) ;\n\t\t\t\tthis.demoContainer.show();\n\t\t\t\tthis.demoContainer.showDemo();\n\t\t\t} else {\n\t\t\t\tdojo.debug(\"render non-ie\");\n\t\t\t\tdojo.lfx.html.fadeHide(this.navigationContainer,250,null,dojo.lang.hitch(this, function() {\n\t\t\t\t\tthis.demoContainer.show();\t\n\t\t\t\t\tthis.demoContainer.showDemo();\n\t\t\t\t})).play();\n\t\t\t}\n\n\t\t\tthis.demoContainer.loadDemo(this.registry.definitions[e.target.name].url);\n\t\t\tthis.demoContainer.setName(e.target.name);\n\t\t\tthis.demoContainer.setSummary(this.registry.definitions[e.target.name].description);","this":"dojo.widget.HtmlWidget"}}}}}},"dojo.widget.demoEngine.DemoPane":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.HtmlWidget"]},"methods":{"my.widget.demoEngine.DemoPane":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"],"protovariables":{"templatePath":"","templateCssPath":""}}}},"my.widget.demoEngine.DemoPane.postCreate":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.html.addClass(this.domNode,this.domNodeClass);\n\t\t\tdojo.debug(\"PostCreate\");\n\t\t\tthis._launchDemo();","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.DemoPane._launchDemo":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.debug(\"Launching Demo\");\n\t\t\tdojo.debug(this.demoNode);\n\t\t\tthis.demoNode.src=this.href;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.HtmlWidget":{"_":{"meta":{"this_variables":["demoNode.src","href"]}}},"my.widget.demoEngine.DemoPane.setHref":{"_":{"meta":{"summary":"","parameters":{"url":{"type":""}},"src":"\t\t\tthis.href = url;\n\t\t\tthis._launchDemo();","this":"dojo.widget.HtmlWidget"}}}}}},"dojo.widget.demoEngine.SourcePane":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.HtmlWidget","dojo.io.*"]},"methods":{"my.widget.demoEngine.SourcePane":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"],"protovariables":{"templatePath":"","templateCssPath":""}}}},"my.widget.demoEngine.SourcePane.postCreate":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.html.addClass(this.domNode,this.domNodeClass);\n\t\t\tdojo.debug(\"PostCreate\");","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.SourcePane.getSource":{"_":{"meta":{"summary":"","src":"\t\t\tif (this.href) {\n\t\t\t\tdojo.io.bind({\n\t\t\t\t\turl: this.href,\n\t\t\t\t\tload: dojo.lang.hitch(this, \"fillInSource\"),\n\t\t\t\t\tmimetype: \"text\/plain\"\n\t\t\t\t});\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.SourcePane.url":{"_":{"meta":{"summary":"","src":"\t\t\tif (this.href) {\n\t\t\t\tdojo.io.bind({\n\t\t\t\t\turl: this.href,\n\t\t\t\t\tload: dojo.lang.hitch(this, \"fillInSource\"),\n\t\t\t\t\tmimetype: \"text\/plain\"\n\t\t\t\t});\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.SourcePane.load":{"_":{"meta":{"summary":"","src":"\t\t\tif (this.href) {\n\t\t\t\tdojo.io.bind({\n\t\t\t\t\turl: this.href,\n\t\t\t\t\tload: dojo.lang.hitch(this, \"fillInSource\"),\n\t\t\t\t\tmimetype: \"text\/plain\"\n\t\t\t\t});\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.SourcePane.mimetype":{"_":{"meta":{"summary":"","src":"\t\t\tif (this.href) {\n\t\t\t\tdojo.io.bind({\n\t\t\t\t\turl: this.href,\n\t\t\t\t\tload: dojo.lang.hitch(this, \"fillInSource\"),\n\t\t\t\t\tmimetype: \"text\/plain\"\n\t\t\t\t});\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"my.widget.demoEngine.SourcePane.fillInSource":{"_":{"meta":{"summary":"","parameters":{"type":{"type":""},"source":{"type":""},"e":{"type":""}},"src":"\t\t\tthis.sourceNode.value=source;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.HtmlWidget":{"_":{"meta":{"this_variables":["sourceNode.value","href"]}}},"my.widget.demoEngine.SourcePane.setHref":{"_":{"meta":{"summary":"","parameters":{"url":{"type":""}},"src":"\t\t\tthis.href = url;\n\t\t\tthis.getSource();","this":"dojo.widget.HtmlWidget"}}}}}},"dojo.widget.demoEngine._":{"meta":{"requires":{"browser":["dojo.widget.demoEngine.DemoItem","dojo.widget.demoEngine.DemoNavigator","dojo.widget.demoEngine.DemoPane","dojo.widget.demoEngine.SourcePane","dojo.widget.demoEngine.DemoContainer"]}}},"dojo.widget.html.DatePicker":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.HtmlWidget","dojo.widget.DatePicker","dojo.event.*","dojo.html.style","dojo.date"]},"methods":{"dojo.widget.html.DatePicker":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"],"protovariables":{"classNames":"","previous":"","current":"","next":"","selectedDate":"","templatePath":"","templateCssPath":""}}}},"dojo.widget.html.DatePicker.classConstructor":{"_":{"meta":{"summary":"","src":"\t\t\t\/\/ today's date, JS Date object\n\t\t\tthis.today = \"\";\n\t\t\t\/\/ selected date, JS Date object\n\t\t\tthis.date = \"\";\n\t\t\t\/\/ rfc 3339 date\n\t\t\tthis.storedDate = \"\";\n\t\t\t\/\/ date currently selected in the UI, stored in year, month, date in the format that will be actually displayed\n\t\t\tthis.currentDate = {};\n\t\t\t\/\/ stored in year, month, date in the format that will be actually displayed\n\t\t\tthis.firstSaturday = {};","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.HtmlWidget":{"_":{"meta":{"this_variables":["today","date","storedDate","currentDate","firstSaturday","today","date","firstSaturday.year","firstSaturday.month","firstSaturday.date","storedDate","selectedIsUsed","currentIsUsed","firstSaturday.date","firstSaturday.month","firstSaturday.year","firstSaturday.date","firstSaturday.month","firstSaturday.year","firstSaturday.date","firstSaturday.month","firstSaturday.year","firstSaturday.year","firstSaturday.month","firstSaturday.date","firstSaturday.year","firstSaturday.month","firstSaturday.date","firstSaturday.year","firstSaturday.month","firstSaturday.date","firstSaturday.year","firstSaturday.month","firstSaturday.date","firstSaturday.year","firstSaturday.month","firstSaturday.date","firstSaturday.year","firstSaturday.month","firstSaturday.date","monthLabelNode.innerHTML","previousYearLabelNode.innerHTML","currentYearLabelNode.innerHTML","nextYearLabelNode.innerHTML","selectedIsUsed","currentIsUsed","selectedIsUsed","todayIsUsed","date"]}}},"dojo.widget.html.DatePicker.fillInTemplate":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.widget.DatePicker.call(this);\n\t\t\tthis.initData();\n\t\t\tthis.initUI();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.html.DatePicker.initData":{"_":{"meta":{"summary":"","src":"\t\t\tthis.today = new Date();\n\t\t\tif(this.storedDate && (this.storedDate.split(\"-\").length > 2)) {\n\t\t\t\tthis.date = dojo.widget.DatePicker.util.fromRfcDate(this.storedDate);\n\t\t\t} else {\n\t\t\t\tthis.date = this.today;\n\t\t\t}\n\t\t\t\/\/ calendar math is simplified if time is set to 0\n\t\t\tthis.today.setHours(0);\n\t\t\tthis.date.setHours(0);\n\t\t\tvar month = this.date.getMonth();\n\t\t\tvar tempSaturday = dojo.widget.DatePicker.util.initFirstSaturday(this.date.getMonth().toString(), this.date.getFullYear());\n\t\t\tthis.firstSaturday.year = tempSaturday.year;\n\t\t\tthis.firstSaturday.month = tempSaturday.month;\n\t\t\tthis.firstSaturday.date = tempSaturday.date;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.html.DatePicker.setDate":{"_":{"meta":{"summary":"","parameters":{"rfcDate":{"type":""}},"src":"\t\t\tthis.storedDate = rfcDate;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.html.DatePicker.initUI":{"_":{"meta":{"summary":"","src":"\t\t\tthis.selectedIsUsed = false;\n\t\t\tthis.currentIsUsed = false;\n\t\t\tvar currentClassName = \"\";\n\t\t\tvar previousDate = new Date();\n\t\t\tvar calendarNodes = this.calendarDatesContainerNode.getElementsByTagName(\"td\");\n\t\t\tvar currentCalendarNode;\n\t\t\t\/\/ set hours of date such that there is no chance of rounding error due to \n\t\t\t\/\/ time change in local time zones\n\t\t\tpreviousDate.setHours(8);\n\t\t\tvar nextDate = new Date(this.firstSaturday.year, this.firstSaturday.month, this.firstSaturday.date, 8);\n\t\t\t\n\t\t\tif(this.firstSaturday.date < 7) {\n\t\t\t\t\/\/ this means there are days to show from the previous month\n\t\t\t\tvar dayInWeek = 6;\n\t\t\t\tfor (var i=this.firstSaturday.date; i>0; i--) {\n\t\t\t\t\tcurrentCalendarNode = calendarNodes.item(dayInWeek);\n\t\t\t\t\tcurrentCalendarNode.innerHTML = nextDate.getDate();\n\t\t\t\t\tdojo.html.setClass(currentCalendarNode, this.getDateClassName(nextDate, \"current\"));\n\t\t\t\t\tdayInWeek--;\n\t\t\t\t\tpreviousDate = nextDate;\n\t\t\t\t\tnextDate = this.incrementDate(nextDate, false);\n\t\t\t\t}\n\t\t\t\tfor(var i=dayInWeek; i>-1; i--) {\n\t\t\t\t\tcurrentCalendarNode = calendarNodes.item(i);\n\t\t\t\t\tcurrentCalendarNode.innerHTML = nextDate.getDate();\n\t\t\t\t\tdojo.html.setClass(currentCalendarNode, this.getDateClassName(nextDate, \"previous\"));\n\t\t\t\t\tpreviousDate = nextDate;\n\t\t\t\t\tnextDate = this.incrementDate(nextDate, false);\t\t\t\t\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnextDate.setDate(this.firstSaturday.date-6);\n\t\t\t\tfor(var i=0; i<7; i++) {\n\t\t\t\t\tcurrentCalendarNode = calendarNodes.item(i);\n\t\t\t\t\tcurrentCalendarNode.innerHTML = nextDate.getDate();\n\t\t\t\t\tdojo.html.setClass(currentCalendarNode, this.getDateClassName(nextDate, \"current\"));\n\t\t\t\t\tpreviousDate = nextDate;\n\t\t\t\t\tnextDate = this.incrementDate(nextDate, true);\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t\tpreviousDate.setDate(this.firstSaturday.date);\n\t\t\tpreviousDate.setMonth(this.firstSaturday.month);\n\t\t\tpreviousDate.setFullYear(this.firstSaturday.year);\n\t\t\tnextDate = this.incrementDate(previousDate, true);\n\t\t\tvar count = 7;\n\t\t\tcurrentCalendarNode = calendarNodes.item(count);\n\t\t\twhile((nextDate.getMonth() == previousDate.getMonth()) && (count<42)) {\n\t\t\t\tcurrentCalendarNode.innerHTML = nextDate.getDate();\n\t\t\t\tdojo.html.setClass(currentCalendarNode, this.getDateClassName(nextDate, \"current\"));\n\t\t\t\tcurrentCalendarNode = calendarNodes.item(++count);\n\t\t\t\tpreviousDate = nextDate;\n\t\t\t\tnextDate = this.incrementDate(nextDate, true);\n\t\t\t}\n\t\t\t\n\t\t\twhile(count < 42) {\n\t\t\t\tcurrentCalendarNode.innerHTML = nextDate.getDate();\n\t\t\t\tdojo.html.setClass(currentCalendarNode, this.getDateClassName(nextDate, \"next\"));\n\t\t\t\tcurrentCalendarNode = calendarNodes.item(++count);\n\t\t\t\tpreviousDate = nextDate;\n\t\t\t\tnextDate = this.incrementDate(nextDate, true);\n\t\t\t}\n\t\t\tthis.setMonthLabel(this.firstSaturday.month);\n\t\t\tthis.setYearLabels(this.firstSaturday.year);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.html.DatePicker.incrementDate":{"_":{"meta":{"summary":"","parameters":{"date":{"type":""},"bool":{"type":""}},"src":"\t\t\tvar increment = 1000 * 60 * 60 * 24;\n\t\t\ttime = (bool) ? (time + increment) : (time - increment);\n\t\t\tvar returnDate = new Date();\n\t\t\treturnDate.setTime(time);\n\t\t\treturn returnDate;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.html.DatePicker.incrementWeek":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar date = this.firstSaturday.date;\n\t\t\tvar month = this.firstSaturday.month;\n\t\t\tvar year = this.firstSaturday.year;\n\t\t\tswitch(evt.target) {\n\t\t\t\tcase this.increaseWeekNode.getElementsByTagName(\"img\").item(0): \n\t\t\t\tcase this.increaseWeekNode:\n\t\t\t\t\tdate = date + 7;\n\t\t\t\t\tif (date>this._daysIn(month,year)) {\n\t\t\t\t\t\tdate = date - this._daysIn(month,year);\n\t\t\t\t\t\tif (month < 11) {\n\t\t\t\t\t\t\tmonth++;\t\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmonth=0;\n\t\t\t\t\t\t\tyear++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.decreaseWeekNode.getElementsByTagName(\"img\").item(0):\n\t\t\t\tcase this.decreaseWeekNode:\n\t\t\t\t\tif (date > 7) {\n\t\t\t\t\t\tdate = date - 7;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar diff = 7 - date;\n\t\t\t\t\t\tif (month > 0) {\n\t\t\t\t\t\t\tmonth--;\n\t\t\t\t\t\t\tdate = this._daysIn(month,year) - diff;\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tyear--;\n\t\t\t\t\t\t\tmonth=11;\n\t\t\t\t\t\t\tdate = 31 - diff;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\n\t\t\t}\n\t\n\t\t\tthis.firstSaturday.date=date;\n\t\t\tthis.firstSaturday.month=month;\n\t\t\tthis.firstSaturday.year=year;\n\t\t\tthis.initUI();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.html.DatePicker.this.increaseWeekNode":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar date = this.firstSaturday.date;\n\t\t\tvar month = this.firstSaturday.month;\n\t\t\tvar year = this.firstSaturday.year;\n\t\t\tswitch(evt.target) {\n\t\t\t\tcase this.increaseWeekNode.getElementsByTagName(\"img\").item(0): \n\t\t\t\tcase this.increaseWeekNode:\n\t\t\t\t\tdate = date + 7;\n\t\t\t\t\tif (date>this._daysIn(month,year)) {\n\t\t\t\t\t\tdate = date - this._daysIn(month,year);\n\t\t\t\t\t\tif (month < 11) {\n\t\t\t\t\t\t\tmonth++;\t\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmonth=0;\n\t\t\t\t\t\t\tyear++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.decreaseWeekNode.getElementsByTagName(\"img\").item(0):\n\t\t\t\tcase this.decreaseWeekNode:\n\t\t\t\t\tif (date > 7) {\n\t\t\t\t\t\tdate = date - 7;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar diff = 7 - date;\n\t\t\t\t\t\tif (month > 0) {\n\t\t\t\t\t\t\tmonth--;\n\t\t\t\t\t\t\tdate = this._daysIn(month,year) - diff;\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tyear--;\n\t\t\t\t\t\t\tmonth=11;\n\t\t\t\t\t\t\tdate = 31 - diff;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\n\t\t\t}\n\t\n\t\t\tthis.firstSaturday.date=date;\n\t\t\tthis.firstSaturday.month=month;\n\t\t\tthis.firstSaturday.year=year;\n\t\t\tthis.initUI();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.html.DatePicker.this.decreaseWeekNode":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar date = this.firstSaturday.date;\n\t\t\tvar month = this.firstSaturday.month;\n\t\t\tvar year = this.firstSaturday.year;\n\t\t\tswitch(evt.target) {\n\t\t\t\tcase this.increaseWeekNode.getElementsByTagName(\"img\").item(0): \n\t\t\t\tcase this.increaseWeekNode:\n\t\t\t\t\tdate = date + 7;\n\t\t\t\t\tif (date>this._daysIn(month,year)) {\n\t\t\t\t\t\tdate = date - this._daysIn(month,year);\n\t\t\t\t\t\tif (month < 11) {\n\t\t\t\t\t\t\tmonth++;\t\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmonth=0;\n\t\t\t\t\t\t\tyear++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.decreaseWeekNode.getElementsByTagName(\"img\").item(0):\n\t\t\t\tcase this.decreaseWeekNode:\n\t\t\t\t\tif (date > 7) {\n\t\t\t\t\t\tdate = date - 7;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar diff = 7 - date;\n\t\t\t\t\t\tif (month > 0) {\n\t\t\t\t\t\t\tmonth--;\n\t\t\t\t\t\t\tdate = this._daysIn(month,year) - diff;\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tyear--;\n\t\t\t\t\t\t\tmonth=11;\n\t\t\t\t\t\t\tdate = 31 - diff;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\n\t\t\t}\n\t\n\t\t\tthis.firstSaturday.date=date;\n\t\t\tthis.firstSaturday.month=month;\n\t\t\tthis.firstSaturday.year=year;\n\t\t\tthis.initUI();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.html.DatePicker.incrementMonth":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar month = this.firstSaturday.month;\n\t\t\tvar year = this.firstSaturday.year;\n\t\t\tswitch(evt.currentTarget) {\n\t\t\t\tcase this.increaseMonthNode:\n\t\t\t\t\tif(month < 11) {\n\t\t\t\t\t\tmonth++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmonth = 0;\n\t\t\t\t\t\tyear++;\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.setYearLabels(year);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.decreaseMonthNode:\n\t\t\t\t\tif(month > 0) {\n\t\t\t\t\t\tmonth--;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmonth = 11;\n\t\t\t\t\t\tyear--;\n\t\t\t\t\t\tthis.setYearLabels(year);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.increaseMonthNode.getElementsByTagName(\"img\").item(0):\n\t\t\t\t\tif(month < 11) {\n\t\t\t\t\t\tmonth++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmonth = 0;\n\t\t\t\t\t\tyear++;\n\t\t\t\t\t\tthis.setYearLabels(year);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.decreaseMonthNode.getElementsByTagName(\"img\").item(0):\n\t\t\t\t\tif(month > 0) {\n\t\t\t\t\t\tmonth--;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmonth = 11;\n\t\t\t\t\t\tyear--;\n\t\t\t\t\t\tthis.setYearLabels(year);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar tempSaturday = dojo.widget.DatePicker.util.initFirstSaturday(month.toString(), year);\n\t\t\tthis.firstSaturday.year = tempSaturday.year;\n\t\t\tthis.firstSaturday.month = tempSaturday.month;\n\t\t\tthis.firstSaturday.date = tempSaturday.date;\n\t\t\tthis.initUI();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.html.DatePicker.this.increaseMonthNode":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar month = this.firstSaturday.month;\n\t\t\tvar year = this.firstSaturday.year;\n\t\t\tswitch(evt.currentTarget) {\n\t\t\t\tcase this.increaseMonthNode:\n\t\t\t\t\tif(month < 11) {\n\t\t\t\t\t\tmonth++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmonth = 0;\n\t\t\t\t\t\tyear++;\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.setYearLabels(year);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.decreaseMonthNode:\n\t\t\t\t\tif(month > 0) {\n\t\t\t\t\t\tmonth--;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmonth = 11;\n\t\t\t\t\t\tyear--;\n\t\t\t\t\t\tthis.setYearLabels(year);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.increaseMonthNode.getElementsByTagName(\"img\").item(0):\n\t\t\t\t\tif(month < 11) {\n\t\t\t\t\t\tmonth++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmonth = 0;\n\t\t\t\t\t\tyear++;\n\t\t\t\t\t\tthis.setYearLabels(year);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.decreaseMonthNode.getElementsByTagName(\"img\").item(0):\n\t\t\t\t\tif(month > 0) {\n\t\t\t\t\t\tmonth--;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmonth = 11;\n\t\t\t\t\t\tyear--;\n\t\t\t\t\t\tthis.setYearLabels(year);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar tempSaturday = dojo.widget.DatePicker.util.initFirstSaturday(month.toString(), year);\n\t\t\tthis.firstSaturday.year = tempSaturday.year;\n\t\t\tthis.firstSaturday.month = tempSaturday.month;\n\t\t\tthis.firstSaturday.date = tempSaturday.date;\n\t\t\tthis.initUI();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.html.DatePicker.this.decreaseMonthNode":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar month = this.firstSaturday.month;\n\t\t\tvar year = this.firstSaturday.year;\n\t\t\tswitch(evt.currentTarget) {\n\t\t\t\tcase this.increaseMonthNode:\n\t\t\t\t\tif(month < 11) {\n\t\t\t\t\t\tmonth++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmonth = 0;\n\t\t\t\t\t\tyear++;\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.setYearLabels(year);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.decreaseMonthNode:\n\t\t\t\t\tif(month > 0) {\n\t\t\t\t\t\tmonth--;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmonth = 11;\n\t\t\t\t\t\tyear--;\n\t\t\t\t\t\tthis.setYearLabels(year);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.increaseMonthNode.getElementsByTagName(\"img\").item(0):\n\t\t\t\t\tif(month < 11) {\n\t\t\t\t\t\tmonth++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmonth = 0;\n\t\t\t\t\t\tyear++;\n\t\t\t\t\t\tthis.setYearLabels(year);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.decreaseMonthNode.getElementsByTagName(\"img\").item(0):\n\t\t\t\t\tif(month > 0) {\n\t\t\t\t\t\tmonth--;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmonth = 11;\n\t\t\t\t\t\tyear--;\n\t\t\t\t\t\tthis.setYearLabels(year);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar tempSaturday = dojo.widget.DatePicker.util.initFirstSaturday(month.toString(), year);\n\t\t\tthis.firstSaturday.year = tempSaturday.year;\n\t\t\tthis.firstSaturday.month = tempSaturday.month;\n\t\t\tthis.firstSaturday.date = tempSaturday.date;\n\t\t\tthis.initUI();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.html.DatePicker.incrementYear":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar year = this.firstSaturday.year;\n\t\t\tswitch(evt.target) {\n\t\t\t\tcase this.nextYearLabelNode:\n\t\t\t\t\tyear++;\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.previousYearLabelNode:\n\t\t\t\t\tyear--;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar tempSaturday = dojo.widget.DatePicker.util.initFirstSaturday(this.firstSaturday.month.toString(), year);\n\t\t\tthis.firstSaturday.year = tempSaturday.year;\n\t\t\tthis.firstSaturday.month = tempSaturday.month;\n\t\t\tthis.firstSaturday.date = tempSaturday.date;\n\t\t\tthis.initUI();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.html.DatePicker.this.nextYearLabelNode":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar year = this.firstSaturday.year;\n\t\t\tswitch(evt.target) {\n\t\t\t\tcase this.nextYearLabelNode:\n\t\t\t\t\tyear++;\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.previousYearLabelNode:\n\t\t\t\t\tyear--;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar tempSaturday = dojo.widget.DatePicker.util.initFirstSaturday(this.firstSaturday.month.toString(), year);\n\t\t\tthis.firstSaturday.year = tempSaturday.year;\n\t\t\tthis.firstSaturday.month = tempSaturday.month;\n\t\t\tthis.firstSaturday.date = tempSaturday.date;\n\t\t\tthis.initUI();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.html.DatePicker.this.previousYearLabelNode":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tvar year = this.firstSaturday.year;\n\t\t\tswitch(evt.target) {\n\t\t\t\tcase this.nextYearLabelNode:\n\t\t\t\t\tyear++;\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.previousYearLabelNode:\n\t\t\t\t\tyear--;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar tempSaturday = dojo.widget.DatePicker.util.initFirstSaturday(this.firstSaturday.month.toString(), year);\n\t\t\tthis.firstSaturday.year = tempSaturday.year;\n\t\t\tthis.firstSaturday.month = tempSaturday.month;\n\t\t\tthis.firstSaturday.date = tempSaturday.date;\n\t\t\tthis.initUI();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.html.DatePicker._daysIn":{"_":{"meta":{"summary":"","parameters":{"month":{"type":""},"ear":{"type":""}},"src":"\t\t\tvar daysIn = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]; \n\t\t\t\n\t\t\tif (month==1) {\n\t\t\t\treturn (year%400 == 0) ? 29: (year%100 == 0) ? 28: (year%4 == 0) ? 29: 28;\n\t\t\t} else {\n\t\t\t\treturn daysIn[month];\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.html.DatePicker.29":{"_":{"meta":{"summary":"","parameters":{"month":{"type":""},"ear":{"type":""}},"src":"\t\t\tvar daysIn = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]; \n\t\t\t\n\t\t\tif (month==1) {\n\t\t\t\treturn (year%400 == 0) ? 29: (year%100 == 0) ? 28: (year%4 == 0) ? 29: 28;\n\t\t\t} else {\n\t\t\t\treturn daysIn[month];\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.html.DatePicker.onIncrementDate":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tdojo.unimplemented('dojo.widget.html.DatePicker.onIncrementDate');","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.html.DatePicker.onIncrementWeek":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tevt.stopPropagation();\n\t\t\tthis.incrementWeek(evt);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.html.DatePicker.onIncrementMonth":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tevt.stopPropagation();\n\t\t\tthis.incrementMonth(evt);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.html.DatePicker.onIncrementYear":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tevt.stopPropagation();\n\t\t\tthis.incrementYear(evt);","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.html.DatePicker.setMonthLabel":{"_":{"meta":{"summary":"","parameters":{"monthIndex":{"type":""}},"src":"\t\t\tthis.monthLabelNode.innerHTML = dojo.date.months[monthIndex];","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.html.DatePicker.setYearLabels":{"_":{"meta":{"summary":"","parameters":{"year":{"type":""}},"src":"\t\t\tthis.previousYearLabelNode.innerHTML = year - 1;\n\t\t\tthis.currentYearLabelNode.innerHTML = year;\n\t\t\tthis.nextYearLabelNode.innerHTML = year + 1;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.html.DatePicker.getDateClassName":{"_":{"meta":{"summary":"","parameters":{"date":{"type":""},"monthState":{"type":""}},"src":"\t\t\tvar currentClassName = this.classNames[monthState];\n\t\t\tif ((!this.selectedIsUsed) && (date.getDate() == this.date.getDate()) && (date.getMonth() == this.date.getMonth()) && (date.getFullYear() == this.date.getFullYear())) {\n\t\t\t\tcurrentClassName = this.classNames.selectedDate + \" \" + currentClassName;\n\t\t\t\tthis.selectedIsUsed = 1;\n\t\t\t}\n\t\t\tif((!this.currentIsUsed) && (date.getDate() == this.today.getDate()) && (date.getMonth() == this.today.getMonth()) && (date.getFullYear() == this.today.getFullYear())) {\n\t\t\t\tcurrentClassName = currentClassName + \" \"  + this.classNames.currentDate;\n\t\t\t\tthis.currentIsUsed = 1;\n\t\t\t}\n\t\t\treturn currentClassName;","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.html.DatePicker.onClick":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tdojo.event.browser.stopEvent(evt)","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.html.DatePicker.onSetDate":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tdojo.event.browser.stopEvent(evt);\n\t\t\tthis.selectedIsUsed = 0;\n\t\t\tthis.todayIsUsed = 0;\n\t\t\tvar month = this.firstSaturday.month;\n\t\t\tvar year = this.firstSaturday.year;\n\t\t\tif (dojo.html.hasClass(evt.target, this.classNames[\"next\"])) {\n\t\t\t\tmonth = ++month % 12;\n\t\t\t\t\/\/ if month is now == 0, add a year\n\t\t\t\tyear = (month==0) ? ++year : year;\n\t\t\t} else if (dojo.html.hasClass(evt.target, this.classNames[\"previous\"])) {\n\t\t\t\tmonth = --month % 12;\n\t\t\t\t\/\/ if month is now == 0, add a year\n\t\t\t\tyear = (month==11) ? --year : year;\n\t\t\t}\n\t\t\tthis.date = new Date(year, month, evt.target.innerHTML);\n\t\t\tthis.setDate(dojo.widget.DatePicker.util.toRfcDate(this.date));\n\t\t\tthis.initUI();","this":"dojo.widget.HtmlWidget"}}}}}},"dojo.widget.html.layout":{"meta":{"requires":{"common":["dojo.lang.common","dojo.string.extras","dojo.html.style","dojo.html.layout"]},"methods":{"dojo.widget.html.layout":{"_":{"meta":{"summary":"","parameters":{"container":{"type":""},"children":{"type":""},"layoutPriority":{"type":""}},"src":"\tdojo.html.addClass(container, \"dojoLayoutContainer\");\n\n\t\/\/ Copy children array and remove elements w\/out layout.\n\t\/\/ Also record each child's position in the input array, for sorting purposes.\n\tchildren = dojo.lang.filter(children, function(child, idx){\n\t\tchild.idx = idx;\n\t\treturn dojo.lang.inArray([\"top\",\"bottom\",\"left\",\"right\",\"client\",\"flood\"], child.layoutAlign)\n\t});\n\n\t\/\/ Order the children according to layoutPriority.\n\t\/\/ Multiple children w\/the same layoutPriority will be sorted by their position in the input array.\n\tif(layoutPriority && layoutPriority!=\"none\"){\n\t\tvar rank = function(child){\n\t\t\tswitch(child.layoutAlign){\n\t\t\t\tcase \"flood\":\n\t\t\t\t\treturn 1;\n\t\t\t\tcase \"left\":\n\t\t\t\tcase \"right\":\n\t\t\t\t\treturn (layoutPriority==\"left-right\") ? 2 : 3;\n\t\t\t\tcase \"top\":\n\t\t\t\tcase \"bottom\":\n\t\t\t\t\treturn (layoutPriority==\"left-right\") ? 3 : 2;\n\t\t\t\tdefault:\n\t\t\t\t\treturn 4;\n\t\t\t}\n\t\t};\n\t\tchildren.sort(function(a,b){\n\t\t\treturn (rank(a)-rank(b)) || (a.idx - b.idx);\n\t\t});\n\t}\n\n\t\/\/ remaining space (blank area where nothing has been written)\n\tvar f={\n\t\ttop: dojo.html.getPixelValue(container, \"padding-top\", true),\n\t\tleft: dojo.html.getPixelValue(container, \"padding-left\", true)\n\t};\n\tdojo.lang.mixin(f, dojo.html.getContentBox(container));\n\n\t\/\/ set positions\/sizes\n\tdojo.lang.forEach(children, function(child){\n\t\tvar elm=child.domNode;\n\t\tvar pos=child.layoutAlign;\n\t\t\/\/ set elem to upper left corner of unused space; may move it later\n\t\twith(elm.style){\n\t\t\tleft = f.left+\"px\";\n\t\t\ttop = f.top+\"px\";\n\t\t\tbottom = \"auto\";\n\t\t\tright = \"auto\";\n\t\t}\n\t\tdojo.html.addClass(elm, \"dojoAlign\" + dojo.string.capitalize(pos));\n\n\t\t\/\/ set size && adjust record of remaining space.\n\t\t\/\/ note that setting the width of a <div> may affect it's height.\n\t\t\/\/ TODO: same is true for widgets but need to implement API to support that\n\t\tif ( (pos==\"top\")||(pos==\"bottom\") ) {\n\t\t\tdojo.html.setMarginBox(elm, { width: f.width });\n\t\t\tvar h = dojo.html.getMarginBox(elm).height;\n\t\t\tf.height -= h;\n\t\t\tif(pos==\"top\"){\n\t\t\t\tf.top += h;\n\t\t\t}else{\n\t\t\t\telm.style.top = f.top + f.height + \"px\";\n\t\t\t}\n\t\t}else if(pos==\"left\" || pos==\"right\"){\n\t\t\tdojo.html.setMarginBox(elm, { height: f.height });\n\t\t\tvar w = dojo.html.getMarginBox(elm).width;\n\t\t\tf.width -= w;\n\t\t\tif(pos==\"left\"){\n\t\t\t\tf.left += w;\n\t\t\t}else{\n\t\t\t\telm.style.left = f.left + f.width + \"px\";\n\t\t\t}\n\t\t} else if(pos==\"flood\" || pos==\"client\"){\n\t\t\tdojo.html.setMarginBox(elm, { width: f.width, height: f.height });\n\t\t}\n\t\t\n\t\t\/\/ TODO: for widgets I want to call resizeTo(), but for top\/bottom\n\t\t\/\/ alignment I only want to set the width, and have the size determined\n\t\t\/\/ dynamically.  (The thinner you make a div, the more height it consumes.)\n\t\tif(child.onResized){\n\t\t\tchild.onResized();\n\t\t}\n\t});"}}}}}},"dojo.widget.html.loader":{"meta":{"requires":{"common":["dojo.widget.HtmlWidget","dojo.io.*","dojo.lang.common","dojo.lang.extras","dojo.experimental"]},"methods":{"this.toString":{"_":{"meta":{"summary":"","src":"                             return \"dojo.widget.html.loader\";   "}}},"trackerObj":{"_":{"meta":{"summary":"","parameters":{"id":{"type":""},"data":{"type":""}},"src":"\t\tthis.id = id;\n\t\tthis.data = data","this_variables":["id","data","returnValue","loader.bindObj","isLoaded","loader.isLoaded","loader.bindObj","loader._onSetContent_err","href","url","scriptScope","handler"]}}},"trackerObj.handle":{"_":{"meta":{"summary":"","parameters":{"type":{"type":""}},"src":"\t\tif(typeof dojo == 'undefined'){ return; }                                   \n\t\tvar wg = dojo.widget.byId(this.id);\n\t\tif(wg){ wg.setContent(this.data, true); }","returns":"wtf? how can dojo become undef?","this":"trackerObj"}}},"this._log":{"_":{"meta":{"summary":"","parameters":{"widget":{"type":""},"data":{"type":""}},"src":"\t\t\tif(!logger[widget.widgetId]){\n\t\t\t\tlogger[widget.widgetId] = { childrenIds: [], stack:[data] };\n\t\t\t}var children = logger[widget.widgetId].childrenIds;\n\t\t\twhile(children && children.length){\n\t\t\t\tdelete logger[children.pop()];\n\t\t\t}\n\t\t\tfor(var child in widget.children){\n\t\t\t\tlogger[widget.widgetId].childrenIds = child.widgetId;\n\t\t\t}\n\t\t\tdojo.undo.browser.addToHistory(new trackerObj(widget.widgetId, dojo.lang.shallowCopy(data, true)));\n\t\t}","this":"trackerObj"}}},"handleDefaults":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""},"handler":{"type":""},"useAlert":{"type":""}},"src":"\t\tif(!handler){ handler = \"onContentError\"; }\n\t\tif(dojo.lang.isString(e)){ e = {_text: e}; }\n\t\tif(!e._text){ e._text = e.toString(); }\n\t\te.toString = function(){ return this._text; };\n\t\tif(typeof e.returnValue != \"boolean\"){\n\t\t\te.returnValue = true; \n\t\t}\n\t\tif(typeof e.preventDefault != \"function\"){\n\t\t\te.preventDefault = function(){ this.returnValue = false; };\n\t\t}\n\t\t\/\/ call our handler\n\t\tthis[handler](e);\n\t\tif(e.returnValue){\n\t\t\tif(useAlert){\n\t\t\t\talert(e.toString());\n\t\t\t}else{\n\t\t\t\tthis.loader.callOnUnLoad.call(this, false);\n\t\t\t\tthis.onSetContent(e.toString());\n\t\t\t}\n\t\t}","this_inherits":["this.loader.callOnUnLoad"],"this":"trackerObj"}}},"downloader":{"_":{"meta":{"summary":"","parameters":{"bindArgs":{"type":""}},"src":"\t\tfor(var x in this.bindArgs){\n\t\t\tbindArgs[x] = (undef(bindArgs[x]) ? this.bindArgs[x] : undefined);\n\t\t}\n\t\tvar cache = this.cacheContent;\n\t\tif(undef(bindArgs.useCache)){ bindArgs.useCache = cache; }\n\t\tif(undef(bindArgs.preventCache)){ bindArgs.preventCache = !cache; }\n\t\tif(undef(bindArgs.mimetype)){ bindArgs.mimetype = \"text\/html\"; }\n\t\tthis.loader.bindObj = dojo.io.bind(bindArgs);","this":"trackerObj"}}},"stackRunner":{"_":{"meta":{"summary":"","parameters":{"st":{"type":""}},"src":"\t\tvar err = \"\", func = null;\n\t\tvar scope = this.scriptScope || dojo.global();\n\t\twhile(st.length){\n\t\t\tfunc = st.shift();\n\t\t\ttry{\n\t\t\t\tfunc.call(scope);\n\t\t\t}catch(e){\n\t\t\t\terr += \"\\n\"+func+\" failed: \"+e;\n\t\t\t}\n\t\t}\n\t\tif(err.length){\n\t\t\tvar name = (st== this.loader.addOnLoads) ? \"addOnLoad\" : \"addOnUnLoad\";\n\t\t\thandleDefaults.call(this, name+\" failure\\n \"+err, \"onExecError\", true);\n\t\t}","this":"trackerObj"}}},"stackPusher":{"_":{"meta":{"summary":"","parameters":{"st":{"type":""},"obj":{"type":""},"func":{"type":""}},"src":"\t\tif(typeof func == 'undefined') {\n\t\t\tst.push(obj);\n\t\t}else{\n\t\t\tst.push(function(){ obj[func](); });\n\t\t}","this":"trackerObj"}}},"refreshed":{"_":{"meta":{"summary":"","src":"\t\tthis.onResized();\n\t\tthis.onLoad();\n\t\tthis.isLoaded = true;","this":"trackerObj"}}},"asyncParse":{"_":{"meta":{"summary":"","parameters":{"data":{"type":""}},"src":"\t\tif(this.executeScripts){\n\t\t\tthis.onExecScript.call(this, data.scripts);\n\t\t}\n\t\tif(this.parseContent){\n\t\t\tthis.onContentParse.call(this);\n\t\t}\n\t\trefreshed.call(this);","this_inherits":["this.onExecScript"],"this":"trackerObj"}}},"runHandler":{"_":{"meta":{"summary":"","src":"\t\t\tthis.handler(this, this.containerNode||this.domNode);\n\t\t\trefreshed.call(this);\n\t\t\treturn false;\n\t\t}\n\t\treturn true;","this":"trackerObj"}}},"this.htmlContentBasicFix":{"_":{"meta":{"summary":" strips out <style, <link rel=stylesheet and <title tags intended to take out tags that might cause DOM faults","parameters":{"s":{"type":"string"},"url":{"type":"string||dojo.uri.Uri"}},"src":"\t\t\/************** <title> ***********\/\n\t\t\/\/ khtml can't attach a <style> or <title> node as child of body\n\t\tvar regex = \/<title[^>]*>([\\s\\S]*?)<\\\/title>\/i;\n\t\twhile(match = regex.exec(s)){\n\t\t\ttitles.push(match[1]);\n\t\t\ts = s.substring(0, match.index) + s.substr(match.index + match[0].length);\n\t\t};\n\t\t\/****************  cut out all <style> and <link rel=\"stylesheet\" href=\"..\"> **************\/\n\t\tregex = \/(?:<(style)[^>]*>([\\s\\S]*?)<\\\/style>|<link ([^>]*rel=['\"]?stylesheet['\"]?[^>]*)>)\/i;\n\t\twhile(match = regex.exec(s)){\n\t\t\tif(match[1] && match[1].toLowerCase() == \"style\"){\n\t\t\t\tstyles.push(dojo.html.fixPathsInCssText(match[2],url));\n\t\t\t}else if(attr = match[3].match(\/href=(['\"]?)([^'\">]*)\\1\/i)){\n\t\t\t\tstyles.push({path: attr[2]});\n\t\t\t}\n\t\t\ts = s.substring(0, match.index) + s.substr(match.index + match[0].length);\n\t\t};\n\t\treturn {'s': s, 'titles': titles, 'styles': styles};\/\/object","returns":"object","this":"trackerObj"}}},"this.htmlContentAdjustPaths":{"_":{"meta":{"summary":" adjusts relative paths in content to be relative to current page","parameters":{"s":{"type":"string"},"url":{"type":"string||dojo.uri.Uri"}},"src":"\t\tvar attr = [], origPath = \"\", fix = \"\";\n\n\t\t\/\/ attributepaths one tag can have multiple paths example:\n\t\t\/\/ <input src=\"...\" style=\"url(..)\"\/> or <a style=\"url(..)\" href=\"..\">\n\t\t\/\/ strip out the tag and run fix on that.\n\t\t\/\/ this guarantees that we won't run replace on another tag's attribute + it was easier do\n\t\tvar regexFindTag = \/<[a-z][a-z0-9]*[^>]*\\s(?:(?:src|href|style)=[^>])+[^>]*>\/i;\n\t\tvar regexFindAttr = \/\\s(src|href|style)=(['\"]?)([\\w()\\[\\]\\\/.,\\\\'\"-:;#=&?\\s@]+?)\\2\/i;\n\t\t\/\/ these are the supported protocols, all other is considered relative\n\t\tvar regexProtocols = \/^(?:[#]|(?:(?:https?|ftps?|file|javascript|mailto|news):))\/;\n\n\t\twhile(tag = regexFindTag.exec(s)){\n\t\t\tstr += s.substring(0, tag.index);\n\t\t\ts = s.substring((tag.index + tag[0].length), s.length);\n\t\t\ttag = tag[0];\n\n\t\t\t\/\/ loop through attributes\n\t\t\ttagFix = '';\n\t\t\twhile(attr = regexFindAttr.exec(tag)){\n\t\t\t\tpath = \"\"; origPath = attr[3];\n\t\t\t\tswitch(attr[1].toLowerCase()){\n\t\t\t\t\tcase \"src\":\/\/ falltrough\n\t\t\t\t\tcase \"href\":\n\t\t\t\t\t\tif(regexProtocols.exec(origPath)){\n\t\t\t\t\t\t\tpath = origPath;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpath = (new dojo.uri.Uri(url, origPath).toString());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"style\":\/\/ style\n\t\t\t\t\t\tpath = dojo.html.fixPathsInCssText(origPath, url);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tpath = origPath;\n\t\t\t\t}\n\n\t\t\t\tfix = \" \" + attr[1] + \"=\" + attr[2] + path + attr[2];\n\n\t\t\t\t\/\/ slices up tag before next attribute check\n\t\t\t\ttagFix += tag.substring(0, attr.index) + fix;\n\t\t\t\ttag = tag.substring((attr.index + attr[0].length), tag.length);\n\t\t\t}\n\t\t\tstr += tagFix + tag;\n\t\t}\n\t\treturn str+s; \/\/ string","returns":"string","this":"trackerObj"}}},"this.htmlContentScripts":{"_":{"meta":{"summary":" handles scripts and dojo .require(...) etc calls NOTE: we need to go through here even if we have executeScripts=false and if we have parseWidgets true","parameters":{"s":{"type":"string"},"collectScripts":{"type":"boolean"}},"src":"\t\tvar attr = \"\", tmp = null, tag = \"\", sc = \"\", str = \"\";\n\t\t\n\t\t\/***************** cut out all <script> tags, push them into scripts array ***************\/\n\t\tvar regex = \/<script([^>]*)>([\\s\\S]*?)<\\\/script>\/i;\n\t\tvar regexSrc = \/src=(['\"]?)([^\"']*)\\1\/i;\n\t\tvar regexDojoJs = \/.*(\\bdojo\\b\\.js(?:\\.uncompressed\\.js)?)$\/;\n\t\tvar regexInvalid = \/(?:var )?\\bdjConfig\\b(?:[\\s]*=[\\s]*\\{[^}]+\\                                                                         ","this":"trackerObj"}}},"this.splitAndFixPaths":{"_":{"meta":{"summary":" pathfixes, require calls, css stuff and neccesary content clean","parameters":{"args":{"type":"object"}},"src":"\t\t\/\/ make sure back\/forward buttons dont mess up url.\n\t\turl = new dojo.uri.Uri(location, args.url).toString();\n\t\tvar ret = {'xml': \t\"\",\n\t\t\t\t'styles':\t[],\n\t\t\t\t'titles':\t[],\n\t\t\t\t'requires':\t[],\n\t\t\t\t'scripts':\t[],\n\t\t\t\t'url':\t\turl };\n\n\t\tif(args.content){ \/\/ make sure we dont run regexes on empty content\n\t\t\tvar tmp = null, content = args.content;\n\t\t\tif(args.adjustPaths){\n\t\t\t\tcontent = _loader.htmlContentAdjustPaths.call(this, content, url);\n\t\t\t}\n\n\t\t\ttmp = _loader.htmlContentBasicFix.call(this, content, url);\n\t\t\tcontent = tmp.s;\n\t\t\tret.styles = tmp.styles;\n\t\t\tret.titles = tmp.titles;\n\n\t\t\tif(args.collectRequires || args.collectScripts){\n\t\t\t\ttmp = _loader.htmlContentScripts.call(this, content, args.collectScripts);\n\t\t\t\tcontent = tmp.s;\n\t\t\t\tret.requires = tmp.requires;\n\t\t\t\tret.scripts = tmp.scripts;\n\t\t\t}\n\n\t\t\t\/********* extract content *********\/\n\t\t\tvar match = [];\n\t\t\tif(args.bodyExtract){\n\t\t\t\tmatch = content.match(\/<body[^>]*>\\s*([\\s\\S]+)\\s*<\\\/body>\/im);\n\t\t\t\tif(match) { content = match[1]; }\n\t\t\t}\n\t\t\tret.xml = content;\n\t\t}\n\t\treturn ret;\/\/ object ","returns":"object","this_inherits":["_loader.htmlContentAdjustPaths","_loader.htmlContentBasicFix","_loader.htmlContentScripts"],"this":"trackerObj"}}},"this.hookUp":{"_":{"meta":{"summary":" mixin or extend loader into a widget","parameters":{"args":{"type":"object"}},"src":"\t\tif(dojo.lang.isString(widget)){\n\t\t\tif(args.mixin){\t\n\t\t\t\tdojo.raise(this.toString()+\", cant use mixin when widget is a string\");\n\t\t\t }\n\t\t\twidget = dojo.evalObjPath(widget);\n\t\t}\n\t\tif(!widget || !(widget instanceof dojo.widget.HtmlWidget)){\n\t\t\tdojo.raise(this.toString()+\" Widget is'nt defined or isnt a HtmlWidget instance\"); \n\t\t}\n\t\t\/\/ make sure we dont mixin more than once\n\t\tif(widget.loader && widget.setUrl){ return; }\n\n\t\t\/\/ extend widget prototype or mixin this widget instance\n\t\tvar widgetProto = (args.mixin) ? widget : widget.constructor.prototype;\n\t\n\t\t\/********************************************\n\t\t** per widgetImpl variables, mixin into widget \n\t\t********************************************\/\n\t\t\/\/ stuff it into a loader obj\n\t\twidget.loader = {\n\t\t\tisLoaded: false,\n\t\t\tstyleNodes:  [],\n\t\t\taddOnLoads: [],\n\t\t\taddOnUnLoads: [],\n\t\t\tcallOnUnLoad:(function(canCall){\n\t\t\t\t\t\t\treturn function(after){ this.abort();\n\t\t\t\t\t\t\t\tif(canCall){ this.onUnLoad(); }\n\t\t\t\t\t\t\t\tcanCall = after;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})(false),\n\t\t\tbindObj: null,\n\t\t\t\/\/ to disconnect widget\n\t\t\tunHook: (function(w, wg){\n\t\t\t\tvar oldProps = {\n\t\t\t\t\tisContainer: w.isContainer,\n\t\t\t\t\tadjustPats: w.adjustPaths,\n\t\t\t\t\thref: w.href,\n\t\t\t\t\textractContent: w.extractContent,\n\t\t\t\t\tparseContent: w.parseContent,\n\t\t\t\t\tcacheContent: w.cacheContent,\n\t\t\t\t\tbindArgs: w.bindArgs,\n\t\t\t\t\tpreload: w.preload,\n\t\t\t\t\trefreshOnShow: w.refreshOnShow,\n\t\t\t\t\thandler: w.handler,\n\t\t\t\t\ttrackHistory: w.trackHistory,\n\t\t\t\t\texecuteScripts: w.executeScripts,\n\t\t\t\t\tscriptScope: w.scriptScope,\n\t\t\t\t\t\/\/ functions\n\t\t\t\t\tpostCreate: w.postCreate,\n\t\t\t\t\tshow: w.show,\n\t\t\t\t\trefresh: w.refresh,\n\t\t\t\t\tloadContents: w.loadContents,\n\t\t\t\t\tabort: w.abort,\n\t\t\t\t\tdestroy: w.destroy,\n\t\t\t\t\tonLoad: w.onLoad,\n\t\t\t\t\tonUnLoad: w.onUnLoad,\n\t\t\t\t\taddOnLoad: w.addOnLoad,\n\t\t\t\t\taddOnUnLoad: w.addOnUnLoad,\n\t\t\t\t\tonDownloadStart: w.onDownloadStart,\n\t\t\t\t\tonDownloadEnd: w.onDownloadEnd,\n\t\t\t\t\tonDownloadError: w.onDownloadError,\n\t\t\t\t\tonContentError: w.onContentError,\n\t\t\t\t\tonExecError: w.onExecError,\n\t\t\t\t\tonSetContent: w.onSetContent,\n\t\t\t\t\tsetUrl: w.setUrl,\n\t\t\t\t\tsetContent: w.setContent,\n\t\t\t\t\tonContentParse: w.onContentParse,\n\t\t\t\t\tonExecScript: w.onExecScript,\n\t\t\t\t\tsetHandler: w.setHandler\n\t\t\t\t};\n\t\t\t\treturn function(){\n\t\t\t\t\tif(wg.abort){ wg.abort(); }\n\t\t\t\t\t\/\/ make sure we dont unhook prototype if there is more widgets of this type left\n\t\t\t\t\tif((w != wg) && (dojo.widget.byType(wg.widgetType).length>1)){ return; }\n\t\t\t\t\tfor(var x in oldProps){\n\t\t\t\t\t\tif(oldProps[x]===undefined){\n\t\t\t\t\t\t\tdelete w[x]; continue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tw[x] = oldProps[x];\n\t\t\t\t\t}\n\t\t\t\t\tdelete wg._loader_defined;\n\t\t\t\t\tdelete wg.loader;\n\t\t\t\t};\n\t\t\t})(widgetProto, widget)\n\t\t};\n\n\t\t\/\/ make sure we dont do this more than once per widget\/widgetprototype\n\t\tif(widgetProto._loader_defined || widget._loader_defined){ return; }\t\t\n\n\t\t\/**************** private variables *********************\/\n\n\t\t\/\/ loading options, prototype parts of widgets mixin to prototype\n\t\tdojo.mixin(widgetProto, {\n\t\t\t\/\/ always set to a containerwidget\n\t\t\tisContainer: true,\n\t\t\t\/\/ fix relative paths in content to fit into this page\n\t\t\tadjustPaths: \tundef(widgetProto.adjustPaths) ? true : widgetProto.adjustPaths,\n\t\t\t\/\/ only usable on construction, use setUrl or setContent after that\n\t\t\thref: \t\t\tundef(widgetProto.href) ? \"\" : widgetProto.href,\n\t\t\t\/\/ extract visible content from inside of <body> .... <\/body>\n\t\t\textractContent: undef(widgetProto.extractContent) ? true : widgetProto.extractContent,\n\t\t\t\/\/ construct all widgets that is in content\n\t\t\t\/\/ FIXME: rename to parseWidgets?\n\t\t\tparseContent: \tundef(widgetProto.parseContent) ? true : widgetProto.parseContent,\n\t\t\t\/\/ use io binds javascript cache, or if false, prevent browsercache\n\t\t\tcacheContent: \tundef(widgetProto.cacheContent) ? true : widgetProto.cacheContent,\n\t\t\t\/\/ specify  specific  io.bind arguments such as transport and useCache\n\t\t\tbindArgs:\t\tundef(widgetProto.bindArgs) ? {} : widgetProto.bindArgs,\n\t\t\t\/\/ force load even if widget isnt shown (lazyload setting)\n\t\t\tpreload: \t\tundef(widgetProto.preload) ? false : widgetProto.preload,\n\t\t\t\/\/ reload content automatically onShow, use with cacheContent = flase\n\t\t\trefreshOnShow:\tundef(widgetProto.refreshOnShow) ? false : widgetProto.refreshOnShow,\n\t\t\t\/\/ name of java function which should generate content\n\t\t\thandler: \t\tundef(widgetProto.handler) ? \"\" : widgetProto.handler,\n\t\t\t\/\/ if true scripts in content will be evaled after content is innerHTML'ed\n\t\t\texecuteScripts: undef(widgetProto.executeScripts) ? false : widgetProto.executeScripts,\n\t\t\t\/\/ log contents (back\/forward support)\n\t\t\ttrackHistory:\tundef(widgetProto.tracHistory) ? false : widgetProto.trackHistory,\n\t\t\tscriptScope: null \/\/ always overwrite\n\t\t});\n\n\t\t\/****************************************************\n\t\t******* public functions, becomes part of widgets API\n\t\t*****************************************************\/\n\n\t\t\/*********** Public functions that wigets cant overide **********\/\n\t\t\/\/ set up postCreate, call originalcode before our own\n\t\twidgetProto.postCreate = (function(postCreate){\n\t\t\treturn function(){\n\t\t\t\tif(widgetProto.constructor.superclass.postCreate != postCreate){\n\t\t\t\t\tpostCreate.apply(this, arguments);\n\t\t\t\t}else{\n\t\t\t\t\twidgetProto.constructor.superclass.postCreate.apply(this, arguments);\n\t\t\t\t}\n\t\t\t\tif(this.handler!==\"\"){ this.setHandler(this.handler); }\n\t\t\t\tif(this.isShowing() || this.preload){ \n\t\t\t\t\tthis.loadContents();\n\t\t\t\t\tif(!this.href){ \/\/ back\/forward save initial state\n\t\t\t\t\t\t_loader._log(this,(this.domNode||this.containerNode).innerHTML);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})(widgetProto.postCreate);\n\n\t\t\/\/ set up onShow listener, call original code after this block\n\t\twidgetProto.show = (function(show){\n\t\t\treturn function(){\n\t\t\t\t\/\/ if refreshOnShow is true, reload the contents every time; otherwise, load only the first time\n\t\t\t\tif(this.refreshOnShow){\n\t\t\t\t\tthis.refresh();\n\t\t\t\t}else{ \n\t\t\t\t\tthis.loadContents();\n\t\t\t\t}\n\t\t\t\tif((widgetProto.constructor.superclass.show == show) || !isFunc(show)){\n\t\t\t\t\twidgetProto.constructor.superclass.show.apply(this, arguments);\n\t\t\t\t}else{\n\t\t\t\t\tshow.apply(this, arguments);\n\t\t\t\t}\n\t\t\t};\n\t\t})(widgetProto.show);\n\n\t\t\/\/ destroy cleanups, original code in the middle\n\t\twidgetProto.destroy = (function(destroy){\n\t\t\treturn function(destroy){\n\t\t\t\tthis.onUnLoad();\n\t\t\t\tthis.abort();\n\t\t\t\tthis.loader.unHook();\n\t\t\t\tif((widgetProto.constructor.superclass.destroy != destroy) && isFunc(destroy)){\n\t\t\t\t\tdestroy.apply(this, arguments);\n\t\t\t\t}else{\n\t\t\t\t\twidgetProto.constructor.superclass.destroy.apply(this, arguments);\n\t\t\t\t}\n\t\t\t}\n\t\t})(widgetProto.destroy);\n\n\n\t\t\/******* Public functions that widgets can overide *****\/\n\t\t\/\/ set up a refresh function\n\t\tif(!widgetProto.refresh){\n\t\t\twidgetProto.refresh = function(){\n\t\t\t\tthis.loader.isLoaded = false;\n\t\t\t\tthis.loadContents();\n\t\t\t};\n\t\t}\n\n\t\t\/\/ set up html loading contents\n\t\tif(!widgetProto.loadContents){\n\t\t\twidgetProto.loadContents = function(){\n\t\t\t\tif(this.loader.isLoaded){ return; }\n\t\t\t\t\/\/ javafunction\n\t\t\t\tif(isFunc(this.handler)){\n\t\t\t\t\trunHandler.call(this);\n\t\t\t\t}else if(this.href !== \"\"){\n\t\t\t\t\thandleDefaults.call(this, \"Loading...\", \"onDownloadStart\");\n\t\t\t\t\tvar self = this, url = this.href;\n\t\t\t\t\tdownloader.call(this, {\n\t\t\t\t\t\turl: url,\n\t\t\t\t\t\tload: function(type, data, xhr){\n\t\t\t\t\t\t\tself.onDownloadEnd.call(self, url, data);\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: function(type, err, xhr){\n\t\t\t\t\t\t\t\/\/ XHR insnt a normal JS object, copy esentials\n\t\t\t\t\t\t\tvar e = {\n\t\t\t\t\t\t\t\tresponseText: xhr.responseText,\n\t\t\t\t\t\t\t\tstatus: xhr.status,\n\t\t\t\t\t\t\t\tstatusText: xhr.statusText,\n\t\t\t\t\t\t\t\tresponseHeaders: (xhr.getAllResponseHeaders) ? xhr.getAllResponseHeaders():[],\n\t\t\t\t\t\t\t\t_text: \"Error loading '\" + url + \"' (\" + xhr.status + \" \"+  xhr.statusText + \")\"\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\thandleDefaults.call(self, e, \"onDownloadError\");\n\t\t\t\t\t\t\tself.onLoad();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t\/\/ set up abort\n\t\tif(!widgetProto.abort){\n\t\t\twidgetProto.abort = function(){\n\t\t\t\tif(!this.loader || !this.loader.bindObj || !this.loader.bindObj.abort){ return; }\n\t\t\t\tthis.loader.bindObj.abort();\n\t\t\t\tthis.loader.bindObj = null;\n\t\t\t};\n\t\t}\n\n\t\t\/\/ onLoad\n\t\tif(!widgetProto.onLoad){\n\t\t\twidgetProto.onLoad = function(){\n\t\t\t\tstackRunner.call(this, this.loader.addOnLoads);\n\t\t\t\tthis.loader.isLoaded = true;\n\t\t\t};\n\t\t}\n\n\t\t\/\/ onUnLoad, original code in the middle\n\t\tif(!widgetProto.onUnLoad){\n\t\t\twidgetProto.onUnLoad = function(){\n\t\t\t\tstackRunner.call(this, this.loader.addOnUnLoads);\n\t\t\t\tdelete this.scriptScope;\n\t\t\t}\n\t\t}\n\n\t\t\/\/ add to onLoad queue\n\t\tif(!widgetProto.addOnLoad){\n\t\t\twidgetProto.addOnLoad = function(obj, func){\n\t\t\t\tstackPusher.call(this, this.loader.addOnLoads, obj, func);\n\t\t\t};\n\t\t}\n\n\t\t\/\/ add to onUnLoad queue \n\t\tif(!widgetProto.addOnUnLoad){\n\t\t\twidgetProto.addOnUnLoad = function(obj, func){\n\t\t\t\tstackPusher.call(this, this.loader.addOnUnLoads, obj, func);\n\t\t\t}\n\t\t}\n\n\t\t\/\/ script or java errors, preventDefault-able\n\t\tif(!widgetProto.onExecError){\n\t\t\twidgetProto.onExecError = function(){\/*stub*\/};\n\t\t}\n\t\n\t\t\/\/ called on DOM faults, require fault etc in content, preventDefault-able\n\t\tif(!widgetProto.onContentError){\n\t\t\twidgetProto.onContentError = function(){\/*stub*\/};\n\t\t}\n\t\n\t\t\/\/ called when download error occurs, preventDefault-able\n\t\tif(!widgetProto.onDownloadError){\n\t\t\twidgetProto.onDownloadError = function(){\/*stub*\/};\n\t\t}\n\t\n\t\t\/\/ called before download starts, preventDefault-able\n\t\tif(!widgetProto.onDownloadStart){\n\t\t\twidgetProto.onDownloadStart = function(onDownloadStart){\/*stub*\/};\n\t\t}\n\t\n\t\t\/\/ called when download is finished successfully\n\t\tif(!widgetProto.onDownloadEnd){\n\t\t\twidgetProto.onDownloadEnd = function(url, data){\n\t\t\t\tvar args =  {content: data,\n\t\t\t\t\t\t\turl: url,\n\t\t\t\t\t\t\tadjustPaths: this.adjustPaths,\n\t\t\t\t\t\t\tcollectScripts: this.executeScripts,\n\t\t\t\t\t\t\tcollectRequires: this.parseContent,\n\t\t\t\t\t\t\tbodyExtract: this.extractContent };\n\t\t\t\tdata = _loader.splitAndFixPaths.call(this, args);\n\t\t\t\tthis.setContent(data);\n\t\t\t}\n\t\t}\n\n\t\t\/\/ previously called _setContent, widget defined onSetContent can modify content or cancel\n\t\tif(!widgetProto.onSetContent){\n\t\t\twidgetProto.onSetContent = function(cont){\n\t\t\t\tthis.destroyChildren();\n\t\t\n\t\t\t\t\/\/ remove old stylenodes from HEAD\n\t\t\t\tvar styleNodes = this.loader.styleNodes;\n\t\t\t\twhile(styleNodes.length){\n\t\t\t\t\tvar st = styleNodes.pop();\n\t\t\t\t\tif(st && st.parentNode){\n\t\t\t\t\t\tst.parentNode.removeChild(st);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\n\t\t\t\tvar node = this.containerNode || this.domNode;\n\t\t\t\twhile(node.firstChild){\n\t\t\t\t\ttry{\n\t\t\t\t\t\tdojo.event.browser.clean(node.firstChild);\n\t\t\t\t\t}catch(e){}\n\t\t\t\t\tnode.removeChild(node.firstChild);\n\t\t\t\t}\n\t\t\t\ttry{\n\t\t\t\t\tif(typeof cont != \"string\"){\n\t\t\t\t\t\tnode.appendChild(cont);\n\t\t\t\t\t}else{\n\t\t\t\t\t\ttry{\/\/ hack to deal with domfaults, ie. appending div to tablenodes\n\t\t\t\t\t\t\tnode.innerHTML = cont;\n\t\t\t\t\t\t}catch(e){var tmp;\n\t\t\t\t\t\t\t(tmp = dojo.doc().createElement(\"div\")).innerHTML = cont;\n\t\t\t\t\t\t\twhile(tmp.firstChild){\n\t\t\t\t\t\t\t\tnode.appendChild(tmp.removeChild(tmp.firstChild));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}catch(e){\n\t\t\t\t\te._text = \"Could'nt load content: \"+e;\n\t\t\t\t\tvar useAlert = (this.loader._onSetContent_err == e._text); \/\/ make sure we dont loop\n\t\t\t\t\tthis.loader._onSetContent_err = e._text;\n\t\t\t\t\thandleDefaults.call(this, e, \"onContentError\", useAlert);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tif(!widgetProto.setUrl){\n\t\t\twidgetProto.setUrl = function(url){\n\t\t\t\tthis.href = url;\n\t\t\t\tthis.loader.isLoaded = false;\n\t\t\t\tif ( this.preload || this.isShowing() ){\n\t\t\t\t\tthis.loadContents();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(!widgetProto.setContent){\n\t\t\twidgetProto.setContent = function(data, dontLog){\n\t\t\t\tthis.loader.callOnUnLoad.call(this, true);\n\t\t\n\t\t\t\tif(!data||dojo.html.isNode(data)){\n\t\t\t\t\tthis.onSetContent(data);\n\t\t\t\t\trefreshed.call(this);\n\t\t\t\t}else{\n\t\t\t\t\t\/\/ need to run splitAndFixPaths? ie. manually setting content\n\t\t\t\t\t\/\/ adjustPaths is taken care of inside splitAndFixPaths\n\t\t\t\t\tif(typeof data.xml != 'string'){\n\t\t\t\t\t\tthis.href = \"\"; \/\/ so we can refresh safely\n\t\t\t\t\t\tvar args =  {content: data,\n\t\t\t\t\t\t\turl: this.href,\n\t\t\t\t\t\t\tadjustPaths: this.adjustPaths,\n\t\t\t\t\t\t\tcollectScripts: this.executeScripts,\n\t\t\t\t\t\t\tcollectRequires: this.parseContent,\n\t\t\t\t\t\t\tbodyExtract: this.extractContent };\n\t\t\t\t\t\tdata = _loader.splitAndFixPaths.call(this, args); \n\t\t\t\t\t}else if(data.url!=\".\/\"){\n\t\t\t\t\t\t this.url = data.url;\/\/ backbutton thing\n\t\t\t\t\t}\n\t\t\t\t\tthis.onSetContent(data.xml);\n\t\n\t\t\t\t\t\/\/ insert styles from content (in same order they came in)\n\t\t\t\t\tfor(var i = 0, styles = data.styles; i < styles.length; i++){\n\t\t\t\t\t\tif(styles[i].path){\n\t\t\t\t\t\t\tthis.loader.styleNodes.push(dojo.html.insertCssFile(styles[i].path));\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.loader.styleNodes.push(dojo.html.insertCssText(styles[i]));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\n\t\t\t\t\tif(this.parseContent){\n\t\t\t\t\t\tfor(var i = 0, requires = data.requires; i < requires.length; i++){\n\t\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\t\teval(requires[i]);\n\t\t\t\t\t\t\t} catch(e){\n\t\t\t\t\t\t\t\te._text = \"dojo.widget.html.loader.hookUp: error in package loading calls, \"+(e.description||e);\n\t\t\t\t\t\t\t\thandleDefaults.call(this, e, \"onContentError\", true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\/\/ need to allow async load, Xdomain uses it\n\t\t\t\t\t\/\/ NOTE: on Xdomain loads this can break the sync thread of setContent\n\t\t\t\t\t\/\/ \t\tif you you do any dojo. require(...) etc\n\t\t\t\t\tif(dojo.hostenv.isXDomain && data.requires.length){\n\t\t\t\t\t\tdojo.addOnLoad(function(){ \n\t\t\t\t\t\t\tasyncParse.call(this, data);\n\t\t\t\t\t\t\tif(!dontLog){\n\t\t\t\t\t\t\t\t_loader._log(this, data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\/\/ this opens a thread need abort undo\n\t\t\t\t\t\tdontLog = true;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tasyncParse.call(this, data);\n\t\t\t\t\t}\n\t\t\t\t}if(!dontLog){\n\/\/ \t\t\t\t\t_loader._log(this, data);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tif(!widgetProto.onContentParse){\n\t\t\twidgetProto.onContentParse = function(){\n\t\t\t\tvar node = this.containerNode || this.domNode;\n\t\t\t\tvar parser = new dojo.xml.Parse();\n\t\t\t\tvar frag = parser.parseElement(node, null, true);\n\t\t\t\tdojo.widget.getParser().createSubComponents(frag, this);\n\t\t\t};\n\t\t}\n\n\t\t\/\/ previously called _executeScripts\n\t\tif(!widgetProto.onExecScript){\n\t\t\twidgetProto.onExecScript = function(scripts){\n\t\t\t\t\/\/ loop through the scripts in the order they came in\n\t\t\t\tvar self = this, tmp = \"\", code = \"\";\n\t\t\t\tfor(var i = 0; i < scripts.length; i++){ \/\/ remotescript\n\t\t\t\t\tif(scripts[i].path){\n\t\t\t\t\t\tvar url = scripts[i].path;\n\t\t\t\t\t\tdownloader.call(this,{\n\t\t\t\t\t\t\t'url': \t\turl,\n\t\t\t\t\t\t\t'load': function(type, scriptStr){\n\t\t\t\t\t\t\t\t(function(){tmp = scriptStr; scripts[i] = scriptStr;}).call(self);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'error': function(type, error){\n\t\t\t\t\t\t\t\terror._text = type + \" downloading remote script\";\n\t\t\t\t\t\t\t\thandleDefaults.call(self, error, \"onExecError\", true);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'mimetype': \"text\/plain\",\n\t\t\t\t\t\t\t'sync':     true\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcode += tmp;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tcode += scripts[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttry{\n\t\t\t\t\t\/\/ initialize a new anonymous container for our script, dont make it part of this widgets scope chain\n\t\t\t\t\t\/\/ instead send in a variable that points to this widget, usefull to connect events to onLoad, onUnLoad etc..\n\t\t\t\t\tdelete this.scriptScope;\n\t\t\t\t\tthis.scriptScope = new (new Function('_container_', code+'; return this;'))(self);\n\t\t\t\t}catch(e){\n\t\t\t\t\te._text = \"Error running scripts from content:\\n\"+(e.description||e.toString());\n\t\t\t\t\thandleDefaults.call(this, e, \"onExecError\", true);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t\/\/ Generate content from given java function\n\t\tif(!widgetProto.setHandler){\n\t\t\twidgetProto.setHandler = function(handler) {\n\t\t\t\tvar fcn = dojo.lang.isFunction(handler) ? handler : window[handler];\n\t\t\t\tif(!isFunc(fcn)) {\n\t\t\t\t\t\/\/ FIXME: needs testing! somebody with java knowledge needs to try this\n\t\t\t\t\thandleDefaults.call(this, \"Unable to set handler, '\" + handler + \"' not a function.\", \"onExecError\", true);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.handler = function() {\n\t\t\t\t\treturn fcn.apply(this, arguments);\n\t\t\t\t};\n\t\t\t};\n\t\t}\n\n\t\t\/\/ make sure we extend this widget only once\n\t\twidgetProto._loader_defined = true;","this":"trackerObj"}}},"this.hookUp.handler":{"_":{"meta":{"summary":"","src":"\t\t\t\t\treturn fcn.apply(this, arguments);"}}}}}},"dojo.widget.html.stabile":{"meta":{"methods":{"dojo.widget.html.stabile.getState":{"_":{"meta":{"summary":"","parameters":{"id":{"type":""}},"src":"\tdojo.widget.html.stabile.setup();\n\treturn dojo.widget.html.stabile.widgetState[id];"}}},"dojo.widget.html.stabile.setState":{"_":{"meta":{"summary":"","parameters":{"id":{"type":""},"state":{"type":""},"isCommit":{"type":""}},"src":"\tdojo.widget.html.stabile.setup();\n\tdojo.widget.html.stabile.widgetState[id] = state;\n\tif(isCommit){\n\t\tdojo.widget.html.stabile.commit(dojo.widget.html.stabile.widgetState);\n\t}"}}},"dojo.widget.html.stabile.setup":{"_":{"meta":{"summary":"","src":"\tif(!dojo.widget.html.stabile.widgetState){\n\t\tvar text = dojo.widget.html.stabile.getStorage().value;\n\t\tdojo.widget.html.stabile.widgetState = text ? dj_eval(\"(\"+text+\")\") : {};\n\t}"}}},"dojo.widget.html.stabile.commit":{"_":{"meta":{"summary":"","parameters":{"state":{"type":""}},"src":"\tdojo.widget.html.stabile.getStorage().value = dojo.widget.html.stabile.description(state);"}}},"dojo.widget.html.stabile.description":{"_":{"meta":{"summary":"","parameters":{"v":{"type":""},"showAll":{"type":""}},"src":"\tvar describeThis = function() {\n\t\t return this.description(this, true);\n\t} \n\t\n\ttry {\n\n\t\tif(v===void(0)){\n\t\t\treturn \"undefined\";\n\t\t}\n\t\tif(v===null){\n\t\t\treturn \"null\";\n\t\t}\n\t\tif(typeof(v)==\"boolean\" || typeof(v)==\"number\"\n\t\t    || v instanceof Boolean || v instanceof Number){\n\t\t\treturn v.toString();\n\t\t}\n\n\t\tif(typeof(v)==\"string\" || v instanceof String){\n\t\t\t\/\/ Quote strings and their contents as required.\n\t\t\t\/\/ Replacing by $& fails in IE 5.0\n\t\t\tvar v1 = v.replace(dojo.widget.html.stabile._sqQuotables, \"\\\\$1\"); \n\t\t\tv1 = v1.replace(\/\\n\/g, \"\\\\n\");\n\t\t\tv1 = v1.replace(\/\\r\/g, \"\\\\r\");\n\t\t\t\/\/ Any other important special cases?\n\t\t\treturn \"'\"+v1+\"'\";\n\t\t}\n\n\t\tif(v instanceof Date){\n\t\t\t\/\/ Create a data constructor.\n\t\t\treturn \"new Date(\"+d.getFullYear+\",\"+d.getMonth()+\",\"+d.getDate()+\")\";\n\t\t}\n\n\t\tvar d;\n\t\tif(v instanceof Array || v.push){\n\t\t\t\/\/ \"push\" test needed for KHTML\/Safari, don't know why -cp\n\n\t\t\tif(depth>=dojo.widget.html.stabile.depthLimit)\n\t\t\t  return \"[ ... ]\";\n\n\t\t\td = \"[\";\n\t\t\tvar first = true;\n\t\t\tdojo.widget.html.stabile._depth++;\n\t\t\tfor(var i=0; i<v.length; i++){\n\t\t\t\t\/\/ Skip functions and undefined values\n\t\t\t\t\/\/ if(v[i]==undef || typeof(v[i])==\"function\")\n\t\t\t\t\/\/   continue;\n\t\t\t\tif(first){\n\t\t\t\t\tfirst = false;\n\t\t\t\t}else{\n\t\t\t\t\td += \",\";\n\t\t\t\t}\n\t\t\t\td+=arguments.callee(v[i], showAll);\n\t\t\t}\n\t\t\treturn d+\"]\";\n\t\t}\n\n\t\tif(v.constructor==Object\n\t\t    || v.toString==describeThis){\n\t\t\tif(depth>=dojo.widget.html.stabile.depthLimit)\n\t\t\t  return \"{ ... }\";\n\n\t\t\t\/\/ Instanceof Hash is good, or if we just use Objects,\n\t\t\t\/\/ we can say v.constructor==Object.\n\t\t\t\/\/ IE (5?) lacks hasOwnProperty, but perhaps objects do not always\n\t\t\t\/\/ have prototypes??\n\t\t\tif(typeof(v.hasOwnProperty)!=\"function\" && v.prototype){\n\t\t\t\tthrow new Error(\"description: \"+v+\" not supported by script engine\");\n\t\t\t}\n\t\t\tvar first = true;\n\t\t\td = \"{\";\n\t\t\tdojo.widget.html.stabile._depth++;\n\t\t\tfor(var key in v){\n\t\t\t\t\/\/ Skip values that are functions or undefined.\n\t\t\t\tif(v[key]==void(0) || typeof(v[key])==\"function\")\n\t\t\t\t\tcontinue;\n\t\t\t\tif(first){\n\t\t\t\t\tfirst = false;\n\t\t\t\t}else{\n\t\t\t\t\td += \", \";\n\t\t\t\t}\n\t\t\t\tvar kd = key;\n\t\t\t\t\/\/ If the key is not a legal identifier, use its description.\n\t\t\t\t\/\/ For strings this will quote the stirng.\n\t\t\t\tif(!kd.match(\/^[a-zA-Z_][a-zA-Z0-9_]*$\/)){\n\t\t\t\t\tkd = arguments.callee(key, showAll);\n\t\t\t\t}\n\t\t\t\td += kd+\": \"+arguments.callee(v[key], showAll);\n\t\t\t}\n\t\t\treturn d+\"}\";\n\t\t}\n\n\t\tif(showAll){\n\t\t\tif(dojo.widget.html.stabile._recur){\n\t\t\t\t\/\/ Save the original definitions of toString;\n\t\t\t\tvar objectToString = Object.prototype.toString;\n\t\t\t\treturn objectToString.apply(v, []);\n\t\t\t}else{\n\t\t\t\tdojo.widget.html.stabile._recur = true;\n\t\t\t\treturn v.toString();\n\t\t\t}\n\t\t}else{\n\t\t\t\/\/ log(\"Description? \"+v.toString()+\", \"+typeof(v));\n\t\t\tthrow new Error(\"Unknown type: \"+v);\n\t\t\treturn \"'unknown'\";\n\t\t}\n\n\t} finally {\n\t\t\/\/ Always restore the global current depth.\n\t\tdojo.widget.html.stabile._depth = depth;\n\t}"}}},"dojo.widget.html.stabile.getStorage":{"_":{"meta":{"summary":"","src":"\tif (dojo.widget.html.stabile.dataField) {\n\t\treturn dojo.widget.html.stabile.dataField;\n\t}\n\tvar form = document.forms._dojo_form;\n\treturn dojo.widget.html.stabile.dataField = form ? form.stabile : {value: \"\"};"}}}}}},"dojo.widget.jot.InlineEditing":{"meta":{"requires":{"common":["dojo.widget.Toolbar"]},"methods":{"tick":{"_":{"meta":{"summary":"","parameters":{"name":{"type":""}},"src":"\tticks[name] = new Date();\r\n\ttocks[name] = null;\r"}}},"tock":{"_":{"meta":{"summary":"","parameters":{"name":{"type":""},"msg":{"type":""}},"src":"\tif(!ticks[name]) { dj_debug(\"no timer '\" + name + \"'\"); return; }\r\n\tvar now = new Date();\r\n\tvar lap = \"\";\r\n\tif(tocks[name]) { lap = \",\" + (now - tocks[name]); }\r\n\tdj_debug(name + lap + \",\" + (now - ticks[name]) + (msg ? \",\" + msg : \"\"));\r\n\ttocks[name] = now;\r"}}},"aroundFS":{"_":{"meta":{"summary":"","parameters":{"mi":{"type":""}},"src":"\tvar msg = \"\";\r\n\tvar name = mi.args[0];\r\n\tvar props = mi.args[1];\r\n\ttick(\"fromScript:\" + name);\r\n\tvar ret = mi.proceed();\r\n\tfor(var p in props) { msg += p + ' : ' + props[p] + ';'; }\r\n\ttock(\"fromScript:\" + name, msg);\r\n\treturn ret;\r"}}},"InlineEdit.run":{"_":{"meta":{"summary":"","src":"\t\ttick(\"run\");\r\n\t\tcheckLock();\r"}}}}}},"dojo.widget.jot.JotAPTable":{"meta":{"requires":{"common":["dojo.dnd.*","jot.widget.JotCellEditor","jot.widget.JotCellEditor2","dojo.xml.Parse","dojo.fx","dojo.widget.Toolbar","dojo.widget.ColorPalette","dojo.widget.RichText"]},"methods":{"jot.widget.JotAPTable":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\n\tfunction cellIndex(td){\n\t\tif(!dojo.render.html.safari){\n\t\t\treturn td.cellIndex;\n\t\t}\n\t\t\/\/ we're in Safari hell\n\t\tvar idx = 0;\n\t\tvar pn = td.previousSibling;\n\t\twhile(pn){\n\t\t\tif((pn.nodeType == 1)&&(pn.nodeName.toLowerCase() == \"td\")){\n\t\t\t\tidx++;\n\t\t\t}\n\t\t\tpn = pn.previousSibling;\n\t\t}\n\t\treturn idx;\n\t}\n\n\tthis.widgetType = \"JotAPTable\";\n\tthis.templateCssPath = null;\n\n\tthis.tTable = null;\n\tthis.tHead = null;\n\tthis.tBody = null;\n\n\t\/\/this.appName is stamped during createWidget\n\t\/\/this.schemaName is stamped during createWidget\n\n\t\/\/ current active drag handle\n\tthis.dragHandleNode = null;\n\n\t\/\/ row detail\n\tthis.curOpenRowId = \"\";\n\tthis.curOpenRowDetail = null;\n\n\t\/\/ row select\n\tthis.curSelectedRows = [];\n\tthis.curSelectedRowsStack = [];\n\tthis.KeepAllSelected = \"KeepAllSelected\";\n\tthis.KeepThisSelected = \"KeepThisSelected\";\n\n\t\/\/ col select\n\tthis.curSelectedColIndices = [];\n\n\t\/\/ cell nav\n\tthis.navFocusCell = null;\n\n\t\/\/ 3 \"row header\"-type columns exist\n\t\/\/ to the left of Jot tables (at the moment)\n\tthis.numRowHeaderCells = 3;\n\tthis.rowNumberCellIdx = 0;\n\tthis.arrowHeaderCellIdx = 1;\n\tthis.paperClipCellIdx = 2;\n\tthis.firstDataCellIdx = 3;\n\n\tthis.editor = null;\n\tthis.editorVisible = false;\n\tthis.editorNode = null;\n\t\/\/this.edited = false;\n\n\tthis.captureKeystrokes = true;\n\tthis.keyBuffer = \"\";\n\tthis.preventBuild = false;\n\n\tthis.handleKeys = true;\n\tthis.handleKeyEvents = function(on) {\n\t\tthis.handleKeys = on;\n\t}\n\n\t\/\/ since this is an in-place widget, prevent clobbering of our table by\n\t\/\/ over-riding postInitialize, which normally handles widget replacement.\n\tthis.postInitialize = function(args, frag){ return; }\n\tthis.cleanUp = function(){ return; }\n\n\tthis.destroyRendering = function(){\n\t\tdojo.event.disconnect(this.editor.textArea, \"onkeypress\", this, \"checkFormula\");\n\t\tdojo.event.disconnect(this.editor, \"cancel\", this, \"dispatchEditorCancel\");\n\t\tdojo.event.disconnect(this.editor, \"save\", this, \"dispatchEditorSave\");\n\t\tif(this.currentToolbar){\n\/\/\t\t\tthis.currentToolbar.destroy();\n\t\t}\n\t\tif(this.editor){\n\t\t\tthis.editor.destroy();\n\t\t}\n\t\tdojo.event.browser.clean(this.domNode);\n\t}\n\n\n\tthis.buildRendering = function(args, frag){\n\t\tthis.domNode = frag[\"dojo:jotaptable\"].nodeRef;\n\t\tthis.tTable = this.domNode;\n\n\t\tthis.parseFragment = frag;\n\t\tthis.normalizedArgs = args;\n\n\t\tthis.finishTableInit();\n\t}\n\n\tvar colThumbs = null;\n\tthis.finishTableInit = function (evt) {\n\t\tthis.tHead = this.domNode.tHead;\n\t\tthis.tBody = this.domNode.tBodies[0];\n\n\t\tvar args = {};\n\t\t\/\/ args.cozyUpToParent = true;\n\n\t\tdojo.event.connect(this.tBody, \"onmousedown\",\n\t\t\tfunction(evt){\n\t\t\t\tif(evt.shiftKey || evt.ctrlKey){\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\t\/\/FIXME: better perms handling\n\t\tif (Wiki.write) {\n\t\t\tif(!this.editor){\n\t\t\t\tthis.editor = dojo.widget.createWidget(\"JotCellEditor2\", args, document.body);\n\t\t\t\tdojo.event.connect(this.editor, \"cancel\", this, \"dispatchEditorCancel\");\n\t\t\t\tdojo.event.connect(this.editor, \"save\", this, \"dispatchEditorSave\");\n\t\t\t\tdojo.event.connect(this.editor.textArea, \"onkeypress\", this, \"checkFormula\");\n\t\t\t\tthis.editor.clobberEditor();\n\t\t\t\tdojo.event.topic.subscribe(\"jot.celleditor.blured\", \n\t\t\t\t\tdojo.lang.hitch(this, function(node){\n\t\t\t\t\t\tthis.editorVisible = false;\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tdojo.event.connect(this.tBody, \"oncontextmenu\", this, \"dispatchContextMenu\");\n\t\t\tdojo.event.connect(this.tBody, \"onclick\", this, \"dispatchClick\");\n\t\t\tdojo.event.connect(this.tBody, \"ondblclick\", this, \"dispatchDoubleClick\");\n\t\t\tdojo.event.connect(this.tBody, \"onmouseover\", this, \"dispatchMouseOver\");\n\t\t\tdojo.event.connect(this.tBody, \"onmouseout\", this, \"dispatchMouseout\");\n\t\t\tdojo.event.connect(this.tHead, \"ondblclick\", this, \"dispatchHeaderDoubleClick\");\n\t\t\t\/*\n\t\t\tdojo.event.connect(document, \"onkeypress\", this, \"dispatchKeyPress\");\n\t\t\tdojo.event.connect(document, \"onkeydown\", this, \"dispatchKeyDown\");\n\t\t\t*\/\n\t\t\tdojo.event.connect(this.editor.textArea, \"onkeypress\", this, \"dispatchKeyPress\");\n\t\t\tdojo.event.connect(this.editor.textArea, \"onkeydown\", this, \"dispatchKeyDown\");\n\t\t}\n\t\tdojo.event.connect(this.tBody, \"onmouseup\", this, \"dispatchMouseUp\");\n\n\t\t\/\/ set widths for richedit\n\t\tvar cols = this.domNode.getElementsByTagName(\"col\");\n\n\t\t\/\/ browser has rendered the table,\n\t\t\/\/ so now lock widths on the \"action\"\tcolumns...\n\t\tvar actionHeaderCells = this.tHead.getElementsByTagName(\"td\");\n\t\tfor (var i=0; i<actionHeaderCells.length; i++) {\n\t\t\t\/\/ skip td's which are not \"top-level\",\n\t\t\t\/\/ i.e., skip if they are in a table nested in a td\n\t\t\tif (actionHeaderCells[i].parentNode == this.tHead.firstChild) {\n\t\t\t\tcols[cellIndex(actionHeaderCells[i])].style.width =\n\t\t\t\t\t\tdojo.html.getInnerWidth(actionHeaderCells[i]) +\t\"px\";\n\t\t\t}\n\t\t}\n\n\t\tvar headerCells = this.tHead.getElementsByTagName(\"th\");\n\t\tdojo.event.topic.subscribe(\"jot.celleditor.closing\", \n\t\t\tdojo.lang.hitch(this, function(node){\n\t\t\t\tif(!dojo.render.html.ie){ return; }\n\t\t\t\tvar cares = false;\n\t\t\t\tfor (var i=0; i<headerCells.length; i++) {\n\t\t\t\t\tif(node === headerCells[i]){ cares = true; break; }\n\t\t\t\t}\n\t\t\t\tif(!cares){ return; }\n\t\t\t\tdojo.event.connect(node, \"onclick\", this, \"dispatchHeaderClick\");\n\t\t\t\tdojo.event.connect(node, \"oncontextmenu\", this, \"dispatchHeaderContextMenu\");\n\t\t\t})\n\t\t);\n\t\tfor (var i=0; i<headerCells.length; i++) {\n\t\t\t\/\/...and lock widths on the data columns, if that hasn't already been done manually\n\t\t\t\/\/enforcing a\t50px-minimum width in the process\n\t\t\tif (dojo.string.isBlank(cols[cellIndex(headerCells[i])].style.width)) {\n\t\t\t\tvar width = dojo.html.getInnerWidth(headerCells[i]);\n\t\t\t\twidth = width\t>\t50 ? width : 50;\n\t\t\t\theaderCells[i].style.width = width + \"px\";\n\t\t\t\tcols[cellIndex(headerCells[i])].style.width = width + \"px\";\n\t\t\t}\n\n\t\t\t\/\/FIXME: better perms handling\n\t\t\tif (Wiki.write) {\n\t\t\t\t\/\/ associate menu handlers with the column headers\n\t\t\t\tdojo.event.connect(headerCells[i], \"onclick\", this, \"dispatchHeaderClick\");\n\t\t\t\tdojo.event.connect(headerCells[i], \"oncontextmenu\", this, \"dispatchHeaderContextMenu\");\n\t\t\t}\n\t\t\tvar me = this;\n\t\t\theaderCells[i].onmouseover = function() { if (!me.resizing) { document.body.style.cursor = \"pointer\" } };\n\t\t\theaderCells[i].onmouseout = function() { if (!me.resizing) { document.body.style.cursor = \"auto\" } };\n\t\t}\n\n\t\t\/\/ register the table and the data column headers in the dojo dnd system\n\t\tnew jot.widget.HtmlColumnDropTarget(this.domNode, this);\n\t\tfor (var i=0; i<headerCells.length; i++) {\n\t\t\theaderCells[i].dataColIndex = i;\n\t\t\t\/\/new jot.widget.HtmlColumnDragSource(headerCells[i], this);\n\t\t}\n\n\t\t\/\/ remove any old resize thumbs still hanging around\n\t\tvar i=0;\n\t\twhile (true) {\n\t\t\tvar id = \"columnResizeHandle\" + i;\n\t\t\tvar el = document.getElementById(id);\n\t\t\tif (el) {\n\t\t\t\tel.parentNode.removeChild(el);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\ti++;\n\t\t}\n\t\tcolThumbs = [];\n\n\t\t\/\/ create col resize thumbs\n\t\tdbg(\"init: create col resize thumbs\");\n\t\tvar rows_container = document.getElementById(\"rows_container\");\n\t\tvar containerX = dojo.html.getAbsoluteX(rows_container);\n\t\tvar containerY = dojo.html.getAbsoluteY(rows_container);\n\n\t\tfor (var i=0; i<headerCells.length; i++) {\n\t\t\tvar cell = headerCells[i];\n\t\t\tvar div = document.createElement(\"div\");\n\n\t\t\tif (g_debug == false) {\n\t\t\t\tdojo.html.setOpacity(div, 0);\n\t\t\t}\n\t\t\tdiv.id = \"columnResizeHandle\" + i;\n\t\t\tdiv.colIndex = cellIndex(cell);\n\t\t\tdiv.className = \"columnResizeHandle\";\n\t\t\tvar nudge = -3;\n\t\t\twith (dojo.html) {\n\t\t\t\tdiv.style.left = (getAbsoluteX(headerCells[i]) - containerX\n\t\t\t\t\t\t\t\t\t + getInnerWidth(headerCells[i]) +\tnudge) + \"px\";\n\t\t\t}\n\n\t\t\twith (dojo.html) {\n\t\t\t\tdiv.style.top = (getAbsoluteY(headerCells[i]) - containerY) +\t\"px\";\n\t\t\t\tdiv.style.height = getInnerHeight(cell) +\t\"px\";\n\t\t\t\tdiv.style.width = \"7px\";\n\t\t\t}\n\t\t\tdiv.onmouseover = function() { this.style.cursor = \"e-resize\"\t}\n\t\t\tdiv.onmouseout = function() { this.style.cursor = \"auto\" }\n\n\t\t\tdojo.event.connect(div, \"onmousedown\", this, \"beginDrag\");\n\n\t\t\t\/\/store for later hiding and repositioning as the table changes size\n\t\t\tcolThumbs.push(div);\n\t\t\trows_container.appendChild(div);\n\t\t}\n\t\tdojo.event.connect(document, \"onmousemove\", this, \"handleDrag\");\n\t\tdojo.event.connect(document, \"onmouseup\", this, \"endDrag\");\n\t\t\n\t\tif (Wiki.write) {\n\t\t\tvar pastToolbars = dojo.widget.manager.getWidgetsByType(\"Toolbar\");\n\t\t\tfor (var i=0; i<pastToolbars.length; i++) {\n\t\t\t\tpastToolbars[i].destroy();\n\t\t\t}\n\t\t\tthis.createToolbar();\n\t\t}\n\n\t\twindow.g_jotTable = this;\n\n\t}\n\t\n\tthis.uninitialize = function() {\n\/*\t\tdojo.event.disconnect(this.tBody, \"oncontextmenu\", this, \"dispatchContextMenu\");\n\t\tdojo.event.disconnect(this.tBody, \"onclick\", this, \"dispatchClick\");\n\t\tdojo.event.disconnect(this.tBody, \"ondblclick\", this, \"dispatchDoubleClick\");\n\t\tdojo.event.disconnect(this.tBody, \"onmouseover\", this, \"dispatchMouseOver\");\n\t\tdojo.event.disconnect(this.tBody, \"onmouseout\", this, \"dispatchMouseout\");\n\t\tdojo.event.disconnect(this.tHead, \"ondblclick\", this, \"dispatchHeaderDoubleClick\");\n\t\tdojo.event.disconnect(this.tBody, \"onmouseup\", this, \"dispatchMouseUp\");\n*\/\n\t\tdojo.event.disconnect(document, \"onkeypress\", this, \"dispatchKeyPress\");\n\t\tdojo.event.disconnect(document, \"onkeydown\", this, \"dispatchKeyDown\");\n\t}\n\n\tthis.adjustDragResizeHandles = function() {\n\t\tvar headerCells = this.tHead.getElementsByTagName(\"th\");\n\t\tvar nudge = -3;\n\t\tvar rows_container = document.getElementById(\"rows_container\");\n\t\tvar containerX = dojo.html.getAbsoluteX(rows_container);\n\t\tvar containerY = dojo.html.getAbsoluteY(rows_container);\n\t\tfor (var i=0; i<headerCells.length; i++) {\n\t\t\tvar div = document.getElementById(\"columnResizeHandle\" + i);\n\t\t\tif (div) {\n\t\t\t\twith (dojo.html) {\n\t\t\t\t\tdiv.style.left = (getAbsoluteX(headerCells[i]) - containerX\n\t\t\t\t\t\t\t\t\t\t\t\t\t + getInnerWidth(headerCells[i]) +\tnudge) + \"px\";\n\t\t\t\t\tdiv.style.top = (getAbsoluteY(headerCells[i]) - containerY) +\t\"px\";\n\t\t\t\t\tdiv.style.height = getInnerHeight(headerCells[i]) +\t\"px\";\n\t\t\t\t\tdiv.style.width = \"7px\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.dispatchContextMenu = function (evt) {\n\t\tevt.preventDefault();\n\t\tvar row = this.getRowFromChild(evt.target);\n\t\tif (getParentById(row, \"row_detail\") == null) {\n\t\t\tthis.singleSelectRow(row, true \/* keepSelected *\/);\n\t\t\thandleRowHeaderMenu(evt, row);\n\t\t}\n\t}\n\n\tthis.isRowSelected = function(row) {\n\t\t\/\/return row.style.backgroundColor.toLowerCase() == \"#ff9900\";\n\t\treturn dojo.html.hasClass(row, \"activated\");\n\t}\n\n\tthis.formulaChecked = false;\n\tthis.checkFormula = function(evt) {\n\t\tif (this.formulaChecked == true) { return; }\n\t\t\n\t\t\/\/ ignore no-op keypress events (that go along w\/ keyup, keydown)\n\t\tif (evt.charCode == 0) { return; } \n\t\t\n\t\t\/\/ ignore control characters\n\t\tif (evt.charCode < 32) { return; } \n\t\t\n\t\t\/\/ ignore modified keys\n\t\tif (evt.metaKey || evt.altKey || evt.ctrlKey) { return; } \n\n\t\tvar val = this.editor.textArea.value;\n\t\tval = dojo.string.trim(val);\n\t\tvar showDlg = false;\n\t\tif (val.length == 0) {\n\t\t\tshowDlg = (String.fromCharCode(evt.charCode) == '=');\n\t\t} else if (val.charAt(0) == \"=\") {\n\t\t\tshowDlg = true;\n\t\t}\n\t\tif (showDlg) {\n\t\t\tvar node;\n\t\t\tif(this.editorVisible){\n\t\t\t\tnode = this.editor.domNode;\n\t\t\t\tif(this.editor.textArea){\n\t\t\t\t\tthis.editor.textArea.value = \"\";\n\t\t\t\t\tthis.editor.checkOnBlur(evt);\n\t\t\t\t}else{\n\t\t\t\t\tnode.innerHTML = \"&nbsp;\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.formulaAlert(node);\n\t\t\t\/\/this.setNavFocus(node);\n\t\t}\n\t\tthis.formulaChecked = true;\n\t}\n\t\n\tthis.formulaAlert = function(node){\n\t\tsetTimeout(dojo.lang.hitch(this, function() {\n\t\t\talert(\"Formulas are coming soon!  We'll let you know when they've arrived.\");\n\t\t\tdocument.body.focus();\n\t\t\tif((node)&&(node.onclick)){\n\t\t\t\tnode.onclick();\n\t\t\t}\n\t\t}), 300);\n\t}\n\n\tthis.buildingEditor = false;\n\tthis.buildEditor = function(evt, td, args) {\n\t\tif(this.preventBuild){ this.preventBuild = false; return; }\n\t\tif(this.editorVisible){ return; }\n\t\tif(!Wiki.write){ return; }\n\t\tdojo.debug(\"buildEditor\");\n\n\t\tif(!args){ args = {}; }\n\t\targs.cozyUpToParent = true;\n\t\tdojo.lang.mixin(this.editor, args);\n\n\t\t\/\/ this.editor.textArea.focus();\n\t\tthis.editor.attachToCell(td);\n\t\tdojo.event.topic.publish(\"jotTable.buildEditor\");\n\t\tthis.buildingEditor = true;\n\t\tthis.formulaChecked = false;\n\n\t\t\/*\n\t\tif(args.overwrite){\n\t\t\t\/\/this.keyBuffer = this.keyBuffer.substring(1, this.keyBuffer.length);\n\t\t\t\/\/ clear editor if they typed their way in\n\t\t\tthis.editor.textArea.value = this.keyBuffer;\n\t\t}\n\t\tthis.keyBuffer = \"\";\n\t\t*\/\n\t\tthis.captureKeystrokes = false;\n\n\t\t\/\/FIXME: better perms handling\n\t\tif (Wiki.write && !args.disableToolbar) {\n\t\t\tthis.currentToolbar.enable();\n\t\t}\n\t\t\n\t\tthis.buildingEditor = false;\n\t\tthis.editorVisible = true;\n\t}\n\n\tthis.clearEditor = function() {\n\t\t\/\/ this.editor = null;\n\t\tthis.captureKeystrokes = true;\n\t}\n\n\tthis.suppressKeys = function(evt) {\n\t\tvar tagName = evt.target.tagName.toLowerCase();\n\t\t\/\/ IE richtext area will treat a div as an editable area\n\t\tif (tagName == \"input\" || tagName == \"textarea\" || tagName == \"div\") {\n\t\t\treturn; \/\/noop\n\t\t}\n\n\t\tswitch (evt.keyCode) {\n\t\tcase evt.KEY_UP_ARROW:\n\t\tcase evt.KEY_RIGHT_ARROW:\n\t\tcase evt.KEY_DOWN_ARROW:\n\t\tcase evt.KEY_LEFT_ARROW:\n\t\tcase evt.KEY_BACKSPACE:\n\t\t\tevt.preventDefault();\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tthis.isFormKeystroke = function(evt) {\n\t\tif(evt.target == this.editor.textArea){ return false; }\n\t\tvar isInput = false;\n\t\tif(dojo.html.getFirstAncestorByTag(evt.target, \"form\")){\n\t\t\tisInput = true;\n\t\t} else {\n\t\t\tvar tgt = evt.target;\n\t\t\twhile(tgt.nodeType != 1){ \n\t\t\t\ttgt = tgt.parentNode;\n\t\t\t}\n\t\t\tvar tagName = tgt.tagName.toLowerCase();\n\t\t\t\/\/ IE richtext area will treat a div as an editable area\n\t\t\tif (tagName == \"input\" || tagName == \"textarea\" || tagName == \"div\") {\n\t\t\t\tisInput = true;\n\t\t\t}\n\t\t}\n\t\treturn isInput;\n\t}\n\n\t\/\/ unmodified typed chars cause entry into edit mode\n\tthis.dispatchKeyPress = function(evt){\n\t\tif(!this.handleKeys){ return; }\n\t\t\n\t\t\/\/ dojo.debug(\"dispatchKeyPress, \", (evt.charCode == 0));\n\t\t\/\/ ignore no-op keypress events (that go along w\/ keyup, keydown)\n\t\tif (evt.charCode == 0) { return; } \n\t\t\n\t\t\/\/ ignore control characters\n\t\tif((evt.charCode < 32)||(evt.keyCode > 10000)){ return; } \n\t\t\n\t\t\/\/ ignore modified keys\n\t\tif (evt.metaKey || evt.altKey || evt.ctrlKey) { return; } \n\n\t\t\/\/ ignore keystrokes headed toward a form input\n\t\t\/\/ (that is, grab keystrokes headed toward nowhere or towards the table)\n\t\tif (this.isFormKeystroke(evt)){ return; }\n\t\t\t\n\t\t\/\/ FIXME: this is never skipped in Safari!\n\t\tif(dojo.render.html.safari){\n\t\t\t\tevt.stopPropagation();\n\t\t}\n\t\t\/\/ if(dojo.render.html.safari){ return; }\n\t\tif((this.navFocusCell)&&(!this.editorVisible)){\n\t\t\tthis.buildEditor(evt, this.navFocusCell);\n\t\t\t\/\/ { arrowKeysExit: false, overwrite: true }\n\t\t\t\/\/ );\n\t\t\tthis.editor.textArea.value = \"\";\n\t\t}\n\t\t\/*\n\t\tif (this.navFocusCell) {\n\t\t\tvar c = String.fromCharCode(evt.charCode);\n\t\t\tif (this.captureKeystrokes && !evt.ctrlKey && !evt.altKey && !evt.metaKey) {\n\t\t\t\t\tthis.keyBuffer += c;\n\t\t\t}\n\t\t\tif (!this.buildingEditor) {\n\t\t\t\tif (this.keyBuffer.length > 0 && this.keyBuffer.charAt(0) == '=') {\n\t\t\t\t\t\/\/this.formulaAlert();\n\t\t\t\t\talert(\"Formulas are coming soon!  We'll let you know when they've arrived.\");\n\t\t\t\t\tthis.keyBuffer = \"\";\n\t\t\t\t} else {\n\t\t\t\t\tthis.buildEditor(evt, this.navFocusCell, \n\t\t\t\t\t\t{ arrowKeysExit: false, overwrite: true }\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t*\/\n\t}\n\n\tthis.dispatchKeyDown = function(evt){\n\t\tif (!this.handleKeys) { return; }\n\t\tif(this.editorVisible){ return; }\n\n\t\t\/\/ ignore modified keys\n\t\tif (evt.metaKey || evt.altKey || evt.ctrlKey) { return; }\n\n\t\t\/\/ ignore keystrokes headed toward a form input\n\t\tif(this.isFormKeystroke(evt)){ return; }\n\n\t\tif(dojo.render.html.safari){\n\t\t\tevt.stopPropagation();\n\t\t}\n\t\t\n\t\tdojo.debug(\"dispatchKeyDown:\", evt.keyCode);\n\t\tswitch (evt.keyCode) {\n\t\tcase evt.KEY_UP_ARROW:\n\t\t\tif((!this.editorVisible)&&(this.navFocusCell)){\n\t\t\t\tvar trold = dojo.html.getFirstAncestorByTag(this.navFocusCell, \"tr\");\n\t\t\t\tthis.setNavFocus(this.findDataCellAbove(this.navFocusCell));\n\t\t\t\t\/\/TODO special-case the topmost row for now,\n\t\t\t\t\/\/to bring the header row into view\n\t\t\t\tvar trnew = dojo.html.getFirstAncestorByTag(this.navFocusCell, \"tr\");\n\t\t\t\tif(trold == trnew){\n\t\t\t\t\tdojo.byId(\"rows_container\").scrollTop = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase evt.KEY_TAB:\n\t\t\tif(!this.editorVisible){\n\t\t\t\tthis.safeHandleTab(evt);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase evt.KEY_RIGHT_ARROW:\n\t\t\tif(!this.editorVisible){\n\t\t\t\tthis.setNavFocus(this.findDataCellRight(this.navFocusCell));\n\t\t\t}\n\t\t\tbreak;\n\t\tcase evt.KEY_ENTER:\n\t\tcase evt.KEY_DOWN_ARROW:\n\t\t\tif(!this.editorVisible){\n\t\t\t\tthis.setNavFocus(this.findDataCellBelow(this.navFocusCell));\n\t\t\t}\n\t\t\tbreak;\n\t\tcase evt.KEY_LEFT_ARROW:\n\t\t\tif(!this.editorVisible){\n\t\t\t\tthis.setNavFocus(this.findDataCellLeft(this.navFocusCell));\n\t\t\t}\n\t\t\tbreak;\n\t\tcase evt.KEY_F2:\n\t\t\tif((!this.editorVisible)&&(this.navFocusCell)){\n\t\t\t\tthis.buildEditor(evt, this.navFocusCell);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase evt.KEY_BACKSPACE:\n\t\t\tif((!this.editorVisible)&&(this.navFocusCell)){\n\t\t\t\tthis.buildEditor(evt, this.navFocusCell, {overwrite: true});\n\t\t\t\tthis.suppressKeys(evt);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase evt.KEY_DELETE:\n\t\t\tif((!this.editorVisible)&&(this.navFocusCell)){\n\t\t\t\tthis.navFocusCell.innerHTML = \"&#160;\";\n\t\t\t\tthis.saveCellEdit(this.navFocusCell);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase evt.KEY_PAGE_UP:\n\t\t\tif (!this.navFocusCell) { return; }\n\t\t\tvar c = document.getElementById(\"rows_container\");\n\t\t\tvar cHt = dojo.html.getInnerHeight(c) - 30; \/\/nudge\n\t\t\tvar tr = dojo.html.getFirstAncestorByTag(this.navFocusCell, \"tr\");\n\t\t\tvar baseTrTop = dojo.html.getAbsoluteY(tr);\n\t\t\twhile (true) {\n\t\t\t\tif (tr.sectionRowIndex == 0) { break; }\n\t\t\t\tvar trTop = dojo.html.getAbsoluteY(tr);\n\t\t\t\tif (baseTrTop - trTop >= cHt) { break; }\n\t\t\t\ttr = this.tBody.rows[tr.sectionRowIndex - 1];\n\t\t\t}\n\t\t\tvar newCell = tr.cells[cellIndex(this.navFocusCell)];\n\t\t\tthis.setNavFocus(newCell);\n\t\t\tbreak;\n\t\tcase evt.KEY_PAGE_DOWN:\n\t\t\tif (!this.navFocusCell) { return; }\n\t\t\tvar c = document.getElementById(\"rows_container\");\n\t\t\tvar cHt = dojo.html.getInnerHeight(c) - 30; \/\/nudge\n\t\t\tvar tr = dojo.html.getFirstAncestorByTag(this.navFocusCell, \"tr\");\n\t\t\tvar rows = this.tBody.rows;\n\t\t\tvar baseTrTop = dojo.html.getAbsoluteY(tr);\n\t\t\twhile (true) {\n\t\t\t\tif (tr.sectionRowIndex == rows.length - 1) { break; }\n\t\t\t\tvar trTop = dojo.html.getAbsoluteY(tr);\n\t\t\t\tif (trTop - baseTrTop >= cHt) { break; }\n\t\t\t\ttr = this.tBody.rows[tr.sectionRowIndex + 1];\n\t\t\t}\n\t\t\t\/\/ snap to end\n\t\t\tif (rows.length - tr.sectionRowIndex < 3) {\n\t\t\t\ttr = rows[rows.length - 1];\n\t\t\t}\n\t\t\tvar newCell = tr.cells[cellIndex(this.navFocusCell)];\n\t\t\tthis.setNavFocus(newCell);\n\t\t\tbreak;\n\t\t}\n\n\t}\n\n\tthis.setPF = function(cell){\n\t\twith(cell.style){\n\t\t\tpadding = \"3px 4px 4px 3px\";\n\t\t\tborder = \"2px solid black\";\n\t\t}\n\t}\n\n\tthis.unSetPF = function(cell){\n\t\twith(cell.style){\n\t\t\tpadding = \"5px\";\n\t\t\tborder = \"1px solid #abb3be\";\n\t\t\tborderWidth = \"0px 1px 1px 0px\";\n\t\t\tverticalAlign = \"top\";\n\t\t}\n\t}\n\n\tthis.selectUpperLeftCell = function() {\n\t\tif (this.tBody.rows.length > 0) {\n\t\t\tvar row = this.tBody.rows[0];\n\t\t\tvar firstCell = row.cells[this.firstDataCellIdx];\n\t\t\tif (firstCell) { this.setNavFocus(firstCell); }\n\t\t}\n\t}\n\t\n\tthis.getNavFocusRow = function() {\n\t\treturn dojo.html.getFirstAncestorByTag(this.navFocusCell, \"tr\");\n\t}\n\t\n\tthis.pseudoFocusCells = [];\n\tthis.setNavFocus = function(cell, selectStyle){\n\t\tif(!cell){ return; }\n\n\t\t\/\/FIXME: better perms handling\n\t\tif (Wiki.write) {\n\t\t\tthis.currentToolbar.enable();\n\t\t}\n\t\tthis.clearOtherNavFocus(cell);\n\n\t\tif(this.editorVisible){\n\t\t\treturn;\n\t\t}\n\t\tif(this.editor){\n\t\t\tthis.editor.shadowCell(cell);\n\t\t\tthis.editor.textArea.focus();\n\t\t}\n\n\t\tvar row = this.getRowFromChild(cell);\n\t\tif (selectStyle == this.KeepAllSelected) {\n\t\t\t;\n\t\t} else if (selectStyle == this.KeepThisSelected) {\n\t\t\tthis.unselectAllRows(row);\n\t\t\tthis.unselectAllColumns(cellIndex(cell));\n\t\t} else {\n\t\t\tthis.unselectAllRows();\n\t\t\tthis.unselectAllColumns();\n\t\t}\n\n\t\tthis.pseudoFocusCells.push(cell);\n\t\t\/\/ dojo.html.addClass(cell, \"pseudofocus\");\n\t\tthis.setPF(cell);\n\t\t\n\t\tvar prevCell = this.navFocusCell;\n\t\tthis.navFocusCell = cell;\n\t\tthis.setRowFocus(row, prevCell);\n\t\tthis.setColFocus(cell, prevCell);\n\t\tvar drh = dojo.render.html;\n\t\tif((drh.mozilla)&&(drh.UA.indexOf(\"Firefox\/1.5\")>=0)){\n\t\t\tif(cell.nextSibling){\n\t\t\t\tvar nextCell = cell.nextSibling;\n\t\t\t\twhile((nextCell)&&(nextCell.nodeType != 1)){\n\t\t\t\t\tnextCell = nextCell.nextSibling;\n\t\t\t\t}\n\t\t\t\tif(nextCell){\n\t\t\t\t\tnextCell.setAttribute(\"tabindex\", \"62000\");\n\t\t\t\t\tnextCell.style.outline = \"none\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (prevCell && prevCell == cell) {\n\t\t\treturn; \/\/ save processing\n\t\t}\n\n\t\t\/\/FIXME: better perms handling\n\t\tif (Wiki.write) {\n\t\t\tthis.updateToolbar(); \t\t\n\t\t}\n\n\t\t\/\/ vert scroll to keep cell in view\n\t\tvar scrBarArea = 29;\n\t\tvar c = document.getElementById(\"rows_container\");\n\t\tvar tr = dojo.html.getFirstAncestorByTag(cell, \"tr\");\n\t\tif (tr.sectionRowIndex == 0) {\n\t\t\tc.scrollTop = 0;\n\t\t}\n\t\telse {\n\t\t\tvar cHt = dojo.html.getInnerHeight(c);\n\t\t\tvar offset = dojo.html.getAbsoluteY(c);\n\t\t\tvar trTop = dojo.html.getAbsoluteY(tr) - offset;\n\t\t\tvar trBot = trTop + dojo.html.getInnerHeight(tr);\n\t\t\tvar cTop = c.scrollTop;\n\t\t\tvar cBot = cTop + dojo.html.getInnerHeight(c);\n\t\t\tif (trBot\t>= cBot - scrBarArea) {\n\t\t\t\tc.scrollTop = trBot - cHt + scrBarArea;\n\t\t\t}\n\t\t\telse if (trTop < cTop) {\n\t\t\t\tvar nudge = 0; \/\/ (dojo.render.html.ie) ? 0 : 10;\n\t\t\t\tc.scrollTop = trTop + nudge;\n\t\t\t}\n\t\t}\n\n\t\t\/\/ horiz scroll to keep cell in view\n\t\tvar rowHeaderWid = 50;\n\t\tvar tdLeft = dojo.html.getAbsoluteX(cell);\n\t\tvar tdWid = dojo.html.getInnerWidth(cell);\n\t\tvar tdRight = tdLeft + tdWid;\n\t\tvar cWid = dojo.html.getInnerWidth(c);\n\t\tvar cLeft = c.scrollLeft;\n\t\tif (tdLeft < cLeft + rowHeaderWid) {\n\t\t\tc.scrollLeft = 0; \/\/ Math.max(tdLeft - rowHeaderWid, 0);\n\t\t}\n\t\telse if (tdRight - cLeft > cWid) {\n\t\t\tc.scrollLeft = tdRight - cWid;\n\t\t}\n\t}\n\n\tthis.clearOtherNavFocus = function(skipCell) {\n\t\twhile (this.pseudoFocusCells.length\t>\t0) {\n\t\t\tvar oldCell = this.pseudoFocusCells.pop();\n\t\t\tif (!skipCell\t|| oldCell != skipCell) {\n\t\t\t\tthis.clearNavFocus(oldCell);\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.clearNavFocus = function(cell) {\n\t\tthis.unSetPF(cell);\n\t\t\/\/ dojo.html.removeClass(cell, \"pseudofocus\");\n\t}\n\n\tthis.setActivated = function(cell){\n\t\twith(cell.style){\n\t\t\tbackgroundColor = \"#ff9900\";\n\t\t}\n\t}\n\n\tthis.unSetActivated = function(cell){\n\t\twith(cell.style){\n\t\t\tbackgroundColor = \"\";\n\t\t}\n\t}\n\n\tthis.setRowFocus = function(row, prevCell) {\n\t\tif (!row) { return; }\n\t\tthis.setActivated(row.cells[this.rowNumberCellIdx]);\n\t\t\/\/ dojo.html.addClass(row.cells[this.rowNumberCellIdx], \"activated\");\n\t\tif (prevCell) {\n\t\t\t\/\/ if we've switched rows, unhilite prev row thumb\n\t\t\tvar oldRow = this.getRowFromChild(prevCell);\n\t\t\tif (oldRow && row.sectionRowIndex != oldRow.sectionRowIndex) {\n\t\t\t\tthis.unSetActivated(oldRow.cells[this.rowNumberCellIdx]);\n\t\t\t\t\/\/ dojo.html.removeClass(oldRow.cells[this.rowNumberCellIdx], \"activated\");\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.setColFocus = function(cell, prevCell) {\n\t\tif (!cell) { return; }\n\t\tif (!prevCell) { \n\t\t\tprevCell = this.navFocusCell; \n\t\t\tthis.navFocusCell = cell;\n\t\t}\n\t\tvar colIndex = cellIndex(cell);\n\t\t\/\/ dojo.html.addClass(this.tHead.rows[0].cells[colIndex], \"activated\");\n\t\tthis.setActivated(this.tHead.rows[0].cells[colIndex]);\n\t\t\/\/ if we've switched cols, unhilite prev col thumb\n\t\tif (prevCell && cellIndex(prevCell) != colIndex && cellIndex(prevCell) != -1) {\n\t\t\tthis.unSetActivated(this.tHead.rows[0].cells[cellIndex(prevCell)]);\n\t\t}\n\t}\n\t\n\tthis.getFocusCol = function() {\n\t\tif (!this.navFocusCell) { return null; }\n\t\tvar colIndex = cellIndex(this.navFocusCell);\n\t\tvar col = this.tHead.rows[0].cells[colIndex];\n\t\treturn col;\n\t}\n\t\n\tthis.getFocusColLogicalIndex = function() {\n\t\tvar col = this.getFocusCol();\n\t\tif (!col) { return -1 };\n\t\tvar ths = this.tHead.getElementsByTagName(\"th\");\n\t\tfor (var i=0; i<ths.length; i++) {\n\t\t\tif (col == ths[i]) { return i; break; }\n\t\t}\n\t\treturn -1;\n\t}\n\n\tthis.highlightColHeader = function(evt) {\n\t\tvar cell = dojo.html.getFirstAncestorByTag(evt.target, \"th\");\n\t\tvar colIndex = cellIndex(cell);\n\t\tvar row = this.tBody.rows[0]; \n\t\tif (!row) {\n\t\t\tthis.setColFocus(cell);\n\t\t} else {\n\t\t\tvar firstCell = row.cells[colIndex];\n\t\t\tif (firstCell) { this.setNavFocus(firstCell); }\n\t\t}\n\t\treturn colIndex;\n\t}\n\t\n\tthis.selectColumn = function(colIndex) {\n\t\tvar rows = this.tBody.rows;\n\t\tif (rows.length == 0) { return; }\n\t\t\n\t\t\/\/1st highlight chunk of cells likely to be visible\n\t\tvar cutoff = Math.min(this.tBody.rows.length-1, 100);\n\t\tfor (var i=0; i<cutoff; i++) {\n\t\t\tvar row = rows[i];\n\t\t\tif (row.className != \"open_row\") {\n\t\t\t\tvar c = row.cells[colIndex];\n\t\t\t\t\/\/ dojo.html.addClass(c, \"highlighted\");\n\t\t\t\tc.style.backgroundColor = \"#fbecc9\";\n\t\t\t}\n\t\t}\n\t\t\/\/unhighlight first chunk of any previous cells\n\t\tfor (var idx=0; idx<this.curSelectedColIndices.length; idx++) {\n\t\t\tvar cidx = this.curSelectedColIndices[idx];\n\t\t\tfor (var i=0; i<cutoff; i++) {\n\t\t\t\tvar row = rows[i];\n\t\t\t\tif (row.className != \"open_row\") {\n\t\t\t\t\tvar c = row.cells[cidx];\n\t\t\t\t\tc.style.backgroundColor = \"\";\n\t\t\t\t\t\/\/ dojo.html.removeClass(c, \"highlighted\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\/\/finish highlighting\n\t\tfor (var i=cutoff; i<rows.length; i++) {\n\t\t\tvar row = rows[i];\n\t\t\tif (row.className != \"open_row\") {\n\t\t\t\tvar c = row.cells[colIndex];\n\t\t\t\t\/\/ dojo.html.addClass(c, \"highlighted\");\n\t\t\t\tc.style.backgroundColor = \"#fbecc9\";\n\t\t\t}\n\t\t}\n\t\t\/\/finish unhighlighting\n\t\tfor (var idx=0; idx<this.curSelectedColIndices.length; idx++) {\n\t\t\tvar cidx = this.curSelectedColIndices[idx];\n\t\t\tfor (var i=cutoff; i<rows.length; i++) {\n\t\t\t\tvar row = rows[i];\n\t\t\t\tif (row.className != \"open_row\") {\n\t\t\t\t\tvar c = row.cells[cidx];\n\t\t\t\t\tc.style.backgroundColor = \"\";\n\t\t\t\t\t\/\/ dojo.html.removeClass(c, \"highlighted\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\twhile (this.curSelectedColIndices.length > 0) {\n\t\t\tthis.curSelectedColIndices.pop();\n\t\t}\n\t\tthis.curSelectedColIndices.push(colIndex);\n\t\tthis.unselectAllRows();\n\t}\n\n\tthis.unselectAllColumns = function(omitIndex) {\n\t\tvar rows = this.tBody.rows;\n\t\tfor (var idx=0; idx<this.curSelectedColIndices.length; idx++) {\n\t\t\tvar colIndex = this.curSelectedColIndices[idx];\n\t\t\tfor (var i=0; i<rows.length; i++) {\n\t\t\t\tif (!omitIndex || colIndex != omitIndex) {\n\t\t\t\t\tvar row = rows[i];\n\t\t\t\t\tif (row.className != \"open_row\") {\n\t\t\t\t\t\tvar c = row.cells[colIndex];\n\t\t\t\t\t\tc.style.backgroundColor = \"\";\n\t\t\t\t\t\t\/\/ dojo.html.removeClass(c, \"highlighted\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\twhile (this.curSelectedColIndices.length > 0) {\n\t\t\tthis.curSelectedColIndices.pop();\n\t\t}\n\t}\n\n\tthis.dispatchHeaderClick = function(evt) {\n\t\tvar colIndex = this.highlightColHeader(evt); \t\n\t\tthis.selectColumn(colIndex);\n\t}\n\t\n\tthis.dispatchHeaderContextMenu = function(evt) {\n\t\tevt.preventDefault();\n\t\tvar colIndex = this.highlightColHeader(evt);\n\t\tthis.selectColumn(colIndex);\n\t\thandleColHeaderMenu(evt);\n\t}\n\n\t\/\/ callback allows implementers flexibility to override\n\t\/\/ to accommodate any type of table\t'chrome' cells around the data cells\n\tthis.isDataCell = function(td) {\n\t\tif (!td) { return false; }\n\t\treturn (!dojo.html.hasClass(td, \"apchrome\"));\n\t\t\/\/return (typeof td.className != \"undefined\") || (td.className == \"\");\n\t}\n\n\t\/\/ callback allows implementers flexibility to override\n\t\/\/ to accommodate various paging schemes\n\tthis.getCellBelow = function(curCell) {\n\t\t\/\/ get the containers\n\t\tvar tr = dojo.html.getFirstAncestorByTag(curCell, \"tr\");\n\t\tvar tbody = dojo.html.getFirstAncestorByTag(tr, \"tbody\");\n\n\t\tif (tr.sectionRowIndex + 1 >= tbody.rows.length) {\n\t\t\treturn curCell;\n\t\t}\n\n\t\tvar trBelow = tbody.rows[tr.sectionRowIndex + 1];\n\n\t\t\/\/ need to account for row detail view row\n\t\tif (trBelow.className == \"open_row\") {\n\t\t\ttrBelow = tbody.rows[tr.sectionRowIndex + 2];\n\t\t\tif (!trBelow) {\n\t\t\t\treturn curCell;\n\t\t\t}\n\t\t}\n\n\t\treturn trBelow.cells[cellIndex(curCell)];\n\t}\n\n\tfunction replaceGif(el, fn) {\n\t\tel.src = el.src.replace(\/\\\/[^\\\/]*?\\.gif\/, \"\/\" + fn);\n\t}\n\n\t\/\/ callback allows implementers flexibility to override\n\t\/\/ to accommodate various paging schemes\n\tthis.getCellAbove = function(curCell) {\n\t\t\/\/ get the containers\n\t\tvar tr = dojo.html.getFirstAncestorByTag(curCell, \"tr\");\n\t\tvar tbody = dojo.html.getFirstAncestorByTag(tr, \"tbody\");\n\n\t\tif (tr.sectionRowIndex == 0) {\n\t\t\treturn curCell;\n\t\t}\n\n\t\tvar trAbove = tbody.rows[tr.sectionRowIndex - 1];\n\n\t\t\/\/ need to account for row detail view row\n\t\tif (trAbove.className == \"open_row\") {\n\t\t\ttrAbove = tbody.rows[tr.sectionRowIndex - 2];\n\t\t\tif (!trAbove) {\n\t\t\t\treturn curCell;\n\t\t\t}\n\t\t}\n\n\t\treturn trAbove.cells[cellIndex(curCell)];\n\t}\n\n\tthis.findDataCellLeft = function(curCell, isDataCellFunc) {\n\t\tif (!curCell) { return; }\n\t\tif (!curCell.tagName ||\tcurCell.tagName.toLowerCase() != \"td\") { return; }\n\n\t\tif (!isDataCellFunc) { isDataCellFunc = this.isDataCell; }\n\n\t\t\/\/ if no previous cell, return orig\n\t\tif (cellIndex(curCell) == 0){\n\t\t\treturn curCell;\n\t\t}\n\n\t\t\/\/ get the containing row\n\t\tvar tr = dojo.html.getFirstAncestorByTag(curCell, \"tr\");\n\n\t\t\/\/ if the cell to the left is not a\tdata cell, return orig\n\t\tvar newCell = tr.cells[cellIndex(curCell)-1];\n\t\tif (!isDataCellFunc.call(this, newCell)) {\n\t\t\treturn curCell;\n\t\t}\n\n\t\treturn newCell;\n\t}\n\n\tthis.findDataCellRight = function(curCell, isDataCellFunc){\n\t\tif (!curCell){ return; }\n\t\tif (!curCell.tagName ||\tcurCell.tagName.toLowerCase() != \"td\") { return; }\n\n\t\tif (!isDataCellFunc) { isDataCellFunc = this.isDataCell; }\n\n\t\t\/\/ get the containing row\n\t\tvar tr = dojo.html.getFirstAncestorByTag(curCell, \"tr\");\n\n\t\t\/\/ if no cell to the right, return orig\n\t\tif((cellIndex(curCell)+1)>= tr.cells.length){\n\t\t\treturn curCell;\n\t\t}\n\n\t\t\/\/ if the cell to the right is not a data cell, return orig\n\t\tvar newCell = tr.cells[cellIndex(curCell)+ 1];\n\t\tif (!isDataCellFunc.call(this, newCell)) {\n\t\t\treturn curCell;\n\t\t}\n\n\t\treturn newCell;\n\t}\n\n\tthis.findDataCellBelow = function(curCell, isDataCellFunc, getCellBelowFunc) {\n\t\tif (!curCell) { return; }\n\t\tif (!curCell.tagName ||\tcurCell.tagName.toLowerCase() != \"td\") { return; }\n\n\t\tif (!isDataCellFunc) { isDataCellFunc = this.isDataCell; }\n\t\tif (!getCellBelowFunc) { getCellBelowFunc = this.getCellBelow; }\n\n\t\t\/\/ if no row below according to the current paging scheme, return orig\n\t\tvar newCell = getCellBelowFunc.call(this, curCell);\n\t\tif (newCell == curCell) {\n\t\t\treturn curCell;\n\t\t}\n\n\t\t\/\/ if the cell below is not a\tdata cell, return orig\n\t\tif (!isDataCellFunc.call(this, newCell)) {\n\t\t\treturn curCell;\n\t\t}\n\n\t\treturn newCell;\n\t}\n\n\tthis.findDataCellAbove = function(curCell, isDataCellFunc, getCellAboveFunc) {\n\t\tif (!curCell) { return; }\n\t\tif (!curCell.tagName ||\tcurCell.tagName.toLowerCase() != \"td\") { return; }\n\n\t\tif (!isDataCellFunc) { isDataCellFunc = this.isDataCell; }\n\t\tif (!getCellAboveFunc) { getCellAboveFunc = this.getCellAbove; }\n\n\t\t\/\/ if no row below according to the current paging scheme, return orig\n\t\tvar newCell = getCellAboveFunc.call(this, curCell);\n\t\tif (newCell == curCell) {\n\t\t\treturn curCell;\n\t\t}\n\n\t\t\/\/ if the cell below is not a\tdata cell, return orig\n\t\tif (!isDataCellFunc.call(this, newCell)) {\n\t\t\treturn curCell;\n\t\t}\n\n\t\treturn newCell;\n\t}\n\n\tthis.hilitedCells = [];\n\tthis.dispatchMouseOver = function (evt) {\n\t\tvar cell = this.getCellFromChild(evt.target);\n\t\tif (cell) {\n\t\t\t\/\/ all the \"row header\"\tcells should have a\thand cursor\n\t\t\tif (cellIndex(cell) < this.paperClipCellIdx) {\n\t\t\t\t\/\/ except ignore the row detail view\n\t\t\t\tif (cell.id == \"row_detail_cell\") {\n\t\t\t\t\tthis.domNode.style.cursor = \"default\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.domNode.style.cursor = \"pointer\";\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t\/*\n\t\t\t\tthis.domNode.style.cursor = \"default\";\n\t\t\t\t\/\/ We need to communicate to users that cells are editable.\n\t\t\t\t\/\/ On mouseover, change the cell border to darker\/thicker lines to echo Excel's\t\"pseudo-select\"\n\t\t\t\tdojo.html.addClass(cell, \"hoverhilite\");\n\t\t\t\tthis.hilitedCells.push(cell);\n\t\t\t\t*\/\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.dispatchMouseout = function (evt) {\n\t\tvar cell = this.getCellFromChild(evt.target);\n\t\tif (cell) {\n\t\t\t\/\/ turn off hand cursor when leaving \"row header\"\tcells\n\t\t\tif (cellIndex(cell) < this.numRowHeaderCells) {\n\t\t\t\tthis.domNode.style.cursor = \"default\";\n\t\t\t}\n\t\t}\n\t\t\/\/ We need to communicate to users that cells are editable.\n\t\t\/\/ On mouseover, change the cell border to darker\/thicker lines to echo Excel's\t\"pseudo-select\"\n\t\t\/*\n\t\tdojo.html.removeClass(cell, \"hoverhilite\");\n\t\twhile (this.hilitedCells.length\t>\t0) {\n\t\t\tvar oldCell = this.hilitedCells.pop();\n\t\t\tif (oldCell != cell) {\n\t\t\t\tdojo.html.removeClass(oldCell, \"hoverhilite\");\n\t\t\t}\n\t\t}\n\t\t*\/\n\t}\n\n\tthis.dispatchMouseUp = function (evt) {\n\t\tvar row = this.getRowFromChild(evt.target);\n\t\tvar cell = this.getCellFromChild(evt.target);\n\t\tif (cell && !getParentById(cell, \"row_detail\")) {\n\t\t\t\/\/ the \"row header\"\tthumb cells\n\t\t\tif (cellIndex(cell) < this.arrowHeaderCellIdx) {\n\t\t\t\tif (evt.ctrlKey) {\n\t\t\t\t\t\/\/toggle highlighting if ctrl-clicking a row that's\n\t\t\t\t\t\/\/already been ctrl-click-highlighted\n\t\t\t\t\tif (this.curSelectedRows[row.id] != null) {\n\t\t\t\t\t\tif (this.isRowSelected(row)) {\n\t\t\t\t\t\t\tthis.unselectRow(row);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tthis.selectRow(row, this.KeepAllSelected);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t\/\/this is the first time we've ctrl-clicked this row\n\t\t\t\t\t\tthis.selectRow(row, this.KeepAllSelected);\n\t\t\t\t\t}\n\t\t\t\t\t\/\/ suppress OS selection-highlighting in IE\n\t\t\t\t\tif (document.selection) {\n\t\t\t\t\t\tdocument.selection.empty();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (evt.shiftKey) {\n\t\t\t\t\tif (document.selection) { document.selection.clear(); }\n\t\t\t\t\telse if (window.getSelection && window.getSelection().removeAllRanges) {\n\t\t\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\t\t}\n\n\t\t\t\t\t\/* TODO - shift-click should also unhilite sub-ranges\n\t\t\t\t\tif (this.curSelectedRows[row.id] != null) {\n\t\t\t\t\t\tif (row.className == \"highlighted\") {\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t\/\/this is the first time we've shift-clicked this row\n\t\t\t\t\t}\n\t\t\t\t\t*\/\n\n\t\t\t\t\t\/\/ now highlight the contained range\n\t\t\t\t\tvar min = row.sectionRowIndex;\n\t\t\t\t\tvar max = row.sectionRowIndex;\n\t\t\t\t\tfor (rowId in this.curSelectedRows) {\n\t\t\t\t\t\tvar selectedRow = this.curSelectedRows[rowId];\n\t\t\t\t\t\tif (selectedRow != null) {\n\t\t\t\t\t\t\tmin = Math.min(min, selectedRow.sectionRowIndex);\n\t\t\t\t\t\t\tmax = Math.max(max, selectedRow.sectionRowIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor (var i=min; i<=max; i++) {\n\t\t\t\t\t\tthis.selectRow(this.tBody.rows[i], this.KeepAllSelected);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t\/\/ not a modified-click, so treat normally, i.e.,\n\t\t\t\t\t\/\/ a click unselects everything else\n\t\t\t\t\tthis.singleSelectRow(row);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\/\/ the expando-collapso arrow in the 2nd column\n\t\t\telse if (cellIndex(cell) == this.arrowHeaderCellIdx) {\n\t\t\t\tif (this.curOpenRowDetail != null) {\n\t\t\t\t\tvar openRow = document.getElementById(this.curOpenRowId);\n\t\t\t\t\tif (row.id == this.curOpenRowId) {\n\t\t\t\t\t\tthis.closeRow(openRow);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.closeRow(openRow, row);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdbg(\"now opening row \" + row.id);\n\t\t\t\t\tthis.openRow(row);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\n\tthis.dispatchClick = function (evt) {\n\t\tvar row = this.getRowFromChild(evt.target);\n\t\tvar cell = this.getCellFromChild(evt.target);\n\t\tif (cell && !getParentById(cell, \"row_detail\")) {\n\t\t\tif (cellIndex(cell) >= this.numRowHeaderCells) {\n\t\t\t\tthis.setNavFocus(cell);\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.dispatchDoubleClick = function(evt){\n\t\tthis.unselectAllRows();\n\t\tvar cell = this.getCellFromChild(evt.target);\n\t\tif (cell && !getParentById(cell, \"row_detail\")){\n\t\t\tif (cellIndex(cell) >= this.numRowHeaderCells){\n\t\t\t\tthis.buildEditor(evt, cell);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tevt.preventDefault();\n\t\tevt.stopPropagation();\n\t}\n\n\tthis.dispatchHeaderDoubleClick = function(evt) {\n\t\tdojo.debug(\"dispatchHeaderDoubleClick\");\n\t\tvar cell = dojo.html.getFirstAncestorByTag(evt.target, \"th\");\n\t\tif (!cell) { return; }\n\t\thandleEditColName(cellIndex(cell) - this.numRowHeaderCells, false);\n\t}\n\n\tthis.safeHandleTab = function (evt) {\n\t\tevt.stopPropagation();\n\t\tevt.preventDefault();\n\t\tthis.handleTab(evt.shiftKey);\n\t\t\/*\n\t\tvar drh = dojo.render.html;\n\t\tif((drh.mozilla)&&(drh.UA.indexOf(\"Firefox\/1.5\")<0)){\n\t\t\tthis.defocus(this.handleTab, evt);\n\t\t}else{\n\t\t\tvar shiftKey = evt.shiftKey || false;\n\t\t\tthis.handleTab(evt.shiftKey);\n\t\t}\n\t\t*\/\n\t\tdojo.lang.setTimeout(this, function(){ this.editor.textArea.focus(); }, 2);\n\t}\n\n\tthis.defocus = function(callback, evt) {\n\t\tvar me = this;\n\t\tvar shiftKey = evt.shiftKey || false;\n\t\tsetTimeout(function(){\n\t\t\tdojo.debug(\"JotAPTable.defocus\");\n\t\t\tvar el = document.createElement(\"textarea\");\n\t\t\t\/\/ see https:\/\/bugzilla.mozilla.org\/show_bug.cgi?id=236791#c44\n\t\t\t\/\/el.type = \"checkbox\";\n\t\t\tel.style.position = \"absolute\";\n\t\t\tel.style.visibility = \"hidden\"; \/\/ doesn't work for ie, btw\n\t\t\t\/\/ make sure it's in the active client area\n\t\t\t\/\/ so we don't lurch around on focus()\n\t\t\tif (this.navFocusCell) {\n\t\t\t\twith (dojo.html) {\n\t\t\t\t\tel.style.top = (getAbsoluteX(this.navFocusCell) + getScrollTop()) + \"px\";\n\t\t\t\t\tel.style.left = (getAbsoluteY(this.navFocusCell) + getScrollLeft()) + \"px\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tdocument.body.appendChild(el);\n\t\t\tel.focus();\n\t\t\tdocument.body.removeChild(el);\n\t\t\tme.preventBuild = false;\n\t\t\tif (callback) { callback.call(me, shiftKey); }\n\t\t}, 30);\n\t}\n\n\tthis.handleTab = function(shiftKey) {\n\t\tif (shiftKey) {\n\t\t\tthis.setNavFocus(this.findDataCellLeft(this.navFocusCell));\n\t\t} else {\n\t\t\tthis.setNavFocus(this.findDataCellRight(this.navFocusCell));\n\t\t}\n\t}\n\n\tthis.handleEnter = function(evt) {\n\t\tthis.setNavFocus(this.findDataCellBelow(this.navFocusCell));\n\t}\n\n\tthis.countSelectedRows = function() {\n\t\tvar numStored = 0;\n\t\tif (this.curSelectedRows) { \n\t\t\tfor (rowId in this.curSelectedRows) {\n\t\t\t\tvar storedRow = this.curSelectedRows[rowId];\n\t\t\t\tif (storedRow) { numStored++; }\n\t\t\t}\n\t\t}\n\t\treturn numStored;\n\t}\n\n\tthis.singleSelectRow = function (row, keepSelected) {\n\t\tif (!row) { return; }\n\t\tdbg(\"selectRow called with row: \" + row.id);\n\t\tvar isSelected = false;\n\t\tvar numStored = 0;\n\t\tfor (rowId in this.curSelectedRows) {\n\t\t\tvar storedRow = this.curSelectedRows[rowId];\n\t\t\tif (storedRow != null) {\n\t\t\t\tif (storedRow == row) {\n\t\t\t\t\tisSelected = true;\n\t\t\t\t} else {\n\t\t\t\t\tthis.unselectRow(storedRow);\n\t\t\t\t}\n\t\t\t\tnumStored++;\n\t\t\t}\n\t\t}\n\t\tif (isSelected && numStored == 1 && !keepSelected) {\n\t\t\tthis.unselectRow(row);\n\t\t} else {\n\t\t\tthis.curSelectedRows = [];\n\t\t\tthis.selectRow(row, this.KeepThisSelected);\n\t\t}\n\t}\n\n\tthis.selectRow = function(row, selectStyle) {\n\t\t\/\/row.style.backgroundColor = \"#fbecc9\";\n\t\trow.className = \"activated\";\n\t\t\/\/toggleRowThumb(row, true);\n\t\tthis.curSelectedRows[row.id] = row;\n\t\tthis.curSelectedRowsStack.push(row);\n\n\t\tvar arrowImg = row.cells[this.arrowHeaderCellIdx].getElementsByTagName(\"img\")[0];\n\t\tif (arrowImg.src.indexOf(\"right\") != -1) {\n\t\t\treplaceGif(arrowImg, \"arrow_orange_right.gif\");\n\t\t} else {\n\t\t\treplaceGif(arrowImg, \"arrow_orange_down.gif\");\n\t\t}\n\/*\n\t\tvar paperClipImg = row.cells[this.paperClipCellIdx].getElementsByTagName(\"img\")[0];\n\t\tif (paperClipImg) {\n\t\t\treplaceGif(paperClipImg, \"paper_clip_orange_on.gif\");\n\t\t}\n*\/\n\t\t\/\/FIXME: better perms handling\n\t\tif (Wiki.write) {\n\t\t\tvar firstCell = row.cells[this.firstDataCellIdx];\n\t\t\tif (firstCell) {\n\t\t\t\tthis.setNavFocus(firstCell, selectStyle);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.unselectAllColumns();\n\t}\n\n\tthis.unselectAllRows = function(rowToSkip) {\n\t\tfor (rowId in this.curSelectedRows) {\n\t\t\tvar storedRow = this.curSelectedRows[rowId];\n\t\t\tif (storedRow != null) {\n\t\t\t\tif (rowToSkip) {\n\t\t\t\t\tif (storedRow.id != rowToSkip.id) {\n\t\t\t\t\t\tthis.unselectRow(storedRow);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.unselectRow(storedRow);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.curSelectedRowsStack = [];\n\t\tif (rowToSkip) {\n\t\t\tthis.curSelectedRowsStack.push(rowToSkip)\n\t\t}\n\t}\n\n\tthis.unselectRow = function(row) {\n\t\tif (row) {\n\t\t\trow.className = \"\";\n\t\t\t\/\/row.style.backgroundColor = \"\";\n\t\t\t\n\t\t\t\/\/toggleRowThumb(row, false);\n\t\t\tthis.curSelectedRows[row.id] = null;\n\n\t\t\tvar arrowImg = row.cells[this.arrowHeaderCellIdx].getElementsByTagName(\"img\")[0];\n\t\t\tif (arrowImg.src.indexOf(\"right\") != -1) {\n\t\t\t\treplaceGif(arrowImg, \"arrow_white_right.gif\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\treplaceGif(arrowImg, \"arrow_white_down.gif\");\n\t\t\t}\n\n\/*\t\t\tvar paperClipImg = row.cells[this.paperClipCellIdx].getElementsByTagName(\"img\")[0];\n\t\t\tif (paperClipImg) {\n\t\t\t\treplaceGif(paperClipImg, \"paper_clip_white.gif\");\n\t\t\t}\n*\/\n\t\t\tvar navFocusRow = this.getRowFromChild(this.navFocusCell);\n\t\t\tif (navFocusRow && navFocusRow.id == row.id) {\n\t\t\t\twhile (this.curSelectedRowsStack.length\t>\t0) {\n\t\t\t\t\tvar prevRow = this.curSelectedRowsStack.pop();\n\t\t\t\t\tif (this.isRowSelected(prevRow) && prevRow.id != row.id) {\n\t\t\t\t\t\tvar firstCell = prevRow.cells[this.firstDataCellIdx];\n\t\t\t\t\t\tif (firstCell) {\n\t\t\t\t\t\t\tthis.setNavFocus(firstCell, this.KeepAllSelected);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\/*\n\tfunction toggleRowThumb(row, on) {\n\t\tvar imgs = row.getElementsByTagName(\"img\");\n\t\tfor (var i=0; i<imgs.length; i++) {\n\t\t\tvar img = imgs[i];\n\t\t\tif (on == true) {\n\t\t\t\treplaceGif(img, \"row_edge_dots_on.gif\");\n\t\t\t} else {\n\t\t\t\treplaceGif(img, \"row_edge_dots.gif\");\n\t\t\t}\n\t\t}\n\t}\n*\/\n\tvar g_opening = false;\n\tthis.openRow = function (row) {\n\t\t\tif (this.curOpenRowId == row.id) { return; }\n\t\t\tif (g_opening == true) { return; }\n\t\t\tthis.curOpenRowId = row.id;\n\n\t\t\tvar arrowImg = row.cells[this.arrowHeaderCellIdx].getElementsByTagName(\"img\")[0];\n\t\t\tif (arrowImg.src.indexOf(\"orange\") != -1) {\n\t\t\t\treplaceGif(arrowImg, \"arrow_orange_down.gif\");\n\t\t\t} else {\n\t\t\t\treplaceGif(arrowImg, \"arrow_white_down.gif\");\n\t\t\t}\n\n\t\t\t\/\/ find how many columns this table has\n\t\t\tvar numCols = this.domNode.getElementsByTagName(\"col\").length;\n\n\t\t\t\/\/ create the temp row to insert\n\t\t\t\/*\n\t\t\tinsertRow modified in DOM Level\t2\n\t\t\t\tInsert a row into this section.\tThe new row is inserted immediately before the current indexth row in this section.\n\t\t\t\tIf index is\t-1 or equal to the number of rows in this section, the new row is appended.\n\t\t\t\t*\/\n\t\t\tvar tr = this.tBody.insertRow(row.rowIndex);\n\t\t\ttr.className = \"open_row\";\n\t\t\ttr.id = \"row_detail\";\n\t\t\tvar td = document.createElement(\"td\");\n\t\t\ttd.className = \"row_num\";\n\t\t\ttd.innerHTML = \"&#160;\";\n\t\t\ttr.appendChild(td);\n\n\t\t\ttd = document.createElement(\"td\");\n\t\t\ttd.className = \"open_row_cell\";\n\t\t\ttd.colSpan = numCols - 1;\n\t\t\ttd.id = \"row_detail_cell\";\n\n\t\t\ttr.appendChild(td);\n\t\t\tthis.curOpenRowDetail = tr;\n\n\t\t\tthis.updateOpenRowDetail(td, function() {g_opening = false});\n\t}\n\n\tthis.updateOpenRowDetail = function(rowDetailCell, callback) {\n\t\tif (!rowDetailCell)\n\t\t\treturn;\n\n\t\tvar me = this;\n\t\tvar cid = this.curOpenRowId.replace(\/&apos;\/g, \"'\");\n\t\tvar content = { row: cid, canwrite: Wiki.write };\n\t\tdojo.io.bind({\n\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/APRowDetailView?theme=none\"),\n\t\t\tmethod: \"get\",\n\t\t\tcontent: content,\n\t\t\tmimetype: \"text\/plain\",\n\t\t\tpreventCache: true,\n\t\t\thandler: function(type, resp, e) {\n\t\t\t\tdbg(\"returning from fetching row detail view\");\n\t\t\t\tdbg(resp);\n\t\t\t\t\/\/FIXME: jot xml parser chokes on MS crap\n\t\t\t\tresp = resp.replace(\/<!--template error: couldn't parse XML content:\/, \"\");\n\t\t\t\tresp = resp.replace(\/\\[.*?\\]-->\/,\"\");\n\t\t\t\trowDetailCell.innerHTML = resp;\n\n\t\t\t\tme.adjustDragResizeHandles();\n\n\t\t\t\t\/\/ prepare editable notes in row detail view\n\t\t\t\tvar el = document.getElementById(\"open_row_container\");\n\t\t\t\tvar container = dojo.html.getElementsByClass(\"open_row_notes\", el)[0];\n\t\t\t\tif (!el || !container) { return; }\n\t\t\t\t\/\/FIXME:better perms handling\n\t\t\t\tif (Wiki.write) {\n\t\t\t\t\tcontainer.ondblclick = handleEditNotes;\n\t\t\t\t\tprepareRichTextArea(container);\n\t\t\t\t\tvar btns = dojo.html.getElementsByClass(\"richtext_button\", container);\n\t\t\t\t\tbtns[0].onclick = handleEditNotes;\n\t\t\t\t\tbtns[1].onclick = cleanUpNotesEditor;\n\t\t\t\t\tbtns[2].onclick = function(evt){cleanUpNotesEditor(evt, false);};\n\t\t\t\t}\n\t\t\t\tif (callback) { callback(); }\n\t\t\t}\n\t\t});\n\t}\n\n\tthis.closeRow = function(row, rowToOpen) {\n\t\tvar arrowImg = row.cells[this.arrowHeaderCellIdx].getElementsByTagName(\"img\")[0];\n\t\tif (arrowImg.src.indexOf(\"orange\") != -1) {\n\t\t\treplaceGif(arrowImg, \"arrow_orange_right.gif\");\n\t\t} else {\n\t\t\treplaceGif(arrowImg, \"arrow_white_right.gif\");\n\t\t}\n\/*\n\t\tvar paperClipImg = row.cells[this.paperClipCellIdx].getElementsByTagName(\"img\")[0];\n\t\tif (paperClipImg) {\n\t\t\treplaceGif(paperClipImg, \"paper_clip_white.gif\");\n\t\t}\n*\/\n\t\tvar rowdetail = document.getElementById(\"open_row_container\");\n\t\tvar me = this;\n\t\tdojo.fx.wipeOut(rowdetail, 200, function() { me.deleteRowDetail(rowToOpen); } );\n\t\treturn false;\n\t}\n\n\tthis.deleteRowDetail = function(rowToOpen) {\n\t\tif (this.curOpenRowDetail) {\n\t\t\tthis.curOpenRowDetail.parentNode.removeChild(this.curOpenRowDetail);\n\t\t\tthis.curOpenRowDetail = null;\n\t\t\tthis.curOpenRowId = \"\";\n\t\t\tif (rowToOpen) {\n\t\t\t\tthis.openRow(rowToOpen);\n\t\t\t}\n\t\t\tthis.adjustDragResizeHandles();\n\t\t}\n\t}\n\t\n\n\/* removed from row detail view\n\tthis.deleteRowDetail = function() {\n\t\tvar openRow = document.getElementById(this.curOpenRowId);\n\t\tif (openRow) {\n\t\t\tthis.closeRow(openRow);\n\t\t\tsetTimeout(\"deleteRows()\", 250);\n\t\t}\n\t\treturn false;\n\t}\n*\/\n\n\tthis.clearSelectedRows = function() {\n\t\tfor (rowId in this.curSelectedRows) {\n\t\t\tvar storedRow = this.curSelectedRows[rowId];\n\t\t\tif(storedRow && storedRow[\"style\"]){\n\t\t\t\tstoredRow.style.backgroundColor = \"\";\n\t\t\t}\n\t\t\t\/*\n\t\t\tif (storedRow != null && storedRow.className) {\n\t\t\t\tstoredRow.className = \"\";\n\t\t\t}\n\t\t\t*\/\n\t\t}\n\t\tthis.curSelectedRows = [];\n\t}\n\n\tthis.dispatchEditorSave = function(origEvt, thisEditor, data) {\n\t\tdojo.debug(\"JotAPTable.dispatchEditorSave:\", data);\n\t\tthis.saveEditorCell(thisEditor, data);\n\n\t\tswitch (origEvt.keyCode) {\n\t\t\tcase origEvt.KEY_TAB:\n\t\t\t\t\/\/ this.safeHandleTab(origEvt);\n\t\t\t\tbreak;\n\t\t\tcase origEvt.KEY_ENTER:\n\t\t\t\tbreak;\n\t\t\tcase origEvt.KEY_UP_ARROW:\n\t\t\t\tthis.setNavFocus(this.findDataCellAbove(this.navFocusCell));\n\t\t\t\tbreak;\n\t\t\tcase origEvt.KEY_RIGHT_ARROW:\n\t\t\t\tthis.setNavFocus(this.findDataCellRight(this.navFocusCell));\n\t\t\t\tbreak;\n\t\t\tcase origEvt.KEY_DOWN_ARROW:\n\t\t\t\tthis.setNavFocus(this.findDataCellBelow(this.navFocusCell));\n\t\t\t\tbreak;\n\t\t\tcase origEvt.KEY_LEFT_ARROW:\n\t\t\t\tthis.setNavFocus(this.findDataCellLeft(this.navFocusCell));\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tthis.dispatchEditorCancel = function(origEvt) {\n\t\tif (!origEvt) { return; }\n\t\tif(typeof origEvt.keyCode != \"undefined\"){\n\t\t\tswitch (origEvt.keyCode) {\n\t\t\t\tcase origEvt.KEY_TAB:\n\t\t\t\t\t\/\/ this.safeHandleTab(origEvt);\n\t\t\t\t\tbreak;\n\t\t\t\tcase origEvt.KEY_ENTER:\n\t\t\t\t\tdojo.debug(\"JotAPTable.dispatchEditorCancel\");\n\t\t\t\t\t\/\/ this.handleEnter();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}else{\n\t\t\tthis.setNavFocus(this.navFocusCell);\n\t\t}\n\t\tthis.clearEditor();\n\t}\n\n\t\/\/ this is split out so saveCellEdit can be called directly\n\t\/\/ outside of an editor-edited context\n\tthis.saveEditorCell = function (thisEditor, data) {\n\t\tdojo.debug(\"saveEditorCell\");\n\t\tvar td = thisEditor.editedCell;\n\t\tthis.saveCellEdit(td, data);\n\t\tthis.clearEditor();\n\t}\n\n\tthis.saveCellEdit = function(cell, data){\n\t\tif(!cell){ dojo.debug(\"FAILURE: no cell!\"); return; }\n\n\t\tvar row = this.getRowFromChild(cell);\n\t\tvar colIdx = cellIndex(cell) - this.numRowHeaderCells;\n\t\tvar ths = this.tHead.getElementsByTagName(\"th\");\n\t\tif(!ths[colIdx]){ dojo.debug(\"FAILURE: column doesn't match!\"); return; }\n\t\tvar propertyName = ths[colIdx].id;\n\n\t\tvar val = data || cell.innerHTML;\n\n\t\t\/\/auto-urlify\n\t\tvar words = val.split(\" \");\n\t\tfor (var i=0; i<words.length; i++) {\n\t\t\tvar word = words[i];\n\t\t\tif (word.indexOf(\"href\") == -1 && (word.indexOf(\"http:\") != -1 || word.indexOf(\"https:\") != -1)) {\n\t\t\t\twords[i] = \"<a target='_new' href='\" + word.replace(\/'\/g,\"\\\\'\") + \"'>\" + word + \"<\/a>\";\n\t\t\t}\n\t\t}\n\t\tval = words.join(\" \");\n\t\tcell.innerHTML = val;\n\t\tvar arr = [];\n\t\t\n\t\tarr[\"prop\"] = propertyName;\n\t\tarr[\"val\"] = val;\n\t\tvar cls = dojo.html.getClass(cell);\n\t\t\/\/ strip temporary classes\n\t\tcls = cls.replace(\/pseudofocus\/gi, \"\");\n\t\tcls = cls.replace(\/highlighted\/gi, \"\");\n\t\tarr[\"css\"] = cls;\n\t\tarr[\"path\"] = \"\/\" + this.appName + \"\/\" + row.id;\n\t\tarr[\"form\"] = \"\/\" + this.schemaName;\n\n\t\tshowWorkingStatus();\n\n\t\tvar req = dojo.io.bind({\n\t\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/APSaveCellValue?theme=none\"),\n\t\t\t\tmethod: \"post\",\n\t\t\t\tcontent: arr,\n\t\t\t\tmimetype: \"text\/plain\",\n\t\t\t\thandler: function(type, resp, e) {\n\t\t\t\t\t\/\/TODO err handling\n\t\t\t\t\tdbg(e.responseText);\n\t\t\t\t\thideWorkingStatus();\n\t\t\t\t}\n\t\t});\n\t\t\n\t\tg_edited = true;\n\t\t\/\/this.edited = true;\n\t}\n\n\tthis.pendingRowInserts = 0;\n\tthis.curMaxIdx = 0;\n\n\tthis.appendRow = function() {\n\t\tthis.pendingRowInserts++;\n\n\t\tvar rows = this.tBody.rows;\n\t\tif (this.curMaxIdx == 0) {\n\t\t\tfor (var i=0; i<rows.length; i++) {\n\t\t\t\t\tvar cell = rows[i].cells[this.rowNumberCellIdx];\n\t\t\t\t\tif (cell) {\n\t\t\t\t\t\tvar thisIdx = Number(cell.innerHTML);\n\t\t\t\t\t\tthisIdx = isNaN(thisIdx) ? 0 : thisIdx;\n\t\t\t\t\t\tthis.curMaxIdx = Math.max(this.curMaxIdx, thisIdx);\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (rows.length > 0) {\n\t\t\t\tvar cell = rows[rows.length - 1].cells[this.rowNumberCellIdx];\n\t\t\t\tif (cell) {\n\t\t\t\t\tvar candidate = Number(cell.innerHTML);\n\t\t\t\t\tthis.curMaxIdx = (candidate > this.curMaxIdx) ? candidate : ++this.curMaxIdx;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar prevNodeName = \"\";\n\t\tif (this.tBody.rows.length > 0) {\n\t\t\tvar prevNode = this.tBody.rows[this.tBody.rows.length - 1];\n\t\t\tif (!dojo.string.isBlank(prevNode.id)) {\n\t\t\t\tprevNodeName = prevNode.id;\n\t\t\t}\n\t\t}\n\t\tprevNodeName = prevNodeName.replace(\/&apos;\/g, \"'\");\n\n\t\tvar insertBefore = false;\n\n\t\tvar me = this;\n\t\tdojo.io.bind({\n\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/APInsertRow?theme=none\"),\n\t\t\tmethod: \"post\",\n\t\t\tcontent: {appname: this.appName, rowidx: (this.curMaxIdx + 1), pivotnode: prevNodeName, insertbefore: insertBefore},\n\t\t\tmimetype: \"text\/plain\",\n\t\t\thandler: function(type, resp, e) {\n\t\t\t\tif (e) {\n\t\t\t\t\tdbg(e.responseText);\n\t\t\t\t\tdbg(\"created new row\");\n\t\t\t\t\tvar tr = me.tBody.insertRow(me.tBody.rows.length);\n\t\t\t\t\tvar div = document.createElement(\"div\");\n\t\t\t\t\tdiv.innerHTML = \"<table><tbody>\" + resp + \"<\/tbody><\/table>\";\n\t\t\t\t\tvar row = div.getElementsByTagName(\"tr\")[0];\n\t\t\t\t\tme.tBody.replaceChild(row, tr);\n\t\t\t\t\twindow.scrollTo(0, dojo.html.getAbsoluteY(row));\n\t\t\t\t\tme.singleSelectRow(row);\n\t\t\t\t\t\/\/ attempt to deal with weird \"stuck\" state in ff\n\t\t\t\t\tsetTimeout(function() {row.style.border=\"1px dotted black\";}, 10);\n\t\t\t\t\tme.pendingRowInserts--;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tthis.insertRow = function(pivotRowId, insertBefore) {\n\t\tvar pivotRow = document.getElementById(pivotRowId);\n\t\tif (!pivotRow) {\n\t\t\treturn false;\n\t\t}\n\t\tpivotRowId = pivotRowId.replace(\/&apos;\/g, \"'\");\n\n\t\tthis.pendingRowInserts++;\n\n\t\tvar pivotIdx = pivotRow.sectionRowIndex;\n\t\tvar insertIdx = pivotIdx;\n\t\tif (insertBefore != true) {\n\t\t\tinsertIdx = pivotIdx + 1;\n\t\t}\n\n\t\tvar me = this;\n\t\tdojo.io.bind({\n\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/APInsertRow?theme=none\"),\n\t\t\tmethod: \"post\",\n\t\t\tcontent: {appname: this.appName, rowidx: insertIdx, pivotnode: pivotRowId, insertbefore: insertBefore},\n\t\t\tmimetype: \"text\/plain\",\n\t\t\thandler: function(type, resp, e) {\n\t\t\t\tif (e) {\n\t\t\t\t\tdbg(e.responseText);\n\t\t\t\t\tdbg(\"created new row\");\n\t\t\t\t\tvar tr = me.tBody.insertRow(insertIdx);\n\t\t\t\t\t\/\/tbody.innerHTML = resp;\n\t\t\t\t\tvar div = document.createElement(\"div\");\n\t\t\t\t\tdiv.innerHTML = \"<table><tbody>\" + resp + \"<\/tbody><\/table>\";\n\t\t\t\t\tvar row = div.getElementsByTagName(\"tr\")[0];\n\t\t\t\t\tme.tBody.replaceChild(row, tr);\n\t\t\t\t\tme.pendingRowInserts--;\n\t\t\t\t\t\n\t\t\t\t\tif (me.pendingRowInserts < 1) {\n\t\t\t\t\t\tme.updateRowIndices();\n\t\t\t\t\t\twindow.scrollTo(0, dojo.html.getAbsoluteY(row));\n\t\t\t\t\t\tme.singleSelectRow(row);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tthis.deleteRows = function() {\n\t\tthis.deleteRowDetail();\n\t\tvar rowsToDelete = this.curSelectedRows;\n\t\tvar hadSelectedRows = false;\n\t\tvar lastRowIdx = 0;\n\t\tfor (row in rowsToDelete) {\n\t\t\tvar row = rowsToDelete[row];\n\t\t\tif (row) {\n\t\t\t\tif (!dojo.string.isBlank(row.id)) {\n\t\t\t\t\thadSelectedRows = true;\n\t\t\t\t\tthis.deleteRow(row.id);\n\t\t\t\t\tlastRowIdx = row.sectionRowIndex;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\/\/ if there were no selected rows, delete the row with the navfocus\n\t\tif (!hadSelectedRows && this.navFocusCell) {\n\t\t\tvar row = dojo.html.getFirstAncestorByTag(this.navFocusCell, \"tr\");\n\t\t\tthis.deleteRow(row.id);\n\t\t}\n\t\t\n\t\t\/\/after deletion, select row below, if it exists\n\t\tvar nextGoodIdx = lastRowIdx + 1;\n\t\tif (nextGoodIdx > this.tBody.rows.length - 1) {\n\t\t\tnextGoodIdx = lastRowIdx - 1;\n\t\t}\n\t\tif (this.tBody.rows.length > 0 && nextGoodIdx < this.tBody.rows.length) {\n\t\t\tthis.selectRow(this.tBody.rows[nextGoodIdx]);\n\t\t}\n\t}\n\n\tthis.rowsToDelete = 0;\n\tthis.deleteRow = function(rowId){\n\t\t\/\/ FIXME: this is kinda the tip of the iceberg\n\t\trowId = rowId.replace(\/&apos;\/g, \"'\");\n\t\tshowWorkingStatus();\n\t\t++this.rowsToDelete;\n\t\tvar me = this;\n\t\tsetTimeout(function() {dojo.io.bind({\n\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/APDeleteRow?theme=none\"), \n\t\t\tmethod: \"post\",\n\t\t\tcontent: {appname: me.appName, rowname: rowId}, \n\t\t\tmimetype: \"text\/plain\", \n\t\t\thandler: function(type, resp, e) {\n\t\t\t\tvar row = dojo.byId(rowId);\n\t\t\t\tif (row) {\n\t\t\t\t\tme.unselectRow(row);\n\t\t\t\t\tdojo.dom.removeChildren(row.parentNode.removeChild(row));\n\t\t\t\t}\n\t\t\t\t--me.rowsToDelete;\n\t\t\t\tif (me.rowsToDelete == 0) { \n\t\t\t\t\tme.updateRowIndices(); \n\t\t\t\t\thideWorkingStatus();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t}, 1);\n\t}\t\n\n\tthis.updateRowIndices = function() {\n\t\t\/\/ update all the displayed indices...\n\t\tvar rows = this.tBody.rows;\n\t\tfor (var i=0; i<rows.length; i++) {\n\t\t\t\/\/second row-header column contains the row idx\n\t\t\t\trows[i].cells[me.rowNumberCellIdx].innerHTML = (rows[i].sectionRowIndex + 1);\n\t\t}\n\t}\n\n\tthis.advanceCell = function (evt) {\n\t\tdojo.debug(\"advanceCell\");\n\t\tvar key = evt.keyCode;\n\t\tswitch(key) {\n\t\t\tcase evt.KEY_TAB:\n\t\t\t\t\/\/ fromScript up the next one\n\t\t\t\tthis.cleanupCell(evt);\n\t\t\t\tevt.preventDefault();\n\t\t\t\t\/\/TODO: determine xy of this cell\n\t\t\t\t\/\/set the pseudo-focus to the cell x+1,y if it exists\n\t\t\t\t\/\/else set the pseudo-focus to the cell x,y\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_ENTER:\n\t\t\tcase evt.KEY_RETURN:\n\t\t\t\t\/\/ down one cell\n\t\t\t\tthis.cleanupCell(evt);\n\t\t\t\tevt.preventDefault();\n\t\t\t\tdoSave = true;\n\t\t\t\t\/\/TODO: determine xy of this cell\n\t\t\t\t\/\/set the pseudo-focus to the cell x,y+1 if it exists\n\t\t\t\t\/\/else set the pseudo-focus to the cell x,y\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_ESCAPE:\n\t\t\t\tthis.cleanupCell(evt, false);\n\t\t\t\tevt.preventDefault();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tthis.beginDrag = function (evt) {\n\t\tdocument.body.style.cursor = \"e-resize\";\n\t\tthis.resizing = true;\n\t\t\/\/remove trailing\t\"px\"\n\t\tvar leftStr = evt.target.style.left;\n\t\tthis.dragHandleStartLeft = leftStr.substring(0, leftStr.length-2) - 0;\n\n\t\tvar cols = this.tTable.getElementsByTagName(\"col\");\n\t\tvar col = cols[evt.target.colIndex];\n\t\tthis.targetCol = col;\n\n\t\tthis.targetColStartWidth = dojo.html.getInnerWidth(col);\n\n\t\tif (evt.pageX)\n\t\t\tthis.startDragX = evt.pageX;\n\t\telse if (evt.clientX)\n\t\t\tthis.startDragX = evt.clientX + document.body.scrollLeft;\n\n\t\tthis.startTableWidth = dojo.html.getInnerWidth(this.tTable);\n\t\tthis.startRowContainerWidth = dojo.html.getInnerWidth(dojo.byId(\"rows_container\"));\n\n\/\/TM\t\tthis.dragHandle = evt.target;\n\t\tthis.dragHandleNode = evt.target;\n\n\t\t\/\/ clear out width so table can expand freely\n\/\/\t\tthis.tTable.style.width = \"\";\n\n\t\tdbg(\"targetColStartWidth=\" + this.targetColStartWidth);\n\t\tdbg(\"dragHandleStartLeft=\" + this.dragHandleStartLeft);\n\t\tdbg(\"startDragX=\" + this.startDragX);\n\t\tdbg(\"target index=\" + cellIndex(evt.target));\n\t}\n\n\tthis.handleDrag = function (evt) {\n\t\tif (this.resizing != true)\n\t\t\treturn;\n\n\t\tif (document.selection) {\n\t\t\tdocument.selection.empty();\n\t\t}\n\n\t\tif (evt.pageX)\n\t\t\tcurDragX = evt.pageX;\n\t\telse if (evt.clientX)\n\t\t\tcurDragX = evt.clientX + document.body.scrollLeft;\n\n\t\tvar delta = curDragX - this.startDragX;\n\n\t\tif (this.targetColStartWidth + delta > 20) {\n\t\t\tthis.targetCol.style.width = (this.targetColStartWidth + delta) +\t\"px\";\n\n\t\t\t\/\/this.dragHandle.style.left = (this.dragHandleStartLeft + delta) +\t\"px\";\n\t\t\tthis.dragHandleNode.style.left = (this.dragHandleStartLeft + delta) +\t\"px\";\n\n\t\t\t\/\/ push beyond viewport if necc\n\t\t\tthis.tTable.style.width = (this.startTableWidth + delta) + \"px\";\n\n\t\t\tvar rc = dojo.byId(\"rows_container\");\n\t\t\tvar clientWid = document.body.clientWidth - dojo.html.getAbsoluteX(rc) - 20 \/* larger margin to the right of the table *\/;\n\t\t\tvar cDelta = this.startRowContainerWidth + delta;\n\t\t\tif (this.startTableWidth + delta < cDelta) {\n\t\t\t\tif (cDelta < clientWid) { \n\t\t\t\t\trc.style.width = cDelta + \"px\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\/*\t\t\n\t\tvar headerCells = this.tHead.getElementsByTagName(\"th\");\n\n\t\tvar rows_container = document.getElementById(\"rows_container\");\n\t\tvar containerX = dojo.html.getAbsoluteX(rows_container);\n*\/\n\t}\n\n\tthis.endDrag = function (evt) {\n\t\tvar wasResizing = this.resizing;\n\t\tthis.resizing = false;\n\/\/\t\tthis.dragHandle = null;\n\/\/\t\tthis.dragHandleNode = null;\n\t\tdocument.body.style.cursor = \"default\";\n\t\tif (wasResizing) {\n\t\t\t\/\/TODO: remove this and reinstitute a cleaner approach when new dnd is integrated\n\t\t\t\/\/bcs right now all mouseup events are causing the saveColWidths call\n\t\t\tsaveColWidths();\n\t\t\tthis.adjustDragResizeHandles();\n\t\t}\n\t}\n\n\tthis.getCellFromChild = function (node) {\n\t\treturn dojo.html.getFirstAncestorByTag(node, \"td\");\n\t}\n\n\tthis.getRowFromChild = function (node) {\n\t\treturn dojo.html.getFirstAncestorByTag(node, \"tr\");\n\t}\n\n\tthis.createToolbar = function() {\n\t\tvar toolbarContainer = dojo.byId(\"toolbar_container\");\n\t\tthis.currentToolbar = dojo.widget.createWidget(\"toolbarContainer\", {}, toolbarContainer);\n\t\tthis.currentToolbar.domNode.id = \"toolbar_container\";\n\t\ttb = dojo.widget.createWidget(\"toolbar\");\n\t\tthis.currentToolbar.addChild(tb);\n\n\t\tdojo.widget.html.ColorPalette.prototype.palettes[\"Jot4x4\"] = \n\t\t\t[[\"000000\", \"800000\", \"008000\", \"000080\"], \n\t\t\t\t[\"C0C0C0\", \"FF0000\", \"00FF00\", \"0000FF\"], \n\t\t\t\t[\"808080\", \"800080\", \"808000\", \"008080\"], \n\t\t\t\t[\"FFFFFF\", \"FF00FF\", \"FFFF00\", \"00FFFF\"]];\n\n\t\tvar foreColorDialog = dojo.widget.createWidget(\"ToolbarColorDialog\", {toggleItem: true, name: \"forecolor\", icon: cmdImg(\"forecolor\"), palette: \"Jot4x4\"});\n\t\tvar backColorDialog = dojo.widget.createWidget(\"ToolbarColorDialog\", {toggleItem: true, name: \"hilitecolor\", icon: cmdImg(\"hilitecolor\"), palette: \"Jot4x4\"});\n\t\tvar commands = [\n\t\t\t{ values: [\"b_\", \"i_\", \"u_\"], toggleItem: true\t},\n\t\t\t{ values: [foreColorDialog, backColorDialog]},\n\t\t\t{ values: [\"justifyleft\", \"justifycenter\", \"justifyright\"], name: \"justify\", defaultButton: \"justifyleft\", buttonGroup: true, preventunselect: true\t}\n\/\/\t\t\t{ values: [\"j_l_\", \"j_c_\", \"j_r_\"], name: \"justify\", defaultButton: \"jl\", buttonGroup: true, preventunselect: true\t}\n\t\t];\n\n\t\tfor(var i = 0; i < commands.length; i++) {\n\t\t\tvar set = commands[i];\n\t\t\tvar values = set.values;\n\t\t\tvar btnGroup = [set.name];\n\t\t\tfor(var j = 0; j < values.length; j++) {\n\t\t\t\tif(typeof values[j] == \"string\") {\n\t\t\t\t\tvar cmd = values[j];\n\t\t\t\t\tif(set.buttonGroup) {\n\t\t\t\t\t\tbtnGroup.push(cmdImg(cmd));\n\t\t\t\t\t}\telse {\n\t\t\t\t\t\tvar btn = tb.addChild(cmdImg(cmd), null, {name:cmd, toggleItem:set.toggleItem});\n\t\t\t\t\t\tif (btn) {\n\t\t\t\t\t\t\tdojo.event.connect(btn, \"onclick\", this, \"listen\");\n\t\t\t\t\t\t\tdojo.event.connect(btn, \"onChangeSelect\", this, \"listen\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar btn = tb.addChild(values[j]);\n\t\t\t\t\tdojo.event.connect(btn, \"onSetValue\", colorListen, values[j].getName());\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(set.buttonGroup && btnGroup.length\t>\t1) {\n\t\t\t\tvar btn = tb.addChild(btnGroup, null, {defaultButton:set.defaultButton});\n\t\t\t\tif (btn) {\n\t\t\t\t\tdojo.event.connect(btn, \"onClick\", this, \"listen\");\n\t\t\t\t\tdojo.event.connect(btn, \"onChangeSelect\", this, \"listen\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(i + 1 != commands.length\n\t\t\t && !(tb.children[tb.children.length-1] instanceof dojo.widget.html.ToolbarSeparator)) {\n\t\t\t\ttb.addChild(\"|\");\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction cmdImg(cmd) {\n\t\tvar fn;\n\t\tswitch (cmd) {\n\t\t\tcase \"b_\": fn = \"bold\"; break;\n\t\t\tcase \"i_\": fn = \"italic\"; break;\n\t\t\tcase \"u_\": fn = \"underline\"; break;\n\t\t\tdefault: fn = cmd; break;\n\t\t}\n\t\treturn dojo.uri.dojoUri(\"src\/widget\/templates\/buttons\/\" + fn + \".gif\");\n\t}\n\n\tthis.listen = function(item) {\n\t\t\/\/ cmd == css class\n\t\tvar cmd = item.getValue();\n\t\tvar on = item.isSelected();\n\t\tvar target;\n\t\tif (cmd) {\n\t\t\t\/\/ style rows\n\t\t\tvar hasSelectedRow;\n\t\t\tfor (rowId in this.curSelectedRows) {\n\t\t\t\tvar row = this.curSelectedRows[rowId];\n\t\t\t\tif (row != null) {\n\t\t\t\t\thasSelectedRow = true;\n\t\t\t\t\tfor (var i=this.firstDataCellIdx; i<row.cells.length; i++) {\n\t\t\t\t\t\tvar cell = row.cells[i];\n\t\t\t\t\t\tthis.updateToolbarStyle(cell, cmd, on);\n\t\t\t\t\t\tthis.saveCellEdit(cell);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (hasSelectedRow) { return; }\n\n\t\t\t\/\/ style cols\n\t\t\tvar rows = me.tBody.rows;\n\t\t\tvar hasSelectedCol = false;\n\t\t\tfor (var i=0; i<me.curSelectedColIndices.length; i++) {\n\t\t\t\tvar colIndex = me.curSelectedColIndices[i];\n\t\t\t\thasSelectedCol = true;\n\t\t\t\tfor (var j=0; j<rows.length; j++) {\n\t\t\t\t\tvar row = rows[j];\n\t\t\t\t\tvar cell = row.cells[colIndex];\n\t\t\t\t\tthis.updateToolbarStyle(cell, cmd, on);\n\t\t\t\t\tthis.saveCellEdit(cell);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (hasSelectedCol) { return; }\n\t\t\t\n\t\t\t\/\/ style edit area\n\t\t\tif (this.editorVisible){\n\t\t\t\ttarget = this.editor.textArea;\n\t\t\t\t\/\/not sure why just setting the class doesn't do the trick in all cases\n\t\t\t\t\/\/must be some css selection to debug\n\t\t\t\tswitch (cmd) {\n\t\t\t\tcase \"b_\":\n\t\t\t\t\ttarget.style.fontWeight = on ? \"bold\" : \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"i_\":\n\t\t\t\t\ttarget.style.fontStyle = on ? \"italic\" : \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"u_\":\n\t\t\t\t\ttarget.style.textDecoration = on ? \"underline\" : \"\";\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tthis.updateToolbarStyle(target, cmd, on);\n\t\t\t}else if (this.navFocusCell){\n\t\t\t\/\/ style nav focus cell\n\t\t\t\ttarget = this.navFocusCell;\n\t\t\t\tthis.updateToolbarStyle(target, cmd, on);\n\t\t\t\tthis.saveCellEdit(this.navFocusCell);\n\t\t\t}\n\t\t}\n\t\tthis.updateToolbar();\n\t}\n\t\n\tthis.updateToolbarStyle = function(target, cmd, on) {\n\t\tif (cmd.indexOf(\"justify\") == 0) {\n\t\t\tdbg(\"justifying... removing class\");\n\t\t\tdojo.html.removeClass(target, \"justify\", true \/* partial matches*\/);\n\t\t\tdojo.html.addClass(target, cmd); \n\t\t}\n\t\telse { \t\n\t\t\tif (on) { \n\t\t\t\tdbg(\"setting class to \" + cmd);\n\t\t\t\tdojo.html.addClass(target, cmd); \n\t\t\t} \n\t\t\telse {\n\t\t\t\tdojo.html.removeClass(target, cmd);\n\t\t\t}\n\t\t}\n\t}\n\n\t\/\/ FIXME: alex: is this breaking our toolbar??\n\tvar me = this;\n\tvar colorListen = {\n\t\thilitecolor: function (btn, value) {\n\t\t\t\/\/ strip off leading # from color value\n\t\t\tvar digits = value.substring(value.indexOf('#') +\t1, value.length).toLowerCase();\n\t\t\t\n\t\t\t\/\/ style rows\n\t\t\tvar hasSelectedRow = false;\n\t\t\tfor (rowId in me.curSelectedRows) {\n\t\t\t\tvar row = me.curSelectedRows[rowId];\n\t\t\t\tif (row != null) {\n\t\t\t\t\thasSelectedRow = true;\n\t\t\t\t\tfor (var i=me.firstDataCellIdx; i<row.cells.length; i++) {\n\t\t\t\t\t\tvar cell = row.cells[i];\n\t\t\t\t\t\t\/\/ cell.style.backgroundColor = \"\";\n\t\t\t\t\t\tdojo.html.removeClass(cell, \"bc-\", true);\n\t\t\t\t\t\t\/\/ if(digits != \"ffffff\"){ cell.style.backgroundColor = value; }\n\t\t\t\t\t\tif (digits != \"ffffff\") { dojo.html.addClass(cell, \"bc-\" + digits); }\n\t\t\t\t\t\tme.saveCellEdit(cell);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (hasSelectedRow) { return; }\n\n\t\t\t\/\/style cols\n\t\t\tvar rows = me.tBody.rows;\n\t\t\tvar hasSelectedCol = false;\n\t\t\tfor (var i=0; i<me.curSelectedColIndices.length; i++) {\n\t\t\t\tvar colIndex = me.curSelectedColIndices[i];\n\t\t\t\thasSelectedCol = true;\n\t\t\t\tfor (var j=0; j<rows.length; j++) {\n\t\t\t\t\tvar row = rows[j];\n\t\t\t\t\tvar cell = row.cells[colIndex];\n\t\t\t\t\tdojo.html.removeClass(cell, \"bc-\", true);\n\t\t\t\t\t\/\/ cell.style.backgroundColor = \"\";\n\t\t\t\t\tif (digits != \"ffffff\") { dojo.html.addClass(cell, \"bc-\" + digits); }\n\t\t\t\t\t\/\/ if(digits != \"ffffff\"){ cell.style.backgroundColor = value; }\n\t\t\t\t\tme.saveCellEdit(cell);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (hasSelectedCol) { return; }\n\t\t\t\n\t\t\t\/\/style edit area\n\t\t\tif (me.editor != null){\n\t\t\t\t\/\/ remove any bgcolor cruft\n\t\t\t\tdojo.html.removeClass(me.editor.textArea, \"bc-\", true);\n\t\t\t\t\/\/ just leave it blank if they want white\n\t\t\t\tif (digits != \"ffffff\") { dojo.html.addClass(me.editor.textArea, \"bc-\" + digits); }\n\t\t\t}\n\t\t\tif(me.navFocusCell){\n\t\t\t\tdojo.html.removeClass(me.navFocusCell, \"bc-\", true);\n\t\t\t\tif (digits != \"ffffff\") { dojo.html.addClass(me.navFocusCell, \"bc-\" + digits); }\n\t\t\t\tme.saveCellEdit(me.navFocusCell);\n\t\t\t}\n\t\t\tme.updateToolbar();\n\t\t},\n\t\tforecolor: function (btn, value) {\n\t\t\tvar digits = value.substring(value.indexOf('#') +\t1, value.length).toLowerCase();\n\t\t\t\n\t\t\t\/\/style rows\n\t\t\tvar hasSelectedRow = false;\n\t\t\tfor (rowId in me.curSelectedRows) {\n\t\t\t\tvar row = me.curSelectedRows[rowId];\n\t\t\t\tif (row != null) {\n\t\t\t\t\thasSelectedRow = true;\n\t\t\t\t\tfor (var i=me.firstDataCellIdx; i<row.cells.length; i++) {\n\t\t\t\t\t\tvar cell = row.cells[i];\n\t\t\t\t\t\tdojo.html.removeClass(cell, \"fc-\", true);\n\t\t\t\t\t\t\/\/ cell.style.color = \"\";\n\t\t\t\t\t\tdojo.html.addClass(cell, \"fc-\" + digits);\n\t\t\t\t\t\t\/\/ cell.style.color = value;\n\t\t\t\t\t\tme.saveCellEdit(cell);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (hasSelectedRow) { return; }\n\n\t\t\t\/\/style cols\n\t\t\tvar rows = me.tBody.rows;\n\t\t\tvar hasSelectedCol = false;\n\t\t\tfor (var i=0; i<me.curSelectedColIndices.length; i++) {\n\t\t\t\tvar colIndex = me.curSelectedColIndices[i];\n\t\t\t\thasSelectedCol = true;\n\t\t\t\tfor (var j=0; j<rows.length; j++) {\n\t\t\t\t\tvar row = rows[j];\n\t\t\t\t\tvar cell = row.cells[colIndex];\n\t\t\t\t\t\/\/ cell.style.color = value;\n\t\t\t\t\tdojo.html.removeClass(cell, \"fc-\", true);\n\t\t\t\t\tdojo.html.addClass(cell, \"fc-\" + digits);\n\t\t\t\t\tme.saveCellEdit(cell);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (hasSelectedCol) { return; }\n\n\t\t\t\/\/style edit area\n\t\t\tif(me.editor != null){\n\t\t\t\t\/\/ me.editor.textArea.style.color = value;\n\t\t\t\tdojo.html.removeClass(me.editor.textArea, \"fc-\", true);\n\t\t\t\tdojo.html.addClass(me.editor.textArea, \"fc-\" + digits);\n\t\t\t\t\/\/not sure why just setting the class doesn't do the trick\n\t\t\t\tme.editor.textArea.style.color = value;\n\t\t\t}\n\t\t\t\/\/style nav focus cell\n\t\t\tif(me.navFocusCell){\n\t\t\t\t\/\/ me.navFocusCell.style.color = value;\n\t\t\t\tdojo.html.removeClass(me.navFocusCell, \"fc-\", true);\n\t\t\t\tdojo.html.addClass(me.navFocusCell, \"fc-\" + digits);\n\t\t\t\tme.saveCellEdit(me.navFocusCell);\n\t\t\t}\n\t\t\tme.updateToolbar();\n\t\t}\n\t};\n\n\tthis.updateItem = function(target, item) {\n\t\ttry\t{\n\t\t\tvar cmd = item._name;\n\t\t\tvar enabled = true;\n\t\t\titem.setEnabled(enabled, false, true);\n\t\t\tif (cmd == \"justifyleft\" && target.className.indexOf(\"justify\") == -1) {\n\t\t\t\titem.setSelected(true, false, true);\n\t\t\t} else { \t\t\n\t\t\t\titem.setSelected(dojo.html.hasClass(target, cmd), false, true);\n\t\t\t}\n\t\t\treturn true;\n\t\t}\t\n\t\tcatch(err) {\n\t\t\tdbg(\"error in updateItem: \" + err);\n\t\t\tdbg(\"cmd: \" + cmd);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tthis.updateToolbar = function() {\n\t\tvar target;\n\t\tif ( false \/* check row select *\/ ) {\n\t\t\t;\n\t\t}\n\t\telse if (false \/* check col select *\/) {\n\t\t\t;\n\t\t}\n\t\telse if(this.editorVisible){\n\t\t\ttarget = this.editor.textArea;\n\t\t}else if(this.navFocusCell){ \n\t\t\ttarget = this.navFocusCell; \n\t\t}\n\t\tif((!target)||(!this.currentToolbar)){ return; }\n\t\t\n\t\tvar items = this.currentToolbar.getItems();\n\t\tfor (var i=0; i<items.length; i++) {\n\t\t\tvar item = items[i];\n\t\t\tif (item instanceof dojo.widget.html.ToolbarSeparator) { continue; }\n\t\t\tvar cmd = item._name;\n\t\t\tif (cmd == \"list\" || cmd == \"justify\") {\n\t\t\t\tvar items2 = item.getItems();\n\t\t\t\tfor(var j = 0; j < items2.length; j++) {\n\t\t\t\t\tthis.updateItem(target, items2[j]);\n\t\t\t\t}\n\t\t\t}\t\n\t\t\telse {\n\t\t\t\tthis.updateItem(target, item);\n\t\t\t}\n\t\t}\n\t}","this_variables":["widgetType","templateCssPath","tTable","tHead","tBody","dragHandleNode","curOpenRowId","curOpenRowDetail","curSelectedRows","curSelectedRowsStack","curSelectedColIndices","navFocusCell","numRowHeaderCells","rowNumberCellIdx","arrowHeaderCellIdx","paperClipCellIdx","firstDataCellIdx","editor","editorVisible","editorNode","captureKeystrokes","keyBuffer","preventBuild","handleKeys","handleKeyEvents","postInitialize","cleanUp","destroyRendering","buildRendering","domNode","parseFragment","normalizedArgs","finishTableInit","style.cursor","uninitialize","adjustDragResizeHandles","dispatchContextMenu","isRowSelected","formulaChecked","checkFormula","editor.textArea.value","formulaAlert","buildingEditor","buildEditor","clearEditor","suppressKeys","isFormKeystroke","dispatchKeyPress","dispatchKeyDown","navFocusCell.innerHTML","setPF","unSetPF","selectUpperLeftCell","getNavFocusRow","pseudoFocusCells","setNavFocus","clearOtherNavFocus","clearNavFocus","setActivated","unSetActivated","setRowFocus","setColFocus","getFocusCol","getFocusColLogicalIndex","highlightColHeader","selectColumn","unselectAllColumns","dispatchHeaderClick","dispatchHeaderContextMenu","isDataCell","getCellBelow","getCellAbove","findDataCellLeft","findDataCellRight","findDataCellBelow","findDataCellAbove","hilitedCells","dispatchMouseOver","domNode.style.cursor","dispatchMouseout","dispatchMouseUp","dispatchClick","dispatchDoubleClick","dispatchHeaderDoubleClick","safeHandleTab","defocus","handleTab","handleEnter","countSelectedRows","singleSelectRow","selectRow","unselectAllRows","unselectRow","openRow","updateOpenRowDetail","closeRow","deleteRowDetail","clearSelectedRows","dispatchEditorSave","dispatchEditorCancel","saveEditorCell","pendingRowInserts","curMaxIdx","appendRow","insertRow","deleteRows","rowsToDelete","deleteRow","updateRowIndices","advanceCell","beginDrag","resizing","dragHandleStartLeft","targetCol","targetColStartWidth","startDragX","startTableWidth","startRowContainerWidth","handleDrag","targetCol.style.width","dragHandleNode.style.left","tTable.style.width","endDrag","getCellFromChild","getRowFromChild","createToolbar","currentToolbar","currentToolbar.domNode.id","listen","updateToolbarStyle","updateItem","updateToolbar"],"returns":"mixed","inherits":["dojo.widget.HtmlWidget"]}}},"jot.widget.JotAPTable.handleKeyEvents":{"_":{"meta":{"summary":"","parameters":{"on":{"type":""}},"src":"\t\tthis.handleKeys = on;","this_variables":["handleKeys"]}}},"jot.widget.JotAPTable.postInitialize":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"                                             return;   "}}},"jot.widget.JotAPTable.cleanUp":{"_":{"meta":{"summary":"","src":"                            return;   "}}},"jot.widget.JotAPTable.destroyRendering":{"_":{"meta":{"summary":"","src":"\t\tdojo.event.disconnect(this.editor.textArea, \"onkeypress\", this, \"checkFormula\");\n\t\tdojo.event.disconnect(this.editor, \"cancel\", this, \"dispatchEditorCancel\");\n\t\tdojo.event.disconnect(this.editor, \"save\", this, \"dispatchEditorSave\");\n\t\tif(this.currentToolbar){\n\/\/\t\t\tthis.currentToolbar.destroy();\n\t\t}\n\t\tif(this.editor){\n\t\t\tthis.editor.destroy();\n\t\t}\n\t\tdojo.event.browser.clean(this.domNode);"}}},"jot.widget.JotAPTable.buildRendering":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tthis.domNode = frag[\"dojo:jotaptable\"].nodeRef;\n\t\tthis.tTable = this.domNode;\n\n\t\tthis.parseFragment = frag;\n\t\tthis.normalizedArgs = args;\n\n\t\tthis.finishTableInit();","this_variables":["domNode","tTable","parseFragment","normalizedArgs"]}}},"jot.widget.JotAPTable.finishTableInit":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tthis.tHead = this.domNode.tHead;\n\t\tthis.tBody = this.domNode.tBodies[0];\n\n\t\tvar args = {};\n\t\t\/\/ args.cozyUpToParent = true;\n\n\t\tdojo.event.connect(this.tBody, \"onmousedown\",\n\t\t\tfunction(evt){\n\t\t\t\tif(evt.shiftKey || evt.ctrlKey){\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\t\/\/FIXME: better perms handling\n\t\tif (Wiki.write) {\n\t\t\tif(!this.editor){\n\t\t\t\tthis.editor = dojo.widget.createWidget(\"JotCellEditor2\", args, document.body);\n\t\t\t\tdojo.event.connect(this.editor, \"cancel\", this, \"dispatchEditorCancel\");\n\t\t\t\tdojo.event.connect(this.editor, \"save\", this, \"dispatchEditorSave\");\n\t\t\t\tdojo.event.connect(this.editor.textArea, \"onkeypress\", this, \"checkFormula\");\n\t\t\t\tthis.editor.clobberEditor();\n\t\t\t\tdojo.event.topic.subscribe(\"jot.celleditor.blured\", \n\t\t\t\t\tdojo.lang.hitch(this, function(node){\n\t\t\t\t\t\tthis.editorVisible = false;\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tdojo.event.connect(this.tBody, \"oncontextmenu\", this, \"dispatchContextMenu\");\n\t\t\tdojo.event.connect(this.tBody, \"onclick\", this, \"dispatchClick\");\n\t\t\tdojo.event.connect(this.tBody, \"ondblclick\", this, \"dispatchDoubleClick\");\n\t\t\tdojo.event.connect(this.tBody, \"onmouseover\", this, \"dispatchMouseOver\");\n\t\t\tdojo.event.connect(this.tBody, \"onmouseout\", this, \"dispatchMouseout\");\n\t\t\tdojo.event.connect(this.tHead, \"ondblclick\", this, \"dispatchHeaderDoubleClick\");\n\t\t\t\/*\n\t\t\tdojo.event.connect(document, \"onkeypress\", this, \"dispatchKeyPress\");\n\t\t\tdojo.event.connect(document, \"onkeydown\", this, \"dispatchKeyDown\");\n\t\t\t*\/\n\t\t\tdojo.event.connect(this.editor.textArea, \"onkeypress\", this, \"dispatchKeyPress\");\n\t\t\tdojo.event.connect(this.editor.textArea, \"onkeydown\", this, \"dispatchKeyDown\");\n\t\t}\n\t\tdojo.event.connect(this.tBody, \"onmouseup\", this, \"dispatchMouseUp\");\n\n\t\t\/\/ set widths for richedit\n\t\tvar cols = this.domNode.getElementsByTagName(\"col\");\n\n\t\t\/\/ browser has rendered the table,\n\t\t\/\/ so now lock widths on the \"action\"\tcolumns...\n\t\tvar actionHeaderCells = this.tHead.getElementsByTagName(\"td\");\n\t\tfor (var i=0; i<actionHeaderCells.length; i++) {\n\t\t\t\/\/ skip td's which are not \"top-level\",\n\t\t\t\/\/ i.e., skip if they are in a table nested in a td\n\t\t\tif (actionHeaderCells[i].parentNode == this.tHead.firstChild) {\n\t\t\t\tcols[cellIndex(actionHeaderCells[i])].style.width =\n\t\t\t\t\t\tdojo.html.getInnerWidth(actionHeaderCells[i]) +\t\"px\";\n\t\t\t}\n\t\t}\n\n\t\tvar headerCells = this.tHead.getElementsByTagName(\"th\");\n\t\tdojo.event.topic.subscribe(\"jot.celleditor.closing\", \n\t\t\tdojo.lang.hitch(this, function(node){\n\t\t\t\tif(!dojo.render.html.ie){ return; }\n\t\t\t\tvar cares = false;\n\t\t\t\tfor (var i=0; i<headerCells.length; i++) {\n\t\t\t\t\tif(node === headerCells[i]){ cares = true; break; }\n\t\t\t\t}\n\t\t\t\tif(!cares){ return; }\n\t\t\t\tdojo.event.connect(node, \"onclick\", this, \"dispatchHeaderClick\");\n\t\t\t\tdojo.event.connect(node, \"oncontextmenu\", this, \"dispatchHeaderContextMenu\");\n\t\t\t})\n\t\t);\n\t\tfor (var i=0; i<headerCells.length; i++) {\n\t\t\t\/\/...and lock widths on the data columns, if that hasn't already been done manually\n\t\t\t\/\/enforcing a\t50px-minimum width in the process\n\t\t\tif (dojo.string.isBlank(cols[cellIndex(headerCells[i])].style.width)) {\n\t\t\t\tvar width = dojo.html.getInnerWidth(headerCells[i]);\n\t\t\t\twidth = width\t>\t50 ? width : 50;\n\t\t\t\theaderCells[i].style.width = width + \"px\";\n\t\t\t\tcols[cellIndex(headerCells[i])].style.width = width + \"px\";\n\t\t\t}\n\n\t\t\t\/\/FIXME: better perms handling\n\t\t\tif (Wiki.write) {\n\t\t\t\t\/\/ associate menu handlers with the column headers\n\t\t\t\tdojo.event.connect(headerCells[i], \"onclick\", this, \"dispatchHeaderClick\");\n\t\t\t\tdojo.event.connect(headerCells[i], \"oncontextmenu\", this, \"dispatchHeaderContextMenu\");\n\t\t\t}\n\t\t\tvar me = this;\n\t\t\theaderCells[i].onmouseover = function() { if (!me.resizing) { document.body.style.cursor = \"pointer\" } };\n\t\t\theaderCells[i].onmouseout = function() { if (!me.resizing) { document.body.style.cursor = \"auto\" } };\n\t\t}\n\n\t\t\/\/ register the table and the data column headers in the dojo dnd system\n\t\tnew jot.widget.HtmlColumnDropTarget(this.domNode, this);\n\t\tfor (var i=0; i<headerCells.length; i++) {\n\t\t\theaderCells[i].dataColIndex = i;\n\t\t\t\/\/new jot.widget.HtmlColumnDragSource(headerCells[i], this);\n\t\t}\n\n\t\t\/\/ remove any old resize thumbs still hanging around\n\t\tvar i=0;\n\t\twhile (true) {\n\t\t\tvar id = \"columnResizeHandle\" + i;\n\t\t\tvar el = document.getElementById(id);\n\t\t\tif (el) {\n\t\t\t\tel.parentNode.removeChild(el);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\ti++;\n\t\t}\n\t\tcolThumbs = [];\n\n\t\t\/\/ create col resize thumbs\n\t\tdbg(\"init: create col resize thumbs\");\n\t\tvar rows_container = document.getElementById(\"rows_container\");\n\t\tvar containerX = dojo.html.getAbsoluteX(rows_container);\n\t\tvar containerY = dojo.html.getAbsoluteY(rows_container);\n\n\t\tfor (var i=0; i<headerCells.length; i++) {\n\t\t\tvar cell = headerCells[i];\n\t\t\tvar div = document.createElement(\"div\");\n\n\t\t\tif (g_debug == false) {\n\t\t\t\tdojo.html.setOpacity(div, 0);\n\t\t\t}\n\t\t\tdiv.id = \"columnResizeHandle\" + i;\n\t\t\tdiv.colIndex = cellIndex(cell);\n\t\t\tdiv.className = \"columnResizeHandle\";\n\t\t\tvar nudge = -3;\n\t\t\twith (dojo.html) {\n\t\t\t\tdiv.style.left = (getAbsoluteX(headerCells[i]) - containerX\n\t\t\t\t\t\t\t\t\t + getInnerWidth(headerCells[i]) +\tnudge) + \"px\";\n\t\t\t}\n\n\t\t\twith (dojo.html) {\n\t\t\t\tdiv.style.top = (getAbsoluteY(headerCells[i]) - containerY) +\t\"px\";\n\t\t\t\tdiv.style.height = getInnerHeight(cell) +\t\"px\";\n\t\t\t\tdiv.style.width = \"7px\";\n\t\t\t}\n\t\t\tdiv.onmouseover = function() { this.style.cursor = \"e-resize\"\t}\n\t\t\tdiv.onmouseout = function() { this.style.cursor = \"auto\" }\n\n\t\t\tdojo.event.connect(div, \"onmousedown\", this, \"beginDrag\");\n\n\t\t\t\/\/store for later hiding and repositioning as the table changes size\n\t\t\tcolThumbs.push(div);\n\t\t\trows_container.appendChild(div);\n\t\t}\n\t\tdojo.event.connect(document, \"onmousemove\", this, \"handleDrag\");\n\t\tdojo.event.connect(document, \"onmouseup\", this, \"endDrag\");\n\t\t\n\t\tif (Wiki.write) {\n\t\t\tvar pastToolbars = dojo.widget.manager.getWidgetsByType(\"Toolbar\");\n\t\t\tfor (var i=0; i<pastToolbars.length; i++) {\n\t\t\t\tpastToolbars[i].destroy();\n\t\t\t}\n\t\t\tthis.createToolbar();\n\t\t}\n\n\t\twindow.g_jotTable = this;","this_variables":["tHead","tBody","editor","editorVisible","style.cursor"]}}},"jot.widget.JotAPTable.uninitialize":{"_":{"meta":{"summary":"","src":"\t\tdojo.event.disconnect(document, \"onkeydown\", this, \"dispatchKeyDown\");"}}},"jot.widget.JotAPTable.adjustDragResizeHandles":{"_":{"meta":{"summary":"","src":"\t\tvar headerCells = this.tHead.getElementsByTagName(\"th\");\n\t\tvar nudge = -3;\n\t\tvar rows_container = document.getElementById(\"rows_container\");\n\t\tvar containerX = dojo.html.getAbsoluteX(rows_container);\n\t\tvar containerY = dojo.html.getAbsoluteY(rows_container);\n\t\tfor (var i=0; i<headerCells.length; i++) {\n\t\t\tvar div = document.getElementById(\"columnResizeHandle\" + i);\n\t\t\tif (div) {\n\t\t\t\twith (dojo.html) {\n\t\t\t\t\tdiv.style.left = (getAbsoluteX(headerCells[i]) - containerX\n\t\t\t\t\t\t\t\t\t\t\t\t\t + getInnerWidth(headerCells[i]) +\tnudge) + \"px\";\n\t\t\t\t\tdiv.style.top = (getAbsoluteY(headerCells[i]) - containerY) +\t\"px\";\n\t\t\t\t\tdiv.style.height = getInnerHeight(headerCells[i]) +\t\"px\";\n\t\t\t\t\tdiv.style.width = \"7px\";\n\t\t\t\t}\n\t\t\t}\n\t\t}"}}},"jot.widget.JotAPTable.dispatchContextMenu":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tevt.preventDefault();\n\t\tvar row = this.getRowFromChild(evt.target);\n\t\tif (getParentById(row, \"row_detail\") == null) {\n\t\t\tthis.singleSelectRow(row, true \/* keepSelected *\/);\n\t\t\thandleRowHeaderMenu(evt, row);\n\t\t}"}}},"jot.widget.JotAPTable.isRowSelected":{"_":{"meta":{"summary":"","parameters":{"row":{"type":""}},"src":""}}},"jot.widget.JotAPTable.checkFormula":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tif (this.formulaChecked == true) { return; }\n\t\t\n\t\t\/\/ ignore no-op keypress events (that go along w\/ keyup, keydown)\n\t\tif (evt.charCode == 0) { return; } \n\t\t\n\t\t\/\/ ignore control characters\n\t\tif (evt.charCode < 32) { return; } \n\t\t\n\t\t\/\/ ignore modified keys\n\t\tif (evt.metaKey || evt.altKey || evt.ctrlKey) { return; } \n\n\t\tvar val = this.editor.textArea.value;\n\t\tval = dojo.string.trim(val);\n\t\tvar showDlg = false;\n\t\tif (val.length == 0) {\n\t\t\tshowDlg = (String.fromCharCode(evt.charCode) == '=');\n\t\t} else if (val.charAt(0) == \"=\") {\n\t\t\tshowDlg = true;\n\t\t}\n\t\tif (showDlg) {\n\t\t\tvar node;\n\t\t\tif(this.editorVisible){\n\t\t\t\tnode = this.editor.domNode;\n\t\t\t\tif(this.editor.textArea){\n\t\t\t\t\tthis.editor.textArea.value = \"\";\n\t\t\t\t\tthis.editor.checkOnBlur(evt);\n\t\t\t\t}else{\n\t\t\t\t\tnode.innerHTML = \"&nbsp;\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.formulaAlert(node);\n\t\t\t\/\/this.setNavFocus(node);\n\t\t}\n\t\tthis.formulaChecked = true;","this_variables":["editor.textArea.value","formulaChecked"]}}},"jot.widget.JotAPTable.formulaAlert":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tsetTimeout(dojo.lang.hitch(this, function() {\n\t\t\talert(\"Formulas are coming soon!  We'll let you know when they've arrived.\");\n\t\t\tdocument.body.focus();\n\t\t\tif((node)&&(node.onclick)){\n\t\t\t\tnode.onclick();\n\t\t\t}\n\t\t}), 300);"}}},"jot.widget.JotAPTable.buildEditor":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""},"td":{"type":""},"args":{"type":""}},"src":"\t\tif(this.preventBuild){ this.preventBuild = false; return; }\n\t\tif(this.editorVisible){ return; }\n\t\tif(!Wiki.write){ return; }\n\t\tdojo.debug(\"buildEditor\");\n\n\t\tif(!args){ args = {}; }\n\t\targs.cozyUpToParent = true;\n\t\tdojo.lang.mixin(this.editor, args);\n\n\t\t\/\/ this.editor.textArea.focus();\n\t\tthis.editor.attachToCell(td);\n\t\tdojo.event.topic.publish(\"jotTable.buildEditor\");\n\t\tthis.buildingEditor = true;\n\t\tthis.formulaChecked = false;\n\n\t\t\/*\n\t\tif(args.overwrite){\n\t\t\t\/\/this.keyBuffer = this.keyBuffer.substring(1, this.keyBuffer.length);\n\t\t\t\/\/ clear editor if they typed their way in\n\t\t\tthis.editor.textArea.value = this.keyBuffer;\n\t\t}\n\t\tthis.keyBuffer = \"\";\n\t\t*\/\n\t\tthis.captureKeystrokes = false;\n\n\t\t\/\/FIXME: better perms handling\n\t\tif (Wiki.write && !args.disableToolbar) {\n\t\t\tthis.currentToolbar.enable();\n\t\t}\n\t\t\n\t\tthis.buildingEditor = false;\n\t\tthis.editorVisible = true;","this_variables":["preventBuild","buildingEditor","formulaChecked","captureKeystrokes","editorVisible"]}}},"jot.widget.JotAPTable.clearEditor":{"_":{"meta":{"summary":"","src":"","this_variables":["captureKeystrokes"]}}},"jot.widget.JotAPTable.suppressKeys":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tvar tagName = evt.target.tagName.toLowerCase();\n\t\t\/\/ IE richtext area will treat a div as an editable area\n\t\tif (tagName == \"input\" || tagName == \"textarea\" || tagName == \"div\") {\n\t\t\treturn; \/\/noop\n\t\t}\n\n\t\tswitch (evt.keyCode) {\n\t\tcase evt.KEY_UP_ARROW:\n\t\tcase evt.KEY_RIGHT_ARROW:\n\t\tcase evt.KEY_DOWN_ARROW:\n\t\tcase evt.KEY_LEFT_ARROW:\n\t\tcase evt.KEY_BACKSPACE:\n\t\t\tevt.preventDefault();\n\t\t\tbreak;\n\t\t}","returns":"noop"}}},"jot.widget.JotAPTable.isFormKeystroke":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tif(evt.target == this.editor.textArea){ return false; }\n\t\tvar isInput = false;\n\t\tif(dojo.html.getFirstAncestorByTag(evt.target, \"form\")){\n\t\t\tisInput = true;\n\t\t} else {\n\t\t\tvar tgt = evt.target;\n\t\t\twhile(tgt.nodeType != 1){ \n\t\t\t\ttgt = tgt.parentNode;\n\t\t\t}\n\t\t\tvar tagName = tgt.tagName.toLowerCase();\n\t\t\t\/\/ IE richtext area will treat a div as an editable area\n\t\t\tif (tagName == \"input\" || tagName == \"textarea\" || tagName == \"div\") {\n\t\t\t\tisInput = true;\n\t\t\t}\n\t\t}\n\t\treturn isInput;"}}},"jot.widget.JotAPTable.dispatchKeyPress":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tif(!this.handleKeys){ return; }\n\t\t\n\t\t\/\/ dojo.debug(\"dispatchKeyPress, \", (evt.charCode == 0));\n\t\t\/\/ ignore no-op keypress events (that go along w\/ keyup, keydown)\n\t\tif (evt.charCode == 0) { return; } \n\t\t\n\t\t\/\/ ignore control characters\n\t\tif((evt.charCode < 32)||(evt.keyCode > 10000)){ return; } \n\t\t\n\t\t\/\/ ignore modified keys\n\t\tif (evt.metaKey || evt.altKey || evt.ctrlKey) { return; } \n\n\t\t\/\/ ignore keystrokes headed toward a form input\n\t\t\/\/ (that is, grab keystrokes headed toward nowhere or towards the table)\n\t\tif (this.isFormKeystroke(evt)){ return; }\n\t\t\t\n\t\t\/\/ FIXME: this is never skipped in Safari!\n\t\tif(dojo.render.html.safari){\n\t\t\t\tevt.stopPropagation();\n\t\t}\n\t\t\/\/ if(dojo.render.html.safari){ return; }\n\t\tif((this.navFocusCell)&&(!this.editorVisible)){\n\t\t\tthis.buildEditor(evt, this.navFocusCell);\n\t\t\t\/\/ { arrowKeysExit: false, overwrite: true }\n\t\t\t\/\/ );\n\t\t\tthis.editor.textArea.value = \"\";\n\t\t}\n\t\t\/*\n\t\tif (this.navFocusCell) {\n\t\t\tvar c = String.fromCharCode(evt.charCode);\n\t\t\tif (this.captureKeystrokes && !evt.ctrlKey && !evt.altKey && !evt.metaKey) {\n\t\t\t\t\tthis.keyBuffer += c;\n\t\t\t}\n\t\t\tif (!this.buildingEditor) {\n\t\t\t\tif (this.keyBuffer.length > 0 && this.keyBuffer.charAt(0) == '=') {\n\t\t\t\t\t\/\/this.formulaAlert();\n\t\t\t\t\talert(\"Formulas are coming soon!  We'll let you know when they've arrived.\");\n\t\t\t\t\tthis.keyBuffer = \"\";\n\t\t\t\t} else {\n\t\t\t\t\tthis.buildEditor(evt, this.navFocusCell, \n\t\t\t\t\t\t{ arrowKeysExit: false, overwrite: true }\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t*\/","this_variables":["editor.textArea.value"]}}},"jot.widget.JotAPTable.dispatchKeyDown":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tif (!this.handleKeys) { return; }\n\t\tif(this.editorVisible){ return; }\n\n\t\t\/\/ ignore modified keys\n\t\tif (evt.metaKey || evt.altKey || evt.ctrlKey) { return; }\n\n\t\t\/\/ ignore keystrokes headed toward a form input\n\t\tif(this.isFormKeystroke(evt)){ return; }\n\n\t\tif(dojo.render.html.safari){\n\t\t\tevt.stopPropagation();\n\t\t}\n\t\t\n\t\tdojo.debug(\"dispatchKeyDown:\", evt.keyCode);\n\t\tswitch (evt.keyCode) {\n\t\tcase evt.KEY_UP_ARROW:\n\t\t\tif((!this.editorVisible)&&(this.navFocusCell)){\n\t\t\t\tvar trold = dojo.html.getFirstAncestorByTag(this.navFocusCell, \"tr\");\n\t\t\t\tthis.setNavFocus(this.findDataCellAbove(this.navFocusCell));\n\t\t\t\t\/\/TODO special-case the topmost row for now,\n\t\t\t\t\/\/to bring the header row into view\n\t\t\t\tvar trnew = dojo.html.getFirstAncestorByTag(this.navFocusCell, \"tr\");\n\t\t\t\tif(trold == trnew){\n\t\t\t\t\tdojo.byId(\"rows_container\").scrollTop = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase evt.KEY_TAB:\n\t\t\tif(!this.editorVisible){\n\t\t\t\tthis.safeHandleTab(evt);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase evt.KEY_RIGHT_ARROW:\n\t\t\tif(!this.editorVisible){\n\t\t\t\tthis.setNavFocus(this.findDataCellRight(this.navFocusCell));\n\t\t\t}\n\t\t\tbreak;\n\t\tcase evt.KEY_ENTER:\n\t\tcase evt.KEY_DOWN_ARROW:\n\t\t\tif(!this.editorVisible){\n\t\t\t\tthis.setNavFocus(this.findDataCellBelow(this.navFocusCell));\n\t\t\t}\n\t\t\tbreak;\n\t\tcase evt.KEY_LEFT_ARROW:\n\t\t\tif(!this.editorVisible){\n\t\t\t\tthis.setNavFocus(this.findDataCellLeft(this.navFocusCell));\n\t\t\t}\n\t\t\tbreak;\n\t\tcase evt.KEY_F2:\n\t\t\tif((!this.editorVisible)&&(this.navFocusCell)){\n\t\t\t\tthis.buildEditor(evt, this.navFocusCell);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase evt.KEY_BACKSPACE:\n\t\t\tif((!this.editorVisible)&&(this.navFocusCell)){\n\t\t\t\tthis.buildEditor(evt, this.navFocusCell, {overwrite: true});\n\t\t\t\tthis.suppressKeys(evt);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase evt.KEY_DELETE:\n\t\t\tif((!this.editorVisible)&&(this.navFocusCell)){\n\t\t\t\tthis.navFocusCell.innerHTML = \"&#160;\";\n\t\t\t\tthis.saveCellEdit(this.navFocusCell);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase evt.KEY_PAGE_UP:\n\t\t\tif (!this.navFocusCell) { return; }\n\t\t\tvar c = document.getElementById(\"rows_container\");\n\t\t\tvar cHt = dojo.html.getInnerHeight(c) - 30; \/\/nudge\n\t\t\tvar tr = dojo.html.getFirstAncestorByTag(this.navFocusCell, \"tr\");\n\t\t\tvar baseTrTop = dojo.html.getAbsoluteY(tr);\n\t\t\twhile (true) {\n\t\t\t\tif (tr.sectionRowIndex == 0) { break; }\n\t\t\t\tvar trTop = dojo.html.getAbsoluteY(tr);\n\t\t\t\tif (baseTrTop - trTop >= cHt) { break; }\n\t\t\t\ttr = this.tBody.rows[tr.sectionRowIndex - 1];\n\t\t\t}\n\t\t\tvar newCell = tr.cells[cellIndex(this.navFocusCell)];\n\t\t\tthis.setNavFocus(newCell);\n\t\t\tbreak;\n\t\tcase evt.KEY_PAGE_DOWN:\n\t\t\tif (!this.navFocusCell) { return; }\n\t\t\tvar c = document.getElementById(\"rows_container\");\n\t\t\tvar cHt = dojo.html.getInnerHeight(c) - 30; \/\/nudge\n\t\t\tvar tr = dojo.html.getFirstAncestorByTag(this.navFocusCell, \"tr\");\n\t\t\tvar rows = this.tBody.rows;\n\t\t\tvar baseTrTop = dojo.html.getAbsoluteY(tr);\n\t\t\twhile (true) {\n\t\t\t\tif (tr.sectionRowIndex == rows.length - 1) { break; }\n\t\t\t\tvar trTop = dojo.html.getAbsoluteY(tr);\n\t\t\t\tif (trTop - baseTrTop >= cHt) { break; }\n\t\t\t\ttr = this.tBody.rows[tr.sectionRowIndex + 1];\n\t\t\t}\n\t\t\t\/\/ snap to end\n\t\t\tif (rows.length - tr.sectionRowIndex < 3) {\n\t\t\t\ttr = rows[rows.length - 1];\n\t\t\t}\n\t\t\tvar newCell = tr.cells[cellIndex(this.navFocusCell)];\n\t\t\tthis.setNavFocus(newCell);\n\t\t\tbreak;\n\t\t}","this_variables":["navFocusCell.innerHTML"]}}},"jot.widget.JotAPTable.setPF":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""}},"src":"\t\twith(cell.style){\n\t\t\tpadding = \"3px 4px 4px 3px\";\n\t\t\tborder = \"2px solid black\";\n\t\t}"}}},"jot.widget.JotAPTable.unSetPF":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""}},"src":"\t\twith(cell.style){\n\t\t\tpadding = \"5px\";\n\t\t\tborder = \"1px solid #abb3be\";\n\t\t\tborderWidth = \"0px 1px 1px 0px\";\n\t\t\tverticalAlign = \"top\";\n\t\t}"}}},"jot.widget.JotAPTable.selectUpperLeftCell":{"_":{"meta":{"summary":"","src":"\t\tif (this.tBody.rows.length > 0) {\n\t\t\tvar row = this.tBody.rows[0];\n\t\t\tvar firstCell = row.cells[this.firstDataCellIdx];\n\t\t\tif (firstCell) { this.setNavFocus(firstCell); }\n\t\t}"}}},"jot.widget.JotAPTable.getNavFocusRow":{"_":{"meta":{"summary":"","src":"\t\treturn dojo.html.getFirstAncestorByTag(this.navFocusCell, \"tr\");"}}},"jot.widget.JotAPTable.setNavFocus":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""},"selectStyle":{"type":""}},"src":"\t\tif(!cell){ return; }\n\n\t\t\/\/FIXME: better perms handling\n\t\tif (Wiki.write) {\n\t\t\tthis.currentToolbar.enable();\n\t\t}\n\t\tthis.clearOtherNavFocus(cell);\n\n\t\tif(this.editorVisible){\n\t\t\treturn;\n\t\t}\n\t\tif(this.editor){\n\t\t\tthis.editor.shadowCell(cell);\n\t\t\tthis.editor.textArea.focus();\n\t\t}\n\n\t\tvar row = this.getRowFromChild(cell);\n\t\tif (selectStyle == this.KeepAllSelected) {\n\t\t\t;\n\t\t} else if (selectStyle == this.KeepThisSelected) {\n\t\t\tthis.unselectAllRows(row);\n\t\t\tthis.unselectAllColumns(cellIndex(cell));\n\t\t} else {\n\t\t\tthis.unselectAllRows();\n\t\t\tthis.unselectAllColumns();\n\t\t}\n\n\t\tthis.pseudoFocusCells.push(cell);\n\t\t\/\/ dojo.html.addClass(cell, \"pseudofocus\");\n\t\tthis.setPF(cell);\n\t\t\n\t\tvar prevCell = this.navFocusCell;\n\t\tthis.navFocusCell = cell;\n\t\tthis.setRowFocus(row, prevCell);\n\t\tthis.setColFocus(cell, prevCell);\n\t\tvar drh = dojo.render.html;\n\t\tif((drh.mozilla)&&(drh.UA.indexOf(\"Firefox\/1.5\")>=0)){\n\t\t\tif(cell.nextSibling){\n\t\t\t\tvar nextCell = cell.nextSibling;\n\t\t\t\twhile((nextCell)&&(nextCell.nodeType != 1)){\n\t\t\t\t\tnextCell = nextCell.nextSibling;\n\t\t\t\t}\n\t\t\t\tif(nextCell){\n\t\t\t\t\tnextCell.setAttribute(\"tabindex\", \"62000\");\n\t\t\t\t\tnextCell.style.outline = \"none\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (prevCell && prevCell == cell) {\n\t\t\treturn; \/\/ save processing\n\t\t}\n\n\t\t\/\/FIXME: better perms handling\n\t\tif (Wiki.write) {\n\t\t\tthis.updateToolbar(); \t\t\n\t\t}\n\n\t\t\/\/ vert scroll to keep cell in view\n\t\tvar scrBarArea = 29;\n\t\tvar c = document.getElementById(\"rows_container\");\n\t\tvar tr = dojo.html.getFirstAncestorByTag(cell, \"tr\");\n\t\tif (tr.sectionRowIndex == 0) {\n\t\t\tc.scrollTop = 0;\n\t\t}\n\t\telse {\n\t\t\tvar cHt = dojo.html.getInnerHeight(c);\n\t\t\tvar offset = dojo.html.getAbsoluteY(c);\n\t\t\tvar trTop = dojo.html.getAbsoluteY(tr) - offset;\n\t\t\tvar trBot = trTop + dojo.html.getInnerHeight(tr);\n\t\t\tvar cTop = c.scrollTop;\n\t\t\tvar cBot = cTop + dojo.html.getInnerHeight(c);\n\t\t\tif (trBot\t>= cBot - scrBarArea) {\n\t\t\t\tc.scrollTop = trBot - cHt + scrBarArea;\n\t\t\t}\n\t\t\telse if (trTop < cTop) {\n\t\t\t\tvar nudge = 0; \/\/ (dojo.render.html.ie) ? 0 : 10;\n\t\t\t\tc.scrollTop = trTop + nudge;\n\t\t\t}\n\t\t}\n\n\t\t\/\/ horiz scroll to keep cell in view\n\t\tvar rowHeaderWid = 50;\n\t\tvar tdLeft = dojo.html.getAbsoluteX(cell);\n\t\tvar tdWid = dojo.html.getInnerWidth(cell);\n\t\tvar tdRight = tdLeft + tdWid;\n\t\tvar cWid = dojo.html.getInnerWidth(c);\n\t\tvar cLeft = c.scrollLeft;\n\t\tif (tdLeft < cLeft + rowHeaderWid) {\n\t\t\tc.scrollLeft = 0; \/\/ Math.max(tdLeft - rowHeaderWid, 0);\n\t\t}\n\t\telse if (tdRight - cLeft > cWid) {\n\t\t\tc.scrollLeft = tdRight - cWid;\n\t\t}","this_variables":["navFocusCell"],"returns":"save processing"}}},"jot.widget.JotAPTable.clearOtherNavFocus":{"_":{"meta":{"summary":"","parameters":{"skipCell":{"type":""}},"src":"\t\twhile (this.pseudoFocusCells.length\t>\t0) {\n\t\t\tvar oldCell = this.pseudoFocusCells.pop();\n\t\t\tif (!skipCell\t|| oldCell != skipCell) {\n\t\t\t\tthis.clearNavFocus(oldCell);\n\t\t\t}\n\t\t}"}}},"jot.widget.JotAPTable.clearNavFocus":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""}},"src":"\t\tthis.unSetPF(cell);\n\t\t\/\/ dojo.html.removeClass(cell, \"pseudofocus\");"}}},"jot.widget.JotAPTable.setActivated":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""}},"src":"\t\twith(cell.style){\n\t\t\tbackgroundColor = \"#ff9900\";\n\t\t}"}}},"jot.widget.JotAPTable.unSetActivated":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""}},"src":"\t\twith(cell.style){\n\t\t\tbackgroundColor = \"\";\n\t\t}"}}},"jot.widget.JotAPTable.setRowFocus":{"_":{"meta":{"summary":"","parameters":{"row":{"type":""},"prevCell":{"type":""}},"src":"\t\tif (!row) { return; }\n\t\tthis.setActivated(row.cells[this.rowNumberCellIdx]);\n\t\t\/\/ dojo.html.addClass(row.cells[this.rowNumberCellIdx], \"activated\");\n\t\tif (prevCell) {\n\t\t\t\/\/ if we've switched rows, unhilite prev row thumb\n\t\t\tvar oldRow = this.getRowFromChild(prevCell);\n\t\t\tif (oldRow && row.sectionRowIndex != oldRow.sectionRowIndex) {\n\t\t\t\tthis.unSetActivated(oldRow.cells[this.rowNumberCellIdx]);\n\t\t\t\t\/\/ dojo.html.removeClass(oldRow.cells[this.rowNumberCellIdx], \"activated\");\n\t\t\t}\n\t\t}"}}},"jot.widget.JotAPTable.setColFocus":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""},"prevCell":{"type":""}},"src":"\t\tif (!cell) { return; }\n\t\tif (!prevCell) { \n\t\t\tprevCell = this.navFocusCell; \n\t\t\tthis.navFocusCell = cell;\n\t\t}\n\t\tvar colIndex = cellIndex(cell);\n\t\t\/\/ dojo.html.addClass(this.tHead.rows[0].cells[colIndex], \"activated\");\n\t\tthis.setActivated(this.tHead.rows[0].cells[colIndex]);\n\t\t\/\/ if we've switched cols, unhilite prev col thumb\n\t\tif (prevCell && cellIndex(prevCell) != colIndex && cellIndex(prevCell) != -1) {\n\t\t\tthis.unSetActivated(this.tHead.rows[0].cells[cellIndex(prevCell)]);\n\t\t}","this_variables":["navFocusCell"]}}},"jot.widget.JotAPTable.getFocusCol":{"_":{"meta":{"summary":"","src":"\t\tif (!this.navFocusCell) { return null; }\n\t\tvar colIndex = cellIndex(this.navFocusCell);\n\t\tvar col = this.tHead.rows[0].cells[colIndex];\n\t\treturn col;"}}},"jot.widget.JotAPTable.getFocusColLogicalIndex":{"_":{"meta":{"summary":"","src":"\t\tvar col = this.getFocusCol();\n\t\tif (!col) { return -1 };\n\t\tvar ths = this.tHead.getElementsByTagName(\"th\");\n\t\tfor (var i=0; i<ths.length; i++) {\n\t\t\tif (col == ths[i]) { return i; break; }\n\t\t}\n\t\treturn -1;"}}},"jot.widget.JotAPTable.highlightColHeader":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tvar cell = dojo.html.getFirstAncestorByTag(evt.target, \"th\");\n\t\tvar colIndex = cellIndex(cell);\n\t\tvar row = this.tBody.rows[0]; \n\t\tif (!row) {\n\t\t\tthis.setColFocus(cell);\n\t\t} else {\n\t\t\tvar firstCell = row.cells[colIndex];\n\t\t\tif (firstCell) { this.setNavFocus(firstCell); }\n\t\t}\n\t\treturn colIndex;"}}},"jot.widget.JotAPTable.selectColumn":{"_":{"meta":{"summary":"","parameters":{"colIndex":{"type":""}},"src":"\t\tvar rows = this.tBody.rows;\n\t\tif (rows.length == 0) { return; }\n\t\t\n\t\t\/\/1st highlight chunk of cells likely to be visible\n\t\tvar cutoff = Math.min(this.tBody.rows.length-1, 100);\n\t\tfor (var i=0; i<cutoff; i++) {\n\t\t\tvar row = rows[i];\n\t\t\tif (row.className != \"open_row\") {\n\t\t\t\tvar c = row.cells[colIndex];\n\t\t\t\t\/\/ dojo.html.addClass(c, \"highlighted\");\n\t\t\t\tc.style.backgroundColor = \"#fbecc9\";\n\t\t\t}\n\t\t}\n\t\t\/\/unhighlight first chunk of any previous cells\n\t\tfor (var idx=0; idx<this.curSelectedColIndices.length; idx++) {\n\t\t\tvar cidx = this.curSelectedColIndices[idx];\n\t\t\tfor (var i=0; i<cutoff; i++) {\n\t\t\t\tvar row = rows[i];\n\t\t\t\tif (row.className != \"open_row\") {\n\t\t\t\t\tvar c = row.cells[cidx];\n\t\t\t\t\tc.style.backgroundColor = \"\";\n\t\t\t\t\t\/\/ dojo.html.removeClass(c, \"highlighted\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\/\/finish highlighting\n\t\tfor (var i=cutoff; i<rows.length; i++) {\n\t\t\tvar row = rows[i];\n\t\t\tif (row.className != \"open_row\") {\n\t\t\t\tvar c = row.cells[colIndex];\n\t\t\t\t\/\/ dojo.html.addClass(c, \"highlighted\");\n\t\t\t\tc.style.backgroundColor = \"#fbecc9\";\n\t\t\t}\n\t\t}\n\t\t\/\/finish unhighlighting\n\t\tfor (var idx=0; idx<this.curSelectedColIndices.length; idx++) {\n\t\t\tvar cidx = this.curSelectedColIndices[idx];\n\t\t\tfor (var i=cutoff; i<rows.length; i++) {\n\t\t\t\tvar row = rows[i];\n\t\t\t\tif (row.className != \"open_row\") {\n\t\t\t\t\tvar c = row.cells[cidx];\n\t\t\t\t\tc.style.backgroundColor = \"\";\n\t\t\t\t\t\/\/ dojo.html.removeClass(c, \"highlighted\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\twhile (this.curSelectedColIndices.length > 0) {\n\t\t\tthis.curSelectedColIndices.pop();\n\t\t}\n\t\tthis.curSelectedColIndices.push(colIndex);\n\t\tthis.unselectAllRows();"}}},"jot.widget.JotAPTable.unselectAllColumns":{"_":{"meta":{"summary":"","parameters":{"omitIndex":{"type":""}},"src":"\t\tvar rows = this.tBody.rows;\n\t\tfor (var idx=0; idx<this.curSelectedColIndices.length; idx++) {\n\t\t\tvar colIndex = this.curSelectedColIndices[idx];\n\t\t\tfor (var i=0; i<rows.length; i++) {\n\t\t\t\tif (!omitIndex || colIndex != omitIndex) {\n\t\t\t\t\tvar row = rows[i];\n\t\t\t\t\tif (row.className != \"open_row\") {\n\t\t\t\t\t\tvar c = row.cells[colIndex];\n\t\t\t\t\t\tc.style.backgroundColor = \"\";\n\t\t\t\t\t\t\/\/ dojo.html.removeClass(c, \"highlighted\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\twhile (this.curSelectedColIndices.length > 0) {\n\t\t\tthis.curSelectedColIndices.pop();\n\t\t}"}}},"jot.widget.JotAPTable.dispatchHeaderClick":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tvar colIndex = this.highlightColHeader(evt); \t\n\t\tthis.selectColumn(colIndex);"}}},"jot.widget.JotAPTable.dispatchHeaderContextMenu":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tevt.preventDefault();\n\t\tvar colIndex = this.highlightColHeader(evt);\n\t\tthis.selectColumn(colIndex);\n\t\thandleColHeaderMenu(evt);"}}},"jot.widget.JotAPTable.isDataCell":{"_":{"meta":{"summary":"","parameters":{"td":{"type":""}},"src":"\t\tif (!td) { return false; }\n\t\treturn (!dojo.html.hasClass(td, \"apchrome\"));\n\t\t\/\/return (typeof td.className != \"undefined\") || (td.className == \"\");"}}},"jot.widget.JotAPTable.getCellBelow":{"_":{"meta":{"summary":"","parameters":{"curCell":{"type":""}},"src":"\t\tvar tbody = dojo.html.getFirstAncestorByTag(tr, \"tbody\");\n\n\t\tif (tr.sectionRowIndex + 1 >= tbody.rows.length) {\n\t\t\treturn curCell;\n\t\t}\n\n\t\tvar trBelow = tbody.rows[tr.sectionRowIndex + 1];\n\n\t\t\/\/ need to account for row detail view row\n\t\tif (trBelow.className == \"open_row\") {\n\t\t\ttrBelow = tbody.rows[tr.sectionRowIndex + 2];\n\t\t\tif (!trBelow) {\n\t\t\t\treturn curCell;\n\t\t\t}\n\t\t}\n\n\t\treturn trBelow.cells[cellIndex(curCell)];"}}},"jot.widget.JotAPTable.getCellAbove":{"_":{"meta":{"summary":"","parameters":{"curCell":{"type":""}},"src":"\t\tvar tbody = dojo.html.getFirstAncestorByTag(tr, \"tbody\");\n\n\t\tif (tr.sectionRowIndex == 0) {\n\t\t\treturn curCell;\n\t\t}\n\n\t\tvar trAbove = tbody.rows[tr.sectionRowIndex - 1];\n\n\t\t\/\/ need to account for row detail view row\n\t\tif (trAbove.className == \"open_row\") {\n\t\t\ttrAbove = tbody.rows[tr.sectionRowIndex - 2];\n\t\t\tif (!trAbove) {\n\t\t\t\treturn curCell;\n\t\t\t}\n\t\t}\n\n\t\treturn trAbove.cells[cellIndex(curCell)];"}}},"jot.widget.JotAPTable.findDataCellLeft":{"_":{"meta":{"summary":"","parameters":{"curCell":{"type":""},"isDataCellFunc":{"type":""}},"src":"\t\tif (!curCell) { return; }\n\t\tif (!curCell.tagName ||\tcurCell.tagName.toLowerCase() != \"td\") { return; }\n\n\t\tif (!isDataCellFunc) { isDataCellFunc = this.isDataCell; }\n\n\t\t\/\/ if no previous cell, return orig\n\t\tif (cellIndex(curCell) == 0){\n\t\t\treturn curCell;\n\t\t}\n\n\t\t\/\/ get the containing row\n\t\tvar tr = dojo.html.getFirstAncestorByTag(curCell, \"tr\");\n\n\t\t\/\/ if the cell to the left is not a\tdata cell, return orig\n\t\tvar newCell = tr.cells[cellIndex(curCell)-1];\n\t\tif (!isDataCellFunc.call(this, newCell)) {\n\t\t\treturn curCell;\n\t\t}\n\n\t\treturn newCell;","this_inherits":["isDataCellFunc"]}}},"jot.widget.JotAPTable.findDataCellRight":{"_":{"meta":{"summary":"","parameters":{"curCell":{"type":""},"isDataCellFunc":{"type":""}},"src":"\t\tif (!curCell){ return; }\n\t\tif (!curCell.tagName ||\tcurCell.tagName.toLowerCase() != \"td\") { return; }\n\n\t\tif (!isDataCellFunc) { isDataCellFunc = this.isDataCell; }\n\n\t\t\/\/ get the containing row\n\t\tvar tr = dojo.html.getFirstAncestorByTag(curCell, \"tr\");\n\n\t\t\/\/ if no cell to the right, return orig\n\t\tif((cellIndex(curCell)+1)>= tr.cells.length){\n\t\t\treturn curCell;\n\t\t}\n\n\t\t\/\/ if the cell to the right is not a data cell, return orig\n\t\tvar newCell = tr.cells[cellIndex(curCell)+ 1];\n\t\tif (!isDataCellFunc.call(this, newCell)) {\n\t\t\treturn curCell;\n\t\t}\n\n\t\treturn newCell;","this_inherits":["isDataCellFunc"]}}},"jot.widget.JotAPTable.findDataCellBelow":{"_":{"meta":{"summary":"","parameters":{"curCell":{"type":""},"isDataCellFunc":{"type":""},"getCellBelowFunc":{"type":""}},"src":"\t\tif (!curCell) { return; }\n\t\tif (!curCell.tagName ||\tcurCell.tagName.toLowerCase() != \"td\") { return; }\n\n\t\tif (!isDataCellFunc) { isDataCellFunc = this.isDataCell; }\n\t\tif (!getCellBelowFunc) { getCellBelowFunc = this.getCellBelow; }\n\n\t\t\/\/ if no row below according to the current paging scheme, return orig\n\t\tvar newCell = getCellBelowFunc.call(this, curCell);\n\t\tif (newCell == curCell) {\n\t\t\treturn curCell;\n\t\t}\n\n\t\t\/\/ if the cell below is not a\tdata cell, return orig\n\t\tif (!isDataCellFunc.call(this, newCell)) {\n\t\t\treturn curCell;\n\t\t}\n\n\t\treturn newCell;","this_inherits":["getCellBelowFunc","isDataCellFunc"]}}},"jot.widget.JotAPTable.findDataCellAbove":{"_":{"meta":{"summary":"","parameters":{"curCell":{"type":""},"isDataCellFunc":{"type":""},"getCellAboveFunc":{"type":""}},"src":"\t\tif (!curCell) { return; }\n\t\tif (!curCell.tagName ||\tcurCell.tagName.toLowerCase() != \"td\") { return; }\n\n\t\tif (!isDataCellFunc) { isDataCellFunc = this.isDataCell; }\n\t\tif (!getCellAboveFunc) { getCellAboveFunc = this.getCellAbove; }\n\n\t\t\/\/ if no row below according to the current paging scheme, return orig\n\t\tvar newCell = getCellAboveFunc.call(this, curCell);\n\t\tif (newCell == curCell) {\n\t\t\treturn curCell;\n\t\t}\n\n\t\t\/\/ if the cell below is not a\tdata cell, return orig\n\t\tif (!isDataCellFunc.call(this, newCell)) {\n\t\t\treturn curCell;\n\t\t}\n\n\t\treturn newCell;","this_inherits":["getCellAboveFunc","isDataCellFunc"]}}},"jot.widget.JotAPTable.dispatchMouseOver":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tvar cell = this.getCellFromChild(evt.target);\n\t\tif (cell) {\n\t\t\t\/\/ all the \"row header\"\tcells should have a\thand cursor\n\t\t\tif (cellIndex(cell) < this.paperClipCellIdx) {\n\t\t\t\t\/\/ except ignore the row detail view\n\t\t\t\tif (cell.id == \"row_detail_cell\") {\n\t\t\t\t\tthis.domNode.style.cursor = \"default\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.domNode.style.cursor = \"pointer\";\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t\/*\n\t\t\t\tthis.domNode.style.cursor = \"default\";\n\t\t\t\t\/\/ We need to communicate to users that cells are editable.\n\t\t\t\t\/\/ On mouseover, change the cell border to darker\/thicker lines to echo Excel's\t\"pseudo-select\"\n\t\t\t\tdojo.html.addClass(cell, \"hoverhilite\");\n\t\t\t\tthis.hilitedCells.push(cell);\n\t\t\t\t*\/\n\t\t\t}\n\t\t}","this_variables":["domNode.style.cursor"]}}},"jot.widget.JotAPTable.dispatchMouseout":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tvar cell = this.getCellFromChild(evt.target);\n\t\tif (cell) {\n\t\t\t\/\/ turn off hand cursor when leaving \"row header\"\tcells\n\t\t\tif (cellIndex(cell) < this.numRowHeaderCells) {\n\t\t\t\tthis.domNode.style.cursor = \"default\";\n\t\t\t}\n\t\t}\n\t\t\/\/ We need to communicate to users that cells are editable.\n\t\t\/\/ On mouseover, change the cell border to darker\/thicker lines to echo Excel's\t\"pseudo-select\"\n\t\t\/*\n\t\tdojo.html.removeClass(cell, \"hoverhilite\");\n\t\twhile (this.hilitedCells.length\t>\t0) {\n\t\t\tvar oldCell = this.hilitedCells.pop();\n\t\t\tif (oldCell != cell) {\n\t\t\t\tdojo.html.removeClass(oldCell, \"hoverhilite\");\n\t\t\t}\n\t\t}\n\t\t*\/","this_variables":["domNode.style.cursor"]}}},"jot.widget.JotAPTable.dispatchMouseUp":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tvar row = this.getRowFromChild(evt.target);\n\t\tvar cell = this.getCellFromChild(evt.target);\n\t\tif (cell && !getParentById(cell, \"row_detail\")) {\n\t\t\t\/\/ the \"row header\"\tthumb cells\n\t\t\tif (cellIndex(cell) < this.arrowHeaderCellIdx) {\n\t\t\t\tif (evt.ctrlKey) {\n\t\t\t\t\t\/\/toggle highlighting if ctrl-clicking a row that's\n\t\t\t\t\t\/\/already been ctrl-click-highlighted\n\t\t\t\t\tif (this.curSelectedRows[row.id] != null) {\n\t\t\t\t\t\tif (this.isRowSelected(row)) {\n\t\t\t\t\t\t\tthis.unselectRow(row);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tthis.selectRow(row, this.KeepAllSelected);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t\/\/this is the first time we've ctrl-clicked this row\n\t\t\t\t\t\tthis.selectRow(row, this.KeepAllSelected);\n\t\t\t\t\t}\n\t\t\t\t\t\/\/ suppress OS selection-highlighting in IE\n\t\t\t\t\tif (document.selection) {\n\t\t\t\t\t\tdocument.selection.empty();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (evt.shiftKey) {\n\t\t\t\t\tif (document.selection) { document.selection.clear(); }\n\t\t\t\t\telse if (window.getSelection && window.getSelection().removeAllRanges) {\n\t\t\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\t\t}\n\n\t\t\t\t\t\/* TODO - shift-click should also unhilite sub-ranges\n\t\t\t\t\tif (this.curSelectedRows[row.id] != null) {\n\t\t\t\t\t\tif (row.className == \"highlighted\") {\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t\/\/this is the first time we've shift-clicked this row\n\t\t\t\t\t}\n\t\t\t\t\t*\/\n\n\t\t\t\t\t\/\/ now highlight the contained range\n\t\t\t\t\tvar min = row.sectionRowIndex;\n\t\t\t\t\tvar max = row.sectionRowIndex;\n\t\t\t\t\tfor (rowId in this.curSelectedRows) {\n\t\t\t\t\t\tvar selectedRow = this.curSelectedRows[rowId];\n\t\t\t\t\t\tif (selectedRow != null) {\n\t\t\t\t\t\t\tmin = Math.min(min, selectedRow.sectionRowIndex);\n\t\t\t\t\t\t\tmax = Math.max(max, selectedRow.sectionRowIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor (var i=min; i<=max; i++) {\n\t\t\t\t\t\tthis.selectRow(this.tBody.rows[i], this.KeepAllSelected);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t\/\/ not a modified-click, so treat normally, i.e.,\n\t\t\t\t\t\/\/ a click unselects everything else\n\t\t\t\t\tthis.singleSelectRow(row);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\/\/ the expando-collapso arrow in the 2nd column\n\t\t\telse if (cellIndex(cell) == this.arrowHeaderCellIdx) {\n\t\t\t\tif (this.curOpenRowDetail != null) {\n\t\t\t\t\tvar openRow = document.getElementById(this.curOpenRowId);\n\t\t\t\t\tif (row.id == this.curOpenRowId) {\n\t\t\t\t\t\tthis.closeRow(openRow);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.closeRow(openRow, row);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdbg(\"now opening row \" + row.id);\n\t\t\t\t\tthis.openRow(row);\n\t\t\t\t}\n\t\t\t}\n\t\t}"}}},"jot.widget.JotAPTable.dispatchClick":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tvar row = this.getRowFromChild(evt.target);\n\t\tvar cell = this.getCellFromChild(evt.target);\n\t\tif (cell && !getParentById(cell, \"row_detail\")) {\n\t\t\tif (cellIndex(cell) >= this.numRowHeaderCells) {\n\t\t\t\tthis.setNavFocus(cell);\n\t\t\t}\n\t\t}"}}},"jot.widget.JotAPTable.dispatchDoubleClick":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tthis.unselectAllRows();\n\t\tvar cell = this.getCellFromChild(evt.target);\n\t\tif (cell && !getParentById(cell, \"row_detail\")){\n\t\t\tif (cellIndex(cell) >= this.numRowHeaderCells){\n\t\t\t\tthis.buildEditor(evt, cell);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tevt.preventDefault();\n\t\tevt.stopPropagation();"}}},"jot.widget.JotAPTable.dispatchHeaderDoubleClick":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tdojo.debug(\"dispatchHeaderDoubleClick\");\n\t\tvar cell = dojo.html.getFirstAncestorByTag(evt.target, \"th\");\n\t\tif (!cell) { return; }\n\t\thandleEditColName(cellIndex(cell) - this.numRowHeaderCells, false);"}}},"jot.widget.JotAPTable.safeHandleTab":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tevt.stopPropagation();\n\t\tevt.preventDefault();\n\t\tthis.handleTab(evt.shiftKey);\n\t\t\/*\n\t\tvar drh = dojo.render.html;\n\t\tif((drh.mozilla)&&(drh.UA.indexOf(\"Firefox\/1.5\")<0)){\n\t\t\tthis.defocus(this.handleTab, evt);\n\t\t}else{\n\t\t\tvar shiftKey = evt.shiftKey || false;\n\t\t\tthis.handleTab(evt.shiftKey);\n\t\t}\n\t\t*\/\n\t\tdojo.lang.setTimeout(this, function(){ this.editor.textArea.focus(); }, 2);"}}},"jot.widget.JotAPTable.defocus":{"_":{"meta":{"summary":"","parameters":{"callback":{"type":""},"evt":{"type":""}},"src":"\t\tvar me = this;\n\t\tvar shiftKey = evt.shiftKey || false;\n\t\tsetTimeout(function(){\n\t\t\tdojo.debug(\"JotAPTable.defocus\");\n\t\t\tvar el = document.createElement(\"textarea\");\n\t\t\t\/\/ see https:\/\/bugzilla.mozilla.org\/show_bug.cgi?id=236791#c44\n\t\t\t\/\/el.type = \"checkbox\";\n\t\t\tel.style.position = \"absolute\";\n\t\t\tel.style.visibility = \"hidden\"; \/\/ doesn't work for ie, btw\n\t\t\t\/\/ make sure it's in the active client area\n\t\t\t\/\/ so we don't lurch around on focus()\n\t\t\tif (this.navFocusCell) {\n\t\t\t\twith (dojo.html) {\n\t\t\t\t\tel.style.top = (getAbsoluteX(this.navFocusCell) + getScrollTop()) + \"px\";\n\t\t\t\t\tel.style.left = (getAbsoluteY(this.navFocusCell) + getScrollLeft()) + \"px\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tdocument.body.appendChild(el);\n\t\t\tel.focus();\n\t\t\tdocument.body.removeChild(el);\n\t\t\tme.preventBuild = false;\n\t\t\tif (callback) { callback.call(me, shiftKey); }\n\t\t}, 30);"}}},"jot.widget.JotAPTable.handleTab":{"_":{"meta":{"summary":"","parameters":{"shiftKey":{"type":""}},"src":"\t\tif (shiftKey) {\n\t\t\tthis.setNavFocus(this.findDataCellLeft(this.navFocusCell));\n\t\t} else {\n\t\t\tthis.setNavFocus(this.findDataCellRight(this.navFocusCell));\n\t\t}"}}},"jot.widget.JotAPTable.handleEnter":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tthis.setNavFocus(this.findDataCellBelow(this.navFocusCell));"}}},"jot.widget.JotAPTable.countSelectedRows":{"_":{"meta":{"summary":"","src":"\t\tvar numStored = 0;\n\t\tif (this.curSelectedRows) { \n\t\t\tfor (rowId in this.curSelectedRows) {\n\t\t\t\tvar storedRow = this.curSelectedRows[rowId];\n\t\t\t\tif (storedRow) { numStored++; }\n\t\t\t}\n\t\t}\n\t\treturn numStored;"}}},"jot.widget.JotAPTable.singleSelectRow":{"_":{"meta":{"summary":"","parameters":{"row":{"type":""},"keepSelected":{"type":""}},"src":"\t\tif (!row) { return; }\n\t\tdbg(\"selectRow called with row: \" + row.id);\n\t\tvar isSelected = false;\n\t\tvar numStored = 0;\n\t\tfor (rowId in this.curSelectedRows) {\n\t\t\tvar storedRow = this.curSelectedRows[rowId];\n\t\t\tif (storedRow != null) {\n\t\t\t\tif (storedRow == row) {\n\t\t\t\t\tisSelected = true;\n\t\t\t\t} else {\n\t\t\t\t\tthis.unselectRow(storedRow);\n\t\t\t\t}\n\t\t\t\tnumStored++;\n\t\t\t}\n\t\t}\n\t\tif (isSelected && numStored == 1 && !keepSelected) {\n\t\t\tthis.unselectRow(row);\n\t\t} else {\n\t\t\tthis.curSelectedRows = [];\n\t\t\tthis.selectRow(row, this.KeepThisSelected);\n\t\t}","this_variables":["curSelectedRows"]}}},"jot.widget.JotAPTable.selectRow":{"_":{"meta":{"summary":"","parameters":{"row":{"type":""},"selectStyle":{"type":""}},"src":"\t\t\/\/toggleRowThumb(row, true);\n\t\tthis.curSelectedRows[row.id] = row;\n\t\tthis.curSelectedRowsStack.push(row);\n\n\t\tvar arrowImg = row.cells[this.arrowHeaderCellIdx].getElementsByTagName(\"img\")[0];\n\t\tif (arrowImg.src.indexOf(\"right\") != -1) {\n\t\t\treplaceGif(arrowImg, \"arrow_orange_right.gif\");\n\t\t} else {\n\t\t\treplaceGif(arrowImg, \"arrow_orange_down.gif\");\n\t\t}\n\/*\n\t\tvar paperClipImg = row.cells[this.paperClipCellIdx].getElementsByTagName(\"img\")[0];\n\t\tif (paperClipImg) {\n\t\t\treplaceGif(paperClipImg, \"paper_clip_orange_on.gif\");\n\t\t}\n*\/\n\t\t\/\/FIXME: better perms handling\n\t\tif (Wiki.write) {\n\t\t\tvar firstCell = row.cells[this.firstDataCellIdx];\n\t\t\tif (firstCell) {\n\t\t\t\tthis.setNavFocus(firstCell, selectStyle);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.unselectAllColumns();"}}},"jot.widget.JotAPTable.unselectAllRows":{"_":{"meta":{"summary":"","parameters":{"rowToSkip":{"type":""}},"src":"\t\tfor (rowId in this.curSelectedRows) {\n\t\t\tvar storedRow = this.curSelectedRows[rowId];\n\t\t\tif (storedRow != null) {\n\t\t\t\tif (rowToSkip) {\n\t\t\t\t\tif (storedRow.id != rowToSkip.id) {\n\t\t\t\t\t\tthis.unselectRow(storedRow);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.unselectRow(storedRow);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.curSelectedRowsStack = [];\n\t\tif (rowToSkip) {\n\t\t\tthis.curSelectedRowsStack.push(rowToSkip)\n\t\t}","this_variables":["curSelectedRowsStack"]}}},"jot.widget.JotAPTable.unselectRow":{"_":{"meta":{"summary":"","parameters":{"row":{"type":""}},"src":"\t\tif (row) {\n\t\t\trow.className = \"\";\n\t\t\t\/\/row.style.backgroundColor = \"\";\n\t\t\t\n\t\t\t\/\/toggleRowThumb(row, false);\n\t\t\tthis.curSelectedRows[row.id] = null;\n\n\t\t\tvar arrowImg = row.cells[this.arrowHeaderCellIdx].getElementsByTagName(\"img\")[0];\n\t\t\tif (arrowImg.src.indexOf(\"right\") != -1) {\n\t\t\t\treplaceGif(arrowImg, \"arrow_white_right.gif\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\treplaceGif(arrowImg, \"arrow_white_down.gif\");\n\t\t\t}\n\n\/*\t\t\tvar paperClipImg = row.cells[this.paperClipCellIdx].getElementsByTagName(\"img\")[0];\n\t\t\tif (paperClipImg) {\n\t\t\t\treplaceGif(paperClipImg, \"paper_clip_white.gif\");\n\t\t\t}\n*\/\n\t\t\tvar navFocusRow = this.getRowFromChild(this.navFocusCell);\n\t\t\tif (navFocusRow && navFocusRow.id == row.id) {\n\t\t\t\twhile (this.curSelectedRowsStack.length\t>\t0) {\n\t\t\t\t\tvar prevRow = this.curSelectedRowsStack.pop();\n\t\t\t\t\tif (this.isRowSelected(prevRow) && prevRow.id != row.id) {\n\t\t\t\t\t\tvar firstCell = prevRow.cells[this.firstDataCellIdx];\n\t\t\t\t\t\tif (firstCell) {\n\t\t\t\t\t\t\tthis.setNavFocus(firstCell, this.KeepAllSelected);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}"}}},"jot.widget.JotAPTable.openRow":{"_":{"meta":{"summary":"","parameters":{"row":{"type":""}},"src":"\t\t\tif (this.curOpenRowId == row.id) { return; }\n\t\t\tif (g_opening == true) { return; }\n\t\t\tthis.curOpenRowId = row.id;\n\n\t\t\tvar arrowImg = row.cells[this.arrowHeaderCellIdx].getElementsByTagName(\"img\")[0];\n\t\t\tif (arrowImg.src.indexOf(\"orange\") != -1) {\n\t\t\t\treplaceGif(arrowImg, \"arrow_orange_down.gif\");\n\t\t\t} else {\n\t\t\t\treplaceGif(arrowImg, \"arrow_white_down.gif\");\n\t\t\t}\n\n\t\t\t\/\/ find how many columns this table has\n\t\t\tvar numCols = this.domNode.getElementsByTagName(\"col\").length;\n\n\t\t\t\/\/ create the temp row to insert\n\t\t\t\/*\n\t\t\tinsertRow modified in DOM Level\t2\n\t\t\t\tInsert a row into this section.\tThe new row is inserted immediately before the current indexth row in this section.\n\t\t\t\tIf index is\t-1 or equal to the number of rows in this section, the new row is appended.\n\t\t\t\t*\/\n\t\t\tvar tr = this.tBody.insertRow(row.rowIndex);\n\t\t\ttr.className = \"open_row\";\n\t\t\ttr.id = \"row_detail\";\n\t\t\tvar td = document.createElement(\"td\");\n\t\t\ttd.className = \"row_num\";\n\t\t\ttd.innerHTML = \"&#160;\";\n\t\t\ttr.appendChild(td);\n\n\t\t\ttd = document.createElement(\"td\");\n\t\t\ttd.className = \"open_row_cell\";\n\t\t\ttd.colSpan = numCols - 1;\n\t\t\ttd.id = \"row_detail_cell\";\n\n\t\t\ttr.appendChild(td);\n\t\t\tthis.curOpenRowDetail = tr;\n\n\t\t\tthis.updateOpenRowDetail(td, function() {g_opening = false});","this_variables":["curOpenRowId","curOpenRowDetail"]}}},"jot.widget.JotAPTable.updateOpenRowDetail":{"_":{"meta":{"summary":"","parameters":{"rowDetailCell":{"type":""},"callback":{"type":""}},"src":"\t\tif (!rowDetailCell)\n\t\t\treturn;\n\n\t\tvar me = this;\n\t\tvar cid = this.curOpenRowId.replace(\/&apos;\/g, \"'\");\n\t\tvar content = { row: cid, canwrite: Wiki.write };\n\t\tdojo.io.bind({\n\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/APRowDetailView?theme=none\"),\n\t\t\tmethod: \"get\",\n\t\t\tcontent: content,\n\t\t\tmimetype: \"text\/plain\",\n\t\t\tpreventCache: true,\n\t\t\thandler: function(type, resp, e) {\n\t\t\t\tdbg(\"returning from fetching row detail view\");\n\t\t\t\tdbg(resp);\n\t\t\t\t\/\/FIXME: jot xml parser chokes on MS crap\n\t\t\t\tresp = resp.replace(\/<!--template error: couldn't parse XML content:\/, \"\");\n\t\t\t\tresp = resp.replace(\/\\[.*?\\]-->\/,\"\");\n\t\t\t\trowDetailCell.innerHTML = resp;\n\n\t\t\t\tme.adjustDragResizeHandles();\n\n\t\t\t\t\/\/ prepare editable notes in row detail view\n\t\t\t\tvar el = document.getElementById(\"open_row_container\");\n\t\t\t\tvar container = dojo.html.getElementsByClass(\"open_row_notes\", el)[0];\n\t\t\t\tif (!el || !container) { return; }\n\t\t\t\t\/\/FIXME:better perms handling\n\t\t\t\tif (Wiki.write) {\n\t\t\t\t\tcontainer.ondblclick = handleEditNotes;\n\t\t\t\t\tprepareRichTextArea(container);\n\t\t\t\t\tvar btns = dojo.html.getElementsByClass(\"richtext_button\", container);\n\t\t\t\t\tbtns[0].onclick = handleEditNotes;\n\t\t\t\t\tbtns[1].onclick = cleanUpNotesEditor;\n\t\t\t\t\tbtns[2].onclick = function(evt){cleanUpNotesEditor(evt, false);};\n\t\t\t\t}\n\t\t\t\tif (callback) { callback(); }\n\t\t\t}\n\t\t});"}}},"jot.widget.JotAPTable.closeRow":{"_":{"meta":{"summary":"","parameters":{"row":{"type":""},"rowToOpen":{"type":""}},"src":"\t\tvar arrowImg = row.cells[this.arrowHeaderCellIdx].getElementsByTagName(\"img\")[0];\n\t\tif (arrowImg.src.indexOf(\"orange\") != -1) {\n\t\t\treplaceGif(arrowImg, \"arrow_orange_right.gif\");\n\t\t} else {\n\t\t\treplaceGif(arrowImg, \"arrow_white_right.gif\");\n\t\t}\n\/*\n\t\tvar paperClipImg = row.cells[this.paperClipCellIdx].getElementsByTagName(\"img\")[0];\n\t\tif (paperClipImg) {\n\t\t\treplaceGif(paperClipImg, \"paper_clip_white.gif\");\n\t\t}\n*\/\n\t\tvar rowdetail = document.getElementById(\"open_row_container\");\n\t\tvar me = this;\n\t\tdojo.fx.wipeOut(rowdetail, 200, function() { me.deleteRowDetail(rowToOpen); } );\n\t\treturn false;"}}},"jot.widget.JotAPTable.deleteRowDetail":{"_":{"meta":{"summary":"","parameters":{"rowToOpen":{"type":""}},"src":"\t\tif (this.curOpenRowDetail) {\n\t\t\tthis.curOpenRowDetail.parentNode.removeChild(this.curOpenRowDetail);\n\t\t\tthis.curOpenRowDetail = null;\n\t\t\tthis.curOpenRowId = \"\";\n\t\t\tif (rowToOpen) {\n\t\t\t\tthis.openRow(rowToOpen);\n\t\t\t}\n\t\t\tthis.adjustDragResizeHandles();\n\t\t}","this_variables":["curOpenRowDetail","curOpenRowId"]}}},"jot.widget.JotAPTable.clearSelectedRows":{"_":{"meta":{"summary":"","src":"\t\tfor (rowId in this.curSelectedRows) {\n\t\t\tvar storedRow = this.curSelectedRows[rowId];\n\t\t\tif(storedRow && storedRow[\"style\"]){\n\t\t\t\tstoredRow.style.backgroundColor = \"\";\n\t\t\t}\n\t\t\t\/*\n\t\t\tif (storedRow != null && storedRow.className) {\n\t\t\t\tstoredRow.className = \"\";\n\t\t\t}\n\t\t\t*\/\n\t\t}\n\t\tthis.curSelectedRows = [];","this_variables":["curSelectedRows"]}}},"jot.widget.JotAPTable.dispatchEditorSave":{"_":{"meta":{"summary":"","parameters":{"origEvt":{"type":""},"thisEditor":{"type":""},"data":{"type":""}},"src":"\t\tdojo.debug(\"JotAPTable.dispatchEditorSave:\", data);\n\t\tthis.saveEditorCell(thisEditor, data);\n\n\t\tswitch (origEvt.keyCode) {\n\t\t\tcase origEvt.KEY_TAB:\n\t\t\t\t\/\/ this.safeHandleTab(origEvt);\n\t\t\t\tbreak;\n\t\t\tcase origEvt.KEY_ENTER:\n\t\t\t\tbreak;\n\t\t\tcase origEvt.KEY_UP_ARROW:\n\t\t\t\tthis.setNavFocus(this.findDataCellAbove(this.navFocusCell));\n\t\t\t\tbreak;\n\t\t\tcase origEvt.KEY_RIGHT_ARROW:\n\t\t\t\tthis.setNavFocus(this.findDataCellRight(this.navFocusCell));\n\t\t\t\tbreak;\n\t\t\tcase origEvt.KEY_DOWN_ARROW:\n\t\t\t\tthis.setNavFocus(this.findDataCellBelow(this.navFocusCell));\n\t\t\t\tbreak;\n\t\t\tcase origEvt.KEY_LEFT_ARROW:\n\t\t\t\tthis.setNavFocus(this.findDataCellLeft(this.navFocusCell));\n\t\t\t\tbreak;\n\t\t}"}}},"jot.widget.JotAPTable.dispatchEditorCancel":{"_":{"meta":{"summary":"","parameters":{"origEvt":{"type":""}},"src":"\t\tif (!origEvt) { return; }\n\t\tif(typeof origEvt.keyCode != \"undefined\"){\n\t\t\tswitch (origEvt.keyCode) {\n\t\t\t\tcase origEvt.KEY_TAB:\n\t\t\t\t\t\/\/ this.safeHandleTab(origEvt);\n\t\t\t\t\tbreak;\n\t\t\t\tcase origEvt.KEY_ENTER:\n\t\t\t\t\tdojo.debug(\"JotAPTable.dispatchEditorCancel\");\n\t\t\t\t\t\/\/ this.handleEnter();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}else{\n\t\t\tthis.setNavFocus(this.navFocusCell);\n\t\t}\n\t\tthis.clearEditor();"}}},"jot.widget.JotAPTable.saveEditorCell":{"_":{"meta":{"summary":"","parameters":{"thisEditor":{"type":""},"data":{"type":""}},"src":"\t\tdojo.debug(\"saveEditorCell\");\n\t\tvar td = thisEditor.editedCell;\n\t\tthis.saveCellEdit(td, data);\n\t\tthis.clearEditor();"}}},"jot.widget.JotAPTable.saveCellEdit":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""},"data":{"type":""}},"src":"\t\tif(!cell){ dojo.debug(\"FAILURE: no cell!\"); return; }\n\n\t\tvar row = this.getRowFromChild(cell);\n\t\tvar colIdx = cellIndex(cell) - this.numRowHeaderCells;\n\t\tvar ths = this.tHead.getElementsByTagName(\"th\");\n\t\tif(!ths[colIdx]){ dojo.debug(\"FAILURE: column doesn't match!\"); return; }\n\t\tvar propertyName = ths[colIdx].id;\n\n\t\tvar val = data || cell.innerHTML;\n\n\t\t\/\/auto-urlify\n\t\tvar words = val.split(\" \");\n\t\tfor (var i=0; i<words.length; i++) {\n\t\t\tvar word = words[i];\n\t\t\tif (word.indexOf(\"href\") == -1 && (word.indexOf(\"http:\") != -1 || word.indexOf(\"https:\") != -1)) {\n\t\t\t\twords[i] = \"<a target='_new' href='\" + word.replace(\/'\/g,\"\\\\'\") + \"'>\" + word + \"<\/a>\";\n\t\t\t}\n\t\t}\n\t\tval = words.join(\" \");\n\t\tcell.innerHTML = val;\n\t\tvar arr = [];\n\t\t\n\t\tarr[\"prop\"] = propertyName;\n\t\tarr[\"val\"] = val;\n\t\tvar cls = dojo.html.getClass(cell);\n\t\t\/\/ strip temporary classes\n\t\tcls = cls.replace(\/pseudofocus\/gi, \"\");\n\t\tcls = cls.replace(\/highlighted\/gi, \"\");\n\t\tarr[\"css\"] = cls;\n\t\tarr[\"path\"] = \"\/\" + this.appName + \"\/\" + row.id;\n\t\tarr[\"form\"] = \"\/\" + this.schemaName;\n\n\t\tshowWorkingStatus();\n\n\t\tvar req = dojo.io.bind({\n\t\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/APSaveCellValue?theme=none\"),\n\t\t\t\tmethod: \"post\",\n\t\t\t\tcontent: arr,\n\t\t\t\tmimetype: \"text\/plain\",\n\t\t\t\thandler: function(type, resp, e) {\n\t\t\t\t\t\/\/TODO err handling\n\t\t\t\t\tdbg(e.responseText);\n\t\t\t\t\thideWorkingStatus();\n\t\t\t\t}\n\t\t});\n\t\t\n\t\tg_edited = true;\n\t\t\/\/this.edited = true;"}}},"jot.widget.JotAPTable.appendRow":{"_":{"meta":{"summary":"","src":"\t\tthis.pendingRowInserts++;\n\n\t\tvar rows = this.tBody.rows;\n\t\tif (this.curMaxIdx == 0) {\n\t\t\tfor (var i=0; i<rows.length; i++) {\n\t\t\t\t\tvar cell = rows[i].cells[this.rowNumberCellIdx];\n\t\t\t\t\tif (cell) {\n\t\t\t\t\t\tvar thisIdx = Number(cell.innerHTML);\n\t\t\t\t\t\tthisIdx = isNaN(thisIdx) ? 0 : thisIdx;\n\t\t\t\t\t\tthis.curMaxIdx = Math.max(this.curMaxIdx, thisIdx);\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (rows.length > 0) {\n\t\t\t\tvar cell = rows[rows.length - 1].cells[this.rowNumberCellIdx];\n\t\t\t\tif (cell) {\n\t\t\t\t\tvar candidate = Number(cell.innerHTML);\n\t\t\t\t\tthis.curMaxIdx = (candidate > this.curMaxIdx) ? candidate : ++this.curMaxIdx;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar prevNodeName = \"\";\n\t\tif (this.tBody.rows.length > 0) {\n\t\t\tvar prevNode = this.tBody.rows[this.tBody.rows.length - 1];\n\t\t\tif (!dojo.string.isBlank(prevNode.id)) {\n\t\t\t\tprevNodeName = prevNode.id;\n\t\t\t}\n\t\t}\n\t\tprevNodeName = prevNodeName.replace(\/&apos;\/g, \"'\");\n\n\t\tvar insertBefore = false;\n\n\t\tvar me = this;\n\t\tdojo.io.bind({\n\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/APInsertRow?theme=none\"),\n\t\t\tmethod: \"post\",\n\t\t\tcontent: {appname: this.appName, rowidx: (this.curMaxIdx + 1), pivotnode: prevNodeName, insertbefore: insertBefore},\n\t\t\tmimetype: \"text\/plain\",\n\t\t\thandler: function(type, resp, e) {\n\t\t\t\tif (e) {\n\t\t\t\t\tdbg(e.responseText);\n\t\t\t\t\tdbg(\"created new row\");\n\t\t\t\t\tvar tr = me.tBody.insertRow(me.tBody.rows.length);\n\t\t\t\t\tvar div = document.createElement(\"div\");\n\t\t\t\t\tdiv.innerHTML = \"<table><tbody>\" + resp + \"<\/tbody><\/table>\";\n\t\t\t\t\tvar row = div.getElementsByTagName(\"tr\")[0];\n\t\t\t\t\tme.tBody.replaceChild(row, tr);\n\t\t\t\t\twindow.scrollTo(0, dojo.html.getAbsoluteY(row));\n\t\t\t\t\tme.singleSelectRow(row);\n\t\t\t\t\t\/\/ attempt to deal with weird \"stuck\" state in ff\n\t\t\t\t\tsetTimeout(function() {row.style.border=\"1px dotted black\";}, 10);\n\t\t\t\t\tme.pendingRowInserts--;\n\t\t\t\t}\n\t\t\t}\n\t\t});","this_variables":["curMaxIdx"]}}},"jot.widget.JotAPTable.insertRow":{"_":{"meta":{"summary":"","parameters":{"pivotRowId":{"type":""},"insertBefore":{"type":""}},"src":"\t\tvar pivotRow = document.getElementById(pivotRowId);\n\t\tif (!pivotRow) {\n\t\t\treturn false;\n\t\t}\n\t\tpivotRowId = pivotRowId.replace(\/&apos;\/g, \"'\");\n\n\t\tthis.pendingRowInserts++;\n\n\t\tvar pivotIdx = pivotRow.sectionRowIndex;\n\t\tvar insertIdx = pivotIdx;\n\t\tif (insertBefore != true) {\n\t\t\tinsertIdx = pivotIdx + 1;\n\t\t}\n\n\t\tvar me = this;\n\t\tdojo.io.bind({\n\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/APInsertRow?theme=none\"),\n\t\t\tmethod: \"post\",\n\t\t\tcontent: {appname: this.appName, rowidx: insertIdx, pivotnode: pivotRowId, insertbefore: insertBefore},\n\t\t\tmimetype: \"text\/plain\",\n\t\t\thandler: function(type, resp, e) {\n\t\t\t\tif (e) {\n\t\t\t\t\tdbg(e.responseText);\n\t\t\t\t\tdbg(\"created new row\");\n\t\t\t\t\tvar tr = me.tBody.insertRow(insertIdx);\n\t\t\t\t\t\/\/tbody.innerHTML = resp;\n\t\t\t\t\tvar div = document.createElement(\"div\");\n\t\t\t\t\tdiv.innerHTML = \"<table><tbody>\" + resp + \"<\/tbody><\/table>\";\n\t\t\t\t\tvar row = div.getElementsByTagName(\"tr\")[0];\n\t\t\t\t\tme.tBody.replaceChild(row, tr);\n\t\t\t\t\tme.pendingRowInserts--;\n\t\t\t\t\t\n\t\t\t\t\tif (me.pendingRowInserts < 1) {\n\t\t\t\t\t\tme.updateRowIndices();\n\t\t\t\t\t\twindow.scrollTo(0, dojo.html.getAbsoluteY(row));\n\t\t\t\t\t\tme.singleSelectRow(row);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});"}}},"jot.widget.JotAPTable.deleteRows":{"_":{"meta":{"summary":"","src":"\t\tthis.deleteRowDetail();\n\t\tvar rowsToDelete = this.curSelectedRows;\n\t\tvar hadSelectedRows = false;\n\t\tvar lastRowIdx = 0;\n\t\tfor (row in rowsToDelete) {\n\t\t\tvar row = rowsToDelete[row];\n\t\t\tif (row) {\n\t\t\t\tif (!dojo.string.isBlank(row.id)) {\n\t\t\t\t\thadSelectedRows = true;\n\t\t\t\t\tthis.deleteRow(row.id);\n\t\t\t\t\tlastRowIdx = row.sectionRowIndex;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\/\/ if there were no selected rows, delete the row with the navfocus\n\t\tif (!hadSelectedRows && this.navFocusCell) {\n\t\t\tvar row = dojo.html.getFirstAncestorByTag(this.navFocusCell, \"tr\");\n\t\t\tthis.deleteRow(row.id);\n\t\t}\n\t\t\n\t\t\/\/after deletion, select row below, if it exists\n\t\tvar nextGoodIdx = lastRowIdx + 1;\n\t\tif (nextGoodIdx > this.tBody.rows.length - 1) {\n\t\t\tnextGoodIdx = lastRowIdx - 1;\n\t\t}\n\t\tif (this.tBody.rows.length > 0 && nextGoodIdx < this.tBody.rows.length) {\n\t\t\tthis.selectRow(this.tBody.rows[nextGoodIdx]);\n\t\t}"}}},"jot.widget.JotAPTable.deleteRow":{"_":{"meta":{"summary":"","parameters":{"rowId":{"type":""}},"src":"\t\tshowWorkingStatus();\n\t\t++this.rowsToDelete;\n\t\tvar me = this;\n\t\tsetTimeout(function() {dojo.io.bind({\n\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/APDeleteRow?theme=none\"), \n\t\t\tmethod: \"post\",\n\t\t\tcontent: {appname: me.appName, rowname: rowId}, \n\t\t\tmimetype: \"text\/plain\", \n\t\t\thandler: function(type, resp, e) {\n\t\t\t\tvar row = dojo.byId(rowId);\n\t\t\t\tif (row) {\n\t\t\t\t\tme.unselectRow(row);\n\t\t\t\t\tdojo.dom.removeChildren(row.parentNode.removeChild(row));\n\t\t\t\t}\n\t\t\t\t--me.rowsToDelete;\n\t\t\t\tif (me.rowsToDelete == 0) { \n\t\t\t\t\tme.updateRowIndices(); \n\t\t\t\t\thideWorkingStatus();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t}, 1);"}}},"jot.widget.JotAPTable.updateRowIndices":{"_":{"meta":{"summary":"","src":"\t\tfor (var i=0; i<rows.length; i++) {\n\t\t\t\/\/second row-header column contains the row idx\n\t\t\t\trows[i].cells[me.rowNumberCellIdx].innerHTML = (rows[i].sectionRowIndex + 1);\n\t\t}"}}},"jot.widget.JotAPTable.advanceCell":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tdojo.debug(\"advanceCell\");\n\t\tvar key = evt.keyCode;\n\t\tswitch(key) {\n\t\t\tcase evt.KEY_TAB:\n\t\t\t\t\/\/ fromScript up the next one\n\t\t\t\tthis.cleanupCell(evt);\n\t\t\t\tevt.preventDefault();\n\t\t\t\t\/\/TODO: determine xy of this cell\n\t\t\t\t\/\/set the pseudo-focus to the cell x+1,y if it exists\n\t\t\t\t\/\/else set the pseudo-focus to the cell x,y\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_ENTER:\n\t\t\tcase evt.KEY_RETURN:\n\t\t\t\t\/\/ down one cell\n\t\t\t\tthis.cleanupCell(evt);\n\t\t\t\tevt.preventDefault();\n\t\t\t\tdoSave = true;\n\t\t\t\t\/\/TODO: determine xy of this cell\n\t\t\t\t\/\/set the pseudo-focus to the cell x,y+1 if it exists\n\t\t\t\t\/\/else set the pseudo-focus to the cell x,y\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_ESCAPE:\n\t\t\t\tthis.cleanupCell(evt, false);\n\t\t\t\tevt.preventDefault();\n\t\t\t\tbreak;\n\t\t}"}}},"jot.widget.JotAPTable.beginDrag":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tdocument.body.style.cursor = \"e-resize\";\n\t\tthis.resizing = true;\n\t\t\/\/remove trailing\t\"px\"\n\t\tvar leftStr = evt.target.style.left;\n\t\tthis.dragHandleStartLeft = leftStr.substring(0, leftStr.length-2) - 0;\n\n\t\tvar cols = this.tTable.getElementsByTagName(\"col\");\n\t\tvar col = cols[evt.target.colIndex];\n\t\tthis.targetCol = col;\n\n\t\tthis.targetColStartWidth = dojo.html.getInnerWidth(col);\n\n\t\tif (evt.pageX)\n\t\t\tthis.startDragX = evt.pageX;\n\t\telse if (evt.clientX)\n\t\t\tthis.startDragX = evt.clientX + document.body.scrollLeft;\n\n\t\tthis.startTableWidth = dojo.html.getInnerWidth(this.tTable);\n\t\tthis.startRowContainerWidth = dojo.html.getInnerWidth(dojo.byId(\"rows_container\"));\n\n\/\/TM\t\tthis.dragHandle = evt.target;\n\t\tthis.dragHandleNode = evt.target;\n\n\t\t\/\/ clear out width so table can expand freely\n\/\/\t\tthis.tTable.style.width = \"\";\n\n\t\tdbg(\"targetColStartWidth=\" + this.targetColStartWidth);\n\t\tdbg(\"dragHandleStartLeft=\" + this.dragHandleStartLeft);\n\t\tdbg(\"startDragX=\" + this.startDragX);\n\t\tdbg(\"target index=\" + cellIndex(evt.target));","this_variables":["resizing","dragHandleStartLeft","targetCol","targetColStartWidth","startDragX","startTableWidth","startRowContainerWidth","dragHandleNode"]}}},"jot.widget.JotAPTable.handleDrag":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tif (this.resizing != true)\n\t\t\treturn;\n\n\t\tif (document.selection) {\n\t\t\tdocument.selection.empty();\n\t\t}\n\n\t\tif (evt.pageX)\n\t\t\tcurDragX = evt.pageX;\n\t\telse if (evt.clientX)\n\t\t\tcurDragX = evt.clientX + document.body.scrollLeft;\n\n\t\tvar delta = curDragX - this.startDragX;\n\n\t\tif (this.targetColStartWidth + delta > 20) {\n\t\t\tthis.targetCol.style.width = (this.targetColStartWidth + delta) +\t\"px\";\n\n\t\t\t\/\/this.dragHandle.style.left = (this.dragHandleStartLeft + delta) +\t\"px\";\n\t\t\tthis.dragHandleNode.style.left = (this.dragHandleStartLeft + delta) +\t\"px\";\n\n\t\t\t\/\/ push beyond viewport if necc\n\t\t\tthis.tTable.style.width = (this.startTableWidth + delta) + \"px\";\n\n\t\t\tvar rc = dojo.byId(\"rows_container\");\n\t\t\tvar clientWid = document.body.clientWidth - dojo.html.getAbsoluteX(rc) - 20 \/* larger margin to the right of the table *\/;\n\t\t\tvar cDelta = this.startRowContainerWidth + delta;\n\t\t\tif (this.startTableWidth + delta < cDelta) {\n\t\t\t\tif (cDelta < clientWid) { \n\t\t\t\t\trc.style.width = cDelta + \"px\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\/*\t\t\n\t\tvar headerCells = this.tHead.getElementsByTagName(\"th\");\n\n\t\tvar rows_container = document.getElementById(\"rows_container\");\n\t\tvar containerX = dojo.html.getAbsoluteX(rows_container);\n*\/","this_variables":["targetCol.style.width","dragHandleNode.style.left","tTable.style.width"]}}},"jot.widget.JotAPTable.endDrag":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tvar wasResizing = this.resizing;\n\t\tthis.resizing = false;\n\/\/\t\tthis.dragHandle = null;\n\/\/\t\tthis.dragHandleNode = null;\n\t\tdocument.body.style.cursor = \"default\";\n\t\tif (wasResizing) {\n\t\t\t\/\/TODO: remove this and reinstitute a cleaner approach when new dnd is integrated\n\t\t\t\/\/bcs right now all mouseup events are causing the saveColWidths call\n\t\t\tsaveColWidths();\n\t\t\tthis.adjustDragResizeHandles();\n\t\t}","this_variables":["resizing"]}}},"jot.widget.JotAPTable.getCellFromChild":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\treturn dojo.html.getFirstAncestorByTag(node, \"td\");"}}},"jot.widget.JotAPTable.getRowFromChild":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\treturn dojo.html.getFirstAncestorByTag(node, \"tr\");"}}},"jot.widget.JotAPTable.createToolbar":{"_":{"meta":{"summary":"","src":"\t\tvar toolbarContainer = dojo.byId(\"toolbar_container\");\n\t\tthis.currentToolbar = dojo.widget.createWidget(\"toolbarContainer\", {}, toolbarContainer);\n\t\tthis.currentToolbar.domNode.id = \"toolbar_container\";\n\t\ttb = dojo.widget.createWidget(\"toolbar\");\n\t\tthis.currentToolbar.addChild(tb);\n\n\t\tdojo.widget.html.ColorPalette.prototype.palettes[\"Jot4x4\"] = \n\t\t\t[[\"000000\", \"800000\", \"008000\", \"000080\"], \n\t\t\t\t[\"C0C0C0\", \"FF0000\", \"00FF00\", \"0000FF\"], \n\t\t\t\t[\"808080\", \"800080\", \"808000\", \"008080\"], \n\t\t\t\t[\"FFFFFF\", \"FF00FF\", \"FFFF00\", \"00FFFF\"]];\n\n\t\tvar foreColorDialog = dojo.widget.createWidget(\"ToolbarColorDialog\", {toggleItem: true, name: \"forecolor\", icon: cmdImg(\"forecolor\"), palette: \"Jot4x4\"});\n\t\tvar backColorDialog = dojo.widget.createWidget(\"ToolbarColorDialog\", {toggleItem: true, name: \"hilitecolor\", icon: cmdImg(\"hilitecolor\"), palette: \"Jot4x4\"});\n\t\tvar commands = [\n\t\t\t{ values: [\"b_\", \"i_\", \"u_\"], toggleItem: true\t},\n\t\t\t{ values: [foreColorDialog, backColorDialog]},\n\t\t\t{ values: [\"justifyleft\", \"justifycenter\", \"justifyright\"], name: \"justify\", defaultButton: \"justifyleft\", buttonGroup: true, preventunselect: true\t}\n\/\/\t\t\t{ values: [\"j_l_\", \"j_c_\", \"j_r_\"], name: \"justify\", defaultButton: \"jl\", buttonGroup: true, preventunselect: true\t}\n\t\t];\n\n\t\tfor(var i = 0; i < commands.length; i++) {\n\t\t\tvar set = commands[i];\n\t\t\tvar values = set.values;\n\t\t\tvar btnGroup = [set.name];\n\t\t\tfor(var j = 0; j < values.length; j++) {\n\t\t\t\tif(typeof values[j] == \"string\") {\n\t\t\t\t\tvar cmd = values[j];\n\t\t\t\t\tif(set.buttonGroup) {\n\t\t\t\t\t\tbtnGroup.push(cmdImg(cmd));\n\t\t\t\t\t}\telse {\n\t\t\t\t\t\tvar btn = tb.addChild(cmdImg(cmd), null, {name:cmd, toggleItem:set.toggleItem});\n\t\t\t\t\t\tif (btn) {\n\t\t\t\t\t\t\tdojo.event.connect(btn, \"onclick\", this, \"listen\");\n\t\t\t\t\t\t\tdojo.event.connect(btn, \"onChangeSelect\", this, \"listen\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar btn = tb.addChild(values[j]);\n\t\t\t\t\tdojo.event.connect(btn, \"onSetValue\", colorListen, values[j].getName());\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(set.buttonGroup && btnGroup.length\t>\t1) {\n\t\t\t\tvar btn = tb.addChild(btnGroup, null, {defaultButton:set.defaultButton});\n\t\t\t\tif (btn) {\n\t\t\t\t\tdojo.event.connect(btn, \"onClick\", this, \"listen\");\n\t\t\t\t\tdojo.event.connect(btn, \"onChangeSelect\", this, \"listen\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(i + 1 != commands.length\n\t\t\t && !(tb.children[tb.children.length-1] instanceof dojo.widget.html.ToolbarSeparator)) {\n\t\t\t\ttb.addChild(\"|\");\n\t\t\t}\n\t\t}","this_variables":["currentToolbar","currentToolbar.domNode.id"]}}},"jot.widget.JotAPTable.listen":{"_":{"meta":{"summary":"","parameters":{"item":{"type":""}},"src":"\t\tvar on = item.isSelected();\n\t\tvar target;\n\t\tif (cmd) {\n\t\t\t\/\/ style rows\n\t\t\tvar hasSelectedRow;\n\t\t\tfor (rowId in this.curSelectedRows) {\n\t\t\t\tvar row = this.curSelectedRows[rowId];\n\t\t\t\tif (row != null) {\n\t\t\t\t\thasSelectedRow = true;\n\t\t\t\t\tfor (var i=this.firstDataCellIdx; i<row.cells.length; i++) {\n\t\t\t\t\t\tvar cell = row.cells[i];\n\t\t\t\t\t\tthis.updateToolbarStyle(cell, cmd, on);\n\t\t\t\t\t\tthis.saveCellEdit(cell);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (hasSelectedRow) { return; }\n\n\t\t\t\/\/ style cols\n\t\t\tvar rows = me.tBody.rows;\n\t\t\tvar hasSelectedCol = false;\n\t\t\tfor (var i=0; i<me.curSelectedColIndices.length; i++) {\n\t\t\t\tvar colIndex = me.curSelectedColIndices[i];\n\t\t\t\thasSelectedCol = true;\n\t\t\t\tfor (var j=0; j<rows.length; j++) {\n\t\t\t\t\tvar row = rows[j];\n\t\t\t\t\tvar cell = row.cells[colIndex];\n\t\t\t\t\tthis.updateToolbarStyle(cell, cmd, on);\n\t\t\t\t\tthis.saveCellEdit(cell);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (hasSelectedCol) { return; }\n\t\t\t\n\t\t\t\/\/ style edit area\n\t\t\tif (this.editorVisible){\n\t\t\t\ttarget = this.editor.textArea;\n\t\t\t\t\/\/not sure why just setting the class doesn't do the trick in all cases\n\t\t\t\t\/\/must be some css selection to debug\n\t\t\t\tswitch (cmd) {\n\t\t\t\tcase \"b_\":\n\t\t\t\t\ttarget.style.fontWeight = on ? \"bold\" : \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"i_\":\n\t\t\t\t\ttarget.style.fontStyle = on ? \"italic\" : \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"u_\":\n\t\t\t\t\ttarget.style.textDecoration = on ? \"underline\" : \"\";\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tthis.updateToolbarStyle(target, cmd, on);\n\t\t\t}else if (this.navFocusCell){\n\t\t\t\/\/ style nav focus cell\n\t\t\t\ttarget = this.navFocusCell;\n\t\t\t\tthis.updateToolbarStyle(target, cmd, on);\n\t\t\t\tthis.saveCellEdit(this.navFocusCell);\n\t\t\t}\n\t\t}\n\t\tthis.updateToolbar();"}}},"jot.widget.JotAPTable.updateToolbarStyle":{"_":{"meta":{"summary":"","parameters":{"target":{"type":""},"cmd":{"type":""},"on":{"type":""}},"src":"\t\tif (cmd.indexOf(\"justify\") == 0) {\n\t\t\tdbg(\"justifying... removing class\");\n\t\t\tdojo.html.removeClass(target, \"justify\", true \/* partial matches*\/);\n\t\t\tdojo.html.addClass(target, cmd); \n\t\t}\n\t\telse { \t\n\t\t\tif (on) { \n\t\t\t\tdbg(\"setting class to \" + cmd);\n\t\t\t\tdojo.html.addClass(target, cmd); \n\t\t\t} \n\t\t\telse {\n\t\t\t\tdojo.html.removeClass(target, cmd);\n\t\t\t}\n\t\t}"}}},"jot.widget.JotAPTable.updateItem":{"_":{"meta":{"summary":"","parameters":{"target":{"type":""},"item":{"type":""}},"src":"\t\ttry\t{\n\t\t\tvar cmd = item._name;\n\t\t\tvar enabled = true;\n\t\t\titem.setEnabled(enabled, false, true);\n\t\t\tif (cmd == \"justifyleft\" && target.className.indexOf(\"justify\") == -1) {\n\t\t\t\titem.setSelected(true, false, true);\n\t\t\t} else { \t\t\n\t\t\t\titem.setSelected(dojo.html.hasClass(target, cmd), false, true);\n\t\t\t}\n\t\t\treturn true;\n\t\t}\t\n\t\tcatch(err) {\n\t\t\tdbg(\"error in updateItem: \" + err);\n\t\t\tdbg(\"cmd: \" + cmd);\n\t\t\treturn false;\n\t\t}"}}},"jot.widget.JotAPTable.updateToolbar":{"_":{"meta":{"summary":"","src":"\t\tvar target;\n\t\tif ( false \/* check row select *\/ ) {\n\t\t\t;\n\t\t}\n\t\telse if (false \/* check col select *\/) {\n\t\t\t;\n\t\t}\n\t\telse if(this.editorVisible){\n\t\t\ttarget = this.editor.textArea;\n\t\t}else if(this.navFocusCell){ \n\t\t\ttarget = this.navFocusCell; \n\t\t}\n\t\tif((!target)||(!this.currentToolbar)){ return; }\n\t\t\n\t\tvar items = this.currentToolbar.getItems();\n\t\tfor (var i=0; i<items.length; i++) {\n\t\t\tvar item = items[i];\n\t\t\tif (item instanceof dojo.widget.html.ToolbarSeparator) { continue; }\n\t\t\tvar cmd = item._name;\n\t\t\tif (cmd == \"list\" || cmd == \"justify\") {\n\t\t\t\tvar items2 = item.getItems();\n\t\t\t\tfor(var j = 0; j < items2.length; j++) {\n\t\t\t\t\tthis.updateItem(target, items2[j]);\n\t\t\t\t}\n\t\t\t}\t\n\t\t\telse {\n\t\t\t\tthis.updateItem(target, item);\n\t\t\t}\n\t\t}"}}},"jot.widget.HtmlColumnDragSource":{"_":{"meta":{"summary":"","parameters":{"colHeaderNode":{"type":""},"jotTable":{"type":""}},"src":"\tthis.domNode = colHeaderNode;\n\tthis.dragHandleNode = colHeaderNode;\n\n\t\/\/ register us\n\tdojo.dnd.DragSource.call(this);\n\n\t\/\/ set properties that might have been clobbered by the mixin\n\tthis.type = \"JotHtmlColumn\";\n\n\tthis.jotTable = jotTable;","this_variables":["domNode","dragHandleNode","type","jotTable","type","colHeaderNode","domNode","acceptedTypes","jotTable"]}}},"jot.widget.HtmlColumnDragSource.onDragStart":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"","this":"jot.widget.HtmlColumnDragSource"}}},"jot.widget.HtmlColumnDragObject":{"_":{"meta":{"summary":"","parameters":{"colHeaderNode":{"type":""},"type":{"type":""}},"src":"\tjot.widget.HtmlColumnDragObject.superclass.constructor.apply(this, arguments);\n\tthis.type = type;\n\tthis.colHeaderNode = colHeaderNode;","this":"jot.widget.HtmlColumnDragSource","inherits":["dojo.dnd.HtmlDragObject"],"this_variables":["dragStartPosition","dragOffset","dragClone","dragStartPosition","dragOffset","dragClone","dragStartPosition","dragOffset","dragClone","dragClone.style.top","dragClone.style.left"]}}},"jot.widget.HtmlColumnDropTarget":{"_":{"meta":{"summary":"","parameters":{"tableNode":{"type":""},"jotTable":{"type":""}},"src":"\tjot.widget.HtmlColumnDropTarget.superclass.constructor.apply(this, arguments);\n\tthis.domNode = tableNode;\n\tdojo.dnd.DropTarget.call(this);\n\tthis.acceptedTypes = [\"JotHtmlColumn\"];\n\tthis.jotTable = jotTable;","this":"jot.widget.HtmlColumnDragSource","inherits":["dojo.dnd.HtmlDropTarget"],"this_variables":["dropIndicator","dropIndicator.style.left","dropIndicator","dropIndicator","dropIndicator","dropIndicator","dropIndicator","dropIndicator","dropIndicator","dropIndicator","dropIndicator"]}}},"jot.widget.HtmlColumnDragObject.onDragStart":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif (document.selection) { document.selection.clear(); }\n\t\telse if (window.getSelection && window.getSelection().removeAllRanges) {\n\t\t\twindow.getSelection().removeAllRanges();\n\t\t}\n\n\t\tthis.dragStartPosition = {top: dojo.html.getAbsoluteY(this.colHeaderNode),\n\t\t\tleft: dojo.html.getAbsoluteX(this.colHeaderNode)};\n\n\t\tthis.dragOffset = {top: this.dragStartPosition.top - e.clientY,\n\t\t\tleft: this.dragStartPosition.left - e.clientX};\n\n\t\tvar realTable = dojo.html.getFirstAncestorByTag(this.colHeaderNode, \"table\");\n\t\tvar table = realTable.cloneNode(false);\n\t\ttable.style.width = dojo.html.getInnerWidth(this.colHeaderNode) +\t\"px\";\n\n\t\tvar tbody = document.createElement(\"tbody\");\n\t\tvar tr = document.createElement(\"tr\");\n\n\t\tvar cloneCol = this.colHeaderNode.cloneNode(true);\n\t\tcloneCol.style.border = \"1px solid black\";\n\t\ttr.appendChild(cloneCol);\n\n\t\tvar rows = realTable.getElementsByTagName(\"tr\");\n\n\t\tfor (var i=0; i<rows.length; i++) {\n\t\t\tvar row = rows[i];\n\t\t\tif (!row) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar cell = row.cells[cellIndex(this.colHeaderNode)];\n\t\t\tif (cell) {\n\t\t\t\ttr = document.createElement(\"tr\");\n\t\t\t\tvar clone = cell.cloneNode(true);\n\t\t\t\tclone.innerHTML = clone.innerHTML + \".\";\n\t\t\t\tclone.style.border = \"1px solid black\";\n\t\t\t\tclone.style.width = this.colHeaderNode.style.width;\n\t\t\t\ttr.appendChild(cell.cloneNode(true));\n\t\t\t\ttbody.appendChild(tr);\n\t\t\t}\n\t\t}\n\t\ttable.appendChild(tbody);\n\n\t\tthis.dragClone = table;\n\n\t\t\/\/ set up for dragging\n\t\twith(this.dragClone.style){\n\t\t\tposition = \"absolute\";\n\t\t\ttop = this.dragOffset.top + e.clientY + \"px\";\n\t\t\tleft = this.dragOffset.left + e.clientY + \"px\";\n\t\t}\n\t\tdojo.html.setOpacity(this.dragClone, 0.5);\n\t\tdocument.body.appendChild(this.dragClone);","this":"jot.widget.HtmlColumnDragObject"}}},"jot.widget.HtmlColumnDragObject.top":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif (document.selection) { document.selection.clear(); }\n\t\telse if (window.getSelection && window.getSelection().removeAllRanges) {\n\t\t\twindow.getSelection().removeAllRanges();\n\t\t}\n\n\t\tthis.dragStartPosition = {top: dojo.html.getAbsoluteY(this.colHeaderNode),\n\t\t\tleft: dojo.html.getAbsoluteX(this.colHeaderNode)};\n\n\t\tthis.dragOffset = {top: this.dragStartPosition.top - e.clientY,\n\t\t\tleft: this.dragStartPosition.left - e.clientX};\n\n\t\tvar realTable = dojo.html.getFirstAncestorByTag(this.colHeaderNode, \"table\");\n\t\tvar table = realTable.cloneNode(false);\n\t\ttable.style.width = dojo.html.getInnerWidth(this.colHeaderNode) +\t\"px\";\n\n\t\tvar tbody = document.createElement(\"tbody\");\n\t\tvar tr = document.createElement(\"tr\");\n\n\t\tvar cloneCol = this.colHeaderNode.cloneNode(true);\n\t\tcloneCol.style.border = \"1px solid black\";\n\t\ttr.appendChild(cloneCol);\n\n\t\tvar rows = realTable.getElementsByTagName(\"tr\");\n\n\t\tfor (var i=0; i<rows.length; i++) {\n\t\t\tvar row = rows[i];\n\t\t\tif (!row) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar cell = row.cells[cellIndex(this.colHeaderNode)];\n\t\t\tif (cell) {\n\t\t\t\ttr = document.createElement(\"tr\");\n\t\t\t\tvar clone = cell.cloneNode(true);\n\t\t\t\tclone.innerHTML = clone.innerHTML + \".\";\n\t\t\t\tclone.style.border = \"1px solid black\";\n\t\t\t\tclone.style.width = this.colHeaderNode.style.width;\n\t\t\t\ttr.appendChild(cell.cloneNode(true));\n\t\t\t\ttbody.appendChild(tr);\n\t\t\t}\n\t\t}\n\t\ttable.appendChild(tbody);\n\n\t\tthis.dragClone = table;\n\n\t\t\/\/ set up for dragging\n\t\twith(this.dragClone.style){\n\t\t\tposition = \"absolute\";\n\t\t\ttop = this.dragOffset.top + e.clientY + \"px\";\n\t\t\tleft = this.dragOffset.left + e.clientY + \"px\";\n\t\t}\n\t\tdojo.html.setOpacity(this.dragClone, 0.5);\n\t\tdocument.body.appendChild(this.dragClone);","this":"jot.widget.HtmlColumnDragObject"}}},"jot.widget.HtmlColumnDragObject.left":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif (document.selection) { document.selection.clear(); }\n\t\telse if (window.getSelection && window.getSelection().removeAllRanges) {\n\t\t\twindow.getSelection().removeAllRanges();\n\t\t}\n\n\t\tthis.dragStartPosition = {top: dojo.html.getAbsoluteY(this.colHeaderNode),\n\t\t\tleft: dojo.html.getAbsoluteX(this.colHeaderNode)};\n\n\t\tthis.dragOffset = {top: this.dragStartPosition.top - e.clientY,\n\t\t\tleft: this.dragStartPosition.left - e.clientX};\n\n\t\tvar realTable = dojo.html.getFirstAncestorByTag(this.colHeaderNode, \"table\");\n\t\tvar table = realTable.cloneNode(false);\n\t\ttable.style.width = dojo.html.getInnerWidth(this.colHeaderNode) +\t\"px\";\n\n\t\tvar tbody = document.createElement(\"tbody\");\n\t\tvar tr = document.createElement(\"tr\");\n\n\t\tvar cloneCol = this.colHeaderNode.cloneNode(true);\n\t\tcloneCol.style.border = \"1px solid black\";\n\t\ttr.appendChild(cloneCol);\n\n\t\tvar rows = realTable.getElementsByTagName(\"tr\");\n\n\t\tfor (var i=0; i<rows.length; i++) {\n\t\t\tvar row = rows[i];\n\t\t\tif (!row) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar cell = row.cells[cellIndex(this.colHeaderNode)];\n\t\t\tif (cell) {\n\t\t\t\ttr = document.createElement(\"tr\");\n\t\t\t\tvar clone = cell.cloneNode(true);\n\t\t\t\tclone.innerHTML = clone.innerHTML + \".\";\n\t\t\t\tclone.style.border = \"1px solid black\";\n\t\t\t\tclone.style.width = this.colHeaderNode.style.width;\n\t\t\t\ttr.appendChild(cell.cloneNode(true));\n\t\t\t\ttbody.appendChild(tr);\n\t\t\t}\n\t\t}\n\t\ttable.appendChild(tbody);\n\n\t\tthis.dragClone = table;\n\n\t\t\/\/ set up for dragging\n\t\twith(this.dragClone.style){\n\t\t\tposition = \"absolute\";\n\t\t\ttop = this.dragOffset.top + e.clientY + \"px\";\n\t\t\tleft = this.dragOffset.left + e.clientY + \"px\";\n\t\t}\n\t\tdojo.html.setOpacity(this.dragClone, 0.5);\n\t\tdocument.body.appendChild(this.dragClone);","this":"jot.widget.HtmlColumnDragObject"}}},"jot.widget.HtmlColumnDragObject.onDragMove":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tthis.dragClone.style.top = this.dragOffset.top + e.clientY + \"px\";\n\t\tthis.dragClone.style.left = this.dragOffset.left + e.clientX + \"px\";","this":"jot.widget.HtmlColumnDragObject"}}},"jot.widget.HtmlColumnDragObject.onDragEnd":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tswitch(e.dragStatus){\n\t\t\tcase \"dropSuccess\":\n\t\t\t\tdojo.dom.removeNode(this.dragClone);\n\t\t\t\tbreak;\n\t\t\tcase \"dropFailure\": \/\/ slide back to the start\n\t\t\t\twith (dojo.html) {\n\t\t\t\t\tvar startCoords = [\tgetAbsoluteX(this.dragClone),\n\t\t\t\t\t\t\t\t\t\tgetAbsoluteY(this.dragClone)];\n\t\t\t\t}\n\t\t\t\t\/\/ offset the end so the effect can be seen\n\t\t\t\tvar endCoords = [this.dragStartPosition.left + 1,\n\t\t\t\t\tthis.dragStartPosition.top + 1];\n\n\t\t\t\t\/\/ animate\n\t\t\t\tvar line = new dojo.math.curves.Line(startCoords, endCoords);\n\t\t\t\tvar anim = new dojo.animation.Animation(line, 300, 0, 0);\n\t\t\t\tvar dragObject = this;\n\t\t\t\tdojo.event.connect(anim, \"onAnimate\", function(e) {\n\t\t\t\t\tdragObject.dragClone.style.left = e.x + \"px\";\n\t\t\t\t\tdragObject.dragClone.style.top = e.y + \"px\";\n\t\t\t\t});\n\t\t\t\tdojo.event.connect(anim, \"onEnd\", function (e) {\n\t\t\t\t\t\/\/ pause for a second (not literally) and disappear\n\t\t\t\t\tsetTimeout(function (){\n\t\t\t\t\t\t\/\/dojo.html.setOpacity(dragObject.dragClone, 1.0);\n\t\t\t\t\t\tdojo.dom.removeNode(dragObject.dragClone);\n\t\t\t\t\t}, 200);\n\t\t\t\t});\n\t\t\t\tanim.play();\n\t\t\t\tbreak;\n\t\t}","this":"jot.widget.HtmlColumnDragObject"}}},"jot.widget.HtmlColumnDropTarget.onDragOver":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar dos = e.dragObjects;\n\t\tif(!dos){ return false; }\n\t\tvar canDrop = false;\n\t\tvar\t_this = this;\n\t\tdojo.lang.forEach(dos, function(tdo){\n\t\t\tif((_this.acceptedTypes)&&(dojo.lang.inArray(_this.acceptedTypes, tdo.type))){\n\t\t\t\tcanDrop = true;\n\t\t\t\treturn \"break\";\n\t\t\t}\n\t\t});\n\n\t\treturn canDrop;","this":"jot.widget.HtmlColumnDropTarget"}}},"jot.widget.HtmlColumnDropTarget.onDragMove":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar mousex = e.pageX ||\te.clientX + document.body.scrollLeft;\n\n\t\t\/\/ find the child\n\n\t\t\/\/ this is where the calculation code goes to determine where to drop it\n\t\t\/\/ determine the midpoint of each column to see whether to drop left or right\n\t\tvar headerCells = this.jotTable.tHead.getElementsByTagName(\"th\");\n\t\tfor (var cellIdx=0; cellIdx<headerCells.length; cellIdx++) {\n\t\t\twith (dojo.html) {\n\t\t\t\tvar left = getAbsoluteX(headerCells[cellIdx]);\n\t\t\t\tvar right = left + getInnerWidth(headerCells[cellIdx]);\n\t\t\t\tif (mousex >= left && mousex <= right) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\/\/ if not over any of our children, just return\n\t\tif (cellIdx == headerCells.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.dropIndicator) {\n\t\t\tthis.dropIndicator = document.createElement(\"div\");\n\t\t\twith (this.dropIndicator.style) {\n\t\t\t\tposition = \"absolute\";\n\t\t\t\tbackground = \"black\";\n\t\t\t\twidth = \"1px\";\n\t\t\t\theight = dojo.html.getInnerHeight(this.domNode) +\t\"px\";\n\t\t\t\ttop = dojo.html.getAbsoluteY(this.domNode) + \"px\";\n\t\t\t}\n\t\t}\n\t\tvar midpoint = left + ((right - left) \/\t2);\n\t\tif (mousex < midpoint) {\n\t\t\tthis.dropIndicator.style.left = left + \"px\";\n\t\t}\n\t\telse {\n\t\t\tif (headerCells[cellIdx+1]) {\n\t\t\t\tthis.dropIndicator.style.left = dojo.html.getAbsoluteX(headerCells[cellIdx+1]) + \"px\";\n\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.dropIndicator.style.left = right + \"px\";\n\t\t\t}\n\t\t}\n\n\t\tif (!this.dropIndicator.parentNode) {\n\t\t\tdocument.body.appendChild(this.dropIndicator);\n\t\t}","this":"jot.widget.HtmlColumnDropTarget"}}},"jot.widget.HtmlColumnDropTarget.onDrop":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar mousex = e.pageX ||\te.clientX + document.body.scrollLeft;\n\n\t\tvar colHeaderNode = e.dragObject.colHeaderNode;\n\t\tif (colHeaderNode) {\n\t\t\t\/\/alert('found a drag object:' + colHeaderNode.dataColIndex);\n\t\t}\n\n\t\t\/\/ determine the midpoint of each column to see whether to drop left or right\n\t\tvar headerCells = this.domNode.tHead.getElementsByTagName(\"th\");\n\t\tfor (var cellIdx=0; cellIdx<headerCells.length; cellIdx++) {\n\t\t\twith (dojo.html) {\n\t\t\t\tvar left = getAbsoluteX(headerCells[cellIdx]);\n\t\t\t\tvar right = left + getInnerWidth(headerCells[cellIdx]);\n\t\t\t\tif (mousex >= left && mousex <= right) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\/\/ if not over any of our children, just return\n\t\tif (cellIdx == headerCells.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\t\/\/ commit to server\n\t\tdojo.io.bind({\n\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/APReorderColumns?theme=none\"),\n\t\t\tmethod: \"get\",\n\t\t\tcontent: {\n\t\t\t\t\tappname: this.appName,\n\t\t\t\t\tindex1: colHeaderNode.dataColIndex,\n\t\t\t\t\tindex2: cellIdx\n\t\t\t\t},\n\t\t\tmimetype: \"text\/plain\",\n\t\t\thandler: function(type, resp, e) {\n\t\t\t\tdbg(resp);\n\t\t\t}\n\t\t});\n\n\t\tvar trs = this.jotTable.domNode.getElementsByTagName(\"tr\");\n\n\t\tvar fromIdx = cellIndex(colHeaderNode);\n\t\t\/\/translate from \"relative\"\tto \"absolute\"\tcell index\n\t\tvar toIdx = cellIndex(headerCells[cellIdx]);\n\n\t\t\/\/ switch widths, as set on cols\n\t\tvar cols = this.jotTable.domNode.getElementsByTagName(\"col\");\n\t\tvar fromWidth = cols[fromIdx].style.width;\n\t\tvar toWidth = cols[toIdx].style.width;\n\t\tcols[fromIdx].style.width = toWidth;\n\t\tcols[toIdx].style.width = fromWidth;\n\n\t\t\/\/ switch all data cells\n\t\tvar midpoint = left + ((right - left) \/\t2);\n\t\tif (mousex < midpoint) {\n\t\t\t\/\/left\n\t\t\tfor (var i=0; i<trs.length; i++) {\n\t\t\t\tif (trs[i].parentNode == this.domNode.tBodies[0] ||\ttrs[i].parentNode == this.domNode.tHead) {\n\t\t\t\t\ttrs[i].insertBefore(trs[i].cells[fromIdx], trs[i].cells[toIdx]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t\/\/right\n\t\t\t\/\/dojo.dom.after(e.dragObject.domNode, headerCells[cellIdx+1]);\n\t\t\tfor (var i=0; i<trs.length; i++) {\n\t\t\t\tif (trs[i].parentNode == this.domNode.tBodies[0] ||\ttrs[i].parentNode == this.domNode.tHead) {\n\t\t\t\t\ttrs[i].insertBefore(trs[i].cells[toIdx], trs[i].cells[fromIdx]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t\/\/reset the col indices\n\t\tvar headerCells = this.jotTable.tHead.getElementsByTagName(\"th\");\n\t\tfor (var i=0; i<headerCells.length; i++) {\n\t\t\theaderCells[i].dataColIndex = i;\n\t\t}\n\n\t\t\/\/ todo: onDragOut is supposed to remove dropindicator bar, but doesn't fully do so...\n\t\tthis.onDragOut(e);\n\t\t\/\/ so...\n\t\tthis.dropIndicator = null;\n\n\t\tthis.jotTable.adjustDragResizeHandles();\n\n\t\tsaveColWidths();\n\n\t\treturn true;","this":"jot.widget.HtmlColumnDropTarget"}}},"jot.widget.HtmlColumnDropTarget.url":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar mousex = e.pageX ||\te.clientX + document.body.scrollLeft;\n\n\t\tvar colHeaderNode = e.dragObject.colHeaderNode;\n\t\tif (colHeaderNode) {\n\t\t\t\/\/alert('found a drag object:' + colHeaderNode.dataColIndex);\n\t\t}\n\n\t\t\/\/ determine the midpoint of each column to see whether to drop left or right\n\t\tvar headerCells = this.domNode.tHead.getElementsByTagName(\"th\");\n\t\tfor (var cellIdx=0; cellIdx<headerCells.length; cellIdx++) {\n\t\t\twith (dojo.html) {\n\t\t\t\tvar left = getAbsoluteX(headerCells[cellIdx]);\n\t\t\t\tvar right = left + getInnerWidth(headerCells[cellIdx]);\n\t\t\t\tif (mousex >= left && mousex <= right) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\/\/ if not over any of our children, just return\n\t\tif (cellIdx == headerCells.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\t\/\/ commit to server\n\t\tdojo.io.bind({\n\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/APReorderColumns?theme=none\"),\n\t\t\tmethod: \"get\",\n\t\t\tcontent: {\n\t\t\t\t\tappname: this.appName,\n\t\t\t\t\tindex1: colHeaderNode.dataColIndex,\n\t\t\t\t\tindex2: cellIdx\n\t\t\t\t},\n\t\t\tmimetype: \"text\/plain\",\n\t\t\thandler: function(type, resp, e) {\n\t\t\t\tdbg(resp);\n\t\t\t}\n\t\t});\n\n\t\tvar trs = this.jotTable.domNode.getElementsByTagName(\"tr\");\n\n\t\tvar fromIdx = cellIndex(colHeaderNode);\n\t\t\/\/translate from \"relative\"\tto \"absolute\"\tcell index\n\t\tvar toIdx = cellIndex(headerCells[cellIdx]);\n\n\t\t\/\/ switch widths, as set on cols\n\t\tvar cols = this.jotTable.domNode.getElementsByTagName(\"col\");\n\t\tvar fromWidth = cols[fromIdx].style.width;\n\t\tvar toWidth = cols[toIdx].style.width;\n\t\tcols[fromIdx].style.width = toWidth;\n\t\tcols[toIdx].style.width = fromWidth;\n\n\t\t\/\/ switch all data cells\n\t\tvar midpoint = left + ((right - left) \/\t2);\n\t\tif (mousex < midpoint) {\n\t\t\t\/\/left\n\t\t\tfor (var i=0; i<trs.length; i++) {\n\t\t\t\tif (trs[i].parentNode == this.domNode.tBodies[0] ||\ttrs[i].parentNode == this.domNode.tHead) {\n\t\t\t\t\ttrs[i].insertBefore(trs[i].cells[fromIdx], trs[i].cells[toIdx]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t\/\/right\n\t\t\t\/\/dojo.dom.after(e.dragObject.domNode, headerCells[cellIdx+1]);\n\t\t\tfor (var i=0; i<trs.length; i++) {\n\t\t\t\tif (trs[i].parentNode == this.domNode.tBodies[0] ||\ttrs[i].parentNode == this.domNode.tHead) {\n\t\t\t\t\ttrs[i].insertBefore(trs[i].cells[toIdx], trs[i].cells[fromIdx]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t\/\/reset the col indices\n\t\tvar headerCells = this.jotTable.tHead.getElementsByTagName(\"th\");\n\t\tfor (var i=0; i<headerCells.length; i++) {\n\t\t\theaderCells[i].dataColIndex = i;\n\t\t}\n\n\t\t\/\/ todo: onDragOut is supposed to remove dropindicator bar, but doesn't fully do so...\n\t\tthis.onDragOut(e);\n\t\t\/\/ so...\n\t\tthis.dropIndicator = null;\n\n\t\tthis.jotTable.adjustDragResizeHandles();\n\n\t\tsaveColWidths();\n\n\t\treturn true;","this":"jot.widget.HtmlColumnDropTarget"}}},"jot.widget.HtmlColumnDropTarget.method":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar mousex = e.pageX ||\te.clientX + document.body.scrollLeft;\n\n\t\tvar colHeaderNode = e.dragObject.colHeaderNode;\n\t\tif (colHeaderNode) {\n\t\t\t\/\/alert('found a drag object:' + colHeaderNode.dataColIndex);\n\t\t}\n\n\t\t\/\/ determine the midpoint of each column to see whether to drop left or right\n\t\tvar headerCells = this.domNode.tHead.getElementsByTagName(\"th\");\n\t\tfor (var cellIdx=0; cellIdx<headerCells.length; cellIdx++) {\n\t\t\twith (dojo.html) {\n\t\t\t\tvar left = getAbsoluteX(headerCells[cellIdx]);\n\t\t\t\tvar right = left + getInnerWidth(headerCells[cellIdx]);\n\t\t\t\tif (mousex >= left && mousex <= right) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\/\/ if not over any of our children, just return\n\t\tif (cellIdx == headerCells.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\t\/\/ commit to server\n\t\tdojo.io.bind({\n\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/APReorderColumns?theme=none\"),\n\t\t\tmethod: \"get\",\n\t\t\tcontent: {\n\t\t\t\t\tappname: this.appName,\n\t\t\t\t\tindex1: colHeaderNode.dataColIndex,\n\t\t\t\t\tindex2: cellIdx\n\t\t\t\t},\n\t\t\tmimetype: \"text\/plain\",\n\t\t\thandler: function(type, resp, e) {\n\t\t\t\tdbg(resp);\n\t\t\t}\n\t\t});\n\n\t\tvar trs = this.jotTable.domNode.getElementsByTagName(\"tr\");\n\n\t\tvar fromIdx = cellIndex(colHeaderNode);\n\t\t\/\/translate from \"relative\"\tto \"absolute\"\tcell index\n\t\tvar toIdx = cellIndex(headerCells[cellIdx]);\n\n\t\t\/\/ switch widths, as set on cols\n\t\tvar cols = this.jotTable.domNode.getElementsByTagName(\"col\");\n\t\tvar fromWidth = cols[fromIdx].style.width;\n\t\tvar toWidth = cols[toIdx].style.width;\n\t\tcols[fromIdx].style.width = toWidth;\n\t\tcols[toIdx].style.width = fromWidth;\n\n\t\t\/\/ switch all data cells\n\t\tvar midpoint = left + ((right - left) \/\t2);\n\t\tif (mousex < midpoint) {\n\t\t\t\/\/left\n\t\t\tfor (var i=0; i<trs.length; i++) {\n\t\t\t\tif (trs[i].parentNode == this.domNode.tBodies[0] ||\ttrs[i].parentNode == this.domNode.tHead) {\n\t\t\t\t\ttrs[i].insertBefore(trs[i].cells[fromIdx], trs[i].cells[toIdx]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t\/\/right\n\t\t\t\/\/dojo.dom.after(e.dragObject.domNode, headerCells[cellIdx+1]);\n\t\t\tfor (var i=0; i<trs.length; i++) {\n\t\t\t\tif (trs[i].parentNode == this.domNode.tBodies[0] ||\ttrs[i].parentNode == this.domNode.tHead) {\n\t\t\t\t\ttrs[i].insertBefore(trs[i].cells[toIdx], trs[i].cells[fromIdx]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t\/\/reset the col indices\n\t\tvar headerCells = this.jotTable.tHead.getElementsByTagName(\"th\");\n\t\tfor (var i=0; i<headerCells.length; i++) {\n\t\t\theaderCells[i].dataColIndex = i;\n\t\t}\n\n\t\t\/\/ todo: onDragOut is supposed to remove dropindicator bar, but doesn't fully do so...\n\t\tthis.onDragOut(e);\n\t\t\/\/ so...\n\t\tthis.dropIndicator = null;\n\n\t\tthis.jotTable.adjustDragResizeHandles();\n\n\t\tsaveColWidths();\n\n\t\treturn true;","this":"jot.widget.HtmlColumnDropTarget"}}},"jot.widget.HtmlColumnDropTarget.content":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar mousex = e.pageX ||\te.clientX + document.body.scrollLeft;\n\n\t\tvar colHeaderNode = e.dragObject.colHeaderNode;\n\t\tif (colHeaderNode) {\n\t\t\t\/\/alert('found a drag object:' + colHeaderNode.dataColIndex);\n\t\t}\n\n\t\t\/\/ determine the midpoint of each column to see whether to drop left or right\n\t\tvar headerCells = this.domNode.tHead.getElementsByTagName(\"th\");\n\t\tfor (var cellIdx=0; cellIdx<headerCells.length; cellIdx++) {\n\t\t\twith (dojo.html) {\n\t\t\t\tvar left = getAbsoluteX(headerCells[cellIdx]);\n\t\t\t\tvar right = left + getInnerWidth(headerCells[cellIdx]);\n\t\t\t\tif (mousex >= left && mousex <= right) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\/\/ if not over any of our children, just return\n\t\tif (cellIdx == headerCells.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\t\/\/ commit to server\n\t\tdojo.io.bind({\n\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/APReorderColumns?theme=none\"),\n\t\t\tmethod: \"get\",\n\t\t\tcontent: {\n\t\t\t\t\tappname: this.appName,\n\t\t\t\t\tindex1: colHeaderNode.dataColIndex,\n\t\t\t\t\tindex2: cellIdx\n\t\t\t\t},\n\t\t\tmimetype: \"text\/plain\",\n\t\t\thandler: function(type, resp, e) {\n\t\t\t\tdbg(resp);\n\t\t\t}\n\t\t});\n\n\t\tvar trs = this.jotTable.domNode.getElementsByTagName(\"tr\");\n\n\t\tvar fromIdx = cellIndex(colHeaderNode);\n\t\t\/\/translate from \"relative\"\tto \"absolute\"\tcell index\n\t\tvar toIdx = cellIndex(headerCells[cellIdx]);\n\n\t\t\/\/ switch widths, as set on cols\n\t\tvar cols = this.jotTable.domNode.getElementsByTagName(\"col\");\n\t\tvar fromWidth = cols[fromIdx].style.width;\n\t\tvar toWidth = cols[toIdx].style.width;\n\t\tcols[fromIdx].style.width = toWidth;\n\t\tcols[toIdx].style.width = fromWidth;\n\n\t\t\/\/ switch all data cells\n\t\tvar midpoint = left + ((right - left) \/\t2);\n\t\tif (mousex < midpoint) {\n\t\t\t\/\/left\n\t\t\tfor (var i=0; i<trs.length; i++) {\n\t\t\t\tif (trs[i].parentNode == this.domNode.tBodies[0] ||\ttrs[i].parentNode == this.domNode.tHead) {\n\t\t\t\t\ttrs[i].insertBefore(trs[i].cells[fromIdx], trs[i].cells[toIdx]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t\/\/right\n\t\t\t\/\/dojo.dom.after(e.dragObject.domNode, headerCells[cellIdx+1]);\n\t\t\tfor (var i=0; i<trs.length; i++) {\n\t\t\t\tif (trs[i].parentNode == this.domNode.tBodies[0] ||\ttrs[i].parentNode == this.domNode.tHead) {\n\t\t\t\t\ttrs[i].insertBefore(trs[i].cells[toIdx], trs[i].cells[fromIdx]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t\/\/reset the col indices\n\t\tvar headerCells = this.jotTable.tHead.getElementsByTagName(\"th\");\n\t\tfor (var i=0; i<headerCells.length; i++) {\n\t\t\theaderCells[i].dataColIndex = i;\n\t\t}\n\n\t\t\/\/ todo: onDragOut is supposed to remove dropindicator bar, but doesn't fully do so...\n\t\tthis.onDragOut(e);\n\t\t\/\/ so...\n\t\tthis.dropIndicator = null;\n\n\t\tthis.jotTable.adjustDragResizeHandles();\n\n\t\tsaveColWidths();\n\n\t\treturn true;","this":"jot.widget.HtmlColumnDropTarget"}}},"jot.widget.HtmlColumnDropTarget.appname":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar mousex = e.pageX ||\te.clientX + document.body.scrollLeft;\n\n\t\tvar colHeaderNode = e.dragObject.colHeaderNode;\n\t\tif (colHeaderNode) {\n\t\t\t\/\/alert('found a drag object:' + colHeaderNode.dataColIndex);\n\t\t}\n\n\t\t\/\/ determine the midpoint of each column to see whether to drop left or right\n\t\tvar headerCells = this.domNode.tHead.getElementsByTagName(\"th\");\n\t\tfor (var cellIdx=0; cellIdx<headerCells.length; cellIdx++) {\n\t\t\twith (dojo.html) {\n\t\t\t\tvar left = getAbsoluteX(headerCells[cellIdx]);\n\t\t\t\tvar right = left + getInnerWidth(headerCells[cellIdx]);\n\t\t\t\tif (mousex >= left && mousex <= right) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\/\/ if not over any of our children, just return\n\t\tif (cellIdx == headerCells.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\t\/\/ commit to server\n\t\tdojo.io.bind({\n\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/APReorderColumns?theme=none\"),\n\t\t\tmethod: \"get\",\n\t\t\tcontent: {\n\t\t\t\t\tappname: this.appName,\n\t\t\t\t\tindex1: colHeaderNode.dataColIndex,\n\t\t\t\t\tindex2: cellIdx\n\t\t\t\t},\n\t\t\tmimetype: \"text\/plain\",\n\t\t\thandler: function(type, resp, e) {\n\t\t\t\tdbg(resp);\n\t\t\t}\n\t\t});\n\n\t\tvar trs = this.jotTable.domNode.getElementsByTagName(\"tr\");\n\n\t\tvar fromIdx = cellIndex(colHeaderNode);\n\t\t\/\/translate from \"relative\"\tto \"absolute\"\tcell index\n\t\tvar toIdx = cellIndex(headerCells[cellIdx]);\n\n\t\t\/\/ switch widths, as set on cols\n\t\tvar cols = this.jotTable.domNode.getElementsByTagName(\"col\");\n\t\tvar fromWidth = cols[fromIdx].style.width;\n\t\tvar toWidth = cols[toIdx].style.width;\n\t\tcols[fromIdx].style.width = toWidth;\n\t\tcols[toIdx].style.width = fromWidth;\n\n\t\t\/\/ switch all data cells\n\t\tvar midpoint = left + ((right - left) \/\t2);\n\t\tif (mousex < midpoint) {\n\t\t\t\/\/left\n\t\t\tfor (var i=0; i<trs.length; i++) {\n\t\t\t\tif (trs[i].parentNode == this.domNode.tBodies[0] ||\ttrs[i].parentNode == this.domNode.tHead) {\n\t\t\t\t\ttrs[i].insertBefore(trs[i].cells[fromIdx], trs[i].cells[toIdx]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t\/\/right\n\t\t\t\/\/dojo.dom.after(e.dragObject.domNode, headerCells[cellIdx+1]);\n\t\t\tfor (var i=0; i<trs.length; i++) {\n\t\t\t\tif (trs[i].parentNode == this.domNode.tBodies[0] ||\ttrs[i].parentNode == this.domNode.tHead) {\n\t\t\t\t\ttrs[i].insertBefore(trs[i].cells[toIdx], trs[i].cells[fromIdx]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t\/\/reset the col indices\n\t\tvar headerCells = this.jotTable.tHead.getElementsByTagName(\"th\");\n\t\tfor (var i=0; i<headerCells.length; i++) {\n\t\t\theaderCells[i].dataColIndex = i;\n\t\t}\n\n\t\t\/\/ todo: onDragOut is supposed to remove dropindicator bar, but doesn't fully do so...\n\t\tthis.onDragOut(e);\n\t\t\/\/ so...\n\t\tthis.dropIndicator = null;\n\n\t\tthis.jotTable.adjustDragResizeHandles();\n\n\t\tsaveColWidths();\n\n\t\treturn true;","this":"jot.widget.HtmlColumnDropTarget"}}},"jot.widget.HtmlColumnDropTarget.index1":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar mousex = e.pageX ||\te.clientX + document.body.scrollLeft;\n\n\t\tvar colHeaderNode = e.dragObject.colHeaderNode;\n\t\tif (colHeaderNode) {\n\t\t\t\/\/alert('found a drag object:' + colHeaderNode.dataColIndex);\n\t\t}\n\n\t\t\/\/ determine the midpoint of each column to see whether to drop left or right\n\t\tvar headerCells = this.domNode.tHead.getElementsByTagName(\"th\");\n\t\tfor (var cellIdx=0; cellIdx<headerCells.length; cellIdx++) {\n\t\t\twith (dojo.html) {\n\t\t\t\tvar left = getAbsoluteX(headerCells[cellIdx]);\n\t\t\t\tvar right = left + getInnerWidth(headerCells[cellIdx]);\n\t\t\t\tif (mousex >= left && mousex <= right) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\/\/ if not over any of our children, just return\n\t\tif (cellIdx == headerCells.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\t\/\/ commit to server\n\t\tdojo.io.bind({\n\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/APReorderColumns?theme=none\"),\n\t\t\tmethod: \"get\",\n\t\t\tcontent: {\n\t\t\t\t\tappname: this.appName,\n\t\t\t\t\tindex1: colHeaderNode.dataColIndex,\n\t\t\t\t\tindex2: cellIdx\n\t\t\t\t},\n\t\t\tmimetype: \"text\/plain\",\n\t\t\thandler: function(type, resp, e) {\n\t\t\t\tdbg(resp);\n\t\t\t}\n\t\t});\n\n\t\tvar trs = this.jotTable.domNode.getElementsByTagName(\"tr\");\n\n\t\tvar fromIdx = cellIndex(colHeaderNode);\n\t\t\/\/translate from \"relative\"\tto \"absolute\"\tcell index\n\t\tvar toIdx = cellIndex(headerCells[cellIdx]);\n\n\t\t\/\/ switch widths, as set on cols\n\t\tvar cols = this.jotTable.domNode.getElementsByTagName(\"col\");\n\t\tvar fromWidth = cols[fromIdx].style.width;\n\t\tvar toWidth = cols[toIdx].style.width;\n\t\tcols[fromIdx].style.width = toWidth;\n\t\tcols[toIdx].style.width = fromWidth;\n\n\t\t\/\/ switch all data cells\n\t\tvar midpoint = left + ((right - left) \/\t2);\n\t\tif (mousex < midpoint) {\n\t\t\t\/\/left\n\t\t\tfor (var i=0; i<trs.length; i++) {\n\t\t\t\tif (trs[i].parentNode == this.domNode.tBodies[0] ||\ttrs[i].parentNode == this.domNode.tHead) {\n\t\t\t\t\ttrs[i].insertBefore(trs[i].cells[fromIdx], trs[i].cells[toIdx]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t\/\/right\n\t\t\t\/\/dojo.dom.after(e.dragObject.domNode, headerCells[cellIdx+1]);\n\t\t\tfor (var i=0; i<trs.length; i++) {\n\t\t\t\tif (trs[i].parentNode == this.domNode.tBodies[0] ||\ttrs[i].parentNode == this.domNode.tHead) {\n\t\t\t\t\ttrs[i].insertBefore(trs[i].cells[toIdx], trs[i].cells[fromIdx]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t\/\/reset the col indices\n\t\tvar headerCells = this.jotTable.tHead.getElementsByTagName(\"th\");\n\t\tfor (var i=0; i<headerCells.length; i++) {\n\t\t\theaderCells[i].dataColIndex = i;\n\t\t}\n\n\t\t\/\/ todo: onDragOut is supposed to remove dropindicator bar, but doesn't fully do so...\n\t\tthis.onDragOut(e);\n\t\t\/\/ so...\n\t\tthis.dropIndicator = null;\n\n\t\tthis.jotTable.adjustDragResizeHandles();\n\n\t\tsaveColWidths();\n\n\t\treturn true;","this":"jot.widget.HtmlColumnDropTarget"}}},"jot.widget.HtmlColumnDropTarget.index2":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar mousex = e.pageX ||\te.clientX + document.body.scrollLeft;\n\n\t\tvar colHeaderNode = e.dragObject.colHeaderNode;\n\t\tif (colHeaderNode) {\n\t\t\t\/\/alert('found a drag object:' + colHeaderNode.dataColIndex);\n\t\t}\n\n\t\t\/\/ determine the midpoint of each column to see whether to drop left or right\n\t\tvar headerCells = this.domNode.tHead.getElementsByTagName(\"th\");\n\t\tfor (var cellIdx=0; cellIdx<headerCells.length; cellIdx++) {\n\t\t\twith (dojo.html) {\n\t\t\t\tvar left = getAbsoluteX(headerCells[cellIdx]);\n\t\t\t\tvar right = left + getInnerWidth(headerCells[cellIdx]);\n\t\t\t\tif (mousex >= left && mousex <= right) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\/\/ if not over any of our children, just return\n\t\tif (cellIdx == headerCells.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\t\/\/ commit to server\n\t\tdojo.io.bind({\n\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/APReorderColumns?theme=none\"),\n\t\t\tmethod: \"get\",\n\t\t\tcontent: {\n\t\t\t\t\tappname: this.appName,\n\t\t\t\t\tindex1: colHeaderNode.dataColIndex,\n\t\t\t\t\tindex2: cellIdx\n\t\t\t\t},\n\t\t\tmimetype: \"text\/plain\",\n\t\t\thandler: function(type, resp, e) {\n\t\t\t\tdbg(resp);\n\t\t\t}\n\t\t});\n\n\t\tvar trs = this.jotTable.domNode.getElementsByTagName(\"tr\");\n\n\t\tvar fromIdx = cellIndex(colHeaderNode);\n\t\t\/\/translate from \"relative\"\tto \"absolute\"\tcell index\n\t\tvar toIdx = cellIndex(headerCells[cellIdx]);\n\n\t\t\/\/ switch widths, as set on cols\n\t\tvar cols = this.jotTable.domNode.getElementsByTagName(\"col\");\n\t\tvar fromWidth = cols[fromIdx].style.width;\n\t\tvar toWidth = cols[toIdx].style.width;\n\t\tcols[fromIdx].style.width = toWidth;\n\t\tcols[toIdx].style.width = fromWidth;\n\n\t\t\/\/ switch all data cells\n\t\tvar midpoint = left + ((right - left) \/\t2);\n\t\tif (mousex < midpoint) {\n\t\t\t\/\/left\n\t\t\tfor (var i=0; i<trs.length; i++) {\n\t\t\t\tif (trs[i].parentNode == this.domNode.tBodies[0] ||\ttrs[i].parentNode == this.domNode.tHead) {\n\t\t\t\t\ttrs[i].insertBefore(trs[i].cells[fromIdx], trs[i].cells[toIdx]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t\/\/right\n\t\t\t\/\/dojo.dom.after(e.dragObject.domNode, headerCells[cellIdx+1]);\n\t\t\tfor (var i=0; i<trs.length; i++) {\n\t\t\t\tif (trs[i].parentNode == this.domNode.tBodies[0] ||\ttrs[i].parentNode == this.domNode.tHead) {\n\t\t\t\t\ttrs[i].insertBefore(trs[i].cells[toIdx], trs[i].cells[fromIdx]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t\/\/reset the col indices\n\t\tvar headerCells = this.jotTable.tHead.getElementsByTagName(\"th\");\n\t\tfor (var i=0; i<headerCells.length; i++) {\n\t\t\theaderCells[i].dataColIndex = i;\n\t\t}\n\n\t\t\/\/ todo: onDragOut is supposed to remove dropindicator bar, but doesn't fully do so...\n\t\tthis.onDragOut(e);\n\t\t\/\/ so...\n\t\tthis.dropIndicator = null;\n\n\t\tthis.jotTable.adjustDragResizeHandles();\n\n\t\tsaveColWidths();\n\n\t\treturn true;","this":"jot.widget.HtmlColumnDropTarget"}}},"jot.widget.HtmlColumnDropTarget.mimetype":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar mousex = e.pageX ||\te.clientX + document.body.scrollLeft;\n\n\t\tvar colHeaderNode = e.dragObject.colHeaderNode;\n\t\tif (colHeaderNode) {\n\t\t\t\/\/alert('found a drag object:' + colHeaderNode.dataColIndex);\n\t\t}\n\n\t\t\/\/ determine the midpoint of each column to see whether to drop left or right\n\t\tvar headerCells = this.domNode.tHead.getElementsByTagName(\"th\");\n\t\tfor (var cellIdx=0; cellIdx<headerCells.length; cellIdx++) {\n\t\t\twith (dojo.html) {\n\t\t\t\tvar left = getAbsoluteX(headerCells[cellIdx]);\n\t\t\t\tvar right = left + getInnerWidth(headerCells[cellIdx]);\n\t\t\t\tif (mousex >= left && mousex <= right) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\/\/ if not over any of our children, just return\n\t\tif (cellIdx == headerCells.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\t\/\/ commit to server\n\t\tdojo.io.bind({\n\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/APReorderColumns?theme=none\"),\n\t\t\tmethod: \"get\",\n\t\t\tcontent: {\n\t\t\t\t\tappname: this.appName,\n\t\t\t\t\tindex1: colHeaderNode.dataColIndex,\n\t\t\t\t\tindex2: cellIdx\n\t\t\t\t},\n\t\t\tmimetype: \"text\/plain\",\n\t\t\thandler: function(type, resp, e) {\n\t\t\t\tdbg(resp);\n\t\t\t}\n\t\t});\n\n\t\tvar trs = this.jotTable.domNode.getElementsByTagName(\"tr\");\n\n\t\tvar fromIdx = cellIndex(colHeaderNode);\n\t\t\/\/translate from \"relative\"\tto \"absolute\"\tcell index\n\t\tvar toIdx = cellIndex(headerCells[cellIdx]);\n\n\t\t\/\/ switch widths, as set on cols\n\t\tvar cols = this.jotTable.domNode.getElementsByTagName(\"col\");\n\t\tvar fromWidth = cols[fromIdx].style.width;\n\t\tvar toWidth = cols[toIdx].style.width;\n\t\tcols[fromIdx].style.width = toWidth;\n\t\tcols[toIdx].style.width = fromWidth;\n\n\t\t\/\/ switch all data cells\n\t\tvar midpoint = left + ((right - left) \/\t2);\n\t\tif (mousex < midpoint) {\n\t\t\t\/\/left\n\t\t\tfor (var i=0; i<trs.length; i++) {\n\t\t\t\tif (trs[i].parentNode == this.domNode.tBodies[0] ||\ttrs[i].parentNode == this.domNode.tHead) {\n\t\t\t\t\ttrs[i].insertBefore(trs[i].cells[fromIdx], trs[i].cells[toIdx]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t\/\/right\n\t\t\t\/\/dojo.dom.after(e.dragObject.domNode, headerCells[cellIdx+1]);\n\t\t\tfor (var i=0; i<trs.length; i++) {\n\t\t\t\tif (trs[i].parentNode == this.domNode.tBodies[0] ||\ttrs[i].parentNode == this.domNode.tHead) {\n\t\t\t\t\ttrs[i].insertBefore(trs[i].cells[toIdx], trs[i].cells[fromIdx]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t\/\/reset the col indices\n\t\tvar headerCells = this.jotTable.tHead.getElementsByTagName(\"th\");\n\t\tfor (var i=0; i<headerCells.length; i++) {\n\t\t\theaderCells[i].dataColIndex = i;\n\t\t}\n\n\t\t\/\/ todo: onDragOut is supposed to remove dropindicator bar, but doesn't fully do so...\n\t\tthis.onDragOut(e);\n\t\t\/\/ so...\n\t\tthis.dropIndicator = null;\n\n\t\tthis.jotTable.adjustDragResizeHandles();\n\n\t\tsaveColWidths();\n\n\t\treturn true;","this":"jot.widget.HtmlColumnDropTarget"}}},"jot.widget.HtmlColumnDropTarget.handler":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar mousex = e.pageX ||\te.clientX + document.body.scrollLeft;\n\n\t\tvar colHeaderNode = e.dragObject.colHeaderNode;\n\t\tif (colHeaderNode) {\n\t\t\t\/\/alert('found a drag object:' + colHeaderNode.dataColIndex);\n\t\t}\n\n\t\t\/\/ determine the midpoint of each column to see whether to drop left or right\n\t\tvar headerCells = this.domNode.tHead.getElementsByTagName(\"th\");\n\t\tfor (var cellIdx=0; cellIdx<headerCells.length; cellIdx++) {\n\t\t\twith (dojo.html) {\n\t\t\t\tvar left = getAbsoluteX(headerCells[cellIdx]);\n\t\t\t\tvar right = left + getInnerWidth(headerCells[cellIdx]);\n\t\t\t\tif (mousex >= left && mousex <= right) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\/\/ if not over any of our children, just return\n\t\tif (cellIdx == headerCells.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\t\/\/ commit to server\n\t\tdojo.io.bind({\n\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/APReorderColumns?theme=none\"),\n\t\t\tmethod: \"get\",\n\t\t\tcontent: {\n\t\t\t\t\tappname: this.appName,\n\t\t\t\t\tindex1: colHeaderNode.dataColIndex,\n\t\t\t\t\tindex2: cellIdx\n\t\t\t\t},\n\t\t\tmimetype: \"text\/plain\",\n\t\t\thandler: function(type, resp, e) {\n\t\t\t\tdbg(resp);\n\t\t\t}\n\t\t});\n\n\t\tvar trs = this.jotTable.domNode.getElementsByTagName(\"tr\");\n\n\t\tvar fromIdx = cellIndex(colHeaderNode);\n\t\t\/\/translate from \"relative\"\tto \"absolute\"\tcell index\n\t\tvar toIdx = cellIndex(headerCells[cellIdx]);\n\n\t\t\/\/ switch widths, as set on cols\n\t\tvar cols = this.jotTable.domNode.getElementsByTagName(\"col\");\n\t\tvar fromWidth = cols[fromIdx].style.width;\n\t\tvar toWidth = cols[toIdx].style.width;\n\t\tcols[fromIdx].style.width = toWidth;\n\t\tcols[toIdx].style.width = fromWidth;\n\n\t\t\/\/ switch all data cells\n\t\tvar midpoint = left + ((right - left) \/\t2);\n\t\tif (mousex < midpoint) {\n\t\t\t\/\/left\n\t\t\tfor (var i=0; i<trs.length; i++) {\n\t\t\t\tif (trs[i].parentNode == this.domNode.tBodies[0] ||\ttrs[i].parentNode == this.domNode.tHead) {\n\t\t\t\t\ttrs[i].insertBefore(trs[i].cells[fromIdx], trs[i].cells[toIdx]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t\/\/right\n\t\t\t\/\/dojo.dom.after(e.dragObject.domNode, headerCells[cellIdx+1]);\n\t\t\tfor (var i=0; i<trs.length; i++) {\n\t\t\t\tif (trs[i].parentNode == this.domNode.tBodies[0] ||\ttrs[i].parentNode == this.domNode.tHead) {\n\t\t\t\t\ttrs[i].insertBefore(trs[i].cells[toIdx], trs[i].cells[fromIdx]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t\/\/reset the col indices\n\t\tvar headerCells = this.jotTable.tHead.getElementsByTagName(\"th\");\n\t\tfor (var i=0; i<headerCells.length; i++) {\n\t\t\theaderCells[i].dataColIndex = i;\n\t\t}\n\n\t\t\/\/ todo: onDragOut is supposed to remove dropindicator bar, but doesn't fully do so...\n\t\tthis.onDragOut(e);\n\t\t\/\/ so...\n\t\tthis.dropIndicator = null;\n\n\t\tthis.jotTable.adjustDragResizeHandles();\n\n\t\tsaveColWidths();\n\n\t\treturn true;","this":"jot.widget.HtmlColumnDropTarget"}}}}}},"dojo.widget.jot.JotAcctDetailer":{"meta":{"requires":{"common":["dojo.widget.*"]},"methods":{"jot.widget.HTMLJotAcctDetailer":{"_":{"meta":{"summary":"","src":"\tthis.widgetType = \"JotAcctDetailer\";\n\n\tthis.templatePath = dojo.uri.dojoUri(\"..\/jot\/widget\/templates\/HTMLJotAcctDetailer.html\");\n\tthis.templateCssPath = dojo.uri.dojoUri(\"..\/jot\/widget\/templates\/HTMLJotAcctDetailer.css\");\n\n\tthis.uname = \"\";\n\tthis.unameNode = null;\n\tthis.fullNameNode = null;\n\tthis.passwd1Node = null;\n\tthis.passwd2Node = null;\n\tthis.emailNode = null;\n\tthis.addrNode = null;\n\tthis.editStyleNode = null;\n\tthis.dblClickNode = null;\n\tthis.kbdShortcutsNode = null;\n\tthis.timeZoneNode = null;\n\tthis.toolbarNode = null;\n\tthis.textAreaSizeNode = null;\n\tthis.imTypeNode = null;\n\tthis.imNameNode = null;\n\tthis.dataRequestUrl = \"\";\n\n\tthis.submitForm = function(){\n\t\tvar canBind = dojo.io.bind({\n\t\t\turl: _this.uname+\".xml\",\n\t\t\tload: function(type, data, evt){\n\t\t\t\t\/\/ _this.destroy();\n\t\t\t\t_this.domNode.innerHTML = \"<em>saved<\/em>\";\n\t\t\t\tsetTimeout(dojo.lang.hitch(this, this.destroy), 1000);\n\t\t\t},\n\t\t\terror: function(type, errObj){\n\t\t\t\talert(errObj.message);\n\t\t\t}\n\t\t});\n\t\tthis.domNode.innerHTML = \"submitting...\";\n\t}\n\n\tthis.fillInValues = function(xmlDoc){\n\t\tvar parser = new dojo.xml.Parse();\n\t\tvar ds = parser.parseElement(xmlDoc.firstChild, false, false);\n\t\tvar ui = ds.content[0].data[0].userinfo[0];\n\t\t\/\/ for(var x in ui){ alert(x+\" \"+ui[x]); }\n\n\t\tif(ui[\"full_name\"]){\n\t\t\tthis.fullNameNode.value = ui.full_name[0].value;\n\t\t}\n\n\t\tif(ui[\"email\"]){\n\t\t\tthis.emailNode.value = ui.email[0].value;\n\t\t}\n\n\t\tif(ui[\"address\"]){\n\t\t\tthis.addrNode.value = ui.address[0].value;\n\t\t}\n\n\t\tif(ui[\"editpref\"]){\n\t\t\tselectOption(this.editStyleNode, ui.editpref[0].value);\n\t\t}\n\n\t\tif(ui[\"imtype\"]){\n\t\t\tselectOption(this.imTypeNode, ui.imtype[0].value);\n\t\t}\n\n\t\tif(ui[\"imname\"]){\n\t\t\tthis.imNameNode.value = ui.imname[0].value;\n\t\t}\n\n\t\tif(ui[\"timezone\"]){\n\t\t\tselectOption(this.timeZoneNode, ui.timezone[0].value);\n\t\t}\n\n\t\tif(ui[\"toolbar\"]){\n\t\t\tselectOption(this.toolbarNode, ui.toolbar[0].value);\n\t\t}\n\n\t\tif(ui[\"shortcuts\"]){\n\t\t\tselectOption(this.kbdShortcutsNode, ui.shortcuts[0].value);\n\t\t}\n\n\t\tif(ui[\"dblclickedit\"]){\n\t\t\tselectOption(this.dblClickNode, ui.dblclickedit[0].value);\n\t\t}\n\n\t\tfunction selectOption(selectElem, value){\n\t\t\tvar opts = selectElem.getElementsByTagName(\"option\");\n\t\t\tfor(var x=0; x<opts.length; x++){\n\t\t\t\tif(opts[x].value == value){\n\t\t\t\t\topts[x].selected = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.fillInTemplate = function(){\n\t\t\/\/ FIXME: need to get data and populate the form here!\n\t\tvar _this = this;\n\t\tvar canBind = dojo.io.bind({\n\t\t\turl: _this.uname+\".xml\",\n\t\t\tmimetype: \"text\/xml\",\n\t\t\tload: function(type, data, evt){\n\t\t\t\t_this.fillInValues(data);\n\t\t\t},\n\t\t\terror: function(type, errObj){\n\t\t\t\talert(errObj.message);\n\t\t\t},\n\t\t\tbackButton: function(){\n\t\t\t\t_this.destroy();\n\t\t\t}\n\t\t});\n\t}\n\n\tthis.destroyRendering = function(){\n\t\tthis.domNode.parentNode.removeChild(this.domNode);\n\t}\n\n\tthis.cleanUp = function(){ }","this_variables":["widgetType","templatePath","templateCssPath","uname","unameNode","fullNameNode","passwd1Node","passwd2Node","emailNode","addrNode","editStyleNode","dblClickNode","kbdShortcutsNode","timeZoneNode","toolbarNode","textAreaSizeNode","imTypeNode","imNameNode","dataRequestUrl","submitForm","domNode.innerHTML","fillInValues","fullNameNode.value","emailNode.value","addrNode.value","imNameNode.value","fillInTemplate","destroyRendering","cleanUp"],"inherits":["dojo.widget.HtmlWidget"]}}},"jot.widget.HTMLJotAcctDetailer.submitForm":{"_":{"meta":{"summary":"","src":"\t\tvar canBind = dojo.io.bind({\n\t\t\turl: _this.uname+\".xml\",\n\t\t\tload: function(type, data, evt){\n\t\t\t\t\/\/ _this.destroy();\n\t\t\t\t_this.domNode.innerHTML = \"<em>saved<\/em>\";\n\t\t\t\tsetTimeout(dojo.lang.hitch(this, this.destroy), 1000);\n\t\t\t},\n\t\t\terror: function(type, errObj){\n\t\t\t\talert(errObj.message);\n\t\t\t}\n\t\t});\n\t\tthis.domNode.innerHTML = \"submitting...\";","this_variables":["domNode.innerHTML"]}}},"jot.widget.HTMLJotAcctDetailer.fillInValues":{"_":{"meta":{"summary":"","parameters":{"xmlDoc":{"type":""}},"src":"\t\tvar parser = new dojo.xml.Parse();\n\t\tvar ds = parser.parseElement(xmlDoc.firstChild, false, false);\n\t\tvar ui = ds.content[0].data[0].userinfo[0];\n\t\t\/\/ for(var x in ui){ alert(x+\" \"+ui[x]); }\n\n\t\tif(ui[\"full_name\"]){\n\t\t\tthis.fullNameNode.value = ui.full_name[0].value;\n\t\t}\n\n\t\tif(ui[\"email\"]){\n\t\t\tthis.emailNode.value = ui.email[0].value;\n\t\t}\n\n\t\tif(ui[\"address\"]){\n\t\t\tthis.addrNode.value = ui.address[0].value;\n\t\t}\n\n\t\tif(ui[\"editpref\"]){\n\t\t\tselectOption(this.editStyleNode, ui.editpref[0].value);\n\t\t}\n\n\t\tif(ui[\"imtype\"]){\n\t\t\tselectOption(this.imTypeNode, ui.imtype[0].value);\n\t\t}\n\n\t\tif(ui[\"imname\"]){\n\t\t\tthis.imNameNode.value = ui.imname[0].value;\n\t\t}\n\n\t\tif(ui[\"timezone\"]){\n\t\t\tselectOption(this.timeZoneNode, ui.timezone[0].value);\n\t\t}\n\n\t\tif(ui[\"toolbar\"]){\n\t\t\tselectOption(this.toolbarNode, ui.toolbar[0].value);\n\t\t}\n\n\t\tif(ui[\"shortcuts\"]){\n\t\t\tselectOption(this.kbdShortcutsNode, ui.shortcuts[0].value);\n\t\t}\n\n\t\tif(ui[\"dblclickedit\"]){\n\t\t\tselectOption(this.dblClickNode, ui.dblclickedit[0].value);\n\t\t}\n\n\t\tfunction selectOption(selectElem, value){\n\t\t\tvar opts = selectElem.getElementsByTagName(\"option\");\n\t\t\tfor(var x=0; x<opts.length; x++){\n\t\t\t\tif(opts[x].value == value){\n\t\t\t\t\topts[x].selected = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}","this_variables":["fullNameNode.value","emailNode.value","addrNode.value","imNameNode.value"]}}},"jot.widget.HTMLJotAcctDetailer.fillInTemplate":{"_":{"meta":{"summary":"","src":"\t\tvar canBind = dojo.io.bind({\n\t\t\turl: _this.uname+\".xml\",\n\t\t\tmimetype: \"text\/xml\",\n\t\t\tload: function(type, data, evt){\n\t\t\t\t_this.fillInValues(data);\n\t\t\t},\n\t\t\terror: function(type, errObj){\n\t\t\t\talert(errObj.message);\n\t\t\t},\n\t\t\tbackButton: function(){\n\t\t\t\t_this.destroy();\n\t\t\t}\n\t\t});"}}},"jot.widget.HTMLJotAcctDetailer.destroyRendering":{"_":{"meta":{"summary":"","src":"\t\tthis.domNode.parentNode.removeChild(this.domNode);"}}},"jot.widget.HTMLJotAcctDetailer.cleanUp":{"_":{"meta":{"summary":"","src":""}}}}}},"dojo.widget.jot.JotActionDropdown":{"meta":{"requires":{"common":["dojo.string","dojo.widget.*"]},"methods":{"jot.widget.JotActionDropdown":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);","inherits":["dojo.widget.HtmlWidget"],"protovariables":{"widgetType":"","templateCssPath":""},"this_variables":["domNode"]}}},"jot.widget.JotActionDropdown.buildRendering":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tif (this.templateCssPath) { dojo.style.insertCssFile(this.templateCssPath, null, true); }\n\t\tthis.domNode = frag[\"dojo:\"+this.widgetType.toLowerCase()][\"nodeRef\"];\n\t\tdojo.html.addClass(this.domNode, \"JotActionDropdown\");\t\t\n\t\tvar opts = this.domNode.getElementsByTagName(\"option\");\n\t\tfor (var i=0; i<opts.length; i++) {\n\t\t\tvar opt = opts[i];\n\t\t\tif (opt.getAttribute(\"itemType\") == \"separator\") {\n\t\t\t\tdojo.html.addClass(opt, \"JotActionDropdownSeparator\");\n\t\t\t\topt.innerHTML = \"-----\";\n\/*\n\t\t\t\tvar div = document.createElement(\"div\");\n\t\t\t\tdojo.html.addClass(div, \"JotActionDropdownSeparator\");\n\t\t\t\topt.appendChild(div);\n*\/\n\t\t\t}\n\t\t}","this":"jot.widget.JotActionDropdown"}}},"jot.widget.JotActionDropdown.checkKeyDown":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\/*\n\t\tswitch (evt.keyCode) {\n\t\t\tcase evt.KEY_ESCAPE:\n\t\t\t\tthis.handleEsc(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_TAB:\n\t\t\t\tthis.handleTab(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_ENTER:\n\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_UP_ARROW:\n\t\t\tcase evt.KEY_RIGHT_ARROW:\n\t\t\tcase evt.KEY_DOWN_ARROW:\n\t\t\tcase evt.KEY_LEFT_ARROW:\n\t\t\t\tif (this.arrowKeysExit) {\n\t\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\t*\/","this":"jot.widget.JotActionDropdown"}}},"jot.widget.JotActionDropdown.checkOnBlur":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tdojo.debug(\"checkOnBlur\");\n\t\tthis.destroy();","this":"jot.widget.JotActionDropdown"}}},"jot.widget.JotActionDropdown.destroyRendering":{"_":{"meta":{"summary":"","src":"\t\tdojo.event.browser.clean(this.domNode);","this":"jot.widget.JotActionDropdown"}}},"jot.widget.JotActionDropdown.cancel":{"_":{"meta":{"summary":"","parameters":{"eventObj":{"type":""}},"src":"\t\tdojo.debug(\"canceling\tedit\");","this":"jot.widget.JotActionDropdown"}}},"jot.widget.JotActionDropdown.handleTab":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tdojo.debug(\"handleTab\");\n\t\tevt.stopPropagation();\n\t\tevt.preventDefault();\n\t\tthis.checkOnBlur(evt);","this":"jot.widget.JotActionDropdown"}}},"jot.widget.JotActionDropdown.handleEsc":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tthis.cancel(evt);\n\t\tthis.destroy();","this":"jot.widget.JotActionDropdown"}}}}}},"dojo.widget.jot.JotAppPubInvite":{"meta":{"requires":{"common":["dojo.widget.*","dojo.io.*","dojo.uri.*","dojo.string","dojo.html","dojo.fx.*"]},"methods":{"jot.widget.HtmlJotAppPubInvite":{"_":{"meta":{"summary":"","src":"\tjot.widget.HtmlJotAppPubInvite.superclass.constructor.call(this);\n\n\tthis.widgetType = \"JotAppPubInvite\";\n\tthis.templatePath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/JotAppPubInvite.html\");\n\tthis.templateCssPath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/JotAppPubInvite.css\");\n\n\tthis.processingText = \"Processing...\";\n\n\t\/\/ DOM nodes\n\tthis.inviteBox = null;\n\tthis.form = null;\n\tthis.email = null;\n\tthis.submitBtn = null;\n\n\tthis.visible = false;\n\tthis.toggleVisible = function(e) {\n\t\tif(!this.visible) {\n\t\t\tthis.show(e);\n\t\t} else {\n\t\t\tthis.hide(e);\n\t\t}\n\t\tif(e.preventDefault) { e.preventDefault(); }\n\t}\n\n\tthis.processing = false;\n\n\tvar _this = this;\n\n\tthis.show = function(e) {\n\t\tif(e.stopPropagation) { e.stopPropagation(); }\n\t\tvar doc = document.documentElement || document.body;\n\t\tvar width = doc.clientWidth || 99999;\n\t\tthis.inviteBox.style.display = \"block\";\n\t\tvar boxWidth = this.inviteBox.offsetWidth;\n\t\tthis.inviteBox.style.left = Math.min(width-boxWidth,\n\t\t\tdojo.html.getAbsoluteX(this.inviteBtn)\n\t\t\t+ (this.inviteBtn.offsetWidth\/2) - (boxWidth\/2) ) + \"px\";\n\t\tthis.inviteBox.style.top = dojo.html.getAbsoluteY(this.inviteBtn)\n\t\t\t+ this.inviteBtn.offsetHeight + \"px\";\n\t\tthis.form.reset();\n\t\tthis.showForm(true);\n\t\tdojo.fx.fadeShow(this.inviteBox, 200, function() {\n\t\t\t_this.email.focus();\n\t\t\t_this.visible = true;\n\t\t});\n\t\tdojo.event.connect(document.documentElement||document.body, \"onclick\",\n\t\t\tthis, \"bodyHide\");\n\t}\n\n\tthis.bodyHide = function(e) {\n\t\tif(this.processing) { return; }\n\t\tif(dojo.html.isDescendantOf(e.target, _this.inviteBox)) { return; }\n\t\tthis.hide(e);\n\t}\n\n\tthis.hide = function(e) {\n\t\tdojo.event.disconnect(document.documentElement||document.body, \"onclick\",\n\t\t\tthis, \"bodyHide\");\n\t\tdojo.fx.fadeHide(this.inviteBox, 200, function() {\n\t\t\t_this.visible = false;\n\t\t});\n\t}\n\n\tthis.onsubmit = function(e) {\n\t\tif(e.preventDefault) { e.preventDefault(); }\n\t\tthis.sendInvite();\n\t}\n\n\tthis.inviteMore = function(e) {\n\t\tif(e.preventDefault) { e.preventDefault(); }\n\t\tthis.showForm();\n\t}\n\n\tthis.showForm = function(nofocus) {\n\t\tthis.form.reset();\n\t\tthis.checkButton();\n\t\tthis.form.style.display = \"block\";\n\t\tthis.message.style.display = \"none\";\n\t\tif(!nofocus) { this.email.focus(); }\n\t}\n\n\tthis.showMessage = function() {\n\t\tthis.form.style.display = \"none\";\n\t\tthis.message.style.display = \"block\";\n\t}\n\n\tthis.setMessage = function(msg) {\n\t\tthis.response.innerHTML = msg || \"\";\n\t}\n\n\tthis.checkButton = function(e) {\n\t\tvar disable = this.processing\n\t\t\t|| dojo.string.trim(this.email.value) == dojo.string.trim(this.email.defaultValue)\n\t\t\t|| !( \/^(([\\s<]*)([^@\\s]+)@([^@\\s]+)\\.([^@\\s]+)([,\\s;><]*))+$\/.test(dojo.string.trim(this.email.value)) );\n\t\tif(disable) {\n\t\t\tdojo.html.addClass(this.submitBtn, \"disabled\");\n\t\t} else {\n\t\t\tdojo.html.removeClass(this.submitBtn, \"disabled\");\n\t\t}\n\t\tthis.submitBtn.disabled = disable;\n\t}\n\n\tthis.sendInvite = function() {\n\t\tif(this.submitBtn.disabled) { return; }\n\t\tthis.processing = true;\n\n\t\t\/\/ \"Cheap\" processing UI\n\t\tthis.submitBtn.value = this.processingText;\n\t\tthis.submitBtn.disabled = true;\n\n\t\t\/\/ begin the process!\n\t\tvar email = dojo.string.trim(this.email.value);\n\t\tvar note = dojo.string.trim(this.note.value);\n\t\tdojo.io.bind({\n\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/AppPub\/APInviteSendMail\"),\n\t\t\tcontent: {\n\t\t\t\temail: email,\n\t\t\t\tnote: note\n\t\t\t},\n\t\t\thandler: function(type, data, e) {\n\t\t\t\tif(type == \"load\") {\n\t\t\t\t\tvar response = data.match(\/<response>(.*)<\\\/response>\/i);\n\n\t\t\t\t\tif(response) {\n\t\t\t\t\t\t_this.setMessage(response[1]);\n\t\t\t\t\t\t_this.finishProcessing();\n\t\t\t\t\t} else {\n\t\t\t\t\t\talert(\"Error processing\\n\\n\" + data);\n\t\t\t\t\t\t_this.finishProcessing();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\talert(\"Error connecting to server\\n\\n\" + e.responseText);\n\t\t\t\t\t_this.finishProcessing();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tthis.finishProcessing = function() {\n\t\tthis.processing = false;\n\t\tthis.submitBtn.value = this.submitText;\n\t\tthis.showMessage();\n\t}\n\n\tthis.fillInTemplate = function(arg, frag) {\n\t\tthis.submitText = this.submitBtn.value;\n\t\tif(this.defaultNoteText) {\n\t\t\tthis.note.value = this.defaultNoteText;\n\t\t\tthis.note.defaultValue = this.note.value;\n\t\t}\n\t\tif(dojo.render.html.ie) {\n\t\t\tthis.email.defaultValue = this.email.value;\n\t\t}\n\t}\n\n\tthis.buildRendering = function(args, frag) {\n\t\tthis.nodeRef = frag[\"dojo:\"+this.widgetType.toLowerCase()][\"nodeRef\"];\n\t\tthis.inviteBtn = this.nodeRef;\n\t\tdojo.event.connect(this.inviteBtn, \"onclick\", this, \"toggleVisible\");\n\t\tdojo.widget.buildAndAttachTemplate(this);\n\t\tdocument.body.appendChild(this.inviteBox);\n\t\tthis.fillInTemplate(args, frag);\n\t}","this_variables":["widgetType","templatePath","templateCssPath","processingText","inviteBox","form","email","submitBtn","visible","toggleVisible","processing","show","inviteBox.style.display","inviteBox.style.left","inviteBox.style.top","bodyHide","hide","onsubmit","inviteMore","showForm","form.style.display","message.style.display","showMessage","setMessage","response.innerHTML","checkButton","submitBtn.disabled","sendInvite","submitBtn.value","finishProcessing","fillInTemplate","submitText","note.value","note.defaultValue","email.defaultValue","buildRendering","inviteBtn"],"inherits":["dojo.widget.HtmlWidget"]}}},"jot.widget.HtmlJotAppPubInvite.toggleVisible":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif(!this.visible) {\n\t\t\tthis.show(e);\n\t\t} else {\n\t\t\tthis.hide(e);\n\t\t}\n\t\tif(e.preventDefault) { e.preventDefault(); }"}}},"jot.widget.HtmlJotAppPubInvite.show":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif(e.stopPropagation) { e.stopPropagation(); }\n\t\tvar doc = document.documentElement || document.body;\n\t\tvar width = doc.clientWidth || 99999;\n\t\tthis.inviteBox.style.display = \"block\";\n\t\tvar boxWidth = this.inviteBox.offsetWidth;\n\t\tthis.inviteBox.style.left = Math.min(width-boxWidth,\n\t\t\tdojo.html.getAbsoluteX(this.inviteBtn)\n\t\t\t+ (this.inviteBtn.offsetWidth\/2) - (boxWidth\/2) ) + \"px\";\n\t\tthis.inviteBox.style.top = dojo.html.getAbsoluteY(this.inviteBtn)\n\t\t\t+ this.inviteBtn.offsetHeight + \"px\";\n\t\tthis.form.reset();\n\t\tthis.showForm(true);\n\t\tdojo.fx.fadeShow(this.inviteBox, 200, function() {\n\t\t\t_this.email.focus();\n\t\t\t_this.visible = true;\n\t\t});\n\t\tdojo.event.connect(document.documentElement||document.body, \"onclick\",\n\t\t\tthis, \"bodyHide\");","this_variables":["inviteBox.style.display","inviteBox.style.left","inviteBox.style.top"]}}},"jot.widget.HtmlJotAppPubInvite.bodyHide":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif(this.processing) { return; }\n\t\tif(dojo.html.isDescendantOf(e.target, _this.inviteBox)) { return; }\n\t\tthis.hide(e);"}}},"jot.widget.HtmlJotAppPubInvite.hide":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tdojo.event.disconnect(document.documentElement||document.body, \"onclick\",\n\t\t\tthis, \"bodyHide\");\n\t\tdojo.fx.fadeHide(this.inviteBox, 200, function() {\n\t\t\t_this.visible = false;\n\t\t});"}}},"jot.widget.HtmlJotAppPubInvite.onsubmit":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif(e.preventDefault) { e.preventDefault(); }\n\t\tthis.sendInvite();"}}},"jot.widget.HtmlJotAppPubInvite.inviteMore":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif(e.preventDefault) { e.preventDefault(); }\n\t\tthis.showForm();"}}},"jot.widget.HtmlJotAppPubInvite.showForm":{"_":{"meta":{"summary":"","parameters":{"nofocus":{"type":""}},"src":"\t\tthis.form.reset();\n\t\tthis.checkButton();\n\t\tthis.form.style.display = \"block\";\n\t\tthis.message.style.display = \"none\";\n\t\tif(!nofocus) { this.email.focus(); }","this_variables":["form.style.display","message.style.display"]}}},"jot.widget.HtmlJotAppPubInvite.showMessage":{"_":{"meta":{"summary":"","src":"\t\tthis.form.style.display = \"none\";\n\t\tthis.message.style.display = \"block\";","this_variables":["form.style.display","message.style.display"]}}},"jot.widget.HtmlJotAppPubInvite.setMessage":{"_":{"meta":{"summary":"","parameters":{"msg":{"type":""}},"src":"\t\tthis.response.innerHTML = msg || \"\";","this_variables":["response.innerHTML"]}}},"jot.widget.HtmlJotAppPubInvite.checkButton":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar disable = this.processing\n\t\t\t|| dojo.string.trim(this.email.value) == dojo.string.trim(this.email.defaultValue)\n\t\t\t|| !( \/^(([\\s<]*)([^@\\s]+)@([^@\\s]+)\\.([^@\\s]+)([,\\s;><]*))+$\/.test(dojo.string.trim(this.email.value)) );\n\t\tif(disable) {\n\t\t\tdojo.html.addClass(this.submitBtn, \"disabled\");\n\t\t} else {\n\t\t\tdojo.html.removeClass(this.submitBtn, \"disabled\");\n\t\t}\n\t\tthis.submitBtn.disabled = disable;","this_variables":["submitBtn.disabled"]}}},"jot.widget.HtmlJotAppPubInvite.sendInvite":{"_":{"meta":{"summary":"","src":"\t\tif(this.submitBtn.disabled) { return; }\n\t\tthis.processing = true;\n\n\t\t\/\/ \"Cheap\" processing UI\n\t\tthis.submitBtn.value = this.processingText;\n\t\tthis.submitBtn.disabled = true;\n\n\t\t\/\/ begin the process!\n\t\tvar email = dojo.string.trim(this.email.value);\n\t\tvar note = dojo.string.trim(this.note.value);\n\t\tdojo.io.bind({\n\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/AppPub\/APInviteSendMail\"),\n\t\t\tcontent: {\n\t\t\t\temail: email,\n\t\t\t\tnote: note\n\t\t\t},\n\t\t\thandler: function(type, data, e) {\n\t\t\t\tif(type == \"load\") {\n\t\t\t\t\tvar response = data.match(\/<response>(.*)<\\\/response>\/i);\n\n\t\t\t\t\tif(response) {\n\t\t\t\t\t\t_this.setMessage(response[1]);\n\t\t\t\t\t\t_this.finishProcessing();\n\t\t\t\t\t} else {\n\t\t\t\t\t\talert(\"Error processing\\n\\n\" + data);\n\t\t\t\t\t\t_this.finishProcessing();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\talert(\"Error connecting to server\\n\\n\" + e.responseText);\n\t\t\t\t\t_this.finishProcessing();\n\t\t\t\t}\n\t\t\t}\n\t\t});","this_variables":["processing","submitBtn.value","submitBtn.disabled"]}}},"jot.widget.HtmlJotAppPubInvite.finishProcessing":{"_":{"meta":{"summary":"","src":"\t\tthis.processing = false;\n\t\tthis.submitBtn.value = this.submitText;\n\t\tthis.showMessage();","this_variables":["processing","submitBtn.value"]}}},"jot.widget.HtmlJotAppPubInvite.fillInTemplate":{"_":{"meta":{"summary":"","parameters":{"arg":{"type":""},"frag":{"type":""}},"src":"\t\tthis.submitText = this.submitBtn.value;\n\t\tif(this.defaultNoteText) {\n\t\t\tthis.note.value = this.defaultNoteText;\n\t\t\tthis.note.defaultValue = this.note.value;\n\t\t}\n\t\tif(dojo.render.html.ie) {\n\t\t\tthis.email.defaultValue = this.email.value;\n\t\t}","this_variables":["submitText","note.value","note.defaultValue","email.defaultValue"]}}},"jot.widget.HtmlJotAppPubInvite.buildRendering":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tthis.nodeRef = frag[\"dojo:\"+this.widgetType.toLowerCase()][\"nodeRef\"];\n\t\tthis.inviteBtn = this.nodeRef;\n\t\tdojo.event.connect(this.inviteBtn, \"onclick\", this, \"toggleVisible\");\n\t\tdojo.widget.buildAndAttachTemplate(this);\n\t\tdocument.body.appendChild(this.inviteBox);\n\t\tthis.fillInTemplate(args, frag);","this_variables":["inviteBtn"]}}}}}},"dojo.widget.jot.JotCalendar":{"meta":{"requires":{"common":["dojo.widget.*","jot.widget.JotCorkboardUtil"]},"methods":{"jot.widget.HTMLJotCalendar":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\n\t\/\/ you should be able to drag individual items out of here and drop them on\n\t\/\/ other things to set dates on them!\n\t\/\/dojo.webui.DragSource.call(this);\n\n\t\/\/ and you should also be able to drop the item on the calendar to do the\n\t\/\/ same thing\n\t\/\/dojo.webui.DropTarget.call(this);\n\n\tthis.acceptedTypes = [\"JotNodeItem\"];\n\n\tthis.templatePath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/JotCalendar.html\");\n\tthis.templateCssPath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/JotCalendar.css\");\n\n\t\/\/ DOM elements\n\tthis.daysRow = null;\n\tthis.monthNameRow = null;\n\tthis.monthName = null;\n\tthis.calendarBody = null;\n\tthis.calendarHead = null;\n\tthis.calendarDay = null;\n\tthis.weekRow = null;\n\n\tvar _selecting = false;\n\n\t\/\/ widget properties\n\tthis.widgetType = \"JotCalendar\";\n\tthis.dataUrl = \"\";\n\tthis.isContainer = false;\n\tthis.weekStartDay = 0;\n\tthis.month = jot.cbUtil.month;\n\tthis.year = jot.cbUtil.year;\n\tthis.dayNodes = [];\n\tthis.dayTdNodes = [];\n\n\t\/\/ normal widget methods\n\n\tthis.fillInTemplate = function(){\n\t\t\/\/ basic widget creation code\n\t\tvar ths = this.daysRow.getElementsByTagName(\"th\");\n\t\tfor(var x=0; x<jot.cbUtil.shortWeekdays.length; x++){\n\t\t\tths[x+1].appendChild(document.createTextNode(jot.cbUtil.shortWeekdays[x]));\n\t\t}\n\n\t\tthis.monthName.innerHTML = jot.cbUtil.getMonthName(this.month);\n\t\tvar msd = jot.cbUtil.getMonthStartDay(this.month, this.year);\n\t\tvar mlen = jot.cbUtil.getNumDays(this.month, this.year);\n\t\tvar wday = 0;\n\t\tvar cday = 1;\n\n\t\tvar cWeekNode = this.weekRow.cloneNode(true);\n\t\tthis.calendarBody.appendChild(cWeekNode);\n\t\tvar tds = cWeekNode.getElementsByTagName(\"td\");\n\t\tfor(var x=0; x<msd; x++){\n\t\t\twday++;\n\t\t\tdojo.xml.htmlUtil.setClass(tds[x+1], \"fillerDay\");\n\t\t}\n\t\tfor(var x=0; x<mlen; x++){\n\t\t\tif(wday>=7){\n\t\t\t\tcWeekNode = this.weekRow.cloneNode(true);\n\t\t\t\tthis.calendarBody.appendChild(cWeekNode);\n\t\t\t\t\/\/ can't assign to this on IE before we append to the visible doc\n\t\t\t\ttds = cWeekNode.getElementsByTagName(\"td\");\n\t\t\t\twday = 0;\n\t\t\t}\n\t\t\tvar tday = this.calendarDay.cloneNode(true);\n\t\t\ttds[wday+1].appendChild(tday);\n\t\t\tthis.dayTdNodes[cday] = tds[wday+1];\n\t\t\tthis.dayNodes[cday] = tday;\n\t\t\ttday.innerHTML = cday;\n\t\t\twday++; cday++;\n\t\t}\n\t\tfor(var x=wday; x<7; x++){\n\t\t\tdojo.xml.htmlUtil.setClass(tds[x+1], \"fillerDay\");\n\t\t}\n\t}\n\n\tthis.getDayFromNode = function(node){\n\t\tfor(var x=0; x<this.dayTdNodes.length; x++){\n\t\t\tif(dojo.xml.domUtil.isChildOf(node, this.dayTdNodes[x])){\n\t\t\t\treturn x;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tthis.startSelection = function(evt){\n\t\t\/\/ dj_debug(evt.shiftKey);\n\t\t_selecting = true;\n\t}\n\n\tthis.endSelection = function(evt){\n\t\t_selecting = false;\n\t}\n\n\t\/\/ drag and drop methods\n\tthis.setSelected = function(evt){\n\t\tvar dfe = this.getDateFromEvt(evt);\n\t\tif(dfe){\n\t\t\tthis.selection.add(dfe, \"date\");\n\t\t}\n\t}\n\n\tthis.getDateFromEvt = function(evt){\n\t\tvar ed = this.getDayFromNode(evt.target);\n\t\tif(ed){\n\t\t\tvar nd = new Date(this.year, this.month-1, ed);\n\t\t\t\/\/ dj_debug(nd);\n\t\t\treturn nd;\n\t\t}\n\t\treturn null;\n\t}\n\n\tthis.getDragIcon = function(){\n\t\tvar dc = document.createElement(\"span\");\n\t\twith(dc.style){\n\t\t\tfontSize = \"0.8em\";\n\t\t}\n\t\tvar sel = this.selection.getSelected();\n\t\tfor(var x=0; x<sel.length; x++){\n\t\t\tdc.appendChild(document.createElement(\"div\"));\n\t\t\tvar sv = sel[x].value;\n\t\t\tdc.lastChild.innerHTML = jot.cbUtil.months[sv.getMonth()]+\" \"+sv.getDate()+\", \"+sv.getFullYear();\n\t\t}\n\t\treturn dc;\n\t}\n\n\tthis.startDrag = function(){\n\t\tdojo.xml.htmlUtil.disableSelect();\n\t}\n\n\tthis.endDrag = function(){\n\t\tdojo.xml.htmlUtil.enableSelect();\n\t}\n\n\n\t\/\/ FIXME: need to make a drag source and a drop target!","this_variables":["acceptedTypes","templatePath","templateCssPath","daysRow","monthNameRow","monthName","calendarBody","calendarHead","calendarDay","weekRow","widgetType","dataUrl","isContainer","weekStartDay","month","year","dayNodes","dayTdNodes","fillInTemplate","monthName.innerHTML","getDayFromNode","startSelection","endSelection","setSelected","getDateFromEvt","getDragIcon","startDrag","endDrag"],"inherits":["dojo.widget.HtmlWidget"]}}},"jot.widget.HTMLJotCalendar.fillInTemplate":{"_":{"meta":{"summary":"","src":"\t\tfor(var x=0; x<jot.cbUtil.shortWeekdays.length; x++){\n\t\t\tths[x+1].appendChild(document.createTextNode(jot.cbUtil.shortWeekdays[x]));\n\t\t}\n\n\t\tthis.monthName.innerHTML = jot.cbUtil.getMonthName(this.month);\n\t\tvar msd = jot.cbUtil.getMonthStartDay(this.month, this.year);\n\t\tvar mlen = jot.cbUtil.getNumDays(this.month, this.year);\n\t\tvar wday = 0;\n\t\tvar cday = 1;\n\n\t\tvar cWeekNode = this.weekRow.cloneNode(true);\n\t\tthis.calendarBody.appendChild(cWeekNode);\n\t\tvar tds = cWeekNode.getElementsByTagName(\"td\");\n\t\tfor(var x=0; x<msd; x++){\n\t\t\twday++;\n\t\t\tdojo.xml.htmlUtil.setClass(tds[x+1], \"fillerDay\");\n\t\t}\n\t\tfor(var x=0; x<mlen; x++){\n\t\t\tif(wday>=7){\n\t\t\t\tcWeekNode = this.weekRow.cloneNode(true);\n\t\t\t\tthis.calendarBody.appendChild(cWeekNode);\n\t\t\t\t\/\/ can't assign to this on IE before we append to the visible doc\n\t\t\t\ttds = cWeekNode.getElementsByTagName(\"td\");\n\t\t\t\twday = 0;\n\t\t\t}\n\t\t\tvar tday = this.calendarDay.cloneNode(true);\n\t\t\ttds[wday+1].appendChild(tday);\n\t\t\tthis.dayTdNodes[cday] = tds[wday+1];\n\t\t\tthis.dayNodes[cday] = tday;\n\t\t\ttday.innerHTML = cday;\n\t\t\twday++; cday++;\n\t\t}\n\t\tfor(var x=wday; x<7; x++){\n\t\t\tdojo.xml.htmlUtil.setClass(tds[x+1], \"fillerDay\");\n\t\t}","this_variables":["monthName.innerHTML"]}}},"jot.widget.HTMLJotCalendar.getDayFromNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tfor(var x=0; x<this.dayTdNodes.length; x++){\n\t\t\tif(dojo.xml.domUtil.isChildOf(node, this.dayTdNodes[x])){\n\t\t\t\treturn x;\n\t\t\t}\n\t\t}\n\t\treturn null;"}}},"jot.widget.HTMLJotCalendar.startSelection":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":""}}},"jot.widget.HTMLJotCalendar.endSelection":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t_selecting = false;"}}},"jot.widget.HTMLJotCalendar.setSelected":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tvar dfe = this.getDateFromEvt(evt);\n\t\tif(dfe){\n\t\t\tthis.selection.add(dfe, \"date\");\n\t\t}"}}},"jot.widget.HTMLJotCalendar.getDateFromEvt":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tvar ed = this.getDayFromNode(evt.target);\n\t\tif(ed){\n\t\t\tvar nd = new Date(this.year, this.month-1, ed);\n\t\t\t\/\/ dj_debug(nd);\n\t\t\treturn nd;\n\t\t}\n\t\treturn null;"}}},"jot.widget.HTMLJotCalendar.getDragIcon":{"_":{"meta":{"summary":"","src":"\t\tvar dc = document.createElement(\"span\");\n\t\twith(dc.style){\n\t\t\tfontSize = \"0.8em\";\n\t\t}\n\t\tvar sel = this.selection.getSelected();\n\t\tfor(var x=0; x<sel.length; x++){\n\t\t\tdc.appendChild(document.createElement(\"div\"));\n\t\t\tvar sv = sel[x].value;\n\t\t\tdc.lastChild.innerHTML = jot.cbUtil.months[sv.getMonth()]+\" \"+sv.getDate()+\", \"+sv.getFullYear();\n\t\t}\n\t\treturn dc;"}}},"jot.widget.HTMLJotCalendar.startDrag":{"_":{"meta":{"summary":"","src":"\t\tdojo.xml.htmlUtil.disableSelect();"}}},"jot.widget.HTMLJotCalendar.endDrag":{"_":{"meta":{"summary":"","src":"\t\tdojo.xml.htmlUtil.enableSelect();"}}}}}},"dojo.widget.jot.JotCalendarContainer":{"meta":{"requires":{"common":["dojo.widget.*","jot.widget.JotCalendar","dojo.graphics.htmlEffects"]},"methods":{"jot.widget.HTMLJotCalendarContainer":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\n\tthis.templatePath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/JotCalendarContainer.html\");\n\tthis.cssPathBackup = this.templateCssPath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/JotCalendarContainer.css\");\n\n\t\/\/ widget properties\n\tthis.calItemContainer = null; \/\/ node ref\n\tthis.container = null;\n\tthis.yearNode = null;\n\tthis.widgetType = \"JotCalendarContainer\";\n\tthis.dataUrl = \"\";\n\tthis.isContainer = true;\n\n\tvar now = new Date();\n\tnowMonth = now.getMonth()+1;\n\tnowYear = now.getFullYear();\n\n\tthis.month = nowMonth;\n\tthis.year = nowYear;\n\n\tthis.calendarWidth = 120;\n\tthis.calendarHeight = 120;\n\tthis.padding = 10; \/\/ space between calendars\n\tthis.calendars = {};\n\n\tthis.getMonthInfo = function(monthNo, yearNo) {\n\t\tvar dmonth = monthNo - nowMonth;\n\t\tvar dyear = yearNo - nowYear;\n\t\tvar w = this.calendarWidth;\n\t\tvar h = this.calendarHeight;\n\t\treturn {\n\t\t\tx : dmonth * (w + this.padding) - (w\/2),\n\t\t\ty : dyear * (h + this.padding),\n\t\t\tw: w,\n\t\t\th: h\n\t\t}\n\t}\n\n\tthis.getMonth = function(monthNo, yearNo){\n\t\tmonthNo = monthNo||this.month;\n\t\tyearNo = yearNo||this.year;\n\t\tvar calId = monthNo+\"\"+yearNo;\n\t\tif(this.calendars[calId]) { return this.calendars[calId]; }\n\n\t\tvar nodeRef = document.createElement(\"span\");\n\t\tthis.container.appendChild(nodeRef);\n\t\tvar cal = dojo.widget.fromScript(\"JotCalendar\", {\n\t\t\tmonth: monthNo,\n\t\t\tyear: yearNo\n\t\t}, nodeRef);\n\t\tthis.calendars[calId] = cal;\n\n\t\tvar node = cal[\"domNode\"];\n\t\tvar pos = this.getMonthInfo(monthNo, yearNo);\n\t\twith(node.style) {\n\t\t\tleft = pos.x + \"px\";\n\t\t\ttop = pos.y + \"px\";\n\t\t}\n\t\treturn cal;\n\t}\n\n\tthis.showMonth = function(monthNo, yearNo) {\n\t\tmonthNo = monthNo||this.month;\n\t\tyearNo = yearNo||this.year;\n\t\tif(monthNo == this.month && yearNo == this.year && this.calendars[monthNo+\"\"+yearNo]) { return; }\n\n\t\tif(monthNo-1 < 1) {\n\t\t\tthis.getMonth(12, yearNo-1);\n\t\t} else {\n\t\t\tthis.getMonth(monthNo-1, yearNo);\n\t\t}\n\t\tvar newMonth = this.getMonth(monthNo, yearNo);\n\t\tif(monthNo+1 > 12) {\n\t\t\tthis.getMonth(1, yearNo+1);\n\t\t} else {\n\t\t\tthis.getMonth(monthNo+1, yearNo);\n\t\t}\n\n\t\tif(this.container.offsetWidth != 0) {\n\t\t\tvar newPos = this.getMonthInfo(monthNo, yearNo);\n\t\t\tvar currPos = this.getMonthInfo(this.month, this.year);\n\t\t\tvar pos = [currPos.x-newPos.x, currPos.y-newPos.y];\n\t\t\tvar time = (monthNo != this.month && yearNo != this.year) ? 1 : 300;\n\t\t\tdojo.graphics.htmlEffects.slideBy(this.container, pos, time);\n\t\t}\n\t\tthis.month = monthNo;\n\t\tthis.year = yearNo;\n\t\tthis.yearNode.innerHTML = this.year;\n\t}\n\n\tthis.fillInTemplate = function(){\n\t\tthis.showMonth();\n\t}\n\n\tthis.moveNextMonth = function(){\n\t\tvar month = this.month+1;\n\t\tvar year = this.year;\n\t\tif(month>12) {\n\t\t\tmonth = 1;\n\t\t\tyear++;\n\t\t}\n\t\tthis.showMonth(month, year);\n\t}\n\n\tthis.movePreviousMonth = function(){\n\t\tvar month = this.month-1;\n\t\tvar year = this.year;\n\t\tif(month<1) {\n\t\t\tmonth = 12;\n\t\t\tyear--;\n\t\t}\n\t\tthis.showMonth(month, year);\n\t}\n\n\tthis.moveNextYear = function(){\n\t\tthis.showMonth(this.month, this.year+1);\n\t}\n\n\tthis.movePreviousYear = function(){\n\t\tthis.showMonth(this.month, this.year-1);\n\t}","this_variables":["templatePath","cssPathBackup","calItemContainer","container","yearNode","widgetType","dataUrl","isContainer","month","year","calendarWidth","calendarHeight","padding","calendars","getMonthInfo","getMonth","showMonth","yearNode.innerHTML","fillInTemplate","moveNextMonth","movePreviousMonth","moveNextYear","movePreviousYear"],"inherits":["dojo.widget.HtmlWidget"]}}},"jot.widget.HTMLJotCalendarContainer.getMonthInfo":{"_":{"meta":{"summary":"","parameters":{"monthNo":{"type":""},"yearNo":{"type":""}},"src":"\t\tvar dmonth = monthNo - nowMonth;\n\t\tvar dyear = yearNo - nowYear;\n\t\tvar w = this.calendarWidth;\n\t\tvar h = this.calendarHeight;\n\t\treturn {\n\t\t\tx : dmonth * (w + this.padding) - (w\/2),\n\t\t\ty : dyear * (h + this.padding),\n\t\t\tw: w,\n\t\t\th: h\n\t\t}"}}},"jot.widget.HTMLJotCalendarContainer.getMonth":{"_":{"meta":{"summary":"","parameters":{"monthNo":{"type":""},"yearNo":{"type":""}},"src":"\t\tmonthNo = monthNo||this.month;\n\t\tyearNo = yearNo||this.year;\n\t\tvar calId = monthNo+\"\"+yearNo;\n\t\tif(this.calendars[calId]) { return this.calendars[calId]; }\n\n\t\tvar nodeRef = document.createElement(\"span\");\n\t\tthis.container.appendChild(nodeRef);\n\t\tvar cal = dojo.widget.fromScript(\"JotCalendar\", {\n\t\t\tmonth: monthNo,\n\t\t\tyear: yearNo\n\t\t}, nodeRef);\n\t\tthis.calendars[calId] = cal;\n\n\t\tvar node = cal[\"domNode\"];\n\t\tvar pos = this.getMonthInfo(monthNo, yearNo);\n\t\twith(node.style) {\n\t\t\tleft = pos.x + \"px\";\n\t\t\ttop = pos.y + \"px\";\n\t\t}\n\t\treturn cal;"}}},"jot.widget.HTMLJotCalendarContainer.showMonth":{"_":{"meta":{"summary":"","parameters":{"monthNo":{"type":""},"yearNo":{"type":""}},"src":"\t\tmonthNo = monthNo||this.month;\n\t\tyearNo = yearNo||this.year;\n\t\tif(monthNo == this.month && yearNo == this.year && this.calendars[monthNo+\"\"+yearNo]) { return; }\n\n\t\tif(monthNo-1 < 1) {\n\t\t\tthis.getMonth(12, yearNo-1);\n\t\t} else {\n\t\t\tthis.getMonth(monthNo-1, yearNo);\n\t\t}\n\t\tvar newMonth = this.getMonth(monthNo, yearNo);\n\t\tif(monthNo+1 > 12) {\n\t\t\tthis.getMonth(1, yearNo+1);\n\t\t} else {\n\t\t\tthis.getMonth(monthNo+1, yearNo);\n\t\t}\n\n\t\tif(this.container.offsetWidth != 0) {\n\t\t\tvar newPos = this.getMonthInfo(monthNo, yearNo);\n\t\t\tvar currPos = this.getMonthInfo(this.month, this.year);\n\t\t\tvar pos = [currPos.x-newPos.x, currPos.y-newPos.y];\n\t\t\tvar time = (monthNo != this.month && yearNo != this.year) ? 1 : 300;\n\t\t\tdojo.graphics.htmlEffects.slideBy(this.container, pos, time);\n\t\t}\n\t\tthis.month = monthNo;\n\t\tthis.year = yearNo;\n\t\tthis.yearNode.innerHTML = this.year;","this_variables":["month","year","yearNode.innerHTML"]}}},"jot.widget.HTMLJotCalendarContainer.fillInTemplate":{"_":{"meta":{"summary":"","src":"\t\tthis.showMonth();"}}},"jot.widget.HTMLJotCalendarContainer.moveNextMonth":{"_":{"meta":{"summary":"","src":"\t\tvar month = this.month+1;\n\t\tvar year = this.year;\n\t\tif(month>12) {\n\t\t\tmonth = 1;\n\t\t\tyear++;\n\t\t}\n\t\tthis.showMonth(month, year);"}}},"jot.widget.HTMLJotCalendarContainer.movePreviousMonth":{"_":{"meta":{"summary":"","src":"\t\tvar month = this.month-1;\n\t\tvar year = this.year;\n\t\tif(month<1) {\n\t\t\tmonth = 12;\n\t\t\tyear--;\n\t\t}\n\t\tthis.showMonth(month, year);"}}},"jot.widget.HTMLJotCalendarContainer.moveNextYear":{"_":{"meta":{"summary":"","src":"\t\tthis.showMonth(this.month, this.year+1);"}}},"jot.widget.HTMLJotCalendarContainer.movePreviousYear":{"_":{"meta":{"summary":"","src":"\t\tthis.showMonth(this.month, this.year-1);"}}}}}},"dojo.widget.jot.JotCellEditor":{"meta":{"requires":{"common":["dojo.string","dojo.widget.*"]},"methods":{"jot.widget.JotCellEditor":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);","inherits":["dojo.widget.HtmlWidget"],"protovariables":{"widgetType":"","_initialContent":"","_initialClass":"","editorContainer":"","textArea":"","selectAll":"","cozyUpToParent":"","minWidth":"","minHeight":"","arrowKeysExit":"","cloneClasses":"","clonedStyles":"","templatePath":"","templateCssPath":""},"this_variables":["selectAll","domNode","domNode.innerHTML","textArea.value","textArea.style.width","textArea.style.height","domNode.style.textAlign","domNode.style.verticalAlign","textArea.style.marginLeft","textArea.style.marginTop","textArea.style.paddingLeft","textArea.style.paddingTop","_initialClass","domNode.innerHTML","editorContainer","domNode.style.textAlign","domNode.style.verticalAlign"]}}},"jot.widget.JotCellEditor.fillInTemplate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tthis.selectAll = args.selectAll;\n\n\t\t\/\/ NOTE: we\tdon't\twant to\treplace\tour\t<td>,\twe want\tto extend\tit\n\t\tthis.domNode = frag[\"dojo:\"+this.widgetType.toLowerCase()][\"nodeRef\"];\n\t\tdojo.html.addClass(this.domNode, \"JotCellEditor\");\t\t\n\t\tvar iv;\n\t\tif(this.domNode.innerHTML == \"&nbsp;\"){\n\t\t\tiv = \"\";\n\t\t}else{\n\t\t\tiv = dojo.string.trim(dojo.dom.textContent(this.domNode));\n\t\t}\n\t\tthis.textArea.value\t= this._initialContent = iv;\n\t\tdojo.lang.forEach(this.clonedStyles, \n\t\t\tdojo.lang.hitch(this,\n\t\t\t\tfunction(prop){\n\t\t\t\t\tvar\tcc = dojo.style.toCamelCase(prop);\n\t\t\t\t\t\/\/ dojo.debug(prop,\t\":\", cc);\n\t\t\t\t\tthis.textArea.style[cc]\t=\tdojo.style.getStyle(this.domNode,\tprop);\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tvar taw = Math.max(dojo.html.getInnerWidth(this.domNode), this.minWidth);\n\t\tvar tah = Math.max(dojo.html.getInnerHeight(this.domNode), this.minHeight);\n\t\tthis.textArea.style.width = taw + \"px\";\n\t\tthis.textArea.style.height = tah + \"px\";\n\t\tthis.domNode.style.textAlign = \"left\";\n\t\tthis.domNode.style.verticalAlign = \"top\";\n\t\tvar getDimension = dojo.lang.hitch(this, function(){\n\t\t\tvar ret = 0;\n\t\t\tfor(var x=0; x < arguments.length; x++){\n\t\t\t\tvar tmp = dojo.style.getPixelValue(this.domNode, arguments[x], false);\n\t\t\t\tret+= isNaN(tmp) ? 0 : tmp;\n\t\t\t}\n\t\t\treturn ret;\n\t\t});\n\t\tif(!dojo.render.html.safari){\n\t\t\tif(this.cozyUpToParent){\n\t\t\t\tthis.textArea.style.marginLeft = \"-\" + getDimension(\"padding-left\", \"margin-left\", \"border-left-width\") + \"px\";\n\t\t\t\tthis.textArea.style.marginTop = \"-\" + getDimension(\"padding-top\", \"margin-top\", \"border-top-width\") + \"px\";\n\t\t\t\tvar lpbw = getDimension(\"padding-left\", \"border-left-width\");\n\t\t\t\tvar tpbw = getDimension(\"padding-top\", \"border-top-width\");\n\t\t\t\tthis.textArea.style.paddingLeft = this.textArea.style.paddingRight = lpbw + \"px\";\n\t\t\t\tthis.textArea.style.paddingTop = getDimension(\"padding-top\", \"border-top-width\") + \"px\";\n\t\t\t\tif(dojo.render.html.moz){\n\t\t\t\t\tdojo.style.setOuterWidth(this.textArea, taw+lpbw);\n\t\t\t\t\tdojo.style.setOuterHeight(this.textArea, tah+tpbw);\n\t\t\t\t}else{\n\t\t\t\t\tvar bw = dojo.style.getPixelValue(this.textArea, \"border-width\");\n\t\t\t\t\tthis.textArea.style.width = taw-(bw+(2*lpbw))+\"px\"\n\t\t\t\t\tthis.textArea.style.height = tah-(2*tpbw)+bw+\"px\"\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.cloneClasses){\n\t\t\t\tdojo.html.setClass(this.textArea,\tdojo.html.getClass(this.domNode));\n\t\t\t\tthis._initialClass = dojo.html.getClass(this.textArea);\n\t\t\t}\n\t\t}else{\n\t\t\twith(this.editorContainer.style){\n\t\t\t\tpostion = \"relative\";\n\t\t\t\tleft = top = \"0px\";\n\t\t\t}\n\t\t}\n\n\t\tdojo.dom.insertAtPosition(this.editorContainer,\tthis.domNode,\t\"first\");","this":"jot.widget.JotCellEditor"}}},"jot.widget.JotCellEditor.moveCaretToEnd":{"_":{"meta":{"summary":"","src":"\t\tvar\tloc\t=\tthis.textArea.value.length;\n\t\tvar start = this.selectAll ? 0 : loc;\n\n\t\ttry{\n\t\t\tif(dojo.render.html.moz){\n\t\t\t\tthis.textArea.focus();\n\t\t\t\tthis.textArea.setSelectionRange(start, loc);\n\t\t\t}else if(dojo.render.html.ie){\n\t\t\t\tvar\trange = this.textArea.createTextRange();\n\t\t\t\twith(range){\n\t\t\t\t\tcollapse(true);\n\t\t\t\t\tmoveEnd('character', loc);\n\t\t\t\t\tmoveStart('character', start);\n\t\t\t\t\tselect();\n\t\t\t\t}\n\t\t\t}\n\t\t}catch(e){\/* squelch *\/}","this":"jot.widget.JotCellEditor"}}},"jot.widget.JotCellEditor.postCreate":{"_":{"meta":{"summary":"","src":"\t\tvar me = this;\n\t\tsetTimeout(function(){\n\t\t\tme.textArea.focus();\n\t\t\tme.moveCaretToEnd();\n\t\t}, 1);","this":"jot.widget.JotCellEditor"}}},"jot.widget.JotCellEditor.checkKeyDown":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tswitch (evt.keyCode) {\n\t\t\tcase evt.KEY_ESCAPE:\n\t\t\t\tthis.handleEsc(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_TAB:\n\t\t\t\tthis.handleTab(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_ENTER:\n\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_UP_ARROW:\n\t\t\tcase evt.KEY_RIGHT_ARROW:\n\t\t\tcase evt.KEY_DOWN_ARROW:\n\t\t\tcase evt.KEY_LEFT_ARROW:\n\t\t\t\tif (this.arrowKeysExit) {\n\t\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\t\/*\n\t\tif(dojo.render.html.safari){\n\t\t\t\tevt.stopPropagation();\n\t\t}\n\t\t*\/","this":"jot.widget.JotCellEditor"}}},"jot.widget.JotCellEditor.evt.KEY_ESCAPE":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tswitch (evt.keyCode) {\n\t\t\tcase evt.KEY_ESCAPE:\n\t\t\t\tthis.handleEsc(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_TAB:\n\t\t\t\tthis.handleTab(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_ENTER:\n\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_UP_ARROW:\n\t\t\tcase evt.KEY_RIGHT_ARROW:\n\t\t\tcase evt.KEY_DOWN_ARROW:\n\t\t\tcase evt.KEY_LEFT_ARROW:\n\t\t\t\tif (this.arrowKeysExit) {\n\t\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\t\/*\n\t\tif(dojo.render.html.safari){\n\t\t\t\tevt.stopPropagation();\n\t\t}\n\t\t*\/","this":"jot.widget.JotCellEditor"}}},"jot.widget.JotCellEditor.evt.KEY_TAB":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tswitch (evt.keyCode) {\n\t\t\tcase evt.KEY_ESCAPE:\n\t\t\t\tthis.handleEsc(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_TAB:\n\t\t\t\tthis.handleTab(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_ENTER:\n\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_UP_ARROW:\n\t\t\tcase evt.KEY_RIGHT_ARROW:\n\t\t\tcase evt.KEY_DOWN_ARROW:\n\t\t\tcase evt.KEY_LEFT_ARROW:\n\t\t\t\tif (this.arrowKeysExit) {\n\t\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\t\/*\n\t\tif(dojo.render.html.safari){\n\t\t\t\tevt.stopPropagation();\n\t\t}\n\t\t*\/","this":"jot.widget.JotCellEditor"}}},"jot.widget.JotCellEditor.evt.KEY_ENTER":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tswitch (evt.keyCode) {\n\t\t\tcase evt.KEY_ESCAPE:\n\t\t\t\tthis.handleEsc(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_TAB:\n\t\t\t\tthis.handleTab(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_ENTER:\n\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_UP_ARROW:\n\t\t\tcase evt.KEY_RIGHT_ARROW:\n\t\t\tcase evt.KEY_DOWN_ARROW:\n\t\t\tcase evt.KEY_LEFT_ARROW:\n\t\t\t\tif (this.arrowKeysExit) {\n\t\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\t\/*\n\t\tif(dojo.render.html.safari){\n\t\t\t\tevt.stopPropagation();\n\t\t}\n\t\t*\/","this":"jot.widget.JotCellEditor"}}},"jot.widget.JotCellEditor.evt.KEY_UP_ARROW":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tswitch (evt.keyCode) {\n\t\t\tcase evt.KEY_ESCAPE:\n\t\t\t\tthis.handleEsc(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_TAB:\n\t\t\t\tthis.handleTab(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_ENTER:\n\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_UP_ARROW:\n\t\t\tcase evt.KEY_RIGHT_ARROW:\n\t\t\tcase evt.KEY_DOWN_ARROW:\n\t\t\tcase evt.KEY_LEFT_ARROW:\n\t\t\t\tif (this.arrowKeysExit) {\n\t\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\t\/*\n\t\tif(dojo.render.html.safari){\n\t\t\t\tevt.stopPropagation();\n\t\t}\n\t\t*\/","this":"jot.widget.JotCellEditor"}}},"jot.widget.JotCellEditor.evt.KEY_RIGHT_ARROW":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tswitch (evt.keyCode) {\n\t\t\tcase evt.KEY_ESCAPE:\n\t\t\t\tthis.handleEsc(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_TAB:\n\t\t\t\tthis.handleTab(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_ENTER:\n\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_UP_ARROW:\n\t\t\tcase evt.KEY_RIGHT_ARROW:\n\t\t\tcase evt.KEY_DOWN_ARROW:\n\t\t\tcase evt.KEY_LEFT_ARROW:\n\t\t\t\tif (this.arrowKeysExit) {\n\t\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\t\/*\n\t\tif(dojo.render.html.safari){\n\t\t\t\tevt.stopPropagation();\n\t\t}\n\t\t*\/","this":"jot.widget.JotCellEditor"}}},"jot.widget.JotCellEditor.evt.KEY_DOWN_ARROW":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tswitch (evt.keyCode) {\n\t\t\tcase evt.KEY_ESCAPE:\n\t\t\t\tthis.handleEsc(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_TAB:\n\t\t\t\tthis.handleTab(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_ENTER:\n\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_UP_ARROW:\n\t\t\tcase evt.KEY_RIGHT_ARROW:\n\t\t\tcase evt.KEY_DOWN_ARROW:\n\t\t\tcase evt.KEY_LEFT_ARROW:\n\t\t\t\tif (this.arrowKeysExit) {\n\t\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\t\/*\n\t\tif(dojo.render.html.safari){\n\t\t\t\tevt.stopPropagation();\n\t\t}\n\t\t*\/","this":"jot.widget.JotCellEditor"}}},"jot.widget.JotCellEditor.evt.KEY_LEFT_ARROW":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tswitch (evt.keyCode) {\n\t\t\tcase evt.KEY_ESCAPE:\n\t\t\t\tthis.handleEsc(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_TAB:\n\t\t\t\tthis.handleTab(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_ENTER:\n\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_UP_ARROW:\n\t\t\tcase evt.KEY_RIGHT_ARROW:\n\t\t\tcase evt.KEY_DOWN_ARROW:\n\t\t\tcase evt.KEY_LEFT_ARROW:\n\t\t\t\tif (this.arrowKeysExit) {\n\t\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\t\/*\n\t\tif(dojo.render.html.safari){\n\t\t\t\tevt.stopPropagation();\n\t\t}\n\t\t*\/","this":"jot.widget.JotCellEditor"}}},"jot.widget.JotCellEditor.checkOnBlur":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tdojo.debug(\"checkOnBlur\");\n\t\tvar\tneedsSave\t=\tfalse;\n\t\tvar\tnv = this.textArea.value;\n\t\tnv = nv.replace(\/&\/g,\"&amp;\");\n\t\tif(nv\t!= this._initialContent\t|| (this.cloneClasses\t\n\t\t\t\t\t&& dojo.html.getClass(this.textArea) !=\tthis._initialClass)){\n\t\t\tdojo.debug(\"needs\tsave\");\n\t\t\tneedsSave\t=\ttrue;\n\t\t}\n\t\t\n\t\t\/\/ FIXME: should we be adding a fade effect in here somewhere?\n\t\tthis.destroy();\n\n\t\t\/\/ seems like sometimes clobberEditor is not getting called\n\t\t\/\/ i've seen the \"JotCellEditor\" class get saved out to the server...\n\t\tif (this.editorContainer != null) {\n\t\t\tthis.clobberEditor();\n\t\t}\n\t\t\n\t\tif(needsSave){\n\t\t\t\/\/ FIXME:\tthis should\tbe innerText if\tthe\tbrowser\tsupports it\n\t\t\tthis.domNode.innerHTML = (dojo.string.isBlank(nv)) ? \"&nbsp;\" : nv;\n\t\t\tif(this.cloneClasses){\n\t\t\t\tvar nc = dojo.html.getClass(this.textArea);\n\t\t\t\tnc = nc.replace(\/JotCellEditor\/gi, \"\");\n\t\t\t\tdojo.html.setClass(this.domNode, nc);\n\t\t\t}\n\t\t\tthis.save(evt, this, nv);\n\t\t}else{\n\t\t\tthis.cancel(evt);\n\t\t}","this":"jot.widget.JotCellEditor"}}},"jot.widget.JotCellEditor.clobberEditor":{"_":{"meta":{"summary":"","src":"\t\tif(!this.editorContainer){ return; }\n\t\tdojo.html.removeClass(this.domNode,\t\"JotCellEditor\");\n\t\tthis.domNode.removeChild(this.editorContainer);\n\t\tthis.editorContainer = null;","this":"jot.widget.JotCellEditor"}}},"jot.widget.JotCellEditor.destroyRendering":{"_":{"meta":{"summary":"","src":"\t\tthis.clobberEditor();\n\t\tthis.domNode.style.textAlign = \"\";\n\t\tthis.domNode.style.verticalAlign = \"\";\n\t\tdojo.event.browser.clean(this.domNode);\n\t\tdojo.event.topic.publish(\"jot.celleditor.closing\", this.domNode);","this":"jot.widget.JotCellEditor"}}},"jot.widget.JotCellEditor.save":{"_":{"meta":{"summary":"","parameters":{"eventObj":{"type":""},"originatingWidget":{"type":""},"data":{"type":""}},"src":"\t\tdojo.debug(\"saving:\",\tdata);","this":"jot.widget.JotCellEditor"}}},"jot.widget.JotCellEditor.cancel":{"_":{"meta":{"summary":"","parameters":{"eventObj":{"type":""}},"src":"\t\tdojo.debug(\"canceling\tedit\");","this":"jot.widget.JotCellEditor"}}},"jot.widget.JotCellEditor.handleTab":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tdojo.debug(\"handleTab\");\n\t\tevt.stopPropagation();\n\t\tevt.preventDefault();\n\t\tthis.checkOnBlur(evt);","this":"jot.widget.JotCellEditor"}}},"jot.widget.JotCellEditor.handleEsc":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tthis.cancel(evt);\n\t\tthis.destroy();","this":"jot.widget.JotCellEditor"}}}}}},"dojo.widget.jot.JotCellEditor2":{"meta":{"requires":{"common":["dojo.lang.*","dojo.html","dojo.string","dojo.widget.*"]},"methods":{"jot.widget.JotCellEditor2":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);","inherits":["dojo.widget.HtmlWidget"],"protovariables":{"widgetType":"","_initialContent":"","_initialClass":"","editorContainer":"","textArea":"","eventAncestor":"","editedCell":"","selectAll":"","cozyUpToParent":"","minWidth":"","minHeight":"","arrowKeysExit":"","cloneClasses":"","preventSave":"","clonedStyles":"","templatePath":"","templateCssPath":""},"this_variables":["eventAncestor","domNode","textArea.value","selectAll","editedCell","editedCell.innerHTML","textArea.style.width","textArea.style.height","editedCell.style.textAlign","textArea.style.marginLeft","textArea.style.marginTop","textArea.style.paddingLeft","textArea.style.paddingTop","_initialClass","textArea.value","textArea.value","preventSave","editedCell.innerHTML","editedCell","editedCell.style.textAlign","preventSave","textArea.value","editedCell"]}}},"jot.widget.JotCellEditor2.fillInTemplate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tthis.eventAncestor = this.getFragNodeRef(frag);\n\t\tdojo.event.connect(this.eventAncestor, \n\t\t\t\"ondblclick\",\n\t\t\tdojo.lang.hitch(this, \n\t\t\t\tfunction(e){\n\t\t\t\t\tdojo.debug(\"ondblclick\");\n\t\t\t\t\tif(!this.editedCell){\n\t\t\t\t\t\tvar parent = dojo.html.getParentByType(e.target, \"td\");\n\t\t\t\t\t\tif(!parent){ return; }\n\t\t\t\t\t\tthis.attachToCell(parent);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tthis.domNode = this.getFragNodeRef(frag);\n\t\tdocument.body.appendChild(this.editorContainer);","this":"jot.widget.JotCellEditor2"}}},"jot.widget.JotCellEditor2.shadowCell":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""},"visible":{"type":""}},"src":"\t\tif(dojo.render.html.ie){\n\t\t\twith(this.textArea.style){\n\t\t\t\tleft = top = \"-100px\";\n\t\t\t}\n\t\t\tthis.textArea.select();\n\t\t}\n\t\tdojo.lang.forEach(this.clonedStyles, \n\t\t\tdojo.lang.hitch(this,\n\t\t\t\tfunction(prop){\n\t\t\t\t\tvar\tcc = dojo.style.toCamelCase(prop);\n\t\t\t\t\tthis.textArea.style[cc]\t= \"\";\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tdojo.lang.setTimeout(this, function(){\n\t\t\tvar cx = dojo.style.getAbsoluteX(cell, true);\n\t\t\tvar cy = dojo.style.getAbsoluteY(cell, true);\n\t\t\twith(this.textArea.style){\n\t\t\t\tpostion = \"absolute\";\n\t\t\t\tif(visible){\n\t\t\t\t\tzIndex = 100;\n\t\t\t\t}\n\t\t\t\tif(dojo.render.html.moz){\n\t\t\t\t\tif(!visible){\n\t\t\t\t\t\tleft = top = \"-200px\";\n\t\t\t\t\t\tvisibility = \"hidden\";\n\t\t\t\t\t}else{\n\t\t\t\t\t\tvisibility = \"visible\";\n\t\t\t\t\t\tleft = cx+\"px\";\n\t\t\t\t\t\ttop = cy+\"px\";\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tleft = cx+\"px\";\n\t\t\t\t\ttop = cy+\"px\";\n\t\t\t\t\tif(!visible){\n\t\t\t\t\t\tzIndex = -10;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, 1);\n\t\tthis.textArea.value = \"\";","this":"jot.widget.JotCellEditor2"}}},"jot.widget.JotCellEditor2.attachToCell":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""},"selectAll":{"type":""}},"src":"\t\tthis.selectAll = selectAll;\n\n\t\t\/\/ NOTE: we\tdon't want to replace our <td>, we want to extend it\n\t\tthis.editedCell = cell;\n\t\tdojo.html.addClass(this.editedCell, \"JotCellEditor\");\t\t\n\t\tvar iv;\n\t\tif(this.editedCell.innerHTML == \"&nbsp;\"){\n\t\t\tiv = \"\";\n\t\t}else{\n\t\t\tiv = dojo.string.trim(dojo.dom.textContent(this.editedCell));\n\t\t}\n\t\tdojo.lang.forEach(this.clonedStyles, \n\t\t\tdojo.lang.hitch(this,\n\t\t\t\tfunction(prop){\n\t\t\t\t\tvar\tcc = dojo.style.toCamelCase(prop);\n\t\t\t\t\t\/\/ dojo.debug(prop,\t\":\", cc);\n\t\t\t\t\tthis.textArea.style[cc]\t= dojo.style.getStyle(this.editedCell,\tprop);\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tvar taw = Math.max(dojo.html.getInnerWidth(this.editedCell), this.minWidth);\n\t\tvar tah = Math.max(dojo.html.getInnerHeight(this.editedCell), this.minHeight);\n\t\tthis.textArea.style.width = taw + \"px\";\n\t\tthis.textArea.style.height = tah + \"px\";\n\t\tthis.editedCell.style.textAlign = \"left\";\n\t\tvar getDimension = dojo.lang.hitch(this, function(){\n\t\t\tvar ret = 0;\n\t\t\tfor(var x=0; x < arguments.length; x++){\n\t\t\t\tvar tmp = dojo.style.getPixelValue(this.editedCell, arguments[x], false);\n\t\t\t\tret+= isNaN(tmp) ? 0 : tmp;\n\t\t\t}\n\t\t\treturn ret;\n\t\t});\n\t\tif(!dojo.render.html.safari){\n\t\t\tif(this.cozyUpToParent){\n\t\t\t\tthis.textArea.style.marginLeft = \"-\" + getDimension(\"padding-left\", \"margin-left\", \"border-left-width\") + \"px\";\n\t\t\t\tthis.textArea.style.marginTop = \"-\" + getDimension(\"padding-top\", \"margin-top\", \"border-top-width\") + \"px\";\n\t\t\t\tvar lpbw = getDimension(\"padding-left\", \"border-left-width\");\n\t\t\t\tvar tpbw = getDimension(\"padding-top\", \"border-top-width\");\n\t\t\t\tthis.textArea.style.paddingLeft = this.textArea.style.paddingRight = lpbw + \"px\";\n\t\t\t\tthis.textArea.style.paddingTop = getDimension(\"padding-top\", \"border-top-width\") + \"px\";\n\t\t\t\tif(dojo.render.html.moz){\n\t\t\t\t\tdojo.style.setOuterWidth(this.textArea, taw+lpbw);\n\t\t\t\t\tdojo.style.setOuterHeight(this.textArea, tah+tpbw);\n\t\t\t\t}else{\n\t\t\t\t\tvar bw = dojo.style.getPixelValue(this.textArea, \"border-width\");\n\t\t\t\t\tthis.textArea.style.width = taw-(bw+(2*lpbw))+\"px\"\n\t\t\t\t\tthis.textArea.style.height = tah-(2*tpbw)+bw+\"px\"\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.cloneClasses){\n\t\t\t\tdojo.html.setClass(this.textArea,\tdojo.html.getClass(this.editedCell));\n\t\t\t\tthis._initialClass = dojo.html.getClass(this.textArea);\n\t\t\t}\n\t\t}else{\n\t\t\t\/\/ subsequent positioning takes care of the rest\n\t\t}\n\t\tif((dojo.render.html.moz)&&(dojo.byId(\"rows_container\"))){\n\t\t\tdojo.byId(\"rows_container\").style.overflow = \"hidden\";\n\t\t}\n\t\tthis.shadowCell(cell, true);\n\t\tthis.textArea.value\t= this._initialContent = iv;\n\t\tdojo.lang.setTimeout(this, function(){\n\t\t\tthis.postEditorCreate();\n\t\t}, 3);","this":"jot.widget.JotCellEditor2"}}},"jot.widget.JotCellEditor2.moveCaretToEnd":{"_":{"meta":{"summary":"","src":"\t\tvar\tloc\t=\tthis.textArea.value.length;\n\t\tvar start = this.selectAll ? 0 : loc;\n\n\t\ttry{\n\t\t\tif(dojo.render.html.moz){\n\t\t\t\tthis.textArea.focus();\n\t\t\t\tthis.textArea.setSelectionRange(start, loc);\n\t\t\t}else if(dojo.render.html.ie){\n\t\t\t\tvar\trange = this.textArea.createTextRange();\n\t\t\t\twith(range){\n\t\t\t\t\tcollapse(true);\n\t\t\t\t\tmoveEnd('character', loc);\n\t\t\t\t\tmoveStart('character', start);\n\t\t\t\t\tselect();\n\t\t\t\t}\n\t\t\t}\n\t\t}catch(e){\/* squelch *\/}","this":"jot.widget.JotCellEditor2"}}},"jot.widget.JotCellEditor2.postEditorCreate":{"_":{"meta":{"summary":"","src":"\t\tdojo.lang.setTimeout(this, \n\t\t\tfunction(){\n\t\t\t\tthis.textArea.focus();\n\t\t\t\tthis.moveCaretToEnd();\n\t\t\t}, \n\t\t\t1\n\t\t);","this":"jot.widget.JotCellEditor2"}}},"jot.widget.JotCellEditor2.checkKeyDown":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tswitch (evt.keyCode) {\n\t\t\tcase evt.KEY_ESCAPE:\n\t\t\t\tthis.handleEsc(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_TAB:\n\t\t\t\tthis.handleTab(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_ENTER:\n\t\t\t\tdojo.debug(\"JotCellEditor2.checkKeyDown enter\");\n\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\tif(dojo.render.html.ie){\n\t\t\t\t\tdojo.lang.setTimeout(this, this.clobberEditor, 2);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_UP_ARROW:\n\t\t\tcase evt.KEY_RIGHT_ARROW:\n\t\t\tcase evt.KEY_DOWN_ARROW:\n\t\t\tcase evt.KEY_LEFT_ARROW:\n\t\t\t\tif(this.arrowKeysExit){\n\t\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}","this":"jot.widget.JotCellEditor2"}}},"jot.widget.JotCellEditor2.evt.KEY_ESCAPE":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tswitch (evt.keyCode) {\n\t\t\tcase evt.KEY_ESCAPE:\n\t\t\t\tthis.handleEsc(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_TAB:\n\t\t\t\tthis.handleTab(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_ENTER:\n\t\t\t\tdojo.debug(\"JotCellEditor2.checkKeyDown enter\");\n\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\tif(dojo.render.html.ie){\n\t\t\t\t\tdojo.lang.setTimeout(this, this.clobberEditor, 2);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_UP_ARROW:\n\t\t\tcase evt.KEY_RIGHT_ARROW:\n\t\t\tcase evt.KEY_DOWN_ARROW:\n\t\t\tcase evt.KEY_LEFT_ARROW:\n\t\t\t\tif(this.arrowKeysExit){\n\t\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}","this":"jot.widget.JotCellEditor2"}}},"jot.widget.JotCellEditor2.evt.KEY_TAB":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tswitch (evt.keyCode) {\n\t\t\tcase evt.KEY_ESCAPE:\n\t\t\t\tthis.handleEsc(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_TAB:\n\t\t\t\tthis.handleTab(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_ENTER:\n\t\t\t\tdojo.debug(\"JotCellEditor2.checkKeyDown enter\");\n\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\tif(dojo.render.html.ie){\n\t\t\t\t\tdojo.lang.setTimeout(this, this.clobberEditor, 2);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_UP_ARROW:\n\t\t\tcase evt.KEY_RIGHT_ARROW:\n\t\t\tcase evt.KEY_DOWN_ARROW:\n\t\t\tcase evt.KEY_LEFT_ARROW:\n\t\t\t\tif(this.arrowKeysExit){\n\t\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}","this":"jot.widget.JotCellEditor2"}}},"jot.widget.JotCellEditor2.evt.KEY_ENTER":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tswitch (evt.keyCode) {\n\t\t\tcase evt.KEY_ESCAPE:\n\t\t\t\tthis.handleEsc(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_TAB:\n\t\t\t\tthis.handleTab(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_ENTER:\n\t\t\t\tdojo.debug(\"JotCellEditor2.checkKeyDown enter\");\n\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\tif(dojo.render.html.ie){\n\t\t\t\t\tdojo.lang.setTimeout(this, this.clobberEditor, 2);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_UP_ARROW:\n\t\t\tcase evt.KEY_RIGHT_ARROW:\n\t\t\tcase evt.KEY_DOWN_ARROW:\n\t\t\tcase evt.KEY_LEFT_ARROW:\n\t\t\t\tif(this.arrowKeysExit){\n\t\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}","this":"jot.widget.JotCellEditor2"}}},"jot.widget.JotCellEditor2.evt.KEY_UP_ARROW":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tswitch (evt.keyCode) {\n\t\t\tcase evt.KEY_ESCAPE:\n\t\t\t\tthis.handleEsc(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_TAB:\n\t\t\t\tthis.handleTab(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_ENTER:\n\t\t\t\tdojo.debug(\"JotCellEditor2.checkKeyDown enter\");\n\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\tif(dojo.render.html.ie){\n\t\t\t\t\tdojo.lang.setTimeout(this, this.clobberEditor, 2);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_UP_ARROW:\n\t\t\tcase evt.KEY_RIGHT_ARROW:\n\t\t\tcase evt.KEY_DOWN_ARROW:\n\t\t\tcase evt.KEY_LEFT_ARROW:\n\t\t\t\tif(this.arrowKeysExit){\n\t\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}","this":"jot.widget.JotCellEditor2"}}},"jot.widget.JotCellEditor2.evt.KEY_RIGHT_ARROW":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tswitch (evt.keyCode) {\n\t\t\tcase evt.KEY_ESCAPE:\n\t\t\t\tthis.handleEsc(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_TAB:\n\t\t\t\tthis.handleTab(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_ENTER:\n\t\t\t\tdojo.debug(\"JotCellEditor2.checkKeyDown enter\");\n\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\tif(dojo.render.html.ie){\n\t\t\t\t\tdojo.lang.setTimeout(this, this.clobberEditor, 2);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_UP_ARROW:\n\t\t\tcase evt.KEY_RIGHT_ARROW:\n\t\t\tcase evt.KEY_DOWN_ARROW:\n\t\t\tcase evt.KEY_LEFT_ARROW:\n\t\t\t\tif(this.arrowKeysExit){\n\t\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}","this":"jot.widget.JotCellEditor2"}}},"jot.widget.JotCellEditor2.evt.KEY_DOWN_ARROW":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tswitch (evt.keyCode) {\n\t\t\tcase evt.KEY_ESCAPE:\n\t\t\t\tthis.handleEsc(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_TAB:\n\t\t\t\tthis.handleTab(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_ENTER:\n\t\t\t\tdojo.debug(\"JotCellEditor2.checkKeyDown enter\");\n\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\tif(dojo.render.html.ie){\n\t\t\t\t\tdojo.lang.setTimeout(this, this.clobberEditor, 2);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_UP_ARROW:\n\t\t\tcase evt.KEY_RIGHT_ARROW:\n\t\t\tcase evt.KEY_DOWN_ARROW:\n\t\t\tcase evt.KEY_LEFT_ARROW:\n\t\t\t\tif(this.arrowKeysExit){\n\t\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}","this":"jot.widget.JotCellEditor2"}}},"jot.widget.JotCellEditor2.evt.KEY_LEFT_ARROW":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tswitch (evt.keyCode) {\n\t\t\tcase evt.KEY_ESCAPE:\n\t\t\t\tthis.handleEsc(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_TAB:\n\t\t\t\tthis.handleTab(evt);\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_ENTER:\n\t\t\t\tdojo.debug(\"JotCellEditor2.checkKeyDown enter\");\n\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\tif(dojo.render.html.ie){\n\t\t\t\t\tdojo.lang.setTimeout(this, this.clobberEditor, 2);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase evt.KEY_UP_ARROW:\n\t\t\tcase evt.KEY_RIGHT_ARROW:\n\t\t\tcase evt.KEY_DOWN_ARROW:\n\t\t\tcase evt.KEY_LEFT_ARROW:\n\t\t\t\tif(this.arrowKeysExit){\n\t\t\t\t\tthis.checkOnBlur(evt);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}","this":"jot.widget.JotCellEditor2"}}},"jot.widget.JotCellEditor2.refocus":{"_":{"meta":{"summary":"","src":"\t\tthis.textArea.value = \"\";\n\t\tdojo.lang.setTimeout(this, \n\t\t\tfunction(){\n\t\t\t\tthis.textArea.focus();\n\t\t\t},\n\t\t\t2\n\t\t);","this":"jot.widget.JotCellEditor2"}}},"jot.widget.JotCellEditor2.checkOnBlur":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tif(!this.editedCell){\n\t\t\t\/\/ this.refocus();\n\t\t\treturn;\n\t\t}\n\t\tdojo.debug(\"checkOnBlur\");\n\t\tdojo.event.topic.publish(\"jot.celleditor.blured\");\n\t\tif(this.preventSave){ dojo.debug(\"save prevented!\"); this.preventSave = false; return; }\n\t\tdojo.debug(\"checkOnBlur\");\n\t\tvar\tneedsSave = false;\n\t\tvar\tnv = this.textArea.value;\n\t\tnv = nv.replace(\/&\/g,\"&amp;\");\n\t\tif(nv != this._initialContent || (this.cloneClasses\t\n\t\t\t&& dojo.html.getClass(this.textArea) !=\tthis._initialClass)){\n\t\t\tdojo.debug(\"needs save\");\n\t\t\tneedsSave = true;\n\t\t}\n\t\t\n\t\t\/\/ FIXME: should we be adding a fade effect in here somewhere?\n\t\t\/\/ this.destroy();\n\n\t\tthis.clobberEditor();\n\t\t\n\t\tdojo.debug(\"needsSave:\", needsSave);\n\t\tif(needsSave){\n\t\t\t\/\/ FIXME: this should be innerText if the browser supports it\n\t\t\tthis.editedCell.innerHTML = (dojo.string.isBlank(nv)) ? \"&nbsp;\" : nv;\n\t\t\tif(this.cloneClasses){\n\t\t\t\tvar nc = dojo.html.getClass(this.textArea);\n\t\t\t\tnc = nc.replace(\/JotCellEditor\/gi, \"\");\n\t\t\t\tdojo.html.setClass(this.editedCell, nc);\n\t\t\t}\n\t\t\tthis.save(evt, this, nv);\n\t\t}else{\n\t\t\tthis.cancel(evt);\n\t\t}\n\t\tthis.editedCell = null;\n\t\t\/\/ this.refocus();","this":"jot.widget.JotCellEditor2"}}},"jot.widget.JotCellEditor2.clobberEditor":{"_":{"meta":{"summary":"","src":"\t\tif(this.editedCell){\n\t\t\tdojo.html.removeClass(this.editedCell,\t\"JotCellEditor\");\n\t\t}\n\t\tif((dojo.render.html.moz)&&(dojo.byId(\"rows_container\"))){\n\t\t\tdojo.byId(\"rows_container\").style.overflow = \"auto\";\n\t\t}\n\t\tdojo.debug(\"clobberEditor\");\n\t\twith(this.textArea.style){\n\t\t\tif(dojo.render.html.moz){\n\t\t\t\tvisibility = \"hidden\";\n\t\t\t\ttop = left = \"-200px\";\n\t\t\t}else{\n\t\t\t\tif(dojo.render.html.ie){\n\t\t\t\t\tleft = top = \"-100px\";\n\t\t\t\t\tthis.textArea.select();\n\t\t\t\t}\n\t\t\t\tzIndex = -1;\n\t\t\t}\n\t\t}","this":"jot.widget.JotCellEditor2"}}},"jot.widget.JotCellEditor2.destroyRendering":{"_":{"meta":{"summary":"","src":"\t\tif(this.editedCell){\n\t\t\tdojo.event.topic.publish(\"jot.celleditor2.closing\", this.editedCell);\n\t\t\tthis.editedCell.style.textAlign = \"\";\n\t\t\tdojo.event.browser.clean(this.editedCell);\n\t\t}\n\t\tthis.clobberEditor();\n\t\tdojo.event.browser.clean(this.textArea);\n\t\tdojo.event.browser.clean(this.editorContainer);\n\t\tthis.textArea.parentNode.removeChild(this.textArea);\n\t\tthis.editorContainer.parentNode.removeChild(this.editorContainer);","this":"jot.widget.JotCellEditor2"}}},"jot.widget.JotCellEditor2.save":{"_":{"meta":{"summary":"","parameters":{"eventObj":{"type":""},"originatingWidget":{"type":""},"data":{"type":""}},"src":"\t\tdojo.debug(\"saving:\", data);","this":"jot.widget.JotCellEditor2"}}},"jot.widget.JotCellEditor2.cancel":{"_":{"meta":{"summary":"","parameters":{"eventObj":{"type":""}},"src":"\t\tdojo.debug(\"canceling edit\");","this":"jot.widget.JotCellEditor2"}}},"jot.widget.JotCellEditor2.handleTab":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tdojo.debug(\"handleTab\");\n\t\t\/*\n\t\tevt.stopPropagation();\n\t\tevt.preventDefault();\n\t\t*\/\n\t\tthis.checkOnBlur(evt);","this":"jot.widget.JotCellEditor2"}}},"jot.widget.JotCellEditor2.handleEsc":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tthis.cancel(evt);\n\t\t\/\/ this.destroy();\n\t\tthis.clobberEditor();\n\t\tthis.preventSave = true;\n\t\tthis.textArea.blur();\n\t\tdojo.event.topic.publish(\"jot.celleditor.blured\");\n\t\tthis.textArea.value = \"\";\n\t\tthis.textArea.focus();\n\t\tthis.editedCell = null;","this":"jot.widget.JotCellEditor2"}}}}}},"dojo.widget.jot.JotComboBox":{"meta":{"requires":{"common":["dojo.widget.*","dojo.io.*"]},"methods":{"jot.widget.JotComboBox":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\tthis.widgetType = \"JotComboBox\";\n\n\tthis.dataUrl = \"\";\n\tthis.dataProvider = null;\n\n\tthis.boxNode = null;\n\n\tthis.connectDataProvider = function() {\n\t\tdojo.event.connect(this, \"startSearch\", this.dataProvider, \"startSearch\");\n\t\tdojo.event.connect(this.dataProvider, \"provideResults\", this, \"provideResults\");\n\t}\n\n\tthis.fillInTemplate = function(args, frag) {\n\t\tthis.dataProvider = new jot.widget.userEmailDataProvider(this.dataUrl);\n\t\tthis.connectDataProvider();\n\n\t\tdojo.event.connect(this.domNode, \"onkeyup\", this, \"keyup\");\n\t\tdojo.event.connect(this.domNode, \"onkeydown\", this, \"keydown\");\n\t\tdojo.event.connect(this.domNode, \"onblur\", this, \"blur\");\n\n\t\tthis.boxNode = document.createElement(\"div\");\n\t\tdojo.html.setClass(this.boxNode, \"jot-comboBoxItems\");\n\t\tdocument.body.appendChild(this.boxNode);\n\t\tdojo.event.connect(this.boxNode, \"onmouseover\", this, \"mouseover\");\n\t\tthis.hideResults();\n\t}\n\n\tthis.blur = function(e) {\n\t\tif(this.resultsVisible() && this.highlightedNode) {\n\t\t\tthis.selectOption();\n\t\t\tsetTimeout(function(){e.target.focus();}, 0)\n\t\t}\n\t\tthis.hideResults();\n\t}\n\n\tthis.keydown = function(e) {\n\t\tswitch(e.keyCode) {\n\t\t\tcase e.KEY_UP_ARROW:\n\t\t\t\tthis.highlightPreviousOption();\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_DOWN_ARROW:\n\t\t\t\tthis.highlightNextOption();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tthis.lastValue = \"\";\n\n\tthis.keyup = function(e) {\n\t\tif(e.ctrlKey) { return; }\n\t\tswitch(e.keyCode) {\n\t\t\tcase e.KEY_ESCAPE:\n\t\t\t\tthis.hideResults();\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_ENTER:\n\t\t\t\tthis.selectOption();\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_TAB:\n\t\t\t\tthis.hideResults();\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_HOME:\n\t\t\tcase e.KEY_END:\n\t\t\tcase e.KEY_SHIFT:\n\t\t\tcase e.KEY_LEFT_ARROW:\n\t\t\tcase e.KEY_RIGHT_ARROW:\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tvar value = this.domNode.value;\n\t\t\t\tif(value != this.lastValue) {\n\t\t\t\t\tthis.onChange(value, this.lastValue);\n\t\t\t\t\tthis.lastValue = value;\n\t\t\t\t\tthis.startSearch(value);\n\t\t\t\t}\n\t\t}\n\t}\n\n\tthis.mouseover = function(e) {\n\t\tvar node = e.target;\n\t\twhile(node && node != this.domNode) {\n\t\t\tif(dojo.html.hasClass(node, \"jot-comboBoxItem\")) {\n\t\t\t\tthis.highlightNode(node);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tnode = node.parentNode;\n\t\t}\n\t}\n\n\tthis.onChange = function(newValue, oldValue) {}\n\n\tthis.selectOption = function() {\n\t\tif(this.highlightedNode) {\n\t\t\tvar value = this.highlightedNode.getAttribute(\"value\");\n\t\t\tthis.hideResults();\n\t\t\tthis.domNode.value = value;\n\t\t\tthis.value = value;\n\t\t\tthis.onSelectOption(value);\n\t\t} else if(!this.resultsVisible()) {\n\t\t\tthis.value = this.domNode.value;\n\t\t\tthis.onConfirmSelection(value);\n\t\t}\n\t}\n\n\tthis.onSelectOption = function(value) {};\n\tthis.onConfirmSelection = function(value) {};\n\n\tthis.highlightedNode = null;\n\n\tthis.highlightNextOption = function() {\n\t\tvar node = this.highlightedNode;\n\t\tif(node) {\n\t\t\tnode = dojo.html.getNextSiblingElement(node);\n\t\t}\n\t\t\/\/ either at beginning or end of list\n\t\tif(!node) {\n\t\t\tnode = dojo.html.getFirstChildElement(this.boxNode);\n\t\t}\n\n\t\tthis.highlightNode(node);\n\t}\n\n\tthis.highlightPreviousOption = function() {\n\t\tvar node = this.highlightedNode;\n\t\tif(node) {\n\t\t\tnode = dojo.html.getPreviousSiblingElement(node);\n\t\t}\n\t\t\/\/ either at beginning or end of list\n\t\tif(!node) {\n\t\t\tnode = dojo.html.getLastChildElement(this.boxNode);\n\t\t}\n\n\t\tthis.highlightNode(node);\n\t}\n\n\tthis.highlightNode = function(node) {\n\t\tif(this.highlightedNode) {\n\t\t\tdojo.html.removeClass(this.highlightedNode, \"highlighted\");\n\t\t}\n\t\tif(node) {\n\t\t\tdojo.html.addClass(node, \"highlighted\");\n\t\t} else {\n\t\t\tdojo.debug(\"highlightNextOption\", \"nothing to highlight\");\n\t\t}\n\t\tthis.highlightedNode = node;\n\t}\n\n\tthis.showResults = function() {\n\t\tthis.boxNode.style.left = dojo.html.getAbsoluteX(this.domNode) + \"px\";\n\t\tthis.boxNode.style.top = dojo.html.getAbsoluteY(this.domNode) + this.domNode.offsetHeight + \"px\";\n\t\tthis.highlightNextOption();\n\t\tthis.boxNode.style.display = \"block\";\n\t}\n\n\tthis.provideResults = function(items) {\n\t\tthis.clearResults();\n\t\tif(items.length > 0) {\n\t\t\tfor(var i = 0; i < items.length; i++) {\n\t\t\t\tvar item = items[i];\n\t\t\t\tvar node = document.createElement(\"div\");\n\t\t\t\tnode.setAttribute(\"value\", item.value);\n\t\t\t\tnode.className = \"jot-comboBoxItem\";\n\t\t\t\tnode.innerHTML = item.key;\n\t\t\t\tthis.boxNode.appendChild(node);\n\t\t\t}\n\t\t\tthis.showResults();\n\t\t} else {\n\t\t\tthis.hideResults();\n\t\t}\n\t}\n\n\tthis.clearResults = function() {\n\t\tthis.highlightedNode = null;\n\t\tthis.boxNode.innerHTML = \"\";\n\t}\n\n\tthis.hideResults = function() {\n\t\tthis.boxNode.style.display = \"none\";\n\t\tthis.clearResults();\n\t}\n\n\tthis.resultsVisible = function() {\n\t\treturn this.boxNode.style.display == \"block\";\n\t}","this_variables":["widgetType","dataUrl","dataProvider","boxNode","connectDataProvider","fillInTemplate","blur","keydown","lastValue","keyup","mouseover","onChange","selectOption","domNode.value","value","onSelectOption","onConfirmSelection","highlightedNode","highlightNextOption","highlightPreviousOption","highlightNode","showResults","boxNode.style.left","boxNode.style.top","boxNode.style.display","provideResults","clearResults","boxNode.innerHTML","hideResults","resultsVisible"],"inherits":["dojo.widget.HtmlWidget"]}}},"jot.widget.JotComboBox.connectDataProvider":{"_":{"meta":{"summary":"","src":"\t\tdojo.event.connect(this, \"startSearch\", this.dataProvider, \"startSearch\");\n\t\tdojo.event.connect(this.dataProvider, \"provideResults\", this, \"provideResults\");"}}},"jot.widget.JotComboBox.fillInTemplate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tthis.dataProvider = new jot.widget.userEmailDataProvider(this.dataUrl);\n\t\tthis.connectDataProvider();\n\n\t\tdojo.event.connect(this.domNode, \"onkeyup\", this, \"keyup\");\n\t\tdojo.event.connect(this.domNode, \"onkeydown\", this, \"keydown\");\n\t\tdojo.event.connect(this.domNode, \"onblur\", this, \"blur\");\n\n\t\tthis.boxNode = document.createElement(\"div\");\n\t\tdojo.html.setClass(this.boxNode, \"jot-comboBoxItems\");\n\t\tdocument.body.appendChild(this.boxNode);\n\t\tdojo.event.connect(this.boxNode, \"onmouseover\", this, \"mouseover\");\n\t\tthis.hideResults();","this_variables":["dataProvider","boxNode"]}}},"jot.widget.JotComboBox.blur":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif(this.resultsVisible() && this.highlightedNode) {\n\t\t\tthis.selectOption();\n\t\t\tsetTimeout(function(){e.target.focus();}, 0)\n\t\t}\n\t\tthis.hideResults();"}}},"jot.widget.JotComboBox.keydown":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tswitch(e.keyCode) {\n\t\t\tcase e.KEY_UP_ARROW:\n\t\t\t\tthis.highlightPreviousOption();\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_DOWN_ARROW:\n\t\t\t\tthis.highlightNextOption();\n\t\t\t\tbreak;\n\t\t}"}}},"jot.widget.JotComboBox.keyup":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif(e.ctrlKey) { return; }\n\t\tswitch(e.keyCode) {\n\t\t\tcase e.KEY_ESCAPE:\n\t\t\t\tthis.hideResults();\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_ENTER:\n\t\t\t\tthis.selectOption();\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_TAB:\n\t\t\t\tthis.hideResults();\n\t\t\t\tbreak;\n\t\t\tcase e.KEY_HOME:\n\t\t\tcase e.KEY_END:\n\t\t\tcase e.KEY_SHIFT:\n\t\t\tcase e.KEY_LEFT_ARROW:\n\t\t\tcase e.KEY_RIGHT_ARROW:\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tvar value = this.domNode.value;\n\t\t\t\tif(value != this.lastValue) {\n\t\t\t\t\tthis.onChange(value, this.lastValue);\n\t\t\t\t\tthis.lastValue = value;\n\t\t\t\t\tthis.startSearch(value);\n\t\t\t\t}\n\t\t}","this_variables":["lastValue"]}}},"jot.widget.JotComboBox.mouseover":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar node = e.target;\n\t\twhile(node && node != this.domNode) {\n\t\t\tif(dojo.html.hasClass(node, \"jot-comboBoxItem\")) {\n\t\t\t\tthis.highlightNode(node);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tnode = node.parentNode;\n\t\t}"}}},"jot.widget.JotComboBox.onChange":{"_":{"meta":{"summary":"","parameters":{"newValue":{"type":""},"oldValue":{"type":""}},"src":""}}},"jot.widget.JotComboBox.selectOption":{"_":{"meta":{"summary":"","src":"\t\tif(this.highlightedNode) {\n\t\t\tvar value = this.highlightedNode.getAttribute(\"value\");\n\t\t\tthis.hideResults();\n\t\t\tthis.domNode.value = value;\n\t\t\tthis.value = value;\n\t\t\tthis.onSelectOption(value);\n\t\t} else if(!this.resultsVisible()) {\n\t\t\tthis.value = this.domNode.value;\n\t\t\tthis.onConfirmSelection(value);\n\t\t}","this_variables":["domNode.value","value"]}}},"jot.widget.JotComboBox.onSelectOption":{"_":{"meta":{"summary":"","parameters":{"value":{"type":""}},"src":""}}},"jot.widget.JotComboBox.onConfirmSelection":{"_":{"meta":{"summary":"","parameters":{"value":{"type":""}},"src":""}}},"jot.widget.JotComboBox.highlightNextOption":{"_":{"meta":{"summary":"","src":"\t\tvar node = this.highlightedNode;\n\t\tif(node) {\n\t\t\tnode = dojo.html.getNextSiblingElement(node);\n\t\t}\n\t\t\/\/ either at beginning or end of list\n\t\tif(!node) {\n\t\t\tnode = dojo.html.getFirstChildElement(this.boxNode);\n\t\t}\n\n\t\tthis.highlightNode(node);"}}},"jot.widget.JotComboBox.highlightPreviousOption":{"_":{"meta":{"summary":"","src":"\t\tvar node = this.highlightedNode;\n\t\tif(node) {\n\t\t\tnode = dojo.html.getPreviousSiblingElement(node);\n\t\t}\n\t\t\/\/ either at beginning or end of list\n\t\tif(!node) {\n\t\t\tnode = dojo.html.getLastChildElement(this.boxNode);\n\t\t}\n\n\t\tthis.highlightNode(node);"}}},"jot.widget.JotComboBox.highlightNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tif(this.highlightedNode) {\n\t\t\tdojo.html.removeClass(this.highlightedNode, \"highlighted\");\n\t\t}\n\t\tif(node) {\n\t\t\tdojo.html.addClass(node, \"highlighted\");\n\t\t} else {\n\t\t\tdojo.debug(\"highlightNextOption\", \"nothing to highlight\");\n\t\t}\n\t\tthis.highlightedNode = node;","this_variables":["highlightedNode"]}}},"jot.widget.JotComboBox.showResults":{"_":{"meta":{"summary":"","src":"\t\tthis.boxNode.style.left = dojo.html.getAbsoluteX(this.domNode) + \"px\";\n\t\tthis.boxNode.style.top = dojo.html.getAbsoluteY(this.domNode) + this.domNode.offsetHeight + \"px\";\n\t\tthis.highlightNextOption();\n\t\tthis.boxNode.style.display = \"block\";","this_variables":["boxNode.style.left","boxNode.style.top","boxNode.style.display"]}}},"jot.widget.JotComboBox.provideResults":{"_":{"meta":{"summary":"","parameters":{"items":{"type":""}},"src":"\t\tthis.clearResults();\n\t\tif(items.length > 0) {\n\t\t\tfor(var i = 0; i < items.length; i++) {\n\t\t\t\tvar item = items[i];\n\t\t\t\tvar node = document.createElement(\"div\");\n\t\t\t\tnode.setAttribute(\"value\", item.value);\n\t\t\t\tnode.className = \"jot-comboBoxItem\";\n\t\t\t\tnode.innerHTML = item.key;\n\t\t\t\tthis.boxNode.appendChild(node);\n\t\t\t}\n\t\t\tthis.showResults();\n\t\t} else {\n\t\t\tthis.hideResults();\n\t\t}"}}},"jot.widget.JotComboBox.clearResults":{"_":{"meta":{"summary":"","src":"\t\tthis.highlightedNode = null;\n\t\tthis.boxNode.innerHTML = \"\";","this_variables":["highlightedNode","boxNode.innerHTML"]}}},"jot.widget.JotComboBox.hideResults":{"_":{"meta":{"summary":"","src":"\t\tthis.boxNode.style.display = \"none\";\n\t\tthis.clearResults();","this_variables":["boxNode.style.display"]}}},"jot.widget.JotComboBox.resultsVisible":{"_":{"meta":{"summary":"","src":"\t\treturn this.boxNode.style.display == \"block\";","this_variables":["boxNode.style.display"]}}},"jot.widget.userEmailDataProvider":{"_":{"meta":{"summary":"","parameters":{"data":{"type":""},"limit":{"type":""}},"src":"\tthis.data = [];\n\tthis.caseSensitive = false;\n\tthis.limit = limit || 15;\n\n\tthis.startSearch = function(str) {\n\t\tvar items = [];\n\t\tif(!dojo.string.isBlank(str)) {\n\t\t\tvar re = new RegExp(\"(\\\\s|\\\\(|^)(\" + str.replace(\/\\\\\/g, \"\\\\\\\\\") + \")\", this.caseSensitive ? \"g\" : \"ig\");\n\t\t\tfor(var i = 0; i < this.data.length; i++) {\n\t\t\t\tif(re.test(this.data[i].key)) {\n\t\t\t\t\titems.push({\n\t\t\t\t\t\tkey: this.data[i].key.replace(re, '$1<b>$2<\/b>'),\n\t\t\t\t\t\tvalue: this.data[i].value,\n\t\t\t\t\t\ttoString: function() { return this.key; }\n\t\t\t\t\t});\n\t\t\t\t\tif(items.length >= this.limit) { break; }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\titems.sort();\n\t\tthis.provideResults(items);\n\t}\n\n\tthis.provideResults = function(items) {\n\t}\n\n\tthis.setData = function(pairs) {\n\t\treturn this.addData(pairs, true);\n\t}\n\n\tthis.addData = function(pairs, clearCurrent) {\n\t\tif(clearCurrent) { this.data = []; }\n\n\t\tfor(var i = 0; i < pairs.length; i++) {\n\t\t\tvar email = pairs[i][0];\n\t\t\tvar name = pairs[i][1];\n\t\t\tvar key = name + \" (\" + email + \")\";\n\t\t\tthis.data.push({\n\t\t\t\tkey: key,\n\t\t\t\tvalue: email\n\t\t\t});\n\t\t}\n\t}\n\n\tthis.removeEmail = function(email) {\n\t\tfor(var i = 0; i < this.data.length; i++) {\n\t\t\tif(email == this.data[i].value) {\n\t\t\t\tthis.data.splice(i, 1);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tif(dojo.lang.isArray(data)) {\n\t\tthis.setData(data);\n\t} else if(dojo.lang.isString(data) || data instanceof dojo.uri.Uri) {\n\t\tif(data.charAt(0) == '#') {\n\t\t\tdata = window[data.substring(1)];\n\t\t\tthis.setData(data);\n\t\t} else {\n\t\t\t\/\/ dojo.io.bind to grab the data\n\t\t}\n\t}","this_variables":["data","caseSensitive","limit","startSearch","provideResults","setData","addData","removeEmail"]}}},"jot.widget.userEmailDataProvider.startSearch":{"_":{"meta":{"summary":"","parameters":{"str":{"type":""}},"src":"\t\tvar items = [];\n\t\tif(!dojo.string.isBlank(str)) {\n\t\t\tvar re = new RegExp(\"(\\\\s|\\\\(|^)(\" + str.replace(\/\\\\\/g, \"\\\\\\\\\") + \")\", this.caseSensitive ? \"g\" : \"ig\");\n\t\t\tfor(var i = 0; i < this.data.length; i++) {\n\t\t\t\tif(re.test(this.data[i].key)) {\n\t\t\t\t\titems.push({\n\t\t\t\t\t\tkey: this.data[i].key.replace(re, '$1<b>$2<\/b>'),\n\t\t\t\t\t\tvalue: this.data[i].value,\n\t\t\t\t\t\ttoString: function() { return this.key; }\n\t\t\t\t\t});\n\t\t\t\t\tif(items.length >= this.limit) { break; }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\titems.sort();\n\t\tthis.provideResults(items);"}}},"jot.widget.userEmailDataProvider.provideResults":{"_":{"meta":{"summary":"","parameters":{"items":{"type":""}},"src":""}}},"jot.widget.userEmailDataProvider.setData":{"_":{"meta":{"summary":"","parameters":{"pairs":{"type":""}},"src":"\t\treturn this.addData(pairs, true);"}}},"jot.widget.userEmailDataProvider.addData":{"_":{"meta":{"summary":"","parameters":{"pairs":{"type":""},"clearCurrent":{"type":""}},"src":"\t\tif(clearCurrent) { this.data = []; }\n\n\t\tfor(var i = 0; i < pairs.length; i++) {\n\t\t\tvar email = pairs[i][0];\n\t\t\tvar name = pairs[i][1];\n\t\t\tvar key = name + \" (\" + email + \")\";\n\t\t\tthis.data.push({\n\t\t\t\tkey: key,\n\t\t\t\tvalue: email\n\t\t\t});\n\t\t}","this_variables":["data"]}}},"jot.widget.userEmailDataProvider.removeEmail":{"_":{"meta":{"summary":"","parameters":{"email":{"type":""}},"src":"\t\tfor(var i = 0; i < this.data.length; i++) {\n\t\t\tif(email == this.data[i].value) {\n\t\t\t\tthis.data.splice(i, 1);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}"}}}}}},"dojo.widget.jot.JotCorkboardItemContainer":{"meta":{"requires":{"common":["dojo.widget.*","jot.widget.JotNodeItem"]},"methods":{"jot.widget.HTMLJotCorkboardItemContainer":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\n\t\/\/ widget properties\n\tthis.widgetType = \"JotCorkboardItemContainer\";\n\tthis.isContainer = true;\n\tthis.searchUrl = \"\";\n\tthis.baseSearchUrl = \"\";\n\tthis.attachmentSearchUrl = \"\";\n\tvar _lastSearchUrl = \"\";\n\tthis.webspaceRoot = \"\";\n\tthis._newItemWidget = null;\n\tvar _addingNewItem = false;\n\n\tthis.buildRendering = function(args, frag){\n\t\tthis.domNode = frag[\"dojo:jotcorkboarditemcontainer\"].nodeRef;\n\t\tthis.containerNode = this.domNode;\n\t\tthis.fillInTemplate(args, frag);\n\t}\n\n\tthis.addNewItem = function(){\n\t\tdj_debug(\"addNewItem\");\n\t\tif(!_addingNewItem){\n\t\t\t_addingNewItem = true;\n\t\t\tthis.buildNewItemWidget();\n\t\t}\n\t}\n\n\tthis.buildNewItemWidget = function(){\n\t\tdj_debug(\"buildNewItemWidget\");\n\t\tvar _this = this;\n\t\tthis._newItemWidget = this.addItem({\n\t\t\twebspaceRoot: this.webspaceRoot,\n\t\t\tattachmentSearchUrl: this.attachmentSearchUrl\n\t\t});\n\t\tthis.domNode.insertBefore(this._newItemWidget.domNode, this.domNode.firstChild);\n\t\tvar opacityPrefix = \"<span style='opacity: 0.5; -moz-opacity: 0.5; filter: alpha(Opacity=50);'>\";\n\t\twith(this._newItemWidget){\n\t\t\topen();\n\t\t\tinitializeEdit();\n\t\t\tdescriptionEditWidget.editable.innerHTML = opacityPrefix+\"click to add heading<\/span>\";\n\t\t\tdescriptionEditWidget.textValue = \"\";\n\t\t\tdescriptionEditWidget.beginEdit();\n\t\t\titemContentEditWidget.beginEdit();\n\t\t\tdateNode.innerHTML = opacityPrefix+\"drag a date here to add to calendar<\/span>\";\n\t\t\tsaveCancelContainer.style.display = \"\";\n\t\t}\n\t\tdojo.event.connect(this._newItemWidget, \"saveAsNewItem\", function(){\n\t\t\t_addingNewItem = false;\n\t\t\t_this._newItemWidget = null;\n\t\t});\n\t}\n\n\tthis.getDataFromFilter = function(filterObj){\n\t\t\/\/ construct a search URL based on the filter object that's passed.\n\t\tvar amap = {};\n\t\tfor(var x in filterObj){\n\t\t\tif((typeof filterObj[x][\"join\"] == \"function\")&&(filterObj[x].length > 0)){\n\t\t\t\tamap[x] = filterObj[x].join(\",\");\n\t\t\t}\n\t\t}\n\t\tvar qs = \"?\"+dojo.io.argsFromMap(amap);\n\t\tthis.searchUrl = this.baseSearchUrl+qs;\n\n\t\t\/\/ now fetch it!\n\t\tthis.getData(true);\n\t}\n\n\tthis.getData = function(replace){\n\t\tif((!this.searchUrl.length)||(_lastSearchUrl==this.searchUrl)){\n\t\t\tdj_debug(\"attempted to search with a stale or invalid search string\");\n\t\t}else{\n\t\t\tif(replace){\n\t\t\t\t\/\/ FIXME: should we be caching for future use?\n\t\t\t\tthis.destroyChildren();\n\t\t\t}\n\t\t\t\/\/ build an arguments object for dojo.io.bind\n\t\t\tvar ba = {\n\t\t\t\turl: this.searchUrl+((this.searchUrl.indexOf(\"?\")>=0) ? \"&\" : \"?\" )+\"theme=none\",\n\t\t\t\tmimetype: \"text\/xml\",\n\t\t\t\terror: function(){\n\t\t\t\t\tdj_debug(\"search failed!\");\n\t\t\t\t},\n\t\t\t\tloaded: function(type, doc, evt){ return; }\n\t\t\t};\n\t\t\tdj_debug(ba.url);\n\t\t\t\/\/ connect a handler to it\n\t\t\tdojo.event.connect(ba, \"loaded\", this, \"populateFromSearch\");\n\t\t\t\/\/ fire off the request!\n\t\t\tdojo.io.bind(ba);\n\t\t\t_lastSearchUrl = this.searchUrl;\n\t\t}\n\t}\n\n\tthis.populateFromSearch = function(type, doc, evt){\n\t\t\/\/ FIXME: totally foo-bar'd on safari!\n\t\t\/\/ \t\t\tapparently, Safari passes back a string here, and I'm not\n\t\t\/\/ \t\t\tentirely certain why. Initial indications are that it's\n\t\t\/\/ \t\t\tbecause we're passing back the result with an\n\t\t\/\/ \t\t\tincorrect\/incompatible mimetype\n\n\t\t\/\/ dj_debug(typeof doc);\n\t\t\/\/ dj_debug(doc.getElementsByTagName(\"*\").length); \/\/ FIXME: this returns 0 on safari! WTF?\n\t\t\/\/ dj_debug(\"replace: \", replace);\n\t\t\/\/ dj_debug(doc.getElementsByTagName(\"*\").length);\n\t\t\/\/ alert(dojo.xml.domUtil.innerXML(doc));\n\t\tvar itemsNode  = doc.getElementsByTagName(\"items\")[0];\n\t\tif(itemsNode){\n\t\t\t\/\/ dj_debug(\"itemsNode: \", itemsNode);\n\t\t\tvar items = itemsNode.getElementsByTagName(\"item\");\n\t\t\tvar fa = [];\n\t\t\tvar _this = this;\n\t\t\tfor(var x=0; x<items.length; x++){\n\t\t\t\tvar ix = items[x];\n\t\t\t\tfa.push((function(){\n\t\t\t\t\tvar ixo = ix.getAttribute(\"isOpen\");\n\t\t\t\t\tvar ixd = ix.getAttribute(\"itemDataUrl\");\n\t\t\t\t\treturn function(){\n\t\t\t\t\t\t_this.addItem({\n\t\t\t\t\t\t\twebspaceRoot: _this.webspaceRoot,\n\t\t\t\t\t\t\tattachmentSearchUrl: _this.attachmentSearchUrl,\n\t\t\t\t\t\t\tisOpen: eval(ixo),\n\t\t\t\t\t\t\titemDataUrl: ixd\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t})());\n\t\t\t}\n\t\t\tvar tic = new Date();\n\t\t\tvar ifl = fa.length;\n\t\t\tdojo.alg.delayThese(fa, null, 0, function(){\n\t\t\t\tdj_debug(\"building \", ifl, \" items from search took: \", new Date()-tic, \"ms\");\n\t\t\t});\n\t\t}\n\t}\n\n\tthis.fillInTemplate = function(){\n\t\tif(this.baseSearchUrl.length){\n\t\t\tthis.searchUrl = this.baseSearchUrl;\n\t\t\t\/\/ FIXME: should we uncomment, otherwise we often get 2 requests.\n\t\t\t\/\/ Could we wind up in a situation where we don't hear the original\n\t\t\t\/\/ filter request?\n\t\t\t\/\/ this.getData(true); \n\t\t}\n\t\tdojo.event.topic.subscribe(\"\/corkboard\/filter\", this, \"getDataFromFilter\");\n\t}\n\n\tthis.addItem = function(args){\n\t\tvar tn = this.containerNode.appendChild(document.createElement(\"span\"));\n\t\tvar wi = dojo.widget.fromScript(tn, \"JotNodeItem\", args, true)[0];\n\t\tthis.addChild(wi);\n\t\treturn wi;\n\t}","this_variables":["widgetType","isContainer","searchUrl","baseSearchUrl","attachmentSearchUrl","webspaceRoot","_newItemWidget","buildRendering","domNode","containerNode","addNewItem","buildNewItemWidget","getDataFromFilter","getData","populateFromSearch","fillInTemplate","addItem"],"inherits":["dojo.widget.HtmlWidget"]}}},"jot.widget.HTMLJotCorkboardItemContainer.buildRendering":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tthis.domNode = frag[\"dojo:jotcorkboarditemcontainer\"].nodeRef;\n\t\tthis.containerNode = this.domNode;\n\t\tthis.fillInTemplate(args, frag);","this_variables":["domNode","containerNode"]}}},"jot.widget.HTMLJotCorkboardItemContainer.addNewItem":{"_":{"meta":{"summary":"","src":"\t\tdj_debug(\"addNewItem\");\n\t\tif(!_addingNewItem){\n\t\t\t_addingNewItem = true;\n\t\t\tthis.buildNewItemWidget();\n\t\t}"}}},"jot.widget.HTMLJotCorkboardItemContainer.buildNewItemWidget":{"_":{"meta":{"summary":"","src":"\t\tdj_debug(\"buildNewItemWidget\");\n\t\tvar _this = this;\n\t\tthis._newItemWidget = this.addItem({\n\t\t\twebspaceRoot: this.webspaceRoot,\n\t\t\tattachmentSearchUrl: this.attachmentSearchUrl\n\t\t});\n\t\tthis.domNode.insertBefore(this._newItemWidget.domNode, this.domNode.firstChild);\n\t\tvar opacityPrefix = \"<span style='opacity: 0.5; -moz-opacity: 0.5; filter: alpha(Opacity=50);'>\";\n\t\twith(this._newItemWidget){\n\t\t\topen();\n\t\t\tinitializeEdit();\n\t\t\tdescriptionEditWidget.editable.innerHTML = opacityPrefix+\"click to add heading<\/span>\";\n\t\t\tdescriptionEditWidget.textValue = \"\";\n\t\t\tdescriptionEditWidget.beginEdit();\n\t\t\titemContentEditWidget.beginEdit();\n\t\t\tdateNode.innerHTML = opacityPrefix+\"drag a date here to add to calendar<\/span>\";\n\t\t\tsaveCancelContainer.style.display = \"\";\n\t\t}\n\t\tdojo.event.connect(this._newItemWidget, \"saveAsNewItem\", function(){\n\t\t\t_addingNewItem = false;\n\t\t\t_this._newItemWidget = null;\n\t\t});","this_variables":["_newItemWidget"]}}},"jot.widget.HTMLJotCorkboardItemContainer.getDataFromFilter":{"_":{"meta":{"summary":"","parameters":{"filterObj":{"type":""}},"src":"\t\tfor(var x in filterObj){\n\t\t\tif((typeof filterObj[x][\"join\"] == \"function\")&&(filterObj[x].length > 0)){\n\t\t\t\tamap[x] = filterObj[x].join(\",\");\n\t\t\t}\n\t\t}\n\t\tvar qs = \"?\"+dojo.io.argsFromMap(amap);\n\t\tthis.searchUrl = this.baseSearchUrl+qs;\n\n\t\t\/\/ now fetch it!\n\t\tthis.getData(true);","this_variables":["searchUrl"]}}},"jot.widget.HTMLJotCorkboardItemContainer.getData":{"_":{"meta":{"summary":"","parameters":{"replace":{"type":""}},"src":"\t\tif((!this.searchUrl.length)||(_lastSearchUrl==this.searchUrl)){\n\t\t\tdj_debug(\"attempted to search with a stale or invalid search string\");\n\t\t}else{\n\t\t\tif(replace){\n\t\t\t\t\/\/ FIXME: should we be caching for future use?\n\t\t\t\tthis.destroyChildren();\n\t\t\t}\n\t\t\t\/\/ build an arguments object for dojo.io.bind\n\t\t\tvar ba = {\n\t\t\t\turl: this.searchUrl+((this.searchUrl.indexOf(\"?\")>=0) ? \"&\" : \"?\" )+\"theme=none\",\n\t\t\t\tmimetype: \"text\/xml\",\n\t\t\t\terror: function(){\n\t\t\t\t\tdj_debug(\"search failed!\");\n\t\t\t\t},\n\t\t\t\tloaded: function(type, doc, evt){ return; }\n\t\t\t};\n\t\t\tdj_debug(ba.url);\n\t\t\t\/\/ connect a handler to it\n\t\t\tdojo.event.connect(ba, \"loaded\", this, \"populateFromSearch\");\n\t\t\t\/\/ fire off the request!\n\t\t\tdojo.io.bind(ba);\n\t\t\t_lastSearchUrl = this.searchUrl;\n\t\t}"}}},"jot.widget.HTMLJotCorkboardItemContainer.populateFromSearch":{"_":{"meta":{"summary":"","parameters":{"type":{"type":""},"doc":{"type":""},"evt":{"type":""}},"src":"\t\tif(itemsNode){\n\t\t\t\/\/ dj_debug(\"itemsNode: \", itemsNode);\n\t\t\tvar items = itemsNode.getElementsByTagName(\"item\");\n\t\t\tvar fa = [];\n\t\t\tvar _this = this;\n\t\t\tfor(var x=0; x<items.length; x++){\n\t\t\t\tvar ix = items[x];\n\t\t\t\tfa.push((function(){\n\t\t\t\t\tvar ixo = ix.getAttribute(\"isOpen\");\n\t\t\t\t\tvar ixd = ix.getAttribute(\"itemDataUrl\");\n\t\t\t\t\treturn function(){\n\t\t\t\t\t\t_this.addItem({\n\t\t\t\t\t\t\twebspaceRoot: _this.webspaceRoot,\n\t\t\t\t\t\t\tattachmentSearchUrl: _this.attachmentSearchUrl,\n\t\t\t\t\t\t\tisOpen: eval(ixo),\n\t\t\t\t\t\t\titemDataUrl: ixd\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t})());\n\t\t\t}\n\t\t\tvar tic = new Date();\n\t\t\tvar ifl = fa.length;\n\t\t\tdojo.alg.delayThese(fa, null, 0, function(){\n\t\t\t\tdj_debug(\"building \", ifl, \" items from search took: \", new Date()-tic, \"ms\");\n\t\t\t});\n\t\t}"}}},"jot.widget.HTMLJotCorkboardItemContainer.fillInTemplate":{"_":{"meta":{"summary":"","src":"\t\tif(this.baseSearchUrl.length){\n\t\t\tthis.searchUrl = this.baseSearchUrl;\n\t\t\t\/\/ FIXME: should we uncomment, otherwise we often get 2 requests.\n\t\t\t\/\/ Could we wind up in a situation where we don't hear the original\n\t\t\t\/\/ filter request?\n\t\t\t\/\/ this.getData(true); \n\t\t}\n\t\tdojo.event.topic.subscribe(\"\/corkboard\/filter\", this, \"getDataFromFilter\");","this_variables":["searchUrl"]}}},"jot.widget.HTMLJotCorkboardItemContainer.addItem":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""}},"src":"\t\tvar tn = this.containerNode.appendChild(document.createElement(\"span\"));\n\t\tvar wi = dojo.widget.fromScript(tn, \"JotNodeItem\", args, true)[0];\n\t\tthis.addChild(wi);\n\t\treturn wi;"}}}}}},"dojo.widget.jot.JotCorkboardUtil":{"meta":{"requires":{"common":["dojo.widget.*","dojo.dnd.*"]},"methods":{"jot.cbUtil.getMonthName":{"_":{"meta":{"summary":"","parameters":{"mth":{"type":""},"yr":{"type":""}},"src":"\t\tif(typeof mth == \"object\"){\n\t\t\tvar dao = mth;\n\t\t\tmth = dao.getMonth()+1;\n\t\t\tyr = dao.getFullYear();\n\t\t}else{\n\t\t\tmth = (((!mth)) ? this.month: mth);\n\t\t\tyr = ((!yr) ? this.year: yr);\n\t\t}\n\t\treturn this.months[this.getMonthNum(mth, yr)-1];"}}},"jot.cbUtil.getMonthNum":{"_":{"meta":{"summary":"","parameters":{"mth":{"type":""},"yr":{"type":""}},"src":"\t\t\td = String(mth+\" 01 \"+yr).toDate();\n\t\t\tif(d == null){ return -1; }\n\t\t\t\n\t\t\tmth = d.getMonth() + 1;\n\t\t}\n\t\treturn mth;"}}},"jot.cbUtil.getMonthStartDay":{"_":{"meta":{"summary":"","parameters":{"mth":{"type":""},"yr":{"type":""}},"src":"\t\tyr = ((!yr) ? this.year: yr);\n\n\t\t\/\/ ensure we're working with valid numbers\n\t\tif((isNaN(yr))||(mth < 1)||(mth > 12)){\n\t\t\treturn -1;\n\t\t}\n\n\t\tmth = this.getMonthNum(mth, yr);\n\n\t\tvar nd = new Date(yr, mth-1, 1);\n\t\t\/\/ according to the ECMA-262 spec, this will return 0 for Sunday, 1 for\n\t\t\/\/ Monday, etc...\n\t\treturn nd.getDay();"}}},"jot.cbUtil.getNumDays":{"_":{"meta":{"summary":"","parameters":{"mth":{"type":""},"r":{"type":""}},"src":"\t\tmth = ((!mth) ? this.month : mth);\n\t\tyr = ((!yr) ? this.year : yr);\n\t\tif((isNaN(yr))||(mth < 1)||(mth > 12)){\n\t\t\treturn -1;\n\t\t}\n\n\t\tmth = this.getMonthNum(mth, yr);\n\n\t\t\/\/ April, June, November & September have 30, the rest have 31\n\t\t\/\/ February is the exception where we have to figure out leap year\n\t\tif((mth == 4)||(mth == 6)||(mth == 9)||(mth == 11)){\n\t\t\treturn 30;\n\t\t}else if(mth == 2){\n\t\t\tif((yr%4) == 0){\n\t\t\t\treturn 29;\n\t\t\t}else{\n\t\t\t\treturn 28;\n\t\t\t}\n\t\t}else{\n\t\t\treturn 31;\n\t\t}"}}},"jot.cbUtil.dateFromJotString":{"_":{"meta":{"summary":"","parameters":{"js":{"type":""}},"src":"\t\treturn (new Date(js.substr(0, 4), js.substr(4, 2), js.substr(6, 2), js.substr(9, 2), js.substr(11, 2), js.substr(13, 2)));"}}},"jot.cbUtil.dateToJotString":{"_":{"meta":{"summary":"","parameters":{"date":{"type":""}},"src":"\t\tvar ds = _prefixInt(date.getMonth());\n\t\tvar hs = _prefixInt(date.getHours());\n\t\tvar mis = _prefixInt(date.getMinutes());\n\t\tvar ss = _prefixInt(date.getSeconds());\n\t\t\/\/ FIXME: should we not be adding the 'Z'? it seems to indicate UTC time.\n\t\treturn date.getFullYear()+ms+ds+\"T\"+hs+mis+ss+\"Z\";"}}},"jot.cbUtil.DragHandleSource":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"type":{"type":""},"dragObject":{"type":""}},"src":"\t\tthis.domNode = node;\n\t\tthis.dragObject = dragObject;\n\t\t\/\/ register us\n\t\tdojo.dnd.DragSource.call(this);\n\n\t\t\/\/ set properties that might have been clobbered by the mixin\n\t\tthis.type = type||this.domNode.nodeName.toLowerCase();","this_variables":["domNode","dragObject","type"]}}},"jot.cbUtil.DragHandleSource.onDragStart":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\treturn new dojo.dnd.HtmlDragObject(this.dragObject, this.type);","this":"DragHandleSource"}}}}}},"dojo.widget.jot.JotDropdownButtons":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.SimpleDropdownButtons"]},"methods":{"jot.widget.HTMLJotDropdownButtons":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlSimpleDropdownButtons.call(this);\n\n\tthis.widgetType = \"JotDropdownButtons\";\n\tthis.templateCssPath = null;\n\n\tthis.menuTriggerClass = \"dropdownButtons\";\n\tthis.menuClass = \"dropdownButtonsMenu\";","this_variables":["widgetType","templateCssPath","menuTriggerClass","menuClass"],"inherits":["dojo.widget.HtmlSimpleDropdownButtons"]}}}}}},"dojo.widget.jot.JotEditor.abe":{"meta":{"requires":{"common":["dojo.widget.RichText","dojo.widget.Editor","dojo.widget.Dialog","jot.widget.JotImagePicker"]},"methods":{"jot.widget.JotEditor":{"_":{"meta":{"summary":"","src":"\tdojo.widget.html.Editor.call(this);\n\tthis.widgetType = \"JotEditor\";\n\tthis.supportedCommands.push(\"wikiword\");\n\tthis.rootPath = \"\";\n\n\tthis.handleWikiInit = function(){\n\t\tif(this._richText.isLoaded){\n\t\t\tjot.widget.JotEditor.autolinkWikiWords(this._richText);\n\t\t\tjot.widget.JotEditor.cleanupWord(this._richText);\n\t\t}else{\n\t\t\tdojo.event.kwConnect({\n\t\t\t\tsrcObj: this._richText,\n\t\t\t\tsrcFunc: \"onLoad\",\n\t\t\t\ttargetObj: this,\n\t\t\t\ttargetFunc: \"handleWikiInit\",\n\t\t\t\tonce: true\n\t\t\t});\n\t\t}\n\t}\n\n\tthis.fixGetItemProperties = function(mi){\n\t\tvar name = mi.args[0];\n\t\tif(name == \"wikiword\"){\n\t\t\treturn {\n\t\t\t\t\"name\": name,\n\t\t\t\ttoggleItem: true,\n\t\t\t\ticon: this.getCommandImage(name)\n\t\t\t};\n\t\t}else{\n\t\t\treturn mi.proceed();\n\t\t}\n\t}\n\n\tdojo.event.connect(this, \"fillInTemplate\", this, \"handleWikiInit\");\n\n\tdojo.event.connect(\"around\", \n\t\t\t\t\t\tthis, \"getItemProperties\",\n\t\t\t\t\t\tthis, \"fixGetItemProperties\");\n\n\tthis.fixOnAction = function(mi){\n\t\tvar cmd = mi.args[0];\n\t\tvar value = mi.args[1];\n\t\tif(cmd == \"insertimage\"){\n\t\t\tvar dlg = dojo.widget.createWidget(\"Dialog\", {}, document.body, \"last\");\n\t\t\tvar tmp = document.createElement(\"span\");\n\t\t\tdlg.containerNode.appendChild(tmp);\n\t\t\tvar ip = dojo.widget.createWidget(\"JotImagePicker\", {rootPath: this.rootPath}, tmp);\n\t\t\tdlg.show();\n\n\t\t\tvar handleInsert = dojo.lang.hitch(this, function(url){\n\t\t\t\tthis._richText.editNode.focus();\n\t\t\t\tthis._richText.execCommand(\"insertimage\", url);\t\n\t\t\t\tsetTimeout(this._richText.onDisplayChanged, 500);\n\t\t\t});\n\n\t\t\tdojo.event.connect(ip, \"insertImage\", handleInsert);\n\t\t\tdojo.event.connect(ip, \"insertImage\", dlg, \"hide\");\n\t\t\tdojo.event.connect(ip, \"destroy\", dlg, \"hide\");\n\t\t}else{\n\t\t\treturn mi.proceed();\n\t\t}\n\t}\n\n\tdojo.event.connect(\"around\", \n\t\t\t\t\t\tthis, \"onAction\",\n\t\t\t\t\t\tthis, \"fixOnAction\");","this_variables":["widgetType","rootPath","handleWikiInit","fixGetItemProperties","fixOnAction"],"inherits":["dojo.widget.html.Editor"]}}},"jot.widget.JotEditor.handleWikiInit":{"_":{"meta":{"summary":"","src":"\t\tif(this._richText.isLoaded){\n\t\t\tjot.widget.JotEditor.autolinkWikiWords(this._richText);\n\t\t\tjot.widget.JotEditor.cleanupWord(this._richText);\n\t\t}else{\n\t\t\tdojo.event.kwConnect({\n\t\t\t\tsrcObj: this._richText,\n\t\t\t\tsrcFunc: \"onLoad\",\n\t\t\t\ttargetObj: this,\n\t\t\t\ttargetFunc: \"handleWikiInit\",\n\t\t\t\tonce: true\n\t\t\t});\n\t\t}"}}},"jot.widget.JotEditor.fixGetItemProperties":{"_":{"meta":{"summary":"","parameters":{"mi":{"type":""}},"src":"\t\tvar name = mi.args[0];\n\t\tif(name == \"wikiword\"){\n\t\t\treturn {\n\t\t\t\t\"name\": name,\n\t\t\t\ttoggleItem: true,\n\t\t\t\ticon: this.getCommandImage(name)\n\t\t\t};\n\t\t}else{\n\t\t\treturn mi.proceed();\n\t\t}"}}},"jot.widget.JotEditor.fixOnAction":{"_":{"meta":{"summary":"","parameters":{"mi":{"type":""}},"src":"\t\tvar cmd = mi.args[0];\n\t\tvar value = mi.args[1];\n\t\tif(cmd == \"insertimage\"){\n\t\t\tvar dlg = dojo.widget.createWidget(\"Dialog\", {}, document.body, \"last\");\n\t\t\tvar tmp = document.createElement(\"span\");\n\t\t\tdlg.containerNode.appendChild(tmp);\n\t\t\tvar ip = dojo.widget.createWidget(\"JotImagePicker\", {rootPath: this.rootPath}, tmp);\n\t\t\tdlg.show();\n\n\t\t\tvar handleInsert = dojo.lang.hitch(this, function(url){\n\t\t\t\tthis._richText.editNode.focus();\n\t\t\t\tthis._richText.execCommand(\"insertimage\", url);\t\n\t\t\t\tsetTimeout(this._richText.onDisplayChanged, 500);\n\t\t\t});\n\n\t\t\tdojo.event.connect(ip, \"insertImage\", handleInsert);\n\t\t\tdojo.event.connect(ip, \"insertImage\", dlg, \"hide\");\n\t\t\tdojo.event.connect(ip, \"destroy\", dlg, \"hide\");\n\t\t}else{\n\t\t\treturn mi.proceed();\n\t\t}"}}},"jot.widget.JotEditor.autolinkWikiWords":{"_":{"meta":{"summary":"","parameters":{"editor":{"type":""}},"src":"\tvar nonwikiword = \/[^a-z0-9A-Z]\/;\n\tvar wikiword = \/(^|\\b|[^a-z0-9A-Z])([A-Z0-9]+[a-z][a-z0-9]*[A-Z][A-Za-z0-9]*)(\\b|[^a-z0-9A-Z]|$)\/;\n\t\t\n\t\/** Hooks into the keyPress event *\/\n\tfunction keyPress (e) {\n\t\tif(e.keyCode == e.KEY_ENTER || e.keyCode == e.KEY_RETURN){\n\t\t\tvar character = \"\\n\";\n\t\t}else if (e.charCode != 0){\n\t\t\tvar character = String.fromCharCode(e.charCode);\n\t\t}else{\n\t\t\treturn;\n\t\t}\n\t\tif(nonwikiword.test(character)){\n\t\t\tvar node = editor.getSelectedNode();\n\t\t\twhile(node.parentNode && node.nodeName != \"A\"){ node = node.parentNode; }\n  \t\t\tif(node.href == \"wiki-autolink:\"){ \/\/ we're modifying a wiki autolink\n\t\t\t\teditor.execCommand(\"unlink\");\n\t\t\t}\n\t\t\t\n\t\t\tvar range = shouldLinkWikiWord(e);\n\t\t\tif(range){ dojo.lang.setTimeout(linkWikiWord, 1, range); }\n\t\t}\n\t}\n\t\n\tfunction stringAfterKeyPress (e) {\n\t\tif (this.document.selection) { \/\/ Internet Explorer\n\t\t\tvar range = editor.document.selection.createRange();\n\t\t\trange.moveStart(\"word\", -1);\n\t\t\tvar word = range.text + String.fromCharCode(e.charCode);\n\t\t\trange.collapse(false);\n\t\t\trange.moveEnd(\"word\", 1);\n\t\t\tword += range.text;\n\t\t\t\n\t\t\treturn word;\n\t\t} else if (dojo.render.html.mozilla) { \/\/ Mozilla\n\t\t\tif (editor.getSelectedNode().nodeType != Node.TEXT_NODE) { return false; }\n\n\t\t\tvar selection = editor.window.getSelection();\n\t\t\tvar selectionRange = selection.getRangeAt(0);\n\n\t\t\t\/\/ consider adjacent text nodes\n\t\t\t\/\/ note: we can't just normalize as this fouls our rich text editing\n\t\t\tvar node = selectionRange.startContainer, startNudge = 0;\n\t\t\twhile (node.previousSibling && node.previousSibling.nodeType == Node.TEXT_NODE) {\n\t\t\t\tnode = node.previousSibling;\n\t\t\t\tstartNudge += node.nodeValue.length\n\t\t\t}\n\t\t\tvar text = \"\", textNodes = [];\n\t\t\tdo {\n\t\t\t\ttextNodes[text.length] = node;\n\t\t\t\ttext += node.nodeValue;\n\t\t\t\tnode = node.nextSibling;\n\t\t\t} while (node && node.nodeType == Node.TEXT_NODE)\n\n\t\t\t\/\/ find the word around the cursor\n\t\t\tvar range = selectionRange.cloneRange();\n\t\t\tvar startPosition = text.substr(0, range.startOffset + startNudge).search(\/(\\w)*$\/);\n\t\t\tvar endPosition = text.substr(range.startOffset + startNudge)\n\t\t\t\t\t.match(\/^(\\w)*\/)[0].length + range.startOffset + startNudge;\n\n\t\t\tvar word = text.substring(startPosition, range.startOffset + startNudge) +\n\t\t\t\tString.fromCharCode(e.charCode) + text.substring(range.startOffset + startNudge, endPosition);\n\n\t\t\treturn word;\n\t\t} else { \/\/ Safari\n\t\t\t\/\/ Selection returned is a string primitive, bleh!\n\t\t\t\/\/var selection = editor.window.getSelection();\n\t\t}\n\t\treturn \"\";\n\t}\n\t\n\t\/**\n\t * Works out whether there is a WikiWord that needs highlighting.\n\t *\n\t * @param e The event object associated with the event that occured\n\t * @return false if no action is to be taken or a Range object which contains\n\t *         the WikiWord which needs to be highlighted\n\t *\/\n\tfunction shouldLinkWikiWord (e) {\n\t\tif (this.document.selection) { \/\/ Internet Explorer\n\t\t\tvar range = editor.document.selection.createRange();\n\t\t\trange.moveStart(\"word\", -1);\n\t\t\trange.moveEnd(\"word\", 1);\n\t\t\t\n\t\t\tvar match = wikiword.exec(range.text);\n\t\t\tvar afterMatch = wikiword.exec(stringAfterKeyPress(e));\n\t\t\tif (!match || !afterMatch) { return false; }\n\t\t\tif (afterMatch[2] != match[2]) {\n\t\t\t\tif (afterMatch.index != match.index) { return false; }\n\t\t\t\tmatch = afterMatch;\n\t\t\t}\n\t\t\t\n\t\t\trange.moveStart(\"character\", match.index + match[1].length);\n\t\t\trange.collapse(true);\n\t\t\trange.moveEnd(\"character\", match[2].length);\n\t\t\treturn range;\n\n\t\t} else if (dojo.render.html.mozilla) { \/\/ Mozilla\n\t\t\tif (editor.getSelectedNode().nodeType != Node.TEXT_NODE) { return false; }\n\n\t\t\tvar selection = editor.window.getSelection();\n\t\t\tvar selectionRange = selection.getRangeAt(0);\n\n \t\t\t\/\/ consider adjacent text nodes\n \t\t\t\/\/ note: we can't just normalize as this fouls our rich text editing\n\t\t\tvar node = selectionRange.startContainer, startNudge =  0;\n\t\t\twhile (node.previousSibling && node.previousSibling.nodeType == Node.TEXT_NODE) {\n\t\t\t\tnode = node.previousSibling;\n\t\t\t\tstartNudge += node.length\n\t\t\t}\n\t\t\tvar text = \"\", textNodes = [];\n \t\t\tdo {\n \t\t\t\tif (textNodes[text.length]) { textNodes[text.length].push(node); }\n \t\t\t\telse { textNodes[text.length] = [node]; }\n \t\t\t\ttext += node.nodeValue;\n \t\t\t\tnode = node.nextSibling;\n \t\t\t} while (node && node.nodeType == Node.TEXT_NODE)\n\n\t\t\t\/\/ find the word around the cursor\n\t\t\tvar range = selectionRange.cloneRange();\n\t\t\tvar startPosition = text.substr(0, range.startOffset + startNudge).search(\/(\\w)*$\/);\n\t\t\tvar endPosition = text.substr(range.startOffset + startNudge)\n\t\t\t\t\t.match(\/^(\\w)*\/)[0].length + range.startOffset + startNudge;\n\t\t\t\n\t\t\tvar word = text.substring(startPosition, endPosition);\n\n\t\t\tvar match = wikiword.exec(word);\n\t\t\tvar afterMatch = wikiword.exec(stringAfterKeyPress(e));\n\t\t\tif (!match || !afterMatch) { return false; }\n\t\t\tif (afterMatch[2] != match[2]) {\n\t\t\t\tif (afterMatch.index != match.index) { return false; }\n\t\t\t\tmatch = afterMatch;\n\t\t\t}\n\t\t\t\n\t\t\tstartPosition += match.index + match[1].length;\n\t\t\tfor (var startOffset = 0, startContainer;\n\t\t\t\t!(startContainer = textNodes[startPosition - startOffset]); startOffset++) {}\n\t\t\tendPosition = startPosition + match[2].length;\n\t\t\tfor (var endOffset = 1, endContainer;\n\t\t\t\t!(endContainer = textNodes[endPosition - endOffset]); endOffset++) {}\n\t\n\t\t\trange.setStart(startContainer[0], startOffset);\n\t\t\trange.setEnd(endContainer[endContainer.length - 1], endOffset);\n\n\t\t\treturn range;\n\t\t} else { \/\/ Safari\n\t\t\t\/\/ Selection returned is a string primitive, bleh!\n\t\t\t\/\/var selection = editor.window.getSelection();\n\t\t}\n\t\treturn false;\n\t}\n\t\n\t\/**\n\t * Links a WikiWord from a Range object.\n\t *\n\t * @param The Range object to link.\n\t *\/\n\tfunction linkWikiWord (range) {\n\t\t\/\/ This method uses the execCommand to highlight WikiWords for\n\t\t\/\/ two resaons:\n\t\t\/\/   1. The position of the cursor is maintained relative to the\n\t\t\/\/      text for us for free, no messing.\n\t\t\/\/   2. The operation is added to the undo stack for us and\n\t\t\/\/      recorded by the browser as an editing command, not as\n\t\t\/\/      an arbritrary DOM manipulation.\n\n\t\tif (range.execCommand) {\n\t\t\trange.execCommand(\"createlink\", false, \"wiki-autolink:\");\n\t\t} else {\n\t\t\t\/\/ grab selection\n\t\t\tvar selection = editor.window.getSelection();\n\t\t\tvar selectionRange = selection.getRangeAt(0);\n\t\t\t\n\t\t\t\/\/ select our word and link\n\t\t\tselection.removeAllRanges();\n\t\t\tselection.addRange(range);\n\t\t\teditor.execCommand(\"createlink\", \"wiki-autolink:\");\n\t\t\t\n\t\t\t\/\/ restore selection\n\t\t\tselection.removeAllRanges();\n\t\t\tselection.addRange(selectionRange);\n\t\t}\n\t}\n\t\n\tfunction locOnUnload (save) {\n\t\tvar links = editor.editNode.getElementsByTagName(\"a\");\n\t\tfor (var i = 0; i < links.length; i++) {\n\t\t\tif (links[i].href != \"wiki-autolink:\") { continue; }\n\t\t\tlinks[i].href = \"wiki:\/\" + dojo.dom.textContent(links[i]);\n\t\t}\n\t}\n\t\n\t\/\/ connect \n\tdojo.event.connect(editor, \"onKeyPress\", keyPress);\n\n\tif((editor[\"textarea\"])&&(editor.textarea[\"form\"])){\n\t\t\/\/ link things correctly\n\t\tdojo.event.kwConnect({\n\t\t\ttype: \"before\", \n\t\t\tsrcObj: editor.textarea.form, \n\t\t\tsrcFunc: \"onsubmit\", \n\t\t\tadviceFunc: locOnUnload\n\t\t});\n\t}\n\n\/\/\tdojo.event.connect(\"before\", editor, \"fillInTemplate\", onLoad);"}}},"findLastTextNode":{"_":{"meta":{"summary":"","parameters":{"element":{"type":""}},"src":"\t\t\t\t\tvar node = element.lastChild;\n\t\t\t\t\tdo {\n\t\t\t\t\t\tif (node.nodeType == dojo.dom.ELEMENT_NODE) {\n\t\t\t\t\t\t\tvar text = findLastTextNode(node);\n\t\t\t\t\t\t\tif (text) { return text; }\n\t\t\t\t\t\t} else if (node.nodeType == dojo.dom.TEXT_NODE) {\n\t\t\t\t\t\t\treturn node;\n\t\t\t\t\t\t}\t\t\t\t\t\n\t\t\t\t\t} while (node = node.previousSibling);"}}},"jot.widget.JotEditor.cleanupWord":{"_":{"meta":{"summary":"","parameters":{"editor":{"type":""}},"src":"\tfunction doCleanup(save){\n\t\tif(!save){ return; }\n\t\t\n\t\tfunction cleanClasses (node) {\n\t\t\t\/\/ clean class attributes\n\t\t\tif (!node.className) { return; }\n\t\t\tvar newClass = node.className.replace(\/(^|\\s)mso.*?(\\s|$)\/ig, ' ');\n\t\t\tif (newClass != node.className) {\n\t\t\t\tnode.className = newClass;\n\t\t\t\tif (!\/\\S\/.test(node.className)) {\n\t\t\t\t\tnode.removeAttribute(\"className\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction cleanStyles (node) {\n\t\t\t\/\/ clean style attributes\n\t\t\tvar declarations = node.style.cssText.split(\/\\s*;\\s*\/);\n\t\t\tvar declarationsLength = declarations.length;\n\t\t\tfor (var i = declarations.length; --i >= 0;) {\n\t\t\t\tvar line = declarations[i];\n\t\t\t\tif (\/^mso|^tab-stops|^layout-grid\/i.test(line) ||\n\t\t\t\t\t\/^margin\\s*:\\s*[0-9]+..\\s+[0-9]+..\\s+[0-9]+..\/i.test(line)) {\n\t\t\t\t\tdeclarations.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tdeclarations[i] = line.replace(\/windowtext\/, '#000');\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (declarationsLength != declarations.length) {\n\t\t\t\tnode.style.cssText = declarations.join(\"; \");\n\t\t\t}\n\t\t}\n\n\t\tfunction removeNode (node) {\n\t\t\twhile (node.hasChildNodes()) {\n\t\t\t\tnode.parentNode.insertBefore(node, node.firstChild);\n\t\t\t}\n\t\t\tnode.parentNode.removeChild(node);\n\t\t}\n\n\t\tfunction checkEmpty(node) {\n\t\t\tif (\/^(a|span|b|strong|i|em|font)$\/i.test(node.tagName) &&\n\t\t\t\tnode.childNodes.length == 0) {\n\t\t\t\tnode.parentNode.removeChild(el);\n\t\t\t}\n\t\t}\n\n\t\tfunction parseTree(root) {\n\t\t\tvar tag = root.tagName.toLowerCase(), i, next;\n\t\t\tif (\/:\/.test(tag)) { stripTag(root); }\n\t\t\telse {\n\t\t\t\tfor (var i = 0; i < root.childNodes.length; i++) {\n\t\t\t\t\tvar child = root.childNodes[i];\n\t\t\t\t\tif (child.nodeType == 1) {\n\t\t\t\t\t\tcleanClasses(child);\n\t\t\t\t\t\tcleanStyles(child);\n\t\t\t\t\t\tparseTree(child);\n\t\t\t\t\t\tcheckEmpty(child);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\t\/\/ start it off\n\t\tparseTree(editor.domNode);\n\t}\n\n\tdojo.event.connect(editor, \"close\", doCleanup);"}}}}}},"dojo.widget.jot.JotEditor":{"meta":{"requires":{"common":["dojo.widget.RichText","dojo.widget.Editor","dojo.widget.Dialog","jot.widget.JotImagePicker"]},"methods":{"jot.widget.JotEditor":{"_":{"meta":{"summary":"","src":"\tdojo.widget.html.Editor.call(this);\n\tthis.widgetType = \"JotEditor\";\n\tthis.supportedCommands.push(\"wikiword\");\n\tthis.rootPath = \"\";\n\n\t\/\/ patch the richText widget\n\tthis.handleWikiInit = function(){\n\n\t\tif(this._richText.isLoaded){\n\t\t\tjot.widget.JotEditor.autolinkWikiWords(this._richText);\n\t\t\tjot.widget.JotEditor.cleanupWord(this._richText);\n\t\t}else{\n\t\t\tdojo.event.kwConnect({\n\t\t\t\tsrcObj: this._richText,\n\t\t\t\tsrcFunc: \"onLoad\",\n\t\t\t\ttargetObj: this,\n\t\t\t\ttargetFunc: \"handleWikiInit\",\n\t\t\t\tonce: true\n\t\t\t});\n\t\t}\n\n\t}\n\n\tthis.fixGetItemProperties = function(mi){\n\t\tvar name = mi.args[0];\n\t\tif(name == \"wikiword\"){\n\t\t\treturn {\n\t\t\t\t\"name\": name,\n\t\t\t\ttoggleItem: true,\n\t\t\t\ticon: this.getCommandImage(name)\n\t\t\t};\n\t\t}else{\n\t\t\treturn mi.proceed();\n\t\t}\n\t}\n\n\tdojo.event.connect(this, \"fillInTemplate\", this, \"handleWikiInit\");\n\n\tdojo.event.connect(\"around\", \n\t\t\t\t\t\tthis, \"getItemProperties\",\n\t\t\t\t\t\tthis, \"fixGetItemProperties\");\n\n\n\tthis.fixOnAction = function(mi){\n\t\tvar cmd = mi.args[0];\n\t\tvar value = mi.args[1];\n\t\tif(cmd == \"wikiword\"){\n\t\t\tdjConfig.isDebug = true;\n\t\t\tvar range = this._richText.shouldLinkWikiWord();\n\t\t\tif(range){\n\t\t\t\tthis._richText.toggleWikiWordLink(range);\n\t\t\t}\n\t\t}else if(cmd == \"insertimage\"){\n\t\t\tvar dlg = dojo.widget.createWidget(\"Dialog\", {}, document.body, \"last\");\n\t\t\tvar tmp = document.createElement(\"span\");\n\t\t\tdlg.containerNode.appendChild(tmp);\n\t\t\tvar ip = dojo.widget.createWidget(\"JotImagePicker\", {rootPath: this.rootPath}, tmp);\n\t\t\tdlg.show();\n\n\t\t\tvar handleInsert = dojo.lang.hitch(this, function(url){\n\t\t\t\tthis._richText.editNode.focus();\n\t\t\t\tthis._richText.execCommand(\"insertimage\", url);\n\t\t\t\t\/\/ poke the editor to resize if we inserted an image that wasn't in cache and had to be loaded\n\t\t\t\tsetTimeout(this._richText.onDisplayChanged, 500);\n\t\t\t});\n\n\t\t\tdojo.event.connect(ip, \"insertImage\", handleInsert);\n\t\t\tdojo.event.connect(ip, \"insertImage\", dlg, \"hide\");\n\t\t\tdojo.event.connect(ip, \"destroy\", dlg, \"hide\");\n\t\t}else{\n\t\t\treturn mi.proceed();\n\t\t}\n\t}\n\n\tdojo.event.connect(\"around\", \n\t\t\t\t\t\tthis, \"onAction\",\n\t\t\t\t\t\tthis, \"fixOnAction\");","this_variables":["widgetType","rootPath","handleWikiInit","fixGetItemProperties","fixOnAction"],"inherits":["dojo.widget.html.Editor"]}}},"jot.widget.JotEditor.handleWikiInit":{"_":{"meta":{"summary":"","src":"\t\tif(this._richText.isLoaded){\n\t\t\tjot.widget.JotEditor.autolinkWikiWords(this._richText);\n\t\t\tjot.widget.JotEditor.cleanupWord(this._richText);\n\t\t}else{\n\t\t\tdojo.event.kwConnect({\n\t\t\t\tsrcObj: this._richText,\n\t\t\t\tsrcFunc: \"onLoad\",\n\t\t\t\ttargetObj: this,\n\t\t\t\ttargetFunc: \"handleWikiInit\",\n\t\t\t\tonce: true\n\t\t\t});\n\t\t}"}}},"jot.widget.JotEditor.fixGetItemProperties":{"_":{"meta":{"summary":"","parameters":{"mi":{"type":""}},"src":"\t\tvar name = mi.args[0];\n\t\tif(name == \"wikiword\"){\n\t\t\treturn {\n\t\t\t\t\"name\": name,\n\t\t\t\ttoggleItem: true,\n\t\t\t\ticon: this.getCommandImage(name)\n\t\t\t};\n\t\t}else{\n\t\t\treturn mi.proceed();\n\t\t}"}}},"jot.widget.JotEditor.fixOnAction":{"_":{"meta":{"summary":"","parameters":{"mi":{"type":""}},"src":"\t\tvar cmd = mi.args[0];\n\t\tvar value = mi.args[1];\n\t\tif(cmd == \"wikiword\"){\n\t\t\tdjConfig.isDebug = true;\n\t\t\tvar range = this._richText.shouldLinkWikiWord();\n\t\t\tif(range){\n\t\t\t\tthis._richText.toggleWikiWordLink(range);\n\t\t\t}\n\t\t}else if(cmd == \"insertimage\"){\n\t\t\tvar dlg = dojo.widget.createWidget(\"Dialog\", {}, document.body, \"last\");\n\t\t\tvar tmp = document.createElement(\"span\");\n\t\t\tdlg.containerNode.appendChild(tmp);\n\t\t\tvar ip = dojo.widget.createWidget(\"JotImagePicker\", {rootPath: this.rootPath}, tmp);\n\t\t\tdlg.show();\n\n\t\t\tvar handleInsert = dojo.lang.hitch(this, function(url){\n\t\t\t\tthis._richText.editNode.focus();\n\t\t\t\tthis._richText.execCommand(\"insertimage\", url);\n\t\t\t\t\/\/ poke the editor to resize if we inserted an image that wasn't in cache and had to be loaded\n\t\t\t\tsetTimeout(this._richText.onDisplayChanged, 500);\n\t\t\t});\n\n\t\t\tdojo.event.connect(ip, \"insertImage\", handleInsert);\n\t\t\tdojo.event.connect(ip, \"insertImage\", dlg, \"hide\");\n\t\t\tdojo.event.connect(ip, \"destroy\", dlg, \"hide\");\n\t\t}else{\n\t\t\treturn mi.proceed();\n\t\t}"}}},"jot.widget.JotEditor.autolinkWikiWords":{"_":{"meta":{"summary":"","parameters":{"editor":{"type":""}},"src":"\tvar nonwikiword = \/[^a-z0-9A-Z]\/;\n\tvar wikiword = \/(^|\\b|[^a-z0-9A-Z])([A-Z0-9]+[a-z][a-z0-9]*[A-Z][A-Za-z0-9]*)(\\b|[^a-z0-9A-Z]|$)\/;\n\t\t\n\t\/** Hooks into the keyPress event *\/\n\tfunction keyPress (e) {\n\t\tif(e.keyCode == e.KEY_ENTER || e.keyCode == e.KEY_RETURN){\n\t\t\tvar character = \"\\n\";\n\t\t}else if (e.charCode != 0){\n\t\t\tvar character = String.fromCharCode(e.charCode);\n\t\t}else{\n\t\t\treturn;\n\t\t}\n\t\tif(nonwikiword.test(character)){\n\t\t\tvar node = editor.getSelectedNode();\n\t\t\twhile(node.parentNode && node.nodeName != \"A\"){ node = node.parentNode; }\n\t\t\tif(node.href == \"wiki-autolink:\"){ \/\/ we're modifying a wiki autolink\n\t\t\t\teditor.execCommand(\"unlink\");\n\t\t\t}\n\t\t\t\n\t\t\tvar range = editor.shouldLinkWikiWord(e);\n\t\t\tif(range){\n\t\t\t\tdojo.lang.setTimeout(editor, \"linkWikiWord\", 1, range);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction locOnUnload (save) {\n\t\tvar links = editor.editNode.getElementsByTagName(\"a\");\n\t\tfor (var i = 0; i < links.length; i++) {\n\t\t\tif (links[i].href != \"wiki-autolink:\") { continue; }\n\t\t\tlinks[i].href = \"wiki:\/\" + dojo.dom.textContent(links[i]);\n\t\t}\n\t}\n\t\n\t\/\/ connect \n\tdojo.event.connect(editor, \"onKeyPress\", keyPress);\n\n\tif((editor[\"textarea\"])&&(editor.textarea[\"form\"])){\n\t\t\/\/ link things correctly\n\t\tdojo.event.kwConnect({\n\t\t\ttype: \"before\", \n\t\t\tsrcObj: editor.textarea.form, \n\t\t\tsrcFunc: \"onsubmit\", \n\t\t\tadviceFunc: locOnUnload\n\t\t});\n\t}\n\n\/\/\tdojo.event.connect(\"before\", editor, \"fillInTemplate\", onLoad);"}}},"findLastTextNode":{"_":{"meta":{"summary":"","parameters":{"element":{"type":""}},"src":"\t\t\t\t\tvar node = element.lastChild;\n\t\t\t\t\tdo {\n\t\t\t\t\t\tif (node.nodeType == dojo.dom.ELEMENT_NODE) {\n\t\t\t\t\t\t\tvar text = findLastTextNode(node);\n\t\t\t\t\t\t\tif (text) { return text; }\n\t\t\t\t\t\t} else if (node.nodeType == dojo.dom.TEXT_NODE) {\n\t\t\t\t\t\t\treturn node;\n\t\t\t\t\t\t}\t\t\t\t\t\n\t\t\t\t\t} while (node = node.previousSibling);"}}},"dojo.widget.HtmlRichText.toggleWikiWordLink":{"_":{"meta":{"summary":"","parameters":{"range":{"type":""}},"src":"\tif(dojo.render.html.ie){\n\t\tpn = range.parentElement();\n\t}else{\n\t\tpn = range.startContainer.parentNode;\n\t}\n\tif(pn.nodeName.toLowerCase() == \"a\"){\n\t\tif(pn.href.toLowerCase() == \"wiki-autolink:\"){\n\t\t\tif(dojo.render.html.ie){\n\t\t\t\trange.moveToElementText(pn);\n\t\t\t\tdocument.execCommand(\"unlink\");\n\t\t\t}else{\n\t\t\t\tthis.execCommand(\"unlink\");\n\t\t\t}\n\t\t}\n\t}else{\n\t\tthis.linkWikiWord(range);\n\t}","this":"dojo.widget.HtmlRichText"}}},"dojo.widget.HtmlRichText.linkWikiWord":{"_":{"meta":{"summary":"","parameters":{"range":{"type":""}},"src":"\t\trange.execCommand(\"createlink\", false, \"wiki-autolink:\");\n\t}else{\n\t\t\/\/ grab selection\n\t\tvar selection = this.window.getSelection();\n\t\tvar selectionRange = selection.getRangeAt(0);\n\t\t\n\t\t\/\/ select our word and link\n\t\tselection.removeAllRanges();\n\t\tselection.addRange(range);\n\t\tthis.execCommand(\"createlink\", \"wiki-autolink:\");\n\t\t\n\t\t\/\/ restore selection\n\t\tselection.removeAllRanges();\n\t\tselection.addRange(selectionRange);\n\t}","this":"dojo.widget.HtmlRichText"}}},"dojo.widget.HtmlRichText.shouldLinkWikiWord":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\tvar nonwikiword = \/[^a-z0-9A-Z]\/;\n\tvar wikiword = \/(^|\\b|[^a-z0-9A-Z])([A-Z0-9]+[a-z][a-z0-9]*[A-Z][A-Za-z0-9]*)(\\b|[^a-z0-9A-Z]|$)\/;\n\t\t\n\tif(this.document.selection){ \/\/ Internet Explorer\n\t\tvar range = this.document.selection.createRange();\n\t\trange.moveStart(\"word\", -1);\n\t\trange.moveEnd(\"word\", 1);\n\t\t\n\t\tvar match = wikiword.exec(range.text);\n\t\tvar afterMatch = wikiword.exec(this.stringAfterKeyPress(e));\n\t\tif (!match || !afterMatch){ return false; }\n\t\tif (afterMatch[2] != match[2]){\n\t\t\tif(afterMatch.index != match.index){ return false; }\n\t\t\tmatch = afterMatch;\n\t\t}\n\t\t\n\t\trange.moveStart(\"character\", match.index + match[1].length);\n\t\trange.collapse(true);\n\t\trange.moveEnd(\"character\", match[2].length);\n\t\treturn range;\n\n\t}else if(dojo.render.html.mozilla){ \/\/ Mozilla\n\t\tif(this.getSelectedNode().nodeType != Node.TEXT_NODE){ return false; }\n\n\t\tvar selection = this.window.getSelection();\n\t\tvar selectionRange = selection.getRangeAt(0);\n\n\t\t\/\/ consider adjacent text nodes\n\t\t\/\/ note: we can't just normalize as this fouls our rich text editing\n\t\tvar node = selectionRange.startContainer, startNudge =  0;\n\t\twhile (node.previousSibling && node.previousSibling.nodeType == Node.TEXT_NODE) {\n\t\t\tnode = node.previousSibling;\n\t\t\tstartNudge += node.length\n\t\t}\n\t\tvar text = \"\", textNodes = [];\n\t\tdo {\n\t\t\tif (textNodes[text.length]) { textNodes[text.length].push(node); }\n\t\t\telse { textNodes[text.length] = [node]; }\n\t\t\ttext += node.nodeValue;\n\t\t\tnode = node.nextSibling;\n\t\t} while (node && node.nodeType == Node.TEXT_NODE)\n\n\t\t\/\/ find the word around the cursor\n\t\tvar range = selectionRange.cloneRange();\n\t\tvar startPosition = text.substr(0, range.startOffset + startNudge).search(\/(\\w)*$\/);\n\t\tvar endPosition = text.substr(range.startOffset + startNudge)\n\t\t\t\t.match(\/^(\\w)*\/)[0].length + range.startOffset + startNudge;\n\t\t\n\t\tvar word = text.substring(startPosition, endPosition);\n\n\t\tvar match = wikiword.exec(word);\n\t\tvar afterMatch = wikiword.exec(this.stringAfterKeyPress(e));\n\t\tif (!match || !afterMatch) { return false; }\n\t\tif (afterMatch[2] != match[2]) {\n\t\t\tif (afterMatch.index != match.index) { return false; }\n\t\t\tmatch = afterMatch;\n\t\t}\n\t\t\n\t\tstartPosition += match.index + match[1].length;\n\t\tfor (var startOffset = 0, startContainer;\n\t\t\t!(startContainer = textNodes[startPosition - startOffset]); startOffset++) {}\n\t\tendPosition = startPosition + match[2].length;\n\t\tfor (var endOffset = 1, endContainer;\n\t\t\t!(endContainer = textNodes[endPosition - endOffset]); endOffset++) {}\n\n\t\trange.setStart(startContainer[0], startOffset);\n\t\trange.setEnd(endContainer[endContainer.length - 1], endOffset);\n\n\t\treturn range;\n\t}else{ \/\/ Safari\n\t\t\/\/ Selection returned is a string primitive, bleh!\n\t\t\/\/var selection = editor.window.getSelection();\n\t}\n\treturn false;","this":"dojo.widget.HtmlRichText"}}},"dojo.widget.HtmlRichText.stringAfterKeyPress":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\tif (this.document.selection) {                     \n\t\tvar range = this.document.selection.createRange();\n\t\trange.moveStart(\"word\", -1);\n\t\tvar word = range.text;\n\t\tif(e && e.charCode){\n\t\t\tword += String.fromCharCode(e.charCode);\n\t\t}\n\t\trange.collapse(false);\n\t\trange.moveEnd(\"word\", 1);\n\t\tword += range.text;\n\t\t\n\t\treturn word;\n\t} else if (dojo.render.html.mozilla) { \/\/ Mozilla\n\t\tif (this.getSelectedNode().nodeType != Node.TEXT_NODE) { return false; }\n\n\t\tvar selection = this.window.getSelection();\n\t\tvar selectionRange = selection.getRangeAt(0);\n\n\t\t\/\/ consider adjacent text nodes\n\t\t\/\/ note: we can't just normalize as this fouls our rich text editing\n\t\tvar node = selectionRange.startContainer, startNudge = 0;\n\t\twhile (node.previousSibling && node.previousSibling.nodeType == Node.TEXT_NODE) {\n\t\t\tnode = node.previousSibling;\n\t\t\tstartNudge += node.nodeValue.length\n\t\t}\n\t\tvar text = \"\", textNodes = [];\n\t\tdo {\n\t\t\ttextNodes[text.length] = node;\n\t\t\ttext += node.nodeValue;\n\t\t\tnode = node.nextSibling;\n\t\t} while (node && node.nodeType == Node.TEXT_NODE)\n\t\tdojo.debug(text);\n\n\t\t\/\/ find the word around the cursor\n\t\tvar range = selectionRange.cloneRange();\n\t\tvar startPosition = text.substr(0, range.startOffset + startNudge).search(\/(\\w)*$\/);\n\t\tvar endPosition = text.substr(range.startOffset + startNudge)\n\t\t\t\t.match(\/^(\\w)*\/)[0].length + range.startOffset + startNudge;\n\n\t\tvar word = text.substring(startPosition, range.startOffset + startNudge) +\n\t\t\t((e && e.charCode) ? String.fromCharCode(e.charCode) : \"\") + text.substring(range.startOffset + startNudge, endPosition);\n\t\tdojo.debug(word);\n\n\t\treturn word;\n\t} else { \/\/ Safari\n\t\t\/\/ Selection returned is a string primitive, bleh!\n\t\t\/\/var selection = editor.window.getSelection();\n\t}\n\treturn \"\";","this":"dojo.widget.HtmlRichText"}}},"jot.widget.JotEditor.cleanupWord":{"_":{"meta":{"summary":"","parameters":{"editor":{"type":""}},"src":"\tfunction doCleanup(save){\n\t\tif(!save){ return; }\n\t\t\n\t\tfunction cleanClasses (node) {\n\t\t\t\/\/ clean class attributes\n\t\t\tif (!node.className) { return; }\n\t\t\tvar newClass = node.className.replace(\/(^|\\s)mso.*?(\\s|$)\/ig, ' ');\n\t\t\tif (newClass != node.className) {\n\t\t\t\tnode.className = newClass;\n\t\t\t\tif (!\/\\S\/.test(node.className)) {\n\t\t\t\t\tnode.removeAttribute(\"className\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction cleanStyles (node) {\n\t\t\t\/\/ clean style attributes\n\t\t\tvar declarations = node.style.cssText.split(\/\\s*;\\s*\/);\n\t\t\tvar declarationsLength = declarations.length;\n\t\t\tfor (var i = declarations.length; --i >= 0;) {\n\t\t\t\tvar line = declarations[i];\n\t\t\t\tif (\/^mso|^tab-stops|^layout-grid\/i.test(line) ||\n\t\t\t\t\t\/^margin\\s*:\\s*[0-9]+..\\s+[0-9]+..\\s+[0-9]+..\/i.test(line)) {\n\t\t\t\t\tdeclarations.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tdeclarations[i] = line.replace(\/windowtext\/, '#000');\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (declarationsLength != declarations.length) {\n\t\t\t\tnode.style.cssText = declarations.join(\"; \");\n\t\t\t}\n\t\t}\n\n\t\tfunction removeNode (node) {\n\t\t\twhile (node.hasChildNodes()) {\n\t\t\t\tnode.parentNode.insertBefore(node, node.firstChild);\n\t\t\t}\n\t\t\tnode.parentNode.removeChild(node);\n\t\t}\n\n\t\tfunction checkEmpty(node) {\n\t\t\tif (\/^(a|span|b|strong|i|em|font)$\/i.test(node.tagName) &&\n\t\t\t\tnode.childNodes.length == 0) {\n\t\t\t\tnode.parentNode.removeChild(el);\n\t\t\t}\n\t\t}\n\n\t\tfunction parseTree(root) {\n\t\t\tvar tag = root.tagName.toLowerCase(), i, next;\n\t\t\tif (\/:\/.test(tag)) { stripTag(root); }\n\t\t\telse {\n\t\t\t\tfor (var i = 0; i < root.childNodes.length; i++) {\n\t\t\t\t\tvar child = root.childNodes[i];\n\t\t\t\t\tif (child.nodeType == 1) {\n\t\t\t\t\t\tcleanClasses(child);\n\t\t\t\t\t\tcleanStyles(child);\n\t\t\t\t\t\tparseTree(child);\n\t\t\t\t\t\tcheckEmpty(child);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\t\/\/ start it off\n\t\tparseTree(editor.domNode);\n\t}\n\n\tdojo.event.connect(editor, \"close\", doCleanup);","this":"dojo.widget.HtmlRichText"}}}}}},"dojo.widget.jot.JotEditor2":{"meta":{"requires":{"common":["dojo.widget.RichText","dojo.widget.Editor2","dojo.widget.Dialog","jot.widget.JotImagePicker"]},"methods":{"jot.widget.JotEditor2":{"_":{"meta":{"summary":"","inherits":["dojo.widget.html.Editor2"],"this_inherits":["dojo.widget.html.Editor2"],"protovariables":{"focusOnLoad":"","relativeImageUrls":"","wikiLinks":"","imagePicker":""}}}},"jot.widget.JotEditor2.handleWikiInit":{"_":{"meta":{"summary":"","src":"\t\t\tif(this.isLoaded){\n\t\t\t\tvar tw = this.toolbarWidget;\n\n\t\t\t\ttw.wikiwordButton.style.display = \"\";\n\t\t\t\ttw.insertimageButton.style.display = \"\";\n\n\t\t\t\tvar wcf = dojo.lang.hitch(this, function(){\n\t\t\t\t\tvar range = (dojo.render.html.ie) ? this.document.selection.createRange() : this.window.getSelection().getRangeAt(0);\n\t\t\t\t\tthis.toggleWikiWordLink(range);\n\t\t\t\t\t\/\/ NOTE: explicit wiki-word linking is supported regardless\n\t\t\t\t\t\/\/ of whether or not the selected text represents what we'd\n\t\t\t\t\t\/\/ otherwise consider to be a wiki-word\n\t\t\t\t\t\/\/ var range = this.shouldLinkWikiWord();\n\t\t\t\t\t\/\/ if(range){\n\t\t\t\t\t\/\/  \tthis.toggleWikiWordLink(range);\n\t\t\t\t\t\/\/ }\n\t\t\t\t});\n\t\t\t\tdojo.event.connect(tw.wikiwordButton, \"onclick\", wcf);\n\n\t\t\t\tvar iif = dojo.lang.hitch(this, function(){\n\t\t\t\t\tvar dlg = dojo.widget.createWidget(\"Dialog\", {}, document.body, \"last\");\n\t\t\t\t\tvar tmp = document.createElement(\"span\");\n\t\t\t\t\tdlg.containerNode.appendChild(tmp);\n\t\t\t\t\tvar ip = dojo.widget.createWidget(\"JotImagePicker\", {rootPath: this.rootPath}, tmp);\n\t\t\t\t\tdlg.show();\n\n\t\t\t\t\tvar handleInsert = dojo.lang.hitch(this, function(url){\n\t\t\t\t\t\tthis.focus();\n\t\t\t\t\t\tthis.execCommand(\"insertimage\", url);\n\t\t\t\t\t\t\/\/ poke the editor to resize if we inserted an image\n\t\t\t\t\t\t\/\/ that wasn't in cache and had to be loaded\n\t\t\t\t\t\tsetTimeout(this.onDisplayChanged, 500);\n\t\t\t\t\t});\n\n\t\t\t\t\tdojo.event.connect(ip, \"insertImage\", handleInsert);\n\t\t\t\t\tdojo.event.connect(ip, \"insertImage\", dlg, \"hide\");\n\t\t\t\t\tdojo.event.connect(ip, \"destroy\", dlg, \"hide\");\n\t\t\t\t\tdojo.event.connect(ip, \"destroy\", dlg, \"destroy\");\n\t\t\t\t});\n\t\t\t\tdojo.event.connect(tw.insertimageButton, \"onclick\", iif);\n\n\t\t\t\tjot.widget.JotEditor2.autolinkWikiWords(this);\n\t\t\t\tjot.widget.JotEditor2.cleanupWord(this);\n\t\t\t}else{\n\t\t\t\tdojo.event.kwConnect({\n\t\t\t\t\tsrcObj: this,\n\t\t\t\t\tsrcFunc: \"onLoad\",\n\t\t\t\t\ttargetObj: this,\n\t\t\t\t\ttargetFunc: \"handleWikiInit\",\n\t\t\t\t\tonce: true\n\t\t\t\t});\n\t\t\t}","this":"dojo.widget.html.Editor2"}}},"jot.widget.JotEditor2.rootPath":{"_":{"meta":{"summary":"","src":"\t\t\tif(this.isLoaded){\n\t\t\t\tvar tw = this.toolbarWidget;\n\n\t\t\t\ttw.wikiwordButton.style.display = \"\";\n\t\t\t\ttw.insertimageButton.style.display = \"\";\n\n\t\t\t\tvar wcf = dojo.lang.hitch(this, function(){\n\t\t\t\t\tvar range = (dojo.render.html.ie) ? this.document.selection.createRange() : this.window.getSelection().getRangeAt(0);\n\t\t\t\t\tthis.toggleWikiWordLink(range);\n\t\t\t\t\t\/\/ NOTE: explicit wiki-word linking is supported regardless\n\t\t\t\t\t\/\/ of whether or not the selected text represents what we'd\n\t\t\t\t\t\/\/ otherwise consider to be a wiki-word\n\t\t\t\t\t\/\/ var range = this.shouldLinkWikiWord();\n\t\t\t\t\t\/\/ if(range){\n\t\t\t\t\t\/\/  \tthis.toggleWikiWordLink(range);\n\t\t\t\t\t\/\/ }\n\t\t\t\t});\n\t\t\t\tdojo.event.connect(tw.wikiwordButton, \"onclick\", wcf);\n\n\t\t\t\tvar iif = dojo.lang.hitch(this, function(){\n\t\t\t\t\tvar dlg = dojo.widget.createWidget(\"Dialog\", {}, document.body, \"last\");\n\t\t\t\t\tvar tmp = document.createElement(\"span\");\n\t\t\t\t\tdlg.containerNode.appendChild(tmp);\n\t\t\t\t\tvar ip = dojo.widget.createWidget(\"JotImagePicker\", {rootPath: this.rootPath}, tmp);\n\t\t\t\t\tdlg.show();\n\n\t\t\t\t\tvar handleInsert = dojo.lang.hitch(this, function(url){\n\t\t\t\t\t\tthis.focus();\n\t\t\t\t\t\tthis.execCommand(\"insertimage\", url);\n\t\t\t\t\t\t\/\/ poke the editor to resize if we inserted an image\n\t\t\t\t\t\t\/\/ that wasn't in cache and had to be loaded\n\t\t\t\t\t\tsetTimeout(this.onDisplayChanged, 500);\n\t\t\t\t\t});\n\n\t\t\t\t\tdojo.event.connect(ip, \"insertImage\", handleInsert);\n\t\t\t\t\tdojo.event.connect(ip, \"insertImage\", dlg, \"hide\");\n\t\t\t\t\tdojo.event.connect(ip, \"destroy\", dlg, \"hide\");\n\t\t\t\t\tdojo.event.connect(ip, \"destroy\", dlg, \"destroy\");\n\t\t\t\t});\n\t\t\t\tdojo.event.connect(tw.insertimageButton, \"onclick\", iif);\n\n\t\t\t\tjot.widget.JotEditor2.autolinkWikiWords(this);\n\t\t\t\tjot.widget.JotEditor2.cleanupWord(this);\n\t\t\t}else{\n\t\t\t\tdojo.event.kwConnect({\n\t\t\t\t\tsrcObj: this,\n\t\t\t\t\tsrcFunc: \"onLoad\",\n\t\t\t\t\ttargetObj: this,\n\t\t\t\t\ttargetFunc: \"handleWikiInit\",\n\t\t\t\t\tonce: true\n\t\t\t\t});\n\t\t\t}","this":"dojo.widget.html.Editor2"}}},"jot.widget.JotEditor2.srcObj":{"_":{"meta":{"summary":"","src":"\t\t\tif(this.isLoaded){\n\t\t\t\tvar tw = this.toolbarWidget;\n\n\t\t\t\ttw.wikiwordButton.style.display = \"\";\n\t\t\t\ttw.insertimageButton.style.display = \"\";\n\n\t\t\t\tvar wcf = dojo.lang.hitch(this, function(){\n\t\t\t\t\tvar range = (dojo.render.html.ie) ? this.document.selection.createRange() : this.window.getSelection().getRangeAt(0);\n\t\t\t\t\tthis.toggleWikiWordLink(range);\n\t\t\t\t\t\/\/ NOTE: explicit wiki-word linking is supported regardless\n\t\t\t\t\t\/\/ of whether or not the selected text represents what we'd\n\t\t\t\t\t\/\/ otherwise consider to be a wiki-word\n\t\t\t\t\t\/\/ var range = this.shouldLinkWikiWord();\n\t\t\t\t\t\/\/ if(range){\n\t\t\t\t\t\/\/  \tthis.toggleWikiWordLink(range);\n\t\t\t\t\t\/\/ }\n\t\t\t\t});\n\t\t\t\tdojo.event.connect(tw.wikiwordButton, \"onclick\", wcf);\n\n\t\t\t\tvar iif = dojo.lang.hitch(this, function(){\n\t\t\t\t\tvar dlg = dojo.widget.createWidget(\"Dialog\", {}, document.body, \"last\");\n\t\t\t\t\tvar tmp = document.createElement(\"span\");\n\t\t\t\t\tdlg.containerNode.appendChild(tmp);\n\t\t\t\t\tvar ip = dojo.widget.createWidget(\"JotImagePicker\", {rootPath: this.rootPath}, tmp);\n\t\t\t\t\tdlg.show();\n\n\t\t\t\t\tvar handleInsert = dojo.lang.hitch(this, function(url){\n\t\t\t\t\t\tthis.focus();\n\t\t\t\t\t\tthis.execCommand(\"insertimage\", url);\n\t\t\t\t\t\t\/\/ poke the editor to resize if we inserted an image\n\t\t\t\t\t\t\/\/ that wasn't in cache and had to be loaded\n\t\t\t\t\t\tsetTimeout(this.onDisplayChanged, 500);\n\t\t\t\t\t});\n\n\t\t\t\t\tdojo.event.connect(ip, \"insertImage\", handleInsert);\n\t\t\t\t\tdojo.event.connect(ip, \"insertImage\", dlg, \"hide\");\n\t\t\t\t\tdojo.event.connect(ip, \"destroy\", dlg, \"hide\");\n\t\t\t\t\tdojo.event.connect(ip, \"destroy\", dlg, \"destroy\");\n\t\t\t\t});\n\t\t\t\tdojo.event.connect(tw.insertimageButton, \"onclick\", iif);\n\n\t\t\t\tjot.widget.JotEditor2.autolinkWikiWords(this);\n\t\t\t\tjot.widget.JotEditor2.cleanupWord(this);\n\t\t\t}else{\n\t\t\t\tdojo.event.kwConnect({\n\t\t\t\t\tsrcObj: this,\n\t\t\t\t\tsrcFunc: \"onLoad\",\n\t\t\t\t\ttargetObj: this,\n\t\t\t\t\ttargetFunc: \"handleWikiInit\",\n\t\t\t\t\tonce: true\n\t\t\t\t});\n\t\t\t}","this":"dojo.widget.html.Editor2"}}},"jot.widget.JotEditor2.srcFunc":{"_":{"meta":{"summary":"","src":"\t\t\tif(this.isLoaded){\n\t\t\t\tvar tw = this.toolbarWidget;\n\n\t\t\t\ttw.wikiwordButton.style.display = \"\";\n\t\t\t\ttw.insertimageButton.style.display = \"\";\n\n\t\t\t\tvar wcf = dojo.lang.hitch(this, function(){\n\t\t\t\t\tvar range = (dojo.render.html.ie) ? this.document.selection.createRange() : this.window.getSelection().getRangeAt(0);\n\t\t\t\t\tthis.toggleWikiWordLink(range);\n\t\t\t\t\t\/\/ NOTE: explicit wiki-word linking is supported regardless\n\t\t\t\t\t\/\/ of whether or not the selected text represents what we'd\n\t\t\t\t\t\/\/ otherwise consider to be a wiki-word\n\t\t\t\t\t\/\/ var range = this.shouldLinkWikiWord();\n\t\t\t\t\t\/\/ if(range){\n\t\t\t\t\t\/\/  \tthis.toggleWikiWordLink(range);\n\t\t\t\t\t\/\/ }\n\t\t\t\t});\n\t\t\t\tdojo.event.connect(tw.wikiwordButton, \"onclick\", wcf);\n\n\t\t\t\tvar iif = dojo.lang.hitch(this, function(){\n\t\t\t\t\tvar dlg = dojo.widget.createWidget(\"Dialog\", {}, document.body, \"last\");\n\t\t\t\t\tvar tmp = document.createElement(\"span\");\n\t\t\t\t\tdlg.containerNode.appendChild(tmp);\n\t\t\t\t\tvar ip = dojo.widget.createWidget(\"JotImagePicker\", {rootPath: this.rootPath}, tmp);\n\t\t\t\t\tdlg.show();\n\n\t\t\t\t\tvar handleInsert = dojo.lang.hitch(this, function(url){\n\t\t\t\t\t\tthis.focus();\n\t\t\t\t\t\tthis.execCommand(\"insertimage\", url);\n\t\t\t\t\t\t\/\/ poke the editor to resize if we inserted an image\n\t\t\t\t\t\t\/\/ that wasn't in cache and had to be loaded\n\t\t\t\t\t\tsetTimeout(this.onDisplayChanged, 500);\n\t\t\t\t\t});\n\n\t\t\t\t\tdojo.event.connect(ip, \"insertImage\", handleInsert);\n\t\t\t\t\tdojo.event.connect(ip, \"insertImage\", dlg, \"hide\");\n\t\t\t\t\tdojo.event.connect(ip, \"destroy\", dlg, \"hide\");\n\t\t\t\t\tdojo.event.connect(ip, \"destroy\", dlg, \"destroy\");\n\t\t\t\t});\n\t\t\t\tdojo.event.connect(tw.insertimageButton, \"onclick\", iif);\n\n\t\t\t\tjot.widget.JotEditor2.autolinkWikiWords(this);\n\t\t\t\tjot.widget.JotEditor2.cleanupWord(this);\n\t\t\t}else{\n\t\t\t\tdojo.event.kwConnect({\n\t\t\t\t\tsrcObj: this,\n\t\t\t\t\tsrcFunc: \"onLoad\",\n\t\t\t\t\ttargetObj: this,\n\t\t\t\t\ttargetFunc: \"handleWikiInit\",\n\t\t\t\t\tonce: true\n\t\t\t\t});\n\t\t\t}","this":"dojo.widget.html.Editor2"}}},"jot.widget.JotEditor2.targetObj":{"_":{"meta":{"summary":"","src":"\t\t\tif(this.isLoaded){\n\t\t\t\tvar tw = this.toolbarWidget;\n\n\t\t\t\ttw.wikiwordButton.style.display = \"\";\n\t\t\t\ttw.insertimageButton.style.display = \"\";\n\n\t\t\t\tvar wcf = dojo.lang.hitch(this, function(){\n\t\t\t\t\tvar range = (dojo.render.html.ie) ? this.document.selection.createRange() : this.window.getSelection().getRangeAt(0);\n\t\t\t\t\tthis.toggleWikiWordLink(range);\n\t\t\t\t\t\/\/ NOTE: explicit wiki-word linking is supported regardless\n\t\t\t\t\t\/\/ of whether or not the selected text represents what we'd\n\t\t\t\t\t\/\/ otherwise consider to be a wiki-word\n\t\t\t\t\t\/\/ var range = this.shouldLinkWikiWord();\n\t\t\t\t\t\/\/ if(range){\n\t\t\t\t\t\/\/  \tthis.toggleWikiWordLink(range);\n\t\t\t\t\t\/\/ }\n\t\t\t\t});\n\t\t\t\tdojo.event.connect(tw.wikiwordButton, \"onclick\", wcf);\n\n\t\t\t\tvar iif = dojo.lang.hitch(this, function(){\n\t\t\t\t\tvar dlg = dojo.widget.createWidget(\"Dialog\", {}, document.body, \"last\");\n\t\t\t\t\tvar tmp = document.createElement(\"span\");\n\t\t\t\t\tdlg.containerNode.appendChild(tmp);\n\t\t\t\t\tvar ip = dojo.widget.createWidget(\"JotImagePicker\", {rootPath: this.rootPath}, tmp);\n\t\t\t\t\tdlg.show();\n\n\t\t\t\t\tvar handleInsert = dojo.lang.hitch(this, function(url){\n\t\t\t\t\t\tthis.focus();\n\t\t\t\t\t\tthis.execCommand(\"insertimage\", url);\n\t\t\t\t\t\t\/\/ poke the editor to resize if we inserted an image\n\t\t\t\t\t\t\/\/ that wasn't in cache and had to be loaded\n\t\t\t\t\t\tsetTimeout(this.onDisplayChanged, 500);\n\t\t\t\t\t});\n\n\t\t\t\t\tdojo.event.connect(ip, \"insertImage\", handleInsert);\n\t\t\t\t\tdojo.event.connect(ip, \"insertImage\", dlg, \"hide\");\n\t\t\t\t\tdojo.event.connect(ip, \"destroy\", dlg, \"hide\");\n\t\t\t\t\tdojo.event.connect(ip, \"destroy\", dlg, \"destroy\");\n\t\t\t\t});\n\t\t\t\tdojo.event.connect(tw.insertimageButton, \"onclick\", iif);\n\n\t\t\t\tjot.widget.JotEditor2.autolinkWikiWords(this);\n\t\t\t\tjot.widget.JotEditor2.cleanupWord(this);\n\t\t\t}else{\n\t\t\t\tdojo.event.kwConnect({\n\t\t\t\t\tsrcObj: this,\n\t\t\t\t\tsrcFunc: \"onLoad\",\n\t\t\t\t\ttargetObj: this,\n\t\t\t\t\ttargetFunc: \"handleWikiInit\",\n\t\t\t\t\tonce: true\n\t\t\t\t});\n\t\t\t}","this":"dojo.widget.html.Editor2"}}},"jot.widget.JotEditor2.targetFunc":{"_":{"meta":{"summary":"","src":"\t\t\tif(this.isLoaded){\n\t\t\t\tvar tw = this.toolbarWidget;\n\n\t\t\t\ttw.wikiwordButton.style.display = \"\";\n\t\t\t\ttw.insertimageButton.style.display = \"\";\n\n\t\t\t\tvar wcf = dojo.lang.hitch(this, function(){\n\t\t\t\t\tvar range = (dojo.render.html.ie) ? this.document.selection.createRange() : this.window.getSelection().getRangeAt(0);\n\t\t\t\t\tthis.toggleWikiWordLink(range);\n\t\t\t\t\t\/\/ NOTE: explicit wiki-word linking is supported regardless\n\t\t\t\t\t\/\/ of whether or not the selected text represents what we'd\n\t\t\t\t\t\/\/ otherwise consider to be a wiki-word\n\t\t\t\t\t\/\/ var range = this.shouldLinkWikiWord();\n\t\t\t\t\t\/\/ if(range){\n\t\t\t\t\t\/\/  \tthis.toggleWikiWordLink(range);\n\t\t\t\t\t\/\/ }\n\t\t\t\t});\n\t\t\t\tdojo.event.connect(tw.wikiwordButton, \"onclick\", wcf);\n\n\t\t\t\tvar iif = dojo.lang.hitch(this, function(){\n\t\t\t\t\tvar dlg = dojo.widget.createWidget(\"Dialog\", {}, document.body, \"last\");\n\t\t\t\t\tvar tmp = document.createElement(\"span\");\n\t\t\t\t\tdlg.containerNode.appendChild(tmp);\n\t\t\t\t\tvar ip = dojo.widget.createWidget(\"JotImagePicker\", {rootPath: this.rootPath}, tmp);\n\t\t\t\t\tdlg.show();\n\n\t\t\t\t\tvar handleInsert = dojo.lang.hitch(this, function(url){\n\t\t\t\t\t\tthis.focus();\n\t\t\t\t\t\tthis.execCommand(\"insertimage\", url);\n\t\t\t\t\t\t\/\/ poke the editor to resize if we inserted an image\n\t\t\t\t\t\t\/\/ that wasn't in cache and had to be loaded\n\t\t\t\t\t\tsetTimeout(this.onDisplayChanged, 500);\n\t\t\t\t\t});\n\n\t\t\t\t\tdojo.event.connect(ip, \"insertImage\", handleInsert);\n\t\t\t\t\tdojo.event.connect(ip, \"insertImage\", dlg, \"hide\");\n\t\t\t\t\tdojo.event.connect(ip, \"destroy\", dlg, \"hide\");\n\t\t\t\t\tdojo.event.connect(ip, \"destroy\", dlg, \"destroy\");\n\t\t\t\t});\n\t\t\t\tdojo.event.connect(tw.insertimageButton, \"onclick\", iif);\n\n\t\t\t\tjot.widget.JotEditor2.autolinkWikiWords(this);\n\t\t\t\tjot.widget.JotEditor2.cleanupWord(this);\n\t\t\t}else{\n\t\t\t\tdojo.event.kwConnect({\n\t\t\t\t\tsrcObj: this,\n\t\t\t\t\tsrcFunc: \"onLoad\",\n\t\t\t\t\ttargetObj: this,\n\t\t\t\t\ttargetFunc: \"handleWikiInit\",\n\t\t\t\t\tonce: true\n\t\t\t\t});\n\t\t\t}","this":"dojo.widget.html.Editor2"}}},"jot.widget.JotEditor2.once":{"_":{"meta":{"summary":"","src":"\t\t\tif(this.isLoaded){\n\t\t\t\tvar tw = this.toolbarWidget;\n\n\t\t\t\ttw.wikiwordButton.style.display = \"\";\n\t\t\t\ttw.insertimageButton.style.display = \"\";\n\n\t\t\t\tvar wcf = dojo.lang.hitch(this, function(){\n\t\t\t\t\tvar range = (dojo.render.html.ie) ? this.document.selection.createRange() : this.window.getSelection().getRangeAt(0);\n\t\t\t\t\tthis.toggleWikiWordLink(range);\n\t\t\t\t\t\/\/ NOTE: explicit wiki-word linking is supported regardless\n\t\t\t\t\t\/\/ of whether or not the selected text represents what we'd\n\t\t\t\t\t\/\/ otherwise consider to be a wiki-word\n\t\t\t\t\t\/\/ var range = this.shouldLinkWikiWord();\n\t\t\t\t\t\/\/ if(range){\n\t\t\t\t\t\/\/  \tthis.toggleWikiWordLink(range);\n\t\t\t\t\t\/\/ }\n\t\t\t\t});\n\t\t\t\tdojo.event.connect(tw.wikiwordButton, \"onclick\", wcf);\n\n\t\t\t\tvar iif = dojo.lang.hitch(this, function(){\n\t\t\t\t\tvar dlg = dojo.widget.createWidget(\"Dialog\", {}, document.body, \"last\");\n\t\t\t\t\tvar tmp = document.createElement(\"span\");\n\t\t\t\t\tdlg.containerNode.appendChild(tmp);\n\t\t\t\t\tvar ip = dojo.widget.createWidget(\"JotImagePicker\", {rootPath: this.rootPath}, tmp);\n\t\t\t\t\tdlg.show();\n\n\t\t\t\t\tvar handleInsert = dojo.lang.hitch(this, function(url){\n\t\t\t\t\t\tthis.focus();\n\t\t\t\t\t\tthis.execCommand(\"insertimage\", url);\n\t\t\t\t\t\t\/\/ poke the editor to resize if we inserted an image\n\t\t\t\t\t\t\/\/ that wasn't in cache and had to be loaded\n\t\t\t\t\t\tsetTimeout(this.onDisplayChanged, 500);\n\t\t\t\t\t});\n\n\t\t\t\t\tdojo.event.connect(ip, \"insertImage\", handleInsert);\n\t\t\t\t\tdojo.event.connect(ip, \"insertImage\", dlg, \"hide\");\n\t\t\t\t\tdojo.event.connect(ip, \"destroy\", dlg, \"hide\");\n\t\t\t\t\tdojo.event.connect(ip, \"destroy\", dlg, \"destroy\");\n\t\t\t\t});\n\t\t\t\tdojo.event.connect(tw.insertimageButton, \"onclick\", iif);\n\n\t\t\t\tjot.widget.JotEditor2.autolinkWikiWords(this);\n\t\t\t\tjot.widget.JotEditor2.cleanupWord(this);\n\t\t\t}else{\n\t\t\t\tdojo.event.kwConnect({\n\t\t\t\t\tsrcObj: this,\n\t\t\t\t\tsrcFunc: \"onLoad\",\n\t\t\t\t\ttargetObj: this,\n\t\t\t\t\ttargetFunc: \"handleWikiInit\",\n\t\t\t\t\tonce: true\n\t\t\t\t});\n\t\t\t}","this":"dojo.widget.html.Editor2"}}},"jot.widget.JotEditor2.autolinkWikiWords":{"_":{"meta":{"summary":"","parameters":{"editor":{"type":""}},"src":"\tvar nonwikiword = \/[^a-z0-9A-Z]\/;\n\tvar wikiword = \/(^|\\b|[^a-z0-9A-Z])([A-Z0-9]+[a-z][a-z0-9]*[A-Z][A-Za-z0-9]*)(\\b|[^a-z0-9A-Z]|$)\/;\n\t\t\n\t\/\/ Hooks into the keyPress event\n\tfunction keyPress(e){\n\t\tif(e.keyCode == e.KEY_ENTER || e.keyCode == e.KEY_RETURN){\n\t\t\tvar character = \"\\n\";\n\t\t}else if (e.charCode != 0){\n\t\t\tvar character = String.fromCharCode(e.charCode);\n\t\t}else{\n\t\t\treturn;\n\t\t}\n\t\tif(nonwikiword.test(character)){\n\t\t\tvar node = editor.getSelectedNode();\n\t\t\twhile(node.parentNode && node.nodeName != \"A\"){ node = node.parentNode; }\n\t\t\tif((node.href == \"wiki-autolink:\")&&(character != \"\\n\")){ \/\/ we're modifying a wiki autolink\n\t\t\t\teditor.execCommand(\"unlink\");\n\t\t\t}\n\t\t\t\n\t\t\tvar range = editor.shouldLinkWikiWord(e);\n\t\t\tif(range){\n\t\t\t\tif(dojo.render.html.moz){\n\t\t\t\t\tdojo.lang.setTimeout(editor, \"linkWikiWord\", 0, range.cloneRange(), true);\n\t\t\t\t}else{\n\t\t\t\t\tdojo.lang.setTimeout(editor, \"linkWikiWord\", 1, range, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction fixWikiLinks(html) {\n\t\tvar tmp = document.createElement(\"div\");\n\t\ttmp.innerHTML = html;\n\t\tvar links = tmp.getElementsByTagName(\"a\");\n\t\tvar ll = links.length;\n\t\tfor(var i=0; i<ll; i++){\n\t\t    if(links.item(i).href != \"wiki-autolink:\"){ continue; }\n\t\t    links.item(i).href = \"wiki:\" + encodeURIComponent(dojo.dom.textContent(links.item(i))); \/\/ temporary, encoded for sanity purposes...\n\t\t}\n\t\t\/\/ but we have to decode it to make the server happy. browsers will happily\n\t\t\/\/ \"fix\" this by re-encoding if the content gets innerHtml'd, so we have\n\t\t\/\/ to make sure this happens outside the DOM and never gets innerHTML'd\n\t\t\/\/ again before saving\n\t\tvar tmpHtml = tmp.innerHTML;\n\t\tfunction decodeWikiLink(match, before, blah, link, after) {\n\t\t    return before + decodeURIComponent(link).replace(\/\\\"\/g, \"&quot;\") + after;\n\t\t}\n\t\treturn tmpHtml.replace(\/(<a\\s([^>]+\\s)?href=[\\'\\\"]wiki:)([^>]+)([\\'\\\"][^>]*>)\/gi, decodeWikiLink);\n\t\t\n\t}\n\n\tfunction makeTempImageLinksRelative(html) {\n\t\tvar tmp = document.createElement(\"div\");\n\t\ttmp.innerHTML = html;\n\t\tvar imgs = tmp.getElementsByTagName(\"img\");\n\t\tvar reTmpPath = new RegExp(\"^\"+window.location.protocol + \"\/\/\" + window.location.host + editor.rootPath+\"\/System\/TmpImageUpload\/\");\n\t\tfor(var i = 0; i < imgs.length; i++){\n\t\t\tif(imgs[i].src.match(reTmpPath)){\n\t\t\t\timgs[i].src = imgs[i].src.replace(reTmpPath, \"\");\n\t\t\t}\n\t\t}\n\t\treturn tmp.innerHTML;\n\t}\n\n\tfunction stripMsWordJunk(html) {\n\t    \/\/ this doesn't try to strip every bit of weirdness from \n\t    \/\/ word-pasted content, just stuff that our server-side\n\t    \/\/ html-to-xml conversion can't handle. It's based on testing\n\t    \/\/ some sample documents and may not be comprehensive.\n\n\t    \/\/ remove namespace declarations\n\t    html = html.replace(\/<\\?xml:[^>]+>\/gmi, ''); \n\t    \/\/ remove o:p, v:textbox, and other namespaced elements\n\t    html = html.replace(\/<\\\/?[a-z]:[a-z]+\\ ?[^>]*>\/gmi, ''); \n\t    return html;\n\t}\n\n\teditor.contentFilters.push(stripMsWordJunk);\n\teditor.contentFilters.push(makeTempImageLinksRelative);\n\teditor.contentFilters.push(fixWikiLinks)\n\n\t\/\/ connect \n\tdojo.event.connect(editor, \"onKeyPress\", keyPress);\n\n\/\/\tdojo.event.connect(\"before\", editor, \"fillInTemplate\", onLoad);"}}},"findLastTextNode":{"_":{"meta":{"summary":"","parameters":{"element":{"type":""}},"src":"\t\tvar node = element.lastChild;\n\t\tdo {\n\t\t    if (node.nodeType == dojo.dom.ELEMENT_NODE) {\n\t\t\tvar text = findLastTextNode(node);\n\t\t\tif (text) { return text; }\n\t\t    } else if (node.nodeType == dojo.dom.TEXT_NODE) {\n\t\t\treturn node;\n\t\t    }\t\t\t\t\t\n\t\t} while (node = node.previousSibling);"}}},"dojo.widget.html.RichText.toggleWikiWordLink":{"_":{"meta":{"summary":"","parameters":{"range":{"type":""}},"src":"\tif(dojo.render.html.ie){\n\t\tpn = range.parentElement();\n\t}else{\n\t\tvar rc = range.startContainer.childNodes.item(range.startOffset);\n\t\t\/\/ window.drange = range;\n\t\tif((rc)&&(rc.nodeName.toLowerCase() == \"a\")){\n\t\t\tpn = rc;\n\t\t}else if((range.startContainer[\"firstChild\"])&&(range.startContainer.firstChild.nodeName.toLowerCase()==\"a\")){\n\t\t\tpn = range.startContainer.firstChild;\n\t\t}else{\n\t\t\tpn = range.startContainer.parentNode;\n\t\t}\n\t}\n\t\/\/ FIXME: this clearly isn't working\n\tif(pn.nodeName.toLowerCase() == \"a\"){\n\t    if(pn.href.toLowerCase() == \"wiki-autolink:\" || pn.href.substring(0,5)==\"wiki:\"){\n\t\t\tif(dojo.render.html.ie){\n\t\t\t\trange.moveToElementText(pn);\n\t\t\t\tdocument.execCommand(\"unlink\");\n\t\t\t}else{\n\t\t\t\tthis.execCommand(\"unlink\");\n\t\t\t}\n\t\t}\n\t}else{\n\t\tthis.linkWikiWord(range);\n\t}","this":"dojo.widget.html.RichText"}}},"dojo.widget.html.RichText.linkWikiWord":{"_":{"meta":{"summary":"","parameters":{"range":{"type":""},"collapseRange":{"type":""}},"src":"\t\trange.moveStart(\"word\", -1);\n\t\trange.moveStart(\"word\", 1);\n\t\trange.execCommand(\"createlink\", false, \"wiki-autolink:\");\n\t}else{\n\t\t\/\/ dojo.debug(\"linking this range:\", range, range.toString().length);\n\t\t\/\/ grab selection\n\t\tvar selection = this.window.getSelection();\n\t\tvar selectionRange = selection.getRangeAt(0);\n\t\t\n\t\tif(dojo.render.html.moz){\n\t\t\tif(range.toString().length == 0){\n\t\t\t\tvar plc = selection.anchorNode.previousSibling.lastChild;\n\t\t\t\tif (plc.nodeValue) {\n\t\t\t\t    var lp = plc.nodeValue.split(\" \").pop();\n\t\t\t\t    selection.extend(plc, plc.nodeValue.length-lp.length);\n\t\t\t\t    this.execCommand(\"createlink\", \"wiki-autolink:\");\n\t\t\t\t    selection.removeAllRanges();\n\t\t\t\t    selection.addRange(range);\n\t\t\t\t}\n\t\t\t\treturn; \n\t\t\t}\n\t\t}\n\t\t\/\/ select our word and link\n\t\tselection.removeAllRanges();\n\t\tselection.addRange(range);\n\t\tthis.execCommand(\"createlink\", \"wiki-autolink:\");\n\t\t\n\t\tif(collapseRange){\n\t\t\t\/\/ restore selection, this is generally only useful when our\n\t\t\t\/\/ selection was at the end of the word anyway\n\t\t\tselection.removeAllRanges();\n\t\t\tselection.addRange(selectionRange);\n\t\t}\n\t}","this":"dojo.widget.html.RichText"}}},"dojo.widget.html.RichText.shouldLinkWikiWord":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\tvar nonwikiword = \/[^a-z0-9A-Z]\/;\n\tvar wikiword = \/(^|\\b|[^a-z0-9A-Z])([A-Z0-9]+[a-z][a-z0-9]*[A-Z][A-Za-z0-9]*)(\\b|[^a-z0-9A-Z]|$)\/;\n\n\tif(this.document.selection){ \/\/ Internet Explorer\n\t\tvar range = this.document.selection.createRange();\n\t\trange.moveStart(\"word\", -1);\n\t\trange.moveEnd(\"word\", 1);\n\t\t\n\t\tvar match = wikiword.exec(range.text);\n\t\tvar afterMatch = wikiword.exec(this.stringAfterKeyPress(e));\n\t\tif (!match || !afterMatch){ return false; }\n\t\tif (afterMatch[2] != match[2]){\n\t\t\tif(afterMatch.index != match.index){ return false; }\n\t\t\tmatch = afterMatch;\n\t\t}\n\t\t\n\t\trange.moveStart(\"character\", match.index + match[1].length);\n\t\trange.collapse(true);\n\t\trange.moveEnd(\"character\", match[2].length);\n\t\treturn range;\n\n\t}else if(dojo.render.html.mozilla){ \/\/ Mozilla\n\t\tif(this.getSelectedNode().nodeType != Node.TEXT_NODE){ return false; }\n\n\t\tvar selection = this.window.getSelection();\n\t\tvar selectionRange = selection.getRangeAt(0);\n\n\t\t\/\/ consider adjacent text nodes\n\t\t\/\/ note: we can't just normalize as this fouls our rich text editing\n\t\tvar node = selectionRange.startContainer, startNudge =  0;\n\t\twhile (node.previousSibling && node.previousSibling.nodeType == Node.TEXT_NODE) {\n\t\t\tnode = node.previousSibling;\n\t\t\tstartNudge += node.length\n\t\t}\n\t\tvar text = \"\", textNodes = [];\n\t\tdo {\n\t\t\tif (textNodes[text.length]) { textNodes[text.length].push(node); }\n\t\t\telse { textNodes[text.length] = [node]; }\n\t\t\ttext += node.nodeValue;\n\t\t\tnode = node.nextSibling;\n\t\t} while (node && node.nodeType == Node.TEXT_NODE)\n\n\t\t\/\/ find the word around the cursor\n\t\tvar range = selectionRange.cloneRange();\n\t\tvar startPosition = text.substr(0, range.startOffset + startNudge).search(\/(\\w)*$\/);\n\t\tvar endPosition = text.substr(range.startOffset + startNudge)\n\t\t\t\t.match(\/^(\\w)*\/)[0].length + range.startOffset + startNudge;\n\t\t\n\t\tvar word = text.substring(startPosition, endPosition);\n\n\t\tvar match = wikiword.exec(word);\n\t\tvar afterMatch = wikiword.exec(this.stringAfterKeyPress(e));\n\t\tif (!match || !afterMatch) { return false; }\n\t\tif (afterMatch[2] != match[2]) {\n\t\t\tif (afterMatch.index != match.index) { return false; }\n\t\t\tmatch = afterMatch;\n\t\t}\n\t\t\n\t\tstartPosition += match.index + match[1].length;\n\t\tfor (var startOffset = 0, startContainer;\n\t\t\t!(startContainer = textNodes[startPosition - startOffset]); startOffset++) {}\n\t\tendPosition = startPosition + match[2].length;\n\t\tfor (var endOffset = 1, endContainer;\n\t\t\t!(endContainer = textNodes[endPosition - endOffset]); endOffset++) {}\n\n\t\trange.setStart(startContainer[0], startOffset);\n\t\trange.setEnd(endContainer[endContainer.length - 1], endOffset);\n\n\t\treturn range;\n\t}else{ \/\/ Safari\n\t\t\/\/ Selection returned is a string primitive, bleh!\n\t\t\/\/var selection = editor.window.getSelection();\n\t}\n\treturn false;","this":"dojo.widget.html.RichText"}}},"dojo.widget.html.RichText.stringAfterKeyPress":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\tif (this.document.selection) {                     \n\t\tvar range = this.document.selection.createRange();\n\t\trange.moveStart(\"word\", -1);\n\t\tvar word = range.text;\n\t\tif(e && e.charCode){\n\t\t\tword += String.fromCharCode(e.charCode);\n\t\t}\n\t\trange.collapse(false);\n\t\trange.moveEnd(\"word\", 1);\n\t\tword += range.text;\n\t\t\n\t\treturn word;\n\t} else if (dojo.render.html.mozilla) { \/\/ Mozilla\n\t\tif (this.getSelectedNode().nodeType != Node.TEXT_NODE) { return false; }\n\n\t\tvar selection = this.window.getSelection();\n\t\tvar selectionRange = selection.getRangeAt(0);\n\n\t\t\/\/ consider adjacent text nodes\n\t\t\/\/ note: we can't just normalize as this fouls our rich text editing\n\t\tvar node = selectionRange.startContainer, startNudge = 0;\n\t\twhile (node.previousSibling && node.previousSibling.nodeType == Node.TEXT_NODE) {\n\t\t\tnode = node.previousSibling;\n\t\t\tstartNudge += node.nodeValue.length\n\t\t}\n\t\tvar text = \"\", textNodes = [];\n\t\tdo {\n\t\t\ttextNodes[text.length] = node;\n\t\t\ttext += node.nodeValue;\n\t\t\tnode = node.nextSibling;\n\t\t} while (node && node.nodeType == Node.TEXT_NODE)\n\t\t\/\/ dojo.debug(text);\n\n\t\t\/\/ find the word around the cursor\n\t\tvar range = selectionRange.cloneRange();\n\t\tvar startPosition = text.substr(0, range.startOffset + startNudge).search(\/(\\w)*$\/);\n\t\tvar endPosition = text.substr(range.startOffset + startNudge)\n\t\t\t\t.match(\/^(\\w)*\/)[0].length + range.startOffset + startNudge;\n\n\t\tvar word = text.substring(startPosition, range.startOffset + startNudge) +\n\t\t\t((e && e.charCode) ? String.fromCharCode(e.charCode) : \"\") + text.substring(range.startOffset + startNudge, endPosition);\n\t\t\/\/ dojo.debug(word);\n\n\t\treturn word;\n\t} else { \/\/ Safari\n\t\t\/\/ Selection returned is a string primitive, bleh!\n\t\t\/\/var selection = editor.window.getSelection();\n\t}\n\treturn \"\";","this":"dojo.widget.html.RichText"}}},"jot.widget.JotEditor2.cleanupWord":{"_":{"meta":{"summary":"","parameters":{"editor":{"type":""}},"src":"\tfunction doCleanup(save){\n\t\tif(!save){ return; }\n\t\t\n\t\tfunction cleanClasses (node) {\n\t\t\t\/\/ clean class attributes\n\t\t\tif (!node.className) { return; }\n\t\t\tvar newClass = node.className.replace(\/(^|\\s)mso.*?(\\s|$)\/ig, ' ');\n\t\t\tif (newClass != node.className) {\n\t\t\t\tnode.className = newClass;\n\t\t\t\tif (!\/\\S\/.test(node.className)) {\n\t\t\t\t\tnode.removeAttribute(\"className\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction cleanStyles (node) {\n\t\t\t\/\/ clean style attributes\n\t\t\tvar declarations = node.style.cssText.split(\/\\s*;\\s*\/);\n\t\t\tvar declarationsLength = declarations.length;\n\t\t\tfor (var i = declarations.length; --i >= 0;) {\n\t\t\t\tvar line = declarations[i];\n\t\t\t\tif (\/^mso|^tab-stops|^layout-grid\/i.test(line) ||\n\t\t\t\t\t\/^margin\\s*:\\s*[0-9]+..\\s+[0-9]+..\\s+[0-9]+..\/i.test(line)) {\n\t\t\t\t\tdeclarations.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tdeclarations[i] = line.replace(\/windowtext\/, '#000');\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (declarationsLength != declarations.length) {\n\t\t\t\tnode.style.cssText = declarations.join(\"; \");\n\t\t\t}\n\t\t}\n\n\t\tfunction removeNode (node) {\n\t\t\twhile (node.hasChildNodes()) {\n\t\t\t\tnode.parentNode.insertBefore(node, node.firstChild);\n\t\t\t}\n\t\t\tnode.parentNode.removeChild(node);\n\t\t}\n\n\t\tfunction checkEmpty(node) {\n\t\t\tif (\/^(a|span|b|strong|i|em|font)$\/i.test(node.tagName) &&\n\t\t\t\tnode.childNodes.length == 0) {\n\t\t\t\tnode.parentNode.removeChild(el);\n\t\t\t}\n\t\t}\n\n\t\tfunction parseTree(root) {\n\t\t\tvar tag = root.tagName.toLowerCase(), i, next;\n\t\t\tif (\/:\/.test(tag)) { stripTag(root); }\n\t\t\telse {\n\t\t\t\tfor (var i = 0; i < root.childNodes.length; i++) {\n\t\t\t\t\tvar child = root.childNodes[i];\n\t\t\t\t\tif (child.nodeType == 1) {\n\t\t\t\t\t\tcleanClasses(child);\n\t\t\t\t\t\tcleanStyles(child);\n\t\t\t\t\t\tparseTree(child);\n\t\t\t\t\t\tcheckEmpty(child);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\t\/\/ start it off\n\t\tparseTree(editor.domNode);\n\t}\n\n\tdojo.event.connect(editor, \"close\", doCleanup);","this":"dojo.widget.html.RichText"}}}}}},"dojo.widget.jot.JotEmailThisDialogue":{"meta":{"requires":{"common":["dojo.widget.Dialog","dojo.widget.*"]},"methods":{"jot.widget.HTMLJotEmailThisDialogue":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\n\tthis.templatePath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/JotEmailThisDialogue.html\");\n\tthis.cssPathBackup = this.templateCssPath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/JotEmailThisDialogue.css\");\n\n\t\/\/ DOM elements\n\tthis.toAddrsNode = null;\n\tthis.subjTextNode = null;\n\n\t\/\/ widget properties\n\tthis.widgetType = \"JotEmailThisDialogue\";\n\tthis.itemUrl = \"\";\n\t\/\/ FIXME: should this suffix include theme=none ?\n\tthis.itemSuffix = \"?pageEmail=1&emailStatus=entered\";\n\tthis.isContainer = false;\n\tthis.subjectText = \"\";\n\n\tthis.fillInTemplate = function(){\n\t\t\/\/ FIXME: need to auto-populate the subject here!\n\t\tif(this.subjectText.length){\n\t\t\tthis.subjTextNode.value = this.subjectText;\n\t\t}\n\n\t\tvar dw = dojo.widget.fromScript(\"Dialog\", {\n\t\t\tnodeRef: this.domNode\n\t\t});\n\t\tdw.show();\n\t}\n\n\n\tthis.submitForm = function(){\n\t\tvar _this = this;\n\t\t\/\/ alert(this.itemUrl+this.itemSuffix);\n\t\tdojo.io.bind({\n\t\t\turl: this.itemUrl+this.itemSuffix,\n\t\t\tmethod: \"post\",\n\t\t\tformNode: this.domNode,\n\t\t\tloaded: function(type, data, e){\n\t\t\t\tif(type == \"error\"){\n\t\t\t\t\talert(\"There was a problem sending this item. Please check the addresses you've entered and try again.\");\n\t\t\t\t}else{\n\t\t\t\t\t_this.destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}","this_variables":["templatePath","cssPathBackup","toAddrsNode","subjTextNode","widgetType","itemUrl","itemSuffix","isContainer","subjectText","fillInTemplate","subjTextNode.value","submitForm"],"inherits":["dojo.widget.HtmlWidget"]}}},"jot.widget.HTMLJotEmailThisDialogue.fillInTemplate":{"_":{"meta":{"summary":"","src":"\t\t\tthis.subjTextNode.value = this.subjectText;\n\t\t}\n\n\t\tvar dw = dojo.widget.fromScript(\"Dialog\", {\n\t\t\tnodeRef: this.domNode\n\t\t});\n\t\tdw.show();","this_variables":["subjTextNode.value"]}}},"jot.widget.HTMLJotEmailThisDialogue.submitForm":{"_":{"meta":{"summary":"","src":"\t\tvar _this = this;\n\t\t\/\/ alert(this.itemUrl+this.itemSuffix);\n\t\tdojo.io.bind({\n\t\t\turl: this.itemUrl+this.itemSuffix,\n\t\t\tmethod: \"post\",\n\t\t\tformNode: this.domNode,\n\t\t\tloaded: function(type, data, e){\n\t\t\t\tif(type == \"error\"){\n\t\t\t\t\talert(\"There was a problem sending this item. Please check the addresses you've entered and try again.\");\n\t\t\t\t}else{\n\t\t\t\t\t_this.destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t});"}}}}}},"dojo.widget.jot.JotFilterBar":{"meta":{"requires":{"common":["dojo.widget.*","jot.widget.JotCorkboardUtil"]},"methods":{"jot.widget.HTMLJotFilterBar":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\n\tthis.templatePath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/JotFilterBar.html\");\n\tthis.templateCssPath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/JotFilterBar.css\");\n\n\t\/\/ widget properties\n\tthis.widgetType = \"JotFilterBar\";\n\n\tthis.projectsNode = null;\n\tthis.datesRangeNode = null;\n\tthis.tagsNode = null;\n\tthis.usersNode = null;\n\n\tthis.projectsString = \"\";\n\tthis.datesString = \"\";\n\tthis.tagsString = \"\";\n\tthis.usersString = \"\";\n\n\t\/\/ FIXME: need to make a drag source and a drop target!\n\n\tthis.fillInTemplate = function(){\n\t\tdojo.event.topic.subscribe(\"\/corkboard\/filter\", this, \"updateFilter\");\n\t}\n\n\tthis.updateFilter = function(filterObj){\n\t\tif(filterObj.dates.length){\n\t\t\t\/\/ this.dateString = \"on \";\n\t\t\tfor(var x=0; x<filterObj.dates.length; x++){\n\t\t\t\tvar td = filterObj.dates[x];\n\t\t\t\t\/\/ alert((new Date()).getDay());\n\t\t\t\tthis.datesString += jot.cbUtil.getMonthName(td)+\" \"+td.getDate();\n\t\t\t}\n\t\t}\n\t\tif((filterObj.users.length)&&(filterObj.users.join(\"\").length)){\n\t\t\tthis.usersString = \"users: \"+filterObj.users.join(\", \");\n\t\t}else{\n\t\t\tthis.usersString = \"\";\n\t\t}\n\n\t\tif((filterObj.projects.length)&&(filterObj.projects.join(\"\").length)){\n\t\t\tthis.projectsString = \"in project(s): \"+filterObj.projects.join(\", \");\n\t\t}else{\n\t\t\tthis.projectsString = \"\";\n\t\t}\n\n\t\tif((filterObj.tags.length)&&(filterObj.tags.join(\"\").length)){\n\t\t\tthis.tagsString= \"with tag: \"+filterObj.tags.join(\", \");\n\t\t}else{\n\t\t\tthis.tagsString = \"\";\n\t\t}\n\n\t\tthis.buildDisplayString();\n\t}\n\n\tthis.buildDisplayString = function(){\n\t\tthis.datesRangeNode.innerHTML = this.datesString;\n\t\tthis.projectsNode.innerHTML = this.projectsString;\n\t\tthis.usersNode.innerHTML = this.usersString;\n\t\tthis.tagsNode.innerHTML = this.tagsString;\n\t}\n\n\tthis.showUpdating = function(){\n\t\t\/\/ should be called when we're updating the list of visible items in the item container\n\t}\n\n\tthis.doneUpdating = function(){\n\t\t\/\/ should be called when visible items are finished loading\n\t}","this_variables":["templatePath","templateCssPath","widgetType","projectsNode","datesRangeNode","tagsNode","usersNode","projectsString","datesString","tagsString","usersString","fillInTemplate","updateFilter","buildDisplayString","datesRangeNode.innerHTML","projectsNode.innerHTML","usersNode.innerHTML","tagsNode.innerHTML","showUpdating","doneUpdating"],"inherits":["dojo.widget.HtmlWidget"]}}},"jot.widget.HTMLJotFilterBar.fillInTemplate":{"_":{"meta":{"summary":"","src":"\t\tdojo.event.topic.subscribe(\"\/corkboard\/filter\", this, \"updateFilter\");"}}},"jot.widget.HTMLJotFilterBar.updateFilter":{"_":{"meta":{"summary":"","parameters":{"filterObj":{"type":""}},"src":"\t\tif(filterObj.dates.length){\n\t\t\t\/\/ this.dateString = \"on \";\n\t\t\tfor(var x=0; x<filterObj.dates.length; x++){\n\t\t\t\tvar td = filterObj.dates[x];\n\t\t\t\t\/\/ alert((new Date()).getDay());\n\t\t\t\tthis.datesString += jot.cbUtil.getMonthName(td)+\" \"+td.getDate();\n\t\t\t}\n\t\t}\n\t\tif((filterObj.users.length)&&(filterObj.users.join(\"\").length)){\n\t\t\tthis.usersString = \"users: \"+filterObj.users.join(\", \");\n\t\t}else{\n\t\t\tthis.usersString = \"\";\n\t\t}\n\n\t\tif((filterObj.projects.length)&&(filterObj.projects.join(\"\").length)){\n\t\t\tthis.projectsString = \"in project(s): \"+filterObj.projects.join(\", \");\n\t\t}else{\n\t\t\tthis.projectsString = \"\";\n\t\t}\n\n\t\tif((filterObj.tags.length)&&(filterObj.tags.join(\"\").length)){\n\t\t\tthis.tagsString= \"with tag: \"+filterObj.tags.join(\", \");\n\t\t}else{\n\t\t\tthis.tagsString = \"\";\n\t\t}\n\n\t\tthis.buildDisplayString();","this_variables":["usersString","projectsString","tagsString"]}}},"jot.widget.HTMLJotFilterBar.buildDisplayString":{"_":{"meta":{"summary":"","src":"\t\tthis.datesRangeNode.innerHTML = this.datesString;\n\t\tthis.projectsNode.innerHTML = this.projectsString;\n\t\tthis.usersNode.innerHTML = this.usersString;\n\t\tthis.tagsNode.innerHTML = this.tagsString;","this_variables":["datesRangeNode.innerHTML","projectsNode.innerHTML","usersNode.innerHTML","tagsNode.innerHTML"]}}},"jot.widget.HTMLJotFilterBar.showUpdating":{"_":{"meta":{"summary":"","src":"\t\t\/\/ should be called when we're updating the list of visible items in the item container"}}},"jot.widget.HTMLJotFilterBar.doneUpdating":{"_":{"meta":{"summary":"","src":"\t\t\/\/ should be called when visible items are finished loading"}}}}}},"dojo.widget.jot.JotFilterBuilder":{"meta":{"requires":{"common":["dojo.widget.*","dojo.io.*","dojo.animation.*","dojo.graphics.*","dojo.widget.html.ComboBox","jot.widget.JotCalendarContainer","jot.widget.JotTagSelector"]},"methods":{"jot.widget.HTMLJotFilterBuilder":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\n\tthis.templatePath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/JotFilterBuilder.html\");\n\tthis.templateCssPath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/JotFilterBuilder.css\");\n\n\t\/\/ widget properties\n\tthis.widgetType = \"JotFilterBuilder\";\n\tthis.isContainer = true;\n\n\t\/\/ class properties\n\tvar _detailInitialized = false;\n\tthis.isOpen = false;\n\tthis.calendar = null;\n\tthis.tagSelector = null;\n\tthis.tagDataUrl = \"\/CorkBoard\/CorkBoardTags?theme=none\";\n\tthis.userSelector = null;\n\tthis.userDataUrl = \"\/CorkBoard\/CorkBoardUsers?theme=none\";\n\tthis.projectSelector = null;\n\tthis.projectDataUrl = \"\/CorkBoard\/CorkBoardUsers?theme=none\";\n\n\tthis.filterObj = {\n\t\tdates: [],\n\t\tprojects: [],\n\t\ttags: [],\n\t\tusers: []\n\t};\n\n\tthis.reset = function(){\n\t\tthis.tagSelector.reset();\n\t\tthis.userSelector.reset();\n\t\tthis.projectSelector.reset();\n\t\tthis.filterChanged();\n\t}\n\n\tthis.close = function(){\n\t\tif(!this.contentRowNode){ return; }\n\t\tthis.contentRowNode.style.display = \"none\";\n\t\t\/\/ dojo.graphics.htmlEffects.wipeOut(this.contentContainer, 300);\n\t\tdojo.xml.htmlUtil.removeClass(this.arrowNode, \"down-arrow\");\n\t\tdojo.xml.htmlUtil.addClass(this.arrowNode, \"right-arrow\");\n\t}\n\n\tthis.open = function(){\n\t\tif(!this.contentRowNode){ return; }\n\t\tthis.contentRowNode.style.display = \"\";\n\t\tthis.buildDetailSelector();\n\t\t\/\/ dojo.graphics.htmlEffects.wipeIn(this.contentContainer, 300);\n\t\tdojo.xml.htmlUtil.removeClass(this.arrowNode, \"right-arrow\");\n\t\tdojo.xml.htmlUtil.addClass(this.arrowNode, \"down-arrow\");\n\t}\n\n\tthis.toggleClosed = function(){\n\t\tthis[(this.isOpen ? \"close\" : \"open\")]();\n\t\tthis.isOpen = (!this.isOpen);\n\t}\n\n\t\/\/ FIXME: need to make a drag source and a drop target!\n\n\tthis.fillInTemplate = function(){\n\t\tif(this.isOpen){ this.open(); }\n\t}\n\t\n\tthis.updateTags = function(tags){\n\t\tthis.filterObj.tags = tags;\n\t}\n\n\tthis.updateProjects = function(projects){\n\t\tthis.filterObj.projects = projects;\n\t}\n\n\tthis.updateUsers = function(users){\n\t\tthis.filterObj.users = users;\n\t}\n\n\tthis.buildDetailSelector = function(){\n\t\tif(_detailInitialized){ return; }\n\t\tvar _this = this;\n\t\tvar ns = document.createElement(\"span\");\n\t\tvar tds = this.contentContainer.getElementsByTagName(\"td\");\n\t\tvar cp =tds[0].appendChild(ns.cloneNode(true));\n\t\tvar tp =tds[1].appendChild(ns.cloneNode(true));\n\t\tvar pp =tds[2].appendChild(ns.cloneNode(true));\n\t\tvar up =tds[3].appendChild(ns.cloneNode(true));\n\t\tthis.calendar = dojo.widget.fromScript(cp, \"JotCalendarContainer\", {}, true)[0];\n\t\tthis.tagSelector = dojo.widget.fromScript(tp, \"JotTagSelector\", {\n\t\t\tcomboBoxSize: 10,\n\t\t\tallowNewTags: false\n\t\t}, true)[0];\n\t\t\/\/ this.filterObj.tags = this.tagSelector.selectedTags;\n\t\tdojo.event.connect(this.tagSelector, \"tagsSet\", this, \"updateTags\");\n\t\tdojo.event.connect(this.tagSelector, \"addSelectedTag\", this, \"filterChanged\");\n\t\tdojo.event.connect(this.tagSelector, \"removeTag\", this, \"filterChanged\");\n\n\t\tthis.projectSelector = dojo.widget.fromScript(pp, \"JotTagSelector\", {\n\t\t\tcomboBoxSize: 10,\n\t\t\tallowNewTags: false\n\t\t}, true)[0];\n\t\t\/\/ this.filterObj.projects = this.projectSelector.selectedTags;\n\t\tdojo.event.connect(this.projectSelector, \"tagsSet\", this, \"updateProjects\");\n\t\tdojo.event.connect(this.projectSelector, \"addSelectedTag\", this, \"filterChanged\");\n\t\tdojo.event.connect(this.projectSelector, \"removeTag\", this, \"filterChanged\");\n\n\n\t\tthis.userSelector = dojo.widget.fromScript(up, \"JotTagSelector\", {\n\t\t\tcomboBoxSize: 10,\n\t\t\tallowNewTags: false\n\t\t}, true)[0];\n\t\t\/\/ this.filterObj.users = this.userSelector.selectedTags;\n\t\tdojo.event.connect(this.userSelector, \"tagsSet\", this, \"updateUsers\");\n\t\tdojo.event.connect(this.userSelector, \"addSelectedTag\", this, \"filterChanged\");\n\t\tdojo.event.connect(this.userSelector, \"removeTag\", this, \"filterChanged\");\n\n\n\t\t\/\/ fetch data about things from our various data sources\n\n\t\t_detailInitialized = true;\n\t\tthis.getData();\n\t}\n\n\tthis.mapFromUl = function(doc){\n\t\tvar items = doc.getElementsByTagName(\"li\");\n\t\tvar ret = [];\n\t\tfor(var x=0; x<items.length; x++){\n\t\t\tvar ix = dojo.xml.domUtil.innerXML(items[x]);\n\t\t\tret.push([ix, ix]);\n\t\t}\n\t\treturn ret;\n\t}\n\n\tthis.getData = function(){\n\t\tvar _this = this;\n\t\tdojo.io.bind({\n\t\t\turl: _this.tagDataUrl,\n\t\t\tmimetype: \"text\/xml\",\n\t\t\tloaded: function(type, doc, e){\n\t\t\t\ttry{\n\t\t\t\tvar tmap = _this.mapFromUl(doc);\n\t\t\t\t_this.tagSelector.comboBox.dataProvider.setData(tmap);\n\t\t\t\t}catch(e){ alert(e); }\n\t\t\t}\n\t\t});\n\t}\n\n\tthis.filterChanged = function(){\n\t\tdojo.event.topic.publish(\"\/corkboard\/filter\" , this.filterObj);\n\t}","this_variables":["templatePath","templateCssPath","widgetType","isContainer","isOpen","calendar","tagSelector","tagDataUrl","userSelector","userDataUrl","projectSelector","projectDataUrl","filterObj","reset","close","contentRowNode.style.display","open","toggleClosed","fillInTemplate","updateTags","filterObj.tags","updateProjects","filterObj.projects","updateUsers","filterObj.users","buildDetailSelector","mapFromUl","getData","filterChanged"],"inherits":["dojo.widget.HtmlWidget"]}}},"jot.widget.HTMLJotFilterBuilder.reset":{"_":{"meta":{"summary":"","src":"\t\tthis.tagSelector.reset();\n\t\tthis.userSelector.reset();\n\t\tthis.projectSelector.reset();\n\t\tthis.filterChanged();"}}},"jot.widget.HTMLJotFilterBuilder.close":{"_":{"meta":{"summary":"","src":"\t\tif(!this.contentRowNode){ return; }\n\t\tthis.contentRowNode.style.display = \"none\";\n\t\t\/\/ dojo.graphics.htmlEffects.wipeOut(this.contentContainer, 300);\n\t\tdojo.xml.htmlUtil.removeClass(this.arrowNode, \"down-arrow\");\n\t\tdojo.xml.htmlUtil.addClass(this.arrowNode, \"right-arrow\");","this_variables":["contentRowNode.style.display"]}}},"jot.widget.HTMLJotFilterBuilder.open":{"_":{"meta":{"summary":"","src":"\t\tif(!this.contentRowNode){ return; }\n\t\tthis.contentRowNode.style.display = \"\";\n\t\tthis.buildDetailSelector();\n\t\t\/\/ dojo.graphics.htmlEffects.wipeIn(this.contentContainer, 300);\n\t\tdojo.xml.htmlUtil.removeClass(this.arrowNode, \"right-arrow\");\n\t\tdojo.xml.htmlUtil.addClass(this.arrowNode, \"down-arrow\");","this_variables":["contentRowNode.style.display"]}}},"jot.widget.HTMLJotFilterBuilder.toggleClosed":{"_":{"meta":{"summary":"","src":"\t\tthis[(this.isOpen ? \"close\" : \"open\")]();\n\t\tthis.isOpen = (!this.isOpen);","this_variables":["isOpen"]}}},"jot.widget.HTMLJotFilterBuilder.fillInTemplate":{"_":{"meta":{"summary":"","src":"\t\tif(this.isOpen){ this.open(); }"}}},"jot.widget.HTMLJotFilterBuilder.updateTags":{"_":{"meta":{"summary":"","parameters":{"tags":{"type":""}},"src":"\t\tthis.filterObj.tags = tags;","this_variables":["filterObj.tags"]}}},"jot.widget.HTMLJotFilterBuilder.updateProjects":{"_":{"meta":{"summary":"","parameters":{"projects":{"type":""}},"src":"\t\tthis.filterObj.projects = projects;","this_variables":["filterObj.projects"]}}},"jot.widget.HTMLJotFilterBuilder.updateUsers":{"_":{"meta":{"summary":"","parameters":{"users":{"type":""}},"src":"\t\tthis.filterObj.users = users;","this_variables":["filterObj.users"]}}},"jot.widget.HTMLJotFilterBuilder.buildDetailSelector":{"_":{"meta":{"summary":"","src":"\t\tif(_detailInitialized){ return; }\n\t\tvar _this = this;\n\t\tvar ns = document.createElement(\"span\");\n\t\tvar tds = this.contentContainer.getElementsByTagName(\"td\");\n\t\tvar cp =tds[0].appendChild(ns.cloneNode(true));\n\t\tvar tp =tds[1].appendChild(ns.cloneNode(true));\n\t\tvar pp =tds[2].appendChild(ns.cloneNode(true));\n\t\tvar up =tds[3].appendChild(ns.cloneNode(true));\n\t\tthis.calendar = dojo.widget.fromScript(cp, \"JotCalendarContainer\", {}, true)[0];\n\t\tthis.tagSelector = dojo.widget.fromScript(tp, \"JotTagSelector\", {\n\t\t\tcomboBoxSize: 10,\n\t\t\tallowNewTags: false\n\t\t}, true)[0];\n\t\t\/\/ this.filterObj.tags = this.tagSelector.selectedTags;\n\t\tdojo.event.connect(this.tagSelector, \"tagsSet\", this, \"updateTags\");\n\t\tdojo.event.connect(this.tagSelector, \"addSelectedTag\", this, \"filterChanged\");\n\t\tdojo.event.connect(this.tagSelector, \"removeTag\", this, \"filterChanged\");\n\n\t\tthis.projectSelector = dojo.widget.fromScript(pp, \"JotTagSelector\", {\n\t\t\tcomboBoxSize: 10,\n\t\t\tallowNewTags: false\n\t\t}, true)[0];\n\t\t\/\/ this.filterObj.projects = this.projectSelector.selectedTags;\n\t\tdojo.event.connect(this.projectSelector, \"tagsSet\", this, \"updateProjects\");\n\t\tdojo.event.connect(this.projectSelector, \"addSelectedTag\", this, \"filterChanged\");\n\t\tdojo.event.connect(this.projectSelector, \"removeTag\", this, \"filterChanged\");\n\n\n\t\tthis.userSelector = dojo.widget.fromScript(up, \"JotTagSelector\", {\n\t\t\tcomboBoxSize: 10,\n\t\t\tallowNewTags: false\n\t\t}, true)[0];\n\t\t\/\/ this.filterObj.users = this.userSelector.selectedTags;\n\t\tdojo.event.connect(this.userSelector, \"tagsSet\", this, \"updateUsers\");\n\t\tdojo.event.connect(this.userSelector, \"addSelectedTag\", this, \"filterChanged\");\n\t\tdojo.event.connect(this.userSelector, \"removeTag\", this, \"filterChanged\");\n\n\n\t\t\/\/ fetch data about things from our various data sources\n\n\t\t_detailInitialized = true;\n\t\tthis.getData();","this_variables":["calendar","tagSelector","projectSelector","userSelector"]}}},"jot.widget.HTMLJotFilterBuilder.mapFromUl":{"_":{"meta":{"summary":"","parameters":{"doc":{"type":""}},"src":"\t\tvar items = doc.getElementsByTagName(\"li\");\n\t\tvar ret = [];\n\t\tfor(var x=0; x<items.length; x++){\n\t\t\tvar ix = dojo.xml.domUtil.innerXML(items[x]);\n\t\t\tret.push([ix, ix]);\n\t\t}\n\t\treturn ret;"}}},"jot.widget.HTMLJotFilterBuilder.getData":{"_":{"meta":{"summary":"","src":"\t\tvar _this = this;\n\t\tdojo.io.bind({\n\t\t\turl: _this.tagDataUrl,\n\t\t\tmimetype: \"text\/xml\",\n\t\t\tloaded: function(type, doc, e){\n\t\t\t\ttry{\n\t\t\t\tvar tmap = _this.mapFromUl(doc);\n\t\t\t\t_this.tagSelector.comboBox.dataProvider.setData(tmap);\n\t\t\t\t}catch(e){ alert(e); }\n\t\t\t}\n\t\t});"}}},"jot.widget.HTMLJotFilterBuilder.filterChanged":{"_":{"meta":{"summary":"","src":"\t\tdojo.event.topic.publish(\"\/corkboard\/filter\" , this.filterObj);"}}}}}},"dojo.widget.jot.JotImagePicker":{"meta":{"requires":{"common":["dojo.rpc.JotService","dojo.widget.*","dojo.html","dojo.io.IframeIO"]},"methods":{"jot.widget.JotImagePicker":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"],"protovariables":{"imgWidth":"","imgHeight":"","imgScrollContainer":"","imgContainer":"","fileNameContainer":"","fileDetailContainer":"","templatePath":"","templateCssPath":"","widgetType":"","bgIframe":"","imgSearchData":"","userPhotos":"","othersPhotos":"","userModeButton":"","allModeButton":"","insertButton":"","uploadForm":"","uploadButton":"","fetching":"","selectedImgUrl":"","mode":"","rootPath":"","pagePage":"","user":"","displayName":"","pageName":"","pageRevision":"","pageTitle":"","pageId":""}}}},"jot.widget.JotImagePicker.fillInTemplate":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.require(\"dojo.io.IframeIO\");\n\t\t\tthis.previewImg.src = dojo.uri.dojoUri(\"src\/widget\/templates\/images\/blank.gif\");\n\n\t\t\t\/\/ set up our query and grab the thumbnails\n\t\t\tthis.imgScrollContainer.removeChild(this.imgContainer);\n\t\t\tthis.enableUploadButton();\n\t\t\tthis.getThumbnailList();","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.HtmlWidget":{"_":{"meta":{"this_variables":["previewImg.src","mode","fetching","imgSearchData","userPhotos","othersPhotos","imgScrollContainer.innerHTML","selectedImgUrl","previewImg.src","filenameContainer.innerHTML","insertButton.disabled","fetching","fetching","fetching","uploadButton.disabled","bgIframe.style.display"]}}},"jot.widget.JotImagePicker.insertImage":{"_":{"meta":{"summary":"","parameters":{"imgUrl":{"type":""}},"src":"\t\t\tdojo.debug(\"insert:\", imgUrl);","this":"dojo.widget.HtmlWidget"}}},"jot.widget.JotImagePicker.clickInsertImage":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\t\tevt.preventDefault();\n\t\t\tif(this.selectedImgUrl != \"\"){\n\t\t\t\tthis.insertImage(this.selectedImgUrl);\n\t\t\t\tthis.destroy();\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"jot.widget.JotImagePicker.setMode":{"_":{"meta":{"summary":"","parameters":{"mode":{"type":""}},"src":"\t\t\tif((mode == this.mode)&&(this.imgSearchData)){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.mode = mode;\n\t\t\tif(!this.imgSearchData){\n\t\t\t\tthis.getThumbnailList();\n\t\t\t}else{\n\t\t\t\tthis.renderThumbnailList();\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"jot.widget.JotImagePicker.userMode":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.html.addClass(this.userModeButton, \"selectedMode\");\n\t\t\tdojo.html.removeClass(this.allModeButton, \"selectedMode\");\n\t\t\tthis.setMode(\"user\");","this":"dojo.widget.HtmlWidget"}}},"jot.widget.JotImagePicker.othersMode":{"_":{"meta":{"summary":"","src":"\t\t\tthis.setMode(\"others\");","this":"dojo.widget.HtmlWidget"}}},"jot.widget.JotImagePicker.allMode":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.html.addClass(this.allModeButton, \"selectedMode\");\n\t\t\tdojo.html.removeClass(this.userModeButton, \"selectedMode\");\n\t\t\tthis.setMode(\"all\");","this":"dojo.widget.HtmlWidget"}}},"jot.widget.JotImagePicker.receiveThumbnailList":{"_":{"meta":{"summary":"","parameters":{"data":{"type":""},"selectFirst":{"type":""}},"src":"\t\t\tif (data.error) alert(data.error);\n\t\t\tthis.fetching = false;\n\t\t\t\/\/ \"data\" is a JSON structure that represents the result format\n\t\t\t\/*\n\t\t\t{\n\t\t\t\t\"list\": [\n\t\t\t\t\t{\t\"editTime\":\"2\/21\/2006 9:13PM\",\n\t\t\t\t\t\t\"editUser\":\"admin\",\n\t\t\t\t\t\t\"modificationTime\":\"2\/21\/2006 9:13PM\",\n\t\t\t\t\t\t\"attach\/sourceName\":\"bg-fade.png\",\n\t\t\t\t\t\t\"attach\/comment\":null,\n\t\t\t\t\t\t\"name\":\"bg-fade.png\",\n\t\t\t\t\t\t\"attach\/name\":\"bg-fade.png\",\n\t\t\t\t\t\t\"id\":396,\n\t\t\t\t\t\t\"attach\/size\":859,\n\t\t\t\t\t\t\"revision\":1,\n\t\t\t\t\t\t\"attach\/contentType\":\"image\/png\",\n\t\t\t\t\t\t\"attach\/URI\":\"<attachment>\"\n\t\t\t\t\t},\n\t\t\t\t\t{\t\"editTime\":\"2\/15\/2006 5:00PM\",\n\t\t\t\t\t\t\"editUser\":\"admin\",\n\t\t\t\t\t\t\"modificationTime\":\"2\/17\/2006 4:09PM\",\n\t\t\t\t\t\t\"name\":\"blog_2.gif\",\n\t\t\t\t\t\t\"id\":312,\n\t\t\t\t\t\t\"attach\/size\":453,\n\t\t\t\t\t\t\"revision\":1,\n\t\t\t\t\t\t\"attach\/URI\":\"<attachment>\"\n\t\t\t\t\t},\n\t\t\t\t\t{\t\"editTime\":\"2\/15\/2006 5:00PM\",\n\t\t\t\t\t\t\"editUser\":\"admin\",\n\t\t\t\t\t\t\"modificationTime\":\"2\/17\/2006 4:09PM\",\n\t\t\t\t\t\t\"name\":\"DocBlogScreenshot.png\",\n\t\t\t\t\t\t\"id\":313,\n\t\t\t\t\t\t\"attach\/size\":235442,\n\t\t\t\t\t\t\"revision\":1,\n\t\t\t\t\t\t\"attach\/URI\":\"<attachment>\"\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t\t*\/\n\t\t\tthis.imgSearchData = data;\n\t\t\tthis.processThumbnailList();\n\t\t\tthis.renderThumbnailList(selectFirst);","this":"dojo.widget.HtmlWidget"}}},"jot.widget.JotImagePicker.processThumbnailList":{"_":{"meta":{"summary":"","parameters":{"data":{"type":""}},"src":"\t\t\tthis.othersPhotos = [];\n\n\t\t\tvar list = data||this.imgSearchData;\n\t\t\tif(!list){ return; }\n\n\t\t\tdojo.lang.forEach(list, dojo.lang.hitch(this, function(item){\n\t\t\t\tif(item.editUser == Wiki.user){\n\t\t\t\t\tthis.userPhotos.push(item);\n\t\t\t\t}else{\n\t\t\t\t\tthis.othersPhotos.push(item);\n\t\t\t\t}\n\t\t\t}));","this":"dojo.widget.HtmlWidget"}}},"jot.widget.JotImagePicker.renderThumbnailList":{"_":{"meta":{"summary":"","parameters":{"selectFirst":{"type":""}},"src":"\t\t\tdojo.event.browser.clean(this.imgScrollContainer);\n\t\t\tthis.imgScrollContainer.innerHTML = \"\";\n\n\t\t\tvar imgAdder = dojo.lang.hitch(this, function(item, mine, select){\n\t\t\t\tvar userImg = this.imgContainer.cloneNode(true);\n\t\t\t\tthis.imgScrollContainer.appendChild(userImg);\n\t\t\t\tif(mine && false){\n\t\t\t\t\tdojo.html.addClass(userImg, \"myImages\");\n\t\t\t\t}\n\t\t\t\tvar timg = document.createElement(\"img\");\n\t\t\t\tuserImg.appendChild(timg);\n\t\t\t\ttimg.src = this.rootPath+\"\/System\/Themes\/Jot\/SVGResize?w=\"+this.imgWidth+\"&h=\"+this.imgHeight+\"&img=\"+encodeURIComponent(item.path);\n\t\t\t\ttimg.alt = item.name;\n\t\t\t\tvar clickHandler = dojo.lang.hitch(this, function(){\n\t\t\t\t\t\tthis.selectedImgUrl = this.rootPath + item.path;\n\t\t\t\t\t\tthis.previewImg.src = timg.src;\n\t\t\t\t\t\tthis.filenameContainer.innerHTML = item.name;\n\t\t\t\t\t\tthis.insertButton.disabled = false;\n\t\t\t\t\t\tdojo.html.removeClass(this.insertButton, \"disabled\");\n\t\t\t\t\t});\n\t\t\t\tdojo.event.connect(timg, \"onclick\", clickHandler);\n\t\t\t\tif (select) { clickHandler(); }\n\t\t\t});\n\n\t\t\tif( (\"user\" == this.mode) || (\"all\" == this.mode) ){\n\t\t\t\tvar userPhotos = this.userPhotos;\n\t\t\t\tdojo.lang.forEach(this.userPhotos, function(item){\n\t\t\t\t\t\tvar isFirst = (item == userPhotos[0]);\n\t\t\t\t\t\tif (isFirst && selectFirst) {\n\t\t\t\t\t\t\timgAdder(item, true, true);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\timgAdder(item, true, false);\n\t\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif( (\"others\" == this.mode) || (\"all\" == this.mode) ){\n\t\t\t\tdojo.lang.forEach(this.othersPhotos, function(item){\n\t\t\t\t\timgAdder(item, false);\n\t\t\t\t});\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"jot.widget.JotImagePicker.getThumbnailList":{"_":{"meta":{"summary":"","parameters":{"justUploaded":{"type":""}},"src":"\t\t\tif(this.fetching){ return; }\n\n\t\t\tvar svc = new dojo.rpc.JotService();\n\t\t\tsvc.serviceUrl = this.rootPath + svc.serviceUrl;\n\t\t\t\/*\n\t\t\tfunction dump(){\n\t\t\t\tdojo.lang.forEach(arguments, function(arg){\n\t\t\t\t\tdojo.debug(dojo.json.serialize(arg));\n\t\t\t\t});\n\t\t\t}\n\t\t\t\/\/ def.addCallback(dump);\n\t\t\t*\/\n\n\t\t\tvar searchScript = \"new function() { \";\n\t\t\tsearchScript += \"var search = jot.lib.search({forFormName: 'attach', showHidden: true, order: 'createTime-', filter: \\\"(starts-with(it\/path, '\/System\/TmpImageUpload') or not(starts-with(it\/path, '\/Lib\/') or starts-with(it\/path, '\/System\/'))) and (substring(it\/name, string-length(it\/name) - 3) = '.jpg' or substring(it\/name, string-length(it\/name) - 3) = '.gif' or substring(it\/name, string-length(it\/name) - 3) = '.png') or (substring(it\/name, string-length(it\/name) - 3) = '.JPG' or substring(it\/name, string-length(it\/name) - 3) = '.GIF' or substring(it\/name, string-length(it\/name) - 3) = '.PNG') and pkg:getPackage(it\/path)='' \\\"});\";\n\t\t\tsearchScript += \"var results = []; \";\n\t\t\tsearchScript += \"for (var i in search.items) {\";\n\t\t\tsearchScript += \"  var p = search.items[i];\";\n\t\t\tsearchScript += \"  results.push({name:p.name, path:p.path, editUser:p.editUser});\";\n\t\t\tsearchScript += \"}; return results;\"\n\t\t\tsearchScript += \"}();\";\n\t\t\tcopy = searchScript;\n\n\t\t\tvar def = svc.callRemote(\"script\", {\n\t\t\t\tcode: searchScript,\n\t\t\t\tshowResult: true\n\t\t\t\t\t\t});\n\t\t\tdef.addCallback(dojo.lang.hitch(this, function(result){\n\t\t\t\t\t\tthis.receiveThumbnailList(result, justUploaded);\n\t\t\t\t\t}));\n\t\t\tthis.fetching = true;","this":"dojo.widget.HtmlWidget"}}},"jot.widget.JotImagePicker.code":{"_":{"meta":{"summary":"","parameters":{"justUploaded":{"type":""}},"src":"\t\t\tif(this.fetching){ return; }\n\n\t\t\tvar svc = new dojo.rpc.JotService();\n\t\t\tsvc.serviceUrl = this.rootPath + svc.serviceUrl;\n\t\t\t\/*\n\t\t\tfunction dump(){\n\t\t\t\tdojo.lang.forEach(arguments, function(arg){\n\t\t\t\t\tdojo.debug(dojo.json.serialize(arg));\n\t\t\t\t});\n\t\t\t}\n\t\t\t\/\/ def.addCallback(dump);\n\t\t\t*\/\n\n\t\t\tvar searchScript = \"new function() { \";\n\t\t\tsearchScript += \"var search = jot.lib.search({forFormName: 'attach', showHidden: true, order: 'createTime-', filter: \\\"(starts-with(it\/path, '\/System\/TmpImageUpload') or not(starts-with(it\/path, '\/Lib\/') or starts-with(it\/path, '\/System\/'))) and (substring(it\/name, string-length(it\/name) - 3) = '.jpg' or substring(it\/name, string-length(it\/name) - 3) = '.gif' or substring(it\/name, string-length(it\/name) - 3) = '.png') or (substring(it\/name, string-length(it\/name) - 3) = '.JPG' or substring(it\/name, string-length(it\/name) - 3) = '.GIF' or substring(it\/name, string-length(it\/name) - 3) = '.PNG') and pkg:getPackage(it\/path)='' \\\"});\";\n\t\t\tsearchScript += \"var results = []; \";\n\t\t\tsearchScript += \"for (var i in search.items) {\";\n\t\t\tsearchScript += \"  var p = search.items[i];\";\n\t\t\tsearchScript += \"  results.push({name:p.name, path:p.path, editUser:p.editUser});\";\n\t\t\tsearchScript += \"}; return results;\"\n\t\t\tsearchScript += \"}();\";\n\t\t\tcopy = searchScript;\n\n\t\t\tvar def = svc.callRemote(\"script\", {\n\t\t\t\tcode: searchScript,\n\t\t\t\tshowResult: true\n\t\t\t\t\t\t});\n\t\t\tdef.addCallback(dojo.lang.hitch(this, function(result){\n\t\t\t\t\t\tthis.receiveThumbnailList(result, justUploaded);\n\t\t\t\t\t}));\n\t\t\tthis.fetching = true;","this":"dojo.widget.HtmlWidget"}}},"jot.widget.JotImagePicker.showResult":{"_":{"meta":{"summary":"","parameters":{"justUploaded":{"type":""}},"src":"\t\t\tif(this.fetching){ return; }\n\n\t\t\tvar svc = new dojo.rpc.JotService();\n\t\t\tsvc.serviceUrl = this.rootPath + svc.serviceUrl;\n\t\t\t\/*\n\t\t\tfunction dump(){\n\t\t\t\tdojo.lang.forEach(arguments, function(arg){\n\t\t\t\t\tdojo.debug(dojo.json.serialize(arg));\n\t\t\t\t});\n\t\t\t}\n\t\t\t\/\/ def.addCallback(dump);\n\t\t\t*\/\n\n\t\t\tvar searchScript = \"new function() { \";\n\t\t\tsearchScript += \"var search = jot.lib.search({forFormName: 'attach', showHidden: true, order: 'createTime-', filter: \\\"(starts-with(it\/path, '\/System\/TmpImageUpload') or not(starts-with(it\/path, '\/Lib\/') or starts-with(it\/path, '\/System\/'))) and (substring(it\/name, string-length(it\/name) - 3) = '.jpg' or substring(it\/name, string-length(it\/name) - 3) = '.gif' or substring(it\/name, string-length(it\/name) - 3) = '.png') or (substring(it\/name, string-length(it\/name) - 3) = '.JPG' or substring(it\/name, string-length(it\/name) - 3) = '.GIF' or substring(it\/name, string-length(it\/name) - 3) = '.PNG') and pkg:getPackage(it\/path)='' \\\"});\";\n\t\t\tsearchScript += \"var results = []; \";\n\t\t\tsearchScript += \"for (var i in search.items) {\";\n\t\t\tsearchScript += \"  var p = search.items[i];\";\n\t\t\tsearchScript += \"  results.push({name:p.name, path:p.path, editUser:p.editUser});\";\n\t\t\tsearchScript += \"}; return results;\"\n\t\t\tsearchScript += \"}();\";\n\t\t\tcopy = searchScript;\n\n\t\t\tvar def = svc.callRemote(\"script\", {\n\t\t\t\tcode: searchScript,\n\t\t\t\tshowResult: true\n\t\t\t\t\t\t});\n\t\t\tdef.addCallback(dojo.lang.hitch(this, function(result){\n\t\t\t\t\t\tthis.receiveThumbnailList(result, justUploaded);\n\t\t\t\t\t}));\n\t\t\tthis.fetching = true;","this":"dojo.widget.HtmlWidget"}}},"jot.widget.JotImagePicker.enableUploadButton":{"_":{"meta":{"summary":"","src":"\t\t\tif (!this.uploadForm.attach){ return; }\n\t\t\tvar file = dojo.string.trim(this.uploadForm.attach.value);\n\t\t\tif (file) {\n\t\t\t\tthis.uploadButton.disabled = false;\n\t\t\t\tdojo.html.removeClass(this.uploadButton, \"disabled\");\n\t\t\t} else {\n\t\t\t\tthis.uploadButton.disabled = true;\n\t\t\t\tdojo.html.addClass(this.uploadButton, \"disabled\");\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"jot.widget.JotImagePicker.uploadImage":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.io.bind({\n\t\t\t\turl: this.rootPath + \"\/System\/Themes\/Jot\/AddImagePickerAttachment\",\n\t\t\t\tformNode: this.uploadForm,\n\t\t\t\tsendTransport: true,\n\t\t\t\tmimetype: \"text\/plain\",\n\t\t\t\tload: dojo.lang.hitch(this, function(type, data, evt){\n\t\t\t\t\t\/\/ dojo.debug(\"success:\", data);\n\t\t\t\t\tthis.uploadForm.reset();\n\t\t\t\t\tthis.enableUploadButton();\n\t\t\t\t\tthis.getThumbnailList(true);\n\t\t\t\t})\n\t\t\t});","this":"dojo.widget.HtmlWidget"}}},"jot.widget.JotImagePicker.url":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.io.bind({\n\t\t\t\turl: this.rootPath + \"\/System\/Themes\/Jot\/AddImagePickerAttachment\",\n\t\t\t\tformNode: this.uploadForm,\n\t\t\t\tsendTransport: true,\n\t\t\t\tmimetype: \"text\/plain\",\n\t\t\t\tload: dojo.lang.hitch(this, function(type, data, evt){\n\t\t\t\t\t\/\/ dojo.debug(\"success:\", data);\n\t\t\t\t\tthis.uploadForm.reset();\n\t\t\t\t\tthis.enableUploadButton();\n\t\t\t\t\tthis.getThumbnailList(true);\n\t\t\t\t})\n\t\t\t});","this":"dojo.widget.HtmlWidget"}}},"jot.widget.JotImagePicker.formNode":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.io.bind({\n\t\t\t\turl: this.rootPath + \"\/System\/Themes\/Jot\/AddImagePickerAttachment\",\n\t\t\t\tformNode: this.uploadForm,\n\t\t\t\tsendTransport: true,\n\t\t\t\tmimetype: \"text\/plain\",\n\t\t\t\tload: dojo.lang.hitch(this, function(type, data, evt){\n\t\t\t\t\t\/\/ dojo.debug(\"success:\", data);\n\t\t\t\t\tthis.uploadForm.reset();\n\t\t\t\t\tthis.enableUploadButton();\n\t\t\t\t\tthis.getThumbnailList(true);\n\t\t\t\t})\n\t\t\t});","this":"dojo.widget.HtmlWidget"}}},"jot.widget.JotImagePicker.sendTransport":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.io.bind({\n\t\t\t\turl: this.rootPath + \"\/System\/Themes\/Jot\/AddImagePickerAttachment\",\n\t\t\t\tformNode: this.uploadForm,\n\t\t\t\tsendTransport: true,\n\t\t\t\tmimetype: \"text\/plain\",\n\t\t\t\tload: dojo.lang.hitch(this, function(type, data, evt){\n\t\t\t\t\t\/\/ dojo.debug(\"success:\", data);\n\t\t\t\t\tthis.uploadForm.reset();\n\t\t\t\t\tthis.enableUploadButton();\n\t\t\t\t\tthis.getThumbnailList(true);\n\t\t\t\t})\n\t\t\t});","this":"dojo.widget.HtmlWidget"}}},"jot.widget.JotImagePicker.mimetype":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.io.bind({\n\t\t\t\turl: this.rootPath + \"\/System\/Themes\/Jot\/AddImagePickerAttachment\",\n\t\t\t\tformNode: this.uploadForm,\n\t\t\t\tsendTransport: true,\n\t\t\t\tmimetype: \"text\/plain\",\n\t\t\t\tload: dojo.lang.hitch(this, function(type, data, evt){\n\t\t\t\t\t\/\/ dojo.debug(\"success:\", data);\n\t\t\t\t\tthis.uploadForm.reset();\n\t\t\t\t\tthis.enableUploadButton();\n\t\t\t\t\tthis.getThumbnailList(true);\n\t\t\t\t})\n\t\t\t});","this":"dojo.widget.HtmlWidget"}}},"jot.widget.JotImagePicker.load":{"_":{"meta":{"summary":"","src":"\t\t\tdojo.io.bind({\n\t\t\t\turl: this.rootPath + \"\/System\/Themes\/Jot\/AddImagePickerAttachment\",\n\t\t\t\tformNode: this.uploadForm,\n\t\t\t\tsendTransport: true,\n\t\t\t\tmimetype: \"text\/plain\",\n\t\t\t\tload: dojo.lang.hitch(this, function(type, data, evt){\n\t\t\t\t\t\/\/ dojo.debug(\"success:\", data);\n\t\t\t\t\tthis.uploadForm.reset();\n\t\t\t\t\tthis.enableUploadButton();\n\t\t\t\t\tthis.getThumbnailList(true);\n\t\t\t\t})\n\t\t\t});","this":"dojo.widget.HtmlWidget"}}},"jot.widget.JotImagePicker.hide":{"_":{"meta":{"summary":"","src":"\t\t\tthis.domNode.parentNode.removeChild(this.domNode);\n\t\t\tif(this.bgIframe){\n\t\t\t\tthis.bgIframe.style.display = \"none\";\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"jot.widget.JotImagePicker.showAt":{"_":{"meta":{"summary":"","parameters":{"x":{"type":""},"y":{"type":""}},"src":"\t\t\t\ttop = y + \"px\";\n\t\t\t\tleft = x + \"px\";\n\t\t\t\tzIndex = 999;\n\t\t\t}\n\t\t\tdocument.body.appendChild(this.domNode);\n\t\t\tif(this.bgIframe){\n\t\t\t\twith(this.bgIframe.style){\n\t\t\t\t\tdisplay = \"block\";\n\t\t\t\t\ttop = y + \"px\";\n\t\t\t\t\tleft = x + \"px\";\n\t\t\t\t\tzIndex = 998;\n\t\t\t\t\twidth = dojo.html.getOuterWidth(this.domNode) + \"px\";\n\t\t\t\t\theight = dojo.html.getOuterHeight(this.domNode) + \"px\";\n\t\t\t\t}\n\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}}}}},"dojo.widget.jot.JotImportTable":{"meta":{"requires":{"common":["dojo.xml.htmlUtil","dojo.widget.*","jot.widget.JotListSelector"]},"methods":{"jot.widget.HTMLJotImportTable":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\n\tthis.isContainer = false;\n\tthis.columnDataUrl = \"\";\n\tthis.columnTDs = [];\n\tthis.columnEditors = [];\n\tthis.formNode = null;\n\n\tthis.widgetType = \"JotImportTable\";\n\t\/\/ since this is an in-place widget, prevent clobbering of our table by\n\t\/\/ over-riding postInitialize, which normally handles widget replacement.\n\tthis.postInitialize = function(args, frag){ return; }\n\tthis.destroyRendering = function(){ return; }\n\tthis.cleanUp = function(){ return; }\n\n\tthis.buildRendering = function(args, frag){\n\t\tthis.parseFragment = frag;\n\t\tthis.normalizedArgs = args;\n\t\tthis.domNode = frag[\"dojo:jotimporttable\"].nodeRef;\n\t\tthis.formNode = dojo.xml.htmlUtil.getParentOfType(this.domNode, \"form\");\n\t\tdojo.event.connect(this.formNode, \"onsubmit\", this, \"checkSubmit\");\n\n\t\t\/\/ attach our event handlers\n\t\tvar tr0 = this.domNode.tBodies[0].getElementsByTagName(\"tr\")[0];\n\t\tvar tds = tr0.getElementsByTagName(\"td\");\n\t\tfor(var x=1; x<tds.length; x++){\n\t\t\tvar input = tds[x].getElementsByTagName(\"input\")[0];\n\t\t\tdojo.event.connect(input, \"onclick\", this, \"toggleListEditor\");\n\t\t\tthis.columnTDs.push(tds[x]);\n\t\t}\n\t}\n\n\tthis.checkSubmit = function(evt){\n\t\tvar fromEditor = false;\n\t\tvar editor = null;\n\t\tfor(var x=0; x<this.columnEditors.length; x++){\n\t\t\tif(this.columnEditors[x]){\n\t\t\t\tif(this.columnEditors[x].txtInput.value != \"\"){\n\t\t\t\t\tfromEditor = true;\n\t\t\t\t\teditor = this.columnEditors[x];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(fromEditor){\n\t\t\tevt.stopPropagation();\n\t\t\tevt.preventDefault();\n\t\t\teditor.addFromText();\n\t\t}\n\t\treturn false;\n\t}\n\n\tthis.toggleListEditor = function(evt){\n\t\tvar tgt = evt.target;\n\t\tvar ntgt = dojo.xml.htmlUtil.getParentOfType(tgt, \"td\");\n\t\tif(!ntgt){ return; }\n\t\tvar idx = 0;\n\t\tfor(var x=0; x<this.columnTDs.length; x++){\n\t\t\tif(ntgt===this.columnTDs[x]){\n\t\t\t\tidx = x;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif(!tgt.checked){\n\t\t\t\/\/ alert(\"clobbering!\");\n\t\t\tif(this.columnEditors[idx]){\n\t\t\t\tvar ced = this.columnEditors[idx];\n\t\t\t\tced.domNode.parentNode.removeChild(ced.domNode);\n\t\t\t\tthis.columnEditors[idx] = null;\n\t\t\t}\n\t\t}else{\n\t\t\t\/\/ var ctr = document.createElement(\"span\");\n\t\t\t\/\/ ntgt.appendChild(ctr);\n\t\t\t\/\/ alert(\"creating!\");\n\t\t\t\/\/ alert(this.columnDataUrl+idx);\n\t\t\t\/\/ build the selector\n\t\t\tvar selector = new jot.widget.HTMLJotListSelector();\n\t\t\tselector.create();\n\t\t\tselector.baseFormName = \"col\"+idx+\"[]\";\n\t\t\tntgt.appendChild(selector.domNode);\n\t\t\t\/*\n\t\t\tvar widgetParser = new dojo.webui.widgets.Parse();\n\t\t\twidgetParser.createComponentFromScript(ctr, \"JotListSelector\", {});\n\t\t\t*\/\n\t\t\tdojo.io.bind({\n\t\t\t\turl: this.columnDataUrl+idx,\n\t\t\t\tload: function(type, data, evt){ \n\t\t\t\t\tif(type==\"load\"){\n\t\t\t\t\t\tselector.optionsList = data;\n\t\t\t\t\t\tselector.showEditView();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmimetype: \"text\/javascript\"\n\t\t\t});\n\t\t\tthis.columnEditors[idx] = selector;\n\t\t}\n\t}\n\n\tthis.buildEditor = function(evt){\n\t\tif(!evt){ evt = window.event; }\n\t\t\/\/ if(this.editor){ this.clobberEditor(); } \/\/ we only allow one at a time\n\t\t\/\/ otherwise, we want to build out a new editor widget\n\t\tvar hu = dojo.xml.htmlUtil;\n\t\tvar tgt = hu.getEventTarget(evt);\n\n\t\twhile((tgt)&&(tgt.nodeName.toLowerCase() != \"td\")){\n\t\t\ttgt = tgt.parentNode;\n\t\t}\n\t\tif(!tgt){ return; }\n\t}\n\n\tthis.clobberEditor = function(){\n\t\tif(!this.editor){ return; }\n\t}","this_variables":["isContainer","columnDataUrl","columnTDs","columnEditors","formNode","widgetType","postInitialize","destroyRendering","cleanUp","buildRendering","parseFragment","normalizedArgs","domNode","checkSubmit","toggleListEditor","buildEditor","clobberEditor"],"inherits":["dojo.widget.HtmlWidget"]}}},"jot.widget.HTMLJotImportTable.postInitialize":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"                                             return;   "}}},"jot.widget.HTMLJotImportTable.destroyRendering":{"_":{"meta":{"summary":"","src":"                                     return;   "}}},"jot.widget.HTMLJotImportTable.cleanUp":{"_":{"meta":{"summary":"","src":"                            return;   "}}},"jot.widget.HTMLJotImportTable.buildRendering":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tthis.parseFragment = frag;\n\t\tthis.normalizedArgs = args;\n\t\tthis.domNode = frag[\"dojo:jotimporttable\"].nodeRef;\n\t\tthis.formNode = dojo.xml.htmlUtil.getParentOfType(this.domNode, \"form\");\n\t\tdojo.event.connect(this.formNode, \"onsubmit\", this, \"checkSubmit\");\n\n\t\t\/\/ attach our event handlers\n\t\tvar tr0 = this.domNode.tBodies[0].getElementsByTagName(\"tr\")[0];\n\t\tvar tds = tr0.getElementsByTagName(\"td\");\n\t\tfor(var x=1; x<tds.length; x++){\n\t\t\tvar input = tds[x].getElementsByTagName(\"input\")[0];\n\t\t\tdojo.event.connect(input, \"onclick\", this, \"toggleListEditor\");\n\t\t\tthis.columnTDs.push(tds[x]);\n\t\t}","this_variables":["parseFragment","normalizedArgs","domNode"]}}},"jot.widget.HTMLJotImportTable.checkSubmit":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tvar fromEditor = false;\n\t\tvar editor = null;\n\t\tfor(var x=0; x<this.columnEditors.length; x++){\n\t\t\tif(this.columnEditors[x]){\n\t\t\t\tif(this.columnEditors[x].txtInput.value != \"\"){\n\t\t\t\t\tfromEditor = true;\n\t\t\t\t\teditor = this.columnEditors[x];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(fromEditor){\n\t\t\tevt.stopPropagation();\n\t\t\tevt.preventDefault();\n\t\t\teditor.addFromText();\n\t\t}\n\t\treturn false;"}}},"jot.widget.HTMLJotImportTable.toggleListEditor":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tvar tgt = evt.target;\n\t\tvar ntgt = dojo.xml.htmlUtil.getParentOfType(tgt, \"td\");\n\t\tif(!ntgt){ return; }\n\t\tvar idx = 0;\n\t\tfor(var x=0; x<this.columnTDs.length; x++){\n\t\t\tif(ntgt===this.columnTDs[x]){\n\t\t\t\tidx = x;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif(!tgt.checked){\n\t\t\t\/\/ alert(\"clobbering!\");\n\t\t\tif(this.columnEditors[idx]){\n\t\t\t\tvar ced = this.columnEditors[idx];\n\t\t\t\tced.domNode.parentNode.removeChild(ced.domNode);\n\t\t\t\tthis.columnEditors[idx] = null;\n\t\t\t}\n\t\t}else{\n\t\t\t\/\/ var ctr = document.createElement(\"span\");\n\t\t\t\/\/ ntgt.appendChild(ctr);\n\t\t\t\/\/ alert(\"creating!\");\n\t\t\t\/\/ alert(this.columnDataUrl+idx);\n\t\t\t\/\/ build the selector\n\t\t\tvar selector = new jot.widget.HTMLJotListSelector();\n\t\t\tselector.create();\n\t\t\tselector.baseFormName = \"col\"+idx+\"[]\";\n\t\t\tntgt.appendChild(selector.domNode);\n\t\t\t\/*\n\t\t\tvar widgetParser = new dojo.webui.widgets.Parse();\n\t\t\twidgetParser.createComponentFromScript(ctr, \"JotListSelector\", {});\n\t\t\t*\/\n\t\t\tdojo.io.bind({\n\t\t\t\turl: this.columnDataUrl+idx,\n\t\t\t\tload: function(type, data, evt){ \n\t\t\t\t\tif(type==\"load\"){\n\t\t\t\t\t\tselector.optionsList = data;\n\t\t\t\t\t\tselector.showEditView();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmimetype: \"text\/javascript\"\n\t\t\t});\n\t\t\tthis.columnEditors[idx] = selector;\n\t\t}"}}},"jot.widget.HTMLJotImportTable.buildEditor":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tif(!evt){ evt = window.event; }\n\t\t\/\/ if(this.editor){ this.clobberEditor(); } \/\/ we only allow one at a time\n\t\t\/\/ otherwise, we want to build out a new editor widget\n\t\tvar hu = dojo.xml.htmlUtil;\n\t\tvar tgt = hu.getEventTarget(evt);\n\n\t\twhile((tgt)&&(tgt.nodeName.toLowerCase() != \"td\")){\n\t\t\ttgt = tgt.parentNode;\n\t\t}\n\t\tif(!tgt){ return; }"}}},"jot.widget.HTMLJotImportTable.clobberEditor":{"_":{"meta":{"summary":"","src":"\t\tif(!this.editor){ return; }"}}}}}},"dojo.widget.jot.JotListSelector":{"meta":{"requires":{"common":["dojo.widget.*"]},"methods":{"jot.widget.HTMLJotListSelector":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\n\tthis.templatePath = dojo.uri.dojoUri(\"..\/jot\/widget\/templates\/HTMLJotListSelector.html\");\n\tthis.templateCssPath = dojo.uri.dojoUri(\"..\/jot\/widget\/templates\/HTMLJotListSelector.css\");\n\n\tthis.widgetType = \"JotListSelector\";\n\tthis.parseFragment = null;\n\tthis.normalizedArgs = null;\n\n\tthis.displayMode = \"view\";\n\tthis.dataUrl = \"\";\n\tthis.editBuilt = false;\n\tthis.listViewNode = null;\n\tthis.listEditNode = null;\n\tthis.formItemsNode = null;\n\tthis.txtInput = null;\n\tthis.txtInputButton = null;\n\tthis.optionsList = [];\n\tthis.isContainer = false;\n\tthis.baseFormName = \"col0[]\";\n\n\tthis.fillInTemplate = function(){\n\t\tthis.buildViewList();\n\t\tif(this.dataUrl!=\"\"){\n\t\t\tvar _this = this;\n\t\t\tdojo.io.bind({\n\t\t\t\turl: this.dataUrl,\n\t\t\t\tload: function(type, data, evt){ \n\t\t\t\t\tif(type==\"load\"){\n\t\t\t\t\t\t_this.optionsList = data;\n\t\t\t\t\t\t_this.showEditView();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmimetype: \"text\/javascript\"\n\t\t\t});\n\t\t}\n\t}\n\n\t\/\/ options item class\n\tfunction optionItem(parent, txt){\n\t\tthis.parent = parent;\n\t\tthis.domNode = null;\n\t\tthis.itemLabel = null;\n\t\tthis.formItem = null;\n\t\tthis.formName = null;\n\t\tthis.itemString = txt||\"\";\n\t\tthis.clobberItem = function(){\n\t\t\t\/\/ FIXME: need to do memory cleanup here for IE!!\n\n\t\t\t\/\/ NOTE: the form item for this entry could be located somewhere\n\t\t\t\/\/ else, so we manually remove it from whatever container it might\n\t\t\t\/\/ be in.\n\t\t\tthis.formItem.parentNode.removeChild(this.formItem);\n\t\t\tthis.domNode.parentNode.removeChild(this.domNode);\n\t\t\t\/\/ clobber the item text from the parent list\n\t\t\tthis.parent.removeFromList(this.itemString);\n\t\t}\n\n\t\tthis.fillInTemplate = function(){\n\t\t\t\/\/ FIXME: need HTML escaping here\n\t\t\tthis.itemLabel.innerHTML = this.itemString;\n\t\t\t\/\/ FIXME: need some way to specify a name for the form item!\n\t\t\tthis.formItem.value = this.itemString;\n\t\t\tthis.formItem.name = this.formName || this.parent.baseFormName;\n\t\t\t\/\/ move the form item out into the correct container\n\t\t\tthis.parent.formItemsNode.appendChild(this.formItem);\n\t\t}\n\t}\n\n\tthis.removeFromList = function(str){\n\t\tfor(var x=0; x<this.optionsList.length; x++){\n\t\t\tif(str == this.optionsList[x]){\n\t\t\t\t\/\/ clobber just this element\n\t\t\t\treturn this.optionsList.splice(x, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.buildViewList = function(){\n\t\tthis.listViewNode.innerHTML = this.optionsList.join(\", \");\n\t}\n\n\tthis.buildEditList = function(){\n\t\tif(this.editBuilt){ return; }\n\t\tfor(var x=0; x<this.optionsList.length; x++){\n\t\t\tthis.addOptionItem(this.optionsList[x]);\n\t\t}\n\t\tthis.editBuilt = true;\n\t}\n\n\tthis.addFromText = function(){\n\t\tthis.optionsList.push(this.txtInput.value);\n\t\tthis.addOptionItem(this.txtInput.value);\n\t\tthis.txtInput.value = \"\";\n\t}\n\n\tthis.addOptionItem = function(optionTxt){\n\t\tvar item = new optionItem(this, optionTxt);\n\t\titem.domNode = this.subTemplates[\"listItem\"].cloneNode(true);\n\t\t\/\/ item.formItem.name = this.baseFormName;\n\t\tthis.listEditItems.appendChild(item.domNode);\n\t\tthis.attachTemplateNodes(item.domNode, item);\n\t\tthis.listEditItems.appendChild(item.domNode);\n\t\titem.domNode.style.display = \"\";\n\t\titem.fillInTemplate();\n\t}\n\n\tthis.showEditView = function(){\n\t\tif(this.mode == \"edit\"){ return; }\n\t\tthis.mode = \"edit\";\n\t\t\/*\n\t\tthis.listViewNode.style.display = \"none\";\n\t\tthis.listEditNode.style.display = \"\";\n\t\t*\/\n\t\tthis.buildEditList();\n\t}\n\n\tthis.showListView = function(){\n\t\tif(this.mode == \"view\"){ return; }\n\t\tthis.mode = \"view\";\n\t\t\/*\n\t\tthis.listViewNode.style.display = \"\";\n\t\tthis.listEditNode.style.display = \"none\";\n\t\t*\/\n\t\tthis.buildViewList();\n\t}\n\n\tthis.buildEditor = function(evt){\n\t\tif(!evt){ evt = window.event; }\n\t}","this_variables":["templatePath","templateCssPath","widgetType","parseFragment","normalizedArgs","displayMode","dataUrl","editBuilt","listViewNode","listEditNode","formItemsNode","txtInput","txtInputButton","optionsList","isContainer","baseFormName","fillInTemplate","parent","domNode","itemLabel","formItem","formName","itemString","clobberItem","itemLabel.innerHTML","formItem.value","formItem.name","removeFromList","buildViewList","listViewNode.innerHTML","buildEditList","addFromText","txtInput.value","addOptionItem","showEditView","mode","showListView","buildEditor"],"inherits":["dojo.widget.HtmlWidget"]}}},"jot.widget.HTMLJotListSelector.fillInTemplate":{"_":{"meta":{"summary":"","src":"\t\t\t\/\/ FIXME: need some way to specify a name for the form item!\n\t\t\tthis.formItem.value = this.itemString;\n\t\t\tthis.formItem.name = this.formName || this.parent.baseFormName;\n\t\t\t\/\/ move the form item out into the correct container\n\t\t\tthis.parent.formItemsNode.appendChild(this.formItem);","this_variables":["itemLabel.innerHTML","formItem.value","formItem.name"]}}},"jot.widget.HTMLJotListSelector.clobberItem":{"_":{"meta":{"summary":"","src":"\t\t\tthis.domNode.parentNode.removeChild(this.domNode);\n\t\t\t\/\/ clobber the item text from the parent list\n\t\t\tthis.parent.removeFromList(this.itemString);"}}},"jot.widget.HTMLJotListSelector.removeFromList":{"_":{"meta":{"summary":"","parameters":{"str":{"type":""}},"src":"\t\tfor(var x=0; x<this.optionsList.length; x++){\n\t\t\tif(str == this.optionsList[x]){\n\t\t\t\t\/\/ clobber just this element\n\t\t\t\treturn this.optionsList.splice(x, 1);\n\t\t\t}\n\t\t}"}}},"jot.widget.HTMLJotListSelector.buildViewList":{"_":{"meta":{"summary":"","src":"\t\tthis.listViewNode.innerHTML = this.optionsList.join(\", \");","this_variables":["listViewNode.innerHTML"]}}},"jot.widget.HTMLJotListSelector.buildEditList":{"_":{"meta":{"summary":"","src":"\t\tif(this.editBuilt){ return; }\n\t\tfor(var x=0; x<this.optionsList.length; x++){\n\t\t\tthis.addOptionItem(this.optionsList[x]);\n\t\t}\n\t\tthis.editBuilt = true;","this_variables":["editBuilt"]}}},"jot.widget.HTMLJotListSelector.addFromText":{"_":{"meta":{"summary":"","src":"\t\tthis.optionsList.push(this.txtInput.value);\n\t\tthis.addOptionItem(this.txtInput.value);\n\t\tthis.txtInput.value = \"\";","this_variables":["txtInput.value"]}}},"jot.widget.HTMLJotListSelector.addOptionItem":{"_":{"meta":{"summary":"","parameters":{"optionTxt":{"type":""}},"src":"\t\tvar item = new optionItem(this, optionTxt);\n\t\titem.domNode = this.subTemplates[\"listItem\"].cloneNode(true);\n\t\t\/\/ item.formItem.name = this.baseFormName;\n\t\tthis.listEditItems.appendChild(item.domNode);\n\t\tthis.attachTemplateNodes(item.domNode, item);\n\t\tthis.listEditItems.appendChild(item.domNode);\n\t\titem.domNode.style.display = \"\";\n\t\titem.fillInTemplate();"}}},"jot.widget.HTMLJotListSelector.showEditView":{"_":{"meta":{"summary":"","src":"\t\tif(this.mode == \"edit\"){ return; }\n\t\tthis.mode = \"edit\";\n\t\t\/*\n\t\tthis.listViewNode.style.display = \"none\";\n\t\tthis.listEditNode.style.display = \"\";\n\t\t*\/\n\t\tthis.buildEditList();","this_variables":["mode"]}}},"jot.widget.HTMLJotListSelector.showListView":{"_":{"meta":{"summary":"","src":"\t\tif(this.mode == \"view\"){ return; }\n\t\tthis.mode = \"view\";\n\t\t\/*\n\t\tthis.listViewNode.style.display = \"\";\n\t\tthis.listEditNode.style.display = \"none\";\n\t\t*\/\n\t\tthis.buildViewList();","this_variables":["mode"]}}},"jot.widget.HTMLJotListSelector.buildEditor":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tif(!evt){ evt = window.event; }"}}}}}},"dojo.widget.jot.JotNodeItem":{"meta":{"requires":{"common":["dojo.event.*","dojo.dom","dojo.html","dojo.io.*","dojo.widget.*","dojo.widget.HtmlInlineEditBox","jot.widget.JotEmailThisDialogue"]},"methods":{"jot.widget.HTMLJotNodeItem":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\n\t\/\/ make it a drop target so we can set dates\n\t\/\/dojo.webui.DropTarget.call(this);\n\tthis.acceptedTypes = [\"date\"];\n\tthis.dragEnter = function(){ \n\t\tdojo.html.setOpacity(this.domNode, 0.5);\n\t}\n\n\tthis.dragLeave = function(){ \n\t\tdojo.html.setOpacity(this.domNode, 1);\n\t}\n\n\tthis.handleDrop = function(dragSource, evt){\n\t\tvar sel = dragSource.selection.getSelected();\n\t\tfor(var x=0; x<sel.length; x++){\n\t\t\tif(sel[x].type == \"date\"){\n\t\t\t\tthis.setDate(sel[x].value);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.templatePath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/JotNodeItem.html\");\n\tthis.templateCssPath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/JotNodeItem.css\");\n\n\t\/\/ widget properties\n\tthis.widgetType = \"JotNodeItem\";\n\tthis.isContainer = true;\n\n\t\/\/ class properties\n\tthis.isOpen = false;\n\tthis.isTask = false;\n\tthis.dueDate = null;\n\tthis.calDate = null;\n\tthis.reminderDate = null;\n\tthis.itemDataUrl = \"\";\n\tthis.itemRelativePath = \"\";\n\tthis.attachmentSearchUrl = \"\";\n\tthis.webspaceRoot = \"\";\n\n\t\/\/ DOM and state properties\n\tthis._editInitialized = false;\n\tthis._isNewItem = true;\n\tthis.arrowNode = null;\n\tthis.contentRowNode = null;\n\tthis.headRowNode = null;\n\tthis.descriptionNode = null;\n\tthis.descriptionEditWidget = null;\n\tthis.lastModifiedUserNode = null;\n\tthis.itemContentNode = null;\n\tthis.itemContentEditWidget = null;\n\tthis.taskMakerNode = null;\n\tthis.attachmentsTableNode = null;\n\tthis.attachmentsRowNode = null;\n\tthis.attachmentContainerNode = null;\n\tthis.doneCheckboxNode = null;\n\tthis.dateNode = null;\n\tthis.dueDateNode = null;\n\tthis.tagSelectorContainerNode = null;\n\tthis.tagSelectorWidget = null;\n\tthis.projectSelectorContainerNode = null;\n\tthis.projectSelectorWidget = null;\n\tthis.saveCancelContainer = null;\n\tthis.dragHandleNode = null;\n\n\tthis.emailThisItem = function(){\n\t\tdojo.widget.fromScript(\"JotEmailThisDialogue\", \n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\titemURL: this.itemDataUrl\n\t\t\t\t\t\t\t\t}, \n\t\t\t\t\t\t\t\tdocument.body, \"last\");\n\t}\n\n\tthis.deleteThisItem = function(){\n\t\tdj_debug(\"clobbering...\");\n\t\tvar _this = this;\n\t\tthis.destroy();\n\t}\n\n\tthis.close = function(){\n\t\tif(!this.contentRowNode){ return; }\n\n\t\t\/\/ dojo.graphics.htmlEffects.wipeOut(this.contentRowNode, 500);\n\t\tthis.contentRowNode.style.display = \"none\";\n\t\tdojo.html.removeClass(this.arrowNode, \"down-arrow\");\n\t\tdojo.html.addClass(this.arrowNode, \"right-arrow\");\n\t}\n\n\tthis.open = function(){\n\t\tif(!this.contentRowNode){ return; }\n\t\t\/\/ dojo.graphics.htmlEffects.wipeIn(this.contentRowNode, 500);\n\t\tthis.contentRowNode.style.display = \"\";\n\t\tdojo.html.removeClass(this.arrowNode, \"right-arrow\");\n\t\tdojo.html.addClass(this.arrowNode, \"down-arrow\");\n\t}\n\n\tthis.toggleClosed = function(){\n\t\tthis[(this.isOpen ? \"close\" : \"open\")]();\n\t\tthis.isOpen = (!this.isOpen);\n\t}\n\n\t\/\/ FIXME: need to make a drag source and a drop target!\n\tthis.fillInTemplate = function(){\n\t\tif(this.isOpen){ this.open(); }\n\t\tthis.setIsTask();\n\t\t\/\/ FIXME: need to connect tag selections!\n\n\t\t\/\/ build a tag selector widget\n\t\tthis.tagSelectorWidget = dojo.widget.fromScript(\"JotTagSelector\", \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcomboBoxSize: 10,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tallowNewTags: false\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.tagSelectorContainerNode, \"last\");\n\t\tdojo.event.connect(this.tagSelectorWidget, \"addSelectedTag\", this, \"saveTags\");\n\n\t\tnew jot.cbUtil.DragHandleSource(this.dragHandleNode, \"JotNodeItem\", this.domNode);\n\n\t\t\/*\n\t\tvar tn = this.tagSelectorWidget.inputContainerNode.getElementsByTagName(\"table\")[0];\n\t\ttn.style.cssFloat = \"left\";\n\t\t*\/\n\n\t\t\/*\n\t\tthis.projectSelectorWidget = dojo.webui.widgets.fromScript(this.projectSelectorContainerNode, \n\t\t\t\"JotTagSelector\", {\n\t\t\tcomboBoxSize: 10,\n\t\t\tallowNewTags: false\n\t\t})[0];\n\t\t*\/\n\t\tvar _this = this;\n\t\t\/\/ this.getData();\n\t\t\/\/ this.attachmentSearchUrl = \"\";\n\t\tthis.setItemRelativePath();\n\t\tif(this.itemDataUrl.length){\n\t\t\tsetTimeout(function(){ _this.getData(); }, 10);\n\t\t}\n\t}\n\n\tthis.setItemRelativePath = function(){\n\t\tthis.itemRelativePath = \"\/CorkBoard\/\"+this.itemDataUrl.split(\"\/\").pop();\n\t}\n\n\tthis.initializeEdit = function(){\n\t\tif(this._editInitialized){ return; }\n\t\tthis.descriptionEditWidget = dojo.widget.fromScript(\"InlineEditBox\", \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmode: \t\t\t\"text\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultText: \t\"<em>title<\/em>\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.descriptionNode);\n\t\tdojo.event.connect(this.descriptionEditWidget , \"onSave\", this, \"saveDescription\");\n\t\tthis.itemContentEditWidget = dojo.widget.fromScript(\"InlineEditBox\", \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmode: \t\t\t\"textarea\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultText: \t\"<em>Add a note or information about your item here!<\/em>\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.itemContentNode);\n\t\tdojo.event.connect(this.itemContentEditWidget, \"beginEdit\", this, \"fixContentTextarea\");\n\t\tdojo.event.connect(this.itemContentEditWidget, \"onSave\", this, \"saveItemContent\");\n\t\tthis._editInitialized = true;\n\t}\n\n\tthis.fixContentTextarea = function(){\n\t\tthis.itemContentEditWidget.textarea.style.width = \"100%\";\n\t}\n\n\tthis.saveItemContent = function(newContent, oldContent){\n\t\tthis.saveProperties({\n\t\t\t\/\/ editStyle: \"markup\",\n\t\t\t\"main\/text\": newContent\n\t\t});\n\t}\n\n\tthis.saveDescription = function(newContent, oldContent){\n\t\tthis.saveProperties({\n\t\t\t\"corkboard\/description\": newContent\n\t\t});\n\t}\n\n\tthis.saveDate = function(dateObj){\n\t\tvar dp = null;\n\t\tvar dateStr = dateObj.toString();\n\t\tif(this.isTask){\n\t\t\tdp = { \"corkboard\/due\": dateStr };\n\t\t}else{\n\t\t\tdp = { \"corkboard\/caldate\": dateStr };\n\t\t}\n\n\t\tthis.saveProperties(dp);\n\t}\n\n\n\tthis.saveProperties = function(props){\n\t\tif(this._isNewItem){ return; }\n\t\tvar pn = \"\/CorkBoard\/\"+this.itemDataUrl.split(\"\/\").pop();\n\t\tvar bargs = {\n\t\t\turl: this.webspaceRoot+\"_\/cmd\/savePage\",\n\t\t\tmethod: \"post\",\n\t\t\tmimetype: \"text\/xml\",\n\t\t\tcontent: {\n\t\t\t\tpath: pn\n\t\t\t},\n\t\t\tloaded: function(type, doc, e){\n\t\t\t\t\/\/ dj_debug(type, \" \", doc, \" \", e);\n\t\t\t\tdj_debug(\"...saved!\");\n\t\t\t}\n\t\t};\n\t\tvar ctr = 0;\n\t\tvar co = {};\n\t\tfor(var x in props){\n\t\t\tif(!co[x]){\n\t\t\t\tctr++;\n\t\t\t\tbargs.content[\"pname\"+ctr] = x;\n\t\t\t\tbargs.content[\"pvalue\"+ctr] = props[x];\n\t\t\t}\n\t\t}\n\t\tdojo.io.bind(bargs);\n\t\tdj_debug(\"saving...\");\n\t}\n\n\tthis.saveAsNewItem = function(){\n\t\tif(!this._isNewItem){ return false; }\n\t\tthis.saveCancelContainer.style.display = \"none\";\n\t\tvar pn = \"\/CorkBoard\/CorkBoardSaveForm\";\n\t\tvar _this = this;\n\t\tvar sargs = {\n\t\t\turl: this.webspaceRoot+pn+\"?theme=none\",\n\t\t\tmethod: \"post\",\n\t\t\tmimetype: \"text\/plain\",\n\t\t\tcontent: {\n\t\t\t\tdescription: this.descriptionEditWidget.textValue,\n\t\t\t\ttags: this.tagSelectorWidget.selectedTags.join(\",\"),\n\t\t\t\tprojects: \"\",\n\t\t\t\ttask: this.isTask,\n\t\t\t\tdone: this.isDone,\n\t\t\t\tdue: this.getDueDateStr(),\n\t\t\t\treminder: this.getReminderDateStr(),\n\t\t\t\tcaldate: this.getCalDateStr(),\n\t\t\t\ttext: this.itemContentEditWidget.textValue\n\t\t\t},\n\t\t\tloaded: function(type, str, e){\n\t\t\t\t_this._isNewItem = false;\n\t\t\t\t_this.itemDataUrl = dojo.text.trim(str);\n\t\t\t\tdj_debug(\"...saved!\");\n\t\t\t}\n\t\t};\n\t\tdojo.io.bind(sargs);\n\t\tdj_debug(\"saving...\");\n\t}\n\n\tthis.getDueDateStr = function(){\n\t\treturn (this.dueDate) ? jot.cbUtil.dateToJotString(this.dueDate) : \"\";\n\t}\n\n\tthis.getReminderDateStr = function(){\n\t\treturn (this.reminderDate) ? jot.cbUtil.dateToJotString(this.reminderDate) : \"\";\n\t}\n\n\tthis.getCalDateStr = function(){\n\t\treturn (this.calDate) ? jot.cbUtil.dateToJotString(this.calDate) : \"\";\n\t}\n\n\tthis.openFileUploadDialogue = function(){\n\t\tdj_debug(\"FIXME: open an upload dialoge box here!\");\n\t}\n\n\tthis.goToItemPage = function(){\n\t\tlocation.href = this.webspaceRoot+this.itemRelativePath;\n\t}\n\n\t\/*\n\tthis.startSave = function(){\n\t\t\/\/ FIXME: add \"working\" indicator here!\n\t}\n\n\tthis.saveDone = function(){\n\t\t\/\/ FIXME: hide \"working\" indicator here. Indicate either failure or success!\n\t}\n\t*\/\n\n\tthis.setIsTask = function(val){\n\t\tif(typeof val == \"string\"){\n\t\t\tif(val == \"true\"){\n\t\t\t\tthis.isTask = true;\n\t\t\t}else{\n\t\t\t\tthis.isTask = false;\n\t\t\t}\n\t\t}else if(typeof val == \"boolean\"){\n\t\t\tthis.isTask = val;\n\t\t}\n\n\t\tif(this.isTask){\n\t\t\tthis.doneCheckboxNode.style.display = \"\";\n\t\t\tthis.taskMakerNode.style.display = \"none\";\n\t\t}else{\n\t\t\tthis.doneCheckboxNode.style.display = \"none\";\n\t\t\tthis.taskMakerNode.style.display = \"\";\n\t\t}\n\t}\n\n\tthis.toggleIsTask = function(){\n\t\t\/\/ FIXME: prompt for due date here!!!\n\t\tthis.setIsTask(!this.isTask);\n\t}\n\n\tfunction _first(p, type){\n\t\tif((!p)||(!p[\"getElementsByTagName\"])){\n\t\t\treturn;\n\t\t}\n\t\treturn p.getElementsByTagName(type)[0];\n\t}\n\n\tthis.populateAttachmentsFromDoc = function(doc){\n\t\tvar node = _first(doc, \"body\");\n\t\tvar attachments = _first(node, \"attachments\").getElementsByTagName(\"attachment\");\n\t\tif(attachments&&attachments.length){\n\t\t\tfor(var x=0; x<attachments.length; x++){\n\t\t\t\tif(x == 0){\n\t\t\t\t\tvar pn = this.attachmentContainerNode.parentNode;\n\t\t\t\t\tpn.insertBefore(this.attachmentsTableNode, pn.firstChild);\n\t\t\t\t}\n\t\t\t\t\/\/ FIXME: need to set event handlers!\n\t\t\t\tvar ta = attachments[x];\n\t\t\t\tvar ar = this.attachmentsRowNode.cloneNode(true);\n\t\t\t\tthis.attachmentsTableNode.tBodies[0].appendChild(ar);\n\t\t\t\tvar cells = ar.getElementsByTagName(\"td\");\n\t\t\t\tcells[0].innerHTML = dojo.dom.innerXML(_first(ta, \"file\")).split(\"\/\").pop();;\n\t\t\t\tvar tdesc = _first(ta, \"desc\");\n\t\t\t\tcells[1].innerHTML = ((tdesc.children)&&(tdesc.children.length)) ? dojo.dom.innerXML(_first(ta, \"desc\")) : \"&nbsp;\";\n\t\t\t\tvar sstr = null;\n\t\t\t\tvar sizes = [\"bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\"];\n\t\t\t\tvar ctr = 0;\n\t\t\t\tvar tsize = _first(ta, \"size\");\n\t\t\t\tif(dojo.dom.innerXML(tsize).length){\n\t\t\t\t\tsstr = dojo.dom.innerXML(tsize);\n\t\t\t\t\twhile((sstr.length > 3)&&(ctr < sizes.length)){\n\t\t\t\t\t\tsstr = new String(parseInt(parseInt(sstr)\/1024));\n\t\t\t\t\t\tctr++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcells[2].innerHTML = (sstr) ? (sstr+sizes[ctr]) :  \"&nbsp;\";\n\t\t\t\tcells[3].innerHTML = dojo.dom.innerXML(_first(ta, \"user\"));\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.populateFromDoc = function(doc){\n\t\t\/\/ dear god I wish we had xpath available = (\n\t\t\/\/ Perhaps someday we'll be able to use something like:\n\t\t\/\/ \thttp:\/\/glazkov.com\/blog\/archive\/2004\/04\/06\/168.aspx\n\t\t\/\/ or\n\t\t\/\/\thttp:\/\/sourceforge.net\/projects\/goog-ajaxslt\/\n\n\t\tthis._isNewItem = false;\n\t\tthis.initializeEdit();\n\t\tvar node = doc.firstChild;\n\t\tthis.lastModifiedUserNode.innerHTML = node.getAttribute(\"user\");\n\t\tvar data = _first(node, \"data\");\n\t\tvar cb = _first(data, \"corkboard\");\n\t\tvar nv = _first(cb, \"description\").firstChild.nodeValue;\n\n\t\twith(this.descriptionEditWidget){\n\t\t\teditable.innerHTML = nv;\n\t\t\ttextValue = nv;\n\t\t}\n\n\t\tvar iv = _first(_first(data, \"main\"), \"text\");\n\t\tvar ic = dojo.dom.innerXML(iv);\n\t\twith(this.itemContentEditWidget){\n\t\t\teditable.innerHTML = ic;\n\t\t\ttextValue = ic;\n\t\t\t\/\/ textValue = \"loading...\";\n\t\t}\n\t\t\/\/ dojo.event.connect(this.itemContentEditWidget, \"beginEdit\", this, \"populateEditWithMarkup\");\n\n\t\t\/\/ ${wikiRootPath}\/CorkBoard\/item1?edit=1&editStyle=markup&themePage=\/CorkBoard\/edit-raw&form=\/System\/Forms\/DefaultForm\n\n\t\tif(_first(cb, \"tags\")){\n\t\t\tthis.setTags(_first(cb, \"tags\").firstChild.nodeValue.split(\",\"));\n\t\t}\n\n\t\tif(_first(cb, \"task\")){\n\t\t\tdj_debug(dojo.dom.innerXML(_first(cb, \"task\")));\n\t\t}\n\n\t\tif(_first(cb, \"due\")){\n\t\t\tvar ds = _first(_first(cb, \"due\"), \"date\").firstChild.nodeValue;\n\t\t\tif(ds != \"19700101T000000Z\"){ \/\/ if not the begining of the epoch (which is the default)\n\t\t\t\tthis.dueDate = jot.cbUtil.dateFromJotString(ds); \n\t\t\t\tif(this.isTask){\n\t\t\t\t\tthis.setDate(this.dueDate);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.populateEditWithMarkup = function(){\n\t\tvar _this = this;\n\t\t\/\/ ${wikiRootPath}\/CorkBoard\/item1?edit=1&editStyle=markup&themePage=\/CorkBoard\/edit-raw&form=\/System\/Forms\/DefaultForm\n\t\tvar ba = {\n\t\t\turl: this.itemDataUrl+\"?edit=1&editStyle=markup&themePage=\/CorkBoard\/edit-raw&form=\/System\/Forms\/DefaultForm\",\n\t\t\tmethod: \"get\",\n\t\t\tmimetype: \"text\/xml\",\n\t\t\tloaded: function(type, data, e){\n\t\t\t\tvar tas = data.getElementsByTagName(\"textarea\");\n\t\t\t\t_this.itemContentEditWidget.textarea.value = tas[0].value;\n\t\t\t}\n\t\t}\n\t\tdojo.io.bind(ba);\n\t}\n\n\tthis.setDate = function(dateObj){\n\t\tthis.dateNode.innerHTML = jot.cbUtil.months[dateObj.getMonth()]+\" \"+dateObj.getDate()+\", \"+dateObj.getFullYear();\n\t}\n\n\tthis.setTags = function(tagList){\n\t\t\/\/ this.tagSelectorWidget.setSelected(tagList);\n\t\tfor(var x=0; x<tagList.length; x++){\n\t\t\tthis.tagSelectorWidget.addSelectedTag(tagList[x]);\n\t\t}\n\t}\n\n\tthis.saveTags = function(){\n\t\tthis.tagSelectorWidget.selectedTags.join(\",\");\n\t}\n\n\tthis.getData = function(){\n\t\tvar _this = this;\n\t\t\/\/ main data\n\t\tvar ba = {\n\t\t\turl: this.itemDataUrl+\"?prettyXML=1\",\n\t\t\tmimetype: \"text\/xml\",\n\t\t\tsync: false,\n\t\t\tload: function(type, xmlDoc, evt){\n\t\t\t\t_this.populateFromDoc(xmlDoc);\n\t\t\t}\n\t\t}\n\t\tdojo.io.bind(ba);\n\n\t\t\/\/ get attachments list, if any\n\t\tvar aa = {\n\t\t\turl: this.attachmentSearchUrl+\"?theme=none&node=\"+encodeURIComponent(this.itemRelativePath),\n\t\t\tmimetype: \"text\/xml\",\n\t\t\tload: function(type, xmlDoc, evt){\n\t\t\t\t_this.populateAttachmentsFromDoc(xmlDoc);\n\t\t\t}\n\t\t}\n\t\tdojo.io.bind(aa);\n\t}","this_variables":["acceptedTypes","dragEnter","dragLeave","handleDrop","templatePath","templateCssPath","widgetType","isContainer","isOpen","isTask","dueDate","calDate","reminderDate","itemDataUrl","itemRelativePath","attachmentSearchUrl","webspaceRoot","_editInitialized","_isNewItem","arrowNode","contentRowNode","headRowNode","descriptionNode","descriptionEditWidget","lastModifiedUserNode","itemContentNode","itemContentEditWidget","taskMakerNode","attachmentsTableNode","attachmentsRowNode","attachmentContainerNode","doneCheckboxNode","dateNode","dueDateNode","tagSelectorContainerNode","tagSelectorWidget","projectSelectorContainerNode","projectSelectorWidget","saveCancelContainer","dragHandleNode","emailThisItem","deleteThisItem","close","contentRowNode.style.display","open","toggleClosed","fillInTemplate","setItemRelativePath","initializeEdit","fixContentTextarea","itemContentEditWidget.textarea.style.width","saveItemContent","saveDescription","saveDate","saveProperties","saveAsNewItem","saveCancelContainer.style.display","getDueDateStr","getReminderDateStr","getCalDateStr","openFileUploadDialogue","goToItemPage","setIsTask","doneCheckboxNode.style.display","taskMakerNode.style.display","toggleIsTask","populateAttachmentsFromDoc","populateFromDoc","lastModifiedUserNode.innerHTML","populateEditWithMarkup","setDate","dateNode.innerHTML","setTags","saveTags","getData"]}}},"jot.widget.HTMLJotNodeItem.dragEnter":{"_":{"meta":{"summary":"","src":"\t\tdojo.html.setOpacity(this.domNode, 0.5);"}}},"jot.widget.HTMLJotNodeItem.dragLeave":{"_":{"meta":{"summary":"","src":"\t\tdojo.html.setOpacity(this.domNode, 1);"}}},"jot.widget.HTMLJotNodeItem.handleDrop":{"_":{"meta":{"summary":"","parameters":{"dragSource":{"type":""},"evt":{"type":""}},"src":"\t\tvar sel = dragSource.selection.getSelected();\n\t\tfor(var x=0; x<sel.length; x++){\n\t\t\tif(sel[x].type == \"date\"){\n\t\t\t\tthis.setDate(sel[x].value);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}"}}},"jot.widget.HTMLJotNodeItem.emailThisItem":{"_":{"meta":{"summary":"","src":"\t\tdojo.widget.fromScript(\"JotEmailThisDialogue\", \n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\titemURL: this.itemDataUrl\n\t\t\t\t\t\t\t\t}, \n\t\t\t\t\t\t\t\tdocument.body, \"last\");"}}},"jot.widget.HTMLJotNodeItem.deleteThisItem":{"_":{"meta":{"summary":"","src":"\t\tdj_debug(\"clobbering...\");\n\t\tvar _this = this;\n\t\tthis.destroy();"}}},"jot.widget.HTMLJotNodeItem.close":{"_":{"meta":{"summary":"","src":"\t\tif(!this.contentRowNode){ return; }\n\n\t\t\/\/ dojo.graphics.htmlEffects.wipeOut(this.contentRowNode, 500);\n\t\tthis.contentRowNode.style.display = \"none\";\n\t\tdojo.html.removeClass(this.arrowNode, \"down-arrow\");\n\t\tdojo.html.addClass(this.arrowNode, \"right-arrow\");","this_variables":["contentRowNode.style.display"]}}},"jot.widget.HTMLJotNodeItem.open":{"_":{"meta":{"summary":"","src":"\t\tif(!this.contentRowNode){ return; }\n\t\t\/\/ dojo.graphics.htmlEffects.wipeIn(this.contentRowNode, 500);\n\t\tthis.contentRowNode.style.display = \"\";\n\t\tdojo.html.removeClass(this.arrowNode, \"right-arrow\");\n\t\tdojo.html.addClass(this.arrowNode, \"down-arrow\");","this_variables":["contentRowNode.style.display"]}}},"jot.widget.HTMLJotNodeItem.toggleClosed":{"_":{"meta":{"summary":"","src":"\t\tthis[(this.isOpen ? \"close\" : \"open\")]();\n\t\tthis.isOpen = (!this.isOpen);","this_variables":["isOpen"]}}},"jot.widget.HTMLJotNodeItem.fillInTemplate":{"_":{"meta":{"summary":"","src":"\t\tif(this.isOpen){ this.open(); }\n\t\tthis.setIsTask();\n\t\t\/\/ FIXME: need to connect tag selections!\n\n\t\t\/\/ build a tag selector widget\n\t\tthis.tagSelectorWidget = dojo.widget.fromScript(\"JotTagSelector\", \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcomboBoxSize: 10,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tallowNewTags: false\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.tagSelectorContainerNode, \"last\");\n\t\tdojo.event.connect(this.tagSelectorWidget, \"addSelectedTag\", this, \"saveTags\");\n\n\t\tnew jot.cbUtil.DragHandleSource(this.dragHandleNode, \"JotNodeItem\", this.domNode);\n\n\t\t\/*\n\t\tvar tn = this.tagSelectorWidget.inputContainerNode.getElementsByTagName(\"table\")[0];\n\t\ttn.style.cssFloat = \"left\";\n\t\t*\/\n\n\t\t\/*\n\t\tthis.projectSelectorWidget = dojo.webui.widgets.fromScript(this.projectSelectorContainerNode, \n\t\t\t\"JotTagSelector\", {\n\t\t\tcomboBoxSize: 10,\n\t\t\tallowNewTags: false\n\t\t})[0];\n\t\t*\/\n\t\tvar _this = this;\n\t\t\/\/ this.getData();\n\t\t\/\/ this.attachmentSearchUrl = \"\";\n\t\tthis.setItemRelativePath();\n\t\tif(this.itemDataUrl.length){\n\t\t\tsetTimeout(function(){ _this.getData(); }, 10);\n\t\t}","this_variables":["tagSelectorWidget"]}}},"jot.widget.HTMLJotNodeItem.setItemRelativePath":{"_":{"meta":{"summary":"","src":"\t\tthis.itemRelativePath = \"\/CorkBoard\/\"+this.itemDataUrl.split(\"\/\").pop();","this_variables":["itemRelativePath"]}}},"jot.widget.HTMLJotNodeItem.initializeEdit":{"_":{"meta":{"summary":"","src":"\t\tif(this._editInitialized){ return; }\n\t\tthis.descriptionEditWidget = dojo.widget.fromScript(\"InlineEditBox\", \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmode: \t\t\t\"text\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultText: \t\"<em>title<\/em>\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.descriptionNode);\n\t\tdojo.event.connect(this.descriptionEditWidget , \"onSave\", this, \"saveDescription\");\n\t\tthis.itemContentEditWidget = dojo.widget.fromScript(\"InlineEditBox\", \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmode: \t\t\t\"textarea\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultText: \t\"<em>Add a note or information about your item here!<\/em>\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.itemContentNode);\n\t\tdojo.event.connect(this.itemContentEditWidget, \"beginEdit\", this, \"fixContentTextarea\");\n\t\tdojo.event.connect(this.itemContentEditWidget, \"onSave\", this, \"saveItemContent\");\n\t\tthis._editInitialized = true;","this_variables":["descriptionEditWidget","itemContentEditWidget","_editInitialized"]}}},"jot.widget.HTMLJotNodeItem.fixContentTextarea":{"_":{"meta":{"summary":"","src":"\t\tthis.itemContentEditWidget.textarea.style.width = \"100%\";","this_variables":["itemContentEditWidget.textarea.style.width"]}}},"jot.widget.HTMLJotNodeItem.saveItemContent":{"_":{"meta":{"summary":"","parameters":{"newContent":{"type":""},"oldContent":{"type":""}},"src":"\t\tthis.saveProperties({\n\t\t\t\/\/ editStyle: \"markup\",\n\t\t\t\"main\/text\": newContent\n\t\t});"}}},"jot.widget.HTMLJotNodeItem.saveDescription":{"_":{"meta":{"summary":"","parameters":{"newContent":{"type":""},"oldContent":{"type":""}},"src":"\t\tthis.saveProperties({\n\t\t\t\"corkboard\/description\": newContent\n\t\t});"}}},"jot.widget.HTMLJotNodeItem.saveDate":{"_":{"meta":{"summary":"","parameters":{"dateObj":{"type":""}},"src":"\t\tvar dp = null;\n\t\tvar dateStr = dateObj.toString();\n\t\tif(this.isTask){\n\t\t\tdp = { \"corkboard\/due\": dateStr };\n\t\t}else{\n\t\t\tdp = { \"corkboard\/caldate\": dateStr };\n\t\t}\n\n\t\tthis.saveProperties(dp);"}}},"jot.widget.HTMLJotNodeItem.saveProperties":{"_":{"meta":{"summary":"","parameters":{"props":{"type":""}},"src":"\t\tif(this._isNewItem){ return; }\n\t\tvar pn = \"\/CorkBoard\/\"+this.itemDataUrl.split(\"\/\").pop();\n\t\tvar bargs = {\n\t\t\turl: this.webspaceRoot+\"_\/cmd\/savePage\",\n\t\t\tmethod: \"post\",\n\t\t\tmimetype: \"text\/xml\",\n\t\t\tcontent: {\n\t\t\t\tpath: pn\n\t\t\t},\n\t\t\tloaded: function(type, doc, e){\n\t\t\t\t\/\/ dj_debug(type, \" \", doc, \" \", e);\n\t\t\t\tdj_debug(\"...saved!\");\n\t\t\t}\n\t\t};\n\t\tvar ctr = 0;\n\t\tvar co = {};\n\t\tfor(var x in props){\n\t\t\tif(!co[x]){\n\t\t\t\tctr++;\n\t\t\t\tbargs.content[\"pname\"+ctr] = x;\n\t\t\t\tbargs.content[\"pvalue\"+ctr] = props[x];\n\t\t\t}\n\t\t}\n\t\tdojo.io.bind(bargs);\n\t\tdj_debug(\"saving...\");"}}},"jot.widget.HTMLJotNodeItem.saveAsNewItem":{"_":{"meta":{"summary":"","src":"\t\tif(!this._isNewItem){ return false; }\n\t\tthis.saveCancelContainer.style.display = \"none\";\n\t\tvar pn = \"\/CorkBoard\/CorkBoardSaveForm\";\n\t\tvar _this = this;\n\t\tvar sargs = {\n\t\t\turl: this.webspaceRoot+pn+\"?theme=none\",\n\t\t\tmethod: \"post\",\n\t\t\tmimetype: \"text\/plain\",\n\t\t\tcontent: {\n\t\t\t\tdescription: this.descriptionEditWidget.textValue,\n\t\t\t\ttags: this.tagSelectorWidget.selectedTags.join(\",\"),\n\t\t\t\tprojects: \"\",\n\t\t\t\ttask: this.isTask,\n\t\t\t\tdone: this.isDone,\n\t\t\t\tdue: this.getDueDateStr(),\n\t\t\t\treminder: this.getReminderDateStr(),\n\t\t\t\tcaldate: this.getCalDateStr(),\n\t\t\t\ttext: this.itemContentEditWidget.textValue\n\t\t\t},\n\t\t\tloaded: function(type, str, e){\n\t\t\t\t_this._isNewItem = false;\n\t\t\t\t_this.itemDataUrl = dojo.text.trim(str);\n\t\t\t\tdj_debug(\"...saved!\");\n\t\t\t}\n\t\t};\n\t\tdojo.io.bind(sargs);\n\t\tdj_debug(\"saving...\");","this_variables":["saveCancelContainer.style.display"]}}},"jot.widget.HTMLJotNodeItem.getDueDateStr":{"_":{"meta":{"summary":"","src":"\t\treturn (this.dueDate) ? jot.cbUtil.dateToJotString(this.dueDate) : \"\";"}}},"jot.widget.HTMLJotNodeItem.getReminderDateStr":{"_":{"meta":{"summary":"","src":"\t\treturn (this.reminderDate) ? jot.cbUtil.dateToJotString(this.reminderDate) : \"\";"}}},"jot.widget.HTMLJotNodeItem.getCalDateStr":{"_":{"meta":{"summary":"","src":"\t\treturn (this.calDate) ? jot.cbUtil.dateToJotString(this.calDate) : \"\";"}}},"jot.widget.HTMLJotNodeItem.openFileUploadDialogue":{"_":{"meta":{"summary":"","src":"\t\tdj_debug(\"FIXME: open an upload dialoge box here!\");"}}},"jot.widget.HTMLJotNodeItem.goToItemPage":{"_":{"meta":{"summary":"","src":"\t\tlocation.href = this.webspaceRoot+this.itemRelativePath;"}}},"jot.widget.HTMLJotNodeItem.setIsTask":{"_":{"meta":{"summary":"","parameters":{"val":{"type":""}},"src":"\t\tif(typeof val == \"string\"){\n\t\t\tif(val == \"true\"){\n\t\t\t\tthis.isTask = true;\n\t\t\t}else{\n\t\t\t\tthis.isTask = false;\n\t\t\t}\n\t\t}else if(typeof val == \"boolean\"){\n\t\t\tthis.isTask = val;\n\t\t}\n\n\t\tif(this.isTask){\n\t\t\tthis.doneCheckboxNode.style.display = \"\";\n\t\t\tthis.taskMakerNode.style.display = \"none\";\n\t\t}else{\n\t\t\tthis.doneCheckboxNode.style.display = \"none\";\n\t\t\tthis.taskMakerNode.style.display = \"\";\n\t\t}","this_variables":["isTask","doneCheckboxNode.style.display","taskMakerNode.style.display"]}}},"jot.widget.HTMLJotNodeItem.toggleIsTask":{"_":{"meta":{"summary":"","src":""}}},"jot.widget.HTMLJotNodeItem.populateAttachmentsFromDoc":{"_":{"meta":{"summary":"","parameters":{"doc":{"type":""}},"src":"\t\tvar node = _first(doc, \"body\");\n\t\tvar attachments = _first(node, \"attachments\").getElementsByTagName(\"attachment\");\n\t\tif(attachments&&attachments.length){\n\t\t\tfor(var x=0; x<attachments.length; x++){\n\t\t\t\tif(x == 0){\n\t\t\t\t\tvar pn = this.attachmentContainerNode.parentNode;\n\t\t\t\t\tpn.insertBefore(this.attachmentsTableNode, pn.firstChild);\n\t\t\t\t}\n\t\t\t\t\/\/ FIXME: need to set event handlers!\n\t\t\t\tvar ta = attachments[x];\n\t\t\t\tvar ar = this.attachmentsRowNode.cloneNode(true);\n\t\t\t\tthis.attachmentsTableNode.tBodies[0].appendChild(ar);\n\t\t\t\tvar cells = ar.getElementsByTagName(\"td\");\n\t\t\t\tcells[0].innerHTML = dojo.dom.innerXML(_first(ta, \"file\")).split(\"\/\").pop();;\n\t\t\t\tvar tdesc = _first(ta, \"desc\");\n\t\t\t\tcells[1].innerHTML = ((tdesc.children)&&(tdesc.children.length)) ? dojo.dom.innerXML(_first(ta, \"desc\")) : \"&nbsp;\";\n\t\t\t\tvar sstr = null;\n\t\t\t\tvar sizes = [\"bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\"];\n\t\t\t\tvar ctr = 0;\n\t\t\t\tvar tsize = _first(ta, \"size\");\n\t\t\t\tif(dojo.dom.innerXML(tsize).length){\n\t\t\t\t\tsstr = dojo.dom.innerXML(tsize);\n\t\t\t\t\twhile((sstr.length > 3)&&(ctr < sizes.length)){\n\t\t\t\t\t\tsstr = new String(parseInt(parseInt(sstr)\/1024));\n\t\t\t\t\t\tctr++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcells[2].innerHTML = (sstr) ? (sstr+sizes[ctr]) :  \"&nbsp;\";\n\t\t\t\tcells[3].innerHTML = dojo.dom.innerXML(_first(ta, \"user\"));\n\t\t\t}\n\t\t}"}}},"jot.widget.HTMLJotNodeItem.populateFromDoc":{"_":{"meta":{"summary":"","parameters":{"doc":{"type":""}},"src":"\t\tthis.initializeEdit();\n\t\tvar node = doc.firstChild;\n\t\tthis.lastModifiedUserNode.innerHTML = node.getAttribute(\"user\");\n\t\tvar data = _first(node, \"data\");\n\t\tvar cb = _first(data, \"corkboard\");\n\t\tvar nv = _first(cb, \"description\").firstChild.nodeValue;\n\n\t\twith(this.descriptionEditWidget){\n\t\t\teditable.innerHTML = nv;\n\t\t\ttextValue = nv;\n\t\t}\n\n\t\tvar iv = _first(_first(data, \"main\"), \"text\");\n\t\tvar ic = dojo.dom.innerXML(iv);\n\t\twith(this.itemContentEditWidget){\n\t\t\teditable.innerHTML = ic;\n\t\t\ttextValue = ic;\n\t\t\t\/\/ textValue = \"loading...\";\n\t\t}\n\t\t\/\/ dojo.event.connect(this.itemContentEditWidget, \"beginEdit\", this, \"populateEditWithMarkup\");\n\n\t\t\/\/ ${wikiRootPath}\/CorkBoard\/item1?edit=1&editStyle=markup&themePage=\/CorkBoard\/edit-raw&form=\/System\/Forms\/DefaultForm\n\n\t\tif(_first(cb, \"tags\")){\n\t\t\tthis.setTags(_first(cb, \"tags\").firstChild.nodeValue.split(\",\"));\n\t\t}\n\n\t\tif(_first(cb, \"task\")){\n\t\t\tdj_debug(dojo.dom.innerXML(_first(cb, \"task\")));\n\t\t}\n\n\t\tif(_first(cb, \"due\")){\n\t\t\tvar ds = _first(_first(cb, \"due\"), \"date\").firstChild.nodeValue;\n\t\t\tif(ds != \"19700101T000000Z\"){ \/\/ if not the begining of the epoch (which is the default)\n\t\t\t\tthis.dueDate = jot.cbUtil.dateFromJotString(ds); \n\t\t\t\tif(this.isTask){\n\t\t\t\t\tthis.setDate(this.dueDate);\n\t\t\t\t}\n\t\t\t}\n\t\t}","this_variables":["_isNewItem","lastModifiedUserNode.innerHTML","dueDate"]}}},"jot.widget.HTMLJotNodeItem.populateEditWithMarkup":{"_":{"meta":{"summary":"","src":"\t\tvar _this = this;\n\t\t\/\/ ${wikiRootPath}\/CorkBoard\/item1?edit=1&editStyle=markup&themePage=\/CorkBoard\/edit-raw&form=\/System\/Forms\/DefaultForm\n\t\tvar ba = {\n\t\t\turl: this.itemDataUrl+\"?edit=1&editStyle=markup&themePage=\/CorkBoard\/edit-raw&form=\/System\/Forms\/DefaultForm\",\n\t\t\tmethod: \"get\",\n\t\t\tmimetype: \"text\/xml\",\n\t\t\tloaded: function(type, data, e){\n\t\t\t\tvar tas = data.getElementsByTagName(\"textarea\");\n\t\t\t\t_this.itemContentEditWidget.textarea.value = tas[0].value;\n\t\t\t}\n\t\t}\n\t\tdojo.io.bind(ba);"}}},"jot.widget.HTMLJotNodeItem.setDate":{"_":{"meta":{"summary":"","parameters":{"dateObj":{"type":""}},"src":"\t\tthis.dateNode.innerHTML = jot.cbUtil.months[dateObj.getMonth()]+\" \"+dateObj.getDate()+\", \"+dateObj.getFullYear();","this_variables":["dateNode.innerHTML"]}}},"jot.widget.HTMLJotNodeItem.setTags":{"_":{"meta":{"summary":"","parameters":{"tagList":{"type":""}},"src":"\t\t\tthis.tagSelectorWidget.addSelectedTag(tagList[x]);\n\t\t}"}}},"jot.widget.HTMLJotNodeItem.saveTags":{"_":{"meta":{"summary":"","src":"\t\tthis.tagSelectorWidget.selectedTags.join(\",\");"}}},"jot.widget.HTMLJotNodeItem.getData":{"_":{"meta":{"summary":"","src":"\t\tvar _this = this;\n\t\t\/\/ main data\n\t\tvar ba = {\n\t\t\turl: this.itemDataUrl+\"?prettyXML=1\",\n\t\t\tmimetype: \"text\/xml\",\n\t\t\tsync: false,\n\t\t\tload: function(type, xmlDoc, evt){\n\t\t\t\t_this.populateFromDoc(xmlDoc);\n\t\t\t}\n\t\t}\n\t\tdojo.io.bind(ba);\n\n\t\t\/\/ get attachments list, if any\n\t\tvar aa = {\n\t\t\turl: this.attachmentSearchUrl+\"?theme=none&node=\"+encodeURIComponent(this.itemRelativePath),\n\t\t\tmimetype: \"text\/xml\",\n\t\t\tload: function(type, xmlDoc, evt){\n\t\t\t\t_this.populateAttachmentsFromDoc(xmlDoc);\n\t\t\t}\n\t\t}\n\t\tdojo.io.bind(aa);"}}}}}},"dojo.widget.jot.JotPermissionsDialog":{"meta":{"requires":{"common":["dojo.widget.*","jot.widget.JotPermissionsList","jot.widget.JotComboBox","dojo.validate","dojo.fx.*","dojo.io.*","dojo.string.*"]},"methods":{"jot.widget.JotPermissionsDialog":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\n\tif(this.maxInvites != Infinity) {\n\t\tthis.strings.inviteInstructions += dojo.string.paramString(this.strings.inviteInstructionsLimited, { limit: this.maxInvites });\n\t}","inherits":["dojo.widget.HtmlWidget"],"protovariables":{"widgetType":"","maxInvites":"","upgradeURL":"","templatePath":"","templateCssPath":"","strings":"","closeLink":"","inviteTitle":"","inviteInstructions":"","inviteInstructionsLimited":"","inviteButton":"","invitePermissionInstructions":"","inviteSent":"","inviteExists":"","inviteExistsMultiple":"","inviteMax":"","permissionsTitle":"","permissionsInstructions":"","editorListTitle":"","viewerListTitle":"","confirmDelete":"","invalidEmail":"","showPermissions":"","hidePermissions":"","saveUrl":"","triggerId":"","trigger":"","bgIframe":"","data":"","_recording":"","_actions":"","_pendingActions":"","_saving":"","_hasInvites":"","_saveQuery":""},"this_variables":["trigger","domNode.style.zIndex","bgIframe","inviteComobBox","_recording","_actions","inviteComobBox","editorsList","viewersList","_actions","_pendingActions","_saveQuery","_hasInvites","_saving","_actions","_pendingActions","_saveQuery","_hasInvites","_saving","_actions","_pendingActions","_saveQuery","_hasInvites","_saving","_recording","data","domNode.style.display","_actions","domNode.style.visibility","bgIframe.style.left","bgIframe.style.top","bgIframe.style.width","bgIframe.style.height","bgIframe.style.display","inviteButton.disabled","inviteMessage.innerHTML","inviteEmailNode.value","_pendingActions","_pendingActions","_actions","_pendingActions","_saveQuery","_hasInvites","_saving","_actions","_pendingActions","_saveQuery","_hasInvites","_saving","_actions","_pendingActions","_saveQuery","_hasInvites","_saving","_actions","_pendingActions","_saveQuery","_hasInvites","_saving","_saving","_hasInvites","_saveQuery","_recording","_actions","_recording","_actions","permissionsSection.style.display","toggleLink.innerHTML"]}}},"jot.widget.JotPermissionsDialog.fillInTemplate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tdojo.html.setOpacity(this.domNode, 0);\n\t\t\/\/this.initInviteComboBox();\n\t\tthis.initUserLists();\n\t\tif(!this.trigger && this.triggerId) {\n\t\t\tthis.trigger = document.getElementById(this.triggerId);\n\t\t\tdojo.event.connect(this.trigger, \"onclick\", this, \"show\");\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.postCreate":{"_":{"meta":{"summary":"","src":"\t\tdocument.body.appendChild(this.domNode);                          \n\t\tthis.domNode.style.zIndex = 998;\n\n\t\tif(dojo.render.html.ie){\n\t\t\tthis.bgIframe = document.createElement(\"<iframe frameborder='0' src='about:blank'>\");\n\t\t\twith(this.bgIframe.style) {\n\t\t\t\tposition = \"absolute\";\n\t\t\t\tleft = top = \"0px\";\n\t\t\t\tzIndex = 997;\n\t\t\t\tdisplay = \"none\";\n\t\t\t\t\/\/ backgroundColor = \"transparent\";\n\t\t\t\t\/\/ border = \"0px\";\n\t\t\t}\n\t\t\tdocument.body.appendChild(this.bgIframe);\n\t\t\tdojo.style.setOpacity(this.bgIframe, 0);\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.dataUrl":{"_":{"meta":{"summary":"","src":"\t\tif(this.dataUrl) {\n\t\t\t\/\/ invite combo box should show anyone you've ever invited to a tracker\n\t\t\tthis.inviteComobBox = dojo.widget.fromScript(\"JotComboBox\",\n\t\t\t\t{dataUrl: this.dataUrl}, this.inviteEmailNode);\n\t\t\tdojo.event.connect(this.inviteComobBox, \"onConfirmSelection\",\n\t\t\t\tthis, \"submitInvitation\");\n\n\t\t} else {\n\t\t\tvar _this = this;\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.init":{"_":{"meta":{"summary":"","parameters":{"editors":{"type":""},"viewers":{"type":""}},"src":"\t\tvar rec = this._recording;\n\t\tthis._recording = false;\n\t\tfor(var i = 0; i < editors.length; i++) {\n\t\t\tthis.addEditorEmail(editors[i]);\n\t\t}\n\t\tfor(var i = 0; i < viewers.length; i++) {\n\t\t\tthis.addViewerEmail(viewers[i]);\n\t\t}\n\t\tthis.sort();\n\t\tthis.reset();\n\t\tthis._recording = rec;","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.reset":{"_":{"meta":{"summary":"","src":"\t\tthis._actions = {};\n\t\tthis.inviteForm.reset();\n\t\tthis.updateInviteButton();","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.initInviteComboBox":{"_":{"meta":{"summary":"","src":"\t\tif(this.dataUrl) {\n\t\t\t\/\/ invite combo box should show anyone you've ever invited to a tracker\n\t\t\tthis.inviteComobBox = dojo.widget.fromScript(\"JotComboBox\",\n\t\t\t\t{dataUrl: this.dataUrl}, this.inviteEmailNode);\n\t\t\tdojo.event.connect(this.inviteComobBox, \"onConfirmSelection\",\n\t\t\t\tthis, \"submitInvitation\");\n\n\t\t} else {\n\t\t\tvar _this = this;\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.initUserLists":{"_":{"meta":{"summary":"","src":"\t\tthis.editorsList = dojo.widget.fromScript(\"JotPermissionsList\", null, this.editorsList);\n\t\tthis.viewersList = dojo.widget.fromScript(\"JotPermissionsList\", null, this.viewersList);\n\n\t\tdojo.event.connect(this.editorsList, \"onSelect\",\n\t\t\tthis.viewersList, \"deselectAll\");\n\t\tdojo.event.connect(this.editorsList, \"onSelectChange\",\n\t\t\tthis, \"selectChange\");\n\t\tdojo.event.connect(this, \"removeEditorEmail\", this.editorsList, \"removeEmail\");\n\t\tdojo.event.connect(this.editorsList, \"onRemoveEmail\",\n\t\t\tthis, \"onEditorRemoved\");\n\n\t\tdojo.event.connect(this.viewersList, \"onSelect\",\n\t\t\tthis.editorsList, \"deselectAll\");\n\t\tdojo.event.connect(this.viewersList, \"onSelectChange\",\n\t\t\tthis, \"selectChange\");\n\t\tdojo.event.connect(this, \"removeViewerEmail\", this.viewersList, \"removeEmail\");\n\t\tdojo.event.connect(this.viewersList, \"onRemoveEmail\",\n\t\t\tthis, \"onViewerRemoved\");","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.loadData":{"_":{"meta":{"summary":"","src":"\t\tif(this.data) {\n\t\t\treturn;\n\t\t} else if(this.dataUrl.charAt(0) == '#') {\n\t\t\tvar data = window[this.dataUrl.substring(1)];\n\t\t\tthis.setData(data);\n\t\t} else if(this.dataUrl) {\n\t\t\tdojo.debug(\"Loading permission data externally\");\n\t\t\t\/\/ dojo.io.bind to grab the data\n\t\t\tdojo.io.bind({\n\t\t\t\turl: this.dataUrl,\n\t\t\t\tmimetype: \"text\/javascript\",\n\t\t\t\tpreventCache: true,\n\t\t\t\thandler: dojo.lang.hitch(this, \"loadDataHandler\")\n\t\t\t});\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.url":{"_":{"meta":{"summary":"","src":"\t\tdojo.debug(\"Already saving?\", this._saving);\n\t\t\/\/ keep queuing up actions if we're waiting for a response\n\t\tif(this._saving) { return; }\n\n\t\tvar query = { page: Wiki.pageName };\n\t\tvar count = 0;\n\t\tvar hasInvites = false;\n\t\tfor(var email in this._actions) {\n\t\t\tvar item = this._actions[email].pop();\n\t\t\tif(item.action != \"add\" && this._actions[email][0] == \"add\") {\n\t\t\t\t\/\/ this person was actually just added\n\t\t\t\tvar action = \"add\";\n\t\t\t} else if(item.action == \"add\" && this._actions[email].length > 0\n\t\t\t\t&& this._actions[email][0].action != \"add\") {\n\t\t\t\t\/\/ if the last thing we did was add this person, but that wasn't\n\t\t\t\t\/\/ the first thing we did, then they don't really need an invite,\n\t\t\t\t\/\/ rather they were just shuffled\n\t\t\t\tvar action = \"move\";\n\t\t\t} else {\n\t\t\t\tvar action = item.action;\n\t\t\t}\n\n\t\t\tif(!hasInvites) { hasInvites = (action == \"add\"); }\n\n\t\t\tquery[\"email\"+count] = email;\n\t\t\tquery[\"action\"+count] = action;\n\t\t\tquery[\"type\"+count] = item.type;\n\t\t\tcount++;\n\t\t}\n\t\tthis._actions = {};\n\t\tthis._pendingActions = false;\n\t\tif(count > 0) {\n\t\t\t\/\/dojo.debug(\"clearing actions...\");\n\t\t\tthis._saveQuery = query; \/\/ save that in case something goes bad\n\t\t\tthis._hasInvites = hasInvites;\n\t\t\t\/*\n\t\t\tdojo.debug(\"sending data to\", this.saveUrl);\n\t\t\tdojo.debug(\"query:\");\n\t\t\tfor(var X in query) { dojo.debug(X, \":\", query[X]); }\n\t\t\t*\/\n\t\t\tthis._saving = true;\n\t\t\tvar req = dojo.io.bind({\n\t\t\t\turl: this.saveUrl,\n\t\t\t\tcontent: query,\n\t\t\t\tmethod: \"post\",\n\t\t\t\tmimetype: \"text\/xml\",\n\t\t\t\thandler: dojo.lang.hitch(this, \"saveHandler\")\n\t\t\t});\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.mimetype":{"_":{"meta":{"summary":"","src":"\t\tdojo.debug(\"Already saving?\", this._saving);\n\t\t\/\/ keep queuing up actions if we're waiting for a response\n\t\tif(this._saving) { return; }\n\n\t\tvar query = { page: Wiki.pageName };\n\t\tvar count = 0;\n\t\tvar hasInvites = false;\n\t\tfor(var email in this._actions) {\n\t\t\tvar item = this._actions[email].pop();\n\t\t\tif(item.action != \"add\" && this._actions[email][0] == \"add\") {\n\t\t\t\t\/\/ this person was actually just added\n\t\t\t\tvar action = \"add\";\n\t\t\t} else if(item.action == \"add\" && this._actions[email].length > 0\n\t\t\t\t&& this._actions[email][0].action != \"add\") {\n\t\t\t\t\/\/ if the last thing we did was add this person, but that wasn't\n\t\t\t\t\/\/ the first thing we did, then they don't really need an invite,\n\t\t\t\t\/\/ rather they were just shuffled\n\t\t\t\tvar action = \"move\";\n\t\t\t} else {\n\t\t\t\tvar action = item.action;\n\t\t\t}\n\n\t\t\tif(!hasInvites) { hasInvites = (action == \"add\"); }\n\n\t\t\tquery[\"email\"+count] = email;\n\t\t\tquery[\"action\"+count] = action;\n\t\t\tquery[\"type\"+count] = item.type;\n\t\t\tcount++;\n\t\t}\n\t\tthis._actions = {};\n\t\tthis._pendingActions = false;\n\t\tif(count > 0) {\n\t\t\t\/\/dojo.debug(\"clearing actions...\");\n\t\t\tthis._saveQuery = query; \/\/ save that in case something goes bad\n\t\t\tthis._hasInvites = hasInvites;\n\t\t\t\/*\n\t\t\tdojo.debug(\"sending data to\", this.saveUrl);\n\t\t\tdojo.debug(\"query:\");\n\t\t\tfor(var X in query) { dojo.debug(X, \":\", query[X]); }\n\t\t\t*\/\n\t\t\tthis._saving = true;\n\t\t\tvar req = dojo.io.bind({\n\t\t\t\turl: this.saveUrl,\n\t\t\t\tcontent: query,\n\t\t\t\tmethod: \"post\",\n\t\t\t\tmimetype: \"text\/xml\",\n\t\t\t\thandler: dojo.lang.hitch(this, \"saveHandler\")\n\t\t\t});\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.preventCache":{"_":{"meta":{"summary":"","src":"\t\tif(this.data) {\n\t\t\treturn;\n\t\t} else if(this.dataUrl.charAt(0) == '#') {\n\t\t\tvar data = window[this.dataUrl.substring(1)];\n\t\t\tthis.setData(data);\n\t\t} else if(this.dataUrl) {\n\t\t\tdojo.debug(\"Loading permission data externally\");\n\t\t\t\/\/ dojo.io.bind to grab the data\n\t\t\tdojo.io.bind({\n\t\t\t\turl: this.dataUrl,\n\t\t\t\tmimetype: \"text\/javascript\",\n\t\t\t\tpreventCache: true,\n\t\t\t\thandler: dojo.lang.hitch(this, \"loadDataHandler\")\n\t\t\t});\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.handler":{"_":{"meta":{"summary":"","src":"\t\tdojo.debug(\"Already saving?\", this._saving);\n\t\t\/\/ keep queuing up actions if we're waiting for a response\n\t\tif(this._saving) { return; }\n\n\t\tvar query = { page: Wiki.pageName };\n\t\tvar count = 0;\n\t\tvar hasInvites = false;\n\t\tfor(var email in this._actions) {\n\t\t\tvar item = this._actions[email].pop();\n\t\t\tif(item.action != \"add\" && this._actions[email][0] == \"add\") {\n\t\t\t\t\/\/ this person was actually just added\n\t\t\t\tvar action = \"add\";\n\t\t\t} else if(item.action == \"add\" && this._actions[email].length > 0\n\t\t\t\t&& this._actions[email][0].action != \"add\") {\n\t\t\t\t\/\/ if the last thing we did was add this person, but that wasn't\n\t\t\t\t\/\/ the first thing we did, then they don't really need an invite,\n\t\t\t\t\/\/ rather they were just shuffled\n\t\t\t\tvar action = \"move\";\n\t\t\t} else {\n\t\t\t\tvar action = item.action;\n\t\t\t}\n\n\t\t\tif(!hasInvites) { hasInvites = (action == \"add\"); }\n\n\t\t\tquery[\"email\"+count] = email;\n\t\t\tquery[\"action\"+count] = action;\n\t\t\tquery[\"type\"+count] = item.type;\n\t\t\tcount++;\n\t\t}\n\t\tthis._actions = {};\n\t\tthis._pendingActions = false;\n\t\tif(count > 0) {\n\t\t\t\/\/dojo.debug(\"clearing actions...\");\n\t\t\tthis._saveQuery = query; \/\/ save that in case something goes bad\n\t\t\tthis._hasInvites = hasInvites;\n\t\t\t\/*\n\t\t\tdojo.debug(\"sending data to\", this.saveUrl);\n\t\t\tdojo.debug(\"query:\");\n\t\t\tfor(var X in query) { dojo.debug(X, \":\", query[X]); }\n\t\t\t*\/\n\t\t\tthis._saving = true;\n\t\t\tvar req = dojo.io.bind({\n\t\t\t\turl: this.saveUrl,\n\t\t\t\tcontent: query,\n\t\t\t\tmethod: \"post\",\n\t\t\t\tmimetype: \"text\/xml\",\n\t\t\t\thandler: dojo.lang.hitch(this, \"saveHandler\")\n\t\t\t});\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.loadDataHandler":{"_":{"meta":{"summary":"","parameters":{"type":{"type":""},"js":{"type":""},"http":{"type":""}},"src":"\t\tif(type == \"load\") {\n\t\t\tthis.setData(js);\n\t\t} else {\n\t\t\tdojo.debug(\"Error loading data\");\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.setData":{"_":{"meta":{"summary":"","parameters":{"data":{"type":""}},"src":"\t\tvar ret = this.addData(data, true);\n\t\tthis.editorsList.resetView();\n\t\tthis.viewersList.resetView();\n\t\tthis.updateSharingStatus();\n\t\treturn ret;","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.updateSharingStatus":{"_":{"meta":{"summary":"","src":"\t\tif(!this.trigger) { return; }\n\t\tif(this.editorsList.getEmails().length > 0 ||\n\t\t\tthis.viewersList.getEmails().length > 0) {\n\t\t\tdojo.html.addClass(this.trigger, \"shared\");\n\t\t\tdojo.html.removeClass(this.trigger, \"unshared\");\n\t\t} else {\n\t\t\tdojo.html.addClass(this.trigger, \"unshared\");\n\t\t\tdojo.html.removeClass(this.trigger, \"shared\");\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.addData":{"_":{"meta":{"summary":"","parameters":{"data":{"type":""},"clearCurrent":{"type":""}},"src":"\t\tvar rec = this._recording;\n\t\tthis._recording = false;\n\n\t\tif(clearCurrent || !this.data) {\n\t\t\tthis.data = {};\n\t\t}\n\n\t\tfor(var i = 0; i < data.length; i++) {\n\t\t\tvar entry = data[i];\n\t\t\tvar email = entry.email;\n\t\t\tvar name = entry.name || \"\";\n\t\t\tvar perm = entry.permission || \"\";\n\t\t\tvar localUsername = entry.localUsername;\n\t\t\tif(!email) { continue; }\n\n\t\t\tthis.data[email] = entry;\n\n\t\t\tswitch(perm.charAt(0).toLowerCase()) {\n\t\t\t\tcase \"r\":\n\t\t\t\t\tthis.addViewerEmail(email);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"w\":\n\t\t\t\t\tthis.addEditorEmail(email);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tthis._recording = rec;","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.show":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif(e) {\n\t\t\tif(e.preventDefault) { e.preventDefault(); }\n\t\t\tif(e.stopPropagation) { e.stopPropagation(); }\n\t\t}\n\t\tif(this.domNode.style.display == \"block\") { return; }\n\t\tthis._actions = {};\n\t\tthis.loadData();\n\t\tthis.editorsList.resetView();\n\t\tthis.viewersList.resetView();\n\t\tthis.selectChange();\n\t\tthis.domNode.style.visibility = \"hidden\";\n\t\tthis.domNode.style.display = \"block\";\n\t\tthis.placeDialog(this.domNode, this.trigger);\n\t\tthis.domNode.style.visibility = \"visible\";\n\t\tthis.updateInviteButton()\n\t\tthis.updateBgIframe(true);\n\t\tdojo.fx.fadeIn(this.domNode, 200,\n\t\t\tdojo.lang.hitch(this, function() {\n\t\t\t\tthis.inviteEmailNode.focus();\n\t\t\t})\n\t\t);","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.placeDialog":{"_":{"meta":{"summary":"","parameters":{"domNode":{"type":""},"trigger":{"type":""}},"src":"\t\tif(!trigger) {\n\t\t\tdomNode.style.left = domNode.style.top = \"0px\";\n\t\t} else {\n\t\t\tif(!domNode) { domNode = this.domNode; }\n\t\t\tif(!trigger) { trigger = this.trigger; }\n\t\t\tvar w = dojo.html.getViewportWidth() || Infinity;\n\t\t\tif(w != Infinity) { w -= domNode.offsetWidth + 25; }\n\t\t\tvar x = dojo.html.getAbsoluteX(trigger) + (trigger.offsetWidth\/2) - (domNode.offsetWidth\/2);\n\t\t\tdomNode.style.left = Math.max(Math.min(w, x), 0) + \"px\";\n\t\t\tdomNode.style.top = trigger.offsetHeight + dojo.html.getAbsoluteY(trigger) + \"px\";\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.updateBgIframe":{"_":{"meta":{"summary":"","parameters":{"show":{"type":""}},"src":"\t\tif(this.bgIframe){\n\t\t\tif(show) {\n\t\t\t\tvar coords = dojo.html.toCoordinateArray(this.domNode);\n\t\t\t\tthis.bgIframe.style.left = coords[0] + \"px\";\n\t\t\t\tthis.bgIframe.style.top = coords[1] + \"px\";\n\t\t\t\tthis.bgIframe.style.width = coords[2] + \"px\";\n\t\t\t\tthis.bgIframe.style.height = coords[3] + \"px\";\n\t\t\t\tthis.bgIframe.style.display = \"block\";\n\t\t\t} else {\n\t\t\t\tthis.bgIframe.style.display = \"none\";\n\t\t\t}\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.hide":{"_":{"meta":{"summary":"","src":"\t\tvar _this = this;\n\t\tdojo.fx.fadeHide(this.domNode, 200, function() {\n\t\t\t_this.updateBgIframe(false);\n\t\t});","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.hideClick":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif(!dojo.html.isDescendantOf(e.target, this.domNode)) {\n\t\t\tdojo.event.disconnect(document.body, \"onclick\", this, \"hideClick\");\n\t\t\tthis.hide();\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.updateInviteButton":{"_":{"meta":{"summary":"","src":"\t\tif(!dojo.validate.isEmailAddressList(dojo.string.trim(this.inviteEmailNode.value))) {\n\t\t\tdojo.html.addClass(this.inviteButton, \"disabled\");\n\t\t\tthis.inviteButton.disabled = true;\n\t\t} else {\n\t\t\tdojo.html.removeClass(this.inviteButton, \"disabled\");\n\t\t\tthis.inviteButton.disabled = false;\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.setMessage":{"_":{"meta":{"summary":"","parameters":{"msg":{"type":""}},"src":"\t\tthis.inviteMessage.innerHTML = msg || this.strings.inviteInstructions;\n\t\tif(msg) {\n\t\t\tdojo.fx.highlight(this.inviteMessage, \"#ffc\", 500, 500);\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.submitInvitation":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tthis.killEvent(e);\n\t\tvar type = this.inviteForm.permissions[0].checked ? \"w\" : \"r\";\n\t\tif(this.sendInvites(this.inviteEmailNode.value, type)) {\n\t\t\tthis.inviteEmailNode.value = \"\";\n\t\t}\n\t\tthis.updateInviteButton();","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.sendInvites":{"_":{"meta":{"summary":"","parameters":{"email":{"type":""},"permission":{"type":""}},"src":"\t\tvar emails = dojo.validate.getEmailAddressList(dojo.string.trim(email));\n\t\tif(emails.length == 0) { \/\/ should never get here... we don't let the user submit unless they are valid\n\t\t\tthis.setMessage(this.invalidEmail);\n\t\t\tdojo.debug(\"Emails are no good\");\n\t\t\treturn false;\n\t\t}\n\n\t\t\/\/ FIXME: Make the add*Email function parse the emails!\n\t\tvar type = (permission||\"\").toLowerCase().charAt(0) == \"w\" ? \"Editor\" : \"Viewer\";\n\t\ttype = \"add\" + type + \"Email\";\n\t\tdojo.debug(\"type:\", type, \"emails:\", emails);\n\n\t\tvar success = [];\n\t\tvar failed = [];\n\t\tvar maxed = [];\n\t\tfor(var i = 0; i < emails.length; i++) {\n\t\t\tvar email = dojo.string.trim(emails[i]);\n\t\t\tif(this.viewersList.getEmails().length + this.editorsList.getEmails().length < this.maxInvites) {\n\t\t\t\tvar added = this[type](email);\n\t\t\t\tif(added) {\n\t\t\t\t\tsuccess.push(email);\n\t\t\t\t} else {\n\t\t\t\t\tfailed.push(email);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif(this.viewersList.hasEmail(email) || this.editorsList.hasEmail(email)) {\n\t\t\t\t\tfailed.push(email);\n\t\t\t\t} else {\n\t\t\t\t\tmaxed.push(email);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tdojo.debug(\"success:\", success);\n\t\tdojo.debug(\"failed:\", failed);\n\t\tdojo.debug(\"maxed:\", maxed);\n\n\t\tvar msg = \"\";\n\t\tif(success.length > 0) {\n\t\t\tmsg += dojo.string.paramString(this.strings.inviteSent, {emails: success.join(\", \")});\n\t\t}\n\t\tif(failed.length > 0) {\n\t\t\tmsg += dojo.string.paramString(failed.length > 1 ? this.strings.inviteExistsMultiple : this.strings.inviteExists, {emails: failed.join(\", \")});\n\t\t}\n\t\tif(maxed.length > 0) {\n\t\t\tmsg += dojo.string.paramString(this.strings.inviteMax, {emails: maxed.join(\", \"), limit: this.maxInvites, upgradeURL: this.upgradeURL});\n\t\t}\n\t\tdojo.debug(\"message:\", msg);\n\t\tthis.setMessage(msg);\n\n\t\treturn true;","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.emails":{"_":{"meta":{"summary":"","parameters":{"email":{"type":""},"permission":{"type":""}},"src":"\t\tvar emails = dojo.validate.getEmailAddressList(dojo.string.trim(email));\n\t\tif(emails.length == 0) { \/\/ should never get here... we don't let the user submit unless they are valid\n\t\t\tthis.setMessage(this.invalidEmail);\n\t\t\tdojo.debug(\"Emails are no good\");\n\t\t\treturn false;\n\t\t}\n\n\t\t\/\/ FIXME: Make the add*Email function parse the emails!\n\t\tvar type = (permission||\"\").toLowerCase().charAt(0) == \"w\" ? \"Editor\" : \"Viewer\";\n\t\ttype = \"add\" + type + \"Email\";\n\t\tdojo.debug(\"type:\", type, \"emails:\", emails);\n\n\t\tvar success = [];\n\t\tvar failed = [];\n\t\tvar maxed = [];\n\t\tfor(var i = 0; i < emails.length; i++) {\n\t\t\tvar email = dojo.string.trim(emails[i]);\n\t\t\tif(this.viewersList.getEmails().length + this.editorsList.getEmails().length < this.maxInvites) {\n\t\t\t\tvar added = this[type](email);\n\t\t\t\tif(added) {\n\t\t\t\t\tsuccess.push(email);\n\t\t\t\t} else {\n\t\t\t\t\tfailed.push(email);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif(this.viewersList.hasEmail(email) || this.editorsList.hasEmail(email)) {\n\t\t\t\t\tfailed.push(email);\n\t\t\t\t} else {\n\t\t\t\t\tmaxed.push(email);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tdojo.debug(\"success:\", success);\n\t\tdojo.debug(\"failed:\", failed);\n\t\tdojo.debug(\"maxed:\", maxed);\n\n\t\tvar msg = \"\";\n\t\tif(success.length > 0) {\n\t\t\tmsg += dojo.string.paramString(this.strings.inviteSent, {emails: success.join(\", \")});\n\t\t}\n\t\tif(failed.length > 0) {\n\t\t\tmsg += dojo.string.paramString(failed.length > 1 ? this.strings.inviteExistsMultiple : this.strings.inviteExists, {emails: failed.join(\", \")});\n\t\t}\n\t\tif(maxed.length > 0) {\n\t\t\tmsg += dojo.string.paramString(this.strings.inviteMax, {emails: maxed.join(\", \"), limit: this.maxInvites, upgradeURL: this.upgradeURL});\n\t\t}\n\t\tdojo.debug(\"message:\", msg);\n\t\tthis.setMessage(msg);\n\n\t\treturn true;","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.addEditorEmail":{"_":{"meta":{"summary":"","parameters":{"email":{"type":""}},"src":"\t\tif(!dojo.validate.isEmailAddress(email)) {\n\t\t\tdojo.debug(\"Bad email address!\", email);\n\t\t\treturn false;\n\t\t}\n\t\tvar added = this.editorsList.addEmail(email);\n\t\tif(added) {\n\t\t\tif(this.viewersList.hasEmail(email)) {\n\t\t\t\tthis.viewersList.removeEmail(email);\n\t\t\t} else {\n\t\t\t\tthis.recordAction(email, \"add\", \"write\");\n\t\t\t}\n\t\t} else {\n\t\t\tthis.editorsList.select(email);\n\t\t}\n\t\treturn added;","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.addViewerEmail":{"_":{"meta":{"summary":"","parameters":{"email":{"type":""}},"src":"\t\tif(!dojo.validate.isEmailAddress(email)) {\n\t\t\treturn false;\n\t\t}\n\t\tvar added = this.viewersList.addEmail(email);\n\t\tif(added) {\n\t\t\tif(this.editorsList.hasEmail(email)) {\n\t\t\t\tthis.editorsList.removeEmail(email);\n\t\t\t} else {\n\t\t\t\tthis.recordAction(email, \"add\", \"read\");\n\t\t\t}\n\t\t} else {\n\t\t\tthis.viewersList.select(email);\n\t\t}\n\t\treturn added;","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.killEvent":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\te.stopPropagation();\n\t\te.preventDefault();","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.moveLeft":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar email = this.viewersList.getValue();\n\t\tif(email) {\n\t\t\tdojo.debug(\"moving\", email, \"left\");\n\t\t\tthis.addEditorEmail(email);\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.moveRight":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar email = this.editorsList.getValue();\n\t\tif(email) {\n\t\t\tdojo.debug(\"moving\", email, \"right\");\n\t\t\tthis.addViewerEmail(email);\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.recordAction":{"_":{"meta":{"summary":"","parameters":{"email":{"type":""},"action":{"type":""},"type":{"type":""}},"src":"\t\tif(!this._recording) { return; }\n\t\tdojo.debug(\"recorded:\", email, action, type);\n\n\t\tthis.updateSharingStatus();\n\n\t\tif(!this._actions[email]) {\n\t\t\tthis._actions[email] = [];\n\t\t}\n\n\t\tif(this._actions.length) {\n\t\t\tvar lastAction = this._actions[this._actions.length-1].action;\n\t\t}\n\t\tthis._actions[email].push({action: action, type: type});\n\n\t\t\/\/ save as we go for now!\n\t\tthis._pendingActions = true;\n\t\tthis.saveActions();","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.action":{"_":{"meta":{"summary":"","parameters":{"email":{"type":""},"action":{"type":""},"type":{"type":""}},"src":"\t\tif(!this._recording) { return; }\n\t\tdojo.debug(\"recorded:\", email, action, type);\n\n\t\tthis.updateSharingStatus();\n\n\t\tif(!this._actions[email]) {\n\t\t\tthis._actions[email] = [];\n\t\t}\n\n\t\tif(this._actions.length) {\n\t\t\tvar lastAction = this._actions[this._actions.length-1].action;\n\t\t}\n\t\tthis._actions[email].push({action: action, type: type});\n\n\t\t\/\/ save as we go for now!\n\t\tthis._pendingActions = true;\n\t\tthis.saveActions();","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.saveActions":{"_":{"meta":{"summary":"","src":"\t\tdojo.debug(\"Already saving?\", this._saving);\n\t\t\/\/ keep queuing up actions if we're waiting for a response\n\t\tif(this._saving) { return; }\n\n\t\tvar query = { page: Wiki.pageName };\n\t\tvar count = 0;\n\t\tvar hasInvites = false;\n\t\tfor(var email in this._actions) {\n\t\t\tvar item = this._actions[email].pop();\n\t\t\tif(item.action != \"add\" && this._actions[email][0] == \"add\") {\n\t\t\t\t\/\/ this person was actually just added\n\t\t\t\tvar action = \"add\";\n\t\t\t} else if(item.action == \"add\" && this._actions[email].length > 0\n\t\t\t\t&& this._actions[email][0].action != \"add\") {\n\t\t\t\t\/\/ if the last thing we did was add this person, but that wasn't\n\t\t\t\t\/\/ the first thing we did, then they don't really need an invite,\n\t\t\t\t\/\/ rather they were just shuffled\n\t\t\t\tvar action = \"move\";\n\t\t\t} else {\n\t\t\t\tvar action = item.action;\n\t\t\t}\n\n\t\t\tif(!hasInvites) { hasInvites = (action == \"add\"); }\n\n\t\t\tquery[\"email\"+count] = email;\n\t\t\tquery[\"action\"+count] = action;\n\t\t\tquery[\"type\"+count] = item.type;\n\t\t\tcount++;\n\t\t}\n\t\tthis._actions = {};\n\t\tthis._pendingActions = false;\n\t\tif(count > 0) {\n\t\t\t\/\/dojo.debug(\"clearing actions...\");\n\t\t\tthis._saveQuery = query; \/\/ save that in case something goes bad\n\t\t\tthis._hasInvites = hasInvites;\n\t\t\t\/*\n\t\t\tdojo.debug(\"sending data to\", this.saveUrl);\n\t\t\tdojo.debug(\"query:\");\n\t\t\tfor(var X in query) { dojo.debug(X, \":\", query[X]); }\n\t\t\t*\/\n\t\t\tthis._saving = true;\n\t\t\tvar req = dojo.io.bind({\n\t\t\t\turl: this.saveUrl,\n\t\t\t\tcontent: query,\n\t\t\t\tmethod: \"post\",\n\t\t\t\tmimetype: \"text\/xml\",\n\t\t\t\thandler: dojo.lang.hitch(this, \"saveHandler\")\n\t\t\t});\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.page":{"_":{"meta":{"summary":"","src":"\t\tdojo.debug(\"Already saving?\", this._saving);\n\t\t\/\/ keep queuing up actions if we're waiting for a response\n\t\tif(this._saving) { return; }\n\n\t\tvar query = { page: Wiki.pageName };\n\t\tvar count = 0;\n\t\tvar hasInvites = false;\n\t\tfor(var email in this._actions) {\n\t\t\tvar item = this._actions[email].pop();\n\t\t\tif(item.action != \"add\" && this._actions[email][0] == \"add\") {\n\t\t\t\t\/\/ this person was actually just added\n\t\t\t\tvar action = \"add\";\n\t\t\t} else if(item.action == \"add\" && this._actions[email].length > 0\n\t\t\t\t&& this._actions[email][0].action != \"add\") {\n\t\t\t\t\/\/ if the last thing we did was add this person, but that wasn't\n\t\t\t\t\/\/ the first thing we did, then they don't really need an invite,\n\t\t\t\t\/\/ rather they were just shuffled\n\t\t\t\tvar action = \"move\";\n\t\t\t} else {\n\t\t\t\tvar action = item.action;\n\t\t\t}\n\n\t\t\tif(!hasInvites) { hasInvites = (action == \"add\"); }\n\n\t\t\tquery[\"email\"+count] = email;\n\t\t\tquery[\"action\"+count] = action;\n\t\t\tquery[\"type\"+count] = item.type;\n\t\t\tcount++;\n\t\t}\n\t\tthis._actions = {};\n\t\tthis._pendingActions = false;\n\t\tif(count > 0) {\n\t\t\t\/\/dojo.debug(\"clearing actions...\");\n\t\t\tthis._saveQuery = query; \/\/ save that in case something goes bad\n\t\t\tthis._hasInvites = hasInvites;\n\t\t\t\/*\n\t\t\tdojo.debug(\"sending data to\", this.saveUrl);\n\t\t\tdojo.debug(\"query:\");\n\t\t\tfor(var X in query) { dojo.debug(X, \":\", query[X]); }\n\t\t\t*\/\n\t\t\tthis._saving = true;\n\t\t\tvar req = dojo.io.bind({\n\t\t\t\turl: this.saveUrl,\n\t\t\t\tcontent: query,\n\t\t\t\tmethod: \"post\",\n\t\t\t\tmimetype: \"text\/xml\",\n\t\t\t\thandler: dojo.lang.hitch(this, \"saveHandler\")\n\t\t\t});\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.content":{"_":{"meta":{"summary":"","src":"\t\tdojo.debug(\"Already saving?\", this._saving);\n\t\t\/\/ keep queuing up actions if we're waiting for a response\n\t\tif(this._saving) { return; }\n\n\t\tvar query = { page: Wiki.pageName };\n\t\tvar count = 0;\n\t\tvar hasInvites = false;\n\t\tfor(var email in this._actions) {\n\t\t\tvar item = this._actions[email].pop();\n\t\t\tif(item.action != \"add\" && this._actions[email][0] == \"add\") {\n\t\t\t\t\/\/ this person was actually just added\n\t\t\t\tvar action = \"add\";\n\t\t\t} else if(item.action == \"add\" && this._actions[email].length > 0\n\t\t\t\t&& this._actions[email][0].action != \"add\") {\n\t\t\t\t\/\/ if the last thing we did was add this person, but that wasn't\n\t\t\t\t\/\/ the first thing we did, then they don't really need an invite,\n\t\t\t\t\/\/ rather they were just shuffled\n\t\t\t\tvar action = \"move\";\n\t\t\t} else {\n\t\t\t\tvar action = item.action;\n\t\t\t}\n\n\t\t\tif(!hasInvites) { hasInvites = (action == \"add\"); }\n\n\t\t\tquery[\"email\"+count] = email;\n\t\t\tquery[\"action\"+count] = action;\n\t\t\tquery[\"type\"+count] = item.type;\n\t\t\tcount++;\n\t\t}\n\t\tthis._actions = {};\n\t\tthis._pendingActions = false;\n\t\tif(count > 0) {\n\t\t\t\/\/dojo.debug(\"clearing actions...\");\n\t\t\tthis._saveQuery = query; \/\/ save that in case something goes bad\n\t\t\tthis._hasInvites = hasInvites;\n\t\t\t\/*\n\t\t\tdojo.debug(\"sending data to\", this.saveUrl);\n\t\t\tdojo.debug(\"query:\");\n\t\t\tfor(var X in query) { dojo.debug(X, \":\", query[X]); }\n\t\t\t*\/\n\t\t\tthis._saving = true;\n\t\t\tvar req = dojo.io.bind({\n\t\t\t\turl: this.saveUrl,\n\t\t\t\tcontent: query,\n\t\t\t\tmethod: \"post\",\n\t\t\t\tmimetype: \"text\/xml\",\n\t\t\t\thandler: dojo.lang.hitch(this, \"saveHandler\")\n\t\t\t});\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.method":{"_":{"meta":{"summary":"","src":"\t\tdojo.debug(\"Already saving?\", this._saving);\n\t\t\/\/ keep queuing up actions if we're waiting for a response\n\t\tif(this._saving) { return; }\n\n\t\tvar query = { page: Wiki.pageName };\n\t\tvar count = 0;\n\t\tvar hasInvites = false;\n\t\tfor(var email in this._actions) {\n\t\t\tvar item = this._actions[email].pop();\n\t\t\tif(item.action != \"add\" && this._actions[email][0] == \"add\") {\n\t\t\t\t\/\/ this person was actually just added\n\t\t\t\tvar action = \"add\";\n\t\t\t} else if(item.action == \"add\" && this._actions[email].length > 0\n\t\t\t\t&& this._actions[email][0].action != \"add\") {\n\t\t\t\t\/\/ if the last thing we did was add this person, but that wasn't\n\t\t\t\t\/\/ the first thing we did, then they don't really need an invite,\n\t\t\t\t\/\/ rather they were just shuffled\n\t\t\t\tvar action = \"move\";\n\t\t\t} else {\n\t\t\t\tvar action = item.action;\n\t\t\t}\n\n\t\t\tif(!hasInvites) { hasInvites = (action == \"add\"); }\n\n\t\t\tquery[\"email\"+count] = email;\n\t\t\tquery[\"action\"+count] = action;\n\t\t\tquery[\"type\"+count] = item.type;\n\t\t\tcount++;\n\t\t}\n\t\tthis._actions = {};\n\t\tthis._pendingActions = false;\n\t\tif(count > 0) {\n\t\t\t\/\/dojo.debug(\"clearing actions...\");\n\t\t\tthis._saveQuery = query; \/\/ save that in case something goes bad\n\t\t\tthis._hasInvites = hasInvites;\n\t\t\t\/*\n\t\t\tdojo.debug(\"sending data to\", this.saveUrl);\n\t\t\tdojo.debug(\"query:\");\n\t\t\tfor(var X in query) { dojo.debug(X, \":\", query[X]); }\n\t\t\t*\/\n\t\t\tthis._saving = true;\n\t\t\tvar req = dojo.io.bind({\n\t\t\t\turl: this.saveUrl,\n\t\t\t\tcontent: query,\n\t\t\t\tmethod: \"post\",\n\t\t\t\tmimetype: \"text\/xml\",\n\t\t\t\thandler: dojo.lang.hitch(this, \"saveHandler\")\n\t\t\t});\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.saveHandler":{"_":{"meta":{"summary":"","parameters":{"type":{"type":""},"xml":{"type":""},"http":{"type":""}},"src":"\t\tthis._saving = false;\n\t\tthis._hasInvites = false;\n\t\tthis._saveQuery = {};\n\t\tif(this._pendingActions) {\n\t\t\tdojo.debug(\"More to save, let's do it!\");\n\t\t\tthis.saveActions();\n\t\t}\n\t\tif(type == \"load\") {\n\t\t\t\/*\n\t\t\tvar response = xml.getElementsByTagName(\"response\")[0];\n\t\t\tvar error = xml.getElementsByTagName(\"error\")[0];\n\t\t\tvar message = xml.getElementsByTagName(\"message\")[0];\n\t\t\tif(response) {\n\t\t\t\tthis.setMessage(dojo.html.textContent(message));\n\t\t\t} else {\n\t\t\t\tthis.setMessage(dojo.html.textContent(message));\n\t\t\t}\n\t\t\t*\/\n\t\t} else {\n\t\t\t\/\/ try again?\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.undoActions":{"_":{"meta":{"summary":"","src":"\t\tvar rec = this._recording;\n\t\tthis._recording = false;\n\t\tfor(var email in this._actions) {\n\t\t\tvar item = this._actions[email][0];\n\t\t\tvar action = item.action;\n\t\t\tvar type = item.type;\n\n\t\t\tthis.removeViewerEmail(email);\n\t\t\tthis.removeEditorEmail(email);\n\n\t\t\tswitch(action) {\n\t\t\t\tcase \"add\":\n\t\t\t\t\tif(type == \"read\") { \/\/ add to read\n\t\t\t\t\t\tdojo.debug(\"removing\", email, \"from viewers\");\n\t\t\t\t\t\tthis.removeViewerEmail(email);\n\t\t\t\t\t} else if(type == \"write\") { \/\/ add to write\n\t\t\t\t\tdojo.debug(\"removing\", email, \"from editors\");\n\t\t\t\t\t\tthis.removeEditorEmail(email);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"delete\":\n\t\t\t\t\tif(type == \"read\") { \/\/ delete from read\n\t\t\t\t\t\tdojo.debug(\"restoring\", email, \"to viewers\");\n\t\t\t\t\t\tthis.addViewerEmail(email);\n\t\t\t\t\t} else if(type == \"write\") { \/\/ delete from write\n\t\t\t\t\t\tdojo.debug(\"restoring\", email, \"to editors\");\n\t\t\t\t\t\tthis.addEditorEmail(email);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"move\":\n\t\t\t\t\tif(type == \"read\") { \/\/ move to read\n\t\t\t\t\t\tdojo.debug(\"moving\", email, \"back to editors\");\n\t\t\t\t\t\t\/\/this.removeViewerEmail(email);\n\t\t\t\t\t\tthis.addEditorEmail(email);\n\t\t\t\t\t} else if(type == \"write\") { \/\/ move to write\n\t\t\t\t\t\tdojo.debug(\"moving\", email, \"back to viewers\");\n\t\t\t\t\t\t\/\/this.removeEditorEmail(email);\n\t\t\t\t\t\tthis.addViewerEmail(email);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tdojo.debug(\"unrecognized action:\", action, \", email:\", email);\n\t\t\t}\n\t\t}\n\t\tthis._recording = rec;\n\t\tthis._actions = {};\n\t\tthis.sort();","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.default":{"_":{"meta":{"summary":"","src":"\t\tvar rec = this._recording;\n\t\tthis._recording = false;\n\t\tfor(var email in this._actions) {\n\t\t\tvar item = this._actions[email][0];\n\t\t\tvar action = item.action;\n\t\t\tvar type = item.type;\n\n\t\t\tthis.removeViewerEmail(email);\n\t\t\tthis.removeEditorEmail(email);\n\n\t\t\tswitch(action) {\n\t\t\t\tcase \"add\":\n\t\t\t\t\tif(type == \"read\") { \/\/ add to read\n\t\t\t\t\t\tdojo.debug(\"removing\", email, \"from viewers\");\n\t\t\t\t\t\tthis.removeViewerEmail(email);\n\t\t\t\t\t} else if(type == \"write\") { \/\/ add to write\n\t\t\t\t\tdojo.debug(\"removing\", email, \"from editors\");\n\t\t\t\t\t\tthis.removeEditorEmail(email);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"delete\":\n\t\t\t\t\tif(type == \"read\") { \/\/ delete from read\n\t\t\t\t\t\tdojo.debug(\"restoring\", email, \"to viewers\");\n\t\t\t\t\t\tthis.addViewerEmail(email);\n\t\t\t\t\t} else if(type == \"write\") { \/\/ delete from write\n\t\t\t\t\t\tdojo.debug(\"restoring\", email, \"to editors\");\n\t\t\t\t\t\tthis.addEditorEmail(email);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"move\":\n\t\t\t\t\tif(type == \"read\") { \/\/ move to read\n\t\t\t\t\t\tdojo.debug(\"moving\", email, \"back to editors\");\n\t\t\t\t\t\t\/\/this.removeViewerEmail(email);\n\t\t\t\t\t\tthis.addEditorEmail(email);\n\t\t\t\t\t} else if(type == \"write\") { \/\/ move to write\n\t\t\t\t\t\tdojo.debug(\"moving\", email, \"back to viewers\");\n\t\t\t\t\t\t\/\/this.removeEditorEmail(email);\n\t\t\t\t\t\tthis.addViewerEmail(email);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tdojo.debug(\"unrecognized action:\", action, \", email:\", email);\n\t\t\t}\n\t\t}\n\t\tthis._recording = rec;\n\t\tthis._actions = {};\n\t\tthis.sort();","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.sort":{"_":{"meta":{"summary":"","src":"\t\tthis.editorsList.sort();\n\t\tthis.viewersList.sort();","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.onEditorRemoved":{"_":{"meta":{"summary":"","parameters":{"email":{"type":""}},"src":"\t\tif(this.viewersList.hasEmail(email)) {\n\t\t\tthis.recordAction(email, \"move\", \"read\");\n\t\t} else {\n\t\t\tthis.recordAction(email, \"delete\", \"write\");\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.onViewerRemoved":{"_":{"meta":{"summary":"","parameters":{"email":{"type":""}},"src":"\t\tif(this.editorsList.hasEmail(email)) {\n\t\t\tthis.recordAction(email, \"move\", \"write\");\n\t\t} else {\n\t\t\tthis.recordAction(email, \"delete\", \"read\");\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.save":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tdojo.debug(\"saving\");\n\t\tif(e && e.preventDefault) { e.preventDefault(); }\n\n\t\tthis.hide();\n\t\tthis.saveActions();","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.cancel":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tdojo.debug(\"cancelling\");\n\t\tif(e && e.preventDefault) { e.preventDefault(); }\n\n\t\tthis.hide();\n\t\tthis.undoActions();","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.selectChange":{"_":{"meta":{"summary":"","src":"\t\tif(this.editorsList.selectedItem) {\n\t\t\tdojo.html.removeClass(this.moveRightNode, \"moveRight-disabled\");\n\t\t\tdojo.html.addClass(this.moveLeftNode, \"moveLeft-disabled\");\n\t\t} else if(this.viewersList.selectedItem) {\n\t\t\tdojo.html.removeClass(this.moveLeftNode, \"moveLeft-disabled\");\n\t\t\tdojo.html.addClass(this.moveRightNode, \"moveRight-disabled\");\n\t\t} else {\n\t\t\tdojo.html.addClass(this.moveLeftNode, \"moveLeft-disabled\");\n\t\t\tdojo.html.addClass(this.moveRightNode, \"moveRight-disabled\");\n\t\t}","this":"jot.widget.JotPermissionsDialog"}}},"jot.widget.JotPermissionsDialog.togglePermissions":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\treturn;\n\t\tvar display = dojo.html.getStyle(this.permissionsSection, \"display\");\n\t\tif(display != \"block\") {\n\t\t\tthis.permissionsSection.style.display = \"block\";\n\t\t\tthis.toggleLink.innerHTML = this.strings.hidePermissions;\n\t\t\tif(dojo.render.html.ie) {\n\t\t\t\t\/\/ IE fubars the display otherwise\n\t\t\t\tthis.editorsList.select(0);\n\t\t\t\tthis.viewersList.select(0);\n\t\t\t\tthis.viewersList.deselectAll();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.permissionsSection.style.display = \"none\";\n\t\t\tthis.toggleLink.innerHTML = this.strings.showPermissions;\n\t\t}\n\t\tthis.updateBgIframe(true);\n\t\tthis.toggleLink.blur();","this":"jot.widget.JotPermissionsDialog"}}}}}},"dojo.widget.jot.JotPermissionsList":{"meta":{"requires":{"common":["dojo.widget.*"]},"methods":{"jot.widget.JotPermissionsList":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\n\tthis.selection = [];\n\tthis._emails = [];","this_variables":["selection","_emails","highlightedNode","selectedItem","selectedItem","selectedItem","domNode.scrollTop"],"inherits":["dojo.widget.HtmlWidget"],"protovariables":{"widgetType":"","allowDuplicates":"","entryClassName":"","displayMaxLength":"","selectedItem":"","selection":"","highlightedNode":"","_emails":"","onSelect":"","onDeselect":"","onSelectChange":""}}}},"jot.widget.JotPermissionsList.fillInTemplate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tdojo.html.addClass(this.domNode, \"jot-permissionsList\");\n\t\tdojo.event.connect(this.domNode, \"onclick\", this, \"click\");\n\t\tdojo.event.connect(this.domNode, \"onmouseover\", this, \"mouseover\");\n\t\tdojo.event.connect(this.domNode, \"onmouseout\", this, \"mouseout\");","this":"jot.widget.JotPermissionsList"}}},"jot.widget.JotPermissionsList.click":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar node = e.target;\n\n\t\tvar delClick = node.tagName && node.tagName.toLowerCase() == \"a\";\n\n\t\twhile(node && node != this.domNode) {\n\t\t\tif(dojo.html.hasClass(node, this.entryClassName)) {\n\t\t\t\tif(delClick) {\n\t\t\t\t\tthis.removeEmail(node);\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t} else {\n\t\t\t\t\tthis.toggleSelect(node);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tnode = node.parentNode;\n\t\t}\n\t\tif(node == this.domNode) { node = null; }\n\n\t\tif(!node) {\n\t\t\tthis.deselectAll();\n\t\t}","this":"jot.widget.JotPermissionsList"}}},"jot.widget.JotPermissionsList.mouseover":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar node = e.target;\n\t\twhile(node && node != this.domNode) {\n\t\t\tif(dojo.html.hasClass(node, this.entryClassName)) {\n\t\t\t\tthis.highlightNode(node);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tnode = node.parentNode;\n\t\t}\n\t\tthis.highlightNode();","this":"jot.widget.JotPermissionsList"}}},"jot.widget.JotPermissionsList.mouseout":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tthis.highlightNode();","this":"jot.widget.JotPermissionsList"}}},"jot.widget.JotPermissionsList.highlightNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tif(this.highlightedNode) {\n\t\t\tdojo.html.removeClass(this.highlightedNode, \"highlighted\");\n\t\t}\n\n\t\tif(node) {\n\t\t\tthis.highlightedNode = node;\n\t\t\tdojo.html.addClass(this.highlightedNode, \"highlighted\");\n\t\t} else {\n\t\t\tthis.highlightedNode = null;\n\t\t}","this":"jot.widget.JotPermissionsList"}}},"jot.widget.JotPermissionsList.getValue":{"_":{"meta":{"summary":"","src":"\t\tvar value = \"\";\n\t\tif(this.selectedItem) {\n\t\t\tvalue = this.getNodeEmail(this.selectedItem);\n\t\t}\n\t\treturn value;","this":"jot.widget.JotPermissionsList"}}},"jot.widget.JotPermissionsList.getEmails":{"_":{"meta":{"summary":"","src":"\t\treturn this._emails.concat();                          ","returns":"returns a shallow copy","this":"jot.widget.JotPermissionsList"}}},"jot.widget.JotPermissionsList.toggleSelect":{"_":{"meta":{"summary":"","parameters":{"email":{"type":""}},"src":"\t\tvar node = this.getEmailNode(email);\n\n\t\tif(!node) {\n\t\t\tdojo.debug(\"no node for\", email);\n\t\t} else {\n\t\t\tif(dojo.html.hasClass(node, \"selected\")) {\n\t\t\t\tthis.deselect(node);\n\t\t\t} else {\n\t\t\t\tthis.select(node);\n\t\t\t}\n\t\t}","this":"jot.widget.JotPermissionsList"}}},"jot.widget.JotPermissionsList.select":{"_":{"meta":{"summary":"","parameters":{"email":{"type":""}},"src":"\t\tif(typeof email == \"number\") {\n\t\t\temail = this._emails[email];\n\t\t}\n\t\tvar node = this.getEmailNode(email);\n\t\tif(node) {\n\t\t\tif(this.selectedItem) {\n\t\t\t\tthis.deselect(this.selectedItem);\n\t\t\t}\n\t\t\tdojo.html.addClass(node, \"selected\");\n\t\t\tnode.scrollIntoView(false);\n\t\t\tthis.selectedItem = node;\n\t\t\tif(dojo.lang.isFunction(this.onSelect)) {\n\t\t\t\tthis.onSelect(this.getNodeEmail(email));\n\t\t\t}\n\t\t\tif(dojo.lang.isFunction(this.onSelectChange)) {\n\t\t\t\tthis.onSelectChange();\n\t\t\t}\n\t\t}","this":"jot.widget.JotPermissionsList"}}},"jot.widget.JotPermissionsList.deselect":{"_":{"meta":{"summary":"","parameters":{"email":{"type":""}},"src":"\t\tif(typeof email == \"number\") {\n\t\t\temail = this._emails[email];\n\t\t}\n\t\tvar node = this.getEmailNode(email);\n\t\tif(node) {\n\t\t\tdojo.html.removeClass(node, \"selected\");\n\t\t\tthis.selectedItem = null;\n\t\t\tif(dojo.lang.isFunction(this.onDeselect)) {\n\t\t\t\tthis.onDeselect(this.getNodeEmail(email));\n\t\t\t}\n\t\t\tif(dojo.lang.isFunction(this.onSelectChange)) {\n\t\t\t\tthis.onSelectChange();\n\t\t\t}\n\t\t}","this":"jot.widget.JotPermissionsList"}}},"jot.widget.JotPermissionsList.deselectAll":{"_":{"meta":{"summary":"","src":"\t\tif(this.selectedItem) {\n\t\t\tthis.deselect(this.selectedItem);\n\t\t}","this":"jot.widget.JotPermissionsList"}}},"jot.widget.JotPermissionsList.getEmailId":{"_":{"meta":{"summary":"","parameters":{"email":{"type":""}},"src":"\t\treturn this.widgetId + \"-\" + email.replace(\"@\", \"-_-at-_-\");","this":"jot.widget.JotPermissionsList"}}},"jot.widget.JotPermissionsList.getNodeEmail":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tif(dojo.lang.isString(node)) { return node; }\n\t\treturn node.id.substring(this.widgetId.length + 1).replace(\"-_-at-_-\", \"@\");","this":"jot.widget.JotPermissionsList"}}},"jot.widget.JotPermissionsList.getEmailNode":{"_":{"meta":{"summary":"","parameters":{"email":{"type":""}},"src":"\t\tif(!dojo.lang.isString(email)) { return email; }\n\t\treturn document.getElementById(this.getEmailId(email));","this":"jot.widget.JotPermissionsList"}}},"jot.widget.JotPermissionsList.hasEmail":{"_":{"meta":{"summary":"","parameters":{"email":{"type":""}},"src":"\t\treturn dojo.lang.inArray(this.getNodeEmail(email), this._emails);","this":"jot.widget.JotPermissionsList"}}},"jot.widget.JotPermissionsList.addEmail":{"_":{"meta":{"summary":"","parameters":{"email":{"type":""}},"src":"\t\tif(this.hasEmail(email)) {\n\t\t\tdojo.debug(\"Email\", email, \"already on the list\");\n\t\t\tif(!this.allowDuplicates) { return false; }\n\t\t}\n\t\tvar node = document.createElement(\"div\");\n\t\tnode.className = this.entryClassName;\n\t\tnode.id = this.getEmailId(email);\n\t\tvar a = document.createElement(\"a\");\n\t\ta.href = \"javascript:;\";\n\t\ta.innerHTML = \"del\";\n\t\ta.title = \"Remove this address\";\n\t\tnode.appendChild(a);\n\t\tvar b = document.createElement(\"strong\");\n\t\tb.appendChild(document.createTextNode(dojo.string.summary(email, this.displayMaxLength)));\n\t\tb.title = email;\n\t\tnode.appendChild(b);\n\t\tthis.domNode.appendChild(node);\n\t\tnode.scrollIntoView(false);\n\t\tdojo.fx.fade(node, 500, 0, 1);\n\t\tthis._emails.push(email);\n\t\treturn true;","this":"jot.widget.JotPermissionsList"}}},"jot.widget.JotPermissionsList.removeEmail":{"_":{"meta":{"summary":"","parameters":{"email":{"type":""}},"src":"\t\tvar node = this.getEmailNode(email);\n\t\temail = this.getNodeEmail(email);\n\t\tif(!node) {\n\t\t\tdojo.debug(\"no node for\", email);\n\t\t} else {\n\t\t\tdojo.debug(\"removing email\");\n\t\t\tvar idx = dojo.lang.find(email, this._emails);\n\t\t\tif(idx >= 0) {\n\t\t\t\tthis._emails.splice(idx, 1);\n\t\t\t} else {\n\t\t\t\tdojo.debug(\"not in the email list\", idx, this._emails);\n\t\t\t}\n\t\t\tif(node == this.selectedItem) {\n\t\t\t\tthis.selectedItem = null;\n\t\t\t\tif(dojo.lang.isFunction(this.onSelectChange)) {\n\t\t\t\t\tthis.onSelectChange();\n\t\t\t\t}\n\t\t\t}\n\t\t\tdojo.fx.fadeOut(node, 100, function() {\n\t\t\t\tdojo.html.removeNode(node);\n\t\t\t});\n\t\t\tif(dojo.lang.isFunction(this.onRemoveEmail)) {\n\t\t\t\tthis.onRemoveEmail(email);\n\t\t\t}\n\t\t}","this":"jot.widget.JotPermissionsList"}}},"jot.widget.JotPermissionsList.onRemoveEmail":{"_":{"meta":{"summary":"","parameters":{"email":{"type":""}},"src":"                                 dojo.debug(\"removing\", email);   ","this":"jot.widget.JotPermissionsList"}}},"jot.widget.JotPermissionsList.sort":{"_":{"meta":{"summary":"","parameters":{"sortFcn":{"type":""}},"src":"\t\tif(typeof sortFcn == \"function\") {\n\t\t\tthis._emails.sort(sortFcn);\n\t\t} else {\n\t\t\tthis._emails.sort();\n\t\t}\n\t\tfor(var i = 0; i < this._emails.length; i++) {\n\t\t\t\/\/this.domNode.appendChild(this.getEmailNode(this._emails[i]));\n\t\t}","this":"jot.widget.JotPermissionsList"}}},"jot.widget.JotPermissionsList.resetView":{"_":{"meta":{"summary":"","src":"\t\tif(this._emails.length) {\n\t\t\tthis.deselectAll();\n\t\t\tthis.domNode.scrollTop = 0;\n\t\t}","this":"jot.widget.JotPermissionsList"}}}}}},"dojo.widget.jot.JotQuickInstall":{"meta":{"requires":{"common":["dojo.xml.htmlUtil","dojo.widget.*","dojo.io.*","dojo.animation.*","dojo.fx.*"]},"methods":{"jot.widget.HTMLJotQuickInstall":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\tvar _this = this; \/\/ handy!\n\n\tthis.templatePath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/HTMLJotQuickInstall.html\");\n\tthis.templateCssPath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/HTMLJotQuickInstall.css\");\n\tthis.widgetType = \"JotQuickInstall\";\n\n\tthis.installURL = \"http:\/\/%{webspace}.jot.com\/xml\/cmd\/installPackage?method=pull&url=%{packageURL}&stage=confirm\";\n\tthis.checkNowURL = \"http:\/\/%{webspace}.jot.com\/?login=1\";\n\n\t\/\/ DOM nodes\n\tthis.domNode = null;\n\tthis.boxTitle = null;\n\tthis.form = null;\n\tthis.packageURL = null;\n\tthis.webspace = null;\n\tthis.checkNow = null;\n\tthis.installNow = null;\n\n\tthis.toggleVisible = function(e) {\n\t\tvar visible = this.domNode.style.display == \"block\";\n\t\tif( !visible ) {\n\t\t\tthis.domNode.style.display = \"block\";\n\t\t\tthis.form.reset();\n\t\t\tdojo.fx.fadeIn(this.domNode, 100, function() {\n\t\t\t\t_this.webspace.focus();\n\t\t\t\t_this.webspace.select();\n\t\t\t});\n\t\t} else {\n\t\t\tdojo.fx.fadeOut(this.domNode, 100, function() {\n\t\t\t\t_this.resetValues();\n\t\t\t\tdojo.xml.htmlUtil.setOpacity(_this.domNode, 0);\n\t\t\t\t_this.domNode.style.display = \"none\";\n\t\t\t});\n\t\t}\n\t}\n\n\tthis.resetValues = function(e) {\n\t\tthis.webspace.value = this.webspace.defaultValue;\n\t}\n\n\tthis.updateLinks = function(e) {\n\t\tif( dojo.text.trim(this.webspace.value).length > 0 ) {\n\t\t\tthis.checkNow.setAttribute(\"href\", dojo.text.paramString(this.checkNowURL, {webspace:dojo.text.trim(this.webspace.value)}));\n\t\t\tthis.installNow.setAttribute(\"href\", dojo.text.paramString(this.installURL, {\n\t\t\t\twebspace: dojo.text.trim(this.webspace.value),\n\t\t\t\tpackageURL: dojo.text.trim(this.packageURL.value)\n\t\t\t}));\n\t\t} else {\n\t\t\tthis.checkNow.removeAttribute(\"href\");\n\t\t\tthis.installNow.removeAttribute(\"href\");\n\t\t}\n\t}\n\n\tthis.sendInstall = function(e) {\n\t\te = dojo.event.browser.fixEvent(e);\n\t\tdojo.event.browser.stopEvent(e);\n\n\t\tvar url = dojo.text.paramString(this.installURL, {\n\t\t\twebspace: dojo.text.trim(this.webspace.value),\n\t\t\tpackageURL: dojo.text.trim(this.packageURL.value)\n\t\t});\n\t}\n\n\tthis.doNothing = function(e) {\n\t\te = dojo.event.browser.fixEvent(e);\n\t\tdojo.event.browser.stopEvent(e);\n\t\treturn false;\n\t}\n\n\tthis.fillInTemplate = function() {\n\t\tdojo.xml.htmlUtil.setOpacity(this.domNode, 0);\n\t\t\/\/ fixor defaultValue for IE\n\t\tif(dojo.render.html.ie) {\n\t\t\tthis.webspace.defaultValue = this.webspace.value;\n\t\t}\n\t}","this_variables":["templatePath","templateCssPath","widgetType","installURL","checkNowURL","domNode","boxTitle","form","packageURL","webspace","checkNow","installNow","toggleVisible","domNode.style.display","resetValues","webspace.value","updateLinks","sendInstall","doNothing","fillInTemplate","webspace.defaultValue"],"inherits":["dojo.widget.HtmlWidget"]}}},"jot.widget.HTMLJotQuickInstall.toggleVisible":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar visible = this.domNode.style.display == \"block\";\n\t\tif( !visible ) {\n\t\t\tthis.domNode.style.display = \"block\";\n\t\t\tthis.form.reset();\n\t\t\tdojo.fx.fadeIn(this.domNode, 100, function() {\n\t\t\t\t_this.webspace.focus();\n\t\t\t\t_this.webspace.select();\n\t\t\t});\n\t\t} else {\n\t\t\tdojo.fx.fadeOut(this.domNode, 100, function() {\n\t\t\t\t_this.resetValues();\n\t\t\t\tdojo.xml.htmlUtil.setOpacity(_this.domNode, 0);\n\t\t\t\t_this.domNode.style.display = \"none\";\n\t\t\t});\n\t\t}","this_variables":["domNode.style.display"]}}},"jot.widget.HTMLJotQuickInstall.resetValues":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tthis.webspace.value = this.webspace.defaultValue;","this_variables":["webspace.value"]}}},"jot.widget.HTMLJotQuickInstall.updateLinks":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif( dojo.text.trim(this.webspace.value).length > 0 ) {\n\t\t\tthis.checkNow.setAttribute(\"href\", dojo.text.paramString(this.checkNowURL, {webspace:dojo.text.trim(this.webspace.value)}));\n\t\t\tthis.installNow.setAttribute(\"href\", dojo.text.paramString(this.installURL, {\n\t\t\t\twebspace: dojo.text.trim(this.webspace.value),\n\t\t\t\tpackageURL: dojo.text.trim(this.packageURL.value)\n\t\t\t}));\n\t\t} else {\n\t\t\tthis.checkNow.removeAttribute(\"href\");\n\t\t\tthis.installNow.removeAttribute(\"href\");\n\t\t}"}}},"jot.widget.HTMLJotQuickInstall.sendInstall":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\te = dojo.event.browser.fixEvent(e);\n\t\tdojo.event.browser.stopEvent(e);\n\n\t\tvar url = dojo.text.paramString(this.installURL, {\n\t\t\twebspace: dojo.text.trim(this.webspace.value),\n\t\t\tpackageURL: dojo.text.trim(this.packageURL.value)\n\t\t});"}}},"jot.widget.HTMLJotQuickInstall.doNothing":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\te = dojo.event.browser.fixEvent(e);\n\t\tdojo.event.browser.stopEvent(e);\n\t\treturn false;"}}},"jot.widget.HTMLJotQuickInstall.fillInTemplate":{"_":{"meta":{"summary":"","src":"\t\tdojo.xml.htmlUtil.setOpacity(this.domNode, 0);\n\t\t\/\/ fixor defaultValue for IE\n\t\tif(dojo.render.html.ie) {\n\t\t\tthis.webspace.defaultValue = this.webspace.value;\n\t\t}","this_variables":["webspace.defaultValue"]}}}}}},"dojo.widget.jot.JotQuickInvite":{"meta":{"requires":{"common":["dojo.xml.htmlUtil","dojo.widget.*","dojo.io.*","dojo.fx.*","dojo.uri.*"]},"methods":{"jot.widget.HTMLJotQuickInvite":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\tvar _this = this; \/\/ handy!\n\n\tthis.templatePath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/HTMLJotQuickInvite.html\");\n\tthis.templateCssPath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/HTMLJotQuickInvite.css\");\n\tthis.widgetType = \"JotQuickInvite\";\n\n\t\/\/ Strings\n\tthis.submitText = null; \/\/ set by template\n\tthis.processingText = \"Processing...\";\n\tthis.addUserErrorText = \"An error occurred trying to invite the user. Please try again.\";\n\n\t\/\/ DOM nodes\n\tthis.toggle = null;\n\tthis.box = null;\n\tthis.boxTitle = null;\n\tthis.form = null;\n\tthis.email = null;\n\tthis.submitBtn = null;\n\tthis.statusBox = null;\n\t\/\/this.statusList = null;\n\tthis.statusBoxContent = null;\n\tthis.errorBox = null;\n\tthis.errorContents = null;\n\n\tthis.visible = false;\n\n\tvar errorEncountered = false;\n\tvar processing = false;\n\t\/\/ store the email text field value here (in case user changes, disabling field is better,\n\t\/\/ but there is focus bug in Firefox that makes it bad for the UI)\n\n\tthis.toggleVisible = function(e) {\n\t\t\/\/var visible = this.box.style.display == \"block\";\n\t\tif( !this.visible ) {\n\t\t\tvar width = document.documentElement.clientWidth\n\t\t\t\t|| document.body.clientWidth || 99999;\n\t\t\tthis.box.style.display = \"block\";\n\t\t\tthis.box.style.left = Math.min(width-this.box.offsetWidth,\n\t\t\t\tdojo.xml.htmlUtil.getAbsoluteX(this.toggle)) + \"px\";\n\t\t\tthis.box.style.top = dojo.xml.htmlUtil.getAbsoluteY(this.toggle) + \"px\";\n\t\t\tthis.form.reset();\n\t\t\tdojo.fx.fadeIn(this.box, 100, function() {\n\t\t\t\t_this.email.focus();\n\t\t\t\t_this.email.select();\n\t\t\t\t_this.visible = true;\n\t\t\t});\n\t\t} else {\n\t\t\tdojo.fx.fadeOut(this.box, 100, function() {\n\t\t\t\t_this.clearStatusMessages();\n\t\t\t\t_this.setErrorMessage();\n\t\t\t\t_this.resetValues();\n\t\t\t\tdojo.xml.htmlUtil.setOpacity(_this.box, 0);\n\t\t\t\t_this.box.style.display = \"none\";\n\t\t\t\t_this.visible = false;\n\t\t\t});\n\t\t}\n\t}\n\n\tthis.resetValues = function(e) {\n\t\tthis.submitBtn.value = this.submitText;\n\t\tthis.submitBtn.disabled = true;\n\t\tthis.email.value = this.email.defaultValue;\n\t\tdojo.xml.htmlUtil.removeClass(this.email, \"error\");\n\t}\n\n\tthis.setStatusMessage = function(msg) {\n\t\t\/*var li = document.createElement(\"li\");\n\t\tli.appendChild( document.createTextNode(msg) );\n\t\tthis.statusList.appendChild(li);*\/\n\t\tthis.statusBoxContent.innerHTML = msg;\n\n\t\tif( this.statusBox.style.display != \"block\" ) {\n\t\t\tthis.statusBox.style.display = \"block\";\n\t\t\tvar startPct = (this.form.offsetHeight - this.statusBox.offsetHeight - 5) \/ this.form.offsetHeight * 100;\n\t\t\tvar anim = new dojo.animation.Animation(new dojo.math.curves.Line([startPct], [100]), 250, 1);\n\t\t\tanim.onAnimate = function(e) {\n\t\t\t\t_this.statusBox.style.top = e.x + \"%\";\n\t\t\t}\n\t\t\tanim.play();\n\t\t}\n\t}\n\n\tthis.clearStatusMessages = function() {\n\t\tthis.statusBox.style.display = \"none\";\n\t\tthis.statusBox.style.top = \"0%\";\n\t\t\/*while(this.statusList.firstChild) {\n\t\t\tthis.statusList.removeChild(this.statusList.firstChild);\n\t\t}*\/\n\t}\n\n\tthis.setErrorMessage = function(msg) {\n\t\tvar visible = this.errorBox.style.display == \"block\";\n\n\t\tif( !msg || msg == \"\" ) {\n\t\t\terrorEncountered = false;\n\t\t\t\/\/ hide box\n\t\t\tif( visible ) {\n\t\t\t\tvar endPct = (this.form.offsetHeight - this.errorBox.offsetHeight - 5) \/ this.form.offsetHeight * 100;\n\t\t\t\tvar anim = new dojo.animation.Animation(new dojo.math.curves.Line([100], [endPct]), 100, 1);\n\t\t\t\tanim.onAnimate = function(e) {\n\t\t\t\t\t_this.errorBox.style.top = e.x + \"%\";\n\t\t\t\t}\n\t\t\t\tanim.onEnd = function(e) {\n\t\t\t\t\t_this.errorBox.style.display = \"none\";\n\t\t\t\t}\n\t\t\t\tanim.play();\n\t\t\t}\n\t\t} else {\n\t\t\terrorEncountered = true;\n\t\t\t\/\/ change value\n\t\t\twhile( this.errorContents.firstChild ) {\n\t\t\t\tthis.errorContents.removeChild(this.errorContents.firstChild);\n\t\t\t}\n\t\t\tthis.errorContents.appendChild( document.createTextNode(msg) );\n\n\t\t\tif( !visible ) {\n\t\t\t\tthis.errorBox.style.display = \"block\";\n\t\t\t\tvar startPct = (this.form.offsetHeight - this.errorBox.offsetHeight - 5) \/ this.form.offsetHeight * 100;\n\t\t\t\tvar anim = new dojo.animation.Animation(new dojo.math.curves.Line([startPct], [100]), 250, 1);\n\t\t\t\tanim.onAnimate = function(e) {\n\t\t\t\t\t_this.errorBox.style.top = e.x + \"%\";\n\t\t\t\t}\n\t\t\t\tanim.play();\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.emailKeyUp = function(e) {\n\t\tthis.checkButton(e);\n\t}\n\n\tthis.emailKeyPress = function(e) {\n\t\tif(!processing) {\n\t\t\tdojo.xml.htmlUtil.removeClass(_this.email, \"error\");\n\t\t}\n\t}\n\n\tthis.checkButton = function(e) {\n\t\tthis.submitBtn.disabled = processing\n\t\t\t|| dojo.string.trim(this.email.value) == dojo.string.trim(this.email.defaultValue)\n\t\t\t|| !( \/^(([\\s<]*)([^@\\s]+)@([^@\\s]+)\\.([^@\\s]+)([,\\s;><]*))+$\/.test(dojo.string.trim(this.email.value)) );\n\t}\n\n\tthis.sendInvite = function(e) {\n\t\te.preventDefault();\n\t\tif(this.submitBtn.disabled) { return; }\n\t\tprocessing = true;\n\n\t\t\/\/ \"Cheap\" processing UI\n\t\tthis.submitBtn.value = this.processingText;\n\t\tthis.submitBtn.disabled = true;\n\n\t\t\/\/ begin the process!\n\t\tvar email = dojo.string.trim(this.email.value);\n\t\t_this.setErrorMessage();\n\t\tprocessing = true;\n\t\tdojo.io.bind({\n\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/System\/Pages\/InviteSendMail\"),\n\t\t\tcontent: { email: email },\n\t\t\thandler: function(type, data, e) {\n\t\t\t\tif(type == \"load\") {\n\t\t\t\t\tvar response = data.match(\/<response>(.*)<\\\/response>\/i);\n\n\t\t\t\t\tif(response) {\n\t\t\t\t\t\t_this.setStatusMessage(response[1]);\n\t\t\t\t\t\t_this.finishProcessing();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this.setErrorMessage(_this.addUserErrorText);\n\t\t\t\t\t\t_this.finishProcessing();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t_this.setErrorMessage(_this.addUserErrorText);\n\t\t\t\t\t_this.finishProcessing();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tthis.finishProcessing = function() {\n\t\tprocessing = false;\n\t\tthis.submitBtn.value = this.submitText;\n\t\tif(errorEncountered) {\n\t\t} else {\n\t\t\tthis.resetValues();\n\t\t}\n\t\twindow.focus();\n\t\tthis.email.focus();\n\t\tthis.email.select();\n\t\tthis.checkButton();\n\t}\n\n\tthis.fillInTemplate = function() {\n\t\tthis.submitText = this.submitBtn.value;\n\t\tdojo.xml.htmlUtil.setOpacity(this.box, 0);\n\t\t\/\/ populate title\n\t\tfor(var i = 0; i < this.toggle.childNodes.length; i++) {\n\t\t\tthis.boxTitle.appendChild(this.toggle.childNodes.item(i).cloneNode(true));\n\t\t}\n\t\t\/\/ fixor defaultValue for IE\n\t\tif(dojo.render.html.ie) {\n\t\t\tthis.email.defaultValue = this.email.value;\n\t\t}\n\t\tdojo.event.connect(document.documentElement, \"onclick\", function(e) {\n\t\t\tif( dojo.xml.domUtil.isChildOf(e.target, _this.box) ) { return; }\n\t\t\tif(_this.visible) { _this.toggleVisible(); }\n\t\t});\n\t}\n\n\tthis.buildRendering = function(args, frag) {\n\t\tthis.nodeRef = frag[\"dojo:\"+this.widgetType.toLowerCase()][\"nodeRef\"];\n\t\tif(this.nodeRef.normalize) { this.nodeRef.normalize(); }\n\t\tthis.toggle = this.nodeRef;\n\t\tdojo.event.connect(this.toggle, \"onclick\", this, \"toggleVisible\");\n\t\tdojo.widget.buildAndAttachTemplate(this);\n\t\tdocument.body.appendChild(this.box);\n\t\tthis.fillInTemplate(args, frag);\n\t}","this_variables":["templatePath","templateCssPath","widgetType","submitText","processingText","addUserErrorText","toggle","box","boxTitle","form","email","submitBtn","statusBox","statusBoxContent","errorBox","errorContents","visible","toggleVisible","box.style.display","box.style.left","box.style.top","resetValues","submitBtn.value","submitBtn.disabled","email.value","setStatusMessage","statusBoxContent.innerHTML","statusBox.style.display","clearStatusMessages","statusBox.style.top","setErrorMessage","errorBox.style.display","emailKeyUp","emailKeyPress","checkButton","sendInvite","finishProcessing","fillInTemplate","email.defaultValue","buildRendering"],"inherits":["dojo.widget.HtmlWidget"]}}},"jot.widget.HTMLJotQuickInvite.toggleVisible":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tvar width = document.documentElement.clientWidth\n\t\t\t\t|| document.body.clientWidth || 99999;\n\t\t\tthis.box.style.display = \"block\";\n\t\t\tthis.box.style.left = Math.min(width-this.box.offsetWidth,\n\t\t\t\tdojo.xml.htmlUtil.getAbsoluteX(this.toggle)) + \"px\";\n\t\t\tthis.box.style.top = dojo.xml.htmlUtil.getAbsoluteY(this.toggle) + \"px\";\n\t\t\tthis.form.reset();\n\t\t\tdojo.fx.fadeIn(this.box, 100, function() {\n\t\t\t\t_this.email.focus();\n\t\t\t\t_this.email.select();\n\t\t\t\t_this.visible = true;\n\t\t\t});\n\t\t} else {\n\t\t\tdojo.fx.fadeOut(this.box, 100, function() {\n\t\t\t\t_this.clearStatusMessages();\n\t\t\t\t_this.setErrorMessage();\n\t\t\t\t_this.resetValues();\n\t\t\t\tdojo.xml.htmlUtil.setOpacity(_this.box, 0);\n\t\t\t\t_this.box.style.display = \"none\";\n\t\t\t\t_this.visible = false;\n\t\t\t});\n\t\t}","this_variables":["box.style.display","box.style.left","box.style.top"]}}},"jot.widget.HTMLJotQuickInvite.resetValues":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tthis.submitBtn.value = this.submitText;\n\t\tthis.submitBtn.disabled = true;\n\t\tthis.email.value = this.email.defaultValue;\n\t\tdojo.xml.htmlUtil.removeClass(this.email, \"error\");","this_variables":["submitBtn.value","submitBtn.disabled","email.value"]}}},"jot.widget.HTMLJotQuickInvite.setStatusMessage":{"_":{"meta":{"summary":"","parameters":{"msg":{"type":""}},"src":"\t\tif( this.statusBox.style.display != \"block\" ) {\n\t\t\tthis.statusBox.style.display = \"block\";\n\t\t\tvar startPct = (this.form.offsetHeight - this.statusBox.offsetHeight - 5) \/ this.form.offsetHeight * 100;\n\t\t\tvar anim = new dojo.animation.Animation(new dojo.math.curves.Line([startPct], [100]), 250, 1);\n\t\t\tanim.onAnimate = function(e) {\n\t\t\t\t_this.statusBox.style.top = e.x + \"%\";\n\t\t\t}\n\t\t\tanim.play();\n\t\t}","this_variables":["statusBoxContent.innerHTML","statusBox.style.display"]}}},"jot.widget.HTMLJotQuickInvite.clearStatusMessages":{"_":{"meta":{"summary":"","src":"\t\tthis.statusBox.style.display = \"none\";\n\t\tthis.statusBox.style.top = \"0%\";\n\t\t\/*while(this.statusList.firstChild) {\n\t\t\tthis.statusList.removeChild(this.statusList.firstChild);\n\t\t}*\/","this_variables":["statusBox.style.display","statusBox.style.top"]}}},"jot.widget.HTMLJotQuickInvite.setErrorMessage":{"_":{"meta":{"summary":"","parameters":{"msg":{"type":""}},"src":"\t\tvar visible = this.errorBox.style.display == \"block\";\n\n\t\tif( !msg || msg == \"\" ) {\n\t\t\terrorEncountered = false;\n\t\t\t\/\/ hide box\n\t\t\tif( visible ) {\n\t\t\t\tvar endPct = (this.form.offsetHeight - this.errorBox.offsetHeight - 5) \/ this.form.offsetHeight * 100;\n\t\t\t\tvar anim = new dojo.animation.Animation(new dojo.math.curves.Line([100], [endPct]), 100, 1);\n\t\t\t\tanim.onAnimate = function(e) {\n\t\t\t\t\t_this.errorBox.style.top = e.x + \"%\";\n\t\t\t\t}\n\t\t\t\tanim.onEnd = function(e) {\n\t\t\t\t\t_this.errorBox.style.display = \"none\";\n\t\t\t\t}\n\t\t\t\tanim.play();\n\t\t\t}\n\t\t} else {\n\t\t\terrorEncountered = true;\n\t\t\t\/\/ change value\n\t\t\twhile( this.errorContents.firstChild ) {\n\t\t\t\tthis.errorContents.removeChild(this.errorContents.firstChild);\n\t\t\t}\n\t\t\tthis.errorContents.appendChild( document.createTextNode(msg) );\n\n\t\t\tif( !visible ) {\n\t\t\t\tthis.errorBox.style.display = \"block\";\n\t\t\t\tvar startPct = (this.form.offsetHeight - this.errorBox.offsetHeight - 5) \/ this.form.offsetHeight * 100;\n\t\t\t\tvar anim = new dojo.animation.Animation(new dojo.math.curves.Line([startPct], [100]), 250, 1);\n\t\t\t\tanim.onAnimate = function(e) {\n\t\t\t\t\t_this.errorBox.style.top = e.x + \"%\";\n\t\t\t\t}\n\t\t\t\tanim.play();\n\t\t\t}\n\t\t}","this_variables":["errorBox.style.display"]}}},"jot.widget.HTMLJotQuickInvite.emailKeyUp":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tthis.checkButton(e);"}}},"jot.widget.HTMLJotQuickInvite.emailKeyPress":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif(!processing) {\n\t\t\tdojo.xml.htmlUtil.removeClass(_this.email, \"error\");\n\t\t}"}}},"jot.widget.HTMLJotQuickInvite.checkButton":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tthis.submitBtn.disabled = processing\n\t\t\t|| dojo.string.trim(this.email.value) == dojo.string.trim(this.email.defaultValue)\n\t\t\t|| !( \/^(([\\s<]*)([^@\\s]+)@([^@\\s]+)\\.([^@\\s]+)([,\\s;><]*))+$\/.test(dojo.string.trim(this.email.value)) );","this_variables":["submitBtn.disabled"]}}},"jot.widget.HTMLJotQuickInvite.sendInvite":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\te.preventDefault();\n\t\tif(this.submitBtn.disabled) { return; }\n\t\tprocessing = true;\n\n\t\t\/\/ \"Cheap\" processing UI\n\t\tthis.submitBtn.value = this.processingText;\n\t\tthis.submitBtn.disabled = true;\n\n\t\t\/\/ begin the process!\n\t\tvar email = dojo.string.trim(this.email.value);\n\t\t_this.setErrorMessage();\n\t\tprocessing = true;\n\t\tdojo.io.bind({\n\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/System\/Pages\/InviteSendMail\"),\n\t\t\tcontent: { email: email },\n\t\t\thandler: function(type, data, e) {\n\t\t\t\tif(type == \"load\") {\n\t\t\t\t\tvar response = data.match(\/<response>(.*)<\\\/response>\/i);\n\n\t\t\t\t\tif(response) {\n\t\t\t\t\t\t_this.setStatusMessage(response[1]);\n\t\t\t\t\t\t_this.finishProcessing();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this.setErrorMessage(_this.addUserErrorText);\n\t\t\t\t\t\t_this.finishProcessing();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t_this.setErrorMessage(_this.addUserErrorText);\n\t\t\t\t\t_this.finishProcessing();\n\t\t\t\t}\n\t\t\t}\n\t\t});","this_variables":["submitBtn.value","submitBtn.disabled"]}}},"jot.widget.HTMLJotQuickInvite.finishProcessing":{"_":{"meta":{"summary":"","src":"\t\tprocessing = false;\n\t\tthis.submitBtn.value = this.submitText;\n\t\tif(errorEncountered) {\n\t\t} else {\n\t\t\tthis.resetValues();\n\t\t}\n\t\twindow.focus();\n\t\tthis.email.focus();\n\t\tthis.email.select();\n\t\tthis.checkButton();","this_variables":["submitBtn.value"]}}},"jot.widget.HTMLJotQuickInvite.fillInTemplate":{"_":{"meta":{"summary":"","src":"\t\tthis.submitText = this.submitBtn.value;\n\t\tdojo.xml.htmlUtil.setOpacity(this.box, 0);\n\t\t\/\/ populate title\n\t\tfor(var i = 0; i < this.toggle.childNodes.length; i++) {\n\t\t\tthis.boxTitle.appendChild(this.toggle.childNodes.item(i).cloneNode(true));\n\t\t}\n\t\t\/\/ fixor defaultValue for IE\n\t\tif(dojo.render.html.ie) {\n\t\t\tthis.email.defaultValue = this.email.value;\n\t\t}\n\t\tdojo.event.connect(document.documentElement, \"onclick\", function(e) {\n\t\t\tif( dojo.xml.domUtil.isChildOf(e.target, _this.box) ) { return; }\n\t\t\tif(_this.visible) { _this.toggleVisible(); }\n\t\t});","this_variables":["submitText","email.defaultValue"]}}},"jot.widget.HTMLJotQuickInvite.buildRendering":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tthis.nodeRef = frag[\"dojo:\"+this.widgetType.toLowerCase()][\"nodeRef\"];\n\t\tif(this.nodeRef.normalize) { this.nodeRef.normalize(); }\n\t\tthis.toggle = this.nodeRef;\n\t\tdojo.event.connect(this.toggle, \"onclick\", this, \"toggleVisible\");\n\t\tdojo.widget.buildAndAttachTemplate(this);\n\t\tdocument.body.appendChild(this.box);\n\t\tthis.fillInTemplate(args, frag);","this_variables":["toggle"]}}}}}},"dojo.widget.jot.JotRenamePage":{"meta":{"requires":{"common":["dojo.widget.InlineEditBox","dojo.io.cookie","dojo.uri.*"]},"methods":{"jot.widget.HTMLJotRenamePage":{"_":{"meta":{"summary":"","src":"\tdojo.widget.html.InlineEditBox.call(this);\r\n\tvar _this = this;\r\n\tvar url = dojo.uri.joinPath(djConfig.wikiRootPath, \"\/_\/cmd\/rename\");\r\n\r\n\tthis.widgetType = \"JotRenamePage\";\r\n\r\n\tvar oldName;\r\n\tvar newName;\r\n\r\n\tthis.onSave = function(newValue, oldValue) {\r\n\t\tnewName = newValue;\r\n\t\toldName = oldValue;\r\n\t}\r\n\r\n\tthis.onUndo = function(value) {\r\n\t\toldName = value;\r\n\t\tnewName = undefined;\r\n\t}\r\n\r\n\tthis.oldBuildRendering = this.buildRendering;\r\n\r\n\tthis.buildRendering = function(args, frag) {\r\n\t\tvar nodeRef = frag[\"dojo:\"+this.widgetType.toLowerCase()][\"nodeRef\"];\r\n\t\tvar first = nodeRef.firstChild;\r\n\t\t\/\/ to get around the TOC bug\r\n\t\tif(first && first.tagName && first.tagName.toLowerCase() == \"a\") {\r\n\t\t\tnodeRef.innerHTML = first.innerHTML;\r\n\t\t}\r\n\t\tthis.oldBuildRendering(args, frag);\r\n\t}\r\n\r\n\tthis.fillInTemplate = function(args, frag) {\r\n\t\tvar urlName = location.href.split(\"#\")[0].match(\/\\\/([^\\\/]+)$\/)[1];\r\n\t\tif(dojo.io.cookie.getCookie(unescape(urlName)) == \"renamed\") {\r\n\t\t\tdojo.io.cookie.deleteCookie(urlName);\r\n\t\t\tthis.editing = true;\r\n\t\t\tdojo.graphics.htmlEffects.highlight(this.editable, dojo.xml.domUtil.hex2rgb(\"#ffc\"), 700, 500, function(node) {\r\n\t\t\t\tnode.backgroundColor = \"\";\r\n\t\t\t\t_this.editing = false;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tthis.finishEdit = function(e) {\r\n\t\tif(!this.cancelEdit(e)) { return; }\r\n\t\tnewName = newName.replace(\/\\?\/g, \"\");\r\n\t\tvar newPath = Wiki.pagePath.replace(\/\\\/([^\\\/]+)$\/, \"\/\"+newName).replace(\/\\\/{2,}\/g, \"\/\");\r\n\r\n\t\t\/\/ make the call!\r\n\t\tdojo.io.bind({\r\n\t\t\turl: url,\r\n\t\t\tcontent: {oldPage:Wiki.pagePath, newPage:newPath},\r\n\t\t\tmimetype: \"text\/xml\",\r\n\t\t\thandler: function(type, xml, e) {\r\n\t\t\t\tif(type == \"load\") {\r\n\t\t\t\t\tif(e.responseText.indexOf(\"<error\") == -1) {\r\n\t\t\t\t\t\tdojo.io.cookie.setCookie(escape(newName), \"renamed\", 0);\r\n\t\t\t\t\t\tlocation.replace(decodeURI(newName));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_this.undo();\r\n\t\t\t\t\t\t_this.beginEdit();\r\n\t\t\t\t\t\tvar errorMsg = dojo.string.trim(e.responseText.match(\/<message>(.+)<\\\/message>\/i)[1]);\r\n\t\t\t\t\t\talert(\"Error, \" + errorMsg + \".\\nPlease try again.\");\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_this.undo();\r\n\t\t\t\t\t_this.beginEdit();\r\n\t\t\t\t\talert(\"Unable to rename the page.\\nPlease try again.\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r","this_variables":["widgetType","onSave","onUndo","oldBuildRendering","buildRendering","fillInTemplate","editing","finishEdit"],"inherits":["dojo.widget.html.InlineEditBox"]}}},"jot.widget.HTMLJotRenamePage.onSave":{"_":{"meta":{"summary":"","parameters":{"newValue":{"type":""},"oldValue":{"type":""}},"src":"\t\tnewName = newValue;\r\n\t\toldName = oldValue;\r"}}},"jot.widget.HTMLJotRenamePage.onUndo":{"_":{"meta":{"summary":"","parameters":{"value":{"type":""}},"src":"\t\toldName = value;\r\n\t\tnewName = undefined;\r"}}},"jot.widget.HTMLJotRenamePage.buildRendering":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tvar nodeRef = frag[\"dojo:\"+this.widgetType.toLowerCase()][\"nodeRef\"];\r\n\t\tvar first = nodeRef.firstChild;\r\n\t\t\/\/ to get around the TOC bug\r\n\t\tif(first && first.tagName && first.tagName.toLowerCase() == \"a\") {\r\n\t\t\tnodeRef.innerHTML = first.innerHTML;\r\n\t\t}\r\n\t\tthis.oldBuildRendering(args, frag);\r"}}},"jot.widget.HTMLJotRenamePage.fillInTemplate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tvar urlName = location.href.split(\"#\")[0].match(\/\\\/([^\\\/]+)$\/)[1];\r\n\t\tif(dojo.io.cookie.getCookie(unescape(urlName)) == \"renamed\") {\r\n\t\t\tdojo.io.cookie.deleteCookie(urlName);\r\n\t\t\tthis.editing = true;\r\n\t\t\tdojo.graphics.htmlEffects.highlight(this.editable, dojo.xml.domUtil.hex2rgb(\"#ffc\"), 700, 500, function(node) {\r\n\t\t\t\tnode.backgroundColor = \"\";\r\n\t\t\t\t_this.editing = false;\r\n\t\t\t});\r\n\t\t}\r","this_variables":["editing"]}}},"jot.widget.HTMLJotRenamePage.finishEdit":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif(!this.cancelEdit(e)) { return; }\r\n\t\tnewName = newName.replace(\/\\?\/g, \"\");\r\n\t\tvar newPath = Wiki.pagePath.replace(\/\\\/([^\\\/]+)$\/, \"\/\"+newName).replace(\/\\\/{2,}\/g, \"\/\");\r\n\r\n\t\t\/\/ make the call!\r\n\t\tdojo.io.bind({\r\n\t\t\turl: url,\r\n\t\t\tcontent: {oldPage:Wiki.pagePath, newPage:newPath},\r\n\t\t\tmimetype: \"text\/xml\",\r\n\t\t\thandler: function(type, xml, e) {\r\n\t\t\t\tif(type == \"load\") {\r\n\t\t\t\t\tif(e.responseText.indexOf(\"<error\") == -1) {\r\n\t\t\t\t\t\tdojo.io.cookie.setCookie(escape(newName), \"renamed\", 0);\r\n\t\t\t\t\t\tlocation.replace(decodeURI(newName));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_this.undo();\r\n\t\t\t\t\t\t_this.beginEdit();\r\n\t\t\t\t\t\tvar errorMsg = dojo.string.trim(e.responseText.match(\/<message>(.+)<\\\/message>\/i)[1]);\r\n\t\t\t\t\t\talert(\"Error, \" + errorMsg + \".\\nPlease try again.\");\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_this.undo();\r\n\t\t\t\t\t_this.beginEdit();\r\n\t\t\t\t\talert(\"Unable to rename the page.\\nPlease try again.\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r"}}}}}},"dojo.widget.jot.JotSelfRegister":{"meta":{"requires":{"common":["dojo.xml.htmlUtil","dojo.widget.*","dojo.io.*","dojo.graphics.htmlEffects","dojo.uri.*"]},"methods":{"jot.widget.HTMLJotSelfRegister":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\tvar _this = this; \/\/ handy!\n\n\tthis.templatePath = dojo.uri.dojoUri(\"..\/jot\/widget\/templates\/HTMLJotSelfRegister.html\");\n\tthis.templateCssPath = dojo.uri.dojoUri(\"..\/jot\/widget\/templates\/HTMLJotSelfRegister.css\");\n\tthis.widgetType = \"JotSelfRegister\";\n\n\t\/\/ Strings\n\tthis.submitText = null; \/\/ set by template\n\tthis.processingText = \"Processing...\";\n\tthis.addUserErrorText = \"An error occurred trying to invite the user. Please try again.\";\n\n\t\/\/ DOM nodes\n\tthis.toggle = null;\n\tthis.box = null;\n\tthis.boxTitle = null;\n\tthis.form = null;\n\tthis.email = null;\n\tthis.password = null;\n\tthis.password2 = null;\n\tthis.submitBtn = null;\n\tthis.errorBox = null;\n\tthis.errorContents = null;\n\n\tthis.visible = false;\n\n\tvar errorEncountered = false;\n\tvar processing = false;\n\t\/\/ store the email text field value here (in case user changes, disabling field is better,\n\t\/\/ but there is focus bug in Firefox that makes it bad for the UI)\n\tvar theEmail = \"\"; \n\n\tthis.toggleVisible = function(e) {\n\t\t\/\/var visible = this.box.style.display == \"block\";\n\t\tif( !this.visible ) {\n\t\t\tvar width = document.documentElement.clientWidth\n\t\t\t\t|| document.body.clientWidth || 99999;\n\t\t\tthis.box.style.display = \"block\";\n\t\t\tthis.box.style.left = Math.min(width-this.box.offsetWidth,\n\t\t\t\tdojo.xml.htmlUtil.getAbsoluteX(this.toggle)) + \"px\";\n\t\t\tthis.box.style.top = dojo.xml.htmlUtil.getAbsoluteY(this.toggle) + \"px\";\n\t\t\tthis.form.reset();\n\t\t\tdojo.graphics.htmlEffects.fadeIn(this.box, 100, function() {\n\t\t\t\t_this.email.focus();\n\t\t\t\t_this.email.select();\n\t\t\t\t_this.visible = true;\n\t\t\t});\n\t\t} else {\n\t\t\tdojo.graphics.htmlEffects.fadeOut(this.box, 100, function() {\n\t\t\t\t_this.setErrorMessage();\n\t\t\t\tdojo.xml.htmlUtil.setOpacity(_this.box, 0);\n\t\t\t\t_this.box.style.display = \"none\";\n\t\t\t\t_this.visible = false;\n\t\t\t});\n\t\t}\n\t}\n\n\tthis.setErrorMessage = function(msg) {\n\t\tvar visible = this.errorBox.style.display == \"block\";\n\n\t\tif( !msg || msg == \"\" ) {\n\t\t\terrorEncountered = false;\n\t\t\tdojo.xml.htmlUtil.removeClass(_this.email, \"error\");\n\t\t\t\/\/ hide box\n\t\t\tif( visible ) {\n\t\t\t\tvar endPct = (this.form.offsetHeight - this.errorBox.offsetHeight - 5) \/ this.form.offsetHeight * 100;\n\t\t\t\tvar anim = new dojo.animation.Animation(new dojo.math.curves.Line([100], [endPct]), 100, 1);\n\t\t\t\tanim.onAnimate = function(e) {\n\t\t\t\t\t_this.errorBox.style.top = e.x + \"%\";\n\t\t\t\t}\n\t\t\t\tanim.onEnd = function(e) {\n\t\t\t\t\t_this.errorBox.style.display = \"none\";\n\t\t\t\t}\n\t\t\t\tanim.play();\n\t\t\t}\n\t\t} else {\n\t\t\terrorEncountered = true;\n\t\t\tdojo.xml.htmlUtil.addClass(_this.email, \"error\");\n\t\t\t\/\/ change value\n\t\t\tthis.errorContents.innerHTML = msg;\n\n\t\t\tif( !visible ) {\n\t\t\t\tthis.errorBox.style.display = \"block\";\n\t\t\t\tvar startPct = (this.form.offsetHeight - this.errorBox.offsetHeight - 5) \/ this.form.offsetHeight * 100;\n\t\t\t\tvar anim = new dojo.animation.Animation(new dojo.math.curves.Line([startPct], [100]), 250, 1);\n\t\t\t\tanim.onAnimate = function(e) {\n\t\t\t\t\t_this.errorBox.style.top = e.x + \"%\";\n\t\t\t\t}\n\t\t\t\tanim.play();\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.checkButton = function() {\n\t\tthis.submitBtn.disabled = processing || errorEncountered\n\t\t\t|| dojo.text.trim(this.email.value) == dojo.text.trim(this.email.defaultValue)\n\t\t\t|| !( \/^(([\\s<]*)([^@\\s]+)@([^@\\s]+)\\.([^@\\s]+)([,\\s;><]*))+$\/.test(dojo.text.trim(this.email.value)) )\n\t\t\t|| this.password.value != this.password2.value || dojo.text.trim(this.password.value).length == 0\n\t\t\t|| dojo.text.trim(this.password2.value).length == 0;\n\t}\n\n\tthis.validateUser = function(e) {\n\t\tthis.checkButton();\n\n\t\tdojo.io.bind({\n\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/System\/Pages\/CheckUserExists\"),\n\t\t\tcontent: { email: this.email.value },\n\t\t\thandler: function(type, data, e) {\n\t\t\t\tif(type == \"load\") {\n\t\t\t\t\tif(data.indexOf(\"false\") > -1) {\n\t\t\t\t\t\t_this.setErrorMessage();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this.setErrorMessage(\"User already exists.\");\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t_this.setErrorMessage(\"Error. Try again later.\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tthis.onSubmit = function(e) {\n\t\tif(this.submitBtn.disabled) {\n\t\t\te.preventDefault();\n\t\t} else {\n\t\t\tthis.form.action = dojo.uri.joinPath(djConfig.wikiRootPath, this.form.action);\n\t\t}\n\t}\n\n\tthis.emailKeyPress = function(e) {\n\t\tthis.setErrorMessage();\n\t}\n\n\tthis.fillInTemplate = function() {\n\t\tthis.submitText = this.submitBtn.value;\n\t\tdojo.xml.htmlUtil.setOpacity(this.box, 0);\n\t\t\/\/ populate title\n\t\tfor(var i = 0; i < this.toggle.childNodes.length; i++) {\n\t\t\tthis.boxTitle.appendChild(this.toggle.childNodes.item(i).cloneNode(true));\n\t\t}\n\t\t\/\/ fixor defaultValue for IE\n\t\tif(dojo.render.html.ie) {\n\t\t\tthis.email.defaultValue = this.email.value;\n\t\t}\n\t\tdojo.event.connect(document.documentElement, \"onclick\", function(e) {\n\t\t\tif( dojo.xml.domUtil.isChildOf(e.target, _this.box) ) { return; }\n\t\t\tif(_this.visible) { _this.toggleVisible(); }\n\t\t});\n\t}\n\n\tthis.buildRendering = function(args, frag) {\n\t\tthis.nodeRef = frag[\"dojo:\"+this.widgetType.toLowerCase()][\"nodeRef\"];\n\t\tif(this.nodeRef.normalize) { this.nodeRef.normalize(); }\n\t\tthis.toggle = this.nodeRef;\n\t\tdojo.event.connect(this.toggle, \"onclick\", this, \"toggleVisible\");\n\t\tdojo.widget.buildAndAttachTemplate(this);\n\t\tdocument.body.appendChild(this.box);\n\t\tthis.fillInTemplate(args, frag);\n\t}","this_variables":["templatePath","templateCssPath","widgetType","submitText","processingText","addUserErrorText","toggle","box","boxTitle","form","email","password","password2","submitBtn","errorBox","errorContents","visible","toggleVisible","box.style.display","box.style.left","box.style.top","setErrorMessage","errorBox.style.display","errorContents.innerHTML","checkButton","submitBtn.disabled","validateUser","onSubmit","form.action","emailKeyPress","fillInTemplate","email.defaultValue","buildRendering"],"inherits":["dojo.widget.HtmlWidget"]}}},"jot.widget.HTMLJotSelfRegister.toggleVisible":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t\tvar width = document.documentElement.clientWidth\n\t\t\t\t|| document.body.clientWidth || 99999;\n\t\t\tthis.box.style.display = \"block\";\n\t\t\tthis.box.style.left = Math.min(width-this.box.offsetWidth,\n\t\t\t\tdojo.xml.htmlUtil.getAbsoluteX(this.toggle)) + \"px\";\n\t\t\tthis.box.style.top = dojo.xml.htmlUtil.getAbsoluteY(this.toggle) + \"px\";\n\t\t\tthis.form.reset();\n\t\t\tdojo.graphics.htmlEffects.fadeIn(this.box, 100, function() {\n\t\t\t\t_this.email.focus();\n\t\t\t\t_this.email.select();\n\t\t\t\t_this.visible = true;\n\t\t\t});\n\t\t} else {\n\t\t\tdojo.graphics.htmlEffects.fadeOut(this.box, 100, function() {\n\t\t\t\t_this.setErrorMessage();\n\t\t\t\tdojo.xml.htmlUtil.setOpacity(_this.box, 0);\n\t\t\t\t_this.box.style.display = \"none\";\n\t\t\t\t_this.visible = false;\n\t\t\t});\n\t\t}","this_variables":["box.style.display","box.style.left","box.style.top"]}}},"jot.widget.HTMLJotSelfRegister.setErrorMessage":{"_":{"meta":{"summary":"","parameters":{"msg":{"type":""}},"src":"\t\tvar visible = this.errorBox.style.display == \"block\";\n\n\t\tif( !msg || msg == \"\" ) {\n\t\t\terrorEncountered = false;\n\t\t\tdojo.xml.htmlUtil.removeClass(_this.email, \"error\");\n\t\t\t\/\/ hide box\n\t\t\tif( visible ) {\n\t\t\t\tvar endPct = (this.form.offsetHeight - this.errorBox.offsetHeight - 5) \/ this.form.offsetHeight * 100;\n\t\t\t\tvar anim = new dojo.animation.Animation(new dojo.math.curves.Line([100], [endPct]), 100, 1);\n\t\t\t\tanim.onAnimate = function(e) {\n\t\t\t\t\t_this.errorBox.style.top = e.x + \"%\";\n\t\t\t\t}\n\t\t\t\tanim.onEnd = function(e) {\n\t\t\t\t\t_this.errorBox.style.display = \"none\";\n\t\t\t\t}\n\t\t\t\tanim.play();\n\t\t\t}\n\t\t} else {\n\t\t\terrorEncountered = true;\n\t\t\tdojo.xml.htmlUtil.addClass(_this.email, \"error\");\n\t\t\t\/\/ change value\n\t\t\tthis.errorContents.innerHTML = msg;\n\n\t\t\tif( !visible ) {\n\t\t\t\tthis.errorBox.style.display = \"block\";\n\t\t\t\tvar startPct = (this.form.offsetHeight - this.errorBox.offsetHeight - 5) \/ this.form.offsetHeight * 100;\n\t\t\t\tvar anim = new dojo.animation.Animation(new dojo.math.curves.Line([startPct], [100]), 250, 1);\n\t\t\t\tanim.onAnimate = function(e) {\n\t\t\t\t\t_this.errorBox.style.top = e.x + \"%\";\n\t\t\t\t}\n\t\t\t\tanim.play();\n\t\t\t}\n\t\t}","this_variables":["errorBox.style.display","errorContents.innerHTML"]}}},"jot.widget.HTMLJotSelfRegister.checkButton":{"_":{"meta":{"summary":"","src":"\t\tthis.submitBtn.disabled = processing || errorEncountered\n\t\t\t|| dojo.text.trim(this.email.value) == dojo.text.trim(this.email.defaultValue)\n\t\t\t|| !( \/^(([\\s<]*)([^@\\s]+)@([^@\\s]+)\\.([^@\\s]+)([,\\s;><]*))+$\/.test(dojo.text.trim(this.email.value)) )\n\t\t\t|| this.password.value != this.password2.value || dojo.text.trim(this.password.value).length == 0\n\t\t\t|| dojo.text.trim(this.password2.value).length == 0;","this_variables":["submitBtn.disabled"]}}},"jot.widget.HTMLJotSelfRegister.validateUser":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tthis.checkButton();\n\n\t\tdojo.io.bind({\n\t\t\turl: dojo.uri.joinPath(djConfig.wikiRootPath, \"\/System\/Pages\/CheckUserExists\"),\n\t\t\tcontent: { email: this.email.value },\n\t\t\thandler: function(type, data, e) {\n\t\t\t\tif(type == \"load\") {\n\t\t\t\t\tif(data.indexOf(\"false\") > -1) {\n\t\t\t\t\t\t_this.setErrorMessage();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this.setErrorMessage(\"User already exists.\");\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t_this.setErrorMessage(\"Error. Try again later.\");\n\t\t\t\t}\n\t\t\t}\n\t\t});"}}},"jot.widget.HTMLJotSelfRegister.onSubmit":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif(this.submitBtn.disabled) {\n\t\t\te.preventDefault();\n\t\t} else {\n\t\t\tthis.form.action = dojo.uri.joinPath(djConfig.wikiRootPath, this.form.action);\n\t\t}","this_variables":["form.action"]}}},"jot.widget.HTMLJotSelfRegister.emailKeyPress":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tthis.setErrorMessage();"}}},"jot.widget.HTMLJotSelfRegister.fillInTemplate":{"_":{"meta":{"summary":"","src":"\t\tthis.submitText = this.submitBtn.value;\n\t\tdojo.xml.htmlUtil.setOpacity(this.box, 0);\n\t\t\/\/ populate title\n\t\tfor(var i = 0; i < this.toggle.childNodes.length; i++) {\n\t\t\tthis.boxTitle.appendChild(this.toggle.childNodes.item(i).cloneNode(true));\n\t\t}\n\t\t\/\/ fixor defaultValue for IE\n\t\tif(dojo.render.html.ie) {\n\t\t\tthis.email.defaultValue = this.email.value;\n\t\t}\n\t\tdojo.event.connect(document.documentElement, \"onclick\", function(e) {\n\t\t\tif( dojo.xml.domUtil.isChildOf(e.target, _this.box) ) { return; }\n\t\t\tif(_this.visible) { _this.toggleVisible(); }\n\t\t});","this_variables":["submitText","email.defaultValue"]}}},"jot.widget.HTMLJotSelfRegister.buildRendering":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tthis.nodeRef = frag[\"dojo:\"+this.widgetType.toLowerCase()][\"nodeRef\"];\n\t\tif(this.nodeRef.normalize) { this.nodeRef.normalize(); }\n\t\tthis.toggle = this.nodeRef;\n\t\tdojo.event.connect(this.toggle, \"onclick\", this, \"toggleVisible\");\n\t\tdojo.widget.buildAndAttachTemplate(this);\n\t\tdocument.body.appendChild(this.box);\n\t\tthis.fillInTemplate(args, frag);","this_variables":["toggle"]}}}}}},"dojo.widget.jot.JotSticky":{"meta":{"requires":{"common":["dojo.xml.htmlUtil","dojo.widget.*","dojo.io.*","dojo.animation.*","dojo.graphics.htmlEffects"]},"methods":{"StickyManager.init":{"_":{"meta":{"summary":"","src":"\t\tcreate.href = \"#\";\r\n\t\tcreate.innerHTML = \"Create\";\r\n\t\tdocument.body.insertBefore(create, document.body.firstChild);\r\n\t\tdojo.event.connect(create, \"onclick\", function() {\r\n\t\t\t_this.createSticky();\r\n\t\t});\r\n\t\t\/\/ FIXME: This should work, have alex see\r\n\t\t\/\/dojo.event.connect(create, \"onclick\", this, \"createSticky\");\r\n\t\tfor(var id in ckObj) {\r\n\t\t\t\/\/ create sticky\r\n\t\t\t\/\/ restore it with info\r\n\t\t}\r"}}},"StickyManager.createSticky":{"_":{"meta":{"summary":"","src":"\t\tvar s = dojo.widget.fromScript(\"JotSticky\", {}, document.body, \"last\");\r\n\t\tdojo.event.connect(s, \"onDropSticky\", this, \"updateStatus\");\r"}}},"StickyManager.updateStatus":{"_":{"meta":{"summary":"","parameters":{"sticky":{"type":""}},"src":"\t\tck[sticky.id] = sticky.getInfo();\r\n\t\tdojo.io.cookie.setObjectCookie(ckName, ck, 90);\r"}}},"jot.widget.HTMLJotSticky.getInfo":{"_":{"meta":{"summary":"","src":"\t\treturn \"...\";\r"}}},"jot.widget.HTMLJotSticky.setInfo":{"_":{"meta":{"summary":"","parameters":{"infoStr":{"type":""}},"src":""}}},"jot.widget.HTMLJotSticky.onDropSticky":{"_":{"meta":{"summary":"","src":""}}},"jot.widget.HTMLJotSticky.initDrag":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tdojo.event.connect(document, \"onmousemove\", this, \"onDrag\");\r\n\t\tdojo.event.connect(document, \"onmouseup\", this, \"onDrop\");\r\n\t\tdojo.event.connect(document.body, \"onselectstart\", this, \"stopSelect\");\r\n\t\toffsetX = e.clientX - this.sticky.offsetLeft;\r\n\t\toffsetY = e.clientY - this.sticky.offsetTop;\r\n\t\te.preventDefault();\r"}}},"jot.widget.HTMLJotSticky.onDrag":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tthis.sticky.style.left = (e.clientX - offsetX) + \"px\";\r\n\t\tthis.sticky.style.top = (e.clientY - offsetY) + \"px\";\r\n\t\tif(!isFaded) {\r\n\t\t\tdojo.xml.htmlUtil.setOpacity(this.sticky, 0.4);\r\n\t\t\tisFaded = true;\r\n\t\t}\r","this_variables":["sticky.style.left","sticky.style.top"]}}},"jot.widget.HTMLJotSticky.onDrop":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tdojo.event.disconnect(document, \"onmouseup\", this, \"onDrop\");\r\n\t\tdojo.event.disconnect(document.body, \"onselectstart\", this, \"stopSelect\");\r\n\t\tdojo.graphics.htmlEffects.fadeIn(this.sticky, 100);\r\n\t\tisFaded = false;\r"}}},"jot.widget.HTMLJotSticky.windowShade":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif (this.body.style.display == \"none\") {\r\n\t\t\tthis.body.style.display = \"block\";\r\n\t\t\tthis.sticky.style.height = savedHeight;\r\n\t\t} else {\r\n\t\t\tthis.body.style.display = \"none\";\r\n\t\t\tsavedHeight = this.sticky.style.height;\r\n\t\t\tthis.sticky.style.height = \"auto\";\r\n\t\t}\r","this_variables":["body.style.display","sticky.style.height"]}}},"jot.widget.HTMLJotSticky.stopSelect":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\te.preventDefault();\r"}}},"jot.widget.HTMLJotSticky.fadeSticky":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tdojo.graphics.htmlEffects.fadeOut(this.sticky, 100, this, \"hideSticky\");\r"}}},"jot.widget.HTMLJotSticky.hideSticky":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tthis.sticky.style.display = \"none\";\r","this_variables":["sticky.style.display"]}}},"jot.widget.HTMLJotSticky.initResize":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tdojo.event.connect(document, \"onmousemove\", this, \"onResize\");\r\n\t\tdojo.event.connect(document, \"onmouseup\", this, \"endResize\");\r\n\t\tdojo.event.connect(document.body, \"onselectstart\", this, \"stopSelect\");\r"}}},"jot.widget.HTMLJotSticky.onResize":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tthis.sticky.style.width = (e.clientX - this.sticky.offsetLeft) + \"px\";\r\n\t\tthis.sticky.style.height = (e.clientY - this.sticky.offsetTop) + \"px\";\r","this_variables":["sticky.style.width","sticky.style.height"]}}},"jot.widget.HTMLJotSticky.endResize":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tdojo.event.disconnect(document, \"onmousemove\", this, \"onResize\");\r\n\t\tdojo.event.disconnect(document.body, \"onselectstart\", this, \"stopSelect\");\r"}}},"jot.widget.HTMLJotSticky.fillInTemplate":{"_":{"meta":{"summary":"","src":"\t\tthis.id = dojo.xml.htmlUtil.generateID();\r\n\t\tthis.sticky.id = this.id;\r","this_variables":["id","sticky.id"]}}},"jot.widget.HTMLJotSticky.buildRendering":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tthis.nodeRef = frag[\"dojo:\"+this.widgetType.toLowerCase()][\"nodeRef\"];\r\n\t\tif(this.nodeRef.normalize) { this.nodeRef.normalize(); }\r\n\r\n\t\tdojo.widget.buildAndAttachTemplate(this);\r\n\r\n\t\tthis.fillInTemplate(args, frag);\r"}}},"jot.widget.HTMLJotSticky":{"_":{"meta":{"inherits":["dojo.widget.HtmlWidget"]}}}}}},"dojo.widget.jot.JotTable":{"meta":{"requires":{"common":["dojo.lang.*","dojo.dnd.*","dojo.xml.Parse","dojo.fx.*","dojo.widget.Toolbar","dojo.widget.ColorPalette","dojo.widget.Menu2","dojo.string.Builder","dojo.undo.Manager"]},"methods":{"jot.widget.JotTable":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\r\n\r\n\tthis.instanceNum = jot.widget.JotTable.instanceNum ? jot.widget.JotTable.instanceNum+1 : 1;\r\n\tjot.widget.JotTable.instanceNum = this.instanceNum;\r\n\r\n\tif ( dojo.render.html.ie )\r\n\t{\r\n\t\tthis.sortButton = '<td width=\"1%\"><div style=\"position: relative; top: -1px; display: block; padding-right: 7px;\"><a class=\"stdbutton\" dojoAttachPoint=\"sortButton\" href=\"javascript:void(0);\">&nbsp;&nbsp;Sort<\/a><\/div><\/td>';\r\n\t}\r\n\telse\r\n\t{\r\n\t\tthis.sortButton = '<td width=\"1%\"><div style=\"display: block; padding-bottom: 2px; padding-right: 15px;\"><a class=\"stdbutton\" dojoAttachPoint=\"sortButton\" href=\"javascript:void(0);\">Sort<\/a><\/div><\/td>';\r\n\t}\r\n\r\n\tthis.templatePath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/JotTable.html\");\r\n\tthis.templateCssPath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/JotTable.css\");\r\n\r\n\tthis.widgetType = \"JotTable\";\r\n\r\n\tthis.mouseOverTextDivs = new Array(); \/\/array of floaters that have been set to -1 z-index when under mouse \r\n\tthis.editOverflowArray = new Array(); \/\/array of cells removed when editing on IE and innerHTML for Gecko\r\n\tthis.floatersByCol     = new Array(); \r\n\tthis.floatersByRow     = new Array();\r\n\tthis.backgroundDivs    = new Array();\r\n\tthis.biggerThanNumColArray = new Array();\r\n\r\n\t\/\/DOM nodes\r\n\tthis.cellInput    = null;\r\n\tthis.layoutTable  = null;\r\n\tthis.rowHeaderCol = null;\r\n\tthis.sheetCol     = null;\r\n\tthis.colHeaderRow = null;\r\n\tthis.cornerCube   = null;\r\n\tthis.colHeadersTD = null;\r\n\tthis.colHeaders   = null;\r\n\tthis.sheetRow     = null;\r\n\tthis.rowHeadersTD = null;\r\n\tthis.rowHeaders   = null;\r\n\tthis.sheetCell    = null;\r\n\tthis.sheetFrame   = null;\r\n\tthis.sheetDiv     = null;\r\n\tthis.colResizer   = null;\r\n\tthis.rowResizer   = null;\r\n\tthis.editCellSizer= null;\r\n\r\n\t\/\/table state vars\r\n\tthis.inFormula     = false;\r\n\tthis.inMultiSelect = false;\r\n\tthis.replicating   = false;\r\n\tthis.editing       = false;\r\n\tthis.editFromMouse = false;\r\n\tthis.mouseDown     = false;\r\n\tthis.ieRepeat      = false;\r\n\tthis.inSort        = false;\r\n\tthis.inFilter      = false;\r\n\r\n\t\/\/constants used to handle ie repeating key problem\r\n\tthis.NO_REPEATING   = 0;\r\n\tthis.REPEATING      = 1;\r\n\tthis.DONE_REPEATING = 2;\r\n\r\n\t\/\/sheet bounds\r\n\tthis.MAX_COLS = 254;\r\n\tthis.MAX_ROWS = 65535;\r\n\r\n\t\/\/permision\r\n\tthis.writePerm  = true;\r\n\tthis.deletePerm = true;\r\n\r\n\t\/\/properties\r\n\tthis.editMargin = 4; \/\/used to determine how many pixel margin until expanding into next cell when editing\r\n\tthis.useFormulaBar      = true;\r\n\tthis.colHeaderTimeStamp = 0;\r\n\tthis.defaultColWidth    = 100;\r\n\tthis.defaultRowHeight   = 25;\r\n\tthis.sheetRowPXHeight   = dojo.render.html.ie ? \"19px\" : \"25px\"; \r\n\tthis.minRowHeight       = dojo.render.html.ie ? 20 : 21;\r\n\tthis.topOfColHeaders    = 0;\r\n\tthis.heightOfColHeaders = 20;\r\n\tthis.topOfSheet         = this.topOfColHeaders + this.heightOfColHeaders;\r\n\tthis.widthOfRowHeaders = 30;\r\n\tthis.scrollBarOffset    = 17;\r\n\tthis.scrollMargin       = 10; \/\/used as the distance from the edge of the sheet window that auto scrolling\r\n\t\t\t\t\t\t\t\t  \/\/happens when in multiSelect or replication\r\n\r\n\tthis.selectedCellBorder  = \"3px solid black\";\r\n\tthis.selectedCellPadding = \"0 0 0 0\";\r\n\tthis.selectedCellPaddingSingle = \"0\";\r\n\r\n\tthis.headerBackgroundColor = \"#EFEBDE\";\r\n\tthis.cellBorderColor = \"#CDCDCD\";\r\n\tthis.cellBorder  = \"1px solid \" + this.cellBorderColor;\r\n\tthis.cellPadding = \"2px 2px 2px 2px\";\r\n\tthis.cellPaddingSingle = \"2px\";\r\n\r\n\tthis.editBorder  = \"1px solid black\";\r\n\tthis.editPadding = \"2px 2px 2px 2px\";\r\n\r\n\tthis.formulaBorder  = \"2px dotted black\";\r\n\tthis.formulaPadding = \"1px 1px 1px 1px\";\r\n\r\n\tthis.fxImg        = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/img\/fx.gif\");\r\n\tthis.extraDataImg = \"url(\"+dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/img\/cell_extradata_mark.gif\")+\")\";\r\n\r\n\tthis.topPage = \"\";\r\n\t\r\n\tthis.rootPath = djConfig != null ? djConfig.wikiRootPath : \"\/\";\r\n\r\n\t\/\/Constants\r\n\tthis.DOWN  = \"d\";\r\n\tthis.UP    = \"u\";\r\n\tthis.LEFT  = \"l\";\r\n\tthis.RIGHT = \"r\"\r\n\tthis.ENTER = \"n\"\r\n\tthis.ESC   = \"e\"\r\n\tthis.MULTI_DOWN  = \"md\";\r\n\tthis.MULTI_UP    = \"mu\";\r\n\tthis.MULTI_LEFT  = \"ml\"\r\n\tthis.MULTI_RIGHT = \"mr\"\r\n\r\n\tthis.ERROR   = -99;\r\n\tthis.TEXT    = 1;\r\n\tthis.NUMBER  = 2;\r\n\tthis.FORMULA = 3;\r\n\tthis.MONEY   = 4;\r\n\tthis.PERCENT = 5;\r\n\tthis.DATE    = 6;\r\n\tthis.TIME    = 7;\r\n\tthis.DATE_TIME   = 8;\r\n\tthis.EXPONENTIAL = 9;\r\n\tthis.BOOLEAN = 10;\r\n\r\n\tthis.RESIZE  = 11;\r\n\tthis.SORT    = 12;\r\n\tthis.BGCOLOR = 13;\r\n\tthis.CELL_ALIGN = 14;\r\n\r\n\tthis.MAX_EXPONENTIAL_DIGITS = 4;\r\n\r\n\t\/\/these values are set in resizeSheetWindow and dynamicly change\r\n\t\/\/as the user resizes the browser window\r\n\t\/\/this.numberOfCols = 20;\r\n\t\/\/this.numberOfRows = 40;\r\n\t\/\/this.sheetWidth  = this.numberOfCols * this.defaultColWidth;\r\n\t\/\/this.sheetHeight = this.numberOfRows * this.defaultRowHeight;\r\n\t\/\/this.widthOfSheetWindow = 400;\r\n\t\/\/this.heightOfSheetWindow = 400;\r","this_variables":["instanceNum","sortButton","templatePath","templateCssPath","widgetType","mouseOverTextDivs","editOverflowArray","floatersByCol","floatersByRow","backgroundDivs","biggerThanNumColArray","cellInput","layoutTable","rowHeaderCol","sheetCol","colHeaderRow","cornerCube","colHeadersTD","colHeaders","sheetRow","rowHeadersTD","rowHeaders","sheetCell","sheetFrame","sheetDiv","colResizer","rowResizer","editCellSizer","inFormula","inMultiSelect","replicating","editing","editFromMouse","mouseDown","ieRepeat","inSort","inFilter","NO_REPEATING","REPEATING","DONE_REPEATING","MAX_COLS","MAX_ROWS","writePerm","deletePerm","editMargin","useFormulaBar","colHeaderTimeStamp","defaultColWidth","defaultRowHeight","sheetRowPXHeight","minRowHeight","topOfColHeaders","heightOfColHeaders","topOfSheet","widthOfRowHeaders","scrollBarOffset","scrollMargin","selectedCellBorder","selectedCellPadding","selectedCellPaddingSingle","headerBackgroundColor","cellBorderColor","cellBorder","cellPadding","cellPaddingSingle","editBorder","editPadding","formulaBorder","formulaPadding","fxImg","extraDataImg","topPage","rootPath","DOWN","UP","LEFT","RIGHT","ENTER","ESC","MULTI_DOWN","MULTI_UP","MULTI_LEFT","MULTI_RIGHT","ERROR","TEXT","NUMBER","FORMULA","MONEY","PERCENT","DATE","TIME","DATE_TIME","EXPONENTIAL","BOOLEAN","RESIZE","SORT","BGCOLOR","CELL_ALIGN","MAX_EXPONENTIAL_DIGITS","rowHeaderCol.style.width","sheetCol.style.width","colHeaderRow.style.height","colHeaderRow.style.width","colHeadersTD.style.height","colHeaders.style.height","rowHeadersTD.style.width","rowHeaders.style.width","rowResizer.style.width","colResizer.style.height","cellInput.style.backgroundColor","cellInput.innerHTML","cornerCube.style.backgroundColor","cornerCube.style.width","cornerCube.style.height","sheetCell.style.width","sheetCell.style.height","sheetFrame.style.height","sheetFrame.style.width","hiliteBtn","foreColorBtn","currentToolbar","currentToolbar.domNode.id","foreColorDialog","backColorDialog","currentToolbar","currentToolbar.domNode.id","foreColorDialog","backColorDialog","currentToolbar","currentToolbar.domNode.id","foreColorDialog","backColorDialog","currentToolbar","currentToolbar.domNode.id","foreColorDialog","backColorDialog","currentToolbar","currentToolbar.domNode.id","foreColorDialog","backColorDialog","formulaBar.add","topOfSheet","colMenu","sheetMenu","rowMenu","rowResizer.style.left","colResizer.style.top","processNewText.NEW_TEXT","processNewText.DATA_TYPE","processNewText.FORMULA_BAR_TEXT","processNewText.SUB_DATA_TYPE","resizeMargin","editCellSizer.style.fontSize","editCellSizer.getWidth","innerHTML","style.fontWeight","style.fontStyle","undoManager","undoManager.inNestedTransaction","topUndoManager","dp","cellDialog","formulaBar.add","topOfSheet","colMenu","sheetMenu","rowMenu","rowResizer.style.left","colResizer.style.top","processNewText.NEW_TEXT","processNewText.DATA_TYPE","processNewText.FORMULA_BAR_TEXT","processNewText.SUB_DATA_TYPE","resizeMargin","editCellSizer.style.fontSize","editCellSizer.getWidth","innerHTML","style.fontWeight","style.fontStyle","undoManager","undoManager.inNestedTransaction","topUndoManager","dp","cellDialog","selectedColHeader","selectedRowHeader","selectedCell","selectedCellCol","selectedCellRow","selectedCellDI","mouseOverCell","mouseOverCellCol","mouseOverCellRow","editCell.style.visibility","mouseDown","selectType","msSelectedCellBackground","sheetHeight","sheetWidth","filterRowNum","mouseOverTextDivs","editOverflowArray","floatersByCol","floatersByRow","backgroundDivs","biggerThanNumColArray","lastRefreshArgs","inFilter","inSort","colHeaders.innerHTML","rowHeaders.innerHTML","protoHeaderColTag","protoColHeaderCell","rowHeaders.style.height","protoRowHeaderStart","protoRowHeaderMain","protoRowHeaderEnd","protoSheetColTag","protoSheetRow","activeMS","formulaMS","editCell","editCell.style.visibility","editCell.contentEditable","editCell.src","editCell.scrolling","editCell.frameBorder","editCell.style.position","editCell.style.top","editCell.style.left","editCell.style.width","editCell.style.height","mouseDown","extraDataTimeoutId","mouseDown","editFromMouse","selectedCell.style.padding","selectedCell.style.border","selectedCell","inMultiSelect","multiSelectKeep","selectedCellDI","selectedCellCol","selectedCellRow","selectedColHeader","selectedRowHeader","editCell.style.top","editCell.style.left","editCell.style.width","blockKeyEvents","ieRepeat","preventDefaultKeyBinding","ieRepeat","preventDefaultKeyBinding","preventDefaultKeyBinding","inFormulaMouseAdd","processFormulaMS.oldRange","preventDefaultKeyBinding","inFormulaMouseAdd","processFormulaMS.oldRange","preventDefaultKeyBinding","inFormulaMouseAdd","processFormulaMS.oldRange","preventDefaultKeyBinding","inFormulaMouseAdd","processFormulaMS.oldRange","preventDefaultKeyBinding","inFormulaMouseAdd","processFormulaMS.oldRange","preventDefaultKeyBinding","inFormulaMouseAdd","processFormulaMS.oldRange","preventDefaultKeyBinding","inFormulaMouseAdd","processFormulaMS.oldRange","preventDefaultKeyBinding","inFormulaMouseAdd","processFormulaMS.oldRange","preventDefaultKeyBinding","inFormulaMouseAdd","processFormulaMS.oldRange","preventDefaultKeyBinding","inFormulaMouseAdd","processFormulaMS.oldRange","preventDefaultKeyBinding","inFormulaMouseAdd","processFormulaMS.oldRange","preventDefaultKeyBinding","inFormulaMouseAdd","processFormulaMS.oldRange","preventDefaultKeyBinding","inFormulaMouseAdd","processFormulaMS.oldRange","preventDefaultKeyBinding","inFormulaMouseAdd","processFormulaMS.oldRange","preventDefaultKeyBinding","inFormulaMouseAdd","processFormulaMS.oldRange","preventDefaultKeyBinding","inFormulaMouseAdd","processFormulaMS.oldRange","formulaBar.add","formulaBar.preLength","formulaBar.add","editCell.innerHTML","editCell.contentWindow.document.body.innerHTML","multiSelectKeep","multiSelectKeep","multiSelectKeep","multiSelectKeep","multiSelectKeep","multiSelectKeep","multiSelectKeep","multiSelectKeep","multiSelectKeep","multiSelectKeep","multiSelectKeep","editing","editFromMouse","inFormula","editCell.style.visibility","editCell.innerHTML","editMargin","editCell.style.width","editCell.contentWindow.document.body.innerHTML","editCell.contentWindow.document.body.style.textAlign","editCell.contentWindow.document.body.style.fontWeight","editCell.contentWindow.document.body.style.fontStyle","editCell.contentWindow.document.body.style.textDecoration","editCell.contentWindow.document.body.style.color","editCell.style.top","editCell.style.left","editCellSizer.innerHTML","editCell.style.visibility","editOverflowArray.length","editing","inFormula","inFormulaMouseAdd","editCellSizer.innerHTML","editCellSizer.innerHTML","editCell.contentWindow.document.body.style.textAlign","editCell.style.width","extraDataTimeoutId","cellDialog.parentTable","cellDialog.topPage","cellDialog.triggerCell","cellDialog.rowIndex","cellDialog.colIndex","mouseOverCell","mouseOverCellCol","mouseOverCellRow","extraDataTimeoutId","mouseOverTextDivs.length","mouseOverTextDivs.rowNum","selectedCellDI","selectedCellDI","selectedCellDI","colHeadersTable.style.width","sheet.style.width","rowHeadersTable.style.height","sheet.style.height","table.processFormulaMS.oldRange","table.inFormulaMouseAdd","selectType","selectType","sheet.style.cursor","colHeaderTimeStamp","tempHeader","resizeParts","resizeStartLoc","colResizer.style.left","colResizer.style.visibility","rowResizer.style.top","rowResizer.style.visibility","colResizer.style.left","rowResizer.style.top","colResizer.style.visibility","rowResizer.style.visibility","resizeParts","colHeadersTable.style.width","rowHeadersTable.style.height","sheet.style.width","topOfSheet","widthOfSheetWindow","heightOfSheetWindow","numberOfCols","sheetWidth","numberOfRows","sheetHeight","numRowsInPage","rowResizer.style.width","colResizer.style.height","layoutTable.style.width","sheetCol.style.width","colHeaderRow.style.width","colHeadersTD.style.width","colHeaders.style.width","sheetRow.style.height","sheetRow.style.width","rowHeadersTD.style.height","rowHeaders.style.height","sheetCell.style.width","sheetCell.style.height","sheetFrame.style.width","sheetFrame.style.height","resizeSheetWindow.inGeckoCallback","sheetWidth","sheetHeight","sheetWidth","colHeadersTable.style.width","rowHeadersTable.style.height","filterRowNum","reLabelRowHeader.lastRowIndex","reLabelRowHeader.lastLabel","colHeaders.scrollLeft","rowHeaders.scrollTop","status.innerHTML","clearStatusAnim","status.innerHTML","inFormula","formulaBar.value"],"inherits":["dojo.widget.HtmlWidget"],"protovariables":{"clearStatusAnim":""}}}},"this.editCellSizer.getWidth":{"_":{"meta":{"summary":"","parameters":{"html":{"type":""},"di":{"type":""}},"src":"\t\t\tthis.innerHTML = html;\r\n\r\n\t\t\t\/\/need to take into account cell bold and italic for sizing to be correct\r\n\t\t\tif (di && di.fontWeight )\r\n\t\t\t{\r\n\t\t\t\tthis.style.fontWeight = di.fontWeight;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.style.fontWeight = \"normal\"; \r\n\t\t\t}\r\n\r\n\t\t\tif (di && di.fontStyle )\r\n\t\t\t{\r\n\t\t\t\tthis.style.fontStyle = di.fontStyle;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.style.fontStyle = \"normal\";\r\n\t\t\t}\r\n\r\n\t\t\treturn this.offsetWidth;\r","this_variables":["innerHTML","style.fontWeight","style.fontStyle"]}}},"this.undoManager.inNestedTransaction":{"_":{"meta":{"summary":"","src":"\t\t\t\tif ( this._currentManager._parent != this || undoingTransaction )\r\n\t\t\t\t{\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r"}}},"setFormulaBarText":{"_":{"meta":{"summary":"","parameters":{"tempNum":{"type":""}},"src":"\t\t\t\tformulaBarText = \"$\" + tempNum;\r\n\t\t\t\tif ( tempNum < 0 )\r\n\t\t\t\t{\r\n\t\t\t\t\tnegative = true;\r\n\t\t\t\t\tformulaBarText = \"-\" + formulaBarText.replace(\"-\", \"\");\r\n\t\t\t\t}\r"}}},"di.shrinkToFit":{"_":{"meta":{"summary":"","src":"                                       table.shrinkGeneralToFit(cell, di, data);     ","parameters":{"text":{"type":""},"num":{"type":""},"data":{"type":""}}}}},"jot.widget.JotTable.fillInTemplate":{"_":{"meta":{"summary":"","src":"\t\tthis.resizeSheetWindow(true);\r\n\r\n\t\t\/\/size the layout rows and columns\r\n\t\tthis.rowHeaderCol.style.width = this.widthOfRowHeaders + \"px\";\r\n\t\tthis.sheetCol.style.width = this.widthOfSheetWindow + \"px\";\r\n\t\tthis.colHeaderRow.style.height = this.heightOfColHeaders + \"px\";\r\n\t\tthis.colHeaderRow.style.width= this.widthOfSheetWindow  + this.widthOfRowHeaders + \"px\";\r\n\t\tthis.colHeadersTD.style.height = this.heightOfColHeaders + \"px\";\r\n\t\tthis.colHeaders.style.height = this.heightOfColHeaders + \"px\";\r\n\t\tthis.rowHeadersTD.style.width = this.widthOfRowHeaders + \"px\"\r\n\t\tthis.rowHeaders.style.width = this.widthOfRowHeaders + -2 + \"px\"\r\n\r\n\t\t\/\/size the column and row resizers\r\n\t\tthis.rowResizer.style.width  = this.widthOfSheetWindow + this.widthOfRowHeaders - this.scrollBarOffset + \"px\";\r\n\t\tthis.colResizer.style.height = this.heightOfSheetWindow + this.heightOfColHeaders - this.scrollBarOffset + \"px\";\r\n\r\n\t\t\/\/create the formula bar\r\n\t\tif ( this.useFormulaBar )\r\n\t\t{\r\n\t\t\tthis.cellInput.style.backgroundColor = this.headerBackgroundColor;\r\n\t\t\tthis.cellInput.innerHTML = '<img src=\"'+this.fxImg+'\"\/><input type=\"text\" id=\"formulaBar'+this.instanceNum+'\" size=\"100\" autocomplete=\"off\"\/>&nbsp;&nbsp;&nbsp;<span id=\"status'+this.instanceNum+'\" class=\"status\";\"><\/span>';\r\n\t\t}\r\n\r\n\t\t\/\/setup the corner cube\r\n\t\tthis.cornerCube.style.backgroundColor = this.headerBackgroundColor;\r\n\t\tthis.cornerCube.style.width = this.widthOfRowHeaders + \"px\"\r\n\t\tthis.cornerCube.style.height = this.heightOfColHeaders + \"px\";\r\n\t\tdojo.event.connect(this.cornerCube, \"onmousedown\", this, \"cornerSelect\");\r\n\t\tdojo.event.connect(this.cornerCube, \"onmouseup\", this, \"resetMouseSelect\");\r\n\r\n\r\n\t\t\/\/create the sheet iframe\r\n\t\tthis.sheetCell.style.width = this.widthOfSheetWindow + \"px\";\r\n\t\tthis.sheetCell.style.height = this.heightOfSheetWindow + \"px\";\r\n\t\tif ( dojo.render.html.ie )\r\n\t\t{\r\n\t\t\tthis.sheetFrame.style.height = (this.heightOfSheetWindow + this.scrollBarOffset-1) + \"px\";\r\n\t\t\tthis.sheetFrame.style.width =  (this.widthOfSheetWindow + this.scrollBarOffset-1) + \"px\";\r\n\t\t}\r\n\t\telse \r\n\t\t{\r\n\t\t\tthis.sheetFrame.style.height = (this.heightOfSheetWindow + this.scrollBarOffset) + \"px\";\r\n\t\t\tthis.sheetFrame.style.width =  (this.widthOfSheetWindow + this.scrollBarOffset) + \"px\";\r\n\t\t}\r\n\r\n\t\tthis.createToolbar();\r\n\r\n\t\tthis.boldBtn      = this.currentToolbar.getItem(\"bold\");\r\n\t\tthis.italicBtn    = this.currentToolbar.getItem(\"italic\");\r\n\t\tthis.underlineBtn = this.currentToolbar.getItem(\"underline\");\r\n\t\tthis.hiliteBtn    = this.currentToolbar.getItem(\"hilitecolor\");\r\n\t\tthis.justifyBtn   = this.currentToolbar.getItem(\"justify\");\r\n\t\tthis.foreColorBtn = this.currentToolbar.getItem(\"forecolor\");\r\n\r\n\t\tdojo.event.connect(this.sortButton, \"onclick\", this, \"sort\");\r\n\t\t\/\/this.sheetFrame.onload = dojo.lang.hitch(this, this.setHandlers); \r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.createToolbar":{"_":{"meta":{"summary":"","src":"\t\tthis.currentToolbar = dojo.widget.createWidget(\"toolbarContainer\", {}, this.toolbarContainer);\r\n\t\tthis.currentToolbar.domNode.id = \"toolbarContainer\";\r\n\t\tvar tb = dojo.widget.createWidget(\"toolbar\");\r\n\t\tthis.currentToolbar.addChild(tb);\r\n\r\n\t\tdojo.widget.html.ColorPalette.prototype.palettes[\"Jot8x5\"] =\r\n                       [[\"000000\", \"993300\", \"333300\", \"003300\", \"003366\", \"000080\", \"333399\", \"333333\"],\r\n                       [\"800000\", \"FF6600\", \"808000\", \"008000\", \"008080\", \"0000FF\", \"666699\", \"808080\"],\r\n                       [\"FF0000\", \"FF9900\", \"99CC00\", \"339966\", \"33CCCC\", \"3366FF\", \"800080\", \"969696\"],\r\n                       [\"FF00FF\", \"FFCC00\", \"FFFF00\", \"00FF00\", \"00FF00\", \"00CCFF\", \"993366\", \"C0C0C0\"],\r\n                       [\"FF99CC\", \"FFCC99\", \"FFFF99\", \"CCFFCC\", \"CCFFFF\", \"99CCFF\", \"CC99FF\", \"FFFFFF\"]];\r\n\t\t\r\n\r\n\t\tthis.foreColorDialog = dojo.widget.createWidget(\"ToolbarColorDialog\", \r\n\t\t\t\t\t\t\t\t\t\t{toggleItem: true,\tname: \"forecolor\", icon: this.cmdImg(\"forecolor\"),\tpalette: \"Jot8x5\"});\r\n\t\tthis.backColorDialog = dojo.widget.createWidget(\"ToolbarColorDialog\", \r\n\t\t\t\t\t\t\t\t\t\t{toggleItem: true,\tname: \"hilitecolor\", icon: this.cmdImg(\"hilitecolor\"),\tpalette: \"Jot8x5\"});\r\n\t\tvar commands = [\r\n\t\t\t{values: [\"undo\", \"redo\"], toggleItem: false},\r\n\t\t\t{values: [\"bold\", \"italic\", \"underline\"], toggleItem: true},\r\n\t\t\t{values: [this.foreColorDialog,\tthis.backColorDialog]},\r\n\t\t\t{values: [\"justifyleft\",\"justifycenter\", \"justifyright\"], \r\n\t\t\t\t\t\tname: \"justify\", buttonGroup: true, preventDeselect: false} ];\r\n\r\n\t\tvar table = this;\r\n\t\tfor(var x = 0; x < commands.length; x++) \r\n\t\t{\r\n\t\t\tvar set = commands[x];\r\n\t\t\tvar values = set.values;\r\n\t\t\tvar btnGroup = [set.name];\r\n\t\t\tfor(var y = 0; y < values.length; y++) \r\n\t\t\t{\r\n\t\t\t\tif(typeof values[y]\t== \"string\") \r\n\t\t\t\t{\r\n\t\t\t\t\tvar cmd = values[y];\r\n\t\t\t\t\tif(set.buttonGroup)\t\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tbtnGroup.push(this.cmdImg(cmd));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar btn = tb.addChild(this.cmdImg(cmd), null, {name:cmd, toggleItem:set.toggleItem});\r\n\t\t\t\t\t\tif (btn) \r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( values[y] == \"undo\" || values[y] == \"redo\" )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tdojo.event.connect(btn, \"onClick\", this, \"handleUndoRedo\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tdojo.event.connect(btn,\t\"onChangeSelect\",\tthis,\t\"execControl\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse \r\n\t\t\t\t{\r\n\t\t\t\t\tvar btn = tb.addChild(values[y]);\r\n\t\t\t\t\tdojo.event.connect(btn,\t\"onSetValue\", this, values[y].getName());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(set.buttonGroup && btnGroup.length > 1) \r\n\t\t\t{\r\n\t\t\t\tvar btn = tb.addChild(btnGroup,\tnull, {defaultButton:set.defaultButton});\r\n\t\t\t\tif (btn) \r\n\t\t\t\t{\r\n\t\t\t\t\tdojo.event.connect(btn,\t\"onChangeSelect\", this, \"execControl\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(x + 1 !=\tcommands.length && !(tb.children[tb.children.length-1] instanceof dojo.widget.html.ToolbarSeparator)) \r\n\t\t\t{\r\n\t\t\t\ttb.addChild(\"|\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.currentToolbar.resizeTo(281);\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.toggleItem":{"_":{"meta":{"summary":"","src":"\t\tthis.currentToolbar = dojo.widget.createWidget(\"toolbarContainer\", {}, this.toolbarContainer);\r\n\t\tthis.currentToolbar.domNode.id = \"toolbarContainer\";\r\n\t\tvar tb = dojo.widget.createWidget(\"toolbar\");\r\n\t\tthis.currentToolbar.addChild(tb);\r\n\r\n\t\tdojo.widget.html.ColorPalette.prototype.palettes[\"Jot8x5\"] =\r\n                       [[\"000000\", \"993300\", \"333300\", \"003300\", \"003366\", \"000080\", \"333399\", \"333333\"],\r\n                       [\"800000\", \"FF6600\", \"808000\", \"008000\", \"008080\", \"0000FF\", \"666699\", \"808080\"],\r\n                       [\"FF0000\", \"FF9900\", \"99CC00\", \"339966\", \"33CCCC\", \"3366FF\", \"800080\", \"969696\"],\r\n                       [\"FF00FF\", \"FFCC00\", \"FFFF00\", \"00FF00\", \"00FF00\", \"00CCFF\", \"993366\", \"C0C0C0\"],\r\n                       [\"FF99CC\", \"FFCC99\", \"FFFF99\", \"CCFFCC\", \"CCFFFF\", \"99CCFF\", \"CC99FF\", \"FFFFFF\"]];\r\n\t\t\r\n\r\n\t\tthis.foreColorDialog = dojo.widget.createWidget(\"ToolbarColorDialog\", \r\n\t\t\t\t\t\t\t\t\t\t{toggleItem: true,\tname: \"forecolor\", icon: this.cmdImg(\"forecolor\"),\tpalette: \"Jot8x5\"});\r\n\t\tthis.backColorDialog = dojo.widget.createWidget(\"ToolbarColorDialog\", \r\n\t\t\t\t\t\t\t\t\t\t{toggleItem: true,\tname: \"hilitecolor\", icon: this.cmdImg(\"hilitecolor\"),\tpalette: \"Jot8x5\"});\r\n\t\tvar commands = [\r\n\t\t\t{values: [\"undo\", \"redo\"], toggleItem: false},\r\n\t\t\t{values: [\"bold\", \"italic\", \"underline\"], toggleItem: true},\r\n\t\t\t{values: [this.foreColorDialog,\tthis.backColorDialog]},\r\n\t\t\t{values: [\"justifyleft\",\"justifycenter\", \"justifyright\"], \r\n\t\t\t\t\t\tname: \"justify\", buttonGroup: true, preventDeselect: false} ];\r\n\r\n\t\tvar table = this;\r\n\t\tfor(var x = 0; x < commands.length; x++) \r\n\t\t{\r\n\t\t\tvar set = commands[x];\r\n\t\t\tvar values = set.values;\r\n\t\t\tvar btnGroup = [set.name];\r\n\t\t\tfor(var y = 0; y < values.length; y++) \r\n\t\t\t{\r\n\t\t\t\tif(typeof values[y]\t== \"string\") \r\n\t\t\t\t{\r\n\t\t\t\t\tvar cmd = values[y];\r\n\t\t\t\t\tif(set.buttonGroup)\t\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tbtnGroup.push(this.cmdImg(cmd));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar btn = tb.addChild(this.cmdImg(cmd), null, {name:cmd, toggleItem:set.toggleItem});\r\n\t\t\t\t\t\tif (btn) \r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( values[y] == \"undo\" || values[y] == \"redo\" )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tdojo.event.connect(btn, \"onClick\", this, \"handleUndoRedo\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tdojo.event.connect(btn,\t\"onChangeSelect\",\tthis,\t\"execControl\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse \r\n\t\t\t\t{\r\n\t\t\t\t\tvar btn = tb.addChild(values[y]);\r\n\t\t\t\t\tdojo.event.connect(btn,\t\"onSetValue\", this, values[y].getName());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(set.buttonGroup && btnGroup.length > 1) \r\n\t\t\t{\r\n\t\t\t\tvar btn = tb.addChild(btnGroup,\tnull, {defaultButton:set.defaultButton});\r\n\t\t\t\tif (btn) \r\n\t\t\t\t{\r\n\t\t\t\t\tdojo.event.connect(btn,\t\"onChangeSelect\", this, \"execControl\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(x + 1 !=\tcommands.length && !(tb.children[tb.children.length-1] instanceof dojo.widget.html.ToolbarSeparator)) \r\n\t\t\t{\r\n\t\t\t\ttb.addChild(\"|\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.currentToolbar.resizeTo(281);\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.values":{"_":{"meta":{"summary":"","src":"\t\tthis.currentToolbar = dojo.widget.createWidget(\"toolbarContainer\", {}, this.toolbarContainer);\r\n\t\tthis.currentToolbar.domNode.id = \"toolbarContainer\";\r\n\t\tvar tb = dojo.widget.createWidget(\"toolbar\");\r\n\t\tthis.currentToolbar.addChild(tb);\r\n\r\n\t\tdojo.widget.html.ColorPalette.prototype.palettes[\"Jot8x5\"] =\r\n                       [[\"000000\", \"993300\", \"333300\", \"003300\", \"003366\", \"000080\", \"333399\", \"333333\"],\r\n                       [\"800000\", \"FF6600\", \"808000\", \"008000\", \"008080\", \"0000FF\", \"666699\", \"808080\"],\r\n                       [\"FF0000\", \"FF9900\", \"99CC00\", \"339966\", \"33CCCC\", \"3366FF\", \"800080\", \"969696\"],\r\n                       [\"FF00FF\", \"FFCC00\", \"FFFF00\", \"00FF00\", \"00FF00\", \"00CCFF\", \"993366\", \"C0C0C0\"],\r\n                       [\"FF99CC\", \"FFCC99\", \"FFFF99\", \"CCFFCC\", \"CCFFFF\", \"99CCFF\", \"CC99FF\", \"FFFFFF\"]];\r\n\t\t\r\n\r\n\t\tthis.foreColorDialog = dojo.widget.createWidget(\"ToolbarColorDialog\", \r\n\t\t\t\t\t\t\t\t\t\t{toggleItem: true,\tname: \"forecolor\", icon: this.cmdImg(\"forecolor\"),\tpalette: \"Jot8x5\"});\r\n\t\tthis.backColorDialog = dojo.widget.createWidget(\"ToolbarColorDialog\", \r\n\t\t\t\t\t\t\t\t\t\t{toggleItem: true,\tname: \"hilitecolor\", icon: this.cmdImg(\"hilitecolor\"),\tpalette: \"Jot8x5\"});\r\n\t\tvar commands = [\r\n\t\t\t{values: [\"undo\", \"redo\"], toggleItem: false},\r\n\t\t\t{values: [\"bold\", \"italic\", \"underline\"], toggleItem: true},\r\n\t\t\t{values: [this.foreColorDialog,\tthis.backColorDialog]},\r\n\t\t\t{values: [\"justifyleft\",\"justifycenter\", \"justifyright\"], \r\n\t\t\t\t\t\tname: \"justify\", buttonGroup: true, preventDeselect: false} ];\r\n\r\n\t\tvar table = this;\r\n\t\tfor(var x = 0; x < commands.length; x++) \r\n\t\t{\r\n\t\t\tvar set = commands[x];\r\n\t\t\tvar values = set.values;\r\n\t\t\tvar btnGroup = [set.name];\r\n\t\t\tfor(var y = 0; y < values.length; y++) \r\n\t\t\t{\r\n\t\t\t\tif(typeof values[y]\t== \"string\") \r\n\t\t\t\t{\r\n\t\t\t\t\tvar cmd = values[y];\r\n\t\t\t\t\tif(set.buttonGroup)\t\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tbtnGroup.push(this.cmdImg(cmd));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar btn = tb.addChild(this.cmdImg(cmd), null, {name:cmd, toggleItem:set.toggleItem});\r\n\t\t\t\t\t\tif (btn) \r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( values[y] == \"undo\" || values[y] == \"redo\" )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tdojo.event.connect(btn, \"onClick\", this, \"handleUndoRedo\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tdojo.event.connect(btn,\t\"onChangeSelect\",\tthis,\t\"execControl\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse \r\n\t\t\t\t{\r\n\t\t\t\t\tvar btn = tb.addChild(values[y]);\r\n\t\t\t\t\tdojo.event.connect(btn,\t\"onSetValue\", this, values[y].getName());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(set.buttonGroup && btnGroup.length > 1) \r\n\t\t\t{\r\n\t\t\t\tvar btn = tb.addChild(btnGroup,\tnull, {defaultButton:set.defaultButton});\r\n\t\t\t\tif (btn) \r\n\t\t\t\t{\r\n\t\t\t\t\tdojo.event.connect(btn,\t\"onChangeSelect\", this, \"execControl\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(x + 1 !=\tcommands.length && !(tb.children[tb.children.length-1] instanceof dojo.widget.html.ToolbarSeparator)) \r\n\t\t\t{\r\n\t\t\t\ttb.addChild(\"|\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.currentToolbar.resizeTo(281);\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.name":{"_":{"meta":{"summary":"","src":"\t\tthis.currentToolbar = dojo.widget.createWidget(\"toolbarContainer\", {}, this.toolbarContainer);\r\n\t\tthis.currentToolbar.domNode.id = \"toolbarContainer\";\r\n\t\tvar tb = dojo.widget.createWidget(\"toolbar\");\r\n\t\tthis.currentToolbar.addChild(tb);\r\n\r\n\t\tdojo.widget.html.ColorPalette.prototype.palettes[\"Jot8x5\"] =\r\n                       [[\"000000\", \"993300\", \"333300\", \"003300\", \"003366\", \"000080\", \"333399\", \"333333\"],\r\n                       [\"800000\", \"FF6600\", \"808000\", \"008000\", \"008080\", \"0000FF\", \"666699\", \"808080\"],\r\n                       [\"FF0000\", \"FF9900\", \"99CC00\", \"339966\", \"33CCCC\", \"3366FF\", \"800080\", \"969696\"],\r\n                       [\"FF00FF\", \"FFCC00\", \"FFFF00\", \"00FF00\", \"00FF00\", \"00CCFF\", \"993366\", \"C0C0C0\"],\r\n                       [\"FF99CC\", \"FFCC99\", \"FFFF99\", \"CCFFCC\", \"CCFFFF\", \"99CCFF\", \"CC99FF\", \"FFFFFF\"]];\r\n\t\t\r\n\r\n\t\tthis.foreColorDialog = dojo.widget.createWidget(\"ToolbarColorDialog\", \r\n\t\t\t\t\t\t\t\t\t\t{toggleItem: true,\tname: \"forecolor\", icon: this.cmdImg(\"forecolor\"),\tpalette: \"Jot8x5\"});\r\n\t\tthis.backColorDialog = dojo.widget.createWidget(\"ToolbarColorDialog\", \r\n\t\t\t\t\t\t\t\t\t\t{toggleItem: true,\tname: \"hilitecolor\", icon: this.cmdImg(\"hilitecolor\"),\tpalette: \"Jot8x5\"});\r\n\t\tvar commands = [\r\n\t\t\t{values: [\"undo\", \"redo\"], toggleItem: false},\r\n\t\t\t{values: [\"bold\", \"italic\", \"underline\"], toggleItem: true},\r\n\t\t\t{values: [this.foreColorDialog,\tthis.backColorDialog]},\r\n\t\t\t{values: [\"justifyleft\",\"justifycenter\", \"justifyright\"], \r\n\t\t\t\t\t\tname: \"justify\", buttonGroup: true, preventDeselect: false} ];\r\n\r\n\t\tvar table = this;\r\n\t\tfor(var x = 0; x < commands.length; x++) \r\n\t\t{\r\n\t\t\tvar set = commands[x];\r\n\t\t\tvar values = set.values;\r\n\t\t\tvar btnGroup = [set.name];\r\n\t\t\tfor(var y = 0; y < values.length; y++) \r\n\t\t\t{\r\n\t\t\t\tif(typeof values[y]\t== \"string\") \r\n\t\t\t\t{\r\n\t\t\t\t\tvar cmd = values[y];\r\n\t\t\t\t\tif(set.buttonGroup)\t\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tbtnGroup.push(this.cmdImg(cmd));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar btn = tb.addChild(this.cmdImg(cmd), null, {name:cmd, toggleItem:set.toggleItem});\r\n\t\t\t\t\t\tif (btn) \r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( values[y] == \"undo\" || values[y] == \"redo\" )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tdojo.event.connect(btn, \"onClick\", this, \"handleUndoRedo\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tdojo.event.connect(btn,\t\"onChangeSelect\",\tthis,\t\"execControl\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse \r\n\t\t\t\t{\r\n\t\t\t\t\tvar btn = tb.addChild(values[y]);\r\n\t\t\t\t\tdojo.event.connect(btn,\t\"onSetValue\", this, values[y].getName());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(set.buttonGroup && btnGroup.length > 1) \r\n\t\t\t{\r\n\t\t\t\tvar btn = tb.addChild(btnGroup,\tnull, {defaultButton:set.defaultButton});\r\n\t\t\t\tif (btn) \r\n\t\t\t\t{\r\n\t\t\t\t\tdojo.event.connect(btn,\t\"onChangeSelect\", this, \"execControl\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(x + 1 !=\tcommands.length && !(tb.children[tb.children.length-1] instanceof dojo.widget.html.ToolbarSeparator)) \r\n\t\t\t{\r\n\t\t\t\ttb.addChild(\"|\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.currentToolbar.resizeTo(281);\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.defaultButton":{"_":{"meta":{"summary":"","src":"\t\tthis.currentToolbar = dojo.widget.createWidget(\"toolbarContainer\", {}, this.toolbarContainer);\r\n\t\tthis.currentToolbar.domNode.id = \"toolbarContainer\";\r\n\t\tvar tb = dojo.widget.createWidget(\"toolbar\");\r\n\t\tthis.currentToolbar.addChild(tb);\r\n\r\n\t\tdojo.widget.html.ColorPalette.prototype.palettes[\"Jot8x5\"] =\r\n                       [[\"000000\", \"993300\", \"333300\", \"003300\", \"003366\", \"000080\", \"333399\", \"333333\"],\r\n                       [\"800000\", \"FF6600\", \"808000\", \"008000\", \"008080\", \"0000FF\", \"666699\", \"808080\"],\r\n                       [\"FF0000\", \"FF9900\", \"99CC00\", \"339966\", \"33CCCC\", \"3366FF\", \"800080\", \"969696\"],\r\n                       [\"FF00FF\", \"FFCC00\", \"FFFF00\", \"00FF00\", \"00FF00\", \"00CCFF\", \"993366\", \"C0C0C0\"],\r\n                       [\"FF99CC\", \"FFCC99\", \"FFFF99\", \"CCFFCC\", \"CCFFFF\", \"99CCFF\", \"CC99FF\", \"FFFFFF\"]];\r\n\t\t\r\n\r\n\t\tthis.foreColorDialog = dojo.widget.createWidget(\"ToolbarColorDialog\", \r\n\t\t\t\t\t\t\t\t\t\t{toggleItem: true,\tname: \"forecolor\", icon: this.cmdImg(\"forecolor\"),\tpalette: \"Jot8x5\"});\r\n\t\tthis.backColorDialog = dojo.widget.createWidget(\"ToolbarColorDialog\", \r\n\t\t\t\t\t\t\t\t\t\t{toggleItem: true,\tname: \"hilitecolor\", icon: this.cmdImg(\"hilitecolor\"),\tpalette: \"Jot8x5\"});\r\n\t\tvar commands = [\r\n\t\t\t{values: [\"undo\", \"redo\"], toggleItem: false},\r\n\t\t\t{values: [\"bold\", \"italic\", \"underline\"], toggleItem: true},\r\n\t\t\t{values: [this.foreColorDialog,\tthis.backColorDialog]},\r\n\t\t\t{values: [\"justifyleft\",\"justifycenter\", \"justifyright\"], \r\n\t\t\t\t\t\tname: \"justify\", buttonGroup: true, preventDeselect: false} ];\r\n\r\n\t\tvar table = this;\r\n\t\tfor(var x = 0; x < commands.length; x++) \r\n\t\t{\r\n\t\t\tvar set = commands[x];\r\n\t\t\tvar values = set.values;\r\n\t\t\tvar btnGroup = [set.name];\r\n\t\t\tfor(var y = 0; y < values.length; y++) \r\n\t\t\t{\r\n\t\t\t\tif(typeof values[y]\t== \"string\") \r\n\t\t\t\t{\r\n\t\t\t\t\tvar cmd = values[y];\r\n\t\t\t\t\tif(set.buttonGroup)\t\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tbtnGroup.push(this.cmdImg(cmd));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar btn = tb.addChild(this.cmdImg(cmd), null, {name:cmd, toggleItem:set.toggleItem});\r\n\t\t\t\t\t\tif (btn) \r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( values[y] == \"undo\" || values[y] == \"redo\" )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tdojo.event.connect(btn, \"onClick\", this, \"handleUndoRedo\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tdojo.event.connect(btn,\t\"onChangeSelect\",\tthis,\t\"execControl\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse \r\n\t\t\t\t{\r\n\t\t\t\t\tvar btn = tb.addChild(values[y]);\r\n\t\t\t\t\tdojo.event.connect(btn,\t\"onSetValue\", this, values[y].getName());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(set.buttonGroup && btnGroup.length > 1) \r\n\t\t\t{\r\n\t\t\t\tvar btn = tb.addChild(btnGroup,\tnull, {defaultButton:set.defaultButton});\r\n\t\t\t\tif (btn) \r\n\t\t\t\t{\r\n\t\t\t\t\tdojo.event.connect(btn,\t\"onChangeSelect\", this, \"execControl\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(x + 1 !=\tcommands.length && !(tb.children[tb.children.length-1] instanceof dojo.widget.html.ToolbarSeparator)) \r\n\t\t\t{\r\n\t\t\t\ttb.addChild(\"|\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.currentToolbar.resizeTo(281);\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.cmdImg":{"_":{"meta":{"summary":"","parameters":{"cmd":{"type":""}},"src":"\t\treturn dojo.uri.dojoUri(\"src\/widget\/templates\/buttons\/\"+ cmd +\".gif\");\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.postCreate":{"_":{"meta":{"summary":"","src":"\t\tthis.createGrid();\r\n\t\t\r\n\t\tvar tw = this;\r\n\t\t\/\/setup FormulaBar\r\n\t\tif ( this.useFormulaBar )\r\n\t\t{\r\n\t\t\tthis.formulaBar = document.getElementById(\"formulaBar\"+this.instanceNum);\r\n\t\t\tthis.status = document.getElementById(\"status\"+this.instanceNum);\r\n\t\t\tthis.formulaBar.add = true;\r\n\t\t\tif (this.writePerm)\r\n\t\t\t{\r\n\t\t\t\tdojo.event.connect(this.formulaBar, \"onfocus\", function()\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( !tw.editing )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttw.editStart(null, false, false, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\tdojo.event.connect(this.formulaBar, \"onkeydown\", this, \"formulaBarKeyDown\");\r\n\t\t\t\tdojo.event.connect(this.formulaBar, \"onkeyup\", this, \"formulaBarKeyUp\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.topOfColHeaders = dojo.style.getTotalOffset(this.layoutTable, \"top\", false);\r\n\t\tthis.topOfSheet      = this.topOfColHeaders + this.heightOfColHeaders;\r\n\r\n\t\t\/\/create the right click menus\r\n\t\tthis.colMenu = dojo.widget.createWidget(\"PopupMenu2\");\r\n\t\tthis.colMenu.bindDomNode(this.colHeadersBody);\r\n\t\tthis.colMenu.addChild(this.createMenuItem(\"Insert Column Before\", \"insertColumnBefore\"));\r\n\t\tthis.colMenu.addChild(this.createMenuItem(\"Insert Column After\", \"insertColumnAfter\"));\r\n\t\tthis.colMenu.addChild(this.createMenuItem(\"Delete Column\", \"deleteColumn\"));\r\n\t\tdocument.body.appendChild(this.colMenu.domNode);\r\n\r\n\t\tthis.sheetMenu = dojo.widget.createWidget(\"PopupMenu2\");\r\n\t\tthis.sheetMenu.bindDomNode(this.sheetFrame.id);\r\n\t\tthis.sheetMenu.addChild(this.createMenuItem(\"Insert Column Before\", \"insertColumnBefore\"));\r\n\t\tthis.sheetMenu.addChild(this.createMenuItem(\"Insert Column After\", \"insertColumnAfter\"));\r\n\t\tthis.sheetMenu.addChild(this.createMenuItem(\"Delete Column\", \"deleteColumn\"));\r\n\t\tthis.sheetMenu.addChild(dojo.widget.createWidget(\"MenuSeparator2\", {parent: this.sheetMenu}));\r\n\t\tthis.sheetMenu.addChild(this.createMenuItem(\"Insert Row Before\", \"insertRowBefore\"));\r\n\t\tthis.sheetMenu.addChild(this.createMenuItem(\"Insert Row After\", \"insertRowAfter\"));\r\n\t\tthis.sheetMenu.addChild(this.createMenuItem(\"Delete Row\", \"deleteRow\"));\r\n\t\tthis.sheetMenu.addChild(dojo.widget.createWidget(\"MenuSeparator2\", {parent: this.sheetMenu}));\r\n\t\tthis.sheetMenu.addChild(this.createMenuItem(\"Insert Comment\", \"showExtraDataDialog\"));\r\n\t\tthis.sheetMenu.addChild(this.createMenuItem(\"Attach Files\", \"showExtraDataDialog\"));\r\n\t\tdocument.body.appendChild(this.sheetMenu.domNode);\r\n\r\n\t\tthis.rowMenu = dojo.widget.createWidget(\"PopupMenu2\");\r\n\t\tthis.rowMenu.bindDomNode(this.rowHeadersBody);\r\n\t\tthis.rowMenu.addChild(this.createMenuItem(\"Insert Row Before\", \"insertRowBefore\"));\r\n\t\tthis.rowMenu.addChild(this.createMenuItem(\"Insert Row After\", \"insertRowAfter\"));\r\n\t\tthis.rowMenu.addChild(this.createMenuItem(\"Delete Row\", \"deleteRow\"));\r\n\t\tdocument.body.appendChild(this.rowMenu.domNode);\r\n\r\n\r\n\t\t\/\/adjust the position of the column and row resizers\r\n\t\tthis.rowResizer.style.left = this.layoutTable.offsetLeft + \"px\";\r\n\t\tthis.colResizer.style.top = this.topOfColHeaders + \"px\";\r\n\r\n\t\t\/\/handle resizing the table when the browser resizes\r\n\t\tdojo.event.connect(window, \"onresize\", function() {\r\n\t\t\t\ttw.resizeSheetWindow();\r\n\t\t\t});\r\n\r\n\r\n\t\t\/\/set up the sheet event handlers \r\n\t\tif (this.writePerm)\r\n\t\t{\r\n\t\t\t\/\/add handlers to the resizers as gecko needs this\r\n\t\t\tdojo.event.connect(this.colResizer, \"onmouseup\", this, \"resizeEnd\");\r\n\t\t\tdojo.event.connect(this.rowResizer, \"onmouseup\", this, \"resizeEnd\");\r\n\t\t}\r\n\r\n\t\t\/\/Constants used to index into the returned array from the function processNewText\r\n\t\tthis.processNewText.NEW_TEXT         = 0;\r\n\t\tthis.processNewText.DATA_TYPE        = 1;\r\n\t\tthis.processNewText.FORMULA_BAR_TEXT = 2;\r\n\t\tthis.processNewText.SUB_DATA_TYPE    = 3;\r\n\r\n\r\n\t\t\/\/do browser specific setup\r\n\t\tif ( dojo.render.html.ie ) \r\n\t\t{\r\n\t\t\t\/\/used when determining if a div can now fit into a cell after col resize\r\n\t\t\t\/\/and endEdit see if a floater can fit\r\n\t\t\tthis.resizeMargin = 5;\r\n\r\n\t\t\t\/\/stop selection in main page\r\n\t\t\tdojo.event.connect(document, \"onselectstart\", function(e) {\r\n\t\t\t\t\tif ( e.target != tw.formulaBar && e.target.id != \"filter_input\" )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\t\telse if ( dojo.render.html.mozilla ) \r\n\t\t{\r\n\t\t\t\/\/used when determining if a div can now fit into a cell after col resize\r\n\t\t\t\/\/and endEdit see if a floater can fit\r\n\t\t\tthis.resizeMargin = 5;\r\n\r\n\t\t\t\/\/set sheet move handlers to move the column and row headers when the sheet does\r\n\t\t\t\/\/gecko in FF 1.0.x need to poll because mouse scroll events don't trigger onscoll events\r\n\t\t\t\/\/sync for FF 1.5+ is set in createGrid because needs to be set for each iframe doc\r\n\t\t\tif (parseInt(dojo.render.html.geckoVersion) <= 20050915 )\r\n\t\t\t{\r\n\t\t\t\twindow.setInterval(dojo.lang.hitch(this,\"geckoSyncHeaders\"), 50);\r\n\t\t\t}\r\n\r\n\t\t\t\/\/stop selection in main page\r\n\t\t\tdojo.event.connect(document, \"onmousedown\", function(e) {\r\n\t\t\t\t\tif ( e.target != tw.formulaBar && e.target.id != \"filter_input\" ) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t\/\/make sure page using the table widget doesn't set a font\r\n\t\t\/\/size to something other then what the sheet is using\r\n\t\tthis.editCellSizer.style.fontSize = \"medium\";\r\n\t\t\/\/function for getting the width of some text\r\n\t\tthis.editCellSizer.getWidth = function(html, di)\r\n\t\t{\r\n\t\t\tthis.innerHTML = html;\r\n\r\n\t\t\t\/\/need to take into account cell bold and italic for sizing to be correct\r\n\t\t\tif (di && di.fontWeight )\r\n\t\t\t{\r\n\t\t\t\tthis.style.fontWeight = di.fontWeight;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.style.fontWeight = \"normal\"; \r\n\t\t\t}\r\n\r\n\t\t\tif (di && di.fontStyle )\r\n\t\t\t{\r\n\t\t\t\tthis.style.fontStyle = di.fontStyle;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.style.fontStyle = \"normal\";\r\n\t\t\t}\r\n\r\n\t\t\treturn this.offsetWidth;\r\n\t\t}\r\n\r\n\t\t\/\/init the UndoManager used for server failure rollbacks\r\n\t\tvar undoingTransaction = false;\r\n\t\tthis.undoManager = new dojo.undo.Manager();\r\n\t\tthis.undoManager.inNestedTransaction = function()\r\n\t\t\t{\r\n\t\t\t\tif ( this._currentManager._parent != this || undoingTransaction )\r\n\t\t\t\t{\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t};\r\n\r\n\t\t\/\/init undo manager tied to the UI\r\n\t\tthis.topUndoManager = new dojo.undo.Manager();\r\n\t\t\/\/need to add these connects so that undoing a transaction causes a bulk send to the server\r\n\t\tdojo.event.connect(\"before\", this.topUndoManager, \"undo\", function()\r\n\t\t\t{\r\n\t\t\t\tif ( tw.topUndoManager._undoStack[tw.topUndoManager._undoStack.length-1] instanceof tw.topUndoManager.constructor )\r\n\t\t\t\t{\r\n\t\t\t\t\tundoingTransaction = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\tdojo.event.connect(this.topUndoManager, \"undo\", function()\r\n\t\t\t{\r\n\t\t\t\tif ( undoingTransaction )\r\n\t\t\t\t{\r\n\t\t\t\t\tundoingTransaction = false;\r\n\t\t\t\t\ttw.dp.endLockTransaction();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\tdojo.event.connect(\"before\", this.topUndoManager, \"redo\", function()\r\n\t\t\t{\r\n\t\t\t\tif ( tw.topUndoManager._redoStack[tw.topUndoManager._redoStack.length-1] instanceof tw.topUndoManager.constructor )\r\n\t\t\t\t{\r\n\t\t\t\t\tundoingTransaction = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\tdojo.event.connect(this.topUndoManager, \"redo\", function()\r\n\t\t\t{\r\n\t\t\t\tif ( undoingTransaction )\r\n\t\t\t\t{\r\n\t\t\t\t\tundoingTransaction = false;\r\n\t\t\t\t\ttw.dp.endLockTransaction();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\tdojo.event.connect(this.topUndoManager, \"_updateStatus\", this, \"updateUndoRedoButtons\");\r\n\t\tthis.updateUndoRedoButtons();\r\n\r\n\t\t\/\/init the DataProvider\r\n\t\tthis.dp = new DataProvider(this, new JotTransport(this.rootPath), this.topPage);\r\n\t\tthis.dp.getValuesByRange(0, 0, this.numberOfCols, this.numberOfRows);\r\n\t\t\/\/this.dp.setupComet('updates');\r\n\r\n\t\tthis.initCellSelection();\r\n\r\n\t\tthis.cellDialog = dojo.widget.createWidget(\"JotTableCellDialog\", {}, document.body, \"last\");\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.parent":{"_":{"meta":{"summary":"","src":"\t\tthis.createGrid();\r\n\t\t\r\n\t\tvar tw = this;\r\n\t\t\/\/setup FormulaBar\r\n\t\tif ( this.useFormulaBar )\r\n\t\t{\r\n\t\t\tthis.formulaBar = document.getElementById(\"formulaBar\"+this.instanceNum);\r\n\t\t\tthis.status = document.getElementById(\"status\"+this.instanceNum);\r\n\t\t\tthis.formulaBar.add = true;\r\n\t\t\tif (this.writePerm)\r\n\t\t\t{\r\n\t\t\t\tdojo.event.connect(this.formulaBar, \"onfocus\", function()\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( !tw.editing )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttw.editStart(null, false, false, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\tdojo.event.connect(this.formulaBar, \"onkeydown\", this, \"formulaBarKeyDown\");\r\n\t\t\t\tdojo.event.connect(this.formulaBar, \"onkeyup\", this, \"formulaBarKeyUp\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.topOfColHeaders = dojo.style.getTotalOffset(this.layoutTable, \"top\", false);\r\n\t\tthis.topOfSheet      = this.topOfColHeaders + this.heightOfColHeaders;\r\n\r\n\t\t\/\/create the right click menus\r\n\t\tthis.colMenu = dojo.widget.createWidget(\"PopupMenu2\");\r\n\t\tthis.colMenu.bindDomNode(this.colHeadersBody);\r\n\t\tthis.colMenu.addChild(this.createMenuItem(\"Insert Column Before\", \"insertColumnBefore\"));\r\n\t\tthis.colMenu.addChild(this.createMenuItem(\"Insert Column After\", \"insertColumnAfter\"));\r\n\t\tthis.colMenu.addChild(this.createMenuItem(\"Delete Column\", \"deleteColumn\"));\r\n\t\tdocument.body.appendChild(this.colMenu.domNode);\r\n\r\n\t\tthis.sheetMenu = dojo.widget.createWidget(\"PopupMenu2\");\r\n\t\tthis.sheetMenu.bindDomNode(this.sheetFrame.id);\r\n\t\tthis.sheetMenu.addChild(this.createMenuItem(\"Insert Column Before\", \"insertColumnBefore\"));\r\n\t\tthis.sheetMenu.addChild(this.createMenuItem(\"Insert Column After\", \"insertColumnAfter\"));\r\n\t\tthis.sheetMenu.addChild(this.createMenuItem(\"Delete Column\", \"deleteColumn\"));\r\n\t\tthis.sheetMenu.addChild(dojo.widget.createWidget(\"MenuSeparator2\", {parent: this.sheetMenu}));\r\n\t\tthis.sheetMenu.addChild(this.createMenuItem(\"Insert Row Before\", \"insertRowBefore\"));\r\n\t\tthis.sheetMenu.addChild(this.createMenuItem(\"Insert Row After\", \"insertRowAfter\"));\r\n\t\tthis.sheetMenu.addChild(this.createMenuItem(\"Delete Row\", \"deleteRow\"));\r\n\t\tthis.sheetMenu.addChild(dojo.widget.createWidget(\"MenuSeparator2\", {parent: this.sheetMenu}));\r\n\t\tthis.sheetMenu.addChild(this.createMenuItem(\"Insert Comment\", \"showExtraDataDialog\"));\r\n\t\tthis.sheetMenu.addChild(this.createMenuItem(\"Attach Files\", \"showExtraDataDialog\"));\r\n\t\tdocument.body.appendChild(this.sheetMenu.domNode);\r\n\r\n\t\tthis.rowMenu = dojo.widget.createWidget(\"PopupMenu2\");\r\n\t\tthis.rowMenu.bindDomNode(this.rowHeadersBody);\r\n\t\tthis.rowMenu.addChild(this.createMenuItem(\"Insert Row Before\", \"insertRowBefore\"));\r\n\t\tthis.rowMenu.addChild(this.createMenuItem(\"Insert Row After\", \"insertRowAfter\"));\r\n\t\tthis.rowMenu.addChild(this.createMenuItem(\"Delete Row\", \"deleteRow\"));\r\n\t\tdocument.body.appendChild(this.rowMenu.domNode);\r\n\r\n\r\n\t\t\/\/adjust the position of the column and row resizers\r\n\t\tthis.rowResizer.style.left = this.layoutTable.offsetLeft + \"px\";\r\n\t\tthis.colResizer.style.top = this.topOfColHeaders + \"px\";\r\n\r\n\t\t\/\/handle resizing the table when the browser resizes\r\n\t\tdojo.event.connect(window, \"onresize\", function() {\r\n\t\t\t\ttw.resizeSheetWindow();\r\n\t\t\t});\r\n\r\n\r\n\t\t\/\/set up the sheet event handlers \r\n\t\tif (this.writePerm)\r\n\t\t{\r\n\t\t\t\/\/add handlers to the resizers as gecko needs this\r\n\t\t\tdojo.event.connect(this.colResizer, \"onmouseup\", this, \"resizeEnd\");\r\n\t\t\tdojo.event.connect(this.rowResizer, \"onmouseup\", this, \"resizeEnd\");\r\n\t\t}\r\n\r\n\t\t\/\/Constants used to index into the returned array from the function processNewText\r\n\t\tthis.processNewText.NEW_TEXT         = 0;\r\n\t\tthis.processNewText.DATA_TYPE        = 1;\r\n\t\tthis.processNewText.FORMULA_BAR_TEXT = 2;\r\n\t\tthis.processNewText.SUB_DATA_TYPE    = 3;\r\n\r\n\r\n\t\t\/\/do browser specific setup\r\n\t\tif ( dojo.render.html.ie ) \r\n\t\t{\r\n\t\t\t\/\/used when determining if a div can now fit into a cell after col resize\r\n\t\t\t\/\/and endEdit see if a floater can fit\r\n\t\t\tthis.resizeMargin = 5;\r\n\r\n\t\t\t\/\/stop selection in main page\r\n\t\t\tdojo.event.connect(document, \"onselectstart\", function(e) {\r\n\t\t\t\t\tif ( e.target != tw.formulaBar && e.target.id != \"filter_input\" )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\t\telse if ( dojo.render.html.mozilla ) \r\n\t\t{\r\n\t\t\t\/\/used when determining if a div can now fit into a cell after col resize\r\n\t\t\t\/\/and endEdit see if a floater can fit\r\n\t\t\tthis.resizeMargin = 5;\r\n\r\n\t\t\t\/\/set sheet move handlers to move the column and row headers when the sheet does\r\n\t\t\t\/\/gecko in FF 1.0.x need to poll because mouse scroll events don't trigger onscoll events\r\n\t\t\t\/\/sync for FF 1.5+ is set in createGrid because needs to be set for each iframe doc\r\n\t\t\tif (parseInt(dojo.render.html.geckoVersion) <= 20050915 )\r\n\t\t\t{\r\n\t\t\t\twindow.setInterval(dojo.lang.hitch(this,\"geckoSyncHeaders\"), 50);\r\n\t\t\t}\r\n\r\n\t\t\t\/\/stop selection in main page\r\n\t\t\tdojo.event.connect(document, \"onmousedown\", function(e) {\r\n\t\t\t\t\tif ( e.target != tw.formulaBar && e.target.id != \"filter_input\" ) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t\/\/make sure page using the table widget doesn't set a font\r\n\t\t\/\/size to something other then what the sheet is using\r\n\t\tthis.editCellSizer.style.fontSize = \"medium\";\r\n\t\t\/\/function for getting the width of some text\r\n\t\tthis.editCellSizer.getWidth = function(html, di)\r\n\t\t{\r\n\t\t\tthis.innerHTML = html;\r\n\r\n\t\t\t\/\/need to take into account cell bold and italic for sizing to be correct\r\n\t\t\tif (di && di.fontWeight )\r\n\t\t\t{\r\n\t\t\t\tthis.style.fontWeight = di.fontWeight;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.style.fontWeight = \"normal\"; \r\n\t\t\t}\r\n\r\n\t\t\tif (di && di.fontStyle )\r\n\t\t\t{\r\n\t\t\t\tthis.style.fontStyle = di.fontStyle;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.style.fontStyle = \"normal\";\r\n\t\t\t}\r\n\r\n\t\t\treturn this.offsetWidth;\r\n\t\t}\r\n\r\n\t\t\/\/init the UndoManager used for server failure rollbacks\r\n\t\tvar undoingTransaction = false;\r\n\t\tthis.undoManager = new dojo.undo.Manager();\r\n\t\tthis.undoManager.inNestedTransaction = function()\r\n\t\t\t{\r\n\t\t\t\tif ( this._currentManager._parent != this || undoingTransaction )\r\n\t\t\t\t{\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t};\r\n\r\n\t\t\/\/init undo manager tied to the UI\r\n\t\tthis.topUndoManager = new dojo.undo.Manager();\r\n\t\t\/\/need to add these connects so that undoing a transaction causes a bulk send to the server\r\n\t\tdojo.event.connect(\"before\", this.topUndoManager, \"undo\", function()\r\n\t\t\t{\r\n\t\t\t\tif ( tw.topUndoManager._undoStack[tw.topUndoManager._undoStack.length-1] instanceof tw.topUndoManager.constructor )\r\n\t\t\t\t{\r\n\t\t\t\t\tundoingTransaction = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\tdojo.event.connect(this.topUndoManager, \"undo\", function()\r\n\t\t\t{\r\n\t\t\t\tif ( undoingTransaction )\r\n\t\t\t\t{\r\n\t\t\t\t\tundoingTransaction = false;\r\n\t\t\t\t\ttw.dp.endLockTransaction();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\tdojo.event.connect(\"before\", this.topUndoManager, \"redo\", function()\r\n\t\t\t{\r\n\t\t\t\tif ( tw.topUndoManager._redoStack[tw.topUndoManager._redoStack.length-1] instanceof tw.topUndoManager.constructor )\r\n\t\t\t\t{\r\n\t\t\t\t\tundoingTransaction = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\tdojo.event.connect(this.topUndoManager, \"redo\", function()\r\n\t\t\t{\r\n\t\t\t\tif ( undoingTransaction )\r\n\t\t\t\t{\r\n\t\t\t\t\tundoingTransaction = false;\r\n\t\t\t\t\ttw.dp.endLockTransaction();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\tdojo.event.connect(this.topUndoManager, \"_updateStatus\", this, \"updateUndoRedoButtons\");\r\n\t\tthis.updateUndoRedoButtons();\r\n\r\n\t\t\/\/init the DataProvider\r\n\t\tthis.dp = new DataProvider(this, new JotTransport(this.rootPath), this.topPage);\r\n\t\tthis.dp.getValuesByRange(0, 0, this.numberOfCols, this.numberOfRows);\r\n\t\t\/\/this.dp.setupComet('updates');\r\n\r\n\t\tthis.initCellSelection();\r\n\r\n\t\tthis.cellDialog = dojo.widget.createWidget(\"JotTableCellDialog\", {}, document.body, \"last\");\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.initCellSelection":{"_":{"meta":{"summary":"","src":"\t\tthis.selectedRowHeader = this.getRowHeaders(0);\r\n\t\tthis.selectedCell = this.getCell(0,0); \r\n\t\tthis.selectedCellCol = 0;\r\n\t\tthis.selectedCellRow = 0;\r\n\t\tthis.selectedCellDI = this.dp.getValueAt(0,0);\r\n\t\tthis.cellSelected(this.selectedCell);\r\n\t\tthis.resetMouseSelect();\r\n\t\tthis.mouseOverCell = this.selectedCell;\r\n\t\tthis.mouseOverCellCol = 0;\r\n\t\tthis.mouseOverCellRow = 0;\r\n\r\n\t\tthis.focusOnSheet();\r\n\r\n\t\tthis.resizeSheetWindow(false);\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.createMenuItem":{"_":{"meta":{"summary":"","parameters":{"caption":{"type":""},"handler":{"type":""}},"src":"\t\tvar item = dojo.widget.createWidget(\"MenuItem2\", {caption: caption});\r\n\t\tif ( handler )\r\n\t\t{\r\n\t\t\tdojo.event.connect(item, \"onClick\", this, handler); \r\n\t\t}\r\n\r\n\t\treturn item;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.caption":{"_":{"meta":{"summary":"","parameters":{"caption":{"type":""},"handler":{"type":""}},"src":"\t\tvar item = dojo.widget.createWidget(\"MenuItem2\", {caption: caption});\r\n\t\tif ( handler )\r\n\t\t{\r\n\t\t\tdojo.event.connect(item, \"onClick\", this, handler); \r\n\t\t}\r\n\r\n\t\treturn item;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.geckoSetDesignMode":{"_":{"meta":{"summary":"","src":"\t\tthis.editCell.contentWindow.document.write(\"<html><head><style>body{margin:0px;padding:0px;}<\/style><\/head><body><\/body><\/html>\");\r\n\t\tthis.editCell.contentWindow.document.close();\r\n\r\n\t\ttry\r\n\t\t{\r\n\t\t\tvar doc = this.editCell.contentWindow.document;\r\n\t\t\tvar hitch = dojo.lang.curry(dojo.lang, \"hitch\", this);\r\n\t\t\tvar addListener = dojo.event.browser.addListener;\r\n\t\t\taddListener(doc, \"keydown\", hitch(this.keyDownListener));\r\n\t\t\taddListener(doc, \"keyup\", hitch(this.keyUpListener));\r\n\t\t\taddListener(doc, \"mousedown\", hitch(this.geckoSelectEdit));\r\n\t\t\tdoc.designMode = \"on\";\r\n\r\n\t\t\tthis.editCell.contentWindow.focus();\r\n\t\t}\r\n\t\tcatch(e)\r\n\t\t{\r\n\t\t\talert(e);\r\n\t\t\tdojo.debugShallow(e);\r\n\t\t\t\/\/gecko doesn't always allow designMode at first so try again\r\n\t\t\t\/\/dojo.lang.setTimeout(this, this.geckoSetDesignMode, 20);\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.focusOnSheet":{"_":{"meta":{"summary":"","src":"\t\tif ( dojo.render.html.ie )\r\n\t\t{\r\n\t\t\tthis.sheetFrame.ieFrame.focus();\r\n\t\t}\r\n\t\t\/\/FF 1.5 has some issues with focus that are a pain \r\n\t\telse if (parseInt(dojo.render.html.geckoVersion) > 20050915 )\r\n\t\t{\r\n\t\t\t\/\/TODO: this doesn't work, but setting the editCell to\r\n\t\t\t\/\/visible allowed keyboard commands to work with just\r\n\t\t\t\/\/one mouse click in the sheet.  Maybe we can fake the\r\n\t\t\t\/\/mouse click.\r\n\t\t\t\/\/this.sheetFrame.focus();\r\n\t\t\t\/\/this.sheetFrame.contentWindow.focus();\r\n\t\t\tthis.editCell.style.visibility = \"visible\";\r\n\t\t\tthis.editCell.contentWindow.focus();\r\n\t\t}\r\n\t\t\/\/this works like you would expect in FF 1.0.x\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.editCell.contentWindow.focus();\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.resetMouseSelect":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif ( this.resizeParts )\r\n\t\t{\r\n\t\t\tthis.resizeEnd(e);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.mouseDown = false;\r\n\t\t\tif ( this.selectType )\r\n\t\t\t{\r\n\t\t\t\tthis.setCursor(this.selectType, \"\");\r\n\t\t\t\tthis.selectType = null;\r\n\t\t\t}\r\n\r\n\t\t\t\/\/turn off replicating if needed\r\n\t\t\tif ( this.replicating )\r\n\t\t\t{\r\n\t\t\t\tthis.activeMS.replicateEnd();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.refresh":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"addToUndo":{"type":""},"clearUndo":{"type":""}},"src":"\t\tif ( clearUndo )\r\n\t\t{\r\n\t\t\tthis.topUndoManager.clear();\r\n\t\t\tthis.undoManager.clear();\r\n\t\t}\r\n\t\telse if ( args && addToUndo) \/\/if no args then nothing to put on the undo stack\r\n\t\t{\r\n\t\t\tvar table = this;\r\n\t\t\tvar undoArgs = table.lastRefreshArgs || {};\r\n\t\t\tif ( !this.inFilter && args.filter )\r\n\t\t\t{\r\n\t\t\t\tundoArgs.undoFilter = true;\r\n\t\t\t}\r\n\t\t\telse if ( !this.inSort && args.sortColumns )\r\n\t\t\t{\r\n\t\t\t\tundoArgs.undoSort = true;\r\n\t\t\t}\r\n\r\n\t\t\tthis.undoManager.push(\r\n\t\t\t\t\tfunction() { table.refresh(undoArgs, false) }, \/\/undo\r\n\t\t\t\t\tfunction() { table.refresh(args, false) }, \/\/redo\r\n\t\t\t\t\targs.filter ?  \"Filter on: \" + args.filter : \"Sort\" \/\/description\r\n\t\t\t\t\t);\r\n\t\t}\r\n\r\n\t\tthis.msSelectedCellBackground = null;\r\n\t\tthis.sheetHeight = this.numberOfRows * this.defaultRowHeight;\r\n\t\tthis.sheetWidth  = this.numberOfCols * this.defaultColWidth;\r\n\t\tthis.createGrid();\r\n\t\tthis.colMenu.bindDomNode(this.colHeadersBody);\r\n\t\tthis.rowMenu.bindDomNode(this.rowHeadersBody);\r\n\t\tthis.filterRowNum = null;\r\n\r\n\t\t\/\/reset floater arrays\r\n\t\tthis.mouseOverTextDivs = new Array(); \r\n\t\tthis.editOverflowArray = new Array();\r\n\t\tthis.floatersByCol     = new Array(); \r\n\t\tthis.floatersByRow     = new Array();\r\n\t\tthis.backgroundDivs    = new Array();\r\n\t\tthis.biggerThanNumColArray = new Array();\r\n\r\n\t\tthis.lastRefreshArgs = args;\r\n\t\tif ( args )\r\n\t\t{\r\n\t\t\tthis.inFilter = args.filter ? \"true\" : \"false\"; \r\n\t\t\tthis.inSort   = args.sortColumns ? \"true\" : \"false\"; \r\n\t\t}\r\n\t\tthis.dp.clear();\r\n\t\tthis.dp.getValuesByRange(0, 0, this.numberOfCols, this.numberOfRows, args);\r\n\r\n\t\tthis.initCellSelection();\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.createGrid":{"_":{"meta":{"summary":"","src":"\t\tbuf.append('<table id=\"colHeadersTable'+this.instanceNum+'\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"').\r\n\t\t\t\t\tappend(this.sheetWidth).append('px\" style=\"table-layout:fixed; width:').\r\n\t\t\t\t\tappend(this.sheetWidth).append('px;height:').append(this.heightOfColHeaders).append('px;\">');\r\n\r\n\t\tbuf.append('<colgroup id=\"colHeadersColGroup'+this.instanceNum+'\">'); \r\n\t\tfor(x=0; x < this.numberOfCols; x++)\r\n\t\t{\r\n\t\t\tbuf.append('<col style=\"width: 2px\"\/>');\r\n\t\t\tif ( dojo.render.html.ie ) \r\n\t\t\t{\r\n\t\t\t\tbuf.append('<col style=\"width: 94px\"\/>');\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tbuf.append('<col style=\"width: 95px\"\/>');\r\n\t\t\t}\r\n\t\t\tbuf.append('<col style=\"width: 3px\"\/>');\r\n\t\t}\r\n\t\tbuf.append('<\/colgroup>');\r\n\t\r\n\t\tbuf.append('<tbody id=\"colHeadersBody'+this.instanceNum+'\">');\r\n\t\tbuf.append('<tr id=\"colHeadersRow'+this.instanceNum+'\" style=\"height:').append(this.heightOfColHeaders - 2).append('px;\">');\r\n\t\r\n\t\tfor(var x=0; x < this.numberOfCols; x++)\r\n\t\t{\r\n\t\t\tbuf.append('<td class=\"').\r\n\t\t\t\t\t\tappend(x == 1 ? \"colFirstCapStart\" : \"colCapStart\").append('\">&nbsp;<\/td>');\r\n\t\t\tbuf.append('<td class=\"colHeader\" style=\"width: ').\r\n\t\t\t\t\t\tappend(dojo.render.html.ie ? \"94px\" : \"95px\").append(';\">').\r\n\t\t\t\t\t\tappend(Formula.COLUMN_CHARS[x]).append('<\/td>');\r\n\t\t\tbuf.append('<td class=\"colCapEnd\">&nbsp;<\/td>');\r\n\t\t}\r\n\t\r\n\t\tbuf.append('<\/tbody><\/table>');\r\n\r\n\t\tthis.colHeaders.innerHTML = buf.toString();\r\n\r\n\t\t\/\/create the Row headers\r\n\t\tbuf.clear();\r\n\t\tbuf.append('<table id=\"rowHeadersTable'+this.instanceNum+'\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" style=\"table-layout: fixed; height:').append(this.sheetHeight).append('px;\">');\r\n\t\tbuf.append('<colgroup><col id=\"1.rowBody'+this.instanceNum+'\" style=\"width:').append(this.widthOfRowHeaders).append('px\"\/><\/colgroup>');\r\n\t\tbuf.append('<tbody id=\"rowHeadersBody'+this.instanceNum+'\">');\r\n\t\tfor(var x=1; x <= this.numberOfRows; x++)\r\n\t\t{\r\n\t\t\tbuf.append('<tr><td class=\"').\r\n\t\t\t\t\tappend(x == 1 ? \"rowFirstCapStart\" : \"rowCapStart\").append('\"><\/td><\/tr>');\r\n\r\n\t\t\tbuf.append('<tr><td class=\"rowHeader\" style=\"height:').append(this.minRowHeight).\r\n\t\t\t\t\tappend('px;\">').append(x).append('<\/td><\/tr>');\r\n\t\t\tbuf.append('<tr><td class=\"rowCapEnd\"><\/td><\/tr>');\r\n\t\t}\r\n\t\tbuf.append('<\/tbody><\/table>');\r\n\r\n\t\tthis.rowHeaders.innerHTML = buf.toString();\r\n\r\n\t\t\/\/get references to col headers table\r\n\t\tthis.colHeadersRow      = document.getElementById(\"colHeadersRow\"+this.instanceNum);\r\n\t\tthis.colHeadersBody     = document.getElementById(\"colHeadersBody\"+this.instanceNum);\r\n\t\tthis.colHeadersColGroup = document.getElementById(\"colHeadersColGroup\"+this.instanceNum);\r\n\t\tthis.colHeadersTable    = document.getElementById(\"colHeadersTable\"+this.instanceNum);\r\n\t\tthis.protoHeaderColTag  = this.getColHeaderCol(0);\r\n\t\tthis.protoColHeaderCell = this.getColHeaderMiddle(0);\r\n\r\n\r\n\t\t\/\/get references to row headers table\r\n\t\tthis.rowHeaders.style.height = this.heightOfSheetWindow +\"px\";\r\n\t\tthis.rowHeadersBody  = document.getElementById(\"rowHeadersBody\"+this.instanceNum);\r\n\t\tthis.rowHeadersTable = document.getElementById(\"rowHeadersTable\"+this.instanceNum); \r\n\t\tvar hRows = this.getRowHeaderRows(0);\r\n\t\tthis.protoRowHeaderStart = hRows[0]; \r\n\t\tthis.protoRowHeaderMain = hRows[1]; \r\n\t\tthis.protoRowHeaderEnd = hRows[2]; \r\n\r\n\t\t\/\/create the sheet\r\n\t\tbuf.clear();\r\n\t\tbuf.append('<!DOCTYPE html PUBLIC \"-\/\/W3C\/\/DTD XHTML 1.0 Transitional\/\/EN\" \"http:\/\/www.w3.org\/TR\/xhtml1\/DTD\/xhtml1-transitional.dtd\"><html xmlns=\"http:\/\/www.w3.org\/1999\/xhtml\"><head><style>body{margin:0px;padding:0px;} table{cursor:default;} td{border:1px solid '+this.cellBorderColor+';padding:2px 2px 2px 2px;}<\/style><\/head><body>');\r\n\t\t\/\/buf.append('<!DOCTYPE html PUBLIC \"-\/\/W3C\/\/DTD XHTML 1.0 Transitional\/\/EN\" \"http:\/\/www.w3.org\/TR\/xhtml1\/DTD\/xhtml1-transitional.dtd\"><html xmlns=\"http:\/\/www.w3.org\/1999\/xhtml\"><head><style>body{margin:0px;padding:0px;} table{cursor:default;} td{border:1px solid '+this.cellBorderColor+';padding:2px 2px 2px 2px;}<\/style><link rel=\"stylesheet\" type=\"text\/css\" href=\"Tracker\/tracker-rowdetail.css\" media=\"all\"><\/head><body>');\r\n\t\t\/\/buf.append('<!DOCTYPE html PUBLIC \"-\/\/W3C\/\/DTD XHTML 1.0 Transitional\/\/EN\" \"http:\/\/www.w3.org\/TR\/xhtml1\/DTD\/xhtml1-transitional.dtd\"><html xmlns=\"http:\/\/www.w3.org\/1999\/xhtml\"><head><style>body{margin:0px;padding:0px;} table{cursor:default;} td{border:1px solid '+this.cellBorderColor+';padding:2px 2px 2px 2px;}<script>document.domain=\"jot.com\";<\/script><\/style><\/head><body>');\r\n\t\tbuf.append('<table name=\"sheet'+this.instanceNum+'\" id=\"sheet'+this.instanceNum+'\" width=\"').append(this.sheetWidth).append('px\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" style=\"table-layout: fixed; width:').append(this.sheetWidth).append('px;\">');\r\n\t\tbuf.append('<colgroup id=\"sheetCols'+this.instanceNum+'\">');\r\n\t\t\/\/create the sheet columns\r\n\t\tfor(var x=0; x < this.numberOfCols; x++)\r\n\t\t{\r\n\t\t\tif ( dojo.render.html.ie )\r\n\t\t\t{\r\n\t\t\t\tbuf.append('<col style=\"width: 94px;\"\/>');\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tbuf.append('<col style=\"width: 100px;\"\/>');\r\n\t\t\t}\r\n\t\t}\r\n\t\tbuf.append('<\/colgroup><tbody id=\"sheetBody'+this.instanceNum+'\">');\r\n\r\n\t\t\/\/create sheet rows and cells\r\n\t\tfor(var x=0; x < this.numberOfRows; x++)\r\n\t\t{\r\n\t\t\tbuf.append('<tr style=\"height: '+this.sheetRowPXHeight+';\">');\r\n\r\n\t\t\tfor(var y=0; y < this.numberOfCols; y++)\r\n\t\t\t{\r\n\t\t\t\tbuf.append('<td>&nbsp;<\/td>');\r\n\t\t\t}\r\n\t\t\tbuf.append('<\/tr>');\r\n\t\t}\r\n\t\tbuf.append('<\/tbody><\/table><\/body><\/html>');\r\n\r\n\t\tif ( dojo.render.html.ie )\r\n\t\t{\r\n\t\t\tthis.sheetFrame.ieFrame = document.frames(\"sheetFrame\");\r\n\t\t\tthis.sheetFrame.contentDocument = document.frames(\"sheetFrame\").document;\r\n\t\t\tthis.sheetFrame.name = \"sheetFrame\" + this.instanceNum;\r\n\t\t}\r\n\t\tthis.sheetFrame.id = \"sheetFrame\" + this.instanceNum;\r\n\t\tvar tw = this;\r\n\r\n\t\t\/\/add the sheet\r\n\t\tthis.sheetFrame.contentDocument.open();\r\n\t\tthis.sheetFrame.contentDocument.write(buf.toString());\r\n\t\tthis.sheetFrame.contentDocument.close();\r\n\r\n\t\tthis.sheet = this.sheetFrame.contentDocument.getElementById(\"sheet\"+this.instanceNum);\r\n\t\tthis.sheetBody = this.sheetFrame.contentDocument.getElementById(\"sheetBody\"+this.instanceNum);\r\n\t\tthis.sheetCols = this.sheetFrame.contentDocument.getElementById(\"sheetCols\"+this.instanceNum);\r\n\t\tthis.protoSheetColTag = this.getSheetCol(0);\r\n\t\tthis.protoSheetRow = this.getSheetRow(0);\r\n\r\n\t\t\/\/Objects that handle selection an area in the standard mode and also\r\n\t\t\/\/when entering a formula to select a cell or range of cells\r\n\t\tthis.activeMS  = new MultiSelectControl(MultiSelectControl.CELLS, this, this.sheetFrame.contentDocument);\r\n\t\tthis.formulaMS = new MultiSelectControl(MultiSelectControl.FORMULA, this, this.sheetFrame.contentDocument, \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.processFormulaMS);\r\n\r\n\t\t\/\/set up the sheet event handlers \r\n\t\tif (this.writePerm)\r\n\t\t{\r\n\t\t\t\/\/colheaders \r\n\t\t\tdojo.event.connect(this.colHeadersBody, \"ondblclick\", this, \"dispatchHeaderDblClick\");\r\n\t\t\tdojo.event.connect(this.colHeadersBody, \"onmouseup\", this, \"resetMouseSelect\");\r\n\t\t\tdojo.event.connect(this.colHeadersBody, \"onmousedown\", this, \"dispatchHeaderClick\");\r\n\t\t\tdojo.event.connect(this.colHeadersBody, \"onmousemove\", this, \"dispatchHeaderMove\");\r\n\r\n\t\t\t\/\/rowheaders\r\n\t\t\tdojo.event.connect(this.rowHeadersBody, \"onmouseup\", this, \"resetMouseSelect\");\r\n\t\t\tdojo.event.connect(this.rowHeadersBody, \"onmousedown\", this, \"dispatchHeaderClick\");\r\n\t\t\tdojo.event.connect(this.rowHeadersBody, \"onmousemove\", this, \"dispatchHeaderMove\");\r\n\r\n\t\t\tdojo.event.connect(this.sheetBody, \"ondblclick\", this, \"editStart\");\r\n\t\t\tdojo.event.connect(this.sheetBody, \"oncontextmenu\", this, \"dispatchContextMenu\");\r\n\t\t}\r\n\t\tdojo.event.connect(this.sheetBody, \"onmousedown\", this, \"dispatchClick\");\r\n\t\tdojo.event.connect(this.sheetBody, \"onmouseup\", this, \"resetMouseSelect\");\r\n\t\tdojo.event.connect(this.sheetBody, \"onmousemove\", this, \"processMouseMove\");\r\n\r\n\r\n\t\t\/\/do browser specific setup\r\n\t\tif ( dojo.render.html.ie ) \r\n\t\t{\r\n\t\t\tvar doc = this.sheetFrame.contentDocument;\r\n\r\n\t\t\tif (this.writePerm)\r\n\t\t\t{\r\n\r\n\t\t\t\tthis.editCell = doc.createElement(\"span\");\r\n\t\t\t\tthis.editCell.style.visibility = \"hidden\";\r\n\t\t\t\tdoc.body.appendChild(this.editCell);\r\n\t\t\t\tthis.editCell.contentEditable = true;\r\n\t\t\t\tdojo.event.connect(doc, \"onkeydown\", this, \"keyDownListener\");\r\n\t\t\t\tdojo.event.connect(doc, \"onkeyup\", this, \"keyUpListener\");\r\n\t\t\t}\r\n\r\n\t\t\t\/\/set sheet move handlers to move the column and row headers when the sheet does\r\n\t\t\tdojo.event.connect( this.sheetFrame.contentDocument.documentElement, \"onscroll\", this, \"ieSyncHeaders\");\r\n\t\t\t\r\n\t\t\t\/\/stops text selection in IE but allow the user to select text when editing\r\n\t\t\tdojo.event.connect(doc, \"onselectstart\", function(e) {\r\n\t\t\t\t\tif ( !tw.editing || e.target != tw.editCell )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\t\telse if ( dojo.render.html.mozilla ) \r\n\t\t{\r\n\t\t\tvar doc = this.sheetFrame.contentDocument;\r\n\t\t\tif ( this.writePerm )\r\n\t\t\t{\r\n\t\t\t\tthis.editCell = doc.createElement(\"iframe\");\r\n\t\t\t\tthis.editCell.src = dojo.uri.dojoUri(\"src\/widget\/jot\/jottable\/blank.html\").toString();\r\n\t\t\t\tthis.editCell.scrolling=\"no\";\r\n\t\t\t\tthis.editCell.frameBorder=\"0\";\r\n\t\t\t\tthis.editCell.style.position=\"absolute\";\r\n\t\t\t\tthis.editCell.style.top = \"200px\";\r\n\t\t\t\tthis.editCell.style.left = \"-100px\";\r\n\t\t\t\tthis.editCell.style.width = \"100px\";\r\n\t\t\t\tthis.editCell.style.height = \"20px\";\r\n\t\t\t\tthis.editCell.style.visibility = \"hidden\";\r\n\t\t\t\tdoc.body.appendChild(this.editCell);\r\n\t\t\t\tthis.geckoSetDesignMode();\r\n\t\t\t\t\/\/this.geckoCellInitialized = false;\r\n\t\t\t\t\/*\r\n\t\t\t\tthis.editCell.onload = dojo.lang.hitch(this, function(){\r\n\t\t\t\t\tif(!this.geckoCellInitialized){\r\n\t\t\t\t\t\tthis.geckoCellInitialized = true;\r\n\t\t\t\t\t\tthis.geckoSetDesignMode();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t*\/\r\n\t\t\t}\r\n\r\n\t\t\t\/\/set sheet move handlers to move the column and row headers when the sheet does\r\n\t\t\t\/\/gecko in FF 1.0.x need to poll because mouse scroll events don't trigger onscoll events\r\n\t\t\tif (parseInt(dojo.render.html.geckoVersion) > 20050915 )\r\n\t\t\t{\r\n\t\t\t\tdojo.event.connect(this.sheetFrame.contentDocument, \"onscroll\", this, \"geckoSyncHeaders\");\r\n\t\t\t}\r\n\r\n\t\t\t\/\/stops text selection in Mozilla\r\n\t\t\tdojo.event.connect(doc, \"onmousedown\", function(e) { e.preventDefault(); });\r\n\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.processMouseMove":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t{\r\n\t\t\t\/\/do we need to scroll right\r\n\t\t\tif ( e.clientX <= this.scrollMargin )\r\n\t\t\t{\r\n\t\t\t\tthis.scrollSheet(null, this.mouseOverCellCol-1, this.mouseOverCellRow);\r\n\t\t\t}\r\n\t\t\t\/\/do we need to scroll left \r\n\t\t\telse if ( e.clientX >= this.widthOfSheetWindow-this.scrollMargin-this.scrollBarOffset )\r\n\t\t\t{\r\n\t\t\t\tthis.scrollSheet(null, this.mouseOverCellCol+1, this.mouseOverCellRow);\r\n\t\t\t}\r\n\r\n\t\t\t\/\/do we need to scroll up \r\n\t\t\tif ( e.clientY <= this.scrollMargin )\r\n\t\t\t{\r\n\t\t\t\tthis.scrollSheet(null, this.mouseOverCellCol, this.mouseOverCellRow-1);\r\n\t\t\t}\r\n\t\t\t\/\/do we need to scroll down \r\n\t\t\telse if ( e.clientY >= this.heightOfSheetWindow-this.scrollMargin-this.scrollBarOffset )\r\n\t\t\t{\r\n\t\t\t\tthis.scrollSheet(null, this.mouseOverCellCol, this.mouseOverCellRow+1);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if ( this.resizeParts )\r\n\t\t{\r\n\t\t\tif (dojo.render.html.ie || (dojo.render.html.mozilla && (parseInt(dojo.render.html.geckoVersion) > 20050915)) )\r\n\t\t\t{\r\n\t\t\t\te.clientXAdjust = this.layoutTable.offsetLeft + this.widthOfRowHeaders;\r\n\t\t\t\te.clientYAdjust = this.layoutTable.offsetTop + this.heightOfColHeaders;\r\n\t\t\t}\r\n\t\t\tthis.resize(e);\r\n\t\t}\r\n\r\n\t\t\/\/see if we entered a new cell\r\n\t\tvar cell = this.getCellFromChild(e.target);\r\n\t\tif ( cell != this.mouseOverCell )\r\n\t\t{\r\n\t\t\tthis.enterCell(cell);\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.dispatchClick":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar cell = this.getCellFromChild(e.target);\r\n\t\tif (cell && cell != this.curOpenRowDetailCell)\r\n\t\t{\r\n\t\t\tthis.mouseDown = true;\r\n\t\t\tthis.cellSelected(cell);\r\n\t\t}\r\n\r\n\t\t\/\/make sure the context menus are closed\r\n\t\tthis.colMenu.close();\r\n\t\tthis.sheetMenu.close();\r\n\t\tthis.rowMenu.close();\r\n\t\tif ( this.foreColorDialog.isSelected() )\r\n\t\t{\r\n\t\t\tthis.foreColorDialog.hideDialog();\r\n\t\t\tthis.foreColorDialog.deselect(true, true);\r\n\t\t}\r\n\r\n\t\tif ( this.backColorDialog.isSelected() )\r\n\t\t{\r\n\t\t\tthis.backColorDialog.hideDialog();\r\n\t\t\tthis.backColorDialog.deselect(true, true);\r\n\t\t}\r\n\r\n\t\tif ( this.cellDialog && this.cellDialog.isShowing() )\r\n\t\t{\r\n\t\t\tthis.cellDialog.hide();\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.dispatchContextMenu":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar adjustX = e.clientX + this.getSheetAbsoluteX();\r\n\t\tvar adjustY = e.clientY + this.getSheetAbsoluteY();\r\n\r\n\t\tif ( this.extraDataTimeoutId )\r\n\t\t{\r\n\t\t\tclearTimeout(this.extraDataTimeoutId);\r\n\t\t\tthis.extraDataTimeoutId = null;\r\n\t\t}\r\n\r\n\t\tif ( this.cellDialog && this.cellDialog.isShowing() )\r\n\t\t{\r\n\t\t\tthis.cellDialog.hide();\r\n\t\t}\r\n\r\n\t\tthis.sheetMenu.open(adjustX, adjustY, null, [adjustX, adjustY]);\r\n\t\te.preventDefault();\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.dispatchHeaderClick":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar header = this.getCellFromChild(e.target);\r\n\t\tif ( dojo.string.endsWith(header.className, \"Header\") )\r\n\t\t{\r\n\t\t\tthis.mouseDown = true;\r\n\t\t\tthis.headerSelected(e, header);\r\n\t\t}\r\n\t\t\/\/must be a resize\r\n\t\telse \r\n\t\t{\r\n\t\t\tthis.resizeStart(e, header);\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.dispatchHeaderDblClick":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar header = e.target;\r\n\t\tif ( !dojo.string.endsWith(header.className, \"Header\") )\r\n\t\t{\r\n\t\t\tthis.doubleClickResize(header);\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.dispatchHeaderMove":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif ( this.resizeParts )\r\n\t\t{\r\n\t\t\tthis.resize(e);\r\n\t\t}\r\n\t\telse if ( this.selectType )\r\n\t\t{\r\n\t\t\tthis.enteredHeader(e);\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getCell":{"_":{"meta":{"summary":"","parameters":{"column":{"type":""},"row":{"type":""}},"src":"\t\treturn this.sheetBody.rows[row].cells[column];\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getCellFromString":{"_":{"meta":{"summary":"","parameters":{"colRowString":{"type":""}},"src":"\t\tvar colRow = colRowString.split(',');\r\n\t\treturn this.getCell(colRow[0], colRow[1]);\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getColHeaders":{"_":{"meta":{"summary":"","parameters":{"col":{"type":""}},"src":"\t\tvar ret = [];\r\n\t\tvar colIndex = col*3;\r\n\r\n\t\tret[0] = this.colHeadersBody.rows[0].cells[colIndex++];\r\n\t\tret[1] = this.colHeadersBody.rows[0].cells[colIndex++];\r\n\t\tret[2] = this.colHeadersBody.rows[0].cells[colIndex];\r\n\r\n\t\treturn ret;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getColHeadersCols":{"_":{"meta":{"summary":"","parameters":{"col":{"type":""}},"src":"\t\tvar ret = [];\r\n\t\tvar colIndex = col*3;\r\n\r\n\t\tret[0] = this.colHeadersColGroup.childNodes[colIndex++];\r\n\t\tret[1] = this.colHeadersColGroup.childNodes[colIndex++];\r\n\t\tret[2] = this.colHeadersColGroup.childNodes[colIndex];\r\n\r\n\t\treturn ret;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getColHeaderStart":{"_":{"meta":{"summary":"","parameters":{"col":{"type":""}},"src":"\t\treturn this.colHeadersBody.rows[0].cells[col*3];\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getColHeaderMiddle":{"_":{"meta":{"summary":"","parameters":{"col":{"type":""}},"src":"\t\treturn this.colHeadersBody.rows[0].cells[col*3+1];\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getColHeaderCol":{"_":{"meta":{"summary":"","parameters":{"col":{"type":""}},"src":"\t\treturn this.colHeadersColGroup.childNodes[col*3+1];\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getColHeaderColNum":{"_":{"meta":{"summary":"","parameters":{"header":{"type":""}},"src":"\t\treturn header.cellIndex == 1 ? 0 : (header.cellIndex-1)\/3;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getRowHeaders":{"_":{"meta":{"summary":"","parameters":{"row":{"type":""}},"src":"\t\tvar ret = [];\r\n\t\tvar rowIndex = row*3;\r\n\r\n\t\tret[0] = this.rowHeadersBody.rows[rowIndex++].cells[0];\r\n\t\tret[1] = this.rowHeadersBody.rows[rowIndex++].cells[0];\r\n\t\tret[2] = this.rowHeadersBody.rows[rowIndex].cells[0];\r\n\r\n\t\treturn ret;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getRowHeaderMiddle":{"_":{"meta":{"summary":"","parameters":{"row":{"type":""}},"src":"\t\t return this.rowHeadersBody.rows[row*3+1].cells[0];\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getRowHeaderStartRow":{"_":{"meta":{"summary":"","parameters":{"row":{"type":""}},"src":"\t\tvar rowIndex = row*3;\r\n\r\n\t\treturn this.rowHeadersBody.rows[rowIndex];\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getRowHeaderRows":{"_":{"meta":{"summary":"","parameters":{"row":{"type":""}},"src":"\t\tvar ret = [];\r\n\t\tvar rowIndex = row*3;\r\n\r\n\t\tret[0] = this.rowHeadersBody.rows[rowIndex++];\r\n\t\tret[1] = this.rowHeadersBody.rows[rowIndex++];\r\n\t\tret[2] = this.rowHeadersBody.rows[rowIndex];\r\n\r\n\t\treturn ret;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.calcHeaderParts":{"_":{"meta":{"summary":"","parameters":{"header":{"type":""}},"src":"\t\tvar ret = new Array();\r\n\r\n\t\t\/\/is this a col or row resize\r\n\t\tret[0] = header.className.substring(0,3);\r\n\r\n\t\tif ( ret[0] == \"col\" )\r\n\t\t{\r\n\t\t\t\/\/when the start cap triggers the resize the user\r\n\t\t\t\/\/really ment to resize the previous col\r\n\t\t\tif ( dojo.string.endsWith(header.className, \"Start\") )\r\n\t\t\t{\r\n\t\t\t\tret[1] = (header.cellIndex)\/3-1;\r\n\t\t\t}\r\n\t\t\telse if ( dojo.string.endsWith(header.className, \"End\") )\r\n\t\t\t{\r\n\t\t\t\tret[1] = (header.cellIndex+1)\/3-1;\r\n\t\t\t}\r\n\t\t\t\/\/must be a middle\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tret[1] = header.cellIndex == 1 ? 0 : (header.cellIndex-1)\/3;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\/\/row\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/when the start cap triggers the resize the user\r\n\t\t\t\/\/really ment to resize the previous col\r\n\t\t\tif ( dojo.string.endsWith(header.className, \"Start\") )\r\n\t\t\t{\r\n\t\t\t\tret[1] = header.parentNode.rowIndex\/3-1;\r\n\t\t\t}\r\n\t\t\t\/\/must be an end\r\n\t\t\telse if ( dojo.string.endsWith(header.className, \"End\") )\r\n\t\t\t{\r\n\t\t\t\tret[1] = (header.parentNode.rowIndex+1)\/3-1;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tret[1] = header.parentNode.rowIndex == 1 ? 0 : (header.parentNode.rowIndex-1)\/3;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn ret;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getCellFromChild":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\treturn dojo.html.getFirstAncestorByTag(node, \"td\");\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getRowFromChild":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\treturn dojo.html.getFirstAncestorByTag(node, \"tr\");\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getSheetCol":{"_":{"meta":{"summary":"","parameters":{"col":{"type":""}},"src":"\t\treturn this.sheetCols.childNodes[col];\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getSheetRow":{"_":{"meta":{"summary":"","parameters":{"row":{"type":""}},"src":"\t\treturn this.sheetBody.rows[row];\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getCellColAndRow":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""}},"src":"\t\tvar ret = [];\r\n\t\tret[0] = cell.cellIndex;\r\n\t\tret[1] = cell.parentNode.rowIndex;\r\n\r\n\t\treturn ret;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getCellCol":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""}},"src":"\t\treturn cell.cellIndex;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getCellRow":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""}},"src":"\t\treturn cell.parentNode.rowIndex;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getInnerHTML":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""}},"src":"\t\tif ( cell.firstChild.nodeName == \"DIV\" )\r\n\t\t{\r\n\t\t\treturn cell.firstChild.innerHTML;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\treturn cell.innerHTML;\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.hasFloater":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""}},"src":"\t\tif ( cell.firstChild )\r\n\t\t{\r\n\t\t\treturn cell.firstChild.nodeName == \"DIV\";\r\n\t\t}\r\n\r\n\t\treturn false;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getEffectiveWidth":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""}},"src":"\t\treturn cell.offsetWidth - this.resizeMargin;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.calcCellTop":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""}},"src":"","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.calcCellLeft":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""}},"src":"","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.selectRowAndFocus":{"_":{"meta":{"summary":"","parameters":{"row":{"type":""}},"src":"\t\tthis.activeMS.multiSelect(-1, row);\r\n\t\tthis.scrollSheet(this.selectedCell);\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.selectCellAndFocus":{"_":{"meta":{"summary":"","parameters":{"col":{"type":""},"row":{"type":""}},"src":"\t\tvar cell = this.getCell(col, row);\r\n\r\n\t\tthis.scrollSheet(cell);\r\n\t\tthis.cellSelected(cell);\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.cellSelected":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""}},"src":"\t\t{\r\n\t\t\tthis.editFromMouse = true;\r\n\t\t\t\/\/TODO:need to check if the click was past the text\r\n\t\t\t\/\/and do the IE text range magic\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\/\/when editing and user clicks a new cell end the edit\r\n\t\telse if ( this.editing && !this.inFormula)\r\n\t\t{\r\n\t\t\tthis.editEnd();\r\n\t\t}\r\n\r\n\t\tvar col = this.getCellCol(cell);\r\n\t\tvar row = this.getCellRow(cell);\r\n\r\n\t\tif ( this.inFormula )\r\n\t\t{\r\n\t\t\t\/\/need to hide in case the user did a col or row ms\r\n\t\t\tthis.formulaMS.hide();\r\n\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/clear last selected cell border\r\n\t\t\tthis.selectedCell.style.padding = this.cellPadding; \r\n\t\t\tthis.selectedCell.style.border  = this.cellBorder; \r\n\t\t\tthis.unSelectColAndRow();\r\n\r\n\t\t\tthis.selectedCell = cell;\r\n\r\n\t\t\t\/\/condition where we had a multiselect so need to reset the multiSelect state\r\n\t\t\tif ( this.inMultiSelect && !this.multiSelectKeep )\r\n\t\t\t{\r\n\t\t\t\tthis.inMultiSelect = false;\r\n\t\t\t\tthis.activeMS.hide();\r\n\t\t\t\tthis.activeMS.setReplicator(cell);\r\n\t\t\t}\r\n\t\t\telse if ( this.multiSelectKeep )\r\n\t\t\t{\r\n\t\t\t\tthis.multiSelectKeep = false;\r\n\t\t\t\tthis.msSelectedCellBackground.setLocAndSize(cell);\t\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.activeMS.setReplicator(cell);\r\n\t\t\t}\r\n\r\n\t\t\tthis.activeMS.setFirstCell(cell);\r\n\r\n\t\t\t\/\/debug(\"td id = \" + w.selectedCell.id + \" width = \" + w.selectedCell.offsetWidth + \" height = \" + w.selectedCell.offsetHeight + \" offsetTop = \" + w.selectedCell.offsetTop + \" left = \" + w.selectedCell.offsetLeft);\r\n\t\t\tcell.style.padding = this.selectedCellPadding;\r\n\t\t\tcell.style.border = this.selectedCellBorder; \r\n\r\n\r\n\t\t\t\/\/select header and row\r\n\t\t\tthis.selectColAndRow(col, row);\r\n\r\n\t\t\tthis.selectedCellDI = this.dp.getValueAt(col, row);\r\n\t\t\tthis.selectedCellCol = col;\r\n\t\t\tthis.selectedCellRow = row;\r\n\t\t\tthis.processCellText();\r\n\t\t\tthis.setToolbarState(this.selectedCellDI);\r\n\r\n\t\t\t\/\/need to make sure the edit cell for gecko is in the correct place\r\n\t\t\t\/\/or strange scrolling things can happen\r\n\t\t\tif ( dojo.render.html.mozilla ) \r\n\t\t\t{\r\n\t\t\t\tthis.placeGeckoEditCell(this, 0, 0);\r\n\t\t\t}\r\n\r\n\t\t\tthis.focusOnSheet();\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.unSelectColAndRow":{"_":{"meta":{"summary":"","src":"\t\tthis.selectedColHeader[1].style.backgroundColor = this.headerBackgroundColor;\r\n\t\tthis.selectedColHeader[2].style.backgroundColor = this.headerBackgroundColor;\r\n\r\n        \/\/set row headers\r\n\t\tthis.selectedRowHeader[0].style.backgroundColor = this.headerBackgroundColor;\r\n\t\tthis.selectedRowHeader[1].style.backgroundColor = this.headerBackgroundColor;\r\n\t\tthis.selectedRowHeader[2].style.backgroundColor = this.headerBackgroundColor;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.selectColAndRow":{"_":{"meta":{"summary":"","parameters":{"col":{"type":""},"row":{"type":""}},"src":"\t\tthis.selectedColHeader[0].style.backgroundColor = \"lightblue\";\r\n\t\tthis.selectedColHeader[1].style.backgroundColor = \"lightblue\";\r\n\t\tthis.selectedColHeader[2].style.backgroundColor = \"lightblue\";\r\n\r\n        \/\/set row headers\r\n\t\tthis.selectedRowHeader = this.getRowHeaders(row);\r\n\t\tthis.selectedRowHeader[0].style.backgroundColor = \"lightblue\";\r\n\t\tthis.selectedRowHeader[1].style.backgroundColor = \"lightblue\";\r\n\t\tthis.selectedRowHeader[2].style.backgroundColor = \"lightblue\";\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.scrollSheet":{"_":{"meta":{"summary":"","parameters":{"nextCell":{"type":""},"col":{"type":""},"row":{"type":""}},"src":"\t\tif ( !nextCell )\r\n\t\t{\r\n\t\t\tif ( col < this.numberOfCols && col >= 0 && row < this.numberOfRows && row >= 0 )\r\n\t\t\t{\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( dojo.render.html.ie )\r\n\t\t{\r\n\t\t\t\/\/see if we need to scroll vitically\r\n\t\t    var de = this.sheetFrame.contentDocument.documentElement; \r\n\t\t\tvar size = nextCell.offsetTop + nextCell.offsetHeight - de.scrollTop + this.scrollBarOffset + 3;\r\n\t\t\tif ( size > this.heightOfSheetWindow)\r\n\t\t\t{\r\n\t\t\t\tde.scrollTop += size - this.heightOfSheetWindow;\r\n\t\t\t}\r\n\t\t\telse if ( (size = nextCell.offsetTop - de.scrollTop) < 0 )\r\n\t\t\t{\r\n\t\t\t\tde.scrollTop += size;\r\n\t\t\t}\r\n\r\n\t\t\t\/\/see if we need to scroll horizontally \r\n\t\t\tsize = nextCell.offsetLeft + nextCell.offsetWidth - de.scrollLeft + this.scrollBarOffset + 3;\r\n\t\t\tif ( size > this.widthOfSheetWindow)\r\n\t\t\t{\r\n\t\t\t\tde.scrollLeft += size - this.widthOfSheetWindow;\r\n\t\t\t}\r\n\t\t\telse if ( (size = nextCell.offsetLeft - de.scrollLeft) < 0 )\r\n\t\t\t{\r\n\t\t\t\tde.scrollLeft += size;\r\n\t\t\t}\r\n\t\t\tthis.ieSyncHeaders(); \r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/see if we need to scroll vitically\r\n\t\t\tvar sw = this.sheetFrame.contentWindow;\r\n\t\t\tvar size = nextCell.offsetTop + nextCell.offsetHeight - sw.pageYOffset + this.scrollBarOffset + 3;\r\n\t\t\tvar dx = 0;\r\n\t\t\tvar dy = 0;\r\n\t\t\tif ( size > this.heightOfSheetWindow)\r\n\t\t\t{\r\n\t\t\t\tdy = size - this.heightOfSheetWindow;\r\n\t\t\t}\r\n\t\t\telse if ( (size = nextCell.offsetTop - sw.pageYOffset) < 0 )\r\n\t\t\t{\r\n\t\t\t\tdy = size;\r\n\t\t\t}\r\n\r\n\t\t\tif ( dy != 0 )\r\n\t\t\t{\r\n\t\t\t\tthis.placeGeckoEditCell(nextCell, 0, dy);\r\n\t\t\t\tsw.scrollBy(0, dy);\r\n\t\t\t}\r\n\r\n\t\t\t\/\/see if we need to scroll horizontally \r\n\t\t\tsize = nextCell.offsetLeft + nextCell.offsetWidth - sw.pageXOffset + this.scrollBarOffset + 3;\r\n\t\t\tif ( size > this.widthOfSheetWindow)\r\n\t\t\t{\r\n\t\t\t\tdx = size - this.widthOfSheetWindow;\r\n\t\t\t}\r\n\t\t\telse if ( (size = nextCell.offsetLeft - sw.pageXOffset) < 0 )\r\n\t\t\t{\r\n\t\t\t\tdx = size;\r\n\t\t\t}\r\n\r\n\t\t\tif ( dx != 0 )\r\n\t\t\t{\r\n\t\t\t\tthis.placeGeckoEditCell(nextCell, dx, 0);\r\n\t\t\t\tsw.scrollBy(dx, 0);\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.placeGeckoEditCell":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""},"dx":{"type":""},"dy":{"type":""}},"src":"\t\tvar w = this.sheetFrame.contentWindow\r\n\r\n\t\tif ( dy != 0 )\r\n\t\t{\r\n\t\t\tthis.editCell.style.top = cell.offsetTop + \"px\";\r\n\t\t}\r\n\r\n\t\tif ( dx != 0 )\r\n\t\t{\r\n\t\t\tthis.editCell.style.left = cell.offsetLeft + \"px\";\r\n\t\t}\r\n\r\n\t\tif ( w.pageXOffset == 0 && dx == 0)\r\n\t\t{\r\n\t\t\tthis.editCell.style.left = \"-100px\";\r\n\t\t}\r\n\t\telse if ( dx == 0 )\r\n\t\t{\r\n\t\t\tthis.editCell.style.left = w.pageXOffset + \"px\";\r\n\t\t}\r\n\r\n\t\tif ( w.pageYOffset == 0 && dy == 0)\r\n\t\t{\r\n\t\t\tthis.editCell.style.top =  \"-100px\";\r\n\t\t}\r\n\t\telse if ( dy == 0 )\r\n\t\t{\r\n\t\t\tthis.editCell.style.top =  w.pageYOffset + \"px\";\r\n\t\t}\r\n\r\n\t\tthis.editCell.style.width = \"0px\";\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.setBlockKeyEvents":{"_":{"meta":{"summary":"","parameters":{"value":{"type":""}},"src":"\t\tthis.blockKeyEvents = value;\r\n\t\tif ( !value )\r\n\t\t{\r\n\t\t\tthis.focusOnSheet();\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.keyUpListener":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif ( this.blockKeyEvents )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t\/\/when in a ie repeating key state need to change state\r\n\t\tif ( this.ieRepeat == this.REPEATING )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.DONE_REPEATING;\r\n\t\t}\r\n\r\n\t\t\/\/need to set the formulaBar text and if editing handle that as well\r\n\t\tthis.processCellText();\r\n\r\n\t\t\/\/process any keyUp codes we need\r\n\t\tswitch(e.keyCode)\r\n\t\t{\r\n\t\t\tcase 16: \/\/shiftKey\r\n\t\t\t\tthis.resetMouseSelect();\t\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif ( this.preventDefaultKeyBinding ) \r\n\t\t{\r\n\t\t\tthis.preventDefaultKeyBinding = false;\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\t\/*Trying to fix a mac and ff 1.0 bug where using the keyboard to select formula\r\n\t\tranges doesn't work.  But this doesn't always work either so leaving out for now\r\n\t\tif ( this.inFormula && this.inFormulaMouseAdd && this.processFormulaMS.oldRange )\r\n\t\t{\r\n\t\t\tvar selection = this.editCell.contentWindow.getSelection();\r\n\t\t\tselection.removeAllRanges();\r\n\t\t\tselection.addRange(this.processFormulaMS.oldRange);\r\n\t\t}\r\n\t\t*\/\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.16":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif ( this.blockKeyEvents )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t\/\/when in a ie repeating key state need to change state\r\n\t\tif ( this.ieRepeat == this.REPEATING )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.DONE_REPEATING;\r\n\t\t}\r\n\r\n\t\t\/\/need to set the formulaBar text and if editing handle that as well\r\n\t\tthis.processCellText();\r\n\r\n\t\t\/\/process any keyUp codes we need\r\n\t\tswitch(e.keyCode)\r\n\t\t{\r\n\t\t\tcase 16: \/\/shiftKey\r\n\t\t\t\tthis.resetMouseSelect();\t\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif ( this.preventDefaultKeyBinding ) \r\n\t\t{\r\n\t\t\tthis.preventDefaultKeyBinding = false;\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\t\/*Trying to fix a mac and ff 1.0 bug where using the keyboard to select formula\r\n\t\tranges doesn't work.  But this doesn't always work either so leaving out for now\r\n\t\tif ( this.inFormula && this.inFormulaMouseAdd && this.processFormulaMS.oldRange )\r\n\t\t{\r\n\t\t\tvar selection = this.editCell.contentWindow.getSelection();\r\n\t\t\tselection.removeAllRanges();\r\n\t\t\tselection.addRange(this.processFormulaMS.oldRange);\r\n\t\t}\r\n\t\t*\/\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.keyDownListener":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif ( this.blockKeyEvents )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar keyCode;\r\n\t\tvar navKey = false;\r\n\r\n\t\t\/\/when we are doing the repeating ignor ie's keyboard events\r\n\t\tif ( this.ieRepeat == this.REPEATING && e)\r\n\t\t{\r\n\t\t\tdojo.event.browser.stopEvent(e);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\/\/use the last keyCode when we are doing the repeating for ie\r\n\t\telse if ( !e )\r\n\t\t{\r\n\t\t\tkeyCode = this.keyDownListener.ieKeyCode;\r\n\r\n\t\t\te = new Object(); \r\n\t\t\te.shiftKey = this.keyDownListener.shiftKey;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tkeyCode = e.keyCode;\r\n\t\t}\r\n\r\n\t\tif ( this.editing )\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( !this.editFromMouse ) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ESCAPE: \/\/esc\r\n\t\t\t\t\tthis.editEnd(this.ESC);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\/\/keyboard nav control\r\n\t\telse\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol+1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol+1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomRow != this.numberOfRows )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow+1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != this.numberOfRows)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow+1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol-1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol-1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow-1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow-1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_F2:\r\n\t\t\t\t\tvar event = {};\r\n\t\t\t\t\tevent.x = this.selectedCell.offsetLeft + this.selectedCell.offsetWidth + this.editCellSizer.offsetWidth;\r\n\t\t\t\t\tevent.y = this.selectedCell.offsetTop + this.selectedCell.offsetHeight\/2;\r\n\t\t\t\t\tevent.clientX = event.x;\r\n\t\t\t\t\tevent.clientY = event.x;\r\n\t\t\t\t\tthis.editStart(event, false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_HOME:\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, 0));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, this.selectedCellRow));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DELETE:\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.activeMS.deleteSelectedArea();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.setCellText(\"&nbsp;\", this.selectedCell, this.selectedCellDI);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"bold\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"italic\", this.italicBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"underline\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( navKey )\r\n\t\t{\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\t\/\/if this is a printable char or a backspace\r\n\t\telse if ( keyCode > 31 || keyCode == 8)\r\n\t\t{\r\n\t\t\t\/\/see if this letter will cause us to overflow the cell\r\n\t\t\tif ( this.editing )\r\n\t\t\t{\r\n\t\t\t\tthis.checkForEditOverflow( this.selectedCell, this.selectedCellDI, \r\n\t\t\t\t\t\t\t\t\t\t   this.getChar(keyCode, e.shiftKey) + this.editCellSizer.innerHTML);\r\n\t\t\t\r\n\t\t\t\t\/\/if the user typed a char then need to kill the selection so \r\n\t\t\t\t\/\/that the added cell or range doesn't get erased by the new char\r\n\t\t\t\tif ( this.inFormula && this.inFormulaMouseAdd )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.inFormulaMouseAdd = false;\r\n\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\tif ( dojo.render.html.ie )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.select();\r\n\t\t\t\t\t\tthis.editCell.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editCell.contentWindow.getSelection().collapseToEnd();\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange = null;\r\n\t\t\t\t\t\t\/\/this.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\/\/start editing when user enters key\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.editStart(null, true);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/debug(\"keyCode = \" + keyCode);\r\n\t\t}\r\n\r\n\t\t\/\/TODO:check this out on a slower box to see if we still need this code\r\n\t\t\/\/because it looks to be working without it now\r\n\r\n\t\t\/\/ie batches sending some events when a key is held down so we need to \r\n\t\t\/\/take over sending them but only for nav keys until the key is released\r\n\t\t\/*\r\n\t\tif ( dojo.render.html.ie && navKey && \r\n\t\t\t((this.ieRepeat == this.NO_REPEATING && e.repeat) || this.ieRepeat == this.REPEATING) )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.REPEATING;\r\n\t\t\tthis.keyDownListener.ieKeyCode = keyCode;\r\n\t\t\tthis.keyDownListener.shiftKey  = e.shiftKey;\r\n\t\t\t\/\/window.setTimeout(this.keyDownListener, 1);\r\n\t\t\tdojo.lang.setTimeout(this, this.keyDownListener, 1);\r\n\t\t}\r\n\t\t\/\/re-arm the ieRepeat flag\r\n\t\telse if ( this.ieRepeat == this.DONE_REPEATING )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.NO_REPEATING;\r\n\t\t}\r\n\t\t*\/\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.e.KEY_TAB":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif ( this.blockKeyEvents )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar keyCode;\r\n\t\tvar navKey = false;\r\n\r\n\t\t\/\/when we are doing the repeating ignor ie's keyboard events\r\n\t\tif ( this.ieRepeat == this.REPEATING && e)\r\n\t\t{\r\n\t\t\tdojo.event.browser.stopEvent(e);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\/\/use the last keyCode when we are doing the repeating for ie\r\n\t\telse if ( !e )\r\n\t\t{\r\n\t\t\tkeyCode = this.keyDownListener.ieKeyCode;\r\n\r\n\t\t\te = new Object(); \r\n\t\t\te.shiftKey = this.keyDownListener.shiftKey;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tkeyCode = e.keyCode;\r\n\t\t}\r\n\r\n\t\tif ( this.editing )\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( !this.editFromMouse ) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ESCAPE: \/\/esc\r\n\t\t\t\t\tthis.editEnd(this.ESC);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\/\/keyboard nav control\r\n\t\telse\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol+1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol+1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomRow != this.numberOfRows )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow+1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != this.numberOfRows)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow+1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol-1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol-1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow-1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow-1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_F2:\r\n\t\t\t\t\tvar event = {};\r\n\t\t\t\t\tevent.x = this.selectedCell.offsetLeft + this.selectedCell.offsetWidth + this.editCellSizer.offsetWidth;\r\n\t\t\t\t\tevent.y = this.selectedCell.offsetTop + this.selectedCell.offsetHeight\/2;\r\n\t\t\t\t\tevent.clientX = event.x;\r\n\t\t\t\t\tevent.clientY = event.x;\r\n\t\t\t\t\tthis.editStart(event, false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_HOME:\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, 0));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, this.selectedCellRow));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DELETE:\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.activeMS.deleteSelectedArea();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.setCellText(\"&nbsp;\", this.selectedCell, this.selectedCellDI);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"bold\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"italic\", this.italicBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"underline\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( navKey )\r\n\t\t{\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\t\/\/if this is a printable char or a backspace\r\n\t\telse if ( keyCode > 31 || keyCode == 8)\r\n\t\t{\r\n\t\t\t\/\/see if this letter will cause us to overflow the cell\r\n\t\t\tif ( this.editing )\r\n\t\t\t{\r\n\t\t\t\tthis.checkForEditOverflow( this.selectedCell, this.selectedCellDI, \r\n\t\t\t\t\t\t\t\t\t\t   this.getChar(keyCode, e.shiftKey) + this.editCellSizer.innerHTML);\r\n\t\t\t\r\n\t\t\t\t\/\/if the user typed a char then need to kill the selection so \r\n\t\t\t\t\/\/that the added cell or range doesn't get erased by the new char\r\n\t\t\t\tif ( this.inFormula && this.inFormulaMouseAdd )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.inFormulaMouseAdd = false;\r\n\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\tif ( dojo.render.html.ie )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.select();\r\n\t\t\t\t\t\tthis.editCell.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editCell.contentWindow.getSelection().collapseToEnd();\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange = null;\r\n\t\t\t\t\t\t\/\/this.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\/\/start editing when user enters key\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.editStart(null, true);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/debug(\"keyCode = \" + keyCode);\r\n\t\t}\r\n\r\n\t\t\/\/TODO:check this out on a slower box to see if we still need this code\r\n\t\t\/\/because it looks to be working without it now\r\n\r\n\t\t\/\/ie batches sending some events when a key is held down so we need to \r\n\t\t\/\/take over sending them but only for nav keys until the key is released\r\n\t\t\/*\r\n\t\tif ( dojo.render.html.ie && navKey && \r\n\t\t\t((this.ieRepeat == this.NO_REPEATING && e.repeat) || this.ieRepeat == this.REPEATING) )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.REPEATING;\r\n\t\t\tthis.keyDownListener.ieKeyCode = keyCode;\r\n\t\t\tthis.keyDownListener.shiftKey  = e.shiftKey;\r\n\t\t\t\/\/window.setTimeout(this.keyDownListener, 1);\r\n\t\t\tdojo.lang.setTimeout(this, this.keyDownListener, 1);\r\n\t\t}\r\n\t\t\/\/re-arm the ieRepeat flag\r\n\t\telse if ( this.ieRepeat == this.DONE_REPEATING )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.NO_REPEATING;\r\n\t\t}\r\n\t\t*\/\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.e.KEY_RIGHT_ARROW":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif ( this.blockKeyEvents )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar keyCode;\r\n\t\tvar navKey = false;\r\n\r\n\t\t\/\/when we are doing the repeating ignor ie's keyboard events\r\n\t\tif ( this.ieRepeat == this.REPEATING && e)\r\n\t\t{\r\n\t\t\tdojo.event.browser.stopEvent(e);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\/\/use the last keyCode when we are doing the repeating for ie\r\n\t\telse if ( !e )\r\n\t\t{\r\n\t\t\tkeyCode = this.keyDownListener.ieKeyCode;\r\n\r\n\t\t\te = new Object(); \r\n\t\t\te.shiftKey = this.keyDownListener.shiftKey;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tkeyCode = e.keyCode;\r\n\t\t}\r\n\r\n\t\tif ( this.editing )\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( !this.editFromMouse ) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ESCAPE: \/\/esc\r\n\t\t\t\t\tthis.editEnd(this.ESC);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\/\/keyboard nav control\r\n\t\telse\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol+1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol+1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomRow != this.numberOfRows )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow+1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != this.numberOfRows)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow+1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol-1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol-1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow-1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow-1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_F2:\r\n\t\t\t\t\tvar event = {};\r\n\t\t\t\t\tevent.x = this.selectedCell.offsetLeft + this.selectedCell.offsetWidth + this.editCellSizer.offsetWidth;\r\n\t\t\t\t\tevent.y = this.selectedCell.offsetTop + this.selectedCell.offsetHeight\/2;\r\n\t\t\t\t\tevent.clientX = event.x;\r\n\t\t\t\t\tevent.clientY = event.x;\r\n\t\t\t\t\tthis.editStart(event, false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_HOME:\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, 0));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, this.selectedCellRow));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DELETE:\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.activeMS.deleteSelectedArea();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.setCellText(\"&nbsp;\", this.selectedCell, this.selectedCellDI);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"bold\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"italic\", this.italicBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"underline\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( navKey )\r\n\t\t{\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\t\/\/if this is a printable char or a backspace\r\n\t\telse if ( keyCode > 31 || keyCode == 8)\r\n\t\t{\r\n\t\t\t\/\/see if this letter will cause us to overflow the cell\r\n\t\t\tif ( this.editing )\r\n\t\t\t{\r\n\t\t\t\tthis.checkForEditOverflow( this.selectedCell, this.selectedCellDI, \r\n\t\t\t\t\t\t\t\t\t\t   this.getChar(keyCode, e.shiftKey) + this.editCellSizer.innerHTML);\r\n\t\t\t\r\n\t\t\t\t\/\/if the user typed a char then need to kill the selection so \r\n\t\t\t\t\/\/that the added cell or range doesn't get erased by the new char\r\n\t\t\t\tif ( this.inFormula && this.inFormulaMouseAdd )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.inFormulaMouseAdd = false;\r\n\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\tif ( dojo.render.html.ie )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.select();\r\n\t\t\t\t\t\tthis.editCell.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editCell.contentWindow.getSelection().collapseToEnd();\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange = null;\r\n\t\t\t\t\t\t\/\/this.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\/\/start editing when user enters key\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.editStart(null, true);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/debug(\"keyCode = \" + keyCode);\r\n\t\t}\r\n\r\n\t\t\/\/TODO:check this out on a slower box to see if we still need this code\r\n\t\t\/\/because it looks to be working without it now\r\n\r\n\t\t\/\/ie batches sending some events when a key is held down so we need to \r\n\t\t\/\/take over sending them but only for nav keys until the key is released\r\n\t\t\/*\r\n\t\tif ( dojo.render.html.ie && navKey && \r\n\t\t\t((this.ieRepeat == this.NO_REPEATING && e.repeat) || this.ieRepeat == this.REPEATING) )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.REPEATING;\r\n\t\t\tthis.keyDownListener.ieKeyCode = keyCode;\r\n\t\t\tthis.keyDownListener.shiftKey  = e.shiftKey;\r\n\t\t\t\/\/window.setTimeout(this.keyDownListener, 1);\r\n\t\t\tdojo.lang.setTimeout(this, this.keyDownListener, 1);\r\n\t\t}\r\n\t\t\/\/re-arm the ieRepeat flag\r\n\t\telse if ( this.ieRepeat == this.DONE_REPEATING )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.NO_REPEATING;\r\n\t\t}\r\n\t\t*\/\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.e.KEY_ENTER":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif ( this.blockKeyEvents )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar keyCode;\r\n\t\tvar navKey = false;\r\n\r\n\t\t\/\/when we are doing the repeating ignor ie's keyboard events\r\n\t\tif ( this.ieRepeat == this.REPEATING && e)\r\n\t\t{\r\n\t\t\tdojo.event.browser.stopEvent(e);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\/\/use the last keyCode when we are doing the repeating for ie\r\n\t\telse if ( !e )\r\n\t\t{\r\n\t\t\tkeyCode = this.keyDownListener.ieKeyCode;\r\n\r\n\t\t\te = new Object(); \r\n\t\t\te.shiftKey = this.keyDownListener.shiftKey;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tkeyCode = e.keyCode;\r\n\t\t}\r\n\r\n\t\tif ( this.editing )\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( !this.editFromMouse ) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ESCAPE: \/\/esc\r\n\t\t\t\t\tthis.editEnd(this.ESC);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\/\/keyboard nav control\r\n\t\telse\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol+1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol+1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomRow != this.numberOfRows )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow+1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != this.numberOfRows)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow+1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol-1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol-1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow-1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow-1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_F2:\r\n\t\t\t\t\tvar event = {};\r\n\t\t\t\t\tevent.x = this.selectedCell.offsetLeft + this.selectedCell.offsetWidth + this.editCellSizer.offsetWidth;\r\n\t\t\t\t\tevent.y = this.selectedCell.offsetTop + this.selectedCell.offsetHeight\/2;\r\n\t\t\t\t\tevent.clientX = event.x;\r\n\t\t\t\t\tevent.clientY = event.x;\r\n\t\t\t\t\tthis.editStart(event, false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_HOME:\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, 0));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, this.selectedCellRow));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DELETE:\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.activeMS.deleteSelectedArea();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.setCellText(\"&nbsp;\", this.selectedCell, this.selectedCellDI);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"bold\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"italic\", this.italicBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"underline\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( navKey )\r\n\t\t{\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\t\/\/if this is a printable char or a backspace\r\n\t\telse if ( keyCode > 31 || keyCode == 8)\r\n\t\t{\r\n\t\t\t\/\/see if this letter will cause us to overflow the cell\r\n\t\t\tif ( this.editing )\r\n\t\t\t{\r\n\t\t\t\tthis.checkForEditOverflow( this.selectedCell, this.selectedCellDI, \r\n\t\t\t\t\t\t\t\t\t\t   this.getChar(keyCode, e.shiftKey) + this.editCellSizer.innerHTML);\r\n\t\t\t\r\n\t\t\t\t\/\/if the user typed a char then need to kill the selection so \r\n\t\t\t\t\/\/that the added cell or range doesn't get erased by the new char\r\n\t\t\t\tif ( this.inFormula && this.inFormulaMouseAdd )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.inFormulaMouseAdd = false;\r\n\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\tif ( dojo.render.html.ie )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.select();\r\n\t\t\t\t\t\tthis.editCell.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editCell.contentWindow.getSelection().collapseToEnd();\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange = null;\r\n\t\t\t\t\t\t\/\/this.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\/\/start editing when user enters key\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.editStart(null, true);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/debug(\"keyCode = \" + keyCode);\r\n\t\t}\r\n\r\n\t\t\/\/TODO:check this out on a slower box to see if we still need this code\r\n\t\t\/\/because it looks to be working without it now\r\n\r\n\t\t\/\/ie batches sending some events when a key is held down so we need to \r\n\t\t\/\/take over sending them but only for nav keys until the key is released\r\n\t\t\/*\r\n\t\tif ( dojo.render.html.ie && navKey && \r\n\t\t\t((this.ieRepeat == this.NO_REPEATING && e.repeat) || this.ieRepeat == this.REPEATING) )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.REPEATING;\r\n\t\t\tthis.keyDownListener.ieKeyCode = keyCode;\r\n\t\t\tthis.keyDownListener.shiftKey  = e.shiftKey;\r\n\t\t\t\/\/window.setTimeout(this.keyDownListener, 1);\r\n\t\t\tdojo.lang.setTimeout(this, this.keyDownListener, 1);\r\n\t\t}\r\n\t\t\/\/re-arm the ieRepeat flag\r\n\t\telse if ( this.ieRepeat == this.DONE_REPEATING )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.NO_REPEATING;\r\n\t\t}\r\n\t\t*\/\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.e.KEY_DOWN_ARROW":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif ( this.blockKeyEvents )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar keyCode;\r\n\t\tvar navKey = false;\r\n\r\n\t\t\/\/when we are doing the repeating ignor ie's keyboard events\r\n\t\tif ( this.ieRepeat == this.REPEATING && e)\r\n\t\t{\r\n\t\t\tdojo.event.browser.stopEvent(e);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\/\/use the last keyCode when we are doing the repeating for ie\r\n\t\telse if ( !e )\r\n\t\t{\r\n\t\t\tkeyCode = this.keyDownListener.ieKeyCode;\r\n\r\n\t\t\te = new Object(); \r\n\t\t\te.shiftKey = this.keyDownListener.shiftKey;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tkeyCode = e.keyCode;\r\n\t\t}\r\n\r\n\t\tif ( this.editing )\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( !this.editFromMouse ) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ESCAPE: \/\/esc\r\n\t\t\t\t\tthis.editEnd(this.ESC);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\/\/keyboard nav control\r\n\t\telse\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol+1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol+1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomRow != this.numberOfRows )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow+1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != this.numberOfRows)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow+1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol-1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol-1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow-1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow-1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_F2:\r\n\t\t\t\t\tvar event = {};\r\n\t\t\t\t\tevent.x = this.selectedCell.offsetLeft + this.selectedCell.offsetWidth + this.editCellSizer.offsetWidth;\r\n\t\t\t\t\tevent.y = this.selectedCell.offsetTop + this.selectedCell.offsetHeight\/2;\r\n\t\t\t\t\tevent.clientX = event.x;\r\n\t\t\t\t\tevent.clientY = event.x;\r\n\t\t\t\t\tthis.editStart(event, false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_HOME:\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, 0));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, this.selectedCellRow));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DELETE:\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.activeMS.deleteSelectedArea();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.setCellText(\"&nbsp;\", this.selectedCell, this.selectedCellDI);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"bold\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"italic\", this.italicBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"underline\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( navKey )\r\n\t\t{\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\t\/\/if this is a printable char or a backspace\r\n\t\telse if ( keyCode > 31 || keyCode == 8)\r\n\t\t{\r\n\t\t\t\/\/see if this letter will cause us to overflow the cell\r\n\t\t\tif ( this.editing )\r\n\t\t\t{\r\n\t\t\t\tthis.checkForEditOverflow( this.selectedCell, this.selectedCellDI, \r\n\t\t\t\t\t\t\t\t\t\t   this.getChar(keyCode, e.shiftKey) + this.editCellSizer.innerHTML);\r\n\t\t\t\r\n\t\t\t\t\/\/if the user typed a char then need to kill the selection so \r\n\t\t\t\t\/\/that the added cell or range doesn't get erased by the new char\r\n\t\t\t\tif ( this.inFormula && this.inFormulaMouseAdd )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.inFormulaMouseAdd = false;\r\n\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\tif ( dojo.render.html.ie )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.select();\r\n\t\t\t\t\t\tthis.editCell.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editCell.contentWindow.getSelection().collapseToEnd();\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange = null;\r\n\t\t\t\t\t\t\/\/this.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\/\/start editing when user enters key\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.editStart(null, true);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/debug(\"keyCode = \" + keyCode);\r\n\t\t}\r\n\r\n\t\t\/\/TODO:check this out on a slower box to see if we still need this code\r\n\t\t\/\/because it looks to be working without it now\r\n\r\n\t\t\/\/ie batches sending some events when a key is held down so we need to \r\n\t\t\/\/take over sending them but only for nav keys until the key is released\r\n\t\t\/*\r\n\t\tif ( dojo.render.html.ie && navKey && \r\n\t\t\t((this.ieRepeat == this.NO_REPEATING && e.repeat) || this.ieRepeat == this.REPEATING) )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.REPEATING;\r\n\t\t\tthis.keyDownListener.ieKeyCode = keyCode;\r\n\t\t\tthis.keyDownListener.shiftKey  = e.shiftKey;\r\n\t\t\t\/\/window.setTimeout(this.keyDownListener, 1);\r\n\t\t\tdojo.lang.setTimeout(this, this.keyDownListener, 1);\r\n\t\t}\r\n\t\t\/\/re-arm the ieRepeat flag\r\n\t\telse if ( this.ieRepeat == this.DONE_REPEATING )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.NO_REPEATING;\r\n\t\t}\r\n\t\t*\/\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.e.KEY_ESCAPE":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif ( this.blockKeyEvents )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar keyCode;\r\n\t\tvar navKey = false;\r\n\r\n\t\t\/\/when we are doing the repeating ignor ie's keyboard events\r\n\t\tif ( this.ieRepeat == this.REPEATING && e)\r\n\t\t{\r\n\t\t\tdojo.event.browser.stopEvent(e);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\/\/use the last keyCode when we are doing the repeating for ie\r\n\t\telse if ( !e )\r\n\t\t{\r\n\t\t\tkeyCode = this.keyDownListener.ieKeyCode;\r\n\r\n\t\t\te = new Object(); \r\n\t\t\te.shiftKey = this.keyDownListener.shiftKey;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tkeyCode = e.keyCode;\r\n\t\t}\r\n\r\n\t\tif ( this.editing )\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( !this.editFromMouse ) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ESCAPE: \/\/esc\r\n\t\t\t\t\tthis.editEnd(this.ESC);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\/\/keyboard nav control\r\n\t\telse\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol+1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol+1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomRow != this.numberOfRows )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow+1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != this.numberOfRows)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow+1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol-1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol-1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow-1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow-1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_F2:\r\n\t\t\t\t\tvar event = {};\r\n\t\t\t\t\tevent.x = this.selectedCell.offsetLeft + this.selectedCell.offsetWidth + this.editCellSizer.offsetWidth;\r\n\t\t\t\t\tevent.y = this.selectedCell.offsetTop + this.selectedCell.offsetHeight\/2;\r\n\t\t\t\t\tevent.clientX = event.x;\r\n\t\t\t\t\tevent.clientY = event.x;\r\n\t\t\t\t\tthis.editStart(event, false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_HOME:\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, 0));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, this.selectedCellRow));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DELETE:\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.activeMS.deleteSelectedArea();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.setCellText(\"&nbsp;\", this.selectedCell, this.selectedCellDI);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"bold\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"italic\", this.italicBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"underline\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( navKey )\r\n\t\t{\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\t\/\/if this is a printable char or a backspace\r\n\t\telse if ( keyCode > 31 || keyCode == 8)\r\n\t\t{\r\n\t\t\t\/\/see if this letter will cause us to overflow the cell\r\n\t\t\tif ( this.editing )\r\n\t\t\t{\r\n\t\t\t\tthis.checkForEditOverflow( this.selectedCell, this.selectedCellDI, \r\n\t\t\t\t\t\t\t\t\t\t   this.getChar(keyCode, e.shiftKey) + this.editCellSizer.innerHTML);\r\n\t\t\t\r\n\t\t\t\t\/\/if the user typed a char then need to kill the selection so \r\n\t\t\t\t\/\/that the added cell or range doesn't get erased by the new char\r\n\t\t\t\tif ( this.inFormula && this.inFormulaMouseAdd )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.inFormulaMouseAdd = false;\r\n\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\tif ( dojo.render.html.ie )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.select();\r\n\t\t\t\t\t\tthis.editCell.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editCell.contentWindow.getSelection().collapseToEnd();\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange = null;\r\n\t\t\t\t\t\t\/\/this.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\/\/start editing when user enters key\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.editStart(null, true);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/debug(\"keyCode = \" + keyCode);\r\n\t\t}\r\n\r\n\t\t\/\/TODO:check this out on a slower box to see if we still need this code\r\n\t\t\/\/because it looks to be working without it now\r\n\r\n\t\t\/\/ie batches sending some events when a key is held down so we need to \r\n\t\t\/\/take over sending them but only for nav keys until the key is released\r\n\t\t\/*\r\n\t\tif ( dojo.render.html.ie && navKey && \r\n\t\t\t((this.ieRepeat == this.NO_REPEATING && e.repeat) || this.ieRepeat == this.REPEATING) )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.REPEATING;\r\n\t\t\tthis.keyDownListener.ieKeyCode = keyCode;\r\n\t\t\tthis.keyDownListener.shiftKey  = e.shiftKey;\r\n\t\t\t\/\/window.setTimeout(this.keyDownListener, 1);\r\n\t\t\tdojo.lang.setTimeout(this, this.keyDownListener, 1);\r\n\t\t}\r\n\t\t\/\/re-arm the ieRepeat flag\r\n\t\telse if ( this.ieRepeat == this.DONE_REPEATING )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.NO_REPEATING;\r\n\t\t}\r\n\t\t*\/\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.e.KEY_LEFT_ARROW":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif ( this.blockKeyEvents )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar keyCode;\r\n\t\tvar navKey = false;\r\n\r\n\t\t\/\/when we are doing the repeating ignor ie's keyboard events\r\n\t\tif ( this.ieRepeat == this.REPEATING && e)\r\n\t\t{\r\n\t\t\tdojo.event.browser.stopEvent(e);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\/\/use the last keyCode when we are doing the repeating for ie\r\n\t\telse if ( !e )\r\n\t\t{\r\n\t\t\tkeyCode = this.keyDownListener.ieKeyCode;\r\n\r\n\t\t\te = new Object(); \r\n\t\t\te.shiftKey = this.keyDownListener.shiftKey;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tkeyCode = e.keyCode;\r\n\t\t}\r\n\r\n\t\tif ( this.editing )\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( !this.editFromMouse ) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ESCAPE: \/\/esc\r\n\t\t\t\t\tthis.editEnd(this.ESC);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\/\/keyboard nav control\r\n\t\telse\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol+1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol+1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomRow != this.numberOfRows )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow+1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != this.numberOfRows)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow+1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol-1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol-1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow-1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow-1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_F2:\r\n\t\t\t\t\tvar event = {};\r\n\t\t\t\t\tevent.x = this.selectedCell.offsetLeft + this.selectedCell.offsetWidth + this.editCellSizer.offsetWidth;\r\n\t\t\t\t\tevent.y = this.selectedCell.offsetTop + this.selectedCell.offsetHeight\/2;\r\n\t\t\t\t\tevent.clientX = event.x;\r\n\t\t\t\t\tevent.clientY = event.x;\r\n\t\t\t\t\tthis.editStart(event, false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_HOME:\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, 0));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, this.selectedCellRow));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DELETE:\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.activeMS.deleteSelectedArea();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.setCellText(\"&nbsp;\", this.selectedCell, this.selectedCellDI);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"bold\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"italic\", this.italicBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"underline\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( navKey )\r\n\t\t{\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\t\/\/if this is a printable char or a backspace\r\n\t\telse if ( keyCode > 31 || keyCode == 8)\r\n\t\t{\r\n\t\t\t\/\/see if this letter will cause us to overflow the cell\r\n\t\t\tif ( this.editing )\r\n\t\t\t{\r\n\t\t\t\tthis.checkForEditOverflow( this.selectedCell, this.selectedCellDI, \r\n\t\t\t\t\t\t\t\t\t\t   this.getChar(keyCode, e.shiftKey) + this.editCellSizer.innerHTML);\r\n\t\t\t\r\n\t\t\t\t\/\/if the user typed a char then need to kill the selection so \r\n\t\t\t\t\/\/that the added cell or range doesn't get erased by the new char\r\n\t\t\t\tif ( this.inFormula && this.inFormulaMouseAdd )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.inFormulaMouseAdd = false;\r\n\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\tif ( dojo.render.html.ie )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.select();\r\n\t\t\t\t\t\tthis.editCell.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editCell.contentWindow.getSelection().collapseToEnd();\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange = null;\r\n\t\t\t\t\t\t\/\/this.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\/\/start editing when user enters key\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.editStart(null, true);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/debug(\"keyCode = \" + keyCode);\r\n\t\t}\r\n\r\n\t\t\/\/TODO:check this out on a slower box to see if we still need this code\r\n\t\t\/\/because it looks to be working without it now\r\n\r\n\t\t\/\/ie batches sending some events when a key is held down so we need to \r\n\t\t\/\/take over sending them but only for nav keys until the key is released\r\n\t\t\/*\r\n\t\tif ( dojo.render.html.ie && navKey && \r\n\t\t\t((this.ieRepeat == this.NO_REPEATING && e.repeat) || this.ieRepeat == this.REPEATING) )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.REPEATING;\r\n\t\t\tthis.keyDownListener.ieKeyCode = keyCode;\r\n\t\t\tthis.keyDownListener.shiftKey  = e.shiftKey;\r\n\t\t\t\/\/window.setTimeout(this.keyDownListener, 1);\r\n\t\t\tdojo.lang.setTimeout(this, this.keyDownListener, 1);\r\n\t\t}\r\n\t\t\/\/re-arm the ieRepeat flag\r\n\t\telse if ( this.ieRepeat == this.DONE_REPEATING )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.NO_REPEATING;\r\n\t\t}\r\n\t\t*\/\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.e.KEY_UP_ARROW":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif ( this.blockKeyEvents )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar keyCode;\r\n\t\tvar navKey = false;\r\n\r\n\t\t\/\/when we are doing the repeating ignor ie's keyboard events\r\n\t\tif ( this.ieRepeat == this.REPEATING && e)\r\n\t\t{\r\n\t\t\tdojo.event.browser.stopEvent(e);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\/\/use the last keyCode when we are doing the repeating for ie\r\n\t\telse if ( !e )\r\n\t\t{\r\n\t\t\tkeyCode = this.keyDownListener.ieKeyCode;\r\n\r\n\t\t\te = new Object(); \r\n\t\t\te.shiftKey = this.keyDownListener.shiftKey;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tkeyCode = e.keyCode;\r\n\t\t}\r\n\r\n\t\tif ( this.editing )\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( !this.editFromMouse ) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ESCAPE: \/\/esc\r\n\t\t\t\t\tthis.editEnd(this.ESC);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\/\/keyboard nav control\r\n\t\telse\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol+1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol+1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomRow != this.numberOfRows )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow+1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != this.numberOfRows)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow+1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol-1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol-1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow-1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow-1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_F2:\r\n\t\t\t\t\tvar event = {};\r\n\t\t\t\t\tevent.x = this.selectedCell.offsetLeft + this.selectedCell.offsetWidth + this.editCellSizer.offsetWidth;\r\n\t\t\t\t\tevent.y = this.selectedCell.offsetTop + this.selectedCell.offsetHeight\/2;\r\n\t\t\t\t\tevent.clientX = event.x;\r\n\t\t\t\t\tevent.clientY = event.x;\r\n\t\t\t\t\tthis.editStart(event, false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_HOME:\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, 0));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, this.selectedCellRow));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DELETE:\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.activeMS.deleteSelectedArea();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.setCellText(\"&nbsp;\", this.selectedCell, this.selectedCellDI);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"bold\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"italic\", this.italicBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"underline\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( navKey )\r\n\t\t{\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\t\/\/if this is a printable char or a backspace\r\n\t\telse if ( keyCode > 31 || keyCode == 8)\r\n\t\t{\r\n\t\t\t\/\/see if this letter will cause us to overflow the cell\r\n\t\t\tif ( this.editing )\r\n\t\t\t{\r\n\t\t\t\tthis.checkForEditOverflow( this.selectedCell, this.selectedCellDI, \r\n\t\t\t\t\t\t\t\t\t\t   this.getChar(keyCode, e.shiftKey) + this.editCellSizer.innerHTML);\r\n\t\t\t\r\n\t\t\t\t\/\/if the user typed a char then need to kill the selection so \r\n\t\t\t\t\/\/that the added cell or range doesn't get erased by the new char\r\n\t\t\t\tif ( this.inFormula && this.inFormulaMouseAdd )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.inFormulaMouseAdd = false;\r\n\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\tif ( dojo.render.html.ie )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.select();\r\n\t\t\t\t\t\tthis.editCell.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editCell.contentWindow.getSelection().collapseToEnd();\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange = null;\r\n\t\t\t\t\t\t\/\/this.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\/\/start editing when user enters key\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.editStart(null, true);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/debug(\"keyCode = \" + keyCode);\r\n\t\t}\r\n\r\n\t\t\/\/TODO:check this out on a slower box to see if we still need this code\r\n\t\t\/\/because it looks to be working without it now\r\n\r\n\t\t\/\/ie batches sending some events when a key is held down so we need to \r\n\t\t\/\/take over sending them but only for nav keys until the key is released\r\n\t\t\/*\r\n\t\tif ( dojo.render.html.ie && navKey && \r\n\t\t\t((this.ieRepeat == this.NO_REPEATING && e.repeat) || this.ieRepeat == this.REPEATING) )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.REPEATING;\r\n\t\t\tthis.keyDownListener.ieKeyCode = keyCode;\r\n\t\t\tthis.keyDownListener.shiftKey  = e.shiftKey;\r\n\t\t\t\/\/window.setTimeout(this.keyDownListener, 1);\r\n\t\t\tdojo.lang.setTimeout(this, this.keyDownListener, 1);\r\n\t\t}\r\n\t\t\/\/re-arm the ieRepeat flag\r\n\t\telse if ( this.ieRepeat == this.DONE_REPEATING )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.NO_REPEATING;\r\n\t\t}\r\n\t\t*\/\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.e.KEY_PAGE_UP":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif ( this.blockKeyEvents )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar keyCode;\r\n\t\tvar navKey = false;\r\n\r\n\t\t\/\/when we are doing the repeating ignor ie's keyboard events\r\n\t\tif ( this.ieRepeat == this.REPEATING && e)\r\n\t\t{\r\n\t\t\tdojo.event.browser.stopEvent(e);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\/\/use the last keyCode when we are doing the repeating for ie\r\n\t\telse if ( !e )\r\n\t\t{\r\n\t\t\tkeyCode = this.keyDownListener.ieKeyCode;\r\n\r\n\t\t\te = new Object(); \r\n\t\t\te.shiftKey = this.keyDownListener.shiftKey;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tkeyCode = e.keyCode;\r\n\t\t}\r\n\r\n\t\tif ( this.editing )\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( !this.editFromMouse ) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ESCAPE: \/\/esc\r\n\t\t\t\t\tthis.editEnd(this.ESC);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\/\/keyboard nav control\r\n\t\telse\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol+1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol+1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomRow != this.numberOfRows )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow+1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != this.numberOfRows)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow+1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol-1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol-1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow-1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow-1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_F2:\r\n\t\t\t\t\tvar event = {};\r\n\t\t\t\t\tevent.x = this.selectedCell.offsetLeft + this.selectedCell.offsetWidth + this.editCellSizer.offsetWidth;\r\n\t\t\t\t\tevent.y = this.selectedCell.offsetTop + this.selectedCell.offsetHeight\/2;\r\n\t\t\t\t\tevent.clientX = event.x;\r\n\t\t\t\t\tevent.clientY = event.x;\r\n\t\t\t\t\tthis.editStart(event, false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_HOME:\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, 0));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, this.selectedCellRow));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DELETE:\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.activeMS.deleteSelectedArea();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.setCellText(\"&nbsp;\", this.selectedCell, this.selectedCellDI);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"bold\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"italic\", this.italicBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"underline\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( navKey )\r\n\t\t{\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\t\/\/if this is a printable char or a backspace\r\n\t\telse if ( keyCode > 31 || keyCode == 8)\r\n\t\t{\r\n\t\t\t\/\/see if this letter will cause us to overflow the cell\r\n\t\t\tif ( this.editing )\r\n\t\t\t{\r\n\t\t\t\tthis.checkForEditOverflow( this.selectedCell, this.selectedCellDI, \r\n\t\t\t\t\t\t\t\t\t\t   this.getChar(keyCode, e.shiftKey) + this.editCellSizer.innerHTML);\r\n\t\t\t\r\n\t\t\t\t\/\/if the user typed a char then need to kill the selection so \r\n\t\t\t\t\/\/that the added cell or range doesn't get erased by the new char\r\n\t\t\t\tif ( this.inFormula && this.inFormulaMouseAdd )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.inFormulaMouseAdd = false;\r\n\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\tif ( dojo.render.html.ie )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.select();\r\n\t\t\t\t\t\tthis.editCell.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editCell.contentWindow.getSelection().collapseToEnd();\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange = null;\r\n\t\t\t\t\t\t\/\/this.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\/\/start editing when user enters key\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.editStart(null, true);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/debug(\"keyCode = \" + keyCode);\r\n\t\t}\r\n\r\n\t\t\/\/TODO:check this out on a slower box to see if we still need this code\r\n\t\t\/\/because it looks to be working without it now\r\n\r\n\t\t\/\/ie batches sending some events when a key is held down so we need to \r\n\t\t\/\/take over sending them but only for nav keys until the key is released\r\n\t\t\/*\r\n\t\tif ( dojo.render.html.ie && navKey && \r\n\t\t\t((this.ieRepeat == this.NO_REPEATING && e.repeat) || this.ieRepeat == this.REPEATING) )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.REPEATING;\r\n\t\t\tthis.keyDownListener.ieKeyCode = keyCode;\r\n\t\t\tthis.keyDownListener.shiftKey  = e.shiftKey;\r\n\t\t\t\/\/window.setTimeout(this.keyDownListener, 1);\r\n\t\t\tdojo.lang.setTimeout(this, this.keyDownListener, 1);\r\n\t\t}\r\n\t\t\/\/re-arm the ieRepeat flag\r\n\t\telse if ( this.ieRepeat == this.DONE_REPEATING )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.NO_REPEATING;\r\n\t\t}\r\n\t\t*\/\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.e.KEY_PAGE_DOWN":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif ( this.blockKeyEvents )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar keyCode;\r\n\t\tvar navKey = false;\r\n\r\n\t\t\/\/when we are doing the repeating ignor ie's keyboard events\r\n\t\tif ( this.ieRepeat == this.REPEATING && e)\r\n\t\t{\r\n\t\t\tdojo.event.browser.stopEvent(e);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\/\/use the last keyCode when we are doing the repeating for ie\r\n\t\telse if ( !e )\r\n\t\t{\r\n\t\t\tkeyCode = this.keyDownListener.ieKeyCode;\r\n\r\n\t\t\te = new Object(); \r\n\t\t\te.shiftKey = this.keyDownListener.shiftKey;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tkeyCode = e.keyCode;\r\n\t\t}\r\n\r\n\t\tif ( this.editing )\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( !this.editFromMouse ) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ESCAPE: \/\/esc\r\n\t\t\t\t\tthis.editEnd(this.ESC);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\/\/keyboard nav control\r\n\t\telse\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol+1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol+1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomRow != this.numberOfRows )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow+1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != this.numberOfRows)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow+1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol-1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol-1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow-1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow-1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_F2:\r\n\t\t\t\t\tvar event = {};\r\n\t\t\t\t\tevent.x = this.selectedCell.offsetLeft + this.selectedCell.offsetWidth + this.editCellSizer.offsetWidth;\r\n\t\t\t\t\tevent.y = this.selectedCell.offsetTop + this.selectedCell.offsetHeight\/2;\r\n\t\t\t\t\tevent.clientX = event.x;\r\n\t\t\t\t\tevent.clientY = event.x;\r\n\t\t\t\t\tthis.editStart(event, false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_HOME:\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, 0));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, this.selectedCellRow));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DELETE:\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.activeMS.deleteSelectedArea();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.setCellText(\"&nbsp;\", this.selectedCell, this.selectedCellDI);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"bold\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"italic\", this.italicBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"underline\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( navKey )\r\n\t\t{\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\t\/\/if this is a printable char or a backspace\r\n\t\telse if ( keyCode > 31 || keyCode == 8)\r\n\t\t{\r\n\t\t\t\/\/see if this letter will cause us to overflow the cell\r\n\t\t\tif ( this.editing )\r\n\t\t\t{\r\n\t\t\t\tthis.checkForEditOverflow( this.selectedCell, this.selectedCellDI, \r\n\t\t\t\t\t\t\t\t\t\t   this.getChar(keyCode, e.shiftKey) + this.editCellSizer.innerHTML);\r\n\t\t\t\r\n\t\t\t\t\/\/if the user typed a char then need to kill the selection so \r\n\t\t\t\t\/\/that the added cell or range doesn't get erased by the new char\r\n\t\t\t\tif ( this.inFormula && this.inFormulaMouseAdd )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.inFormulaMouseAdd = false;\r\n\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\tif ( dojo.render.html.ie )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.select();\r\n\t\t\t\t\t\tthis.editCell.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editCell.contentWindow.getSelection().collapseToEnd();\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange = null;\r\n\t\t\t\t\t\t\/\/this.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\/\/start editing when user enters key\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.editStart(null, true);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/debug(\"keyCode = \" + keyCode);\r\n\t\t}\r\n\r\n\t\t\/\/TODO:check this out on a slower box to see if we still need this code\r\n\t\t\/\/because it looks to be working without it now\r\n\r\n\t\t\/\/ie batches sending some events when a key is held down so we need to \r\n\t\t\/\/take over sending them but only for nav keys until the key is released\r\n\t\t\/*\r\n\t\tif ( dojo.render.html.ie && navKey && \r\n\t\t\t((this.ieRepeat == this.NO_REPEATING && e.repeat) || this.ieRepeat == this.REPEATING) )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.REPEATING;\r\n\t\t\tthis.keyDownListener.ieKeyCode = keyCode;\r\n\t\t\tthis.keyDownListener.shiftKey  = e.shiftKey;\r\n\t\t\t\/\/window.setTimeout(this.keyDownListener, 1);\r\n\t\t\tdojo.lang.setTimeout(this, this.keyDownListener, 1);\r\n\t\t}\r\n\t\t\/\/re-arm the ieRepeat flag\r\n\t\telse if ( this.ieRepeat == this.DONE_REPEATING )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.NO_REPEATING;\r\n\t\t}\r\n\t\t*\/\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.66":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif ( this.blockKeyEvents )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar keyCode;\r\n\t\tvar navKey = false;\r\n\r\n\t\t\/\/when we are doing the repeating ignor ie's keyboard events\r\n\t\tif ( this.ieRepeat == this.REPEATING && e)\r\n\t\t{\r\n\t\t\tdojo.event.browser.stopEvent(e);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\/\/use the last keyCode when we are doing the repeating for ie\r\n\t\telse if ( !e )\r\n\t\t{\r\n\t\t\tkeyCode = this.keyDownListener.ieKeyCode;\r\n\r\n\t\t\te = new Object(); \r\n\t\t\te.shiftKey = this.keyDownListener.shiftKey;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tkeyCode = e.keyCode;\r\n\t\t}\r\n\r\n\t\tif ( this.editing )\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( !this.editFromMouse ) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ESCAPE: \/\/esc\r\n\t\t\t\t\tthis.editEnd(this.ESC);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\/\/keyboard nav control\r\n\t\telse\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol+1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol+1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomRow != this.numberOfRows )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow+1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != this.numberOfRows)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow+1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol-1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol-1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow-1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow-1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_F2:\r\n\t\t\t\t\tvar event = {};\r\n\t\t\t\t\tevent.x = this.selectedCell.offsetLeft + this.selectedCell.offsetWidth + this.editCellSizer.offsetWidth;\r\n\t\t\t\t\tevent.y = this.selectedCell.offsetTop + this.selectedCell.offsetHeight\/2;\r\n\t\t\t\t\tevent.clientX = event.x;\r\n\t\t\t\t\tevent.clientY = event.x;\r\n\t\t\t\t\tthis.editStart(event, false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_HOME:\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, 0));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, this.selectedCellRow));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DELETE:\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.activeMS.deleteSelectedArea();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.setCellText(\"&nbsp;\", this.selectedCell, this.selectedCellDI);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"bold\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"italic\", this.italicBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"underline\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( navKey )\r\n\t\t{\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\t\/\/if this is a printable char or a backspace\r\n\t\telse if ( keyCode > 31 || keyCode == 8)\r\n\t\t{\r\n\t\t\t\/\/see if this letter will cause us to overflow the cell\r\n\t\t\tif ( this.editing )\r\n\t\t\t{\r\n\t\t\t\tthis.checkForEditOverflow( this.selectedCell, this.selectedCellDI, \r\n\t\t\t\t\t\t\t\t\t\t   this.getChar(keyCode, e.shiftKey) + this.editCellSizer.innerHTML);\r\n\t\t\t\r\n\t\t\t\t\/\/if the user typed a char then need to kill the selection so \r\n\t\t\t\t\/\/that the added cell or range doesn't get erased by the new char\r\n\t\t\t\tif ( this.inFormula && this.inFormulaMouseAdd )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.inFormulaMouseAdd = false;\r\n\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\tif ( dojo.render.html.ie )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.select();\r\n\t\t\t\t\t\tthis.editCell.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editCell.contentWindow.getSelection().collapseToEnd();\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange = null;\r\n\t\t\t\t\t\t\/\/this.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\/\/start editing when user enters key\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.editStart(null, true);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/debug(\"keyCode = \" + keyCode);\r\n\t\t}\r\n\r\n\t\t\/\/TODO:check this out on a slower box to see if we still need this code\r\n\t\t\/\/because it looks to be working without it now\r\n\r\n\t\t\/\/ie batches sending some events when a key is held down so we need to \r\n\t\t\/\/take over sending them but only for nav keys until the key is released\r\n\t\t\/*\r\n\t\tif ( dojo.render.html.ie && navKey && \r\n\t\t\t((this.ieRepeat == this.NO_REPEATING && e.repeat) || this.ieRepeat == this.REPEATING) )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.REPEATING;\r\n\t\t\tthis.keyDownListener.ieKeyCode = keyCode;\r\n\t\t\tthis.keyDownListener.shiftKey  = e.shiftKey;\r\n\t\t\t\/\/window.setTimeout(this.keyDownListener, 1);\r\n\t\t\tdojo.lang.setTimeout(this, this.keyDownListener, 1);\r\n\t\t}\r\n\t\t\/\/re-arm the ieRepeat flag\r\n\t\telse if ( this.ieRepeat == this.DONE_REPEATING )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.NO_REPEATING;\r\n\t\t}\r\n\t\t*\/\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.73":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif ( this.blockKeyEvents )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar keyCode;\r\n\t\tvar navKey = false;\r\n\r\n\t\t\/\/when we are doing the repeating ignor ie's keyboard events\r\n\t\tif ( this.ieRepeat == this.REPEATING && e)\r\n\t\t{\r\n\t\t\tdojo.event.browser.stopEvent(e);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\/\/use the last keyCode when we are doing the repeating for ie\r\n\t\telse if ( !e )\r\n\t\t{\r\n\t\t\tkeyCode = this.keyDownListener.ieKeyCode;\r\n\r\n\t\t\te = new Object(); \r\n\t\t\te.shiftKey = this.keyDownListener.shiftKey;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tkeyCode = e.keyCode;\r\n\t\t}\r\n\r\n\t\tif ( this.editing )\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( !this.editFromMouse ) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ESCAPE: \/\/esc\r\n\t\t\t\t\tthis.editEnd(this.ESC);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\/\/keyboard nav control\r\n\t\telse\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol+1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol+1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomRow != this.numberOfRows )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow+1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != this.numberOfRows)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow+1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol-1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol-1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow-1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow-1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_F2:\r\n\t\t\t\t\tvar event = {};\r\n\t\t\t\t\tevent.x = this.selectedCell.offsetLeft + this.selectedCell.offsetWidth + this.editCellSizer.offsetWidth;\r\n\t\t\t\t\tevent.y = this.selectedCell.offsetTop + this.selectedCell.offsetHeight\/2;\r\n\t\t\t\t\tevent.clientX = event.x;\r\n\t\t\t\t\tevent.clientY = event.x;\r\n\t\t\t\t\tthis.editStart(event, false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_HOME:\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, 0));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, this.selectedCellRow));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DELETE:\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.activeMS.deleteSelectedArea();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.setCellText(\"&nbsp;\", this.selectedCell, this.selectedCellDI);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"bold\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"italic\", this.italicBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"underline\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( navKey )\r\n\t\t{\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\t\/\/if this is a printable char or a backspace\r\n\t\telse if ( keyCode > 31 || keyCode == 8)\r\n\t\t{\r\n\t\t\t\/\/see if this letter will cause us to overflow the cell\r\n\t\t\tif ( this.editing )\r\n\t\t\t{\r\n\t\t\t\tthis.checkForEditOverflow( this.selectedCell, this.selectedCellDI, \r\n\t\t\t\t\t\t\t\t\t\t   this.getChar(keyCode, e.shiftKey) + this.editCellSizer.innerHTML);\r\n\t\t\t\r\n\t\t\t\t\/\/if the user typed a char then need to kill the selection so \r\n\t\t\t\t\/\/that the added cell or range doesn't get erased by the new char\r\n\t\t\t\tif ( this.inFormula && this.inFormulaMouseAdd )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.inFormulaMouseAdd = false;\r\n\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\tif ( dojo.render.html.ie )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.select();\r\n\t\t\t\t\t\tthis.editCell.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editCell.contentWindow.getSelection().collapseToEnd();\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange = null;\r\n\t\t\t\t\t\t\/\/this.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\/\/start editing when user enters key\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.editStart(null, true);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/debug(\"keyCode = \" + keyCode);\r\n\t\t}\r\n\r\n\t\t\/\/TODO:check this out on a slower box to see if we still need this code\r\n\t\t\/\/because it looks to be working without it now\r\n\r\n\t\t\/\/ie batches sending some events when a key is held down so we need to \r\n\t\t\/\/take over sending them but only for nav keys until the key is released\r\n\t\t\/*\r\n\t\tif ( dojo.render.html.ie && navKey && \r\n\t\t\t((this.ieRepeat == this.NO_REPEATING && e.repeat) || this.ieRepeat == this.REPEATING) )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.REPEATING;\r\n\t\t\tthis.keyDownListener.ieKeyCode = keyCode;\r\n\t\t\tthis.keyDownListener.shiftKey  = e.shiftKey;\r\n\t\t\t\/\/window.setTimeout(this.keyDownListener, 1);\r\n\t\t\tdojo.lang.setTimeout(this, this.keyDownListener, 1);\r\n\t\t}\r\n\t\t\/\/re-arm the ieRepeat flag\r\n\t\telse if ( this.ieRepeat == this.DONE_REPEATING )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.NO_REPEATING;\r\n\t\t}\r\n\t\t*\/\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.85":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif ( this.blockKeyEvents )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar keyCode;\r\n\t\tvar navKey = false;\r\n\r\n\t\t\/\/when we are doing the repeating ignor ie's keyboard events\r\n\t\tif ( this.ieRepeat == this.REPEATING && e)\r\n\t\t{\r\n\t\t\tdojo.event.browser.stopEvent(e);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\/\/use the last keyCode when we are doing the repeating for ie\r\n\t\telse if ( !e )\r\n\t\t{\r\n\t\t\tkeyCode = this.keyDownListener.ieKeyCode;\r\n\r\n\t\t\te = new Object(); \r\n\t\t\te.shiftKey = this.keyDownListener.shiftKey;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tkeyCode = e.keyCode;\r\n\t\t}\r\n\r\n\t\tif ( this.editing )\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( !this.editFromMouse ) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ESCAPE: \/\/esc\r\n\t\t\t\t\tthis.editEnd(this.ESC);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\/\/keyboard nav control\r\n\t\telse\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol+1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol+1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomRow != this.numberOfRows )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow+1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != this.numberOfRows)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow+1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol-1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol-1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow-1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow-1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_F2:\r\n\t\t\t\t\tvar event = {};\r\n\t\t\t\t\tevent.x = this.selectedCell.offsetLeft + this.selectedCell.offsetWidth + this.editCellSizer.offsetWidth;\r\n\t\t\t\t\tevent.y = this.selectedCell.offsetTop + this.selectedCell.offsetHeight\/2;\r\n\t\t\t\t\tevent.clientX = event.x;\r\n\t\t\t\t\tevent.clientY = event.x;\r\n\t\t\t\t\tthis.editStart(event, false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_HOME:\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, 0));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, this.selectedCellRow));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DELETE:\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.activeMS.deleteSelectedArea();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.setCellText(\"&nbsp;\", this.selectedCell, this.selectedCellDI);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"bold\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"italic\", this.italicBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"underline\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( navKey )\r\n\t\t{\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\t\/\/if this is a printable char or a backspace\r\n\t\telse if ( keyCode > 31 || keyCode == 8)\r\n\t\t{\r\n\t\t\t\/\/see if this letter will cause us to overflow the cell\r\n\t\t\tif ( this.editing )\r\n\t\t\t{\r\n\t\t\t\tthis.checkForEditOverflow( this.selectedCell, this.selectedCellDI, \r\n\t\t\t\t\t\t\t\t\t\t   this.getChar(keyCode, e.shiftKey) + this.editCellSizer.innerHTML);\r\n\t\t\t\r\n\t\t\t\t\/\/if the user typed a char then need to kill the selection so \r\n\t\t\t\t\/\/that the added cell or range doesn't get erased by the new char\r\n\t\t\t\tif ( this.inFormula && this.inFormulaMouseAdd )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.inFormulaMouseAdd = false;\r\n\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\tif ( dojo.render.html.ie )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.select();\r\n\t\t\t\t\t\tthis.editCell.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editCell.contentWindow.getSelection().collapseToEnd();\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange = null;\r\n\t\t\t\t\t\t\/\/this.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\/\/start editing when user enters key\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.editStart(null, true);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/debug(\"keyCode = \" + keyCode);\r\n\t\t}\r\n\r\n\t\t\/\/TODO:check this out on a slower box to see if we still need this code\r\n\t\t\/\/because it looks to be working without it now\r\n\r\n\t\t\/\/ie batches sending some events when a key is held down so we need to \r\n\t\t\/\/take over sending them but only for nav keys until the key is released\r\n\t\t\/*\r\n\t\tif ( dojo.render.html.ie && navKey && \r\n\t\t\t((this.ieRepeat == this.NO_REPEATING && e.repeat) || this.ieRepeat == this.REPEATING) )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.REPEATING;\r\n\t\t\tthis.keyDownListener.ieKeyCode = keyCode;\r\n\t\t\tthis.keyDownListener.shiftKey  = e.shiftKey;\r\n\t\t\t\/\/window.setTimeout(this.keyDownListener, 1);\r\n\t\t\tdojo.lang.setTimeout(this, this.keyDownListener, 1);\r\n\t\t}\r\n\t\t\/\/re-arm the ieRepeat flag\r\n\t\telse if ( this.ieRepeat == this.DONE_REPEATING )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.NO_REPEATING;\r\n\t\t}\r\n\t\t*\/\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.e.KEY_F2":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif ( this.blockKeyEvents )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar keyCode;\r\n\t\tvar navKey = false;\r\n\r\n\t\t\/\/when we are doing the repeating ignor ie's keyboard events\r\n\t\tif ( this.ieRepeat == this.REPEATING && e)\r\n\t\t{\r\n\t\t\tdojo.event.browser.stopEvent(e);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\/\/use the last keyCode when we are doing the repeating for ie\r\n\t\telse if ( !e )\r\n\t\t{\r\n\t\t\tkeyCode = this.keyDownListener.ieKeyCode;\r\n\r\n\t\t\te = new Object(); \r\n\t\t\te.shiftKey = this.keyDownListener.shiftKey;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tkeyCode = e.keyCode;\r\n\t\t}\r\n\r\n\t\tif ( this.editing )\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( !this.editFromMouse ) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ESCAPE: \/\/esc\r\n\t\t\t\t\tthis.editEnd(this.ESC);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\/\/keyboard nav control\r\n\t\telse\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol+1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol+1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomRow != this.numberOfRows )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow+1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != this.numberOfRows)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow+1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol-1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol-1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow-1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow-1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_F2:\r\n\t\t\t\t\tvar event = {};\r\n\t\t\t\t\tevent.x = this.selectedCell.offsetLeft + this.selectedCell.offsetWidth + this.editCellSizer.offsetWidth;\r\n\t\t\t\t\tevent.y = this.selectedCell.offsetTop + this.selectedCell.offsetHeight\/2;\r\n\t\t\t\t\tevent.clientX = event.x;\r\n\t\t\t\t\tevent.clientY = event.x;\r\n\t\t\t\t\tthis.editStart(event, false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_HOME:\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, 0));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, this.selectedCellRow));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DELETE:\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.activeMS.deleteSelectedArea();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.setCellText(\"&nbsp;\", this.selectedCell, this.selectedCellDI);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"bold\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"italic\", this.italicBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"underline\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( navKey )\r\n\t\t{\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\t\/\/if this is a printable char or a backspace\r\n\t\telse if ( keyCode > 31 || keyCode == 8)\r\n\t\t{\r\n\t\t\t\/\/see if this letter will cause us to overflow the cell\r\n\t\t\tif ( this.editing )\r\n\t\t\t{\r\n\t\t\t\tthis.checkForEditOverflow( this.selectedCell, this.selectedCellDI, \r\n\t\t\t\t\t\t\t\t\t\t   this.getChar(keyCode, e.shiftKey) + this.editCellSizer.innerHTML);\r\n\t\t\t\r\n\t\t\t\t\/\/if the user typed a char then need to kill the selection so \r\n\t\t\t\t\/\/that the added cell or range doesn't get erased by the new char\r\n\t\t\t\tif ( this.inFormula && this.inFormulaMouseAdd )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.inFormulaMouseAdd = false;\r\n\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\tif ( dojo.render.html.ie )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.select();\r\n\t\t\t\t\t\tthis.editCell.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editCell.contentWindow.getSelection().collapseToEnd();\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange = null;\r\n\t\t\t\t\t\t\/\/this.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\/\/start editing when user enters key\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.editStart(null, true);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/debug(\"keyCode = \" + keyCode);\r\n\t\t}\r\n\r\n\t\t\/\/TODO:check this out on a slower box to see if we still need this code\r\n\t\t\/\/because it looks to be working without it now\r\n\r\n\t\t\/\/ie batches sending some events when a key is held down so we need to \r\n\t\t\/\/take over sending them but only for nav keys until the key is released\r\n\t\t\/*\r\n\t\tif ( dojo.render.html.ie && navKey && \r\n\t\t\t((this.ieRepeat == this.NO_REPEATING && e.repeat) || this.ieRepeat == this.REPEATING) )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.REPEATING;\r\n\t\t\tthis.keyDownListener.ieKeyCode = keyCode;\r\n\t\t\tthis.keyDownListener.shiftKey  = e.shiftKey;\r\n\t\t\t\/\/window.setTimeout(this.keyDownListener, 1);\r\n\t\t\tdojo.lang.setTimeout(this, this.keyDownListener, 1);\r\n\t\t}\r\n\t\t\/\/re-arm the ieRepeat flag\r\n\t\telse if ( this.ieRepeat == this.DONE_REPEATING )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.NO_REPEATING;\r\n\t\t}\r\n\t\t*\/\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.e.KEY_HOME":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif ( this.blockKeyEvents )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar keyCode;\r\n\t\tvar navKey = false;\r\n\r\n\t\t\/\/when we are doing the repeating ignor ie's keyboard events\r\n\t\tif ( this.ieRepeat == this.REPEATING && e)\r\n\t\t{\r\n\t\t\tdojo.event.browser.stopEvent(e);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\/\/use the last keyCode when we are doing the repeating for ie\r\n\t\telse if ( !e )\r\n\t\t{\r\n\t\t\tkeyCode = this.keyDownListener.ieKeyCode;\r\n\r\n\t\t\te = new Object(); \r\n\t\t\te.shiftKey = this.keyDownListener.shiftKey;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tkeyCode = e.keyCode;\r\n\t\t}\r\n\r\n\t\tif ( this.editing )\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( !this.editFromMouse ) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ESCAPE: \/\/esc\r\n\t\t\t\t\tthis.editEnd(this.ESC);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\/\/keyboard nav control\r\n\t\telse\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol+1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol+1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomRow != this.numberOfRows )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow+1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != this.numberOfRows)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow+1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol-1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol-1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow-1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow-1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_F2:\r\n\t\t\t\t\tvar event = {};\r\n\t\t\t\t\tevent.x = this.selectedCell.offsetLeft + this.selectedCell.offsetWidth + this.editCellSizer.offsetWidth;\r\n\t\t\t\t\tevent.y = this.selectedCell.offsetTop + this.selectedCell.offsetHeight\/2;\r\n\t\t\t\t\tevent.clientX = event.x;\r\n\t\t\t\t\tevent.clientY = event.x;\r\n\t\t\t\t\tthis.editStart(event, false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_HOME:\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, 0));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, this.selectedCellRow));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DELETE:\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.activeMS.deleteSelectedArea();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.setCellText(\"&nbsp;\", this.selectedCell, this.selectedCellDI);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"bold\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"italic\", this.italicBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"underline\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( navKey )\r\n\t\t{\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\t\/\/if this is a printable char or a backspace\r\n\t\telse if ( keyCode > 31 || keyCode == 8)\r\n\t\t{\r\n\t\t\t\/\/see if this letter will cause us to overflow the cell\r\n\t\t\tif ( this.editing )\r\n\t\t\t{\r\n\t\t\t\tthis.checkForEditOverflow( this.selectedCell, this.selectedCellDI, \r\n\t\t\t\t\t\t\t\t\t\t   this.getChar(keyCode, e.shiftKey) + this.editCellSizer.innerHTML);\r\n\t\t\t\r\n\t\t\t\t\/\/if the user typed a char then need to kill the selection so \r\n\t\t\t\t\/\/that the added cell or range doesn't get erased by the new char\r\n\t\t\t\tif ( this.inFormula && this.inFormulaMouseAdd )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.inFormulaMouseAdd = false;\r\n\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\tif ( dojo.render.html.ie )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.select();\r\n\t\t\t\t\t\tthis.editCell.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editCell.contentWindow.getSelection().collapseToEnd();\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange = null;\r\n\t\t\t\t\t\t\/\/this.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\/\/start editing when user enters key\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.editStart(null, true);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/debug(\"keyCode = \" + keyCode);\r\n\t\t}\r\n\r\n\t\t\/\/TODO:check this out on a slower box to see if we still need this code\r\n\t\t\/\/because it looks to be working without it now\r\n\r\n\t\t\/\/ie batches sending some events when a key is held down so we need to \r\n\t\t\/\/take over sending them but only for nav keys until the key is released\r\n\t\t\/*\r\n\t\tif ( dojo.render.html.ie && navKey && \r\n\t\t\t((this.ieRepeat == this.NO_REPEATING && e.repeat) || this.ieRepeat == this.REPEATING) )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.REPEATING;\r\n\t\t\tthis.keyDownListener.ieKeyCode = keyCode;\r\n\t\t\tthis.keyDownListener.shiftKey  = e.shiftKey;\r\n\t\t\t\/\/window.setTimeout(this.keyDownListener, 1);\r\n\t\t\tdojo.lang.setTimeout(this, this.keyDownListener, 1);\r\n\t\t}\r\n\t\t\/\/re-arm the ieRepeat flag\r\n\t\telse if ( this.ieRepeat == this.DONE_REPEATING )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.NO_REPEATING;\r\n\t\t}\r\n\t\t*\/\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.e.KEY_DELETE":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif ( this.blockKeyEvents )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar keyCode;\r\n\t\tvar navKey = false;\r\n\r\n\t\t\/\/when we are doing the repeating ignor ie's keyboard events\r\n\t\tif ( this.ieRepeat == this.REPEATING && e)\r\n\t\t{\r\n\t\t\tdojo.event.browser.stopEvent(e);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\/\/use the last keyCode when we are doing the repeating for ie\r\n\t\telse if ( !e )\r\n\t\t{\r\n\t\t\tkeyCode = this.keyDownListener.ieKeyCode;\r\n\r\n\t\t\te = new Object(); \r\n\t\t\te.shiftKey = this.keyDownListener.shiftKey;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tkeyCode = e.keyCode;\r\n\t\t}\r\n\r\n\t\tif ( this.editing )\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( !this.editFromMouse ) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == this.MAX_COLS ? col : col+1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == this.MAX_ROWS ? row : row+1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ESCAPE: \/\/esc\r\n\t\t\t\t\tthis.editEnd(this.ESC);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( !this.editFromMouse )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar col = this.formulaMS.controlCellCol;\r\n\t\t\t\t\t\t\t\tvar row = this.formulaMS.controlCellRow;\r\n\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar cell = this.formulaMS.getFirstCell();\r\n\t\t\t\t\t\t\t\tif ( cell )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar col = this.formulaMS.getFirstCellCol();\r\n\t\t\t\t\t\t\t\t\tvar row = this.formulaMS.getFirstCellRow(); \r\n\t\t\t\t\t\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\t\t\t\t\t\tcell = this.getCell(col, row);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.setFirstCell(cell);\r\n\t\t\t\t\t\t\t\t\tthis.formulaMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tthis.editEnd();\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\/\/keyboard nav control\r\n\t\telse\r\n\t\t{\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase e.KEY_TAB: \/\/tab\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_LEFT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_RIGHT);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_RIGHT_ARROW: \/\/right arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol+1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row); \r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != this.numberOfCols )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol+1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.RIGHT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_ENTER: \/\/enter\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_UP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.moveSelectedCell(this.MULTI_DOWN);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DOWN_ARROW: \/\/down arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.bottomRow != this.numberOfRows )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow+1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != this.numberOfRows)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow+1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.DOWN);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_LEFT_ARROW: \/\/left arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol-1;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellCol != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol-1, this.selectedCellRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.LEFT);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase e.KEY_UP_ARROW: \/\/up arrow\r\n\t\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( this.inMultiSelect && this.activeMS.topRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar col = this.activeMS.controlCellCol;\r\n\t\t\t\t\t\t\tvar row = this.activeMS.controlCellRow-1;\r\n\t\t\t\t\t\t\tvar cell = this.getCell(col, row);\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(col, row, null, cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ( !this.inMultiSelect && this.selectedCellRow != 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.activeMS.multiSelect(this.selectedCellCol, this.selectedCellRow-1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollSheet(this.activeMS.controlCell); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.moveSelectedCell(this.UP);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_F2:\r\n\t\t\t\t\tvar event = {};\r\n\t\t\t\t\tevent.x = this.selectedCell.offsetLeft + this.selectedCell.offsetWidth + this.editCellSizer.offsetWidth;\r\n\t\t\t\t\tevent.y = this.selectedCell.offsetTop + this.selectedCell.offsetHeight\/2;\r\n\t\t\t\t\tevent.clientX = event.x;\r\n\t\t\t\t\tevent.clientY = event.x;\r\n\t\t\t\t\tthis.editStart(event, false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_HOME:\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, 0));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.cellSelected(this.getCell(0, this.selectedCellRow));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell);\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_DELETE:\r\n\t\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.activeMS.deleteSelectedArea();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.setCellText(\"&nbsp;\", this.selectedCell, this.selectedCellDI);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_UP:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow-this.numRowsInPage;\r\n\t\t\t\t\tnewRow = newRow < 0 ? 0 : newRow;\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase e.KEY_PAGE_DOWN:\r\n\t\t\t\t\tvar newRow = this.selectedCellRow+this.numRowsInPage;\r\n\t\t\t\t\tvar addRows = newRow - this.numberOfRows;\r\n\t\t\t\t\tif ( addRows > 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.addRowAndHeader(addRows+1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, newRow));\r\n\t\t\t\t\tthis.scrollSheet(this.selectedCell); \r\n\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 66: \/\/b\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"bold\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 73: \/\/i\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"italic\", this.italicBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 85: \/\/u\r\n\t\t\t\t\tif ( e.ctrlKey )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execStyle(\"underline\", this.boldBtn.isSelected());\r\n\t\t\t\t\t\tnavKey = true;\r\n\t\t\t\t\t\tthis.preventDefaultKeyBinding = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( navKey )\r\n\t\t{\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\t\/\/if this is a printable char or a backspace\r\n\t\telse if ( keyCode > 31 || keyCode == 8)\r\n\t\t{\r\n\t\t\t\/\/see if this letter will cause us to overflow the cell\r\n\t\t\tif ( this.editing )\r\n\t\t\t{\r\n\t\t\t\tthis.checkForEditOverflow( this.selectedCell, this.selectedCellDI, \r\n\t\t\t\t\t\t\t\t\t\t   this.getChar(keyCode, e.shiftKey) + this.editCellSizer.innerHTML);\r\n\t\t\t\r\n\t\t\t\t\/\/if the user typed a char then need to kill the selection so \r\n\t\t\t\t\/\/that the added cell or range doesn't get erased by the new char\r\n\t\t\t\tif ( this.inFormula && this.inFormulaMouseAdd )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.inFormulaMouseAdd = false;\r\n\t\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t\t\tif ( dojo.render.html.ie )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange.select();\r\n\t\t\t\t\t\tthis.editCell.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editCell.contentWindow.getSelection().collapseToEnd();\r\n\t\t\t\t\t\tthis.processFormulaMS.oldRange = null;\r\n\t\t\t\t\t\t\/\/this.processFormulaMS.oldRange.collapse(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\/\/start editing when user enters key\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.editStart(null, true);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/debug(\"keyCode = \" + keyCode);\r\n\t\t}\r\n\r\n\t\t\/\/TODO:check this out on a slower box to see if we still need this code\r\n\t\t\/\/because it looks to be working without it now\r\n\r\n\t\t\/\/ie batches sending some events when a key is held down so we need to \r\n\t\t\/\/take over sending them but only for nav keys until the key is released\r\n\t\t\/*\r\n\t\tif ( dojo.render.html.ie && navKey && \r\n\t\t\t((this.ieRepeat == this.NO_REPEATING && e.repeat) || this.ieRepeat == this.REPEATING) )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.REPEATING;\r\n\t\t\tthis.keyDownListener.ieKeyCode = keyCode;\r\n\t\t\tthis.keyDownListener.shiftKey  = e.shiftKey;\r\n\t\t\t\/\/window.setTimeout(this.keyDownListener, 1);\r\n\t\t\tdojo.lang.setTimeout(this, this.keyDownListener, 1);\r\n\t\t}\r\n\t\t\/\/re-arm the ieRepeat flag\r\n\t\telse if ( this.ieRepeat == this.DONE_REPEATING )\r\n\t\t{\r\n\t\t\tthis.ieRepeat = this.NO_REPEATING;\r\n\t\t}\r\n\t\t*\/\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.formulaBarKeyDown":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tvar keyCode = e.keyCode;\r\n\t\tvar navKey = false;\r\n\r\n\t\tif ( keyCode == e.KEY_TAB )\r\n\t\t{\r\n\t\t\tnavKey = true;\r\n\t\t\tif ( this.inMultiSelect )\r\n\t\t\t{\r\n\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.editEnd(this.MULTI_LEFT);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.editEnd(this.MULTI_RIGHT);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.editEnd(this.LEFT);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.editEnd(this.RIGHT);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if ( keyCode == e.KEY_ENTER )\r\n\t\t{\r\n\t\t\tnavKey = true;\r\n\t\t\tif ( this.inMultiSelect )\r\n\t\t\t{\r\n\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.editEnd(this.MULTI_UP);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.editEnd(this.MULTI_DOWN);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif ( e.shiftKey )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.editEnd(this.UP);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.editEnd(this.DOWN);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if ( keyCode == e.KEY_ESCAPE )\r\n\t\t{\r\n\t\t\tthis.editEnd(this.ESC);\r\n\t\t\tnavKey = true;\r\n\t\t}\r\n\t\telse if ( keyCode == e.KEY_BACKSPACE )\r\n\t\t{\r\n\t\t\tthis.formulaBar.add = false;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.formulaBar.preLength = this.formulaBar.value.length;\r\n\t\t}\r\n\r\n\t\tif ( navKey )\r\n\t\t{\r\n\t\t\tdojo.event.browser.stopEvent(e);\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.formulaBarKeyUp":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif ( this.formulaBar.preLength > this.formulaBar.value.length )\r\n\t\t{\r\n\t\t\tthis.formulaBar.add = false;\r\n\t\t}\r\n\t\tthis.setEditText(this.formulaBar.value, this.formulaBar.add);\r\n\t\tthis.formulaBar.add = true;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.setEditText":{"_":{"meta":{"summary":"","parameters":{"text":{"type":""},"add":{"type":""}},"src":"\t\ttext = text.replace(\/&\/, \"&amp;\").replace(\/<\/g, \"&lt;\").\r\n\t\t\t\t\treplace(\/>\/g, \"&gt;\").replace(\/&nbsp;\/g, \" \");\r\n\r\n\t\tvar html;\r\n\t\tif ( dojo.render.html.ie )\r\n\t\t{\r\n\t\t\thtml = this.editCell.innerHTML;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/need to remove any trailing br's that gecko likes to add otherwize\r\n\t\t\t\/\/the text can get added after the br and cause a line break when one\r\n\t\t\t\/\/isn't wanted\r\n\t\t\thtml = this.cleanText(this.editCell.contentWindow.document.body.innerHTML);\r\n\t\t}\r\n\t\thtml = html.replace(\/&nbsp;\/g, \" \");\r\n\r\n\t\tvar textChar = text.charAt(0);\r\n\t\tvar htmlChar = html.charAt(0); \r\n\t\tvar inTag = false;\r\n\t\tvar y = 0, x = 0;\r\n\r\n\t\tdo\r\n\t\t{\r\n\t\t\t\/\/eat any html tags\r\n\t\t\tif ( htmlChar == '<' )\r\n\t\t\t{\r\n\t\t\t\tif ( html.charAt(y+1) == \"\\\\\" )\r\n\t\t\t\t{\r\n\t\t\t\t\tinTag = false;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tinTag = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor(; y < html.length; y++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif ( html.charAt(y) == '>' )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\/\/need to test the same textChar again\r\n\t\t\t\t\t\t\/\/and can't just look at the next y value after the end tag\r\n\t\t\t\t\t\t\/\/because the next char may be the start of anther tag\r\n\t\t\t\t\t\tx--;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\/\/see if the chars are the same\r\n\t\t\telse if ( textChar != htmlChar ) \r\n\t\t\t{\r\n\t\t\t\tif ( add )\r\n\t\t\t\t{\r\n\t\t\t\t\thtml = html.substring(0, y) + textChar + html.substring(y); \r\n\t\t\t\t}\r\n\t\t\t\t\/\/user hit backspace and no chars left\r\n\t\t\t\telse if ( textChar == '' || inTag )\r\n\t\t\t\t{\r\n\t\t\t\t\thtml = html.substring(0, y) + html.substring(y+1); \r\n\t\t\t\t\ty--;\r\n\r\n\t\t\t\t\t\/\/don't drag text into markup that wasn't there before\r\n\t\t\t\t\t\/\/so just remove the changed text in the markup and use the same\r\n\t\t\t\t\t\/\/textChar again\r\n\t\t\t\t\tif ( inTag ) x--;\r\n\t\t\t\t}\r\n\t\t\t\t\/\/user hit backspace and still textChars so replace the current htmlChar\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\thtml = html.substring(0, y) + textChar + html.substring(y+1); \r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ttextChar = text.charAt(++x);\r\n\t\t\thtmlChar = html.charAt(++y);\r\n\t\t}\r\n\t\twhile( textChar != '' || htmlChar != '' )\r\n\r\n\r\n\t\thtml = html.replace(\/  \/g, \" &nbsp;\");\r\n\t\tthis.checkForEditOverflow(this.selectedCell, this.selectedCellDI, \"&nbsp;\" + html);\r\n\t\tif ( dojo.render.html.ie )\r\n\t\t{\r\n\t\t\tthis.editCell.innerHTML = html;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.editCell.contentWindow.document.body.innerHTML = html;\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.moveSelectedCell":{"_":{"meta":{"summary":"","parameters":{"nextCell":{"type":""}},"src":"\t\tvar row = this.selectedCellRow;\r\n\t\tvar col = this.selectedCellCol;\r\n\r\n\t\t\/\/set next cell in col to selectedCell\r\n\t\tswitch(nextCell)\r\n\t\t{\r\n\t\t\tcase this.DOWN:\r\n\t\t\t\trow = row == this.numberOfRows-1 ? row : row+1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_DOWN:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( row == this.activeMS.bottomRow )\r\n\t\t\t\t{\r\n\t\t\t\t\trow = this.activeMS.topRow;\r\n\t\t\t\t\tcol = col == this.activeMS.bottomCol ? this.activeMS.topCol : col+1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\trow++;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.RIGHT:\r\n\t\t\t\tcol = col == this.numberOfCols-1 ? col : col+1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_RIGHT:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( col == this.activeMS.bottomCol )\r\n\t\t\t\t{\r\n\t\t\t\t\tcol = this.activeMS.topCol;\r\n\t\t\t\t\trow = row == this.activeMS.bottomRow ? this.activeMS.topRow : row+1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcol++;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.UP:\r\n\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_UP:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( row == this.activeMS.topRow )\r\n\t\t\t\t{\r\n\t\t\t\t\trow = this.activeMS.bottomRow;\r\n\t\t\t\t\tcol = col == this.activeMS.topCol ? this.activeMS.bottomCol : col-1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\trow--;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.LEFT:\r\n\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_LEFT:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( col == this.activeMS.topCol )\r\n\t\t\t\t{\r\n\t\t\t\t\tcol = this.activeMS.bottomCol;\r\n\t\t\t\t\trow = row == this.activeMS.topRow ? this.activeMS.bottomRow : row-1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcol--;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.ENTER:\r\n\t\t\tcase this.ESC:\r\n\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.selectedCell;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.cellSelected(nextCell);\r\n\r\n\t\tthis.scrollSheet(nextCell);\r\n\r\n\t\tthis.focusOnSheet();\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.this.DOWN":{"_":{"meta":{"summary":"","parameters":{"nextCell":{"type":""}},"src":"\t\tvar row = this.selectedCellRow;\r\n\t\tvar col = this.selectedCellCol;\r\n\r\n\t\t\/\/set next cell in col to selectedCell\r\n\t\tswitch(nextCell)\r\n\t\t{\r\n\t\t\tcase this.DOWN:\r\n\t\t\t\trow = row == this.numberOfRows-1 ? row : row+1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_DOWN:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( row == this.activeMS.bottomRow )\r\n\t\t\t\t{\r\n\t\t\t\t\trow = this.activeMS.topRow;\r\n\t\t\t\t\tcol = col == this.activeMS.bottomCol ? this.activeMS.topCol : col+1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\trow++;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.RIGHT:\r\n\t\t\t\tcol = col == this.numberOfCols-1 ? col : col+1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_RIGHT:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( col == this.activeMS.bottomCol )\r\n\t\t\t\t{\r\n\t\t\t\t\tcol = this.activeMS.topCol;\r\n\t\t\t\t\trow = row == this.activeMS.bottomRow ? this.activeMS.topRow : row+1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcol++;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.UP:\r\n\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_UP:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( row == this.activeMS.topRow )\r\n\t\t\t\t{\r\n\t\t\t\t\trow = this.activeMS.bottomRow;\r\n\t\t\t\t\tcol = col == this.activeMS.topCol ? this.activeMS.bottomCol : col-1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\trow--;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.LEFT:\r\n\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_LEFT:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( col == this.activeMS.topCol )\r\n\t\t\t\t{\r\n\t\t\t\t\tcol = this.activeMS.bottomCol;\r\n\t\t\t\t\trow = row == this.activeMS.topRow ? this.activeMS.bottomRow : row-1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcol--;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.ENTER:\r\n\t\t\tcase this.ESC:\r\n\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.selectedCell;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.cellSelected(nextCell);\r\n\r\n\t\tthis.scrollSheet(nextCell);\r\n\r\n\t\tthis.focusOnSheet();\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.this.MULTI_DOWN":{"_":{"meta":{"summary":"","parameters":{"nextCell":{"type":""}},"src":"\t\tvar row = this.selectedCellRow;\r\n\t\tvar col = this.selectedCellCol;\r\n\r\n\t\t\/\/set next cell in col to selectedCell\r\n\t\tswitch(nextCell)\r\n\t\t{\r\n\t\t\tcase this.DOWN:\r\n\t\t\t\trow = row == this.numberOfRows-1 ? row : row+1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_DOWN:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( row == this.activeMS.bottomRow )\r\n\t\t\t\t{\r\n\t\t\t\t\trow = this.activeMS.topRow;\r\n\t\t\t\t\tcol = col == this.activeMS.bottomCol ? this.activeMS.topCol : col+1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\trow++;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.RIGHT:\r\n\t\t\t\tcol = col == this.numberOfCols-1 ? col : col+1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_RIGHT:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( col == this.activeMS.bottomCol )\r\n\t\t\t\t{\r\n\t\t\t\t\tcol = this.activeMS.topCol;\r\n\t\t\t\t\trow = row == this.activeMS.bottomRow ? this.activeMS.topRow : row+1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcol++;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.UP:\r\n\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_UP:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( row == this.activeMS.topRow )\r\n\t\t\t\t{\r\n\t\t\t\t\trow = this.activeMS.bottomRow;\r\n\t\t\t\t\tcol = col == this.activeMS.topCol ? this.activeMS.bottomCol : col-1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\trow--;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.LEFT:\r\n\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_LEFT:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( col == this.activeMS.topCol )\r\n\t\t\t\t{\r\n\t\t\t\t\tcol = this.activeMS.bottomCol;\r\n\t\t\t\t\trow = row == this.activeMS.topRow ? this.activeMS.bottomRow : row-1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcol--;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.ENTER:\r\n\t\t\tcase this.ESC:\r\n\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.selectedCell;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.cellSelected(nextCell);\r\n\r\n\t\tthis.scrollSheet(nextCell);\r\n\r\n\t\tthis.focusOnSheet();\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.this.RIGHT":{"_":{"meta":{"summary":"","parameters":{"nextCell":{"type":""}},"src":"\t\tvar row = this.selectedCellRow;\r\n\t\tvar col = this.selectedCellCol;\r\n\r\n\t\t\/\/set next cell in col to selectedCell\r\n\t\tswitch(nextCell)\r\n\t\t{\r\n\t\t\tcase this.DOWN:\r\n\t\t\t\trow = row == this.numberOfRows-1 ? row : row+1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_DOWN:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( row == this.activeMS.bottomRow )\r\n\t\t\t\t{\r\n\t\t\t\t\trow = this.activeMS.topRow;\r\n\t\t\t\t\tcol = col == this.activeMS.bottomCol ? this.activeMS.topCol : col+1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\trow++;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.RIGHT:\r\n\t\t\t\tcol = col == this.numberOfCols-1 ? col : col+1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_RIGHT:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( col == this.activeMS.bottomCol )\r\n\t\t\t\t{\r\n\t\t\t\t\tcol = this.activeMS.topCol;\r\n\t\t\t\t\trow = row == this.activeMS.bottomRow ? this.activeMS.topRow : row+1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcol++;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.UP:\r\n\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_UP:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( row == this.activeMS.topRow )\r\n\t\t\t\t{\r\n\t\t\t\t\trow = this.activeMS.bottomRow;\r\n\t\t\t\t\tcol = col == this.activeMS.topCol ? this.activeMS.bottomCol : col-1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\trow--;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.LEFT:\r\n\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_LEFT:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( col == this.activeMS.topCol )\r\n\t\t\t\t{\r\n\t\t\t\t\tcol = this.activeMS.bottomCol;\r\n\t\t\t\t\trow = row == this.activeMS.topRow ? this.activeMS.bottomRow : row-1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcol--;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.ENTER:\r\n\t\t\tcase this.ESC:\r\n\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.selectedCell;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.cellSelected(nextCell);\r\n\r\n\t\tthis.scrollSheet(nextCell);\r\n\r\n\t\tthis.focusOnSheet();\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.this.MULTI_RIGHT":{"_":{"meta":{"summary":"","parameters":{"nextCell":{"type":""}},"src":"\t\tvar row = this.selectedCellRow;\r\n\t\tvar col = this.selectedCellCol;\r\n\r\n\t\t\/\/set next cell in col to selectedCell\r\n\t\tswitch(nextCell)\r\n\t\t{\r\n\t\t\tcase this.DOWN:\r\n\t\t\t\trow = row == this.numberOfRows-1 ? row : row+1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_DOWN:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( row == this.activeMS.bottomRow )\r\n\t\t\t\t{\r\n\t\t\t\t\trow = this.activeMS.topRow;\r\n\t\t\t\t\tcol = col == this.activeMS.bottomCol ? this.activeMS.topCol : col+1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\trow++;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.RIGHT:\r\n\t\t\t\tcol = col == this.numberOfCols-1 ? col : col+1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_RIGHT:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( col == this.activeMS.bottomCol )\r\n\t\t\t\t{\r\n\t\t\t\t\tcol = this.activeMS.topCol;\r\n\t\t\t\t\trow = row == this.activeMS.bottomRow ? this.activeMS.topRow : row+1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcol++;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.UP:\r\n\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_UP:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( row == this.activeMS.topRow )\r\n\t\t\t\t{\r\n\t\t\t\t\trow = this.activeMS.bottomRow;\r\n\t\t\t\t\tcol = col == this.activeMS.topCol ? this.activeMS.bottomCol : col-1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\trow--;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.LEFT:\r\n\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_LEFT:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( col == this.activeMS.topCol )\r\n\t\t\t\t{\r\n\t\t\t\t\tcol = this.activeMS.bottomCol;\r\n\t\t\t\t\trow = row == this.activeMS.topRow ? this.activeMS.bottomRow : row-1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcol--;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.ENTER:\r\n\t\t\tcase this.ESC:\r\n\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.selectedCell;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.cellSelected(nextCell);\r\n\r\n\t\tthis.scrollSheet(nextCell);\r\n\r\n\t\tthis.focusOnSheet();\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.this.UP":{"_":{"meta":{"summary":"","parameters":{"nextCell":{"type":""}},"src":"\t\tvar row = this.selectedCellRow;\r\n\t\tvar col = this.selectedCellCol;\r\n\r\n\t\t\/\/set next cell in col to selectedCell\r\n\t\tswitch(nextCell)\r\n\t\t{\r\n\t\t\tcase this.DOWN:\r\n\t\t\t\trow = row == this.numberOfRows-1 ? row : row+1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_DOWN:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( row == this.activeMS.bottomRow )\r\n\t\t\t\t{\r\n\t\t\t\t\trow = this.activeMS.topRow;\r\n\t\t\t\t\tcol = col == this.activeMS.bottomCol ? this.activeMS.topCol : col+1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\trow++;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.RIGHT:\r\n\t\t\t\tcol = col == this.numberOfCols-1 ? col : col+1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_RIGHT:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( col == this.activeMS.bottomCol )\r\n\t\t\t\t{\r\n\t\t\t\t\tcol = this.activeMS.topCol;\r\n\t\t\t\t\trow = row == this.activeMS.bottomRow ? this.activeMS.topRow : row+1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcol++;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.UP:\r\n\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_UP:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( row == this.activeMS.topRow )\r\n\t\t\t\t{\r\n\t\t\t\t\trow = this.activeMS.bottomRow;\r\n\t\t\t\t\tcol = col == this.activeMS.topCol ? this.activeMS.bottomCol : col-1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\trow--;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.LEFT:\r\n\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_LEFT:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( col == this.activeMS.topCol )\r\n\t\t\t\t{\r\n\t\t\t\t\tcol = this.activeMS.bottomCol;\r\n\t\t\t\t\trow = row == this.activeMS.topRow ? this.activeMS.bottomRow : row-1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcol--;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.ENTER:\r\n\t\t\tcase this.ESC:\r\n\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.selectedCell;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.cellSelected(nextCell);\r\n\r\n\t\tthis.scrollSheet(nextCell);\r\n\r\n\t\tthis.focusOnSheet();\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.this.MULTI_UP":{"_":{"meta":{"summary":"","parameters":{"nextCell":{"type":""}},"src":"\t\tvar row = this.selectedCellRow;\r\n\t\tvar col = this.selectedCellCol;\r\n\r\n\t\t\/\/set next cell in col to selectedCell\r\n\t\tswitch(nextCell)\r\n\t\t{\r\n\t\t\tcase this.DOWN:\r\n\t\t\t\trow = row == this.numberOfRows-1 ? row : row+1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_DOWN:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( row == this.activeMS.bottomRow )\r\n\t\t\t\t{\r\n\t\t\t\t\trow = this.activeMS.topRow;\r\n\t\t\t\t\tcol = col == this.activeMS.bottomCol ? this.activeMS.topCol : col+1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\trow++;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.RIGHT:\r\n\t\t\t\tcol = col == this.numberOfCols-1 ? col : col+1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_RIGHT:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( col == this.activeMS.bottomCol )\r\n\t\t\t\t{\r\n\t\t\t\t\tcol = this.activeMS.topCol;\r\n\t\t\t\t\trow = row == this.activeMS.bottomRow ? this.activeMS.topRow : row+1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcol++;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.UP:\r\n\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_UP:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( row == this.activeMS.topRow )\r\n\t\t\t\t{\r\n\t\t\t\t\trow = this.activeMS.bottomRow;\r\n\t\t\t\t\tcol = col == this.activeMS.topCol ? this.activeMS.bottomCol : col-1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\trow--;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.LEFT:\r\n\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_LEFT:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( col == this.activeMS.topCol )\r\n\t\t\t\t{\r\n\t\t\t\t\tcol = this.activeMS.bottomCol;\r\n\t\t\t\t\trow = row == this.activeMS.topRow ? this.activeMS.bottomRow : row-1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcol--;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.ENTER:\r\n\t\t\tcase this.ESC:\r\n\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.selectedCell;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.cellSelected(nextCell);\r\n\r\n\t\tthis.scrollSheet(nextCell);\r\n\r\n\t\tthis.focusOnSheet();\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.this.LEFT":{"_":{"meta":{"summary":"","parameters":{"nextCell":{"type":""}},"src":"\t\tvar row = this.selectedCellRow;\r\n\t\tvar col = this.selectedCellCol;\r\n\r\n\t\t\/\/set next cell in col to selectedCell\r\n\t\tswitch(nextCell)\r\n\t\t{\r\n\t\t\tcase this.DOWN:\r\n\t\t\t\trow = row == this.numberOfRows-1 ? row : row+1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_DOWN:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( row == this.activeMS.bottomRow )\r\n\t\t\t\t{\r\n\t\t\t\t\trow = this.activeMS.topRow;\r\n\t\t\t\t\tcol = col == this.activeMS.bottomCol ? this.activeMS.topCol : col+1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\trow++;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.RIGHT:\r\n\t\t\t\tcol = col == this.numberOfCols-1 ? col : col+1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_RIGHT:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( col == this.activeMS.bottomCol )\r\n\t\t\t\t{\r\n\t\t\t\t\tcol = this.activeMS.topCol;\r\n\t\t\t\t\trow = row == this.activeMS.bottomRow ? this.activeMS.topRow : row+1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcol++;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.UP:\r\n\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_UP:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( row == this.activeMS.topRow )\r\n\t\t\t\t{\r\n\t\t\t\t\trow = this.activeMS.bottomRow;\r\n\t\t\t\t\tcol = col == this.activeMS.topCol ? this.activeMS.bottomCol : col-1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\trow--;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.LEFT:\r\n\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_LEFT:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( col == this.activeMS.topCol )\r\n\t\t\t\t{\r\n\t\t\t\t\tcol = this.activeMS.bottomCol;\r\n\t\t\t\t\trow = row == this.activeMS.topRow ? this.activeMS.bottomRow : row-1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcol--;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.ENTER:\r\n\t\t\tcase this.ESC:\r\n\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.selectedCell;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.cellSelected(nextCell);\r\n\r\n\t\tthis.scrollSheet(nextCell);\r\n\r\n\t\tthis.focusOnSheet();\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.this.MULTI_LEFT":{"_":{"meta":{"summary":"","parameters":{"nextCell":{"type":""}},"src":"\t\tvar row = this.selectedCellRow;\r\n\t\tvar col = this.selectedCellCol;\r\n\r\n\t\t\/\/set next cell in col to selectedCell\r\n\t\tswitch(nextCell)\r\n\t\t{\r\n\t\t\tcase this.DOWN:\r\n\t\t\t\trow = row == this.numberOfRows-1 ? row : row+1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_DOWN:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( row == this.activeMS.bottomRow )\r\n\t\t\t\t{\r\n\t\t\t\t\trow = this.activeMS.topRow;\r\n\t\t\t\t\tcol = col == this.activeMS.bottomCol ? this.activeMS.topCol : col+1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\trow++;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.RIGHT:\r\n\t\t\t\tcol = col == this.numberOfCols-1 ? col : col+1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_RIGHT:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( col == this.activeMS.bottomCol )\r\n\t\t\t\t{\r\n\t\t\t\t\tcol = this.activeMS.topCol;\r\n\t\t\t\t\trow = row == this.activeMS.bottomRow ? this.activeMS.topRow : row+1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcol++;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.UP:\r\n\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_UP:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( row == this.activeMS.topRow )\r\n\t\t\t\t{\r\n\t\t\t\t\trow = this.activeMS.bottomRow;\r\n\t\t\t\t\tcol = col == this.activeMS.topCol ? this.activeMS.bottomCol : col-1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\trow--;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.LEFT:\r\n\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_LEFT:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( col == this.activeMS.topCol )\r\n\t\t\t\t{\r\n\t\t\t\t\tcol = this.activeMS.bottomCol;\r\n\t\t\t\t\trow = row == this.activeMS.topRow ? this.activeMS.bottomRow : row-1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcol--;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.ENTER:\r\n\t\t\tcase this.ESC:\r\n\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.selectedCell;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.cellSelected(nextCell);\r\n\r\n\t\tthis.scrollSheet(nextCell);\r\n\r\n\t\tthis.focusOnSheet();\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.this.ENTER":{"_":{"meta":{"summary":"","parameters":{"nextCell":{"type":""}},"src":"\t\tvar row = this.selectedCellRow;\r\n\t\tvar col = this.selectedCellCol;\r\n\r\n\t\t\/\/set next cell in col to selectedCell\r\n\t\tswitch(nextCell)\r\n\t\t{\r\n\t\t\tcase this.DOWN:\r\n\t\t\t\trow = row == this.numberOfRows-1 ? row : row+1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_DOWN:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( row == this.activeMS.bottomRow )\r\n\t\t\t\t{\r\n\t\t\t\t\trow = this.activeMS.topRow;\r\n\t\t\t\t\tcol = col == this.activeMS.bottomCol ? this.activeMS.topCol : col+1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\trow++;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.RIGHT:\r\n\t\t\t\tcol = col == this.numberOfCols-1 ? col : col+1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_RIGHT:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( col == this.activeMS.bottomCol )\r\n\t\t\t\t{\r\n\t\t\t\t\tcol = this.activeMS.topCol;\r\n\t\t\t\t\trow = row == this.activeMS.bottomRow ? this.activeMS.topRow : row+1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcol++;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.UP:\r\n\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_UP:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( row == this.activeMS.topRow )\r\n\t\t\t\t{\r\n\t\t\t\t\trow = this.activeMS.bottomRow;\r\n\t\t\t\t\tcol = col == this.activeMS.topCol ? this.activeMS.bottomCol : col-1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\trow--;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.LEFT:\r\n\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_LEFT:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( col == this.activeMS.topCol )\r\n\t\t\t\t{\r\n\t\t\t\t\tcol = this.activeMS.bottomCol;\r\n\t\t\t\t\trow = row == this.activeMS.topRow ? this.activeMS.bottomRow : row-1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcol--;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.ENTER:\r\n\t\t\tcase this.ESC:\r\n\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.selectedCell;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.cellSelected(nextCell);\r\n\r\n\t\tthis.scrollSheet(nextCell);\r\n\r\n\t\tthis.focusOnSheet();\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.this.ESC":{"_":{"meta":{"summary":"","parameters":{"nextCell":{"type":""}},"src":"\t\tvar row = this.selectedCellRow;\r\n\t\tvar col = this.selectedCellCol;\r\n\r\n\t\t\/\/set next cell in col to selectedCell\r\n\t\tswitch(nextCell)\r\n\t\t{\r\n\t\t\tcase this.DOWN:\r\n\t\t\t\trow = row == this.numberOfRows-1 ? row : row+1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_DOWN:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( row == this.activeMS.bottomRow )\r\n\t\t\t\t{\r\n\t\t\t\t\trow = this.activeMS.topRow;\r\n\t\t\t\t\tcol = col == this.activeMS.bottomCol ? this.activeMS.topCol : col+1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\trow++;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.RIGHT:\r\n\t\t\t\tcol = col == this.numberOfCols-1 ? col : col+1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_RIGHT:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( col == this.activeMS.bottomCol )\r\n\t\t\t\t{\r\n\t\t\t\t\tcol = this.activeMS.topCol;\r\n\t\t\t\t\trow = row == this.activeMS.bottomRow ? this.activeMS.topRow : row+1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcol++;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.UP:\r\n\t\t\t\trow = row == 0 ? row : row-1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_UP:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( row == this.activeMS.topRow )\r\n\t\t\t\t{\r\n\t\t\t\t\trow = this.activeMS.bottomRow;\r\n\t\t\t\t\tcol = col == this.activeMS.topCol ? this.activeMS.bottomCol : col-1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\trow--;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.LEFT:\r\n\t\t\t\tcol = col == 0 ? col : col-1;\r\n\t\t\t\tnextCell = this.getCell(col, row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.MULTI_LEFT:\r\n\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\tif ( col == this.activeMS.topCol )\r\n\t\t\t\t{\r\n\t\t\t\t\tcol = this.activeMS.bottomCol;\r\n\t\t\t\t\trow = row == this.activeMS.topRow ? this.activeMS.bottomRow : row-1;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcol--;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.getCell(col,row);\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.ENTER:\r\n\t\t\tcase this.ESC:\r\n\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.multiSelectKeep = true;\r\n\t\t\t\t}\r\n\t\t\t\tnextCell = this.selectedCell;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.cellSelected(nextCell);\r\n\r\n\t\tthis.scrollSheet(nextCell);\r\n\r\n\t\tthis.focusOnSheet();\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.editStart":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""},"blankText":{"type":""},"startFormula":{"type":""},"fromFormulaBar":{"type":""}},"src":"\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.editing = true;\r\n\r\n\t\tvar cell = this.selectedCell;\r\n\t\tvar di   = this.selectedCellDI;\r\n\r\n\t\t\/\/get the TrackerDataItem for this cell\r\n\t\tvar col = this.getCellCol(cell);\r\n\t\tvar row = this.getCellRow(cell);\r\n\r\n\t\t\/\/save the current text if any\r\n\t\tdi.oldCellText = di.cellText ? di.cellText : \"&nbsp;\";\r\n\r\n\t\t\/\/blackText is true only when called from keyboard \r\n\t\t\/\/and undefined when called from mouse\r\n\t\tthis.editFromMouse = blankText ? false : true;\r\n\r\n\t\t\/\/set controls state so controls can be enabled and disabled\r\n\t\t\/\/as some controls don't work in editing mode\r\n\t\tthis.setToolbarState();\r\n\r\n\t\t\/\/set the default editColspan\r\n\t\tdi.editColSpan = 1;\r\n\t\tvar editText;\r\n\r\n\t\t\/\/don't add the floating div to the editCell just it's html or \r\n\t\t\/\/if it's a formula, money, date, exp, and time that has\r\n\t\t\/\/text that won't fit in the cell or\r\n\t\t\/\/if is't a number or percent that has been shrunk and won't fit\r\n\t\tif ( this.hasFloater(cell) ||  \r\n\t\t\t((di.subDataType == this.FORMULA || di.dataType == this.MONEY || \r\n\t\t\t\tdi.dataType == this.DATE || di.dataType == this.TIME || \r\n\t\t\t\tdi.dataType == this.EXPONENTIAL ) &&\r\n\t\t\t (this.editCellSizer.getWidth(di.formulaBarText, di) >= this.getEffectiveWidth(cell))) ||\r\n\t\t\t((di.dataType == this.NUMBER || di.dataType == this.PERCENT || \r\n\t\t\t\tdi.dataType == this.TEXT) &&\r\n\t\t\t (this.editCellSizer.getWidth(di.oldCellText, di) >= this.getEffectiveWidth(cell))) )\r\n\t\t{\r\n\t\t\tvar maxEditWidth;\r\n\r\n\t\t\tif ( di.subDataType == this.FORMULA || di.dataType == this.MONEY || \r\n\t\t\t\t di.dataType == this.DATE || di.dataType == this.EXPONENTIAL )\r\n\t\t\t{\r\n\t\t\t\tmaxEditWidth = this.editCellSizer.offsetWidth;\r\n\t\t\t\t\/\/make sure formulaBarText is a string\r\n\t\t\t\teditText = blankText ? \"&nbsp;\" : di.formulaBarText+\"\";\r\n\t\t\t\tcell.style.textAlign = \"left\";\r\n\t\t\t}\r\n\t\t\telse if ( di.dataType == this.NUMBER || di.dataType == this.PERCENT ||\r\n\t\t\t\t\t  (di.dataType == this.TEXT && !this.hasFloater(cell)) ) \r\n\t\t\t{\r\n\t\t\t\tmaxEditWidth = this.editCellSizer.offsetWidth;\r\n\t\t\t\t\/\/make sure oldCellText is a string\r\n\t\t\t\teditText = di.oldCellText+\"\"; \r\n\t\t\t\tcell.style.textAlign = \"left\";\r\n\t\t\t}\r\n\t\t\t\/\/floater\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tmaxEditWidth = Math.max(di.editWidth, cell.offsetWidth,\r\n\t\t\t\t\t\t\t\t\t\tcell.firstChild.offsetWidth);\r\n\t\t\t\teditText = blankText ? \"&nbsp;\": cell.firstChild.innerHTML;\r\n\t\t\t}\r\n\r\n\t\t\t\/\/determine how many cols this floater spans\r\n\t\t\tdi.editWidth = this.getEffectiveWidth(cell);\r\n\t\t\twhile( di.editWidth <= maxEditWidth ) \r\n\t\t\t{\r\n\t\t\t\tdi.editWidth += this.getCell( col+di.editColSpan, row).offsetWidth;\r\n\t\t\t\tdi.editColSpan++;\r\n\t\t\t}\r\n\r\n\t\t\t\/\/IE can't handle clearing innerHTML when a floater was part of cell\r\n\t\t\t\/\/doesn't show the editCell correctly so just make hidden\r\n\t\t\tif ( dojo.render.html.ie && this.hasFloater(cell) )\r\n\t\t\t{\r\n\t\t\t\tcell.firstChild.style.visibility = \"hidden\";\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tcell.innerHTML = \"\";\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tdi.editWidth = cell.offsetWidth;\r\n\r\n\t\t\t\/\/need to edit the formulaBarText for these types\r\n\t\t\tif ( di.subDataType == this.FORMULA || di.dataType == this.MONEY ||\r\n\t\t\t\t di.dataType == this.DATE || di.dataType == this.TIME ||\r\n\t\t\t\t di.dataType == this.EXPONENTIAL )\r\n\t\t\t{\r\n\t\t\t\t\/\/make sure formulaBarText is a string\r\n\t\t\t\teditText = blankText ? \"&nbsp;\": di.formulaBarText+\"\";\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t\/\/use oldCellText here because it has already checked if cellText was null\r\n\t\t\t\t\/\/and replaced it with a &nbsp;\r\n\t\t\t\teditText = blankText ? \"&nbsp;\": di.oldCellText;\r\n\t\t\t}\r\n\t\t\tcell.innerHTML = \"\";\r\n\t\t}\r\n\r\n\t\t\/\/if we are editing a formula set the inFormula state\r\n\t\tif ( di.subDataType == this.FORMULA || editText.charAt(0) == \"=\" )\r\n\t\t{\r\n\t\t\tcell.style.textAlign = \"left\";\r\n\t\t\tthis.inFormula = true;\r\n\t\t}\r\n\r\n\t\t\/\/true when called from the start formula button\r\n\t\tif ( startFormula )\r\n\t\t{\r\n\t\t\teditText = \"=\" + editText;\r\n\t\t\tthis.inFormula = true;\r\n\t\t\tcell.style.textAlign = \"left\";\r\n\t\t}\r\n\r\n\r\n\t\t\/\/need to make sure have a ending nbsp other wise ie loses the\r\n\t\t\/\/cursor on a space but don't put a nbsp if gecko has added a break to the end\r\n\t\tif ( editText.substr(editText.length-6) != \"&nbsp;\" &&\r\n\t\t\t editText.substr(editText.length-4) != \"<br>\" )\r\n\t\t{\r\n\t\t\teditText += \"&nbsp;\"\r\n\t\t}\r\n\r\n\t\t\/\/handle editing a cell that has a floating div over it\r\n\t\tif ( di.floaterOver != null )\r\n\t\t{\r\n\t\t\tthis.shrinkFloaterFromCell(cell, di);\r\n\t\t}\r\n\r\n\t\tcell.style.border  = this.editBorder;\r\n\t\tcell.style.padding = this.editPadding;\r\n\t\tthis.editCell.style.visibility = \"visible\";\r\n\r\n\t\tif ( dojo.render.html.ie )\r\n\t\t{\r\n\t\t\tthis.editCell.innerHTML = editText;\r\n\t\t\t\/\/when more that one colSpan need to remove cells\r\n\t\t\tif ( di.editColSpan > 1 )\r\n\t\t\t{\r\n\t\t\t\tthis.setOverflowBorders(cell);\r\n\r\n\t\t\t\twhile(cell.colSpan < di.editColSpan)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar nextColCell = this.getCell(col+cell.colSpan, row);\r\n\r\n\t\t\t\t\tthis.msSelectedCellBackground.addToWidth(nextColCell);\r\n\r\n\t\t\t\t\t\/\/remove the next cell and save for after edit\r\n\t\t\t\t\tcell.parentNode.removeChild(nextColCell);\r\n\t\t\t\t\tthis.editOverflowArray.push(nextColCell);\r\n\r\n\t\t\t\t\tcell.colSpan++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t\/\/When changing a cell with a floater insert before so that the text\r\n\t\t\t\/\/is flush with the left edge of the cell.  We need to do this\r\n\t\t\t\/\/because for some reason IE doesn't like to let us add the editCell\r\n\t\t\t\/\/after removing the floater.  So instead we make the floater hidden\r\n\t\t\t\/\/and remove it when editing is done.\r\n\t\t\tif ( cell.firstChild )\r\n\t\t\t{\r\n\t\t\t\tthis.editMargin = 11;\r\n\t\t\t\tcell.insertBefore(this.editCell, cell.firstChild);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.editMargin = 7;\r\n\t\t\t\tcell.appendChild(this.editCell);\r\n\t\t\t}\r\n\r\n\t\t\t\/\/only set the editCell focus if user is editing the cell and not\r\n\t\t\t\/\/when editing from the formula bar\r\n\t\t\tif ( !fromFormulaBar && !startFormula )\r\n\t\t\t{\r\n\t\t\t\tthis.editCell.focus();\r\n\t\t\t}\r\n\r\n\t\t\t\/\/this code puts the currsor where the user clicked in the edit cell\r\n\t\t\tif ( e != null && !fromFormulaBar && !startFormula && !blankText && editText != \"&nbsp;\")\r\n\t\t\t{\r\n\t\t\t\tvar range    = this.sheetFrame.contentDocument.body.createTextRange();\r\n\t\t\t\t\/\/var textSize = this.editCellSizer.getWidth(editText, di) + 3;\r\n\t\t\t\tvar textSize = this.editCellSizer.getWidth(editText, di);\r\n\t\t\t\t\/\/if the user clicked past the end of the text then need to set the x end point\r\n\t\t\t\t\/\/to the end of the text but only if the text is not at the end of the cell\r\n\t\t\t\t\/\/as it is when textAlign is set to right\r\n\t\t\t\tif ( cell.style.textAlign == \"left\" )\r\n\t\t\t\t{\r\n\t\t\t\t\tvar endXPoint = cell.offsetLeft + textSize - 6; \r\n\t\t\t\/\/alert(\"editText = \" + editText + \" endXPoint = \" + endXPoint + \" e.x = \" + e.x);\r\n\t\t\t\t\tif ( endXPoint < e.x )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trange.moveToPoint(endXPoint, e.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trange.moveToPoint(e.x, e.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\/\/if the user clicked past the start of the text then need to set the x point\r\n\t\t\t\t\/\/to the start of the text;\r\n\t\t\t\telse if ( cell.style.textAlign == \"right\" )\r\n\t\t\t\t{\r\n\t\t\t\t\tvar startXPoint = cell.offsetLeft + cell.offsetWidth - textSize; \r\n\t\t\t\t\tif ( startXPoint > e.x )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trange.moveToPoint(startXPoint, e.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( startXPoint + textSize < e.x )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trange.moveToPoint(startXPoint+textSize-6, e.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\/\/need to subtract three because the IE editor inserts a nbsp at the\r\n\t\t\t\t\t\/\/end causing the text to move slightly to the left and messing up\r\n\t\t\t\t\t\/\/the cursor placement.\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trange.moveToPoint(e.x-3, e.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\/\/center align\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t\/\/this is the space that is half in front and half in back of the text from being centered\r\n\t\t\t\t\tvar spacer = 0.5*(cell.offsetWidth-textSize);\r\n\t\t\t\t\tvar startXPoint = cell.offsetLeft+ 3  + spacer \r\n\t\t\t\t\tvar endXPoint   = cell.offsetLeft + spacer + textSize -3; \r\n\t\t\t\t\tif ( endXPoint < e.x )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trange.moveToPoint(endXPoint, e.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( startXPoint > e.x )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trange.moveToPoint(startXPoint, e.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trange.moveToPoint(e.x-3, e.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\trange.select();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\/\/handler Gecko\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/when more than one colSpan need to remove cells html\r\n\t\t\tif ( di.editColSpan > 1 )\r\n\t\t\t{\r\n\t\t\t\tthis.setOverflowBorders(cell);\r\n\r\n\t\t\t\tvar scColSpan = cell.colSpan;\r\n\t\t\t\twhile(scColSpan < di.editColSpan)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar nextColCell = this.getCell(col+scColSpan, row);\r\n\r\n\t\t\t\t\tthis.editOverflowArray.push(nextColCell.innerHTML);\r\n\t\t\t\t\tnextColCell.innerHTML = \"&nbsp;\";\r\n\t\t\t\t\tthis.msSelectedCellBackground.addToWidth(nextColCell);\r\n\r\n\t\t\t\t\tscColSpan++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.editCell.style.width = di.editWidth + \"px\";\r\n\t\t\tthis.editCell.contentWindow.document.body.innerHTML = editText;\r\n\t\t\tthis.editCell.contentWindow.document.body.style.textAlign = cell.style.textAlign;\r\n\t\t\tthis.editCell.contentWindow.document.body.style.fontWeight = cell.style.fontWeight;\r\n\t\t\tthis.editCell.contentWindow.document.body.style.fontStyle = cell.style.fontStyle;\r\n\t\t\tthis.editCell.contentWindow.document.body.style.textDecoration = cell.style.textDecoration;\r\n\t\t\tthis.editCell.contentWindow.document.body.style.color = cell.style.color;\r\n\t\t\tthis.editCell.style.top  = this.calcCellTop(cell) + \"px\";\r\n\t\t\tthis.editCell.style.left = this.calcCellLeft(cell) + \"px\";\r\n\t\t\tthis.editCell.contentWindow.scroll(0,0);\r\n\r\n\t\t\t\/\/this code puts the currsor where the user clicked in the edit cell\r\n\t\t\tif ( e != null && !fromFormulaBar && !startFormula && !blankText && editText != \"&nbsp;\")\r\n\t\t\t{\r\n\r\n\t\t\t\tvar range = this.editCell.contentWindow.document.createRange();\r\n\t\t\t\t\/\/the first arg is the position that the cursor should be put the -3 is\r\n\t\t\t\t\/\/to account for the padding and border\r\n\t\t\t\tif ( cell.style.textAlign == \"left\" )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.geckoCalcTextLoc( e.clientX+this.sheetFrame.contentWindow.pageXOffset-cell.offsetLeft-3, \r\n\t\t\t\t\t\t\t\t  \trange, this.editCell.contentWindow.document.body, true, 0);\r\n\t\t\t\t}\r\n\t\t\t\telse if ( cell.style.textAlign == \"right\" )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.geckoCalcTextLoc( this.editCellSizer.getWidth(editText, di)-\r\n\t\t\t\t\t\t((cell.offsetLeft+cell.offsetWidth)-(e.clientX+this.sheetFrame.contentWindow.pageXOffset)),\r\n\t\t\t\t\t\trange, this.editCell.contentWindow.document.body, true, 0);\r\n\t\t\t\t}\r\n\t\t\t\t\/\/center align\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tvar textWidth = this.editCellSizer.getWidth(editText, di);\r\n\t\t\t\t\tthis.geckoCalcTextLoc((textWidth-3+0.5*(cell.offsetWidth-textWidth)) -\r\n\t\t\t\t\t\t((cell.offsetLeft+cell.offsetWidth)-(e.clientX+this.sheetFrame.contentWindow.pageXOffset)),\r\n\t\t\t\t\t\trange, this.editCell.contentWindow.document.body, true, 0);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar selection = this.editCell.contentWindow.getSelection();\r\n\t\t\t\tselection.addRange(range);\r\n\t\t\t\tselection.collapseToEnd();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( startFormula )\r\n\t\t{\r\n\t\t\tp.formulaBar.focus();\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.geckoCalcTextLoc":{"_":{"meta":{"summary":"","parameters":{"offsetWidth":{"type":""},"range":{"type":""},"node":{"type":""},"setStart":{"type":""},"lastWidth":{"type":""}},"src":"\t\tif ( setStart )\r\n\t\t{\r\n\t\t\tthis.editCellSizer.innerHTML = \"\";\r\n\t\t\tif ( node.firstChild )\r\n\t\t\t{\r\n\t\t\t\trange.setStartBefore(node.firstChild);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\trange.setStartBefore(node);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar kids = node.childNodes;\r\n\t\tfor(var x=0; x < kids.length; x++)\r\n\t\t{\r\n\t\t\tif ( kids[x].nodeType == Node.TEXT_NODE )\r\n\t\t\t{\r\n\t\t\t\tfor(var y=0; y < kids[x].length; y++)\r\n\t\t\t\t{\r\n\t\t\t\t\trange.setEnd(kids[x], y);\r\n\t\t\t\t\tthis.editCellSizer.appendChild(range.cloneContents());\r\n\t\t\t\t\tif ( this.editCellSizer.offsetWidth >= offsetWidth )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\/\/if the offsetWidth was closer to the front of the character then\r\n\t\t\t\t\t\t\/\/use the last range end\r\n\t\t\t\t\t\tif ( (this.editCellSizer.offsetWidth-offsetWidth) > (offsetWidth - lastWidth) )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\/\/if this is not the first char in the text node then\r\n\t\t\t\t\t\t\t\/\/use the last character\r\n\t\t\t\t\t\t\tif ( y > 0 )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\trange.setEnd(kids[x], y-1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\/\/must be closer to the end of the last node\r\n\t\t\t\t\t\t\telse if ( x > 0 )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\trange.setEndAfter(kids[x-1]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\/\/must be before anything in the node tree\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\trange.setEndBefore(kids[x]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlastWidth = this.editCellSizer.offsetWidth;\r\n\t\t\t\t\t\tthis.editCellSizer.innerHTML = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif ( this.geckoCalcTextLoc(offsetWidth, range, kids[x], false, lastWidth) )\r\n\t\t\t\t{\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.editEnd":{"_":{"meta":{"summary":"","parameters":{"nextCell":{"type":""}},"src":"\t\tvar enteredText;\r\n\t\tvar dataType;\r\n\t\tvar formulaBarText;\r\n\r\n\t\tvar cell = this.selectedCell;\r\n\t\tvar di   = this.selectedCellDI;\r\n\r\n\t\t\/\/remove from table, make hidden, and get the html entered\r\n\t\tthis.editCell.style.visibility = \"hidden\";\r\n\t\tif ( nextCell == this.ESC )\r\n\t\t{\r\n\t\t\tenteredText = di.oldCellText;\r\n\r\n\t\t\t\/\/need to handle escape from a formula differently so that we\r\n\t\t\t\/\/don't have to hit the server again\r\n\t\t\tif ( di.subDataType == this.FORMULA )\r\n\t\t\t{\r\n\t\t\t\tformulaBarText = di.formulaBarText;\r\n\t\t\t\tdataType = this.FORMULA;\r\n\t\t\t}\r\n\r\n\t\t\tif ( !dojo.render.html.ie)\r\n\t\t\t{\r\n\t\t\t\tthis.placeGeckoEditCell(null, 0, 0);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if ( dojo.render.html.ie )\r\n\t\t{\r\n\t\t\tenteredText = this.editCell.innerHTML;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.placeGeckoEditCell(null, 0, 0);\r\n\t\t\tenteredText = this.editCell.contentWindow.document.body.innerHTML;\r\n\t\t}\r\n\r\n\t\t\/\/add the html to cell\r\n\t\t\/\/if entered more text than can fix in one cell we need to put back\r\n\t\t\/\/what we took apart during editing\r\n\t\tif ( enteredText || di.editColSpan > 1 )\r\n\t\t{\r\n\t\t\tvar nextColCell;\r\n\r\n\t\t\tif ( dojo.render.html.ie )\r\n\t\t\t{\r\n\t\t\t\tcell.innerHTML = \"&nbsp;\";\r\n\t\t\t\tcell.colSpan = 1;\r\n\t\t\t\t\r\n\t\t\t\t\/\/see if we need to put back a background color div\r\n\t\t\t\tvar bgDiv = this.sheetFrame.contentDocument.getElementById(\"BGDiv\"+this.selectedCellCol+\",\"+this.selectedCellRow);\r\n\t\t\t\tif ( bgDiv && bgDiv.shouldBeHidden )\r\n\t\t\t\t{\r\n\t\t\t\t\tcell.style.backgroundColor = bgDiv.style.backgroundColor;\r\n\t\t\t\t\tbgDiv.style.visibility = \"hidden\";\r\n\t\t\t\t\tbgDiv.shouldBeHidden = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\/\/need to put back the cells we removed\r\n\t\t\t\tnextColCell = this.getCell(this.selectedCellCol+this.editOverflowArray.length, this.selectedCellRow); \r\n\t\t\t\tfor(var x=this.editOverflowArray.length; x > 0; x--)\r\n\t\t\t\t{\r\n\t\t\t\t\tcell.parentNode.insertBefore(this.editOverflowArray[x-1], nextColCell);\r\n\t\t\t\t\t\r\n\t\t\t\t\tnextColCell = this.editOverflowArray[x-1];\r\n\r\n\t\t\t\t\t\/\/see if we need to put back a background color div\r\n\t\t\t\t\tbgDiv = this.sheetFrame.contentDocument.getElementById(\"BGDiv\"+this.getCellCol(nextColCell)+\",\"+\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   this.getCellRow(nextColCell));\r\n\t\t\t\t\tif ( bgDiv && bgDiv.shouldBeHidden )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tnextColCell.style.backgroundColor = bgDiv.style.backgroundColor;\r\n\t\t\t\t\t\tbgDiv.style.visibility = \"hidden\";\r\n\t\t\t\t\t\tbgDiv.shouldBeHidden = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t\/\/need to put back the html we removed\r\n\t\t\t\tfor(var x=0; x < this.editOverflowArray.length; x++)\r\n\t\t\t\t{\r\n\t\t\t\t\tnextColCell = this.getCell(this.selectedCellCol+x+1, this.selectedCellRow); \r\n\t\t\t\t\tnextColCell.innerHTML = this.editOverflowArray[x];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.removeOverflowBorders(cell);\r\n\t\t\tthis.editOverflowArray.length = 0;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tenteredText = \"&nbsp;\";\r\n\t\t}\r\n\r\n\t\t\/\/add the text to the selected cell\r\n\t\tthis.setCellText(enteredText, cell, di, dataType, formulaBarText);\r\n\r\n\t\tthis.editing = false;\r\n\t\tthis.inFormula = false;\r\n\t\tthis.inFormulaMouseAdd = false;\r\n\t\tthis.formulaMS.hide();\r\n\r\n\t\t\/\/set controls state so controls can be enabled and disabled\r\n\t\t\/\/as some controls don't work in editing mode\r\n\t\tthis.setToolbarState();\r\n\r\n\t\tif ( nextCell )\r\n\t\t{\r\n\t\t\tthis.moveSelectedCell(nextCell);\r\n\t\t}\r\n\r\n\t\t\/\/need because of an IE bug where when we have a floater that was just\r\n\t\t\/\/entered by the user and the mouse is still over the cell and they\r\n\t\t\/\/then double click to edit the text they just entered without moving the\r\n\t\t\/\/mouse the borders will not repaint correctly.  This is caused because\r\n\t\t\/\/the floater is at zIndex of 0 and not -1 as it would be if they\r\n\t\t\/\/moved the mouse in the slightest.  So we do this to make sure\r\n\t\t\/\/in the very unlickly event they still get the pretty borders they\r\n\t\t\/\/expected to show them they are editing some text\r\n\t\tthis.enterCell(this.mouseOverCell);\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.cleanText":{"_":{"meta":{"summary":"","parameters":{"text":{"type":""}},"src":"\t\t{\r\n\t\t\ttext = text.substring(0, text.length-6);\r\n\t\t}\r\n\r\n\t\t\/\/remove any trailing break that sometimes has two trailing spaces\r\n\t\tif ( text.length >= 6 && text.substr(-6, 4) == \"<br>\")\r\n\t\t{\r\n\t\t\ttext = text.substring(0, text.length-6);\r\n\t\t}\r\n\r\n\t\t\/\/remove any trailing break \r\n\t\tif ( text.length >= 4 && text.substr(-4, 4) == \"<br>\")\r\n\t\t{\r\n\t\t\ttext = text.substring(0, text.length-4);\r\n\t\t}\r\n\r\n\t\t\/\/if the br was the only thing then put a nbsp in place\r\n\t\tif ( text.length == 0 )\r\n\t\t{\r\n\t\t\ttext = \"&nbsp;\";\r\n\t\t}\r\n\r\n\t\treturn text;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.setCellText":{"_":{"meta":{"summary":"","parameters":{"cellText":{"type":""},"cell":{"type":""},"di":{"type":"DataItem"},"dataType":{"type":""},"formulaBarText":{"type":""},"sendToServer":{"type":""}},"src":"\t\tvar addToUndo = true;\r\n\t\t\/\/when called from the server or UndoManager cell is the id of a cell\r\n\t\tif ( typeof cell == \"string\" )\r\n\t\t{\r\n\t\t\tcell = this.getCellFromString(cell);\r\n\t\t\taddToUndo = false;\r\n\t\t}\r\n\r\n\t\tvar col = this.getCellCol(cell);\r\n\t\tvar row = this.getCellRow(cell);\r\n\r\n\t\t\/\/if a sub data type is set we need to use that for the old value because\r\n\t\t\/\/formulas determine the data type when set and need the data type passed\r\n\t\t\/\/into setCellText to be FORMULA not it's result type\r\n\t\tvar oldDataType = di.subDataType ? di.subDataType : di.dataType;\r\n\t\tvar oldFormulaBarText = di.formulaBarText;\r\n\t\tvar subDataType;\r\n\r\n\t\t\/\/need to save off the cellText as oldCellText as \r\n\t\t\/\/setCellText may have not been called from editing\r\n\t\t\/\/editing also saves this value in case the user hits ESC\r\n\t\t\/\/but it doesn't hurt to save it again\r\n\t\tdi.oldCellText = di.cellText ? di.cellText : \"&nbsp;\";\r\n\r\n\t\t\/\/if dataType wasn't passed in then need to find out what we've got\r\n\t\tif ( !dataType || dataType == this.FORMULA )\r\n\t\t{\r\n\t\t\tvar returnArray = this.processNewText(cellText, formulaBarText, di.oldCellText, di.subDataType);\r\n\t\t\tcellText        = returnArray[this.processNewText.NEW_TEXT]; \r\n\t\t\tdataType        = returnArray[this.processNewText.DATA_TYPE];\r\n\t\t\tformulaBarText  = returnArray[this.processNewText.FORMULA_BAR_TEXT];\r\n\r\n\t\t\t\/\/sub data types are only used for some types like only formulas now\r\n\t\t\tif ( returnArray.length == 4 )\r\n\t\t\t{\r\n\t\t\t\tsubDataType = returnArray[this.processNewText.SUB_DATA_TYPE];\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setDataType(cell, di, dataType, subDataType);\r\n\t\tdi.setValue(\"formulaBarText\", formulaBarText);\r\n\r\n\t\t\/\/if text is empty blank out desired width so this cell is not part of calculation\r\n\t\tif ( cellText == \"&nbsp;\" )\r\n\t\t{\r\n\t\t\tdi.desiredWidth = null; \r\n\t\t}\r\n\t\t\/\/value used to size col when double click in header cap\r\n\t\t\/\/need to add an nbsp to get us a little extra room when sizing\r\n\t\telse\r\n\t\t{\r\n\t\t\tdi.desiredWidth = this.editCellSizer.getWidth(cellText+\"&nbsp;\", di);\r\n\t\t}\r\n\r\n\t\t\/\/see if we should try expanding the column to fix the enteredtext\r\n\t\tif ( di.dataType != this.NUMBER && di.dataType != this.EXPONENTIAL && \r\n\t\t\t di.dataType != this.TEXT && !this.getSheetCol(col).beenResized &&\r\n\t\t\tthis.editCellSizer.getWidth(cellText, di) > this.getEffectiveWidth(cell) )\r\n\t\t{\r\n\t\t\tcell.innerHTML = cellText;\r\n\t\t\tthis.doResize(\"col\", col, this.editCellSizer.offsetWidth - this.getEffectiveWidth(cell), false, true);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/calls the shrinkToFit method for the entered data type and also\r\n\t\t\t\/\/the shinkToFit methods set the innerHTML for the cell\r\n\t\t\tdi.shrinkToFit(cellText);\r\n\t\t}\r\n\r\n\t\tif ( cellText != \"&nbsp;\" )\r\n\t\t{\r\n\t\t\tdi.setValue(\"cellText\", cellText);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tdi.setValue(\"cellText\", null);\r\n\t\t}\r\n\r\n\t\t\/\/clean up floater arrays if this cell had a floater\r\n\t\tthis.removeFloaterFromArrays(cell);\r\n\r\n\t\t\/\/handle a cell that has a floating div over it\r\n\t\tif ( di.floaterOver != null )\r\n\t\t{\r\n\t\t\t\/\/need to see if it can now be expanded when the entered text is blank.\r\n\t\t\tif ( cellText == \"&nbsp;\" )\r\n\t\t\t{\r\n\t\t\t\tvar floater = this.getCell(col + di.floaterOver, row);\r\n\t\t\t\tvar floaterDI = this.dp.getValueAt(col + di.floaterOver, row);\r\n\r\n\t\t\t\t\/\/when found floater need to see how big we can make it\r\n\t\t\t\tif ( this.hasFloater(floater) )\r\n\t\t\t\t{\r\n\t\t\t\t\tvar colCell;\r\n\t\t\t\t\tvar colCellDI;\r\n\t\t\t\t\tvar allowedWidth = floater.offsetWidth;\r\n\t\t\t\t\tvar fCol=col+di.floaterOver+1;\r\n\t\t\t\t\tdo\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcolCell   = this.getCell(fCol, row);\r\n\t\t\t\t\t\tcolCellDI = this.dp.getValueAt(fCol, row);\r\n\r\n\t\t\t\t\t\tif ( colCell.innerHTML == \"&nbsp;\" )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tallowedWidth += colCell.offsetWidth;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfCol++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\twhile(colCellDI.floaterOver != null && fCol < this.numberOfCols)\r\n\r\n\t\t\t\t\tfloater.firstChild.style.width = Math.min(allowedWidth, floaterDI.editWidth) + \"px\";\r\n\t\t\t\t}\r\n\t\t\t\t\/\/clean up floaterOver var\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tdi.floaterOver = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\/\/Strinking floaters is handled in editStart() and in shrinkTextToFit()\r\n\t\t\t\/\/but when called by UndoManager or the server this hasn't happend already\r\n\t\t\t\/\/so we need to check here to make sure.\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.shrinkFloaterFromCell(cell, di);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t\/\/make sure the formula bar text is updated\r\n\t\tthis.processCellText();\r\n\r\n\t\t\/\/add to undo manager if this wasn't called from undomanager or server\r\n\t\t\/\/and the user did change something.  The OR is there so that if a user\r\n\t\t\/\/blanks out a blank cell it is still added to the UndoManager.\r\n\t\t\/\/Because we want to save all user actions in the undo manager but may\r\n\t\t\/\/decide to take it out later. (It's later and took out the OR so banking a blank doesn't get saved)\r\n\t\t\/\/if ( addToUndo && (di.oldCellText != cellText || di.oldCellText == \"&nbsp;\" || di.dataType == this.FORMULA) )\r\n\t\tif ( addToUndo && (di.oldCellText != cellText || di.dataType == this.FORMULA) )\r\n\t\t{\r\n\t\t\tvar undoMessageText = \"Blank out of \";\r\n\t\t\tif ( di.cellText && di.cellText != \"??\" )\r\n\t\t\t{\r\n\t\t\t\tundoMessageText = \"Typing \\\"\" + this.stripHTML(di.cellText) + \"\\\" in \";\r\n\t\t\t}\r\n\t\t\telse if ( formulaBarText )\r\n\t\t\t{\r\n\t\t\t\tundoMessageText = \"Typing \\\"\" + formulaBarText + \"\\\" in \";\r\n\t\t\t}\r\n\r\n\t\t\tcellText = cellText.replace(\/\"\/g, \"\\\\\\\"\");\r\n\t\t\tvar table = this;\r\n\t\t\tthis.undoManager.push(\r\n\t\t\t\t\t\t\/\/undo\r\n\t\t\t\t\t\tfunction() { table.setCellText(di.oldCellText ? di.oldCellText : \"&nbsp;\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  col+\",\"+row,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  di,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  oldDataType ? oldDataType : this.TEXT, \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  oldFormulaBarText ? oldFormulaBarText : \"\", true);\r\n\t\t\t\t\t\t\t\t  },\r\n\t\t\t\t\t\t\/\/redo\r\n\t\t\t\t\t\tfunction() { table.setCellText(cellText, \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  col+\",\"+row,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  di,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  dataType,  \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  formulaBarText ? formulaBarText : \"\", true);\r\n\t\t\t\t\t\t\t\t  }, \r\n\t\t\t\t\t\t\/\/discription\r\n\t\t\t\t\t\tundoMessageText + Formula.COLUMN_CHARS[col] + (row+1) );\r\n\r\n\t\t\t\/\/update the data provider with the new data\r\n\t\t\tthis.dp.setValueAt(col, row, di, \"setValue\");\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/update the data provider but don't send  to server if the action type is not set\r\n\t\t\tthis.dp.setValueAt(col, row, di, sendToServer ? \"setValue\" : DataProvider.NO_SEND);\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.processNewText":{"_":{"meta":{"summary":"","parameters":{"newText":{"type":""},"formulaBarText":{"type":""},"oldText":{"type":""},"subDataType":{"type":""}},"src":"\t\tvar strippedText = this.stripHTML(newText).replace(\"&nbsp;\",\"\");\r\n\r\n\t\t\/\/did the user enter a formula \r\n\t\tif ( strippedText.charAt(0) == \"=\" || (formulaBarText && formulaBarText.charAt(0) == \"=\") )\r\n\t\t{\r\n\t\t\t\/\/if we have have a formulaBarValue then need to determine the dataType of\r\n\t\t\t\/\/the formula result\r\n\t\t\tif ( formulaBarText )\r\n\t\t\t{\r\n\t\t\t\tvar result = this.processNewText(newText);\r\n\r\n\t\t\t\treturn [result[this.processNewText.NEW_TEXT], result[this.processNewText.DATA_TYPE],\r\n\t\t\t\t\t\tformulaBarText, this.FORMULA];\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\treturn [\"??\", this.FORMULA, strippedText.toUpperCase(), this.FORMULA];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t\/\/when the user edits an exponential number the edit text is the expanded number so\r\n\t\t\/\/we need to tack on a e0 here so it gets process as an exponential\r\n\t\tif ( subDataType && subDataType == this.EXPONENTIAL && strippedText.length > 1)\r\n\t\t{\r\n\t\t\tstrippedText += \"e0\";\r\n\t\t}\r\n\r\n\t\t\/\/did the user enter a number or exponential number\r\n\t\tvar result = strippedText.match(\/-?\\.\\d+E(-?|\\+?)\\d+|\\(\\.\\d+E(-?|\\+?)\\d+\\)|-?\\d+\\.?\\d*E(-?|\\+)?\\d+|\\(\\d+\\.?\\d*E(-?|\\+?)\\d+\\)|-?\\d+\\.?\\d*|\\(\\d+\\.?\\d*\\)|-?\\.\\d+|\\(\\.\\d+\\)\/i);\r\n\t\tif ( result && result[0].length == strippedText.length ) \r\n\t\t{\r\n\t\t\tdataType = this.NUMBER;\r\n\r\n\t\t\t\/\/convert () into a negative number\r\n\t\t\tif ( strippedText.charAt(0) == \"(\" )\r\n\t\t\t{\r\n\t\t\t\tnewText = strippedText.replace(\"(\", \"-\");\r\n\t\t\t\tnewText = newText.replace(\")\", \"\");\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tnewText = strippedText;\r\n\t\t\t}\r\n\r\n\t\t\t\/\/make sure exponential notation is in correct format\r\n\t\t\tstrippedText = strippedText.replace(\"e\", \"E\");\r\n\t\t\tvar eIndex = -1;\r\n\t\t\tif ( (eIndex = strippedText.indexOf(\"E\")) != -1 )\r\n\t\t\t{\r\n\t\t\t\tdataType = this.EXPONENTIAL;\r\n\t\t\t\tsubDataType = dataType;\r\n\r\n\t\t\t\tvar tempString = \"\";\r\n\t\t\t\tvar tempChar;\r\n\t\t\t\tvar index = 0;\r\n\t\t\t\tvar negative = false;\r\n\t\t\t\tvar pow = -1;\r\n\t\t\t\tvar decimalFound = false;\r\n\t\t\t\tif ( strippedText.charAt(index) == \"-\" )\r\n\t\t\t\t{\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t\tnegative = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( strippedText.charAt(index) == \".\" )\r\n\t\t\t\t{\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t\tdecimalFound = true;\r\n\t\t\t\t\tpow = -2;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar foundNonZero = false;\r\n\t\t\t\tvar digits = 1;\r\n\t\t\t\tvar lastDigit = 0;\r\n\t\t\t\tvar allDigits;\r\n\t\t\t\tfor(var x=index; x < eIndex; x++)\r\n\t\t\t\t{\r\n\t\t\t\t\ttempChar = strippedText.charAt(x);\r\n\r\n\t\t\t\t\tif ( !foundNonZero && tempChar == \"0\" )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpow--;\r\n\t\t\t\t\t\tcontinue\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( tempChar == \".\" )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdecimalFound = true;\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( !foundNonZero )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttempString = tempChar + \".\";\r\n\t\t\t\t\t\tfoundNonZero = true;\r\n\t\t\t\t\t\tpow++;\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( !decimalFound )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpow++;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( digits < this.MAX_EXPONENTIAL_DIGITS )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttempString += tempChar;\r\n\t\t\t\t\t\tdigits++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( digits == this.MAX_EXPONENTIAL_DIGITS )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlastDigit = parseInt(tempChar);\r\n\t\t\t\t\t\tallDigits = tempString + lastDigit;\r\n\r\n\t\t\t\t\t\t\/\/see if we need to round the last digit\r\n\t\t\t\t\t\tif ( x+1 < strippedText.length && parseInt(strippedText.charAt(x+1)) > 5 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlastDigit++;\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttempString += lastDigit;\r\n\t\t\t\t\t\tdigits++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\/\/keep all digits for formula bar\r\n\t\t\t\t\telse if ( digits > this.MAX_EXPONENTIAL_DIGITS )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tallDigits += tempChar;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tpow += parseInt(strippedText.substr(eIndex+1));\r\n\r\n\t\t\t\tif ( !allDigits )\r\n\t\t\t\t{\r\n\t\t\t\t\tallDigits = tempString;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( pow != 0 )\r\n\t\t\t\t{\r\n\t\t\t\t\tallDigits = parseFloat(allDigits) * Math.pow(10,pow);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tallDigits = parseFloat(allDigits);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( negative )\r\n\t\t\t\t{\r\n\t\t\t\t\tallDigits = \"-\" + allDigits;\r\n\t\t\t\t}\r\n\t\t\t\tformulaBarText = allDigits;\r\n\r\n\t\t\t\tif ( pow == 0 )\r\n\t\t\t\t{\r\n\t\t\t\t\tpow = \"\";\r\n\t\t\t\t}\r\n\t\t\t\telse if ( pow > 0 && pow < 10 )\r\n\t\t\t\t{\r\n\t\t\t\t\tpow = \"E+0\" + pow;\r\n\t\t\t\t}\r\n\t\t\t\telse if ( pow >= 10 )\r\n\t\t\t\t{\r\n\t\t\t\t\tpow = \"E+\" + pow;\r\n\t\t\t\t}\r\n\t\t\t\telse if ( pow < 0 && pow > -10 )\r\n\t\t\t\t{\r\n\t\t\t\t\tpow = \"E-0\" + (pow*-1);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tpow = \"E\" + pow;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( negative )\r\n\t\t\t\t{\r\n\t\t\t\t\tnewText = \"-\" + tempString + pow;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tnewText = tempString + pow;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn [newText, dataType, formulaBarText, subDataType];\r\n\t\t}\r\n\r\n\t\t\/\/did the user enter money\r\n\t\tresult = strippedText.match(\/(\\$-|-\\$|\\$)((\\d{1,3},)(\\d{3},)*\\d{3,}|\\d*)\\.?\\d*|\\(\\$((\\d{1,3},)(\\d{3},)*\\d{3,}|\\d*)\\.?\\d*\\)\/);\r\n\t\tif ( result && result[0].length == strippedText.length ) \r\n\t\t{\r\n\t\t\tdataType = this.MONEY;\r\n\r\n\t\t\tstrippedText = strippedText.replace(\"$\", \"\");\r\n\t\t\t\/\/need to strip , otherwhise js treats them as decimal points\r\n\t\t\tstrippedText = strippedText.replace(\/,\/g, \"\");\r\n\r\n\t\t\t\/\/strip out () and temp replace with -\r\n\t\t\tif ( strippedText.charAt(0) == \"(\" )\r\n\t\t\t{\r\n\t\t\t\tstrippedText = strippedText.replace(\"(\", \"-\");\r\n\t\t\t\tstrippedText = strippedText.replace(\")\", \"\");\r\n\t\t\t}\r\n\r\n\t\t\tvar negative = false;\r\n\r\n\t\t\tfunction setFormulaBarText(tempNum)\r\n\t\t\t{\r\n\t\t\t\tformulaBarText = \"$\" + tempNum;\r\n\t\t\t\tif ( tempNum < 0 )\r\n\t\t\t\t{\r\n\t\t\t\t\tnegative = true;\r\n\t\t\t\t\tformulaBarText = \"-\" + formulaBarText.replace(\"-\", \"\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar tempNum;\r\n\t\t\tif ( strippedText.indexOf(\".\") != -1 )\r\n\t\t\t{\r\n\t\t\t\ttempNum = parseFloat(strippedText, 10);\r\n\t\t\t\tsetFormulaBarText(tempNum);\r\n\t\t\t\ttempNum = tempNum.toFixed(2);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\ttempNum = parseInt(strippedText, 10);\r\n\t\t\t\tsetFormulaBarText(tempNum);\r\n\t\t\t}\r\n\r\n\r\n\t\t\t\/\/put , in money if needed\r\n\t\t\tvar digitCount = 1;\r\n\t\t\tvar digit;\r\n\t\t\tvar parts = tempNum.toString().replace(\"-\",\"\").split(\".\");\r\n\t\t\tif ( parts.length > 1 )\r\n\t\t\t{\r\n\t\t\t\tnewText = \".\" + parts[1];\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tnewText = \"\";\r\n\t\t\t}\r\n\r\n\t\t\tfor(var x = parts[0].length-1; x > 0; x--)\r\n\t\t\t{\r\n\t\t\t\tdigit = parts[0].charAt(x);\r\n\r\n\t\t\t\tif ( digitCount == 3 )\r\n\t\t\t\t{\r\n\t\t\t\t\tdigitCount = 1;\r\n\t\t\t\t\tnewText = \",\" + digit + newText;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tnewText = digit + newText; \r\n\t\t\t\t\tdigitCount++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tnewText = parts[0].charAt(0) + newText; \r\n\r\n\t\t\tif ( negative )\r\n\t\t\t{\r\n\t\t\t\tnewText = \"($\" + newText + \")\";\r\n\t\t\t\tnewText = newText.replace(\"-\", \"\");\r\n\t\t\t\tnegative = true;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tnewText = \"$\" + newText;\r\n\t\t\t}\r\n\r\n\t\t\treturn [newText, dataType, formulaBarText];\r\n\t\t}\r\n\r\n\t\t\/\/did the user enter a percentage \r\n\t\tresult = strippedText.match(\/-?\\d+\\.?\\d*%|\\(\\d+\\.?\\d*%\\)|-?\\.\\d+%|\\(\\.\\d+%\\)\/);\r\n\t\tif ( result && result[0].length == strippedText.length ) \r\n\t\t{\r\n\t\t\tdataType = this.PERCENT;\r\n\r\n\t\t\t\/\/convert () into a negative number and pad 0 if needed\r\n\t\t\tif ( strippedText.charAt(0) == \"(\" || strippedText.charAt(0) == \"-\" )\r\n\t\t\t{\r\n\t\t\t\tstrippedText = strippedText.replace(\"(\", \"-\");\r\n\t\t\t\tstrippedText = strippedText.replace(\")\", \"\");\r\n\r\n\t\t\t\tif ( strippedText.charAt(1) == \".\" )\r\n\t\t\t\t{\r\n\t\t\t\t\tnewText = \"-0.\" + strippedText.substr(2);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tnewText = strippedText;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\t\/\/padd zero if needed\r\n\t\t\telse if ( strippedText.charAt(0) == \".\" )\r\n\t\t\t{\r\n\t\t\t\tnewText = \"0\" + strippedText;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tnewText = strippedText;\r\n\t\t\t}\r\n\r\n\t\t\treturn [newText, dataType, formulaBarText];\r\n\t\t}\r\n\r\n\t\t\/\/handle date\r\n\t\tresult = strippedText.match(\/\\d{1,2}\\\/\\d{1,2}\\\/(\\d{4}|\\d{2})|\\d{1,2}\\\/\\d{1,2}|\\d{1,2}-(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\/i);\r\n\t\tif ( result && result[0].length == strippedText.length ) \r\n\t\t{\r\n\t\t\tvar parts = strippedText.split(\"\/\");\r\n\t\t\tvar date = new Date();\r\n\t\t\tvar month, day;\r\n\r\n\t\t\t\/\/is this a 1-Jan format date\r\n\t\t\tif ( parts.length == 1 )\r\n\t\t\t{\r\n\t\t\t\tparts = strippedText.split(\"-\");\r\n\r\n\t\t\t\tday = parseInt(parts[0], 10);\r\n\t\t\t\tmonth = Date.getMonthFromString(parts[1])+1;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tmonth = parseInt(parts[0], 10);\r\n\t\t\t\tday = parseInt(parts[1], 10);\r\n\t\t\t}\r\n\r\n\t\t\t\/\/validate date\r\n\t\t\tdate.setMonth(month-1);\r\n\t\t\tdate.setDate(day);\r\n\t\t\t\/\/this works for validation because the js date object rolls things if the are\r\n\t\t\t\/\/greater than the normal values for month and day or month\r\n\t\t\tif ( month == date.getMonth()+1 ) \r\n\t\t\t{\r\n\t\t\t\tdataType = this.DATE;\r\n\t\t\t\t\/\/add year if needed\r\n\t\t\t\tif ( parts.length == 2 )\r\n\t\t\t\t{\r\n\t\t\t\t\tparts[2] = date.getFullYear();\r\n\t\t\t\t\tnewText = day + \"-\" + Date.MONTH_STRINGS[month];\r\n\t\t\t\t\tsubDataType = Date.TWO_PART_DATE;\r\n\t\t\t\t}\r\n\t\t\t\t\/\/user must of typed year\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t\/\/convert year into four digits if needed\r\n\t\t\t\t\tif ( parts[2].length == 2 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( parseInt(parts[2]) < 30 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tparts[2] = \"20\" + parts[2];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tparts[2] = \"19\" + parts[2];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( subDataType && subDataType == Date.TWO_PART_DATE )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tnewText = day + \"-\" + Date.MONTH_STRINGS[month];\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tnewText = month + \"\/\" + day + \"\/\" + parts[2]\r\n\t\t\t\t\t\tsubDataType = Date.THREE_PART_DATE;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tformulaBarText = month + \"\/\" + day + \"\/\" + parts[2]\r\n\r\n\t\t\t\treturn [newText, dataType, formulaBarText, subDataType];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t\/\/handle time\r\n\t\tresult = strippedText.match(\/\\d{1,2}\\:\\d{1,2}\\:\\d{1,2}( AM| PM)?|\\d{1,2}\\:\\d{1,2}( AM| PM)?\/i);\r\n\t\tif ( result && result[0].length == strippedText.length ) \r\n\t\t{\r\n\t\t\tvar parts = strippedText.split(\":\");\r\n\t\t\tvar hour = parseInt(parts[0], 10);\r\n\t\t\tvar min  = parseInt(parts[1], 10);\r\n\t\t\tvar sec  = parts.length == 3 ? parseInt(parts[2], 10) : 0;\r\n\t\t\tvar end = parts[parts.length-1].toUpperCase();\r\n\r\n\t\t\t\/\/validate time\r\n\t\t\tif ( hour >= 0 && hour <= 23 && min >= 0 && min <= 60 && sec >= 0 && sec <= 60 &&\r\n\t\t\t\t (hour <= 12 || (hour > 12 && end.indexOf(\"M\") == -1)) )\r\n\t\t\t{\r\n\t\t\t\tdataType = this.TIME;\r\n\r\n\t\t\t\tif ( min < 10 )\r\n\t\t\t\t{\r\n\t\t\t\t\tmin = \"0\" + min;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( sec < 10 )\r\n\t\t\t\t{\r\n\t\t\t\t\tsec = \"0\" + sec;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\/\/see if the user entered AM PM\r\n\t\t\t\tvar amPM = \"\";\r\n\t\t\t\tif ( end.indexOf(\"AM\") != -1 )\r\n\t\t\t\t{\r\n\t\t\t\t\tamPM = \" AM\";\r\n\t\t\t\t}\r\n\t\t\t\telse if ( end.indexOf(\"PM\") != -1 )\r\n\t\t\t\t{\r\n\t\t\t\t\tamPM = \" PM\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\/\/if user didn't enter seconds then only formula bar has seconds\r\n\t\t\t\tif ( parts.length == 2 || (oldText && oldText.split(\":\").length == 2) )\r\n\t\t\t\t{\r\n\t\t\t\t\t\/\/did the user origanaly have 24 hour time\r\n\t\t\t\t\tif ( subDataType && subDataType == Time.HOUR24_TIME )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tnewText = ((amPM == \" PM\" && hour != 12) ? hour+12 : hour) + \":\" + min;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tnewText = hour + \":\" + min + amPM;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t\/\/did the user origanaly have 24 hour time\r\n\t\t\t\t\tif ( subDataType && subDataType == Time.HOUR24_TIME )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tnewText = ((hour == \" PM\" && hour != 12) ? hour+12 : hour) + \":\" + min + \":\" + sec;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tnewText = hour + \":\" + min + \":\" + sec + amPM;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\/\/formula bar is always in standard time\r\n\t\t\t\tif ( hour > 12 )\r\n\t\t\t\t{\r\n\t\t\t\t\tformulaBarText = (hour-12) + \":\" + min + \":\" + sec + \" PM\";\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tformulaBarText = hour + \":\" + min + \":\" + sec + (amPM ? amPM : \" AM\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( amPM != \"\" && (!subDataType || (subDataType && subDataType != Time.HOUR24_TIME)) )\r\n\t\t\t\t{\r\n\t\t\t\t\tsubDataType = Time.HOUR12_TIME;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tsubDataType = Time.HOUR24_TIME;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn [newText, dataType, formulaBarText, subDataType];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t\/\/TODO:handle date time\r\n\r\n\t\t\/\/handle boolean \r\n\t\tresult = strippedText.match(\/TRUE|FALSE\/i);\r\n\t\tif ( result && result[0].length == strippedText.length ) \r\n\t\t{\r\n\t\t\treturn [strippedText.toUpperCase(), this.BOOLEAN, formulaBarText];\r\n\t\t}\r\n\r\n\t\t\/\/handle URL\r\n\t\tresult = strippedText.match(\/(http.+)|(www\\..+)|(.+\\.com)|(.+\\.org)|(.+\\.edu)\/i);\r\n\t\tif ( result && result[0].length == strippedText.length ) \r\n\t\t{\r\n\t\t\tif ( strippedText.substr(0, 4) != 'http' )\r\n\t\t\t{\r\n\t\t\t\tstrippedText = 'http' + strippedText;\r\n\t\t\t}\r\n\r\n\t\t\tif ( strippedText.charAt(4) != ':' )\r\n\t\t\t{\r\n\t\t\t\tstrippedText = strippedText.substr(0,4) + ':' + strippedText.substr(4);\r\n\t\t\t}\r\n\r\n\t\t\tif ( strippedText.charAt(5) != '\/' )\r\n\t\t\t{\r\n\t\t\t\tstrippedText = strippedText.substr(0,5) + '\/' + strippedText.substr(5);\r\n\t\t\t}\r\n\r\n\t\t\tif ( strippedText.charAt(6) != '\/' )\r\n\t\t\t{\r\n\t\t\t\tstrippedText = strippedText.substr(0,6) + '\/' + strippedText.substr(6);\r\n\t\t\t}\r\n\r\n\t\t\tnewText = \"<a target='_new' href='\"+strippedText+\"'>\"+strippedText.substr(7)+\"<\/a>\";\r\n\t\t\tformulaBarText = strippedText;\r\n\t\t}\r\n\r\n\t\tif ( dataType == this.TEXT )\r\n\t\t{\r\n\t\t\tif ( newText.indexOf(\"#REF!\") == 0 )\r\n\t\t\t{\r\n\t\t\t\tdataType = this.ERROR;\r\n\t\t\t}\r\n\t\t\tformulaBarText = this.stripHTML(newText).replace(\/&nbsp;\/ig, \" \").replace(\/&lt;\/ig, \"<\").\r\n\t\t\t\t\t\t\t\t\treplace(\/&gt;\/ig, \">\").replace(\/&amp;\/ig, \"&\"); \r\n\t\t}\r\n\r\n\t\treturn [newText, dataType, formulaBarText];\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.shrinkFloaterFromCell":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""},"di":{"type":"dataItem"}},"src":"\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar floater = this.getCell(this.getCellCol(cell) + di.floaterOver, this.getCellRow(cell));\r\n\r\n\t\tif ( this.hasFloater(floater) )\r\n\t\t{\r\n\t\t\tvar newMaxWidth = cell.offsetLeft - floater.offsetLeft;\r\n\t\t\tfloater.firstChild.style.width = Math.min(newMaxWidth,\r\n\t\t\t\t\t\t\t\t\t\tparseInt(floater.firstChild.style.width)) + \"px\";\r\n\t\t}\r\n\t\t\/\/clean up floaterOver var\r\n\t\telse\r\n\t\t{\r\n\t\t\tdi.floaterOver = null;\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.setDataType":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""},"di":{"type":""},"dataType":{"type":""},"subDataType":{"type":""}},"src":"\t\tdi.setValue(\"dataType\", dataType);\r\n\t\tdi.dataType = dataType;\r\n\t\tdi.subDataType = subDataType;\r\n\r\n\t\tif (!dataType)\r\n\t\t{\r\n\t\t\tdi.shrinkToFit = function(){};\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tvar table = this;\r\n\t\t\tswitch(dataType)\r\n\t\t\t{\r\n\t\t\t\tcase this.ERROR:\r\n\t\t\t\t\tdi.shrinkToFit = function(text) { table.shrinkTextToFit(cell, di, text); };\r\n\t\t\t\t\tcell.style.textAlign = \"center\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this.TEXT: \r\n\t\t\t\t\tdi.shrinkToFit = function(text) { table.shrinkTextToFit(cell, di, text); };\r\n\t\t\t\t\tcell.style.textAlign = \"left\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this.EXPONENTIAL:\r\n\t\t\t\tcase this.NUMBER:\r\n\t\t\t\t\tdi.shrinkToFit = function(num) { table.shrinkNumberToFit(cell, di, num); };\r\n\t\t\t\t\tcell.style.textAlign = \"right\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this.BOOLEAN:\r\n\t\t\t\t\tdi.shrinkToFit = function(data) { table.shrinkGeneralToFit(cell, di, data); };\r\n\t\t\t\t\tcell.style.textAlign = \"center\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t\/\/this.FORMULA:\r\n\t\t\t\t\t\/\/this.MONEY:\r\n\t\t\t\t\t\/\/this.PERCENT:\r\n\t\t\t\t\t\/\/this.DATE:\r\n\t\t\t\t\t\/\/this.TIME:\r\n\t\t\t\t\t\/\/this.DATE_TIME:\r\n\t\t\t\t\tdi.shrinkToFit = function(data) { table.shrinkGeneralToFit(cell, di, data); };\r\n\t\t\t\t\tcell.style.textAlign = \"right\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t\/\/if the user overrode the default alignment then\r\n\t\t\/\/set to what they wanted\r\n\t\tif ( di.textAlign )\r\n\t\t{\r\n\t\t\tcell.style.textAlign = di.textAlign; \r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.this.ERROR":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""},"di":{"type":""},"dataType":{"type":""},"subDataType":{"type":""}},"src":"\t\tdi.setValue(\"dataType\", dataType);\r\n\t\tdi.dataType = dataType;\r\n\t\tdi.subDataType = subDataType;\r\n\r\n\t\tif (!dataType)\r\n\t\t{\r\n\t\t\tdi.shrinkToFit = function(){};\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tvar table = this;\r\n\t\t\tswitch(dataType)\r\n\t\t\t{\r\n\t\t\t\tcase this.ERROR:\r\n\t\t\t\t\tdi.shrinkToFit = function(text) { table.shrinkTextToFit(cell, di, text); };\r\n\t\t\t\t\tcell.style.textAlign = \"center\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this.TEXT: \r\n\t\t\t\t\tdi.shrinkToFit = function(text) { table.shrinkTextToFit(cell, di, text); };\r\n\t\t\t\t\tcell.style.textAlign = \"left\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this.EXPONENTIAL:\r\n\t\t\t\tcase this.NUMBER:\r\n\t\t\t\t\tdi.shrinkToFit = function(num) { table.shrinkNumberToFit(cell, di, num); };\r\n\t\t\t\t\tcell.style.textAlign = \"right\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this.BOOLEAN:\r\n\t\t\t\t\tdi.shrinkToFit = function(data) { table.shrinkGeneralToFit(cell, di, data); };\r\n\t\t\t\t\tcell.style.textAlign = \"center\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t\/\/this.FORMULA:\r\n\t\t\t\t\t\/\/this.MONEY:\r\n\t\t\t\t\t\/\/this.PERCENT:\r\n\t\t\t\t\t\/\/this.DATE:\r\n\t\t\t\t\t\/\/this.TIME:\r\n\t\t\t\t\t\/\/this.DATE_TIME:\r\n\t\t\t\t\tdi.shrinkToFit = function(data) { table.shrinkGeneralToFit(cell, di, data); };\r\n\t\t\t\t\tcell.style.textAlign = \"right\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t\/\/if the user overrode the default alignment then\r\n\t\t\/\/set to what they wanted\r\n\t\tif ( di.textAlign )\r\n\t\t{\r\n\t\t\tcell.style.textAlign = di.textAlign; \r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.this.TEXT":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""},"di":{"type":""},"dataType":{"type":""},"subDataType":{"type":""}},"src":"\t\tdi.setValue(\"dataType\", dataType);\r\n\t\tdi.dataType = dataType;\r\n\t\tdi.subDataType = subDataType;\r\n\r\n\t\tif (!dataType)\r\n\t\t{\r\n\t\t\tdi.shrinkToFit = function(){};\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tvar table = this;\r\n\t\t\tswitch(dataType)\r\n\t\t\t{\r\n\t\t\t\tcase this.ERROR:\r\n\t\t\t\t\tdi.shrinkToFit = function(text) { table.shrinkTextToFit(cell, di, text); };\r\n\t\t\t\t\tcell.style.textAlign = \"center\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this.TEXT: \r\n\t\t\t\t\tdi.shrinkToFit = function(text) { table.shrinkTextToFit(cell, di, text); };\r\n\t\t\t\t\tcell.style.textAlign = \"left\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this.EXPONENTIAL:\r\n\t\t\t\tcase this.NUMBER:\r\n\t\t\t\t\tdi.shrinkToFit = function(num) { table.shrinkNumberToFit(cell, di, num); };\r\n\t\t\t\t\tcell.style.textAlign = \"right\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this.BOOLEAN:\r\n\t\t\t\t\tdi.shrinkToFit = function(data) { table.shrinkGeneralToFit(cell, di, data); };\r\n\t\t\t\t\tcell.style.textAlign = \"center\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t\/\/this.FORMULA:\r\n\t\t\t\t\t\/\/this.MONEY:\r\n\t\t\t\t\t\/\/this.PERCENT:\r\n\t\t\t\t\t\/\/this.DATE:\r\n\t\t\t\t\t\/\/this.TIME:\r\n\t\t\t\t\t\/\/this.DATE_TIME:\r\n\t\t\t\t\tdi.shrinkToFit = function(data) { table.shrinkGeneralToFit(cell, di, data); };\r\n\t\t\t\t\tcell.style.textAlign = \"right\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t\/\/if the user overrode the default alignment then\r\n\t\t\/\/set to what they wanted\r\n\t\tif ( di.textAlign )\r\n\t\t{\r\n\t\t\tcell.style.textAlign = di.textAlign; \r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.this.EXPONENTIAL":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""},"di":{"type":""},"dataType":{"type":""},"subDataType":{"type":""}},"src":"\t\tdi.setValue(\"dataType\", dataType);\r\n\t\tdi.dataType = dataType;\r\n\t\tdi.subDataType = subDataType;\r\n\r\n\t\tif (!dataType)\r\n\t\t{\r\n\t\t\tdi.shrinkToFit = function(){};\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tvar table = this;\r\n\t\t\tswitch(dataType)\r\n\t\t\t{\r\n\t\t\t\tcase this.ERROR:\r\n\t\t\t\t\tdi.shrinkToFit = function(text) { table.shrinkTextToFit(cell, di, text); };\r\n\t\t\t\t\tcell.style.textAlign = \"center\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this.TEXT: \r\n\t\t\t\t\tdi.shrinkToFit = function(text) { table.shrinkTextToFit(cell, di, text); };\r\n\t\t\t\t\tcell.style.textAlign = \"left\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this.EXPONENTIAL:\r\n\t\t\t\tcase this.NUMBER:\r\n\t\t\t\t\tdi.shrinkToFit = function(num) { table.shrinkNumberToFit(cell, di, num); };\r\n\t\t\t\t\tcell.style.textAlign = \"right\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this.BOOLEAN:\r\n\t\t\t\t\tdi.shrinkToFit = function(data) { table.shrinkGeneralToFit(cell, di, data); };\r\n\t\t\t\t\tcell.style.textAlign = \"center\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t\/\/this.FORMULA:\r\n\t\t\t\t\t\/\/this.MONEY:\r\n\t\t\t\t\t\/\/this.PERCENT:\r\n\t\t\t\t\t\/\/this.DATE:\r\n\t\t\t\t\t\/\/this.TIME:\r\n\t\t\t\t\t\/\/this.DATE_TIME:\r\n\t\t\t\t\tdi.shrinkToFit = function(data) { table.shrinkGeneralToFit(cell, di, data); };\r\n\t\t\t\t\tcell.style.textAlign = \"right\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t\/\/if the user overrode the default alignment then\r\n\t\t\/\/set to what they wanted\r\n\t\tif ( di.textAlign )\r\n\t\t{\r\n\t\t\tcell.style.textAlign = di.textAlign; \r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.this.NUMBER":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""},"di":{"type":""},"dataType":{"type":""},"subDataType":{"type":""}},"src":"\t\tdi.setValue(\"dataType\", dataType);\r\n\t\tdi.dataType = dataType;\r\n\t\tdi.subDataType = subDataType;\r\n\r\n\t\tif (!dataType)\r\n\t\t{\r\n\t\t\tdi.shrinkToFit = function(){};\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tvar table = this;\r\n\t\t\tswitch(dataType)\r\n\t\t\t{\r\n\t\t\t\tcase this.ERROR:\r\n\t\t\t\t\tdi.shrinkToFit = function(text) { table.shrinkTextToFit(cell, di, text); };\r\n\t\t\t\t\tcell.style.textAlign = \"center\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this.TEXT: \r\n\t\t\t\t\tdi.shrinkToFit = function(text) { table.shrinkTextToFit(cell, di, text); };\r\n\t\t\t\t\tcell.style.textAlign = \"left\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this.EXPONENTIAL:\r\n\t\t\t\tcase this.NUMBER:\r\n\t\t\t\t\tdi.shrinkToFit = function(num) { table.shrinkNumberToFit(cell, di, num); };\r\n\t\t\t\t\tcell.style.textAlign = \"right\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this.BOOLEAN:\r\n\t\t\t\t\tdi.shrinkToFit = function(data) { table.shrinkGeneralToFit(cell, di, data); };\r\n\t\t\t\t\tcell.style.textAlign = \"center\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t\/\/this.FORMULA:\r\n\t\t\t\t\t\/\/this.MONEY:\r\n\t\t\t\t\t\/\/this.PERCENT:\r\n\t\t\t\t\t\/\/this.DATE:\r\n\t\t\t\t\t\/\/this.TIME:\r\n\t\t\t\t\t\/\/this.DATE_TIME:\r\n\t\t\t\t\tdi.shrinkToFit = function(data) { table.shrinkGeneralToFit(cell, di, data); };\r\n\t\t\t\t\tcell.style.textAlign = \"right\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t\/\/if the user overrode the default alignment then\r\n\t\t\/\/set to what they wanted\r\n\t\tif ( di.textAlign )\r\n\t\t{\r\n\t\t\tcell.style.textAlign = di.textAlign; \r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.this.BOOLEAN":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""},"di":{"type":""},"dataType":{"type":""},"subDataType":{"type":""}},"src":"\t\tdi.setValue(\"dataType\", dataType);\r\n\t\tdi.dataType = dataType;\r\n\t\tdi.subDataType = subDataType;\r\n\r\n\t\tif (!dataType)\r\n\t\t{\r\n\t\t\tdi.shrinkToFit = function(){};\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tvar table = this;\r\n\t\t\tswitch(dataType)\r\n\t\t\t{\r\n\t\t\t\tcase this.ERROR:\r\n\t\t\t\t\tdi.shrinkToFit = function(text) { table.shrinkTextToFit(cell, di, text); };\r\n\t\t\t\t\tcell.style.textAlign = \"center\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this.TEXT: \r\n\t\t\t\t\tdi.shrinkToFit = function(text) { table.shrinkTextToFit(cell, di, text); };\r\n\t\t\t\t\tcell.style.textAlign = \"left\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this.EXPONENTIAL:\r\n\t\t\t\tcase this.NUMBER:\r\n\t\t\t\t\tdi.shrinkToFit = function(num) { table.shrinkNumberToFit(cell, di, num); };\r\n\t\t\t\t\tcell.style.textAlign = \"right\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this.BOOLEAN:\r\n\t\t\t\t\tdi.shrinkToFit = function(data) { table.shrinkGeneralToFit(cell, di, data); };\r\n\t\t\t\t\tcell.style.textAlign = \"center\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t\/\/this.FORMULA:\r\n\t\t\t\t\t\/\/this.MONEY:\r\n\t\t\t\t\t\/\/this.PERCENT:\r\n\t\t\t\t\t\/\/this.DATE:\r\n\t\t\t\t\t\/\/this.TIME:\r\n\t\t\t\t\t\/\/this.DATE_TIME:\r\n\t\t\t\t\tdi.shrinkToFit = function(data) { table.shrinkGeneralToFit(cell, di, data); };\r\n\t\t\t\t\tcell.style.textAlign = \"right\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t\/\/if the user overrode the default alignment then\r\n\t\t\/\/set to what they wanted\r\n\t\tif ( di.textAlign )\r\n\t\t{\r\n\t\t\tcell.style.textAlign = di.textAlign; \r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.default":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.shrinkTextToFit":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""},"di":{"type":""},"text":{"type":""}},"src":"\t\t{\r\n\t\t\tthis.shrinkFloaterFromCell(cell, di);\r\n\t\t}\r\n\r\n\t\tif ( this.editCellSizer.getWidth(text, di) > this.getEffectiveWidth(cell) )\r\n\t\t{\r\n\t\t\t\/\/create a div to hold the text\r\n\t\t\tvar floater = this.sheetFrame.contentDocument.createElement(\"div\");\r\n\t\t\tfloater.style.position = \"absolute\";\r\n\t\t\tfloater.style.overflow = \"hidden\";\r\n\t\t\tfloater.innerHTML = text;\r\n\t\t\tif ( di.textDecoration )\r\n\t\t\t{\r\n\t\t\t\tfloater.style.textDecoration = di.textDecoration;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tfloater.style.textDecoration = \"none\" ;\r\n\t\t\t}\r\n\t\t\t\/\/need to set to nbsp before getting height or the height\r\n\t\t\t\/\/will include the height of the wrapped text\r\n\t\t\tcell.innerHTML = \"&nbsp;\";\r\n\t\t\tfloater.style.height = (cell.offsetHeight-2) + \"px\";\r\n\r\n\t\t\t\/\/see if html in any cell we overlap to the right had text\r\n\t\t\tvar totalWidths = cell.offsetWidth;\r\n\t\t\tvar allowedWidth = totalWidths;\r\n\t\t\tvar col = this.getCellCol(cell);\r\n\t\t\tvar row = this.getCellRow(cell);\r\n\t\t\tvar nCol = col+1;\r\n\t\t\tvar nextColCell = this.getCell(nCol, row);\r\n\t\t\tvar nextColDI   = this.dp.getValueAt(nCol, row);\r\n\t\t\tvar textFound = false;\r\n\t\t\tvar biggerThanNumCols = false;\r\n\t\t\tdi.editColSpan = 1;\r\n\t\t\twhile( totalWidths < this.editCellSizer.offsetWidth )\r\n\t\t\t{\r\n\t\t\t\t\/\/used when editing this cell to shrink the floater if needed\r\n\t\t\t\tnextColDI.floaterOver = col-nCol; \r\n\r\n\t\t\t\tif ( !textFound && nextColCell && nextColCell.innerHTML == \"&nbsp;\" )\r\n\t\t\t\t{\r\n\t\t\t\t\tallowedWidth += nextColCell.offsetWidth;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\ttextFound = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( nextColCell )\r\n\t\t\t\t{\r\n\t\t\t\t\ttotalWidths += nextColCell.offsetWidth;\r\n\t\t\t\t\tthis.dp.setValueAt(nCol, row, nextColDI, DataProvider.NO_SEND);\r\n\t\t\t\t}\r\n\t\t\t\telse \/\/if the next column cell isn't on the client yet just use the default col width\r\n\t\t\t\t{\r\n\t\t\t\t\ttotalWidths += this.defaultColWidth; \r\n\t\t\t\t\tbiggerThanNumCols = true;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tnextColCell = this.getCell(++nCol, row);\r\n\t\t\t\tnextColDI   = this.dp.getValueAt(nCol, row);\r\n\t\t\t\tdi.editColSpan++\r\n\t\t\t}\r\n\t\t\tfloater.style.width = Math.min(allowedWidth, \r\n\t\t\t\t\t\t\t\t\t\t\tthis.editCellSizer.offsetWidth) + \"px\";\r\n\r\n\t\t\tdi.editWidth = this.editCellSizer.offsetWidth;\r\n\r\n\t\t\tthis.addFloaterToCell(cell, floater, true, biggerThanNumCols, di);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tcell.innerHTML = text;\r\n\t\t\t\/\/clean up floater arrays if this cell had a floater\r\n\t\t\tthis.removeFloaterFromArrays(cell);\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.shrinkNumberToFit":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""},"di":{"type":""},"num":{"type":""}},"src":"\t\tif ( this.editCellSizer.getWidth(num, di) > this.getEffectiveWidth(cell) )\r\n\t\t{\r\n\t\t\tvar numString;\r\n\t\t\tif ( typeof num == \"string\" )\r\n\t\t\t{\r\n\t\t\t\tif (num.indexOf(\".\") == -1 )\r\n\t\t\t\t{\r\n\t\t\t\t\tnum = parseInt(num);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tnum = parseFloat(num);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t\/\/convert to exponential notation with smaller number of digits until fits cell\r\n\t\t\tvar eIndex;\r\n\t\t\tvar expValue;\r\n\t\t\tvar expDigits = this.MAX_EXPONENTIAL_DIGITS;\r\n\t\t\tvar shrunkNum = num.toExponential(expDigits).toString().replace(\"e\",\"E\");\r\n\t\t\tthis.editCellSizer.innerHTML = num;\r\n\r\n\t\t\twhile(this.getEffectiveWidth(cell) < this.editCellSizer.offsetWidth && expDigits >= 0 )\r\n\t\t\t{\r\n\t\t\t\tshrunkNum = num.toExponential(expDigits).toString().replace(\"e\",\"E\");\r\n\r\n\t\t\t\teIndex = shrunkNum.indexOf(\"E\");\r\n\t\t\t\texpValue = shrunkNum.substr(eIndex+2);\r\n\t\t\t\tif (expValue.length < 2)\r\n\t\t\t\t{\r\n\t\t\t\t\tshrunkNum = shrunkNum.substring(0, eIndex+2) + \"0\" + expValue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.editCellSizer.innerHTML = shrunkNum;\r\n\t\t\t\texpDigits--;\r\n\t\t\t}\r\n\r\n\t\t\t\/\/when expDigits is -1 and didn't fix exponential didn't work so use hash symbols\r\n\t\t\tif ( expDigits == -1 && this.getEffectiveWidth(cell) < this.editCellSizer.offsetWidth)\r\n\t\t\t{\r\n\t\t\t\tshrunkNum = this.buildHashToFit(cell);\r\n\t\t\t}\r\n\t\t\r\n\t\t\tcell.innerHTML = shrunkNum;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tcell.innerHTML = num;\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.shrinkGeneralToFit":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""},"di":{"type":""},"data":{"type":""}},"src":"\t\tif ( this.editCellSizer.getWidth(data, di) > this.getEffectiveWidth(cell) )\r\n\t\t{\r\n\t\t\tcell.innerHTML = this.buildHashToFit(cell);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tcell.innerHTML = data;\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.buildHashToFit":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""}},"src":"\t\thashString = \"#\";\r\n\t\tthis.editCellSizer.innerHTML = hashString;\r\n\t\twhile( this.getEffectiveWidth(cell) > this.editCellSizer.offsetWidth)\r\n\t\t{\r\n\t\t\thashString += \"#\";\r\n\t\t\tthis.editCellSizer.innerHTML = hashString;\r\n\t\t}\r\n\t\t\r\n\t\tif ( this.getEffectiveWidth(cell) <= this.editCellSizer.offsetWidth)\r\n\t\t{\r\n\t\t\thashString = hashString.substr(0, hashString.length-1);\r\n\t\t}\r\n\r\n\t\tif ( hashString.length == 0 )\r\n\t\t{\r\n\t\t\thashString = \"&nbsp;\"\r\n\t\t}\r\n\r\n\t\treturn hashString;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.checkForEditOverflow":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""},"di":{"type":"dataItem"},"html":{"type":""}},"src":"\t\tthis.editCellSizer.getWidth(html, di);\r\n\r\n\t\tif ( dojo.render.html.ie )\r\n\t\t{\r\n\t\t\tif ( this.editCellSizer.offsetWidth >= (di.editWidth-this.editMargin) )\r\n\t\t\t{\r\n\t\t\t\tvar col = this.getCellCol(cell);\r\n\t\t\t\tvar row = this.getCellRow(cell);\r\n\r\n\t\t\t\tvar nextColCell = this.getCell(col+di.editColSpan, row); \r\n\r\n\t\t\t\tthis.msSelectedCellBackground.addToWidth(nextColCell);\r\n\r\n\t\t\t\t\/\/see if this cell has a background color and change to div if needed\r\n\t\t\t\tif (nextColCell.style.backgroundColor )\r\n\t\t\t\t{\r\n\t\t\t\t\tvar bgDiv = this.setBGColorDiv(nextColCell);\r\n\t\t\t\t\t\/\/need to set shouldBeHidden to true so that when editing ends\r\n\t\t\t\t\t\/\/the div will be set to hidden and the cells background\r\n\t\t\t\t\t\/\/will be set back to the desired color\r\n\t\t\t\t\tbgDiv.shouldBeHidden = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\/\/need to get the offsetWidth before the cell is removed\r\n\t\t\t\tdi.editWidth += nextColCell.offsetWidth;\r\n\r\n\t\t\t\t\/\/remove the next cell and save for after edit\r\n\t\t\t\tcell.parentNode.removeChild(nextColCell);\r\n\t\t\t\tthis.editOverflowArray.push(nextColCell);\r\n\r\n\t\t\t\tthis.setOverflowBorders(cell);\r\n\r\n\t\t\t\t\/\/see if this cell has a background color and change to div if needed\r\n\t\t\t\t\/\/but only first time when editColSpan is one. Don't need to keep doing this\r\n\t\t\t\tif (cell.style.backgroundColor && di.editColSpan == 1)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar bgDiv = this.setBGColorDiv(cell);\r\n\t\t\t\t\t\/\/need to set shouldBeHidden to true so that when editing ends\r\n\t\t\t\t\t\/\/the div will be set to hidden and the cells background\r\n\t\t\t\t\t\/\/will be set back to the desired color\r\n\t\t\t\t\tbgDiv.shouldBeHidden = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\/\/make sure textAlignment is left so right aligned things don't\r\n\t\t\t\t\/\/shoot over to the end of the next cell\r\n\t\t\t\tcell.style.textAlign = \"left\";\r\n\r\n\t\t\t\t\/\/increase the colspans and editWidth to column width because\r\n\t\t\t\t\/\/it may srink when the cell is removed\r\n\t\t\t\tcell.colSpan++\r\n\t\t\t\tdi.editColSpan++\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tif ( this.editCellSizer.offsetWidth >= di.editWidth-this.editMargin )\r\n\t\t\t{\r\n\t\t\t\tvar col = this.getCellCol(cell);\r\n\t\t\t\tvar row = this.getCellRow(cell);\r\n\r\n\t\t\t\tvar nextColCell = this.getCell( col + di.editColSpan, row);\r\n\r\n\t\t\t\t\/\/remove any html in the next column over and save it in array\r\n\t\t\t\tthis.editOverflowArray.push(nextColCell.innerHTML);\r\n\t\t\t\tnextColCell.innerHTML = \"&nbsp;\";\r\n\t\t\t\tthis.msSelectedCellBackground.addToWidth(nextColCell);\r\n\r\n\t\t\t\t\/\/make sure textAlignment is left so right aligned things don't\r\n\t\t\t\t\/\/shoot over to the end of the next cell\r\n\t\t\t\tthis.editCell.contentWindow.document.body.style.textAlign = \"left\"; \r\n\r\n\t\t\t\t\/\/increase the edit cells width the size of the next column\r\n\t\t\t\tthis.editCell.style.width = parseInt(this.editCell.style.width) + \r\n\t\t\t\t\t\t\t\t\t\t\tnextColCell.offsetWidth + \"px\";\r\n\t\t\t\r\n\t\t\t\tthis.setOverflowBorders(cell);\r\n\r\n\t\t\t\t\/\/change the edit width used to see if we need to eat another cell\r\n\t\t\t\tdi.editWidth = parseInt(this.editCell.style.width);\r\n\t\t\t\tdi.editColSpan++;\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.setExtraDataIndicator":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""},"col":{"type":""},"row":{"type":""},"hasExtraData":{"type":""}},"src":"\t\tif ( hasExtraData )\r\n\t\t{\r\n\t\t\tcell.style.backgroundRepeat = \"no-repeat\";\r\n\t\t\tcell.style.backgroundPosition = \"top right\";\r\n\t\t\tcell.style.backgroundImage = this.extraDataImg;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tcell.style.backgroundImage = \"\";\r\n\t\t}\r\n\r\n\t\tvar di = this.dp.getValueAt(col, row);\r\n\t\tdi.hasExtraData = hasExtraData;\r\n\t\tthis.dp.setValueAt(col, row, di, DataProvider.NO_SEND);\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.showExtraDataDialog":{"_":{"meta":{"summary":"","parameters":{"extraDataCell":{"type":""},"extraDataCol":{"type":""},"extraDataRow":{"type":""}},"src":"\t\textraDataCell =  extraDataCell || this.selectedCell;\r\n\t\textraDataCol = extraDataCol || this.selectedCellCol;\r\n\t\textraDataRow = extraDataRow || this.selectedCellRow;\r\n\t\t\r\n\t\tthis.extraDataTimeoutId = null;\r\n\r\n\t\tthis.cellDialog.parentTable = this;\r\n\t\tthis.cellDialog.topPage = this.topPage;\r\n\t\tthis.cellDialog.triggerCell = extraDataCell;\r\n\t\tthis.cellDialog.rowIndex = extraDataRow;\r\n\t\tthis.cellDialog.colIndex = extraDataCol;\r\n\t\tthis.cellDialog.show();\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.sort":{"_":{"meta":{"summary":"","src":"\t\tvar dlgs = dojo.widget.manager.getWidgetsByType(\"JotTableSortDialog\");\r\n\t\tvar dlg;\r\n\t\tif (dlgs.length > 0) {\r\n\t\t\tdlg = dlgs[0];\r\n\t\t} else {\r\n\t\t\tdlg = dojo.widget.createWidget(\"JotTableSortDialog\", {}, document.body, \"last\");\r\n\t\t}\r\n\t\tdlg.parentTable = this;\r\n\t\tdlg.show();\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.enterCell":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""}},"src":"\t\tthis.mouseOverCellCol = this.getCellCol(cell);\r\n\t\tthis.mouseOverCellRow = this.getCellRow(cell);\r\n\r\n\t\t\/\/cancel any pending extraData timeouts\r\n\t\tif ( this.extraDataTimeoutId )\r\n\t\t{\r\n\t\t\tclearTimeout(this.extraDataTimeoutId);\r\n\t\t\tthis.extraDataTimeoutId = null;\r\n\t\t}\r\n\r\n\t\t\/\/if the cell has extra data then set a timer to show the extra data dialog in a little bit\r\n\t\tif ( !this.mouseDown && !this.replicating && \r\n\t\t\t  this.dp.getValueAt(this.mouseOverCellCol, this.mouseOverCellRow).hasExtraData )\r\n\t\t{\r\n\t\t\tvar extraDataCol = this.mouseOverCellCol;\r\n\t\t\tvar extraDataRow = this.mouseOverCellRow;\r\n\t\t\tthis.extraDataTimeoutId = setTimeout(dojo.lang.hitch(this, function() { \r\n\t\t\t\t\t\tthis.showExtraDataDialog(cell, extraDataCol, extraDataRow); }), 600);\r\n\t\t}\r\n\r\n\t\t\/\/check to see if the cell we are entering is in the same row\r\n\t\t\/\/as the moved textDivs\r\n\t\t\/\/if yes then don't do anything\r\n\t\t\/\/if no then move the text divs back up and empty out the array\r\n\t\tif ( this.mouseOverTextDivs.length > 0 && this.mouseOverTextDivs.rowNum != this.mouseOverCellRow )\r\n\t\t{\r\n\t\t\tvar floater;\r\n\t\t\tfor(var x=0; x < this.mouseOverTextDivs.length; x++)\r\n\t\t\t{\r\n\t\t\t\tfloater = this.mouseOverTextDivs[x];\r\n\r\n\t\t\t\tfloater.style.zIndex = \"0\";\r\n\r\n\t\t\t\t\/\/did this cell have a background color\r\n\t\t\t\tif (floater.cellBGDiv)\r\n\t\t\t\t{\r\n\t\t\t\t\tif ( !dojo.render.html.ie || !this.editing )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfloater.cell.style.backgroundColor = floater.cellBGDiv.style.backgroundColor;\r\n\t\t\t\t\t\tfloater.cellBGDiv.style.visibility = \"hidden\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\/\/for IE only we need to do this shouldBeHidden stuff because the edit cell\r\n\t\t\t\t\t\/\/is added to the selected cell and when it overflows the cell we inc \r\n\t\t\t\t\t\/\/the colSpan which would cause the background color to grow also and we don't\r\n\t\t\t\t\t\/\/want that as it's not what the user expects\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfloater.cellBGDiv.shouldBeHidden = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\/\/do any of the cells this floater is over have background colors that need to be put back\r\n\t\t\t\tif ( floater.floaterOverArray )\r\n\t\t\t\t{\r\n\t\t\t\t\tvar nextColCell;\r\n\t\t\t\t\tvar bgDiv;\r\n\t\t\t\t\tfor(var x=0; x < floater.floaterOverArray.length; x++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tnextColCell = floater.floaterOverArray[x];\r\n\t\t\t\t\t\tbgDiv = this.sheetFrame.contentDocument.getElementById(\"BGDiv\"+\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.getCellCol(nextColCell)+\",\"+this.getCellRow(nextColCell));\r\n\t\t\t\t\t\tif ( !dojo.render.html.ie || !this.editing )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tnextColCell.style.backgroundColor = bgDiv.style.backgroundColor;\r\n\t\t\t\t\t\t\tbgDiv.style.visibility = \"hidden\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\/\/for IE only we need to do this shouldBeHidden stuff because the edit cell\r\n\t\t\t\t\t\t\/\/is added to the selected cell and when it overflows the cell we inc \r\n\t\t\t\t\t\t\/\/the colSpan which would cause the background color to grow also and we don't\r\n\t\t\t\t\t\t\/\/want that as it's not what the user expects\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tbgDiv.shouldBeHidden = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfloater.floaterOverArray = null; \r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.mouseOverTextDivs.length = 0;\r\n\t\t\tthis.mouseOverTextDivs.rowNum = 0;\r\n\t\t}\r\n\r\n\t\t\/\/does this cell have a bit of floating text\r\n\t\tif ( this.hasFloater(cell) && cell.firstChild.style.zIndex != \"-1\" )\r\n\t\t{\r\n\t\t\t\/\/first check to see if the cell has a background color\r\n\t\t\t\/\/if yes need to move other wise the floater will disapear\r\n\t\t\t\/\/when move to -1 under the color\r\n\t\t\tif ( cell.style.backgroundColor && cell.style.backgroundColor != \"transparent\")\r\n\t\t\t{\r\n\t\t\t\t\/\/create a div to put so the background color looks like it's still there\r\n\t\t\t\tvar bgDiv = this.setBGColorDiv(cell);\r\n\r\n\t\t\t\t\/\/save the background div on the floater so we can undo\r\n\t\t\t\t\/\/this stuff when the mouse is no longer over the cell\r\n\t\t\t\tcell.firstChild.cellBGDiv = bgDiv;\r\n\t\t\t\t\/\/can't just use parentNode because the floater div isn't always part of the document\r\n\t\t\t\tcell.firstChild.cell = cell;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t\/\/do any of the cells this floater is over have background colors\r\n\t\t\tvar nextColCell;\r\n\t\t\tvar colNum = this.mouseOverCellCol;\r\n\t\t\tvar x=0;\r\n\t\t\twhile(this.dp.getValueAt(++colNum, this.mouseOverCellRow).floaterOver != null)\r\n\t\t\t{\r\n\t\t\t\tnextColCell = this.getCell(colNum, this.mouseOverCellRow);\r\n\t\t\t\tif ( nextColCell.style.backgroundColor && nextColCell.style.backgroundColor != \"transparent\")\r\n\t\t\t\t{\r\n\t\t\t\t\tif ( !cell.firstChild.floaterOverArray )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\/\/need to use this array because in IE when editing the cell are removed if overflow\r\n\t\t\t\t\t\t\/\/so we can't use getCell to get them as they are not part of the document temporarily \r\n\t\t\t\t\t\tcell.firstChild.floaterOverArray = new Array();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcell.firstChild.floaterOverArray[x++] = nextColCell;\r\n\t\t\t\t\tthis.setBGColorDiv(nextColCell);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcell.firstChild.style.zIndex = \"-1\";\r\n\t\t\tthis.mouseOverTextDivs.push(cell.firstChild);\r\n\t\t\tthis.mouseOverTextDivs.rowNum = this.mouseOverCellRow;\r\n\t\t}\r\n\r\n\t\tif ( this.mouseDown )\r\n\t\t{\r\n\t\t\tif ( this.inFormula )\r\n\t\t\t{\r\n\t\t\t\tthis.formulaMS.multiSelect(this.mouseOverCellCol, this.mouseOverCellRow, null, cell);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.activeMS.multiSelect(this.mouseOverCellCol, this.mouseOverCellRow, null, cell);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if ( this.replicating )\r\n\t\t{\r\n\t\t\tthis.activeMS.replicate(cell);\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.setBGColorDiv":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""}},"src":"\t\tvar col = this.getCellCol(cell); \r\n\t\tvar row = this.getCellRow(cell); \r\n\t\tvar bgDiv = this.sheetFrame.contentDocument.getElementById(\"BGDiv\"+col+\",\"+row);\r\n\r\n\t\tif ( !bgDiv )\r\n\t\t{\r\n\t\t\tbgDiv = this.sheetFrame.contentDocument.createElement(\"div\"); \r\n\t\t\tbgDiv.id = \"BGDiv\" + col + \",\" + row;\r\n\t\t\tbgDiv.innerHTML = \"&nbsp;\";\r\n\t\t\tbgDiv.style.position = \"absolute\";\r\n\t\t\tbgDiv.style.zIndex = \"-2\";\r\n\t\t\tthis.sheetFrame.contentDocument.body.appendChild(bgDiv);\r\n\t\t}\r\n\r\n\t\tbgDiv.style.backgroundColor = cell.style.backgroundColor;\r\n\t\tbgDiv.style.top = cell.offsetTop + \"px\";\r\n\t\tbgDiv.style.left = cell.offsetLeft + \"px\";\r\n\t\tbgDiv.style.width = cell.offsetWidth + \"px\";\r\n\t\tbgDiv.style.height = cell.offsetHeight + \"px\";\r\n\t\tbgDiv.style.visibility = \"visible\";\r\n\r\n\t\t\/\/remove the background color so we can see through the cell\r\n\t\tcell.style.backgroundColor = \"transparent\";\r\n\r\n\t\treturn bgDiv;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.setToolbarState":{"_":{"meta":{"summary":"","parameters":{"di":{"type":""}},"src":"\t\tif ( this.editing )\r\n\t\t{\r\n\t\t\tthis.hiliteBtn.disable();\r\n\t\t\tthis.justifyBtn.disable();\r\n\t\t}\r\n\t\telse if ( di )\r\n\t\t{\r\n\t\t\tif ( di.fontWeight == \"bold\" )\r\n\t\t\t{\r\n\t\t\t\tthis.boldBtn.select(true, true);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.boldBtn.deselect(true, true);\r\n\t\t\t}\r\n\r\n\t\t\tif ( di.fontStyle == \"italic\" )\r\n\t\t\t{\r\n\t\t\t\tthis.italicBtn.select(true, true);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.italicBtn.deselect(true, true);\r\n\t\t\t}\r\n\r\n\t\t\tif ( di.textDecoration == \"underline\" )\r\n\t\t\t{\r\n\t\t\t\tthis.underlineBtn.select(true, true);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.underlineBtn.deselect(true, true);\r\n\t\t\t}\r\n\r\n\t\t\tif ( !di.textAlign ) \r\n\t\t\t{\r\n\t\t\t\tthis.justifyBtn.select(null, true, true);\r\n\t\t\t}\r\n\t\t\telse \r\n\t\t\t{\r\n\t\t\t\tthis.justifyBtn.select(\"justify\" + di.textAlign, true, true);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.hiliteBtn.enable();\r\n\t\t\tthis.justifyBtn.enable();\r\n\t\t}\r\n\r\n\t\tif ( this.inFormula )\r\n\t\t{\r\n\t\t\t\/\/TODO: show dropdown with available functions\r\n\t\t\tthis.foreColorBtn.disable();\r\n\t\t\tthis.boldBtn.disable();\r\n\t\t\tthis.italicBtn.disable();\r\n\t\t\tthis.underlineBtn.disable();\r\n\t\t}\r\n\t\telse if ( di == null )\r\n\t\t{\r\n\t\t\t\/\/TODO: hide dropdown with available functions\r\n\t\t\tthis.foreColorBtn.enable();\r\n\t\t\tthis.boldBtn.enable();\r\n\t\t\tthis.italicBtn.enable();\r\n\t\t\tthis.underlineBtn.enable();\r\n\t\t}\r\n\t\t\/\/TODO: also need in formula bar case maybe\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.updateUndoRedoButtons":{"_":{"meta":{"summary":"","src":"\t\tif ( this.topUndoManager.canUndo )\r\n\t\t{\r\n\t\t\tthis.currentToolbar.enable(\"undo\");\r\n\t\t\tthis.currentToolbar.getItem(\"undo\").domNode.title = \"Undo: \" + \r\n\t\t\t\tthis.topUndoManager._undoStack[this.topUndoManager._undoStack.length-1].description;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.currentToolbar.disable(\"undo\");\r\n\t\t\tthis.currentToolbar.getItem(\"undo\").domNode.title = \"Undo\";\r\n\t\t}\r\n\r\n\t\tif ( this.topUndoManager.canRedo )\r\n\t\t{\r\n\t\t\tthis.currentToolbar.enable(\"redo\");\r\n\t\t\tthis.currentToolbar.getItem(\"redo\").domNode.title = \"Redo: \" + \r\n\t\t\t\tthis.topUndoManager._redoStack[this.topUndoManager._redoStack.length-1].description;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.currentToolbar.disable(\"redo\");\r\n\t\t\tthis.currentToolbar.getItem(\"redo\").domNode.title = \"Redo\";\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.handleUndoRedo":{"_":{"meta":{"summary":"","parameters":{"btn":{"type":""},"option":{"type":""}},"src":"\t\tif ( btn.getName() == \"undo\" )\r\n\t\t{\r\n\t\t\tthis.topUndoManager.undo();\r\n\t\t}\r\n\t\telse \/\/if ( btn.getName() == \"redo\" )\r\n\t\t{\r\n\t\t\tthis.topUndoManager.redo();\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.hilitecolor":{"_":{"meta":{"summary":"","parameters":{"btn":{"type":""},"color":{"type":""}},"src":"\t\t\t{\r\n\t\t\t\tcolor = \"transparent\";\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.inMultiSelect )\r\n\t\t\t{\r\n\t\t\t\tthis.undoManager.beginTransaction(\"Set background color for range \" + \r\n\t\t\t\t\t\tFormula.COLUMN_CHARS[this.activeMS.topCol] + (this.activeMS.topRow+1) + \":\" +\r\n\t\t\t\t\t\tFormula.COLUMN_CHARS[this.activeMS.bottomCol] + (this.activeMS.bottomRow+1));\r\n\r\n\t\t\t\tvar cell;\r\n\t\t\t\tfor(var x = this.activeMS.topCol; x <= this.activeMS.bottomCol; x++)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor(var y = this.activeMS.topRow; y <= this.activeMS.bottomRow; y++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcell = this.getCell(x,y);\t\r\n\t\t\t\t\t\tthis.setCellBackground(cell, x, y, color, true); \r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.undoManager.endTransaction();\r\n\t\t\t\tthis.dp.endLockTransaction();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.setCellBackground(this.selectedCell, this.selectedCellCol, this.selectedCellRow, color, true); \r\n\t\t\t}\r\n\r\n\t\t\tthis.focusOnSheet();\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.setCellBackground":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""},"col":{"type":""},"row":{"type":""},"color":{"type":""},"addToUndo":{"type":""},"sendToServer":{"type":""}},"src":"\t\tvar oldColor = cell.style.backgroundColor ? cell.style.backgroundColor : \"transparent\";\r\n\t\tcell.style.backgroundColor = color;\r\n\t\tvar di = this.dp.getValueAt(col, row);\r\n\t\tdi.setValue(\"backgroundColor\", color);\r\n\r\n\t\tif ( addToUndo )\r\n\t\t{\r\n\t\t\tvar table = this;\r\n\t\t\tthis.undoManager.push(\r\n\t\t\t\t\tfunction() { table.setCellBackground(cell, col, row, oldColor, false, true) }, \/\/undo\r\n\t\t\t\t\tfunction() { table.setCellBackground(cell, col, row, color, false, true) }, \/\/redo\r\n\t\t\t\t\t\"Set background color on cell \" + Formula.COLUMN_CHARS[col] + (row+1));\r\n\t\t\tthis.dp.setValueAt(col, row, di, \"setStyle\");\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.dp.setValueAt(col, row, di, sendToServer ? \"setStyle\" : DataProvider.NO_SEND);\r\n\t\t}\r\n\r\n\t\tif ( cell == this.selectedCell )\r\n\t\t{\r\n\t\t\tthis.selectedCellDI = di;\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.forecolor":{"_":{"meta":{"summary":"","parameters":{"btn":{"type":""},"color":{"type":""}},"src":"\t\t\tthis.execControl(btn, color)\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.execControl":{"_":{"meta":{"summary":"","parameters":{"btn":{"type":""},"option":{"type":""}},"src":"\t\tvar command = btn.getValue();\r\n\t\t\/\/btn can be a group\r\n\t\tvar selected = btn.getItem ? btn.getItem(command).isSelected() : btn.isSelected();\r\n\r\n\t\t\/*TODO:see if IE still needs this with the dojo toolbar\r\n\t\t\/\/but not working at the moment\r\n\t\tif ( btn && !btn.isEnabled() )\r\n\t\t{\r\n\t\t\t\/\/IE has some focus issue's when user clicks on disabled\r\n\t\t\t\/\/button so we need to do this crap\r\n\t\t\tif ( document.all )\r\n\t\t\t{\r\n\t\t\t\tw.sheetframe.editCell.focus();\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t*\/\r\n\r\n\t\tthis.execStyle(command, selected, option);\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.execStyle":{"_":{"meta":{"summary":"","parameters":{"command":{"type":""},"selected":{"type":""},"option":{"type":""}},"src":"\t\tif ( this.editing )\r\n\t\t{\r\n\t\t\tif ( dojo.render.html.ie )\r\n\t\t\t{\r\n\t\t\t\tvar selection = this.sheetFrame.contentDocument.selection;\r\n\t\t\t\tvar range = selection.createRange();\r\n\t\t\t\tvar html = range.htmlText;\r\n\r\n\t\t\t\t\/\/need to do this mess because otherwise IE does strange things\r\n\t\t\t\t\/\/like bold the word before where we pressed the bold button etc.\r\n\t\t\t\tif ( html == \"\" )\r\n\t\t\t\t{\r\n\t\t\t\t\trange.moveEnd(\"character\", 1);\r\n\t\t\t\t\tif ( range.text == \" \" )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.editCell.focus();\r\n\t\t\t\t\t\trange.execCommand(command, false, option);\r\n\t\t\t\t\t\trange.collapse();\r\n\t\t\t\t\t\tthis.editCell.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trange.moveEnd(\"character\", -1);\r\n\t\t\t\t\t\trange.pasteHTML(\"&nbsp;\");\r\n\t\t\t\t\t\trange.moveStart(\"character\", -1);\r\n\t\t\t\t\t\trange.select();\r\n\t\t\t\t\t\tthis.editCell.focus();\r\n\t\t\t\t\t\trange.execCommand(command, false, option);\r\n\t\t\t\t\t\tthis.editCell.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.editCell.focus();\r\n\t\t\t\t\tthis.sheetFrame.contentDocument.execCommand(command, false, option);\r\n\t\t\t\t\tthis.editCell.focus();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.editCell.contentWindow.document.execCommand(command, false, option);\r\n\t\t\t\tthis.editCell.contentWindow.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if ( this.inMultiSelect )\r\n\t\t{\r\n\t\t\tvar cell;\r\n\r\n\t\t\tthis.undoManager.beginTransaction((selected ? \"Set \" : \"Unset \") + this.getReadableCommandName(command) + \r\n\t\t\t\t\t\" for range \" + \r\n\t\t\t\t\tFormula.COLUMN_CHARS[this.activeMS.topCol] + (this.activeMS.topRow+1) + \":\" +\r\n\t\t\t\t\tFormula.COLUMN_CHARS[this.activeMS.bottomCol] + (this.activeMS.bottomRow+1));\r\n\t\t\t\r\n\t\t\tfor(var x = this.activeMS.topCol; x <= this.activeMS.bottomCol; x++)\r\n\t\t\t{\r\n\t\t\t\tfor(var y = this.activeMS.topRow; y <= this.activeMS.bottomRow; y++)\r\n\t\t\t\t{\r\n\t\t\t\t\tcell = this.getCell(x,y);\t\r\n\t\t\t\t\tif ( command.indexOf(\"justify\") != -1 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.setCellAlignType(cell, x, y, command.substring(7), selected, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.execCommandOnCell(cell, x, y, command, option, true); \r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.undoManager.endTransaction();\r\n\t\t\tthis.dp.endLockTransaction();\r\n\t\t}\r\n\t\telse if ( command.indexOf(\"justify\") != -1 )\r\n\t\t{\r\n\t\t\tthis.setCellAlignType(this.selectedCell, this.selectedCellCol, this.selectedCellRow, \r\n\t\t\t\t\t\t\t\t\tcommand.substring(7), selected, true);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.execCommandOnCell(this.selectedCell, this.selectedCellCol, this.selectedCellRow, command, option, true); \r\n\t\t}\r\n\r\n\t\tthis.setToolbarState(this.selectedCellDI);\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getReadableCommandName":{"_":{"meta":{"summary":"","parameters":{"command":{"type":""}},"src":"\t\tswitch(command)\r\n\t\t{\r\n\t\t\tcase \"bold\":\r\n\t\t\t\treturn \"Bold\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"italic\":\r\n\t\t\t\treturn \"Italic\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"underline\":\r\n\t\t\t\treturn \"Underline\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"forecolor\":\r\n\t\t\t\treturn \"Text Color\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"justifyleft\":\r\n\t\t\t\treturn \"Justify Left\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"justifycenter\":\r\n\t\t\t\treturn \"Justify Center\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"justifyright\":\r\n\t\t\t\treturn \"Justify Right\";\r\n\t\t\t\tbreak;\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.execCommandOnCell":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""},"col":{"type":""},"row":{"type":""},"command":{"type":""},"option":{"type":""},"addToUndo":{"type":""},"sendToServer":{"type":""}},"src":"\t\tvar old;\r\n\t\tvar description;\r\n\t\tvar readableCommand = this.getReadableCommandName(command);\r\n\t\tvar di = this.dp.getValueAt(col, row);\r\n\r\n\t\tswitch(command)\r\n\t\t{\r\n\t\t\tcase \"bold\":\r\n\t\t\t\told = cell.style.fontWeight ? cell.style.fontWeight : \"normal\";\r\n\t\t\t\tcell.style.fontWeight = old == \"normal\" ? \"bold\" : \"normal\";\r\n\t\t\t\tdi.setValue(\"fontWeight\", cell.style.fontWeight);\r\n\t\t\t\tdescription = (di.fontWeight == \"bold\" ? \"Set \" : \"Unset \") + readableCommand;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"italic\":\r\n\t\t\t\told = cell.style.fontStyle ? cell.style.fontStyle : \"normal\";\r\n\t\t\t\tcell.style.fontStyle = old == \"normal\" ? \"italic\" : \"normal\";\r\n\t\t\t\tdi.setValue(\"fontStyle\", cell.style.fontStyle);\r\n\t\t\t\tdescription = (di.fontStyle == \"italic\" ? \"Set \" : \"Unset \") + readableCommand;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"underline\":\r\n\t\t\t\told = cell.style.textDecoration ? cell.style.textDecoration : \"none\";\r\n\t\t\t\tcell.style.textDecoration = old == \"none\" ? \"underline\" : \"none\";\r\n\t\t\t\tdi.setValue(\"textDecoration\", cell.style.textDecoration);\r\n\t\t\t\tdescription = (di.textDecoration == \"underline\" ? \"Set \" : \"Unset \") + readableCommand;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"forecolor\":\r\n\t\t\t\told = cell.style.color ? cell.style.color : \"black\";\r\n\t\t\t\tcell.style.color = option;\r\n\t\t\t\tdi.setValue(\"color\", option);\r\n\t\t\t\tdescription = \"Set \" + readableCommand;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"fontWeight\":\r\n\t\t\t\told = cell.style.fontWeight ? cell.style.fontWeight : \"normal\";\r\n\t\t\t\tcell.style.fontWeight = option; \r\n\t\t\t\tdi.setValue(\"fontWeight\", option);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"fontStyle\":\r\n\t\t\t\told = cell.style.fontStyle ? cell.style.fontStyle : \"normal\";\r\n\t\t\t\tcell.style.fontStyle = option \r\n\t\t\t\tdi.setValue(\"fontStyle\", option);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"textDecoration\":\r\n\t\t\t\told = cell.style.textDecoration ? cell.style.textDecoration : \"none\";\r\n\t\t\t\tcell.style.textDecoration = option; \r\n\t\t\t\tdi.setValue(\"textDecoration\", option);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif ( addToUndo )\r\n\t\t{\r\n\t\t\tvar table = this;\r\n\t\t\tthis.undoManager.push(\r\n\t\t\t\t\t\tfunction() { table.execCommandOnCell(cell, col, row, command, old, false, true); }, \/\/undo\r\n\t\t\t\t\t\tfunction() { table.execCommandOnCell(cell, col, row, command, option, false, true); },  \/\/redo\r\n\t\t\t\t\t\tdescription + \" at cell \" + Formula.COLUMN_CHARS[col] + (row+1));\r\n\r\n\t\t\tthis.dp.setValueAt(col, row, di, \"setStyle\");\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.dp.setValueAt(col, row, di, sendToServer ? \"setStyle\" : DataProvider.NO_SEND);\r\n\t\t}\r\n\r\n\t\t\/\/if this is called on the selectedCell then need to reset the\r\n\t\t\/\/selectedCellDI pointer in case is has an old reverfence now\r\n\t\t\/\/can happend is di for this cell didn't exist before\r\n\t\tif (cell == this.selectedCell)\r\n\t\t{\r\n\t\t\tthis.selectedCellDI = di;\r\n\t\t}\r\n\r\n\t\tthis.setCellText(di.cellText == null ? \"&nbsp;\" : di.cellText, cell, di, di.dataType, di.formulaBarText);\r\n\r\n\t\tthis.focusOnSheet();\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.setCellAlignType":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""},"col":{"type":""},"row":{"type":""},"alignType":{"type":""},"set":{"type":""},"addToUndo":{"type":""},"sendToServer":{"type":""}},"src":"\t\tvar oldAlign = cell.style.textAlign ? cell.style.textAlign : null;\r\n\t\tvar di = this.dp.getValueAt(col, row);\r\n\t\talignType = set ? alignType : null;\r\n\t\tdi.setValue(\"textAlign\", alignType);\r\n\r\n\t\tif ( alignType != null )\r\n\t\t{\r\n\t\t\tcell.style.textAlign = alignType;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.setDataType(cell, di, di.dataType, di.subDataType);\r\n\t\t}\r\n\r\n\t\tif ( addToUndo )\r\n\t\t{\r\n\t\t\tvar table = this;\r\n\t\t\tthis.undoManager.push(\r\n\t\t\t\t\t\tfunction() { table.setCellAlignType(cell, col, row, oldAlign, true, false, true ); }, \/\/undo\r\n\t\t\t\t\t\tfunction() { table.setCellAlignType(cell, col, row, alignType, set, false, true ); }, \/\/redo\r\n\t\t\t\t\t\t\"Set cell alignment on \" + Formula.COLUMN_CHARS[col] + (row+1));\r\n\t\t\tthis.dp.setValueAt(col, row, di, \"setStyle\");\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.dp.setValueAt(col, row, di, sendToServer ? \"setStyle\" : DataProvider.NO_SEND);\r\n\t\t}\r\n\r\n\t\t\/\/if this is called on the selectedCell then need to reset the\r\n\t\t\/\/selectedCellDI pointer in case is has an old reverfence now\r\n\t\t\/\/can happend is di for this cell didn't exist before\r\n\t\tif (cell == this.selectedCell)\r\n\t\t{\r\n\t\t\tthis.selectedCellDI = di;\r\n\t\t}\r\n\r\n\t\tthis.focusOnSheet();\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.insertColumnBefore":{"_":{"meta":{"summary":"","parameters":{"col":{"type":""},"fromUndo":{"type":""},"fromServer":{"type":""},"fromUndoDelete":{"type":""}},"src":"\t\tcol = col ? col : this.selectedCellCol;\r\n\t\r\n\t\tthis.addColAndHeader(1, false, col);\r\n\r\n\t\tif ( !fromUndo )\r\n\t\t{\r\n\t\t\tvar table = this;\r\n\t\t\tthis.undoManager.push(\r\n\t\t\t\t\tfunction() { table.deleteColumn(col, true, false) }, \/\/undo\r\n\t\t\t\t\tfunction() { table.insertColumnBefore(col, true, false); }, \/\/redo\r\n\t\t\t\t\t\"Insert column before column \" + Formula.COLUMN_CHARS[col+1]);\r\n\t\t}\r\n\r\n\t\tif ( !fromServer )\r\n\t\t{\r\n\t\t\tthis.dp.insertColumn(col, true, fromUndoDelete);\r\n\t\t}\r\n\r\n\t\tthis.adjustFloatersAfterColChange(col);\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.adjustFloatersAfterColChange":{"_":{"meta":{"summary":"","parameters":{"col":{"type":""}},"src":"\t\tfor(var x=0; x < col; x++)\r\n\t\t{\r\n\t\t\tif ( (floaters = this.floatersByCol[x]) != null )\r\n\t\t\t{\r\n\t\t\t\tfor(row in floaters)\r\n\t\t\t\t{\r\n\t\t\t\t\tif ( floaters[row] != null )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcell = this.getCell(x, row);\r\n\t\t\t\t\t\tdi   = this.dp.getValueAt(x, row);\r\n\t\t\t\t\t\tthis.setCellText(di.cellText, cell, di, di.dataType, di.formulaBarText)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.insertColumnAfter":{"_":{"meta":{"summary":"","parameters":{"col":{"type":""},"fromUndo":{"type":""},"fromServer":{"type":""}},"src":"\t\tcol = col ? col : this.selectedCellCol;\r\n\r\n\t\tthis.addColAndHeader(1, false, col+1);\r\n\r\n\t\tif ( !fromUndo )\r\n\t\t{\r\n\t\t\tvar table = this;\r\n\t\t\tthis.undoManager.push(\r\n\t\t\t\t\tfunction() { table.deleteColumn(col+1, true, false) }, \/\/undo\r\n\t\t\t\t\tfunction() { table.insertColumnAfter(col, true, false); }, \/\/redo\r\n\t\t\t\t\t\"Insert column after column \" + Formula.COLUMN_CHARS[col]);\r\n\t\t}\r\n\r\n\t\tif ( !fromServer )\r\n\t\t{\r\n\t\t\tthis.dp.insertColumn(col, false, false);\r\n\t\t}\r\n\r\n\t\tthis.adjustFloatersAfterColChange(col);\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.deleteColumn":{"_":{"meta":{"summary":"","parameters":{"col":{"type":""},"fromUndo":{"type":""},"fromServer":{"type":""}},"src":"\t\tcol = col ? col : this.selectedCellCol;\r\n\r\n\t\tvar colWidth = this.getCell(col, 0).offsetWidth;\r\n\r\n\t\t\/\/remove column from grid\r\n\t\tthis.sheetCols.removeChild(this.getSheetCol(col));\r\n\t\tvar cell;\r\n\t\tvar rows = this.sheetBody.getElementsByTagName(\"tr\");\r\n\t\tvar row;\r\n\t\tfor(var x=1; x <= rows.length; x++)\r\n\t\t{\r\n\t\t\tvar row = rows[x-1];\r\n\t\t\trow.removeChild(row.cells[col]);\r\n\t\t}\r\n\r\n\t\t\/\/remove column from col headers\r\n\t\tvar headers = this.getColHeaders(col);\r\n\t\tvar colObjs = this.getColHeadersCols(col);\r\n\t\tfor(var x=0; x < headers.length; x++)\r\n\t\t{\r\n\t\t\tthis.colHeadersBody.rows[0].removeChild(headers[x]);\r\n\t\t\tthis.colHeadersColGroup.removeChild(colObjs[x]);\r\n\t\t}\r\n\r\n\t\t\/\/update sheet\r\n\t\tthis.numberOfCols--;\r\n\t\tthis.reLabelColHeaders(col, this.numberOfCols);\r\n\t\tthis.sheetWidth -= colWidth; \r\n\t\tthis.colHeadersTable.style.width = this.sheetWidth + \"px\";\r\n\t\tthis.sheet.style.width = this.sheetWidth + \"px\";\r\n\t\tthis.preSyncHeaders();\r\n\t\tif ( this.inMultiSelect )\r\n\t\t{\r\n\t\t\tthis.activeMS.multiSelect(col, -1);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.cellSelected(this.getCell(col < this.selectedCellCol ? this.selectedCellCol-1 : this.selectedCellCol,\r\n\t\t\t\t\t\t\t\tthis.selectedCellRow));\r\n\t\t}\r\n\r\n\t\tif ( !fromUndo )\r\n\t\t{\r\n\t\t\tvar table = this;\r\n\t\t\tthis.undoManager.push(\r\n\t\t\t\t\tfunction() { table.insertColumnBefore(col, true, false, true) }, \/\/undo\r\n\t\t\t\t\tfunction() { table.deleteColumn(col, true, false); }, \/\/redo\r\n\t\t\t\t\t\"Delete column \" + Formula.COLUMN_CHARS[col]);\r\n\t\t}\r\n\r\n\t\tif ( !fromServer )\r\n\t\t{\r\n\t\t\tthis.dp.deleteColumn(col);\r\n\t\t}\r\n\r\n\t\tthis.adjustFloatersAfterColChange(col);\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.insertRowBefore":{"_":{"meta":{"summary":"","parameters":{"row":{"type":""},"fromUndo":{"type":""},"fromServer":{"type":""},"fromUndoDelete":{"type":""}},"src":"\t\trow = row ? row : this.selectedCellRow;\r\n\r\n\t\tthis.addRowAndHeader(1, false, row);\r\n\r\n\t\tif ( !fromUndo )\r\n\t\t{\r\n\t\t\tvar table = this;\r\n\t\t\tthis.undoManager.push(\r\n\t\t\t\t\tfunction() { table.deleteRow(row, true, false) }, \/\/undo\r\n\t\t\t\t\tfunction() { table.insertRowBefore(row, true, false); }, \/\/redo\r\n\t\t\t\t\t\"Insert row before row \" + (row+2));\r\n\t\t}\r\n\r\n\t\tif ( !fromServer )\r\n\t\t{\r\n\t\t\tthis.dp.insertRow(row, true, fromUndoDelete);\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.insertRowAfter":{"_":{"meta":{"summary":"","parameters":{"row":{"type":""},"fromUndo":{"type":""},"fromServer":{"type":""}},"src":"\t\trow = row ? row : this.selectedCellRow;\r\n\r\n\t\tthis.addRowAndHeader(1, false, row+1);\r\n\r\n\t\tif ( !fromUndo )\r\n\t\t{\r\n\t\t\tvar table = this;\r\n\t\t\tthis.undoManager.push(\r\n\t\t\t\t\tfunction() { table.deleteRow(row+1, true, false) }, \/\/undo\r\n\t\t\t\t\tfunction() { table.insertRowAfter(row, true, false); }, \/\/redo\r\n\t\t\t\t\t\"Insert row after row \" + (row+1));\r\n\t\t}\r\n\r\n\t\tif ( !fromServer )\r\n\t\t{\r\n\t\t\tthis.dp.insertRow(row, false, false);\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.deleteRow":{"_":{"meta":{"summary":"","parameters":{"row":{"type":""},"fromUndo":{"type":""},"fromServer":{"type":""}},"src":"\t\trow = row ? row : this.selectedCellRow;\r\n\r\n\t\tvar rowHeight = this.getCell(0, row).offsetHeight;\r\n\r\n\t\t\/\/remove row from grid\r\n\t\tthis.sheetBody.removeChild(this.getSheetRow(row));\r\n\r\n\t\t\/\/remove row from row headers\r\n\t\tvar headers = this.getRowHeaderRows(this.numberOfRows-1);\r\n\t\tfor(var x=0; x < headers.length; x++)\r\n\t\t{\r\n\t\t\tthis.rowHeadersBody.removeChild(headers[x]);\r\n\t\t}\r\n\r\n\t\t\/\/update sheet\r\n\t\tthis.numberOfRows--;\r\n\t\tthis.sheetHeight -= rowHeight; \r\n\t\tthis.rowHeadersTable.style.height = this.sheetHeight + \"px\";\r\n\t\tthis.sheet.style.height = this.sheetHeight + \"px\";\r\n\t\tthis.preSyncHeaders();\r\n\t\tif ( this.inMultiSelect )\r\n\t\t{\r\n\t\t\tthis.activeMS.multiSelect(-1, row);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.cellSelected(this.getCell(this.selectedCellCol, \r\n\t\t\t\t\t\t\t\trow < this.selectedCellRow ? this.selectedCellRow-1 : this.selectedCellRow));\r\n\t\t}\r\n\r\n\t\tif ( !fromUndo )\r\n\t\t{\r\n\t\t\tvar table = this;\r\n\t\t\tthis.undoManager.push(\r\n\t\t\t\t\tfunction() { table.insertRowBefore(row, true, false, true) }, \/\/undo\r\n\t\t\t\t\tfunction() { table.deleteRow(row, true, false); }, \/\/redo\r\n\t\t\t\t\t\"Delete row \" + (row+1));\r\n\t\t}\r\n\r\n\t\tif ( !fromServer )\r\n\t\t{\r\n\t\t\tthis.dp.deleteRow(row);\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.processFormulaMS":{"_":{"meta":{"summary":"","src":"\t\tvar rangeText;\r\n\r\n\t\t\/\/is this just a single cell selected\r\n\t\tif ( this.topCol == this.bottomCol && this.topRow == this.bottomRow )\r\n\t\t{\r\n\t\t\trangeText = Formula.COLUMN_CHARS[this.topCol] + (this.topRow+1);\r\n\t\t}\r\n\t\t\/\/need to handle column selection different\r\n\t\telse if ( this.colSelect )\r\n\t\t{\r\n\t\t\trangeText = Formula.COLUMN_CHARS[this.topCol] + \":\" +\r\n\t\t\t\t\t\tFormula.COLUMN_CHARS[this.bottomCol];\r\n\t\t}\r\n\t\t\/\/need to handle row selection different\r\n\t\telse if ( this.rowSelect )\r\n\t\t{\r\n\t\t\trangeText = (this.topRow+1) + \":\" + (this.bottomRow+1);\r\n\t\t}\r\n\t\t\/\/must be a range\r\n\t\telse\r\n\t\t{\r\n\t\t\trangeText = Formula.COLUMN_CHARS[this.topCol] + (this.topRow+1) + \":\" +\r\n\t\t\t\t\t\tFormula.COLUMN_CHARS[this.bottomCol] + (this.bottomRow+1);\r\n\t\t}\r\n\r\n\r\n\t\t\/\/get the current selection and replace or add the range to the text\r\n\t\tif ( dojo.render.html.ie )\r\n\t\t{\r\n\t\t\tvar range;\r\n\t\t\tif ( !this.table.inFormulaMouseAdd )\r\n\t\t\t{\r\n\t\t\t\trange = this.table.sheetFrame.contentDocument.selection.createRange();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tvar newRange = this.table.sheetFrame.contentDocument.selection.createRange();\r\n\t\t\t\trange = newRange.boundingWidth == 0 ? this.table.processFormulaMS.oldRange : newRange;\r\n\t\t\t}\r\n\t\t\tthis.table.processFormulaMS.oldRange = range;\r\n\t\t\tthis.table.checkForEditOverflow(this.table.selectedCell, this.table.selectedCellDI, rangeText+this.table.editCell.innerHTML);\r\n\t\t\trange.pasteHTML(rangeText);\r\n\t\t\trange.moveStart(\"character\", -1*rangeText.length);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/*\r\n\t\t\tvar range;\r\n\t\t\tif ( !this.table.inFormulaMouseAdd )\r\n\t\t\t{\r\n\t\t\t\trange = this.table.editCell.contentWindow.getSelection().getRangeAt(0);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t\/\/var newRange = this.table.sheetFrame.contentDocument.selection.createRange();\r\n\t\t\t\tvar selection = this.table.editCell.contentWindow.getSelection();\r\n\t\t\t\trange = selection.isCollapsed ? this.table.processFormulaMS.oldRange : selection.getRangeAt(0);\r\n\t\t\t\tvar firstChild = this.table.editCell.contentWindow.document.body.firstChild;\r\n\t\t\t\t\/\/alert(\"firstChild.length = \" + firstChild.length + \" endOffset = \" + range.endOffset + \" oldLength = \" + this.table.processFormulaMS.oldLength + \" newEnd = \" + (range.endOffset + this.table.processFormulaMS.oldLength-1));\r\n\t\t\t\trange.setEnd(firstChild, 3);\r\n\t\t\t}\r\n\t\t\tthis.table.processFormulaMS.oldRange = range;\r\n\t\t\tthis.table.checkForEditOverflow(this.table.selectedCell, this.table.selectedCellDI, rangeText+this.table.editCell.innerHTML);\r\n\t\t\trange.deleteContents();\r\n\t\t\tvar textNode = this.table.editCell.contentDocument.createTextNode(rangeText);\r\n\t\t\tthis.table.editCell.contentWindow.document.execCommand(\"inserthtml\", false, rangeText);\r\n\t\t\tthis.table.processFormulaMS.oldLength = rangeText.length;\r\n\t\t\t\/\/alert(\" startOffset = \" + range.startOffset + \" endOffset = \" + range.endOffset + \" length = \" + rangeText.length);\r\n\t\t\tvar firstChild = this.table.editCell.contentWindow.document.body.firstChild;\r\n\t\t\trange.setEndAfter(firstChild, range.endOffset + rangeText.length-1);\r\n\t\t\trange.collapse(false);\r\n\t\t\t\/\/alert(\" startOffset = \" + range.startOffset + \" endOffset = \" + range.endOffset);\r\n\t\t\t\/\/this.table.editCell.contentWindow.getSelection().\r\n\t\t\t\/\/range.moveStart(\"character\", -1*rangeText.length);\r\n\t\t\t\/\/alert(\"range.collapsed = \" + range.collapsed);\r\n\t\t\t*\/\r\n\r\n\t\t\tvar oldFormula = this.table.editCell.contentWindow.document.body.innerHTML;\r\n\t\t\tthis.table.checkForEditOverflow(this.table.selectedCell, this.table.selectedCellDI, rangeText+oldFormula);\r\n\t\t\tthis.table.editCell.contentWindow.document.execCommand(\"inserthtml\", false, rangeText);\r\n\t\t\tvar newFormula = this.table.editCell.contentWindow.document.body.innerHTML;\r\n\t\t\tvar selection = this.table.editCell.contentWindow.getSelection();\r\n\t\t\tvar range = this.table.sheetFrame.contentDocument.createRange();\r\n\t\t\tvar firstChild = this.table.editCell.contentWindow.document.body.firstChild;\r\n\r\n\t\t\tvar diff = Formula.diffFormulaText(this.table.stripHTML(oldFormula).replace(\"&nbsp;\",\" \"), \r\n\t\t\t\t\t\t\t\t\t\t\t   this.table.stripHTML(newFormula).replace(\"&nbsp;\",\" \"), rangeText);\r\n\t\t\trange.setStart(firstChild, diff[0]);\r\n\t\t\trange.setEnd(firstChild, diff[1]);\r\n\t\t\tselection.removeAllRanges();\r\n\t\t\tselection.addRange(range);\r\n\t\t\tthis.table.processFormulaMS.oldRange = range;\r\n\t\t}\r\n\r\n\t\tthis.table.inFormulaMouseAdd = true;\r\n\t\tthis.table.processCellText();\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.setOverflowBorders":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""}},"src":"\t\tif ( dojo.render.html.ie )\r\n\t\t{\r\n\t\t\t\/\/change the borders to look like the end is removed\r\n\t\t\tcell.style.borderRight = this.cellBorder; \r\n\t\t\tcell.style.borderTop   = this.cellBorder; \r\n\t\t\tcell.style.borderBottom = this.cellBorder;\r\n\r\n\t\t\tvar col = this.getCellCol(cell);\r\n\t\t\tvar row = this.getCellRow(cell);\r\n\t\t\tif ( row < this.numberOfRows )\r\n\t\t\t{\r\n\t\t\t\tthis.getCell(col, row+1).style.borderTop = this.editBorder;\r\n\t\t\t}\r\n\r\n\t\t\tif ( row > 1 )\r\n\t\t\t{\r\n\t\t\t\tthis.getCell(col, row-1).style.borderBottom = this.editBorder;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/remove the end border\r\n\t\t\tcell.style.borderRight = \"1px solid transparent\";\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.removeOverflowBorders":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""}},"src":"\t\tif ( dojo.render.html.ie )\r\n\t\t{\r\n\t\t\t\/\/change the borders back \r\n\t\t\tcell.style.border = this.cellBorder;\r\n\t\t\tcell.style.padding = this.cellPadding;\r\n\r\n\t\t\tvar col = this.getCellCol(cell);\r\n\t\t\tvar row = this.getCellRow(cell);\r\n\r\n\t\t\tif ( row < this.numberOfRows )\r\n\t\t\t{\r\n\t\t\t\tthis.getCell(col, row+1).style.border = this.cellBorder;\r\n\t\t\t}\r\n\r\n\t\t\tif ( row > 1 )\r\n\t\t\t{\r\n\t\t\t\tthis.getCell(col, row-1).style.border = this.cellBorder;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/remove the end border\r\n\t\t\tcell.style.border = this.cellBorder; \r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.addFloaterToCell":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""},"floater":{"type":""},"resetCell":{"type":""},"biggerThanNumCols":{"type":""},"di":{"type":""}},"src":"\t\t{\r\n\t\t\tif ( resetCell )\r\n\t\t\t{\r\n\t\t\t\tcell.innerHTML = \"&nbsp;\";\r\n\t\t\t}\r\n\t\t\tcell.insertBefore(floater, cell.firstChild);\r\n\t\t}\r\n\t\t\/\/gecko needs the top set and doesn't need a nbsp\r\n\t\telse\r\n\t\t{\r\n\t\t\tif ( resetCell )\r\n\t\t\t{\r\n\t\t\t\tcell.innerHTML = \"\";\r\n\t\t\t}\r\n\t\t\tfloater.style.top = this.calcCellTop(cell) + \"px\";\r\n\t\t\tcell.appendChild(floater);\r\n\t\t}\r\n\r\n\t\tvar col = this.getCellCol(cell);\r\n\t\tvar row = this.getCellRow(cell);\r\n\t\tvar floaters = this.floatersByCol[col];\r\n\t\tif ( !floaters )\r\n\t\t{\r\n\t\t\tfloaters = new Object();\r\n\t\t\tthis.floatersByCol[col] = floaters;\r\n\t\t}\r\n\t\tfloaters[row+\"\"] = floater;\r\n\r\n\t\tfloaters = this.floatersByRow[row];\r\n\t\tif ( !floaters )\r\n\t\t{\r\n\t\t\tfloaters = new Object();\r\n\t\t\tthis.floatersByRow[row] = floaters;\r\n\t\t}\r\n\t\tfloaters[col+\"\"] = floater;\r\n\r\n\t\tif ( biggerThanNumCols )\r\n\t\t{\r\n\t\t\tthis.biggerThanNumColArray.push({cell: cell, di: di});\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.cell":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""},"floater":{"type":""},"resetCell":{"type":""},"biggerThanNumCols":{"type":""},"di":{"type":""}},"src":"\t\t{\r\n\t\t\tif ( resetCell )\r\n\t\t\t{\r\n\t\t\t\tcell.innerHTML = \"&nbsp;\";\r\n\t\t\t}\r\n\t\t\tcell.insertBefore(floater, cell.firstChild);\r\n\t\t}\r\n\t\t\/\/gecko needs the top set and doesn't need a nbsp\r\n\t\telse\r\n\t\t{\r\n\t\t\tif ( resetCell )\r\n\t\t\t{\r\n\t\t\t\tcell.innerHTML = \"\";\r\n\t\t\t}\r\n\t\t\tfloater.style.top = this.calcCellTop(cell) + \"px\";\r\n\t\t\tcell.appendChild(floater);\r\n\t\t}\r\n\r\n\t\tvar col = this.getCellCol(cell);\r\n\t\tvar row = this.getCellRow(cell);\r\n\t\tvar floaters = this.floatersByCol[col];\r\n\t\tif ( !floaters )\r\n\t\t{\r\n\t\t\tfloaters = new Object();\r\n\t\t\tthis.floatersByCol[col] = floaters;\r\n\t\t}\r\n\t\tfloaters[row+\"\"] = floater;\r\n\r\n\t\tfloaters = this.floatersByRow[row];\r\n\t\tif ( !floaters )\r\n\t\t{\r\n\t\t\tfloaters = new Object();\r\n\t\t\tthis.floatersByRow[row] = floaters;\r\n\t\t}\r\n\t\tfloaters[col+\"\"] = floater;\r\n\r\n\t\tif ( biggerThanNumCols )\r\n\t\t{\r\n\t\t\tthis.biggerThanNumColArray.push({cell: cell, di: di});\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.removeFloaterFromArrays":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""}},"src":"\t\tif ( !this.hasFloater(cell) )\r\n\t\t{\r\n\t\t\tvar col = this.getCellCol(cell);\r\n\t\t\tvar row = this.getCellRow(cell);\r\n\r\n\t\t\tvar floaters = this.floatersByCol[col];\r\n\t\t\tif ( floaters )\r\n\t\t\t{\r\n\t\t\t\tdelete floaters[row+\"\"];\r\n\t\t\t}\r\n\r\n\t\t\tfloaters = this.floatersByRow[row];\r\n\t\t\tif ( floaters )\r\n\t\t\t{\r\n\t\t\t\tdelete floaters[col+\"\"];\r\n\t\t\t}\r\n\r\n\t\t\tfor(var x=0; x < this.biggerThanNumColArray.length; x++)\r\n\t\t\t{\r\n\t\t\t\tif ( this.biggerThanNumColArray[x].cell == cell )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.biggerThanNumColArray.splice(x, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.headerSelected":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""},"header":{"type":""}},"src":"\t\tif ( this.curOpenRowHeader != null )\r\n\t\t{\r\n\t\t\tthis.closeRow(this.curOpenRowHeader, false);\r\n\t\t}\r\n\r\n\t\tvar hParts = this.calcHeaderParts(header);\r\n\t\tvar headerNum = hParts[1];\r\n\r\n\t\tif ( hParts[0] == \"col\" )\r\n\t\t{\r\n\t\t\tthis.selectType = \"col\"\r\n\t\t\tthis.setCursor(\"col\", \"default\");\r\n\t\t\tif ( this.inFormula )\r\n\t\t\t{\r\n\t\t\t\tthis.formulaMS.multiSelect(headerNum, -1);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.activeMS.multiSelect(headerNum, -1);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.selectType = \"row\"\r\n\t\t\tthis.setCursor(\"row\", \"default\");\r\n\t\t\tif ( this.inFormula )\r\n\t\t\t{\r\n\t\t\t\tthis.formulaMS.multiSelect(-1, headerNum);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.activeMS.multiSelect(-1, headerNum);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.focusOnSheet();\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.cornerSelect":{"_":{"meta":{"summary":"","src":"\t\tif ( !this.inFormula )\r\n\t\t{\r\n\t\t\tthis.activeMS.multiSelect(-1,-1);\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.enteredHeader":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif ( this.mouseDown )\r\n\t\t{\r\n\t\t\tvar parts = this.calcHeaderParts(e.target);\r\n\t\t\tvar headerNum = parts[1]; \r\n\t\t\t\/\/undo the start adjust code in calcHeaderParts\r\n\t\t\tif ( dojo.string.endsWith(e.target.className, \"Start\") )\r\n\t\t\t{\r\n\t\t\t\theaderNum++;\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.selectType == \"col\" )\r\n\t\t\t{\r\n\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.formulaMS.multiSelect(headerNum, -1, \"cont\");\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.activeMS.multiSelect(headerNum, -1, \"cont\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\/\/row\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif ( this.inFormula )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.formulaMS.multiSelect(-1, headerNum, \"cont\");\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.activeMS.multiSelect(-1, headerNum, \"cont\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.focusOnSheet();\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.setCursor":{"_":{"meta":{"summary":"","parameters":{"type":{"type":""},"cursor":{"type":""}},"src":"\t\tif ( type == \"col\" )\r\n\t\t{\r\n\t\t\tvar cells = this.colHeadersBody.rows[0].cells; \r\n\t\t\tfor(var x=0; x < cells.length; x++)\r\n\t\t\t{\r\n\t\t\t\tcells[x].style.cursor = cursor;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\/\/row\r\n\t\telse\r\n\t\t{\r\n\t\t\tvar rows  = this.rowHeadersBody.rows;\r\n\t\t\tvar row;\r\n\t\t\tfor(var x=0; x < rows.length; x++)\r\n\t\t\t{\r\n\t\t\t\trow = rows[x];\r\n\t\t\t\tfor(var y=0; y < row.cells.length; y++)\r\n\t\t\t\t{\r\n\t\t\t\t\trow.cells[y].style.cursor = cursor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.sheet.style.cursor = cursor;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.doubleClickResize":{"_":{"meta":{"summary":"","parameters":{"header":{"type":""}},"src":"\t\tvar parts = this.calcHeaderParts(header);\r\n\t\tvar col = parts[1];\r\n\r\n\t\tvar maxWidth = 0;\r\n\t\tvar dWidth;\r\n\t\tfor(var x=1; x < this.numberOfRows; x++)\r\n\t\t{\r\n\t\t\tdWidth = this.dp.getValueAt(col,x).desiredWidth;\r\n\t\t\tif ( dWidth )\r\n\t\t\t{\r\n\t\t\t\tmaxWidth = Math.max(maxWidth, dWidth);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tvar currentWidth = this.getEffectiveWidth(this.getCell(col,1));\r\n\t\tvar delta = maxWidth - currentWidth;\r\n\r\n\t\t\/\/will equal -currentWidth when nothing in col so don't do the resize\r\n\t\tif ( delta != -currentWidth )\r\n\t\t{\r\n\t\t\tthis.doResize(\"col\", col, delta, false, true)\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.resizeStart":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""},"header":{"type":""}},"src":"\t\tif ( this.curOpenRowHeader != null )\r\n\t\t{\r\n\t\t\tthis.closeRow(this.curOpenRowHeader, false);\r\n\t\t}\r\n\r\n\t\t\/\/fake a double click for gecko because of the way the resizer bar\r\n\t\t\/\/eats some of the events we need\r\n\t\tif (dojo.render.html.mozilla)\r\n\t\t{\r\n\t\t\t\/\/Firefox on Linux doesn't give us a time stamp so need this hack\r\n\t\t\tvar timeStamp;\r\n\t\t\tif ( !e.timeStamp )\r\n\t\t\t{\r\n\t\t\t\ttimeStamp = (new Date()).getTime();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\ttimeStamp = e.timeStamp;\r\n\t\t\t}\r\n\r\n\t\t\tif ( timeStamp - this.colHeaderTimeStamp < 500 )\r\n\t\t\t{\r\n\t\t\t\tthis.doubleClickResize(header);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.colHeaderTimeStamp = timeStamp;\r\n\t\t}\r\n\r\n\t\tthis.tempHeader = header;\r\n\t\tthis.resizeParts = this.calcHeaderParts(header); \r\n\t\tif ( this.resizeParts[0] == \"col\" )\r\n\t\t{\r\n\t\t\tthis.setCursor(\"col\", \"e-resize\");\r\n\t\t\tthis.resizeStartLoc = e.clientX;\r\n\t\t\tthis.colResizer.style.left = e.clientX + \"px\";\r\n\t\t\tthis.colResizer.style.visibility = \"visible\";\r\n\t\t}\r\n\t\t\/\/row\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.setCursor(\"row\", \"n-resize\");\r\n\t\t\tthis.resizeStartLoc = e.clientY;\r\n\t\t\tthis.rowResizer.style.top = e.clientY + \"px\";\r\n\t\t\tthis.rowResizer.style.visibility = \"visible\";\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.resize":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif ( this.resizeParts )\r\n\t\t{\r\n\t\t\t\/\/col\r\n\t\t\tif ( this.resizeParts[0] == \"col\" )\r\n\t\t\t{\r\n\t\t\t\tif ( e.clientXAdjust )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.colResizer.style.left = (e.clientX + e.clientXAdjust) + \"px\";\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.colResizer.style.left = e.clientX + \"px\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\/\/row\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif ( e.clientYAdjust )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.rowResizer.style.top = (e.clientY + e.clientYAdjust) + \"px\";\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.rowResizer.style.top = e.clientY + \"px\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.resizeEnd":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif ( this.resizeParts )\r\n\t\t{\r\n\t\t\t\/\/col\r\n\t\t\tif ( this.resizeParts[0] == \"col\" )\r\n\t\t\t{\r\n\t\t\t\tthis.colResizer.style.visibility = \"hidden\";\r\n\t\t\t\tvar delta = e.clientX - this.resizeStartLoc;\r\n\t\t\t\tthis.doResize(\"col\", this.resizeParts[1], delta, true, true);\r\n\t\t\t}\r\n\t\t\t\/\/row\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.rowResizer.style.visibility = \"hidden\";\r\n\t\t\t\tvar delta = e.clientY - this.resizeStartLoc;\r\n\t\t\t\tthis.doResize(\"row\", this.resizeParts[1], delta, true, true);\r\n\t\t\t}\r\n\r\n\t\t\tthis.setCursor(this.resizeParts[0], \"\");\r\n\t\t\tthis.resizeParts = null;\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.doResize":{"_":{"meta":{"summary":"","parameters":{"type":{"type":""},"num":{"type":""},"delta":{"type":""},"fromUser":{"type":""},"addToUndo":{"type":""},"sendToServer":{"type":""}},"src":"\t\t{\r\n\t\t\t\/\/resize the col\r\n\t\t\tvar colBody = this.getColHeaderCol(num);\r\n\t\t\tvar newWidth = (parseInt(colBody.style.width) + delta);\r\n\t\t\t\/\/TODO: allow width of <=0 to hide col\r\n\t\t\t\/\/can't have a negative width so limit to 10\r\n\t\t\t\/\/TODO: if past 26 make limit bigger for two letter headers\r\n\t\t\tif ( newWidth < 10 )\r\n\t\t\t{\r\n\t\t\t\tdelta += 10 - newWidth;\r\n\t\t\t\tnewWidth = 10;\r\n\t\t\t}\r\n\t\t\tcolBody.style.width = newWidth + \"px\";\r\n\r\n\t\t\t\/\/resize the cell\r\n\t\t\tthis.getColHeaderMiddle(num).style.width = colBody.style.width;\r\n\r\n\t\t\t\/\/resize the table\r\n\t\t\tthis.colHeadersTable.style.width = (parseInt(this.colHeadersTable.style.width) + delta) + \"px\";\r\n\r\n\t\t\t\/\/add to the sheetSize used for dynamic scrolling\r\n\t\t\tif ( delta != 0 )\r\n\t\t\t{\r\n\t\t\t\tthis.sheetWidth += delta;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\/\/row\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/resize the cell\r\n\t\t\tvar cell = this.getRowHeaderMiddle(num);\r\n\t\t\tvar newHeight = (parseInt(cell.style.height) + delta);\r\n\t\t\t\/\/TODO: allow width of <=0 to hide row \r\n\t\t\t\/\/firefox will not let the cell be smaller than about 20 so need to check\r\n\t\t\tif ( newHeight < this.minRowHeight )\r\n\t\t\t{\r\n\t\t\t\tdelta += this.minRowHeight - newHeight;\r\n\t\t\t\tnewHeight = this.minRowHeight;\r\n\t\t\t}\r\n\r\n\t\t\t\/\/for some strange reason the first time a row is resize in gecko\r\n\t\t\t\/\/you need to substract one but after that you don't so we\r\n\t\t\t\/\/have this hack to fix that untill I can figure out why\r\n\t\t\tif ( delta > 0 && dojo.render.html.mozilla && !cell.beenResized )\r\n\t\t\t{\r\n\t\t\t\tcell.style.height = newHeight -1 + \"px\";\r\n\t\t\t\tthis.sheetHeight += delta -1;\r\n\t\t\t\tcell.beenResized = true;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tcell.style.height = newHeight + \"px\";\r\n\t\t\t\tthis.sheetHeight += delta;\r\n\t\t\t}\r\n\r\n\t\t\t\/\/resize the table\r\n\t\t\tthis.rowHeadersTable.style.height = (parseInt(this.rowHeadersTable.style.height) + delta) + \"px\";\r\n\t\t}\r\n\r\n\t\t\/\/call into websheet and do resize\r\n\t\tif ( delta != 0 )\r\n\t\t{\r\n\t\t\tthis.resizeSheet(type, num, delta, fromUser, addToUndo, sendToServer);\r\n\t\t\tthis.checkColAndRowFit();\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.resizeSheet":{"_":{"meta":{"summary":"","parameters":{"type":{"type":""},"num":{"type":""},"delta":{"type":""},"fromUser":{"type":""},"addToUndo":{"type":""},"sendToServer":{"type":""}},"src":"\t\tif ( type == \"col\" )\r\n\t\t{\r\n\t\t\t\/\/resize the col\r\n\t\t\tvar colBody = this.getSheetCol(num);\r\n\t\t\tif ( fromUser )\r\n\t\t\t{\r\n\t\t\t\tcolBody.beenResized = true;\r\n\t\t\t}\r\n\t\t\tcolBody.style.width = (parseInt(colBody.style.width) + delta) + \"px\";\r\n\r\n\t\t\t\/\/resize the table\r\n\t\t\tthis.sheet.style.width = (parseInt(this.sheet.style.width) + delta) + \"px\";\r\n\r\n\t\t\tvar cell;\r\n\t\t\tvar di;\r\n\t\t\tfor(var x=0; x < this.numberOfRows; x++)\r\n\t\t\t{\r\n\t\t\t\tcell = this.getCell(num, x);\r\n\t\t\t\tdi   = this.dp.getValueAt(num, x);\r\n\r\n\t\t\t\t\/\/if the cell has text then reset the text.  This way we reuse all\r\n\t\t\t\t\/\/the logic in setCellText() for handling floaters and sizing issues.\r\n\t\t\t\tif ( di.cellText != null )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.setCellText(di.cellText, cell, di, di.dataType, di.formulaBarText)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\/\/need to look at all floaters to the left of this col and\r\n\t\t\t\/\/reset them because they may now be floating over new cells\r\n\t\t\tvar floaters;\r\n\t\t\tfor(var x=0; x < num; x++)\r\n\t\t\t{\r\n\t\t\t\tif ( (floaters = this.floatersByCol[x]) != null )\r\n\t\t\t\t{\r\n\t\t\t\t\tfor(row in floaters)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( floaters[row] != null )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcell = this.getCell(x, row);\r\n\t\t\t\t\t\t\tdi   = this.dp.getValueAt(x, row);\r\n\t\t\t\t\t\t\tthis.setCellText(di.cellText, cell, di, di.dataType, di.formulaBarText)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t\/\/need to look at all floaters to the right of this col and\r\n\t\t\t\/\/toggle z-index so they get reflowed in gecko\r\n\t\t\tif ( dojo.render.html.mozilla )\r\n\t\t\t{\r\n\t\t\t\tvar floater;\r\n\t\t\t\tfor(var x=num+1; x < this.numberOfCols; x++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif ( (floaters = this.floatersByCol[x]) != null )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfor(row in floaters)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tfloater = floaters[row];\r\n\t\t\t\t\t\t\tif ( floater != null )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tfloater.style.zIndex = \"-1\";\r\n\t\t\t\t\t\t\t\tfloater.style.zIndex = \"0\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tdelete floaters[row];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tundoRedoText = \"Resize column \" + Formula.COLUMN_CHARS[num]; \r\n\t\t}\r\n\t\t\/\/row\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/resize the row\r\n\t\t\tvar row = this.getSheetRow(num);\r\n\t\t\trow.style.height = (parseInt(row.style.height) + delta) + \"px\";\r\n\r\n\t\t\t\/\/for IE just toggle z-index of all floaters in this row and bellow\r\n\t\t\t\/\/for gecko need to reset top of all floaters in this row an bellow \r\n\t\t\tvar floaters;\r\n\t\t\tvar floater;\r\n\t\t\tfor(var x=num; x < this.numberOfRows; x++)\r\n\t\t\t{\r\n\t\t\t\tif ( (floaters = this.floatersByRow[x]) != null )\r\n\t\t\t\t{\r\n\t\t\t\t\tfor(col in floaters)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfloater = floaters[col];\r\n\t\t\t\t\t\tif ( floater != null )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ( dojo.render.html.mozilla )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tfloater.style.top = this.calcCellTop(this.getCell(col, x)) + \"px\";\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tfloater.style.zIndex = \"-1\";\r\n\t\t\t\t\t\t\tfloater.style.zIndex = \"0\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdelete floater[col];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tundoRedoText = \"Resize row \" + (num+1);\r\n\t\t}\r\n\r\n\t\t\/\/redraw the background and replicator in case we resized a selected area\r\n\t\t\/\/the redraw method only redraws if the sheet is in the correct state\r\n\t\tthis.activeMS.redraw();\r\n\t\tthis.formulaMS.redraw();\r\n\r\n\t\tif ( addToUndo )\r\n\t\t{\r\n\t\t\tvar table = this;\r\n\t\t\tthis.undoManager.push(\r\n\t\t\t\t\t\tfunction() { table.doResize(type, num, -delta, fromUser, false, true); }, \/\/undo\r\n\t\t\t\t\t\tfunction() { table.doResize(type, num, delta, fromUser, false, true); }, \/\/redo\r\n\t\t\t\t\t\tundoRedoText);\r\n\t\t\tthis.dp.setResizeDelta(type, num, delta);\r\n\t\t}\r\n\t\telse if ( sendToServer )\r\n\t\t{\r\n\t\t\tthis.dp.setResizeDelta(type, num, delta);\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.resizeSheetWindow":{"_":{"meta":{"summary":"","parameters":{"init":{"type":""}},"src":"\t\tvar cWidth = dojo.html.getViewportWidth();\r\n\t\tvar cHeight = dojo.html.getViewportHeight();\r\n\r\n\t\t\/\/TODO: take out when Alex fixes the addOnLoad bug\r\n\t\tthis.topOfColHeaders = dojo.style.getTotalOffset(this.layoutTable, \"top\", false);\r\n\t\tthis.topOfSheet      = this.topOfColHeaders + this.heightOfColHeaders;\r\n\r\n\t\tthis.widthOfSheetWindow = cWidth - this.widthOfRowHeaders -3;\r\n\t\tthis.heightOfSheetWindow = cHeight - this.topOfSheet -3;\r\n\r\n\t\t\/\/set the number of columns and rows\r\n\t\tif ( init )\r\n\t\t{\r\n\t\t\tthis.numberOfCols = Math.ceil(this.widthOfSheetWindow\/this.defaultColWidth) + 2;\r\n\t\t\tthis.sheetWidth  = this.numberOfCols * this.defaultColWidth;\r\n\t\t\tthis.numberOfRows = Math.ceil(this.heightOfSheetWindow\/this.defaultRowHeight) + 5;\r\n\t\t\tthis.sheetHeight = this.numberOfRows * this.defaultRowHeight;\r\n\t\t}\r\n\t\t\/\/resize needed elements and add columns and rows if needed\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.numRowsInPage = Math.ceil(this.heightOfSheetWindow\/this.defaultRowHeight);\r\n\r\n\t\t\tthis.rowResizer.style.width  = this.widthOfSheetWindow + this.widthOfRowHeaders - this.scrollBarOffset + \"px\";\r\n\t\t\tthis.colResizer.style.height = this.heightOfSheetWindow + this.heightOfColHeaders - this.scrollBarOffset + \"px\";\r\n\r\n\t\t\tthis.layoutTable.style.width = this.widthOfSheetWindow  + \"px\";\r\n\t\t\tthis.layoutTable.style.width = this.heightOfSheetWindow + \"px\";\r\n\t\t\tthis.sheetCol.style.width    = this.widthOfSheetWindow  + \"px\";\r\n\t\t\tthis.colHeaderRow.style.width= this.widthOfSheetWindow + this.widthOfRowHeaders + \"px\";\r\n\t\t\tthis.colHeadersTD.style.width= this.widthOfSheetWindow  + \"px\";\r\n\t\t\tthis.colHeaders.style.width  = this.widthOfSheetWindow  + \"px\";\r\n\r\n\t\t\tthis.sheetRow.style.height   = this.heightOfSheetWindow + \"px\";\r\n\t\t\tthis.sheetRow.style.width    = this.widthOfSheetWindow  + this.widthOfRowHeaders + \"px\";\r\n\t\t\tthis.rowHeadersTD.style.height = this.heightOfSheetWindow + \"px\";\r\n\t\t\tthis.rowHeaders.style.height = this.heightOfSheetWindow + \"px\";\r\n\t\t\tthis.sheetCell.style.width  = this.widthOfSheetWindow   + \"px\";\r\n\t\t\tthis.sheetCell.style.height = this.heightOfSheetWindow  + \"px\";\r\n\t\t\tthis.sheetFrame.style.width  = this.widthOfSheetWindow  + \"px\";\r\n\t\t\tthis.sheetFrame.style.height = this.heightOfSheetWindow + \"px\";\r\n\t\r\n\t\t\tthis.checkColAndRowFit();\r\n\r\n\t\t\tif ( dojo.render.html.mozilla ) \r\n\t\t\t{\r\n\t\t\t\t\/\/need to do this crap because Gecko likes to put scroll bars in\r\n\t\t\t\t\/\/when the user shrinks the window and before you can resize the sheet \r\n\t\t\t\t\/\/and then when you shrink the sheet to fit you\r\n\t\t\t\t\/\/are left with blank area where the scroll bars used to be.\r\n\t\t\t\tif ( this.resizeSheetWindow.inGeckoCallback )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.resizeSheetWindow.inGeckoCallback = false;\r\n\t\t\t\t\tthis.geckoSyncHeaders(); \r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.resizeSheetWindow.inGeckoCallback = true;\r\n\t\t\t\t\tthis.resizeSheetWindow();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.checkColAndRowFit":{"_":{"meta":{"summary":"","src":"\t\tif ( this.widthOfSheetWindow >= this.sheetWidth )\r\n\t\t{\r\n\t\t\tthis.addColAndHeader(Math.ceil((this.widthOfSheetWindow - this.sheetWidth)\/this.defaultColWidth) + 2, true);\r\n\t\t}\r\n\r\n\t\tif ( this.heightOfSheetWindow >= this.sheetHeight )\r\n\t\t{\r\n\t\t\tthis.addRowAndHeader(Math.ceil((this.heightOfSheetWindow - this.sheetHeight)\/this.defaultRowHeight) + 5, true);\r\n\t\t}\r\n\r\n\t\t\/\/TODO:this still doesn't work need a way to sync headers in IE.\r\n\t\t\/\/it looks like the scroll into isn't correct when calling\r\n\t\tthis.preSyncHeaders();\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.addColAndHeader":{"_":{"meta":{"summary":"","parameters":{"num":{"type":""},"getValues":{"type":""},"col":{"type":""}},"src":"\t\tvar fc = this.numberOfCols;\r\n\r\n\t\tfor(var x=0; x < num; x++)\r\n\t\t{\r\n\t\t\tthis.sheetWidth = this.addSheetCol(col);\r\n\t\t\tthis.addColHeaders();\r\n\t\t\tthis.numberOfCols++;\r\n\t\t}\r\n\r\n\t\tif ( col >= 0 )\r\n\t\t{\r\n\t\t\tvar lastCell = this.getCell(this.numberOfCols-1, 0);\r\n\t\t\tthis.sheetWidth = lastCell.offsetLeft + lastCell.offsetWidth -1; \r\n\r\n\t\t\tif ( this.selectedCellCol >= col )\r\n\t\t\t{\r\n\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.activeMS.multiSelect(col+1, -1);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.cellSelected(this.selectedCell);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( this.biggerThanNumColArray.length > 0 )\r\n\t\t{\r\n\t\t\tvar size = this.biggerThanNumColArray.length;\r\n\t\t\tfor(var x=0; x < size; x++)\r\n\t\t\t{\r\n\t\t\t\tvar obj = this.biggerThanNumColArray.shift();\r\n\t\t\t\tthis.setCellText(obj.di.cellText, obj.cell, obj.di, obj.di.dataType, obj.di.formulaBarText, false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( getValues )\r\n\t\t{\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tthis.dp.getValuesByRange(fc, 0, num, this.numberOfRows);\r\n\t\t\t}\r\n\t\t\tcatch(e)\r\n\t\t\t{\r\n\t\t\t\tdojo.debug(\"Error in addColAndHeader = \" + e);\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.addRowAndHeader":{"_":{"meta":{"summary":"","parameters":{"num":{"type":""},"getValues":{"type":""},"row":{"type":""}},"src":"\t\tvar fr = this.numberOfRows;\r\n\r\n\t\tfor(var x=0; x < num; x++)\r\n\t\t{\r\n\t\t\tthis.sheetHeight = this.addSheetRow(row);\r\n\t\t\tthis.addRowHeaders(row);\r\n\t\t\tthis.numberOfRows++;\r\n\t\t}\r\n\r\n\t\tif ( row >= 0 )\r\n\t\t{\r\n\t\t\tthis.reLabelRowHeaders(row+num, this.numberOfRows);\r\n\r\n\t\t\tvar lastCell = this.getCell(this.numberOfCols-1, 0);\r\n\t\t\tthis.sheetWidth = lastCell.offsetLeft + lastCell.offsetWidth -1; \r\n\r\n\t\t\t\/\/need to update the selected cell as in the before case it just moved\r\n\t\t\tif ( this.selectedCellRow >= row )\r\n\t\t\t{\r\n\t\t\t\tif ( this.inMultiSelect )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.activeMS.multiSelect(-1, row+1);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.cellSelected(this.selectedCell);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( getValues )\r\n\t\t{\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tthis.dp.getValuesByRange(0, fr, this.numberOfCols, num);\r\n\t\t\t}\r\n\t\t\tcatch(e)\r\n\t\t\t{\r\n\t\t\t\tdojo.debug(\"Error in addRowAndHeader = \" + e);\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.addColHeaders":{"_":{"meta":{"summary":"","src":"\t\tthis.colHeadersTable.style.width = this.sheetWidth + \"px\";\r\n\r\n\t\t\/\/Cap Start col tag\r\n\t\tvar colTag = this.protoHeaderColTag.cloneNode(false);\r\n\t\tcolTag.style.width = \"2px\";\r\n\t\tthis.colHeadersColGroup.appendChild(colTag);\r\n\t\t\/\/Cap Start\r\n\t\tvar cell = this.protoColHeaderCell.cloneNode(false); \r\n\t\tcell.className = \"colCapStart\";\r\n\t\tcell.style.backgroundColor = this.headerBackgroundColor;\r\n\t\tthis.colHeadersRow.appendChild(cell);\r\n\r\n\t\t\/\/Cap Header col tag\r\n\t\tcolTag = this.protoHeaderColTag.cloneNode(false);\r\n\t\tcolTag.style.width = dojo.render.html.ie ? \"94px\" : \"95px\";\r\n\t\tthis.colHeadersColGroup.appendChild(colTag);\r\n\t\t\/\/Header\r\n\t\tcell = this.protoColHeaderCell.cloneNode(false); \r\n\t\tcell.className = \"colHeader\";\r\n\t\tcell.style.width = dojo.render.html.ie ? \"94px\" : \"95px\";\r\n\t\tcell.style.backgroundColor = this.headerBackgroundColor;\r\n\t\tcell.innerHTML = Formula.COLUMN_CHARS[this.numberOfCols];\r\n\t\tthis.colHeadersRow.appendChild(cell);\r\n\r\n\t\t\/\/Cap Header col tag\r\n\t\tcolTag = this.protoHeaderColTag.cloneNode(false);\r\n\t\tcolTag.style.width = \"3px\";\r\n\t\tthis.colHeadersColGroup.appendChild(colTag);\r\n\t\t\/\/Cap End\r\n\t\tcell= this.protoColHeaderCell.cloneNode(false); \r\n\t\tcell.className = \"colCapEnd\";\r\n\t\tcell.style.backgroundColor = this.headerBackgroundColor;\r\n\t\tthis.colHeadersRow.appendChild(cell);\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.reLabelColHeaders":{"_":{"meta":{"summary":"","parameters":{"start":{"type":""},"end":{"type":""}},"src":"\t\tstart = start ? start : 0;\r\n\t\tend = end ? end : this.numberOfCols;\r\n\t\tfor(var x=start; x < end; x++)\r\n\t\t{\r\n\t\t\tthis.getColHeaderMiddle(x).innerHTML = Formula.COLUMN_CHARS[x];\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.addRowHeaders":{"_":{"meta":{"summary":"","parameters":{"row":{"type":""}},"src":"\t\tthis.rowHeadersTable.style.height = this.sheetHeight + \"px\";\r\n\r\n\t\t\/\/Cap Start\r\n\t\tvar headerStart = this.protoRowHeaderStart.cloneNode(true);\r\n\t\tvar cell = headerStart.firstChild;\r\n\t\tcell.className = \"rowCapStart\";\r\n\t\tcell.style.backgroundColor = this.headerBackgroundColor;\r\n\r\n\t\t\/\/Header\r\n\t\tvar headerMid = this.protoRowHeaderMain.cloneNode(true);\r\n\t\tcell = headerMid.firstChild;\r\n\t\tcell.className = \"rowHeader\";\r\n\t\tcell.style.height = document.all ? \"20px\" : \"21px\";\r\n\t\tcell.style.backgroundColor = this.headerBackgroundColor;\r\n\t\tcell.innerHTML = this.numberOfRows+1;\r\n\r\n\t\t\/\/Cap End\r\n\t\tvar headerEnd = this.protoRowHeaderEnd.cloneNode(true);\r\n\t\tcell = headerEnd.firstChild;\r\n\t\tcell.className = \"rowCapEnd\";\r\n\t\tcell.style.backgroundColor = this.headerBackgroundColor;\r\n\r\n\t\tif ( row >= 0 )\r\n\t\t{\r\n\t\t\tif ( this.filterRowNum )\r\n\t\t\t{\r\n\t\t\t\tthis.filterRowNum = parseInt(this.getRowHeaderMiddle(row).innerHTML);\r\n\t\t\t\theaderMid.firstChild.innerHTML = this.filterRowNum++; \r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\theaderMid.firstChild.innerHTML = row+1; \r\n\t\t\t}\r\n\t\t\tthis.rowHeadersBody.insertBefore(headerEnd, this.getRowHeaderStartRow(row));\r\n\t\t\tthis.rowHeadersBody.insertBefore(headerMid, headerEnd);\r\n\t\t\tthis.rowHeadersBody.insertBefore(headerStart, headerMid);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\theaderMid.firstChild.innerHTML = this.filterRowNum ? this.filterRowNum++ : this.numberOfRows+1;\r\n\t\t\tthis.rowHeadersBody.appendChild(headerStart);\r\n\t\t\tthis.rowHeadersBody.appendChild(headerMid);\r\n\t\t\tthis.rowHeadersBody.appendChild(headerEnd);\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.reLabelRowHeaders":{"_":{"meta":{"summary":"","parameters":{"start":{"type":""},"end":{"type":""}},"src":"\t\tstart = start ? start : 0;\r\n\t\tend = end ? end : this.numberOfRows;\r\n\t\tfor(var x=start; x < end; x++)\r\n\t\t{\r\n\t\t\tthis.getRowHeaderMiddle(x).innerHTML = this.filterRowNum ? this.filterRowNum++ : x+1; \r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.reLabelRowHeader":{"_":{"meta":{"summary":"","parameters":{"rowIndex":{"type":""},"label":{"type":""}},"src":"\t\tthis.reLabelRowHeader.lastRowIndex = rowIndex;\r\n\t\tthis.reLabelRowHeader.lastLabel = label;\r\n\r\n\t\tthis.getRowHeaderMiddle(rowIndex).innerHTML = label;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.addSheetCol":{"_":{"meta":{"summary":"","parameters":{"col":{"type":""}},"src":"\t\tcolObj.style.width = dojo.render.html.ie ? \"94px\" : \"100px\";\r\n\t\tthis.sheetCols.appendChild(colObj);\r\n\r\n\t\tvar cell;\r\n\t\tvar rows = this.sheetBody.getElementsByTagName(\"tr\");\r\n\t\tvar row;\r\n\t\tfor(var x=1; x <= rows.length; x++)\r\n\t\t{\r\n\t\t\tcell = this.selectedCell.cloneNode(false); \r\n\t\t\tcell.innerHTML = \"&nbsp;\";\r\n\t\t\tcell.style.border = this.cellBorder;\r\n\t\t\tcell.style.padding = this.cellPadding;\r\n\t\t\tcell.style.backgroundImage = \"\";\r\n\t\t\r\n\t\t\trow = rows[x-1];\r\n\t\t\tif ( col >= 0 )\r\n\t\t\t{\r\n\t\t\t\trow.insertBefore(cell, row.cells[col]);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\trow.appendChild(cell);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn cell.offsetLeft + cell.offsetWidth - 1;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.addSheetRow":{"_":{"meta":{"summary":"","parameters":{"row":{"type":""}},"src":"\t\trowObj.style.height = this.sheetRowPXHeight; \r\n\r\n\t\tvar cells = rowObj.childNodes;\r\n\t\tvar cell;\r\n\t\tfor(var y=0; y < cells.length; y++)\r\n\t\t{\r\n\t\t\tcell = cells[y];\r\n\t\t\tcell.innerHTML = \"&nbsp;\";\r\n\t\t\tcell.style.border = this.cellBorder;\r\n\t\t\tcell.style.padding = this.cellPadding;\r\n\t\t\tcell.style.backgroundImage = \"\";\r\n\t\t}\r\n\r\n\t\tif ( row >= 0 )\r\n\t\t{\r\n\t\t\tthis.sheetBody.insertBefore(rowObj, this.getSheetRow(row));\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.sheetBody.appendChild(rowObj);\r\n\t\t}\r\n\r\n\t\treturn cell.offsetTop + cell.offsetHeight - 1;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.preSyncHeaders":{"_":{"meta":{"summary":"","src":"\t\tif ( dojo.render.html.ie )\r\n\t\t{\r\n\t\t\tthis.ieSyncHeaders(); \r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.geckoSyncHeaders();\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.ieSyncHeaders":{"_":{"meta":{"summary":"","src":"\t\tthis.syncHeaders(this.sheetFrame.contentDocument.documentElement.scrollTop, \r\n\t\t\t\t\t\t this.sheetFrame.contentDocument.documentElement.scrollLeft);\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.geckoSyncHeaders":{"_":{"meta":{"summary":"","src":"\t\tthis.syncHeaders(this.sheetFrame.contentWindow.pageYOffset, this.sheetFrame.contentWindow.pageXOffset);\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.syncHeaders":{"_":{"meta":{"summary":"","parameters":{"top":{"type":""},"left":{"type":""}},"src":"\t\tthis.colHeaders.scrollLeft  = left; \r\n\r\n\t\tthis.rowHeaders.scrollTop = top;\r\n\r\n\t\t\/\/debug(\"newHeight = \" + newHeight + \" sheetHeight = \" + w.sheetHeight + \r\n\t\t\/\/\" hosw = \" + w.heightOfSheetWindow + \" top = \" + top);\r\n\t\t\/\/debug(\"newWidth = \" + newWidth + \" sheetWidth = \" + w.sheetWidth + \r\n\t\t\/\/\" wosw = \" + w.widthOfSheetWindow + \" left = \" + left, true);\r\n\r\n\t\t\/\/see if we need to add cols\r\n\t\tif ( (this.widthOfSheetWindow + left) >= this.sheetWidth )\r\n\t\t{\r\n\t\t\tthis.addColAndHeader(1, true);\r\n\t\t\tthis.preSyncHeaders();\r\n\t\t}\r\n\r\n\t\t\/\/see if we need to add rows\r\n\t\tif ( (this.heightOfSheetWindow + top) >= this.sheetHeight )\r\n\t\t{\r\n\t\t\tthis.addRowAndHeader(1, true);\r\n\t\t\tthis.preSyncHeaders();\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getSheetAbsoluteX":{"_":{"meta":{"summary":"","src":"\t\treturn this.layoutTable.offsetLeft + this.widthOfRowHeaders;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getSheetAbsoluteY":{"_":{"meta":{"summary":"","src":"\t\treturn this.topOfColHeaders + this.heightOfColHeaders;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.getChar":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.48":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.49":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.50":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.51":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.52":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.53":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.54":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.55":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.56":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.57":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.106":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.111":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.109":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.189":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.61":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.187":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.188":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.190":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.191":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.192":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.219":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.220":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.221":{"_":{"meta":{"summary":"","parameters":{"keyCode":{"type":""},"shiftKey":{"type":""}},"src":"\t\tif ( keyCode == 32 )\r\n\t\t{\r\n\t\t\treturn \"&nbsp;\";\r\n\t\t}\r\n\t\telse if ( shiftKey )\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 48:\r\n\t\t\t\t\treturn \")\";\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\treturn \"!\";\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\treturn \"@\";\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\treturn \"#\";\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\treturn \"$\";\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\treturn \"%\";\r\n\t\t\t\tcase 54:\r\n\t\t\t\t\treturn \"^\";\r\n\t\t\t\tcase 55:\r\n\t\t\t\t\treturn \"&\";\r\n\t\t\t\tcase 56:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 57:\r\n\t\t\t\t\treturn \"(\";\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"_\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"+\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \"<\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \">\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\t\treturn \"?\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"~\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"{\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"|\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"}\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\/\/fromCharCode doesn't handle some things very good\r\n\t\t\tswitch(keyCode)\r\n\t\t\t{\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\treturn \"*\";\r\n\t\t\t\tcase 191:\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\treturn \"\/\";\r\n\t\t\t\tcase 109:\r\n\t\t\t\tcase 189:\r\n\t\t\t\t\treturn \"-\";\r\n\t\t\t\tcase 61:\r\n\t\t\t\tcase 187:\r\n\t\t\t\t\treturn \"=\";\r\n\t\t\t\tcase 188:\r\n\t\t\t\t\treturn \",\";\r\n\t\t\t\tcase 190:\r\n\t\t\t\t\treturn \".\";\r\n\t\t\t\tcase 192:\r\n\t\t\t\t\treturn \"`\";\r\n\t\t\t\tcase 219:\r\n\t\t\t\t\treturn \"[\";\r\n\t\t\t\tcase 220:\r\n\t\t\t\t\treturn \"\\\\\";\r\n\t\t\t\tcase 221:\r\n\t\t\t\t\treturn \"]\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn String.fromCharCode(keyCode).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.setStatus":{"_":{"meta":{"summary":"","parameters":{"value":{"type":""}},"src":"\t\tthis.status.innerHTML = value;\r\n\t\tdojo.style.setOpacity(this.status, 1);\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.clearStatus":{"_":{"meta":{"summary":"","src":"\t\tif ( this.clearStatusAnim && this.clearStatusAnim.status != \"stopped\" ) \r\n\t\t{\r\n\t    \tthis.clearStatusAnim.stop();\r\n\t    \tdojo.html.setOpacity(this.status, 1);\r\n \t\t}\r\n\r\n\t\tthis.clearStatusAnim = dojo.fx.fadeOut(this.status, 200, dojo.lang.hitch(this, function() {\r\n\t\t\tthis.status.innerHTML = \"\";\r\n\t\t}));\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.processCellText":{"_":{"meta":{"summary":"","src":"\t\tvar html;\r\n\t\tvar needToStrip = false;\r\n\t\tif ( this.editing )\r\n\t\t{\r\n\t\t\tneedToStrip = true;\r\n\t\t\tif ( dojo.render.html.ie )\r\n\t\t\t{\r\n\t\t\t\thtml = this.editCell.innerHTML;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\thtml = this.editCell.contentWindow.document.body.innerHTML;\r\n\t\t\t}\r\n\r\n\t\t\t\/\/see if the user is editing a formula\r\n\t\t\tif ( html.charAt(0) == \"=\" )\r\n\t\t\t{\r\n\t\t\t\tthis.inFormula = true;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.inFormula = false;\r\n\t\t\t\tthis.formulaMS.hide();\r\n\t\t\t}\r\n\r\n\t\t\t\/\/turn control on and off what are legal based on\r\n\t\t\t\/\/the state of the websheet.\r\n\t\t\tthis.setToolbarState();\r\n\t\t}\r\n\t\telse if ( this.selectedCellDI.formulaBarText )\r\n\t\t{\r\n\t\t\t\/\/need to make sure this is a string so stripHTML doesn't bitch that\r\n\t\t\t\/\/number doesn't contain the method replace()\r\n\t\t\thtml = this.selectedCellDI.formulaBarText;\r\n\t\t\tif ( html.charAt(0) == \"=\" )\r\n\t\t\t{\r\n\t\t\t\tneedToStrip = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if ( this.selectedCellDI.cellText )\r\n\t\t{\r\n\t\t\thtml = this.selectedCellDI.cellText;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\thtml = \"\"\r\n\t\t}\r\n\r\n\t\t\/\/ONLY IN FOR DEBUGING TO SEE WHAT HTML IS IN THE CELL\r\n\t\t\/\/html = this.selectedCell.innerHTML;\r\n\r\n\t\t\/\/set the sizer value so that editing has the correct length of text\r\n\t\t\/\/this.editCellSizer.innerHTML = html; \r\n\t\tthis.editCellSizer.getWidth(html, this.selectedCellDI); \r\n\r\n\t\tif ( this.useFormulaBar )\r\n\t\t{\r\n\t\t\t\/\/ONLY IN FOR DEBUGING TO SEE WHAT HTML IS IN THE CELL\r\n\t\t\t\/\/this.formulaBar.value = html \r\n\t\t\tif ( needToStrip )\r\n\t\t\t{\r\n\t\t\t\thtml = this.stripHTML(html).replace(\/&nbsp;\/ig, \" \").replace(\/&lt;\/ig, \"<\").replace(\/&gt;\/ig, \">\").replace(\/&amp;\/ig, \"&\"); \r\n\t\t\t}\r\n\t\t\tthis.formulaBar.value = html; \r\n\t\t}\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.stripHTML":{"_":{"meta":{"summary":"","parameters":{"oldString":{"type":""}},"src":"\t\t\/\/replace carriage returns and line feeds\r\n\t\tnewString = newString.replace(\/\\r\\n\/g,\" \");\r\n\t\tnewString = newString.replace(\/\\n\/g,\" \");\r\n\t\tnewString = newString.replace(\/\\r\/g,\" \");\r\n\r\n\t\t\/\/trim string\r\n\t\tnewString = this.trim(newString);\r\n\t\t\r\n\t\treturn newString;\r","this":"jot.widget.JotTable"}}},"jot.widget.JotTable.trim":{"_":{"meta":{"summary":"","parameters":{"inputString":{"type":""}},"src":"\t\tvar retValue = inputString;\r\n\t\tvar ch = retValue.substring(0, 1);\r\n\r\n\t\t\/\/ Check for spaces at the beginning of the string\r\n\t\twhile (ch == \" \")\r\n\t\t{\r\n\t\t\tretValue = retValue.substring(1, retValue.length);\r\n\t\t\tch = retValue.substring(0, 1);\r\n\t\t}\r\n\t\tch = retValue.substring(retValue.length - 1, retValue.length);\r\n\r\n\t\t\/\/ Check for spaces at the end of the string\r\n\t\twhile (ch == \" \")\r\n\t\t{\r\n\t\t\tretValue = retValue.substring(0, retValue.length - 1);\r\n\t\t\tch = retValue.substring(retValue.length - 1, retValue.length);\r\n\t\t}\r\n\r\n\t\t\/\/Note that there are two spaces in the string\r\n\t\t\/\/look for multiple spaces within the string\r\n\t\twhile (retValue.indexOf(\"  \") != -1)\r\n\t\t{\r\n\t\t\t\t\/\/ Again, there are two spaces in each of the strings\r\n\t\t\tretValue = retValue.substring(0, retValue.indexOf(\"  \")) + \r\n\t\t\t\t\t\tretValue.substring(retValue.indexOf(\"  \") + 1, retValue.length);\r\n\t\t}\r\n\t\treturn retValue; \/\/ Return the trimmed string back to the user\r","returns":"Return the trimmed string back to the user","this":"jot.widget.JotTable"}}}}}},"dojo.widget.jot.JotTableCellDialog":{"meta":{"requires":{"common":["dojo.widget.ResizeHandle","dojo.dnd.HtmlDragMove","dojo.fx.*","dojo.io.*","dojo.uri.*"]},"methods":{"jot.widget.JotTableCellDialog":{"_":{"meta":{"summary":"","parameters":{"topPage":{"type":""}},"src":"\tdojo.widget.HtmlWidget.call(this);\r\n\r\n\tthis.templatePath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/JotTableCellDialog.html\");\r\n\tthis.templateCssPath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/JotTableCellDialog.css\");\r\n\r\n\tthis.widgetType = \"JotTableCellDialog\";\r\n\r\n\tthis.topPage = \"\";\r\n\tthis.rowIndex = \"\";\r\n\tthis.colIndex = \"\";\r\n\tthis.triggerCell = null;\r\n\tthis.parentTable = null;\r\n\t\r\n\tthis.startOpacity = 1.0; \/\/ 0.5;\r\n\tthis.dialogIsLeftOfCell;\r\n\tthis.origMouseX = null; \/\/ for gravity calc\r\n\tthis.anim = null; \/\/ for cancelling ongoing fx animations\r\n\tthis.isPinned = false; \/\/ shyness overcome?\r\n\tthis.blockShyness = false; \/\/ avoid race condition\r\n\t\r\n\tthis.editor = null; \/\/richtext editor for notes area\r\n\t\r\n\tthis.rootPath = (djConfig &&  djConfig.wikiRootPath) ? djConfig.wikiRootPath : \"\/\";\r","this_variables":["templatePath","templateCssPath","widgetType","topPage","rowIndex","colIndex","triggerCell","parentTable","startOpacity","origMouseX","anim","isPinned","blockShyness","editor","rootPath","domNode.style.display","domNode.style.display","hiding","domNode.style.visibility","domNode.style.display","domNode.style.opacity","blockShyness","cellX","origMouseX","hiding","domNode.style.visibility","domNode.style.display","domNode.style.opacity","blockShyness","cellX","origMouseX","hiding","domNode.style.visibility","domNode.style.display","domNode.style.opacity","blockShyness","cellX","origMouseX","origMouseX","domNode.style.opacity","isPinned","anim","hiding","blockShyness","anim","origMouseX","isPinned","domNode.style.visibility","dialogIsLeftOfCell","dialogLeft","dialogRight","notesContent.innerHTML","origNote","editor"],"inherits":["dojo.widget.HtmlWidget"],"protovariables":{"barrierId":"","hiding":"","origNote":""}}}},"jot.widget.JotTableCellDialog.fillInTemplate":{"_":{"meta":{"summary":"","src":"\t\tthis.domNode.style.display = \"none\";\r\n\t\tdojo.event.connect(this.btnClose, \"onclick\", this, \"hide\");\r\n\t\tvar drag = new dojo.dnd.HtmlDragMoveSource(this.domNode);\r\n\t\tdrag.setDragHandle(this.headerbar);\r\n\r\n\t\t\/\/<div dojoType=\"ResizeHandle\" targetElmId=\"testWindow\"><\/div>\r\n\t\tvar resizeHandle = dojo.widget.createWidget(\"ResizeHandle\", {}, this.domNode, \"last\");\r\n\t\tresizeHandle.targetElmId = this.widgetId;\r\n\t\t\/\/fix dojo resizeHandle's placement css, which by default\r\n\t\t\/\/ doesn't put the handle in the bottom right unless you push it there with other elements\r\n\t\tresizeHandle.domNode.style.position = \"absolute\";\r\n\t\tresizeHandle.domNode.style.right = resizeHandle.domNode.style.bottom = 0;\r\n\t\tresizeHandle.minSize = {w:350, h:200};\r\n\t\t\r\n\t\t\/\/fix the iframe event-blackhole problem\r\n\t\tdojo.event.connect(this.headerbar, \"onmousedown\", this, \"startMoving\");\r\n\t\tdojo.event.connect(this.headerbar, \"onmouseup\", this, \"stopMoving\");\r\n\r\n\t\tdojo.event.connect(resizeHandle.domNode, \"onmousedown\", this, \"showDragEventBarrier\");\r\n\t\tdojo.event.connect(resizeHandle.domNode, \"onmouseup\", this, \"hideDragEventBarrier\");\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.w":{"_":{"meta":{"summary":"","src":"\t\tthis.domNode.style.display = \"none\";\r\n\t\tdojo.event.connect(this.btnClose, \"onclick\", this, \"hide\");\r\n\t\tvar drag = new dojo.dnd.HtmlDragMoveSource(this.domNode);\r\n\t\tdrag.setDragHandle(this.headerbar);\r\n\r\n\t\t\/\/<div dojoType=\"ResizeHandle\" targetElmId=\"testWindow\"><\/div>\r\n\t\tvar resizeHandle = dojo.widget.createWidget(\"ResizeHandle\", {}, this.domNode, \"last\");\r\n\t\tresizeHandle.targetElmId = this.widgetId;\r\n\t\t\/\/fix dojo resizeHandle's placement css, which by default\r\n\t\t\/\/ doesn't put the handle in the bottom right unless you push it there with other elements\r\n\t\tresizeHandle.domNode.style.position = \"absolute\";\r\n\t\tresizeHandle.domNode.style.right = resizeHandle.domNode.style.bottom = 0;\r\n\t\tresizeHandle.minSize = {w:350, h:200};\r\n\t\t\r\n\t\t\/\/fix the iframe event-blackhole problem\r\n\t\tdojo.event.connect(this.headerbar, \"onmousedown\", this, \"startMoving\");\r\n\t\tdojo.event.connect(this.headerbar, \"onmouseup\", this, \"stopMoving\");\r\n\r\n\t\tdojo.event.connect(resizeHandle.domNode, \"onmousedown\", this, \"showDragEventBarrier\");\r\n\t\tdojo.event.connect(resizeHandle.domNode, \"onmouseup\", this, \"hideDragEventBarrier\");\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.setMoveCursor":{"_":{"meta":{"summary":"","src":"\t\tdocument.body.style.cursor = 'move'; \r\n\t\tdojo.event.disconnect(this.headerbar, \"onmouseover\", \"setMoveCursor\");\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.startMoving":{"_":{"meta":{"summary":"","src":"\t\tthis.showDragEventBarrier();\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.stopMoving":{"_":{"meta":{"summary":"","src":"\t\tthis.hideDragEventBarrier();\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.postCreate":{"_":{"meta":{"summary":"","src":"\t\t;\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.showDragEventBarrier":{"_":{"meta":{"summary":"","src":"\t\tvar barrier = dojo.byId(this.barrierId);\r\n\t\tif (!barrier) {\r\n\t\t\tbarrier = document.createElement(\"div\");\r\n\t\t\tbarrier.id = this.barrierId;\r\n\t\t\tbarrier.style.opacity = 0;\r\n\t\t\tbarrier.style.zIndex = 1001; \/\/i.e., 1 less than the dialog itself\r\n\t\t\tbarrier.style.position = \"absolute\";\r\n\t\t\tbarrier.style.left = 0;\r\n\t\t\tbarrier.style.top = 0;\r\n\t\t\tbarrier.style.width = dojo.html.getViewportWidth() + \"px\";\r\n\t\t\tbarrier.style.height = dojo.html.getViewportHeight() + \"px\";\r\n\t\t\tdocument.body.appendChild(barrier);\r\n\t\t} else {\r\n\t\t\tbarrier.style.width = dojo.html.getViewportWidth() + \"px\";\r\n\t\t\tbarrier.style.height = dojo.html.getViewportHeight() + \"px\";\r\n\t\t\tbarrier.style.display = \"block\";\r\n\t\t}\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.hideDragEventBarrier":{"_":{"meta":{"summary":"","src":"\t\tvar barrier = dojo.byId(this.barrierId);\r\n\t\tif (barrier) {\r\n\t\t\tbarrier.style.display = \"none\";\r\n\t\t}\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.show":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif (this.anim != null) {\r\n\t\t\tthis.anim.stop();\r\n\t\t}\r\n\t\tthis.hiding = false;\r\n\r\n\t\tif(e) {\r\n\t\t\tif(e.preventDefault) { e.preventDefault(); }\r\n\t\t\tif(e.stopPropagation) { e.stopPropagation(); }\r\n\t\t}\r\n\t\tthis.domNode.style.visibility = \"hidden\";\r\n\t\tthis.domNode.style.display = \"block\";\r\n\t\tthis.placeDialog();\r\n\t\tthis.domNode.style.opacity = this.startOpacity;\r\n\t\tthis.domNode.style.visibility = \"visible\";\r\n\r\n\r\n\t\t\/\/prepare the attach dialog\r\n\t\tvar dlgs = dojo.widget.manager.getWidgetsByType(\"JotTableUploadDialog\");\r\n\t\tvar dlg;\r\n\t\tif (dlgs.length > 0) {\r\n\t\t\tdlg = dlgs[0];\r\n\t\t\tdlg.topPage = this.topPage;\r\n\t\t\tdlg.rowIndex = this.rowIndex;\r\n\t\t\tdlg.colIndex = this.colIndex;\r\n\t\t} else {\r\n\t\t\t\/\/todo should JotTableUploadDialog just refer to its container for items like rowIndex?\r\n\t\t\tvar args = {triggerEl: this.btnAttach,\r\n\t\t\t\t\t\t\t\t\ttopPage: this.topPage, \r\n\t\t\t\t\t\t\t\t\trowIndex: this.rowIndex,\r\n\t\t\t\t\t\t\t\t\tcolIndex: this.colIndex,\r\n\t\t\t\t\t\t\t\t\tcontainingDialog: this}\r\n  \t\tdlg = dojo.widget.createWidget(\"JotTableUploadDialog\", args, this.container, \"last\");\r\n  \t}\r\n\r\n\t\tthis.blockShyness = false;\r\n\t\tdojo.event.connect(this.parentTable, \"processMouseMove\", this, \"checkShyness\"); \r\n\t\tdojo.event.connect(this.domNode, \"onmouseover\", this, \"pin\");\r\n\t\t\r\n  \tthis.cellX = this.parentTable.getSheetAbsoluteX() + dojo.html.getAbsoluteX(this.triggerCell);\r\n  \tthis.origMouseX = null;\r\n  \t\r\n  \t\/\/ load the attachments, notes, and other assets for this cell\r\n\t\tthis.refresh();\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.triggerEl":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif (this.anim != null) {\r\n\t\t\tthis.anim.stop();\r\n\t\t}\r\n\t\tthis.hiding = false;\r\n\r\n\t\tif(e) {\r\n\t\t\tif(e.preventDefault) { e.preventDefault(); }\r\n\t\t\tif(e.stopPropagation) { e.stopPropagation(); }\r\n\t\t}\r\n\t\tthis.domNode.style.visibility = \"hidden\";\r\n\t\tthis.domNode.style.display = \"block\";\r\n\t\tthis.placeDialog();\r\n\t\tthis.domNode.style.opacity = this.startOpacity;\r\n\t\tthis.domNode.style.visibility = \"visible\";\r\n\r\n\r\n\t\t\/\/prepare the attach dialog\r\n\t\tvar dlgs = dojo.widget.manager.getWidgetsByType(\"JotTableUploadDialog\");\r\n\t\tvar dlg;\r\n\t\tif (dlgs.length > 0) {\r\n\t\t\tdlg = dlgs[0];\r\n\t\t\tdlg.topPage = this.topPage;\r\n\t\t\tdlg.rowIndex = this.rowIndex;\r\n\t\t\tdlg.colIndex = this.colIndex;\r\n\t\t} else {\r\n\t\t\t\/\/todo should JotTableUploadDialog just refer to its container for items like rowIndex?\r\n\t\t\tvar args = {triggerEl: this.btnAttach,\r\n\t\t\t\t\t\t\t\t\ttopPage: this.topPage, \r\n\t\t\t\t\t\t\t\t\trowIndex: this.rowIndex,\r\n\t\t\t\t\t\t\t\t\tcolIndex: this.colIndex,\r\n\t\t\t\t\t\t\t\t\tcontainingDialog: this}\r\n  \t\tdlg = dojo.widget.createWidget(\"JotTableUploadDialog\", args, this.container, \"last\");\r\n  \t}\r\n\r\n\t\tthis.blockShyness = false;\r\n\t\tdojo.event.connect(this.parentTable, \"processMouseMove\", this, \"checkShyness\"); \r\n\t\tdojo.event.connect(this.domNode, \"onmouseover\", this, \"pin\");\r\n\t\t\r\n  \tthis.cellX = this.parentTable.getSheetAbsoluteX() + dojo.html.getAbsoluteX(this.triggerCell);\r\n  \tthis.origMouseX = null;\r\n  \t\r\n  \t\/\/ load the attachments, notes, and other assets for this cell\r\n\t\tthis.refresh();\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.topPage":{"_":{"meta":{"summary":"","src":"\t\tif (!this.editor) { return; }\r\n\t\tvar newNote = this.editor.getEditorContent();\r\n\t\tif (this.origNote != newNote) {\r\n\t\t\t dojo.io.bind({ \r\n\t\t\t    url: new dojo.uri.Uri(djConfig.wikiRootPath, \"Tracker\/TrAttachNote\"),\r\n\t\t\t    method: \"post\",\r\n\t\t\t    content: {\r\n\t\t\t      topPage: g_topPage,\r\n\t\t\t      rowIndex: this.rowIndex,\r\n\t\t\t      colIndex: this.colIndex,\r\n\t\t\t      note: newNote\r\n\t\t\t    },\r\n\t\t\t    mimetype: \"text\/plain\", \r\n\t\t\t    load: function(type, resp, e) {\r\n\t\t\t      ;\r\n\t\t\t    }\r\n\t\t\t  });\t\t\r\n\r\n\t\t\tthis.handleSectionUpdate();\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\/\/don't pass true to the close() param, which would save back \r\n\t\t\/\/the richtext editor contents to the original element\r\n\t\tthis.editor.close(false);\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.rowIndex":{"_":{"meta":{"summary":"","src":"\t\tif (!this.editor) { return; }\r\n\t\tvar newNote = this.editor.getEditorContent();\r\n\t\tif (this.origNote != newNote) {\r\n\t\t\t dojo.io.bind({ \r\n\t\t\t    url: new dojo.uri.Uri(djConfig.wikiRootPath, \"Tracker\/TrAttachNote\"),\r\n\t\t\t    method: \"post\",\r\n\t\t\t    content: {\r\n\t\t\t      topPage: g_topPage,\r\n\t\t\t      rowIndex: this.rowIndex,\r\n\t\t\t      colIndex: this.colIndex,\r\n\t\t\t      note: newNote\r\n\t\t\t    },\r\n\t\t\t    mimetype: \"text\/plain\", \r\n\t\t\t    load: function(type, resp, e) {\r\n\t\t\t      ;\r\n\t\t\t    }\r\n\t\t\t  });\t\t\r\n\r\n\t\t\tthis.handleSectionUpdate();\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\/\/don't pass true to the close() param, which would save back \r\n\t\t\/\/the richtext editor contents to the original element\r\n\t\tthis.editor.close(false);\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.colIndex":{"_":{"meta":{"summary":"","src":"\t\tif (!this.editor) { return; }\r\n\t\tvar newNote = this.editor.getEditorContent();\r\n\t\tif (this.origNote != newNote) {\r\n\t\t\t dojo.io.bind({ \r\n\t\t\t    url: new dojo.uri.Uri(djConfig.wikiRootPath, \"Tracker\/TrAttachNote\"),\r\n\t\t\t    method: \"post\",\r\n\t\t\t    content: {\r\n\t\t\t      topPage: g_topPage,\r\n\t\t\t      rowIndex: this.rowIndex,\r\n\t\t\t      colIndex: this.colIndex,\r\n\t\t\t      note: newNote\r\n\t\t\t    },\r\n\t\t\t    mimetype: \"text\/plain\", \r\n\t\t\t    load: function(type, resp, e) {\r\n\t\t\t      ;\r\n\t\t\t    }\r\n\t\t\t  });\t\t\r\n\r\n\t\t\tthis.handleSectionUpdate();\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\/\/don't pass true to the close() param, which would save back \r\n\t\t\/\/the richtext editor contents to the original element\r\n\t\tthis.editor.close(false);\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.containingDialog":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif (this.anim != null) {\r\n\t\t\tthis.anim.stop();\r\n\t\t}\r\n\t\tthis.hiding = false;\r\n\r\n\t\tif(e) {\r\n\t\t\tif(e.preventDefault) { e.preventDefault(); }\r\n\t\t\tif(e.stopPropagation) { e.stopPropagation(); }\r\n\t\t}\r\n\t\tthis.domNode.style.visibility = \"hidden\";\r\n\t\tthis.domNode.style.display = \"block\";\r\n\t\tthis.placeDialog();\r\n\t\tthis.domNode.style.opacity = this.startOpacity;\r\n\t\tthis.domNode.style.visibility = \"visible\";\r\n\r\n\r\n\t\t\/\/prepare the attach dialog\r\n\t\tvar dlgs = dojo.widget.manager.getWidgetsByType(\"JotTableUploadDialog\");\r\n\t\tvar dlg;\r\n\t\tif (dlgs.length > 0) {\r\n\t\t\tdlg = dlgs[0];\r\n\t\t\tdlg.topPage = this.topPage;\r\n\t\t\tdlg.rowIndex = this.rowIndex;\r\n\t\t\tdlg.colIndex = this.colIndex;\r\n\t\t} else {\r\n\t\t\t\/\/todo should JotTableUploadDialog just refer to its container for items like rowIndex?\r\n\t\t\tvar args = {triggerEl: this.btnAttach,\r\n\t\t\t\t\t\t\t\t\ttopPage: this.topPage, \r\n\t\t\t\t\t\t\t\t\trowIndex: this.rowIndex,\r\n\t\t\t\t\t\t\t\t\tcolIndex: this.colIndex,\r\n\t\t\t\t\t\t\t\t\tcontainingDialog: this}\r\n  \t\tdlg = dojo.widget.createWidget(\"JotTableUploadDialog\", args, this.container, \"last\");\r\n  \t}\r\n\r\n\t\tthis.blockShyness = false;\r\n\t\tdojo.event.connect(this.parentTable, \"processMouseMove\", this, \"checkShyness\"); \r\n\t\tdojo.event.connect(this.domNode, \"onmouseover\", this, \"pin\");\r\n\t\t\r\n  \tthis.cellX = this.parentTable.getSheetAbsoluteX() + dojo.html.getAbsoluteX(this.triggerCell);\r\n  \tthis.origMouseX = null;\r\n  \t\r\n  \t\/\/ load the attachments, notes, and other assets for this cell\r\n\t\tthis.refresh();\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.checkShyness":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif (this.blockShyness) { return; }\r\n\t\t\r\n\t\tclientX = e.clientX + this.parentTable.getSheetAbsoluteX();\r\n\t\t\r\n\t\tif (!this.origMouseX) {\r\n\t\t\tthis.origMouseX = clientX;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar delta = (this.dialogIsLeftOfCell) ? this.origMouseX - clientX : clientX - this.origMouseX;\r\n\t\tdelta *= 0.03;\r\n\t\tthis.domNode.style.opacity = Math.min(this.startOpacity + delta, 1.0);\r\n\t\t\r\n\t\tif (this.dialogIsLeftOfCell) {\r\n\t\t\tvar intersecting = clientX <= this.dialogRight;\r\n\t\t} else {\r\n\t\t\tvar intersecting = clientX >= this.dialogLeft;\r\n\t\t}\r\n\t\t\r\n\t\tif (delta > 0.3 || intersecting) {\r\n\t\t\tthis.pin();\r\n\t\t} else if (this.domNode.style.opacity < 0.3) {\r\n\t\t\tthis.hide();\r\n\t\t}\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.clearShyness":{"_":{"meta":{"summary":"","src":"\t\tdojo.event.disconnect(this.parentTable, \"processMouseMove\", this, \"checkShyness\");\r\n\t\tdojo.event.disconnect(this.domNode, \"onmouseover\", this, \"pin\");\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.pin":{"_":{"meta":{"summary":"","src":"\t\tthis.isPinned = true;\r\n\t\tthis.anim = dojo.fx.fadeIn(this.domNode, 200, \r\n\t\t\t\t\t\t\t\t\tdojo.lang.hitch(this, function() {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.anim = null;\r\n\t\t\t\t\t\t\t\t\t\t\tthis.clearShyness();\r\n\t\t\t\t\t\t\t\t\t\t}));\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.hide":{"_":{"meta":{"summary":"","src":"\t\tif (this.hiding) { return; }\r\n\t\tthis.hiding = true;\r\n\t\tthis.blockShyness = true;\r\n\r\n\t\tthis.saveNotes();\r\n\t\t\r\n\t\tthis.anim = null;\r\n\t\tthis.origMouseX = null;\r\n\t\tthis.isPinned = false;\r\n\/\/\t\tthis.domNode.style.display = \"none\";\r\n\t\tthis.domNode.style.visibility = \"hidden\";\r\n\t\t\r\n\t\tthis.blockShyness = false;\r\n\t\tthis.hiding = false;\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.setExtraDataIndicator":{"_":{"meta":{"summary":"","parameters":{"hasExtraData":{"type":""}},"src":"\t\tvar pt = this.parentTable;\r\n\t\tpt.setExtraDataIndicator(this.triggerCell, this.colIndex, this.rowIndex, hasExtraData);\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.placeDialog":{"_":{"meta":{"summary":"","src":"\t\tvar domNode = this.domNode;              \n\t\tvar cell = this.triggerCell;\r\n\r\n\t\tif (!cell || !this.parentTable) {\r\n\t\t\t; \/\/ TODO\r\n\t\t} else {\r\n\t\t\t\/\/ translate cell coords to parent window coords\r\n\t\t\tvar cellLeft = dojo.html.getAbsoluteX(cell) + this.parentTable.getSheetAbsoluteX();\r\n\t\t\tvar cellTop = dojo.html.getAbsoluteY(cell) + this.parentTable.getSheetAbsoluteY();\r\n\t\t\tif (!dojo.render.html.ie) {\r\n\t\t\t\tcellLeft -= this.parentTable.sheetFrame.contentDocument.documentElement.scrollLeft;\r\n\t\t\t\tcellTop -= this.parentTable.sheetFrame.contentDocument.documentElement.scrollTop;\r\n\t\t\t}\r\n\r\n\t\t\t\/****\r\n\t\t\t* horiz calcs\r\n\t\t\t*\/\r\n\t\t\tvar margin = 5;\r\n\t\t\tvar dialogWidth = domNode.offsetWidth;\r\n\t\t\tvar dialogFullWidth = margin + dialogWidth + margin;\r\n\r\n\t\t\t\/\/ assume couldn't place, leave it on the left even though that will obscure the cell\r\n\t\t\t\/\/ at least that will give us the maximum amount of visible dialog\r\n\t\t\tvar dialogLeft = margin;\r\n\t\t\tthis.dialogIsLeftOfCell = true;\r\n\t\t\t\r\n\t\t\t\/\/ can we place left?\r\n\t\t\tvar trialX = cellLeft - dialogFullWidth;\r\n\t\t\tif (trialX > 0) {\r\n\t\t\t\tdialogLeft = margin + trialX;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\/\/ can we place right?\r\n\t\t\tvar cellRight = cellLeft + cell.offsetWidth;\r\n\t\t\ttrialX = cellRight + dialogFullWidth;\r\n\r\n\t\t\tif (trialX < dojo.html.getViewportWidth()) {\r\n\t\t\t\tdialogLeft = cellRight + margin;\r\n\t\t\t\tthis.dialogIsLeftOfCell = false;\r\n\t\t\t}\r\n\r\n\t\t\tdomNode.style.left = dialogLeft + \"px\";\r\n\t\t\tthis.dialogLeft = dialogLeft;\r\n\t\t\tthis.dialogRight = this.dialogLeft + dialogWidth;\r\n\t\t\t\r\n\t\t\t\/****\r\n\t\t\t* vert calcs\r\n\t\t\t*\/\r\n\t\t\tvar dialogHeight = domNode.offsetHeight;\r\n\t\t\tvar cellBottom = cellTop + cell.offsetHeight;\r\n\r\n\t\t\t\/\/ assume we couldn't place, leave it on the top even though that leaves it cut off at the bottom \r\n\t\t\tdialogTop = cellTop;\r\n\r\n\t\t\t\/\/ can we orient against bottom\r\n\t\t\tvar trialY = cellBottom - dialogHeight;\r\n\t\t\tif (trialY > 0) {\r\n\t\t\t\tdialogTop = trialY;\r\n\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\/\/ can we orient against top\r\n\t\t\ttrialY = cellTop + dialogHeight;\r\n\t\t\tif (trialY < dojo.html.getViewportHeight()) {\r\n\t\t\t\tdialogTop = cellTop;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdomNode.style.top = dialogTop + \"px\";\r\n\t\t}\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.refresh":{"_":{"meta":{"summary":"","parameters":{"section":{"type":""}},"src":"\t\tdojo.dom.removeChildren(this.attachmentsList);\r\n\t\tthis.loadData();\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.loadData":{"_":{"meta":{"summary":"","src":"\t\tdojo.io.bind({ \r\n\t\t\turl: new dojo.uri.Uri(this.rootPath, \"TrCellDetailView\"),\r\n\t\t\tmethod: \"post\",\r\n\t\t\tcontent: {\r\n\t\t\t\ttopPage: this.topPage,\r\n\t\t\t\trowIndex: this.rowIndex,\r\n\t\t\t\tcolIndex: this.colIndex\r\n\t\t\t},\r\n\t\t\tmimetype: \"text\/plain\", \r\n\t\t\tload: dojo.lang.hitch(this, function(type, resp, e) {\r\n\t\t\t\tvar data = eval(resp);\r\n\t\t\t\t\/\/display note, if any\r\n\t\t\t\tif (data.comments && data.comments.length > 0) {\r\n\t\t\t\t\tthis.notesContent.innerHTML = data.comments[0];\r\n\t\t\t\t\tthis.origNote = data.comments[0];\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(dojo.lang.hitch(this,function(){\r\n\t\t\t\t\t\tif (this.isShowing()) {\r\n\t\t\t\t\t\t\tthis.editor = dojo.widget.createWidget(\"RichText\", {}, this.notesContent);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t  }), 1);\r\n\t\t\t\t\r\n\t\t\t\t\/\/display attachments, if any\r\n\t\t\t\tfor (var i=0; i<data.attachments.length; i++) {\r\n\t\t\t\t\tvar rAtt = data.attachments[i];\r\n\t\t\t\t\tvar tr = this.createAttachmentListRow(rAtt);\r\n\t\t\t\t\tthis.attachmentsList.appendChild(tr);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t});\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.url":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t  if (!confirm(\"Do you really want to delete this attachment?\")) { return; }\r\n\t  var tr = this.getParentByType(e.target, \"TR\");\r\n\t  var launchLink = tr.getElementsByTagName(\"a\")[0];\r\n\t  var fn = dojo.string.trim(launchLink.wikiPath);\r\n\t  dojo.io.bind({\r\n\t    url: new dojo.uri.Uri(djConfig.wikiRootPath, \"_\/cmd\/removePage\"),\r\n\t    method: \"post\",\r\n\t    content: { \r\n\t        path: \"\/\" + fn,\r\n\t        breakLock: true,\r\n\t        removeChildren: true\r\n\t    }, \r\n\t    mimetype: \"text\/plain\", \r\n\t    load: dojo.lang.hitch(this, function(type, data, evt){\r\n\t    \tdojo.dom.removeNode(tr);\r\n\t    \tthis.handleSectionUpdate();\r\n   \t\t})\r\n   \t});\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.method":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t  if (!confirm(\"Do you really want to delete this attachment?\")) { return; }\r\n\t  var tr = this.getParentByType(e.target, \"TR\");\r\n\t  var launchLink = tr.getElementsByTagName(\"a\")[0];\r\n\t  var fn = dojo.string.trim(launchLink.wikiPath);\r\n\t  dojo.io.bind({\r\n\t    url: new dojo.uri.Uri(djConfig.wikiRootPath, \"_\/cmd\/removePage\"),\r\n\t    method: \"post\",\r\n\t    content: { \r\n\t        path: \"\/\" + fn,\r\n\t        breakLock: true,\r\n\t        removeChildren: true\r\n\t    }, \r\n\t    mimetype: \"text\/plain\", \r\n\t    load: dojo.lang.hitch(this, function(type, data, evt){\r\n\t    \tdojo.dom.removeNode(tr);\r\n\t    \tthis.handleSectionUpdate();\r\n   \t\t})\r\n   \t});\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.content":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t  if (!confirm(\"Do you really want to delete this attachment?\")) { return; }\r\n\t  var tr = this.getParentByType(e.target, \"TR\");\r\n\t  var launchLink = tr.getElementsByTagName(\"a\")[0];\r\n\t  var fn = dojo.string.trim(launchLink.wikiPath);\r\n\t  dojo.io.bind({\r\n\t    url: new dojo.uri.Uri(djConfig.wikiRootPath, \"_\/cmd\/removePage\"),\r\n\t    method: \"post\",\r\n\t    content: { \r\n\t        path: \"\/\" + fn,\r\n\t        breakLock: true,\r\n\t        removeChildren: true\r\n\t    }, \r\n\t    mimetype: \"text\/plain\", \r\n\t    load: dojo.lang.hitch(this, function(type, data, evt){\r\n\t    \tdojo.dom.removeNode(tr);\r\n\t    \tthis.handleSectionUpdate();\r\n   \t\t})\r\n   \t});\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.mimetype":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t  if (!confirm(\"Do you really want to delete this attachment?\")) { return; }\r\n\t  var tr = this.getParentByType(e.target, \"TR\");\r\n\t  var launchLink = tr.getElementsByTagName(\"a\")[0];\r\n\t  var fn = dojo.string.trim(launchLink.wikiPath);\r\n\t  dojo.io.bind({\r\n\t    url: new dojo.uri.Uri(djConfig.wikiRootPath, \"_\/cmd\/removePage\"),\r\n\t    method: \"post\",\r\n\t    content: { \r\n\t        path: \"\/\" + fn,\r\n\t        breakLock: true,\r\n\t        removeChildren: true\r\n\t    }, \r\n\t    mimetype: \"text\/plain\", \r\n\t    load: dojo.lang.hitch(this, function(type, data, evt){\r\n\t    \tdojo.dom.removeNode(tr);\r\n\t    \tthis.handleSectionUpdate();\r\n   \t\t})\r\n   \t});\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.load":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t  if (!confirm(\"Do you really want to delete this attachment?\")) { return; }\r\n\t  var tr = this.getParentByType(e.target, \"TR\");\r\n\t  var launchLink = tr.getElementsByTagName(\"a\")[0];\r\n\t  var fn = dojo.string.trim(launchLink.wikiPath);\r\n\t  dojo.io.bind({\r\n\t    url: new dojo.uri.Uri(djConfig.wikiRootPath, \"_\/cmd\/removePage\"),\r\n\t    method: \"post\",\r\n\t    content: { \r\n\t        path: \"\/\" + fn,\r\n\t        breakLock: true,\r\n\t        removeChildren: true\r\n\t    }, \r\n\t    mimetype: \"text\/plain\", \r\n\t    load: dojo.lang.hitch(this, function(type, data, evt){\r\n\t    \tdojo.dom.removeNode(tr);\r\n\t    \tthis.handleSectionUpdate();\r\n   \t\t})\r\n   \t});\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.saveNotes":{"_":{"meta":{"summary":"","src":"\t\tif (!this.editor) { return; }\r\n\t\tvar newNote = this.editor.getEditorContent();\r\n\t\tif (this.origNote != newNote) {\r\n\t\t\t dojo.io.bind({ \r\n\t\t\t    url: new dojo.uri.Uri(djConfig.wikiRootPath, \"Tracker\/TrAttachNote\"),\r\n\t\t\t    method: \"post\",\r\n\t\t\t    content: {\r\n\t\t\t      topPage: g_topPage,\r\n\t\t\t      rowIndex: this.rowIndex,\r\n\t\t\t      colIndex: this.colIndex,\r\n\t\t\t      note: newNote\r\n\t\t\t    },\r\n\t\t\t    mimetype: \"text\/plain\", \r\n\t\t\t    load: function(type, resp, e) {\r\n\t\t\t      ;\r\n\t\t\t    }\r\n\t\t\t  });\t\t\r\n\r\n\t\t\tthis.handleSectionUpdate();\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\/\/don't pass true to the close() param, which would save back \r\n\t\t\/\/the richtext editor contents to the original element\r\n\t\tthis.editor.close(false);\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.note":{"_":{"meta":{"summary":"","src":"\t\tif (!this.editor) { return; }\r\n\t\tvar newNote = this.editor.getEditorContent();\r\n\t\tif (this.origNote != newNote) {\r\n\t\t\t dojo.io.bind({ \r\n\t\t\t    url: new dojo.uri.Uri(djConfig.wikiRootPath, \"Tracker\/TrAttachNote\"),\r\n\t\t\t    method: \"post\",\r\n\t\t\t    content: {\r\n\t\t\t      topPage: g_topPage,\r\n\t\t\t      rowIndex: this.rowIndex,\r\n\t\t\t      colIndex: this.colIndex,\r\n\t\t\t      note: newNote\r\n\t\t\t    },\r\n\t\t\t    mimetype: \"text\/plain\", \r\n\t\t\t    load: function(type, resp, e) {\r\n\t\t\t      ;\r\n\t\t\t    }\r\n\t\t\t  });\t\t\r\n\r\n\t\t\tthis.handleSectionUpdate();\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\/\/don't pass true to the close() param, which would save back \r\n\t\t\/\/the richtext editor contents to the original element\r\n\t\tthis.editor.close(false);\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.deleteAttachment":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t  if (!confirm(\"Do you really want to delete this attachment?\")) { return; }\r\n\t  var tr = this.getParentByType(e.target, \"TR\");\r\n\t  var launchLink = tr.getElementsByTagName(\"a\")[0];\r\n\t  var fn = dojo.string.trim(launchLink.wikiPath);\r\n\t  dojo.io.bind({\r\n\t    url: new dojo.uri.Uri(djConfig.wikiRootPath, \"_\/cmd\/removePage\"),\r\n\t    method: \"post\",\r\n\t    content: { \r\n\t        path: \"\/\" + fn,\r\n\t        breakLock: true,\r\n\t        removeChildren: true\r\n\t    }, \r\n\t    mimetype: \"text\/plain\", \r\n\t    load: dojo.lang.hitch(this, function(type, data, evt){\r\n\t    \tdojo.dom.removeNode(tr);\r\n\t    \tthis.handleSectionUpdate();\r\n   \t\t})\r\n   \t});\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.path":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t  if (!confirm(\"Do you really want to delete this attachment?\")) { return; }\r\n\t  var tr = this.getParentByType(e.target, \"TR\");\r\n\t  var launchLink = tr.getElementsByTagName(\"a\")[0];\r\n\t  var fn = dojo.string.trim(launchLink.wikiPath);\r\n\t  dojo.io.bind({\r\n\t    url: new dojo.uri.Uri(djConfig.wikiRootPath, \"_\/cmd\/removePage\"),\r\n\t    method: \"post\",\r\n\t    content: { \r\n\t        path: \"\/\" + fn,\r\n\t        breakLock: true,\r\n\t        removeChildren: true\r\n\t    }, \r\n\t    mimetype: \"text\/plain\", \r\n\t    load: dojo.lang.hitch(this, function(type, data, evt){\r\n\t    \tdojo.dom.removeNode(tr);\r\n\t    \tthis.handleSectionUpdate();\r\n   \t\t})\r\n   \t});\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.breakLock":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t  if (!confirm(\"Do you really want to delete this attachment?\")) { return; }\r\n\t  var tr = this.getParentByType(e.target, \"TR\");\r\n\t  var launchLink = tr.getElementsByTagName(\"a\")[0];\r\n\t  var fn = dojo.string.trim(launchLink.wikiPath);\r\n\t  dojo.io.bind({\r\n\t    url: new dojo.uri.Uri(djConfig.wikiRootPath, \"_\/cmd\/removePage\"),\r\n\t    method: \"post\",\r\n\t    content: { \r\n\t        path: \"\/\" + fn,\r\n\t        breakLock: true,\r\n\t        removeChildren: true\r\n\t    }, \r\n\t    mimetype: \"text\/plain\", \r\n\t    load: dojo.lang.hitch(this, function(type, data, evt){\r\n\t    \tdojo.dom.removeNode(tr);\r\n\t    \tthis.handleSectionUpdate();\r\n   \t\t})\r\n   \t});\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.removeChildren":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t  if (!confirm(\"Do you really want to delete this attachment?\")) { return; }\r\n\t  var tr = this.getParentByType(e.target, \"TR\");\r\n\t  var launchLink = tr.getElementsByTagName(\"a\")[0];\r\n\t  var fn = dojo.string.trim(launchLink.wikiPath);\r\n\t  dojo.io.bind({\r\n\t    url: new dojo.uri.Uri(djConfig.wikiRootPath, \"_\/cmd\/removePage\"),\r\n\t    method: \"post\",\r\n\t    content: { \r\n\t        path: \"\/\" + fn,\r\n\t        breakLock: true,\r\n\t        removeChildren: true\r\n\t    }, \r\n\t    mimetype: \"text\/plain\", \r\n\t    load: dojo.lang.hitch(this, function(type, data, evt){\r\n\t    \tdojo.dom.removeNode(tr);\r\n\t    \tthis.handleSectionUpdate();\r\n   \t\t})\r\n   \t});\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.handleSectionUpdate":{"_":{"meta":{"summary":"","src":"\t\tvar hasNote = false;\r\n\t\tif (this.editor) { \r\n\t\t\tvar note = this.editor.getEditorContent();\r\n\t\t\thasNote = (note != \"\" && note != \"<br>\");\r\n\t\t}\r\n\r\n\t\tvar hasFiles = true;\r\n\t  var rows = this.attachmentsList.getElementsByTagName(\"tr\");\r\n\t\tif (rows.length < 1) {\r\n\t\t\thasFiles = false;\r\n\t\t}\r\n\r\n\t\t\/\/alert(\"hasFiles: \" + hasFiles);\r\n\r\n\t\tthis.setExtraDataIndicator(hasNote || hasFiles);\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.createAttachmentListRow":{"_":{"meta":{"summary":"","parameters":{"rAtt":{"type":""}},"src":"\t\tvar tr = document.createElement(\"tr\");\r\n\t\ttr.className = \"attachment_row\"\r\n\t\t\r\n\t\t\/\/ <td style=\"padding-right:1px\"><img src=\"\/static\/base\/img\/tracker\/file_icon.gif\" width=\"10\" height=\"12\" border=\"0\" class=\"attach_icon\" alt=\"\" \/><\/td>          \r\n\t\tvar td = document.createElement(\"td\");\r\n\t\ttd.style.paddingRight = \"1px\";\r\n\t\tvar img = new Image();\r\n\t\timg.width = 10;\r\n\t\timg.height = 12;\r\n\t\timg.style.border = 0;\r\n\t\timg.className = \"attach_icon\";\r\n\t\timg.src = \"\/static\/base\/img\/tracker\/file_icon.gif\";\r\n\t\ttd.appendChild(img);\r\n\t\ttr.appendChild(td);\r\n\t\t\r\n\t\t\/\/<td nowrap=\"nowrap\"><a target=\"_new\" href=\"wiki:${rAtt\/path}\">${rAtt\/name}<\/a><\/td>\r\n\t\ttd = document.createElement(\"td\");\r\n\t\tvar a = document.createElement(\"a\");\r\n\t\ta.target = \"_new\";\r\n\t\ta.href = rAtt.path;\r\n\t\ta.wikiPath = rAtt.path;\r\n\t\ta.innerHTML = rAtt.displayName;\r\n\t\ttd.appendChild(a);\r\n\t\ttr.appendChild(td);\r\n\r\n\t\t\/\/<td nowrap=\"nowrap\">${size}<\/td>\r\n\t\ttd = document.createElement(\"td\");\r\n\t\ttd.nowrap = \"nowrap\";\r\n\t\ttd.innerHTML = rAtt.size;\r\n\t\ttr.appendChild(td);\r\n\t\t\r\n\t\t\/\/<td nowrap=\"nowrap\">${attachUser}<\/td>\r\n\t\ttd = document.createElement(\"td\");\r\n\t\ttd.innerHTML = rAtt.user;\r\n\t\ttr.appendChild(td);\r\n\t\t\r\n    \/\/<td nowrap=\"nowrap\">${rAtt\/time\/relative}<\/td>   \r\n\t\ttd = document.createElement(\"td\");\r\n\t\ttd.innerHTML = rAtt.time;\r\n\t\ttr.appendChild(td);\r\n        \r\n    \/*\r\n        <td nowrap=\"nowrap\" class=\"attachment_trashcan\" onclick=\"deleteAttachment(this)\">\r\n        \t<a href=\"javascript:;\" title=\"Delete this attachment\">\r\n            <img src=\"\/static\/base\/img\/tracker\/trashcan.gif\" valign=\"absmiddle\" border=\"0\" \/><\/a><\/td>\r\n        <\/tr>\r\n\t\t*\/\r\n\t\ttd = document.createElement(\"td\");\r\n\t\ttd.nowrap = \"nowrap\";\r\n\t\ttd.className = \"attachment_trashcan\";\r\n\t\tdojo.event.connect(td, \"onclick\", this, \"deleteAttachment\");\r\n\t\ta = document.createElement(\"a\");\r\n\t\ta.href = \"javascript:;\";\r\n\t\ta.title = \"Delete this attachment\";\r\n\t\timg = document.createElement(\"img\");\r\n\t\timg.src = \"\/static\/base\/img\/tracker\/trashcan.gif\";\r\n\t\timg.valign = \"absmiddle\";\r\n\t\timg.style.border = 0;\r\n\t\ta.appendChild(img);\r\n\t\ttd.appendChild(a);\r\n\t\ttr.appendChild(td);\r\n\t\t\r\n\t\treturn tr;\r","this":"jot.widget.JotTableCellDialog"}}},"jot.widget.JotTableCellDialog.getParentByType":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""},"type":{"type":""}},"src":"\t  while (node.nodeName != type) {\r\n\t    if (node.parentNode) {\r\n\t      node = node.parentNode;\r\n\t    } else {\r\n\t      return null;\r\n\t    }\r\n\t  }\r\n\t  return node;\r","this":"jot.widget.JotTableCellDialog"}}}}}},"dojo.widget.jot.JotTableEditor":{"meta":{"requires":{"common":["dojo.widget.*"]},"methods":{"jot.widget.HTMLJotTableEditor":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\n\tthis.widgetType = \"JotTableEditor\";\n\tthis.editForm = \"sys\/form\";\n\tthis.templateName = \"\/System\/Templates\/single_tab\/edit_no_chrome\";\n\tthis.parseFragment = null;\n\tthis.normalizedArgs = null;\n\tthis.editor = null;\n\tthis.editorForm = null;\n\tthis.useEditImg = false;\n\tthis.editorToggleImg = null;\n\tthis.editorRow  = null;\n\tthis.editorParentRow = null;\n\tthis.editorCell = null;\n\tthis.editClosedImg = \"\/static\/base\/img\/table-edit-closed.gif\";\n\tthis.editOpenImg = \"\/static\/base\/img\/table-edit-open.gif\";\n\tthis.wikiBasePath = \"\/\";\n\tif((dj_global[\"djConfig\"])&&(djConfig[\"wikiRootPath\"])){\n\t\tthis.wikiBasePath = djConfig.wikiRootPath;\n\t}\n\n\t\/\/ since this is an in-place widget, prevent clobbering of our table by\n\t\/\/ over-riding postInitialize, which normally handles widget replacement.\n\tthis.postInitialize = function(args, frag){ return; }\n\tthis.destroyRendering = function(){ return; }\n\tthis.cleanUp = function(){ return; }\n\n\tthis.buildRendering = function(args, frag){\n\t\tthis.parseFragment = frag;\n\t\tthis.normalizedArgs = args;\n\t\tthis.editColumn = 0;\n\t\tthis.domNode = frag[\"dojo:jottableeditor\"].nodeRef;\n\n\t\t\/\/ figure out which colum is the \"edit column\"\n\t\tvar ths = this.domNode.tHead.getElementsByTagName(\"th\");\n\t\tfor(var x=0; x<ths.length; x++){\n\t\t\tif(dojo.xml.htmlUtil.getAttr(ths[x], \"editColumn\")){\n\t\t\t\tthis.editColumn = x; break;\n\t\t\t}\n\t\t}\n\n\t\t\/\/ attach our event handlers\n\t\tvar trs = this.domNode.tBodies[0].getElementsByTagName(\"tr\");\n\t\tfor(var x=0; x<trs.length; x++){\n\t\t\tvar tds = trs[x].getElementsByTagName(\"td\");\n\t\t\tdojo.event.connect(tds[this.editColumn], \"onclick\", this, \"buildEditor\");\n\t\t}\n\t}\n\n\tthis.toggleEditor = function(evt){\n\t\tif(this.editor){\n\t\t\tthis.clobberEditor();\n\t\t}else{\n\t\t\tthis.buildEditor(evt||window.event);\n\t\t}\n\t}\n\n\tthis.toggleEditImg = function(){\n\t\t\/\/ change the image URL, if required\n\t\tif(!this.useEditImg){\n\t\t\treturn;\n\t\t}\n\n\t\tvar tds = this.editorParentRow.getElementsByTagName(\"td\");\n\t\tvar itd = tds[this.editColumn];\n\t\tvar imgs = itd.getElementsByTagName(\"img\");\n\t\tif(imgs.length){\n\t\t\tif(this.editorRow){\n\t\t\t\t\/\/ if we're hiding...\n\t\t\t\timgs[0].src = this.editClosedImg;\n\t\t\t}else{\n\t\t\t\t\/\/ or if we're showing...\n\t\t\t\timgs[0].src = this.editOpenImg;\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.buildEditor = function(evt){\n\t\tif(!evt){ evt = window.event; }\n\t\t\/\/ if(this.editor){ this.clobberEditor(); } \/\/ we only allow one at a time\n\t\t\/\/ otherwise, we want to build out a new editor widget\n\t\tvar hu = dojo.xml.htmlUtil;\n\t\tvar tgt = hu.getEventTarget(evt);\n\n\t\twhile((tgt)&&(tgt.nodeName.toLowerCase() != \"tr\")){\n\t\t\ttgt = tgt.parentNode;\n\t\t}\n\t\tif(!tgt){ return; }\n\t\tif(this.editor){\n\t\t\tif(this.editorParentRow == tgt){\n\t\t\t\t\/\/ click on the same row, close\n\t\t\t\tthis.clobberEditor();\n\t\t\t\treturn;\n\t\t\t}else{\n\t\t\t\tthis.clobberEditor();\n\t\t\t}\n\t\t}\n\t\tthis.editorParentRow = tgt;\n\n\t\tthis.toggleEditImg();\n\n\t\tvar nodePath = hu.getAttr(tgt, \"nodePath\");\n\t\tif(!nodePath){ return; }\n\n\t\t\/\/ build a new table row to hold the detailer\n\t\tthis.editorRow = tgt.cloneNode(true);\n\t\tthis.editorRow.style.display = \"none\";\n\t\ttgt.parentNode.insertBefore(this.editorRow, tgt.nextSibling);\n\t\tvar ncols = this.editorRow.getElementsByTagName(\"td\");\n\t\tfor(var x=0; x<ncols.length; x++){\n\t\t\tvar tc = ncols[x];\n\t\t\twhile(tc.firstChild){\n\t\t\t\ttc.removeChild(tc.firstChild);\n\t\t\t}\n\t\t\ttc.style.display = \"none\";\n\t\t}\n\t\tncols[0].appendChild(document.createElement(\"span\"));\n\t\tncols[0].colSpan = ncols.length;\n\t\tthis.editorCell = ncols[0];\n\t\tthis.editorCell.style.display = \"\";\n\t\tthis.editor = this.editorCell.firstChild;\n\n\t\tvar nodePath = this.wikiBasePath+nodePath;\n\t\tthis.getEditor(nodePath, this.editorCell);\n\t}\n\n\tthis.receiveEditorMarkup = function(editorMarkupString){\n\t\t\/\/ FIXME: we should be fading this in!\n\t\tthis.editorRow.style.display = \"\";\n\t\tthis.editor.innerHTML = editorMarkupString;\n\n\t\t\/\/ connect our event handlers to the buttons\n\t\tvar changesButton = document.getElementById(\"save_changes_button\");\n\t\tvar previewButton = document.getElementById(\"preview_changes_button\");\n\t\tvar cancelButton = document.getElementById(\"cancel_changes_button\");\n\t\tchangesButton.type = previewButton.type = cancelButton.type = \"button\";\n\t\tdojo.event.connect(changesButton, \"onclick\", this, \"submitEditor\");\n\t\tpreviewButton.parentNode.removeChild(previewButton);\n\t\tdojo.event.connect(cancelButton, \"onclick\", this, \"clobberEditor\");\n\t\tthis.editorForm = this.editorCell.getElementsByTagName(\"form\")[0];\n\t}\n\n\tthis.clobberEditor = function(){\n\t\tthis.toggleEditImg();\n\t\tif(!this.editor){ return; }\n\t\t\/\/ FIXME: need to strip handlers from nodes on IE!!!\n\t\tthis.editor.innerHTML = \"\";\n\t\tthis.editor = null;\n\t\tthis.editorCell = null;\n\t\tthis.editorRow.parentNode.removeChild(this.editorRow);\n\t\tthis.editorRow = null;\n\t\tthis.editorParentRow = null;\n\t\tthis.editorForm = null;\n\t}\n\n\tthis.submitEditor = function(){\n\t\t\/\/ FIXME: apparently the UI is keyed off of whatever button was\n\t\t\/\/ pressed, so in our version, we've gotta remove all the buttons that\n\t\t\/\/ weren't \"pressed\"\n\t\tvar cancelButton = document.getElementById(\"cancel_changes_button\");\n\t\tcancelButton.parentNode.removeChild(cancelButton);\n\n\t\tvar canBind = dojo.io.bind({\n\t\t\t\"formNode\": this.editorForm,\n\t\t\t\"load\": function(type, data, evt){\n\t\t\t\t\/\/ _this.destroy();\n\t\t\t\t_this.editorCell.removeChild(_this.editorCell.firstChild);\n\t\t\t\tvar tn = document.createElement(\"div\");\n\t\t\t\ttn.innerHTML = \"<em>...saved<\/em>\";\n\t\t\t\t_this.editorCell.insertBefore(tn, _this.editorCell.firstChild);\n\t\t\t\tsetTimeout(dojo.lang.hitch(this, this.clobberEditor), 500);\n\t\t\t\t\/\/ FIXME: should we start refreshing the current page here?\n\t\t\t},\n\t\t\t\"error\": function(type, errObj){\n\t\t\t\talert(errObj.message);\n\t\t\t}\n\t\t});\n\t\tvar tn = document.createElement(\"div\");\n\t\ttn.innerHTML = \"<em>saving...<\/em>\";\n\t\tthis.editorCell.insertBefore(tn, this.editorCell.firstChild);\n\t\t\/\/ this.domNode.innerHTML = \"submitting...\";\n\t}\n\n\tthis.getEditor = function(nodePath, containerNode){\n\t\t\/\/ FIXME: need to get data and populate the form here!\n\t\tvar _this = this;\n\t\tvar canBind = dojo.io.bind({\n\t\t\turl: nodePath+\"?edit=1&templateName=\"+this.templateName+\"&formName=\"+this.editForm,\n\t\t\tmimetype: \"text\/plain\",\n\t\t\tload: function(type, data, evt){\n\t\t\t\t_this.receiveEditorMarkup(data);\n\t\t\t},\n\t\t\terror: function(type, errObj){\n\t\t\t\talert(errObj.message);\n\t\t\t},\n\t\t\tbackButton: function(){\n\t\t\t\t_this.clobberEditor();\n\t\t\t}\n\t\t});\n\t}","this_variables":["widgetType","editForm","templateName","parseFragment","normalizedArgs","editor","editorForm","useEditImg","editorToggleImg","editorRow","editorParentRow","editorCell","editClosedImg","editOpenImg","wikiBasePath","postInitialize","destroyRendering","cleanUp","buildRendering","editColumn","domNode","toggleEditor","toggleEditImg","buildEditor","editorRow.style.display","editorCell.style.display","receiveEditorMarkup","editor.innerHTML","clobberEditor","submitEditor","getEditor"],"inherits":["dojo.widget.HtmlWidget"]}}},"jot.widget.HTMLJotTableEditor.postInitialize":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"                                             return;   "}}},"jot.widget.HTMLJotTableEditor.destroyRendering":{"_":{"meta":{"summary":"","src":"                                     return;   "}}},"jot.widget.HTMLJotTableEditor.cleanUp":{"_":{"meta":{"summary":"","src":"                            return;   "}}},"jot.widget.HTMLJotTableEditor.buildRendering":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tthis.parseFragment = frag;\n\t\tthis.normalizedArgs = args;\n\t\tthis.editColumn = 0;\n\t\tthis.domNode = frag[\"dojo:jottableeditor\"].nodeRef;\n\n\t\t\/\/ figure out which colum is the \"edit column\"\n\t\tvar ths = this.domNode.tHead.getElementsByTagName(\"th\");\n\t\tfor(var x=0; x<ths.length; x++){\n\t\t\tif(dojo.xml.htmlUtil.getAttr(ths[x], \"editColumn\")){\n\t\t\t\tthis.editColumn = x; break;\n\t\t\t}\n\t\t}\n\n\t\t\/\/ attach our event handlers\n\t\tvar trs = this.domNode.tBodies[0].getElementsByTagName(\"tr\");\n\t\tfor(var x=0; x<trs.length; x++){\n\t\t\tvar tds = trs[x].getElementsByTagName(\"td\");\n\t\t\tdojo.event.connect(tds[this.editColumn], \"onclick\", this, \"buildEditor\");\n\t\t}","this_variables":["parseFragment","normalizedArgs","editColumn","domNode"]}}},"jot.widget.HTMLJotTableEditor.toggleEditor":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tif(this.editor){\n\t\t\tthis.clobberEditor();\n\t\t}else{\n\t\t\tthis.buildEditor(evt||window.event);\n\t\t}"}}},"jot.widget.HTMLJotTableEditor.toggleEditImg":{"_":{"meta":{"summary":"","src":"\t\t\treturn;\n\t\t}\n\n\t\tvar tds = this.editorParentRow.getElementsByTagName(\"td\");\n\t\tvar itd = tds[this.editColumn];\n\t\tvar imgs = itd.getElementsByTagName(\"img\");\n\t\tif(imgs.length){\n\t\t\tif(this.editorRow){\n\t\t\t\t\/\/ if we're hiding...\n\t\t\t\timgs[0].src = this.editClosedImg;\n\t\t\t}else{\n\t\t\t\t\/\/ or if we're showing...\n\t\t\t\timgs[0].src = this.editOpenImg;\n\t\t\t}\n\t\t}"}}},"jot.widget.HTMLJotTableEditor.buildEditor":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tif(!evt){ evt = window.event; }\n\t\t\/\/ if(this.editor){ this.clobberEditor(); } \/\/ we only allow one at a time\n\t\t\/\/ otherwise, we want to build out a new editor widget\n\t\tvar hu = dojo.xml.htmlUtil;\n\t\tvar tgt = hu.getEventTarget(evt);\n\n\t\twhile((tgt)&&(tgt.nodeName.toLowerCase() != \"tr\")){\n\t\t\ttgt = tgt.parentNode;\n\t\t}\n\t\tif(!tgt){ return; }\n\t\tif(this.editor){\n\t\t\tif(this.editorParentRow == tgt){\n\t\t\t\t\/\/ click on the same row, close\n\t\t\t\tthis.clobberEditor();\n\t\t\t\treturn;\n\t\t\t}else{\n\t\t\t\tthis.clobberEditor();\n\t\t\t}\n\t\t}\n\t\tthis.editorParentRow = tgt;\n\n\t\tthis.toggleEditImg();\n\n\t\tvar nodePath = hu.getAttr(tgt, \"nodePath\");\n\t\tif(!nodePath){ return; }\n\n\t\t\/\/ build a new table row to hold the detailer\n\t\tthis.editorRow = tgt.cloneNode(true);\n\t\tthis.editorRow.style.display = \"none\";\n\t\ttgt.parentNode.insertBefore(this.editorRow, tgt.nextSibling);\n\t\tvar ncols = this.editorRow.getElementsByTagName(\"td\");\n\t\tfor(var x=0; x<ncols.length; x++){\n\t\t\tvar tc = ncols[x];\n\t\t\twhile(tc.firstChild){\n\t\t\t\ttc.removeChild(tc.firstChild);\n\t\t\t}\n\t\t\ttc.style.display = \"none\";\n\t\t}\n\t\tncols[0].appendChild(document.createElement(\"span\"));\n\t\tncols[0].colSpan = ncols.length;\n\t\tthis.editorCell = ncols[0];\n\t\tthis.editorCell.style.display = \"\";\n\t\tthis.editor = this.editorCell.firstChild;\n\n\t\tvar nodePath = this.wikiBasePath+nodePath;\n\t\tthis.getEditor(nodePath, this.editorCell);","this_variables":["editorParentRow","editorRow","editorRow.style.display","editorCell","editorCell.style.display","editor"]}}},"jot.widget.HTMLJotTableEditor.receiveEditorMarkup":{"_":{"meta":{"summary":"","parameters":{"editorMarkupString":{"type":""}},"src":"\t\tthis.editor.innerHTML = editorMarkupString;\n\n\t\t\/\/ connect our event handlers to the buttons\n\t\tvar changesButton = document.getElementById(\"save_changes_button\");\n\t\tvar previewButton = document.getElementById(\"preview_changes_button\");\n\t\tvar cancelButton = document.getElementById(\"cancel_changes_button\");\n\t\tchangesButton.type = previewButton.type = cancelButton.type = \"button\";\n\t\tdojo.event.connect(changesButton, \"onclick\", this, \"submitEditor\");\n\t\tpreviewButton.parentNode.removeChild(previewButton);\n\t\tdojo.event.connect(cancelButton, \"onclick\", this, \"clobberEditor\");\n\t\tthis.editorForm = this.editorCell.getElementsByTagName(\"form\")[0];","this_variables":["editorRow.style.display","editor.innerHTML","editorForm"]}}},"jot.widget.HTMLJotTableEditor.clobberEditor":{"_":{"meta":{"summary":"","src":"\t\tthis.toggleEditImg();\n\t\tif(!this.editor){ return; }\n\t\t\/\/ FIXME: need to strip handlers from nodes on IE!!!\n\t\tthis.editor.innerHTML = \"\";\n\t\tthis.editor = null;\n\t\tthis.editorCell = null;\n\t\tthis.editorRow.parentNode.removeChild(this.editorRow);\n\t\tthis.editorRow = null;\n\t\tthis.editorParentRow = null;\n\t\tthis.editorForm = null;","this_variables":["editor.innerHTML","editor","editorCell","editorRow","editorParentRow","editorForm"]}}},"jot.widget.HTMLJotTableEditor.submitEditor":{"_":{"meta":{"summary":"","src":"\t\tcancelButton.parentNode.removeChild(cancelButton);\n\n\t\tvar canBind = dojo.io.bind({\n\t\t\t\"formNode\": this.editorForm,\n\t\t\t\"load\": function(type, data, evt){\n\t\t\t\t\/\/ _this.destroy();\n\t\t\t\t_this.editorCell.removeChild(_this.editorCell.firstChild);\n\t\t\t\tvar tn = document.createElement(\"div\");\n\t\t\t\ttn.innerHTML = \"<em>...saved<\/em>\";\n\t\t\t\t_this.editorCell.insertBefore(tn, _this.editorCell.firstChild);\n\t\t\t\tsetTimeout(dojo.lang.hitch(this, this.clobberEditor), 500);\n\t\t\t\t\/\/ FIXME: should we start refreshing the current page here?\n\t\t\t},\n\t\t\t\"error\": function(type, errObj){\n\t\t\t\talert(errObj.message);\n\t\t\t}\n\t\t});\n\t\tvar tn = document.createElement(\"div\");\n\t\ttn.innerHTML = \"<em>saving...<\/em>\";\n\t\tthis.editorCell.insertBefore(tn, this.editorCell.firstChild);\n\t\t\/\/ this.domNode.innerHTML = \"submitting...\";"}}},"jot.widget.HTMLJotTableEditor.getEditor":{"_":{"meta":{"summary":"","parameters":{"nodePath":{"type":""},"containerNode":{"type":""}},"src":"\t\tvar canBind = dojo.io.bind({\n\t\t\turl: nodePath+\"?edit=1&templateName=\"+this.templateName+\"&formName=\"+this.editForm,\n\t\t\tmimetype: \"text\/plain\",\n\t\t\tload: function(type, data, evt){\n\t\t\t\t_this.receiveEditorMarkup(data);\n\t\t\t},\n\t\t\terror: function(type, errObj){\n\t\t\t\talert(errObj.message);\n\t\t\t},\n\t\t\tbackButton: function(){\n\t\t\t\t_this.clobberEditor();\n\t\t\t}\n\t\t});"}}}}}},"dojo.widget.jot.JotTableReorder":{"meta":{"requires":{"common":["dojo.io.*","dojo.event.*","dojo.widget.*","dojo.xml.htmlUtil","dojo.animation.*"]},"methods":{"jot.widget.HTMLJotTableReorder":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\n\tthis.widgetType = \"JotTableReorder\";\n\t\/\/ this.editForm = \"sys\/form\";\n\t\/\/ this.templateName = \"\/System\/Templates\/single_tab\/edit_no_chrome\";\n\tthis.rowTopOffset = 0;\n\tthis.orderProperty = \"\";\n\tthis.nodeLocationProp = \"pageLocation\";\n\tthis.rowStylesList = [];\n\tthis.isDragging = false;\n\tthis.selectedRows = [];\n\tthis.tmpRowContainer = null;\n\tthis.tmpTBody = null;\n\tthis.tBody = null;\n\n\t\/* \/\/ FIXME: do we care about this?\n\tthis.wikiBasePath = \"\/\";\n\tif((dj_global[\"djConfig\"])&&(djConfig[\"wikiRootPath\"])){\n\t\tthis.wikiBasePath = djConfig.wikiRootPath;\n\t}\n\t*\/\n\n\t\/\/ since this is an in-place widget, prevent clobbering of our table by\n\t\/\/ over-riding postInitialize, which normally handles widget replacement.\n\tthis.postInitialize = function(args, frag){ return; }\n\tthis.destroyRendering = function(){ return; }\n\tthis.cleanUp = function(){ return; }\n\n\tthis.buildRendering = function(args, frag){\n\t\tthis.tmpRowContainer = document.createElement(\"div\");\n\t\twith(this.tmpRowContainer.style){\n\t\t\tdisplay = \"none\";\n\t\t\tposition = \"absolute\";\n\t\t\tleft = \"0px\";\n\t\t\tright = \"0px\";\n\t\t}\n\t\tthis.domNode = frag[\"dojo:jottablereorder\"].nodeRef;\n\t\tthis.domNode.style.cursor = \"pointer\";\n\t\tthis.tBody = this.domNode.tBodies[0];\n\t\tdocument.body.appendChild(this.tmpRowContainer);\n\t\tthis.tmpRowContainer.appendChild(this.domNode.cloneNode(true));\n\t\tvar ttbl = this.tmpRowContainer.firstChild;\n\t\tvar ttbody = ttbl.tBodies[0];\n\t\twhile(ttbody.firstChild){\n\t\t\tttbody.removeChild(ttbody.firstChild);\n\t\t}\n\t\tthis.tmpTBody = ttbody;\n\t\tttbl.tHead.style.height = \"1px\";\n\t\tttbl.tHead.style.overflow = \"hidden\";\n\t\t\/\/ ttbl.tHead.style.position = \"relative\";\n\n\t\tthis.parseFragment = frag;\n\t\tthis.normalizedArgs = args;\n\n\t\t\/\/ connect the event handlers to detect movement\n\t\tdojo.event.connect(this.tBody, \"onmousedown\", this, \"dragInit\");\n\t\tdojo.event.connect(this.tBody, \"onmousemove\", this, \"dragMove\");\n\t\tdojo.event.connect(ttbl, \"onmousemove\", this, \"dragMove\");\n\t\tdojo.event.connect(this.tBody, \"onmouseup\", this, \"dragEnd\");\n\t\tdojo.event.connect(ttbl, \"onmouseup\", this, \"dragEnd\");\n\n\t\t\/\/alert(this.domNode.innerHTML);\n\t\t\/\/ alert(this.domNode.tBodies[0].rows);\n\t\t\/*\n\t\tvar rows = this.domNode.tBodies[0].rows;\n\t\tfor(var x=0; x<rows.length; x++){\n\t\t\t\/\/ dj_debug(rows[x].innerHTML);\n\t\t\tdj_debug(dojo.xml.htmlUtil.getAttr(rows[x], this.nodeLocationProp));\n\t\t}\n\t\tdj_debug(this.orderProperty);\n\t\t*\/\n\t\t\/\/ dj_debug(this.rowStylesList);\n\t}\n\n\tthis.getRowFromChild = function(node){\n\t\twhile(node.nodeName.toLowerCase() != \"tr\"){\n\t\t\tnode = node.parentNode;\n\t\t}\n\t\treturn node;\n\t}\n\n\tthis.dragInit = function(evt){\n\t\t\/\/ dj_debug(\"dragInit()\");\n\t\t\/\/ dj_debug(evt.target.nodeName);\n\t\tthis.isDragging = true;\n\t\tthis.domNode.style.cursor = \"n-resize\";\n\t\t\/\/ figure out the current absolute-left position of the table\n\t\tvar pn = this.domNode;\n\t\tvar cl = dojo.xml.htmlUtil.totalOffsetLeft(this.domNode);\n\n\n\t\tvar tmpRow = this.getRowFromChild(evt.target);\n\t\tthis.selectedRows.push(tmpRow);\n\t\tthis.tmpTBody.appendChild(tmpRow.cloneNode(true));\n\n\t\tvar ct = dojo.xml.htmlUtil.totalOffsetTop(tmpRow);\n\t\tthis.rowTopOffset = parseInt(evt.clientY) - ct;\n\t\t\/*\n\t\tfor(var x in evt){\n\t\t\tdj_debug(x+\" \"+evt[x]+\" \"+evt.clientY+\" \"+evt.screenX);\n\t\t}\n\t\t*\/\n\n\t\twith(this.tmpRowContainer.style){\n\t\t\tdisplay = \"\";\n\t\t\t\/\/ left = evt.clientX + 5 + \"px\";\n\t\t\tleft = cl + \"px\";\n\t\t\ttop = (parseInt(evt.clientY) - this.rowTopOffset)+ \"px\";\n\t\t\t\/\/ top = ct + \"px\";\n\t\t\twidth = dojo.xml.htmlUtil.getInnerWidth(tmpRow) + \"px\";\n\t\t\tborder = \"1px solid black\";\n\t\t\tbackgroundColor = \"white\";\n\t\t}\n\t\tdojo.xml.htmlUtil.setOpacity(this.tmpRowContainer, 0.5);\n\t\tdojo.xml.htmlUtil.setOpacity(tmpRow, 0.3);\n\t\t\/\/ dj_debug(this.selectedRows[0].innerHTML);\n\t\tevt.preventDefault();\n\t}\n\n\tthis.dragMove = function(evt){\n\t\tif(this.isDragging){\n\t\t\t\/\/ dj_debug(\"dragMove()\");\n\t\t\twith(this.tmpRowContainer.style){\n\t\t\t\t\/\/ left = evt.clientX + 5 + \"px\";\n\t\t\t\t\/\/ top = evt.clientY  + 5 + \"px\";\n\t\t\t\ttop = (parseInt(evt.clientY) - this.rowTopOffset)+ \"px\";\n\t\t\t}\n\t\t}\n\t\tevt.preventDefault();\n\t}\n\n\tthis.dragEnd = function(evt){\n\t\t\/\/ dj_debug(\"dragEnd()\");\n\t\t\/\/ find out what (if any) elligable row we're hovering over\n\t\tvar rows = this.tBody.rows;\n\t\tvar cr = 0;\n\t\tvar ri = 0;\n\t\tvar sr = rows[cr];\n\t\t\/\/ dj_debug(evt.clientY);\n\t\twhile(evt.clientY >=  ri){\n\t\t\tsr = rows[cr];\n\t\t\tif((sr)&&(sr[\"nodeName\"])){\n\t\t\t\t\/\/ dj_debug(sr);\n\t\t\t\tri = dojo.xml.htmlUtil.totalOffsetTop(sr)+dojo.xml.htmlUtil.getInnerHeight(sr);\n\t\t\t\t\/\/ dj_debug(ri);\n\t\t\t}\n\t\t\tcr++;\n\t\t\tif(cr > 10000){\n\t\t\t\tdj_debug(\"F'd in the ear!\");\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t\/\/ var tgtRow = this.getRowFromChild(evt.target);\n\t\tvar tgtRow = sr;\n\t\tvar tbody = tgtRow.parentNode;\n\t\twhile(tbody.lastChild.nodeName == \"#text\"){\n\t\t\ttbody.removeChild(tbody.lastChild);\n\t\t}\n\t\tif(tgtRow == tgtRow.parentNode.lastChild){\n\t\t\twhile(this.selectedRows.length){\n\t\t\t\tvar srr = this.selectedRows.pop()\n\t\t\t\ttgtRow.parentNode.appendChild(srr);\n\t\t\t\tthis.fadeInNode(srr);\n\t\t\t}\n\t\t}else{\n\t\t\twhile(this.selectedRows.length){\n\t\t\t\tvar srr = this.selectedRows.pop()\n\t\t\t\ttgtRow.parentNode.insertBefore(srr, tgtRow);\n\t\t\t\t\/\/ dojo.xml.htmlUtil.setOpacity(srr, 1);\n\t\t\t\tthis.fadeInNode(srr);\n\t\t\t}\n\t\t}\n\t\tthis.fadeInNode(tgtRow);\n\t\t\/\/ dj_debug(tgtRow.parentNode.lastChild.nodeName);\n\t\tthis.isDragging = false;\n\t\tthis.domNode.style.cursor = \"pointer\";\n\t\tthis.selectedRows = [];\n\t\twhile(this.tmpTBody.firstChild){\n\t\t\tthis.tmpTBody.removeChild(this.tmpTBody.firstChild);\n\t\t}\n\t\tthis.tmpRowContainer.style.display = \"none\";\n\t\tdojo.xml.htmlUtil.setOpacity(this.tmpRowContainer, 1);\n\t\tthis.fixRowStyles();\n\t}\n\n\tthis.fadeInNode = function(node){\n\t\tvar tanim  = new dojo.animation.Animation(new dojo.math.curves.Line([0],[1]), 300, 0);\n\t\ttanim.onAnimate = function(e){\n\t\t\tif(e.x){\n\t\t\t\t\/\/ dj_debug(e.x, \" \", dnoe.nodeName);\n\t\t\t\tdojo.xml.htmlUtil.setOpacity(node, e.x);\n\t\t\t}\n\t\t}\n\n\t\tvar seq  = new dojo.animation.AnimationSequence();\n\t\tseq.add(tanim);\n\t\tseq.playPause();\n\t}\n\t\n\tthis.fixRowStyles = function(){\n\t\tvar stylesIdx = 0;\n\t\tvar rows = this.domNode.tBodies[0].rows;\n\t\tfor(var x=0; x<rows.length; x++){\n\t\t\tvar cstyle = this.rowStylesList[stylesIdx];\n\t\t\tdojo.xml.htmlUtil.setClass(rows[x], cstyle);\n\t\t\tvar tds = rows[x].getElementsByTagName(\"td\");\n\t\t\tfor(var y=0; y<tds.length; y++){\n\t\t\t\tdojo.xml.htmlUtil.setClass(tds[y], cstyle);\n\t\t\t}\n\n\t\t\tstylesIdx++;\n\t\t\tif(stylesIdx>=this.rowStylesList.length){\n\t\t\t\tstylesIdx = 0;\n\t\t\t}\n\t\t}\n\t}","this_variables":["widgetType","rowTopOffset","orderProperty","nodeLocationProp","rowStylesList","isDragging","selectedRows","tmpRowContainer","tmpTBody","tBody","postInitialize","destroyRendering","cleanUp","buildRendering","domNode","domNode.style.cursor","parseFragment","normalizedArgs","getRowFromChild","dragInit","dragMove","dragEnd","tmpRowContainer.style.display","fadeInNode","fixRowStyles"],"inherits":["dojo.widget.HtmlWidget"]}}},"jot.widget.HTMLJotTableReorder.postInitialize":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"                                             return;   "}}},"jot.widget.HTMLJotTableReorder.destroyRendering":{"_":{"meta":{"summary":"","src":"                                     return;   "}}},"jot.widget.HTMLJotTableReorder.cleanUp":{"_":{"meta":{"summary":"","src":"                            return;   "}}},"jot.widget.HTMLJotTableReorder.buildRendering":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tthis.tmpRowContainer = document.createElement(\"div\");\n\t\twith(this.tmpRowContainer.style){\n\t\t\tdisplay = \"none\";\n\t\t\tposition = \"absolute\";\n\t\t\tleft = \"0px\";\n\t\t\tright = \"0px\";\n\t\t}\n\t\tthis.domNode = frag[\"dojo:jottablereorder\"].nodeRef;\n\t\tthis.domNode.style.cursor = \"pointer\";\n\t\tthis.tBody = this.domNode.tBodies[0];\n\t\tdocument.body.appendChild(this.tmpRowContainer);\n\t\tthis.tmpRowContainer.appendChild(this.domNode.cloneNode(true));\n\t\tvar ttbl = this.tmpRowContainer.firstChild;\n\t\tvar ttbody = ttbl.tBodies[0];\n\t\twhile(ttbody.firstChild){\n\t\t\tttbody.removeChild(ttbody.firstChild);\n\t\t}\n\t\tthis.tmpTBody = ttbody;\n\t\tttbl.tHead.style.height = \"1px\";\n\t\tttbl.tHead.style.overflow = \"hidden\";\n\t\t\/\/ ttbl.tHead.style.position = \"relative\";\n\n\t\tthis.parseFragment = frag;\n\t\tthis.normalizedArgs = args;\n\n\t\t\/\/ connect the event handlers to detect movement\n\t\tdojo.event.connect(this.tBody, \"onmousedown\", this, \"dragInit\");\n\t\tdojo.event.connect(this.tBody, \"onmousemove\", this, \"dragMove\");\n\t\tdojo.event.connect(ttbl, \"onmousemove\", this, \"dragMove\");\n\t\tdojo.event.connect(this.tBody, \"onmouseup\", this, \"dragEnd\");\n\t\tdojo.event.connect(ttbl, \"onmouseup\", this, \"dragEnd\");\n\n\t\t\/\/alert(this.domNode.innerHTML);\n\t\t\/\/ alert(this.domNode.tBodies[0].rows);\n\t\t\/*\n\t\tvar rows = this.domNode.tBodies[0].rows;\n\t\tfor(var x=0; x<rows.length; x++){\n\t\t\t\/\/ dj_debug(rows[x].innerHTML);\n\t\t\tdj_debug(dojo.xml.htmlUtil.getAttr(rows[x], this.nodeLocationProp));\n\t\t}\n\t\tdj_debug(this.orderProperty);\n\t\t*\/\n\t\t\/\/ dj_debug(this.rowStylesList);","this_variables":["tmpRowContainer","domNode","domNode.style.cursor","tBody","tmpTBody","parseFragment","normalizedArgs"]}}},"jot.widget.HTMLJotTableReorder.getRowFromChild":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\twhile(node.nodeName.toLowerCase() != \"tr\"){\n\t\t\tnode = node.parentNode;\n\t\t}\n\t\treturn node;"}}},"jot.widget.HTMLJotTableReorder.dragInit":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tthis.domNode.style.cursor = \"n-resize\";\n\t\t\/\/ figure out the current absolute-left position of the table\n\t\tvar pn = this.domNode;\n\t\tvar cl = dojo.xml.htmlUtil.totalOffsetLeft(this.domNode);\n\n\n\t\tvar tmpRow = this.getRowFromChild(evt.target);\n\t\tthis.selectedRows.push(tmpRow);\n\t\tthis.tmpTBody.appendChild(tmpRow.cloneNode(true));\n\n\t\tvar ct = dojo.xml.htmlUtil.totalOffsetTop(tmpRow);\n\t\tthis.rowTopOffset = parseInt(evt.clientY) - ct;\n\t\t\/*\n\t\tfor(var x in evt){\n\t\t\tdj_debug(x+\" \"+evt[x]+\" \"+evt.clientY+\" \"+evt.screenX);\n\t\t}\n\t\t*\/\n\n\t\twith(this.tmpRowContainer.style){\n\t\t\tdisplay = \"\";\n\t\t\t\/\/ left = evt.clientX + 5 + \"px\";\n\t\t\tleft = cl + \"px\";\n\t\t\ttop = (parseInt(evt.clientY) - this.rowTopOffset)+ \"px\";\n\t\t\t\/\/ top = ct + \"px\";\n\t\t\twidth = dojo.xml.htmlUtil.getInnerWidth(tmpRow) + \"px\";\n\t\t\tborder = \"1px solid black\";\n\t\t\tbackgroundColor = \"white\";\n\t\t}\n\t\tdojo.xml.htmlUtil.setOpacity(this.tmpRowContainer, 0.5);\n\t\tdojo.xml.htmlUtil.setOpacity(tmpRow, 0.3);\n\t\t\/\/ dj_debug(this.selectedRows[0].innerHTML);\n\t\tevt.preventDefault();","this_variables":["isDragging","domNode.style.cursor","rowTopOffset"]}}},"jot.widget.HTMLJotTableReorder.dragMove":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tif(this.isDragging){\n\t\t\t\/\/ dj_debug(\"dragMove()\");\n\t\t\twith(this.tmpRowContainer.style){\n\t\t\t\t\/\/ left = evt.clientX + 5 + \"px\";\n\t\t\t\t\/\/ top = evt.clientY  + 5 + \"px\";\n\t\t\t\ttop = (parseInt(evt.clientY) - this.rowTopOffset)+ \"px\";\n\t\t\t}\n\t\t}\n\t\tevt.preventDefault();"}}},"jot.widget.HTMLJotTableReorder.dragEnd":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tvar cr = 0;\n\t\tvar ri = 0;\n\t\tvar sr = rows[cr];\n\t\t\/\/ dj_debug(evt.clientY);\n\t\twhile(evt.clientY >=  ri){\n\t\t\tsr = rows[cr];\n\t\t\tif((sr)&&(sr[\"nodeName\"])){\n\t\t\t\t\/\/ dj_debug(sr);\n\t\t\t\tri = dojo.xml.htmlUtil.totalOffsetTop(sr)+dojo.xml.htmlUtil.getInnerHeight(sr);\n\t\t\t\t\/\/ dj_debug(ri);\n\t\t\t}\n\t\t\tcr++;\n\t\t\tif(cr > 10000){\n\t\t\t\tdj_debug(\"F'd in the ear!\");\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t\/\/ var tgtRow = this.getRowFromChild(evt.target);\n\t\tvar tgtRow = sr;\n\t\tvar tbody = tgtRow.parentNode;\n\t\twhile(tbody.lastChild.nodeName == \"#text\"){\n\t\t\ttbody.removeChild(tbody.lastChild);\n\t\t}\n\t\tif(tgtRow == tgtRow.parentNode.lastChild){\n\t\t\twhile(this.selectedRows.length){\n\t\t\t\tvar srr = this.selectedRows.pop()\n\t\t\t\ttgtRow.parentNode.appendChild(srr);\n\t\t\t\tthis.fadeInNode(srr);\n\t\t\t}\n\t\t}else{\n\t\t\twhile(this.selectedRows.length){\n\t\t\t\tvar srr = this.selectedRows.pop()\n\t\t\t\ttgtRow.parentNode.insertBefore(srr, tgtRow);\n\t\t\t\t\/\/ dojo.xml.htmlUtil.setOpacity(srr, 1);\n\t\t\t\tthis.fadeInNode(srr);\n\t\t\t}\n\t\t}\n\t\tthis.fadeInNode(tgtRow);\n\t\t\/\/ dj_debug(tgtRow.parentNode.lastChild.nodeName);\n\t\tthis.isDragging = false;\n\t\tthis.domNode.style.cursor = \"pointer\";\n\t\tthis.selectedRows = [];\n\t\twhile(this.tmpTBody.firstChild){\n\t\t\tthis.tmpTBody.removeChild(this.tmpTBody.firstChild);\n\t\t}\n\t\tthis.tmpRowContainer.style.display = \"none\";\n\t\tdojo.xml.htmlUtil.setOpacity(this.tmpRowContainer, 1);\n\t\tthis.fixRowStyles();","this_variables":["isDragging","domNode.style.cursor","selectedRows","tmpRowContainer.style.display"]}}},"jot.widget.HTMLJotTableReorder.fadeInNode":{"_":{"meta":{"summary":"","parameters":{"node":{"type":""}},"src":"\t\tvar tanim  = new dojo.animation.Animation(new dojo.math.curves.Line([0],[1]), 300, 0);\n\t\ttanim.onAnimate = function(e){\n\t\t\tif(e.x){\n\t\t\t\t\/\/ dj_debug(e.x, \" \", dnoe.nodeName);\n\t\t\t\tdojo.xml.htmlUtil.setOpacity(node, e.x);\n\t\t\t}\n\t\t}\n\n\t\tvar seq  = new dojo.animation.AnimationSequence();\n\t\tseq.add(tanim);\n\t\tseq.playPause();"}}},"jot.widget.HTMLJotTableReorder.fixRowStyles":{"_":{"meta":{"summary":"","src":"\t\tvar stylesIdx = 0;\n\t\tvar rows = this.domNode.tBodies[0].rows;\n\t\tfor(var x=0; x<rows.length; x++){\n\t\t\tvar cstyle = this.rowStylesList[stylesIdx];\n\t\t\tdojo.xml.htmlUtil.setClass(rows[x], cstyle);\n\t\t\tvar tds = rows[x].getElementsByTagName(\"td\");\n\t\t\tfor(var y=0; y<tds.length; y++){\n\t\t\t\tdojo.xml.htmlUtil.setClass(tds[y], cstyle);\n\t\t\t}\n\n\t\t\tstylesIdx++;\n\t\t\tif(stylesIdx>=this.rowStylesList.length){\n\t\t\t\tstylesIdx = 0;\n\t\t\t}\n\t\t}"}}}}}},"dojo.widget.jot.JotTableSortDialog":{"meta":{"requires":{"common":["dojo.lang.*","dojo.html.*","dojo.widget.*","dojo.graphics.*"]},"methods":{"jot.widget.JotTableSortDialog":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\t\n\tthis.widgetType = \"JotTableSortDialog\";\n\tthis.templatePath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/JotTableSortDialog.html\");\n\tthis.templateCssPath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/JotTableSortDialog.css\");","this_variables":["widgetType","templatePath","templateCssPath","domNode.style.display","bg","bg.className","radioHasHeaderRow.checked","radioNoHeaderRow.checked","bg.style.width","bg.style.height","bg.style.display","domNode.style.visibility","domNode.style.display","hasHeaderRow","hasHeaderRow","bg.style.display","bg.style.width","saveCalled","domNode.style.display","domNode.style.display"],"inherits":["dojo.widget.HtmlWidget"],"protovariables":{"parentTable":"","hasHeaderRow":"","columnNames":""}}}},"jot.widget.JotTableSortDialog.fillInTemplate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tdojo.html.setOpacity(this.domNode, 0);\n\t\tthis.domNode.style.display = \"none\";\n\n\t\tdojo.event.connect(this.btnOk, \"onclick\", this, \"save\");\n\t\t\/\/alert(\"connecting btnCancel\");\n\t\tdojo.event.connect(this.btnCancel, \"onclick\", this, \"hide\");\n\t\tdojo.event.connect(this.radioHasHeaderRow, \"onclick\", this, \"handleHasHeaderRow\");\n\t\tdojo.event.connect(this.radioNoHeaderRow, \"onclick\", this, \"handleNoHeaderRow\");\n\n\t\tdojo.event.connect(this.btnClose, \"onclick\", this, \"hide\");\n\t\tvar drag = new dojo.dnd.HtmlDragMoveSource(this.domNode);\n\t\tdrag.setDragHandle(this.headerbar);","this":"jot.widget.JotTableSortDialog"}}},"jot.widget.JotTableSortDialog.postCreate":{"_":{"meta":{"summary":"","src":"\t\twith(this.domNode.style) {\n\t\t\tposition = \"absolute\";\n\t\t\tzIndex = 999;\n\t\t\tdisplay = \"none\";\n\t\t\toverflow = \"visible\";\n\t\t}\n\n\t\t\/\/this.bgIframe = new dojo.html.BackgroundIframe(this.domNode);\n\n\t\tthis.bg = document.createElement(\"div\");\n\t\tthis.bg.className = \"dialogUnderlay\";\n\t\twith(this.bg.style) {\n\t\t\tposition = \"absolute\";\n\t\t\tleft = top = \"0px\";\n\t\t\tzIndex = 998;\n\t\t\tbackgroundColor = \"black\";\n\t\t\tdisplay = \"none\";\n\t\t}\n\t\tdojo.style.setOpacity(this.bg, 0.1);\n\t\tthis.radioHasHeaderRow.checked = this.hasHeaderRow;\n\t\tthis.radioNoHeaderRow.checked = !this.hasHeaderRow;\n\t\t\n\t\tdocument.body.appendChild(this.bg);","this":"jot.widget.JotTableSortDialog"}}},"jot.widget.JotTableSortDialog.sizeBackground":{"_":{"meta":{"summary":"","src":"\t\tvar h = document.documentElement.scrollHeight || document.body.scrollHeight;\n\t\tvar w = dojo.html.getViewportWidth();\n\t\tthis.bg.style.width = w + \"px\";\n\t\tthis.bg.style.height = h + \"px\";","this":"jot.widget.JotTableSortDialog"}}},"jot.widget.JotTableSortDialog.showBackground":{"_":{"meta":{"summary":"","src":"\t\tthis.sizeBackground();\n\t\tthis.bg.style.display = \"block\";","this":"jot.widget.JotTableSortDialog"}}},"jot.widget.JotTableSortDialog.show":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif (!this.parentTable) { return; }\n\n\t\tif(e) {\n\t\t\tif(e.preventDefault) { e.preventDefault(); }\n\t\t\tif(e.stopPropagation) { e.stopPropagation(); }\n\t\t}\n\t\tthis.showBackground();\n\t\t\n\t\tthis.fillColumnDropdowns(this.hasHeaderRow);\n\t\t\n\t\tthis.domNode.style.visibility = \"hidden\";\n\t\tthis.domNode.style.display = \"block\";\n\t\tthis.placeDialog();\n\t\tthis.domNode.style.visibility = \"visible\";\n\t\t\/\/this.updateBgIframe(true); \/\/TODO\n\t\tdojo.fx.fadeIn(this.domNode, 200,\n\t\t\tdojo.lang.hitch(this, function() {\n\t\t\t\t\/\/TODO \n\t\t\t\t\/\/this.fileInput.focus();\n\t\t\t})\n\t\t);","this":"jot.widget.JotTableSortDialog"}}},"jot.widget.JotTableSortDialog.handleHasHeaderRow":{"_":{"meta":{"summary":"","src":"\t\tthis.hasHeaderRow = true;\n\t\tthis.fillColumnDropdowns(true);","this":"jot.widget.JotTableSortDialog"}}},"jot.widget.JotTableSortDialog.handleNoHeaderRow":{"_":{"meta":{"summary":"","src":"\t\tthis.hasHeaderRow = false;\n\t\tthis.fillColumnDropdowns(false);\t\t","this":"jot.widget.JotTableSortDialog"}}},"jot.widget.JotTableSortDialog.getHeaderRowValues":{"_":{"meta":{"summary":"","src":"\t\tvar ret = [];\n\t\tfor (col = 0; col < 256; col++) {\n\t\t\tvar cell = this.parentTable.getCell(col, 0);\n\t\t\tif (!cell) { continue; }\n\t\t\tvar val = dojo.string.trim(cell.innerHTML);\n\t\t\tval = val.replace(\/^&nbsp;|[&nbsp;]*$\/gi, \"\");\n\t\t\tif (val == \"\") {\n\t\t\t\tval = \"(\" + this.columnNames[col] + \")\";\n\t\t\t}\n\t\t\tret.push(val);\n\t\t}\n\t\treturn ret;","this":"jot.widget.JotTableSortDialog"}}},"jot.widget.JotTableSortDialog.fillColumnDropdowns":{"_":{"meta":{"summary":"","parameters":{"hasHeaderRow":{"type":""}},"src":"\t\tif (hasHeaderRow) {\n\t\t\tvar dropdownItems = this.getHeaderRowValues();\n\t\t} else {\n\t\t\tvar dropdownItems = this.columnNames;\n\t\t}\n\t\t\n\t\tfor (var num=1; num<4; num++) {\n\t\t\tvar dropdown = this[\"dropdown\" + num];\n\t\t\tvar options = dropdown.getElementsByTagName(\"option\");\n\t\t\tvar alreadyInited = (options.length > 1);\n\n\/*\t\t\t\n\t\t\t\/\/<option value=\"(none)\">(none)<\/option>\n\t\t\tvar option = document.createElement(\"option\");\n\t\t\toption.value = \"(none)\";\n\t\t\toption.innerHTML = \"(none)\";\n\t\t\tdropdown.appendChild(option);\n*\/\n\t\t\t\n\t\t\tfor (var i=0; i<dropdownItems.length; i++) {\n\t\t\t\tvar item = dropdownItems[i];\n\t\t\t\toption = (alreadyInited) ? options[i + 1] : document.createElement(\"option\");\n\t\t\t\toption.value = i;\n\t\t\t\toption.innerHTML = item;\n\t\t\t\tif (!alreadyInited) {\n\t\t\t\t\tdropdown.appendChild(option);\n\t\t\t\t}\n\t\t\t}\n\t\t}","this":"jot.widget.JotTableSortDialog"}}},"jot.widget.JotTableSortDialog.placeDialog":{"_":{"meta":{"summary":"","src":"\t\tvar scroll_offset = dojo.html.getScrollOffset();\n\t\tvar viewport_size = dojo.html.getViewportSize();\n\n\t\t\/\/ find the size of the dialog\n\t\tvar w = dojo.style.getOuterWidth(this.container);\n\t\tvar h = dojo.style.getOuterHeight(this.container);\n\n\t\tvar x = scroll_offset[0] + (viewport_size[0] - w)\/2;\n\t\tvar y = scroll_offset[1] + (viewport_size[1] - h)\/2;\n\n\t\twith (this.domNode.style) {\n\t\t\tleft = x + \"px\";\n\t\t\ttop = y + \"px\";\n\t\t}","this":"jot.widget.JotTableSortDialog"}}},"jot.widget.JotTableSortDialog.hide":{"_":{"meta":{"summary":"","src":"\t\tdojo.fx.fadeHide(this.domNode, 200, dojo.lang.hitch(this, function() {\n\t\t\tthis.bg.style.display = \"none\";\n\t\t\tthis.bg.style.width = this.bg.style.height = \"1px\";\n\t\t}));\n\t\tthis.saveCalled = false;","this":"jot.widget.JotTableSortDialog"}}},"jot.widget.JotTableSortDialog.save":{"_":{"meta":{"summary":"","src":"\t\tvar sortColumns = [];\n\t\tfor (var num=1; num<4; num++) {\n\t\t\tvar dropdown = this[\"dropdown\" + num];\n\t\t\tvar selIndex = dropdown.selectedIndex;\n\t\t\tif (selIndex > 0) {\n\t\t\t\tvar options = dropdown.getElementsByTagName(\"option\");\n\t\t\t\tvar option = options[selIndex];\n\t\t\t\tvar colIndex = selIndex - 1;\n\t\t\t\t\/\/ check asc\/desc\n\t\t\t\tvar dropdownDesc = this[\"dropdown\" + num + \"-desc\"];\n\t\t\t\tif (dropdownDesc.checked) {\n\t\t\t\t\t\/\/convention is that desc cols are negative\n\t\t\t\t\tcolIndex *= -1;\n\t\t\t\t}\n\t\t\t\tsortColumns.push(colIndex);\n\t\t\t}\n\t\t}\n\t\tthis.parentTable.refresh({sortColumns: sortColumns, sortHasHeaderRow: this.hasHeaderRow}, true);\n\t\tthis.hide();","this":"jot.widget.JotTableSortDialog"}}},"jot.widget.JotTableSortDialog.sortColumns":{"_":{"meta":{"summary":"","src":"\t\tvar sortColumns = [];\n\t\tfor (var num=1; num<4; num++) {\n\t\t\tvar dropdown = this[\"dropdown\" + num];\n\t\t\tvar selIndex = dropdown.selectedIndex;\n\t\t\tif (selIndex > 0) {\n\t\t\t\tvar options = dropdown.getElementsByTagName(\"option\");\n\t\t\t\tvar option = options[selIndex];\n\t\t\t\tvar colIndex = selIndex - 1;\n\t\t\t\t\/\/ check asc\/desc\n\t\t\t\tvar dropdownDesc = this[\"dropdown\" + num + \"-desc\"];\n\t\t\t\tif (dropdownDesc.checked) {\n\t\t\t\t\t\/\/convention is that desc cols are negative\n\t\t\t\t\tcolIndex *= -1;\n\t\t\t\t}\n\t\t\t\tsortColumns.push(colIndex);\n\t\t\t}\n\t\t}\n\t\tthis.parentTable.refresh({sortColumns: sortColumns, sortHasHeaderRow: this.hasHeaderRow}, true);\n\t\tthis.hide();","this":"jot.widget.JotTableSortDialog"}}},"jot.widget.JotTableSortDialog.onScroll":{"_":{"meta":{"summary":"","src":"\t\tthis.placeDialog();\n\t\tthis.domNode.style.display = \"block\";","this":"jot.widget.JotTableSortDialog"}}},"jot.widget.JotTableSortDialog.onResized":{"_":{"meta":{"summary":"","src":"\t\tif (this.isVisible()){\n\t\t\tthis.sizeBackground();\n\t\t\tthis.placeDialog();\n\t\t\tthis.domNode.style.display = \"block\";\n\t\t}","this":"jot.widget.JotTableSortDialog"}}}}}},"dojo.widget.jot.JotTableUploadDialog":{"meta":{"requires":{"common":["dojo.widget.*","dojo.io.IframeIO"]},"methods":{"jot.widget.JotTableUploadDialog":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\r\n\t\r\n\tthis.templatePath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/JotTableUploadDialog.html\");\r\n\tthis.templateCssPath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/JotTableUploadDialog.css\");\r","this_variables":["templatePath","templateCssPath","domNode.style.display","uploadForm.action","uploadFormInputTopPage.value","uploadFormInputRowIndex.value","uploadFormInputColIndex.value","domNode.style.display","domNode.style.visibility","status.innerHTML","status.innerHTML","status.innerHTML","status.innerHTML"],"inherits":["dojo.widget.HtmlWidget"],"protovariables":{"widgetType":"","triggerEl":"","topPage":"","rowIndex":"","colIndex":"","containingDialog":""}}}},"jot.widget.JotTableUploadDialog.fillInTemplate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tdojo.html.setOpacity(this.domNode, 0);\r\n\t\tthis.domNode.style.display = \"none\";\r\n\t\tif (this.triggerEl) {\r\n\t\t\tdojo.event.connect(this.triggerEl, \"onclick\", this, \"show\");\r\n\t\t}\r\n\t\tvar action = new dojo.uri.Uri(djConfig.wikiRootPath, \"Tracker\/TrAttachFile\").toString();\r\n\t\tthis.uploadForm.action = action;\r","this":"jot.widget.JotTableUploadDialog"}}},"jot.widget.JotTableUploadDialog.postCreate":{"_":{"meta":{"summary":"","src":"\t\tdojo.event.connect(this.uploadBtn, \"onclick\", this, \"save\");\r\n\t\tdojo.event.connect(this.cancelLink, \"onclick\", this, \"hide\");\r\n\t\tthis.updateFormInputs();\r","this":"jot.widget.JotTableUploadDialog"}}},"jot.widget.JotTableUploadDialog.updateFormInputs":{"_":{"meta":{"summary":"","src":"\t\tthis.uploadFormInputTopPage.value = this.topPage;\r\n\t\tthis.uploadFormInputRowIndex.value = this.rowIndex;\r\n\t\tthis.uploadFormInputColIndex.value = this.colIndex;\r","this":"jot.widget.JotTableUploadDialog"}}},"jot.widget.JotTableUploadDialog.show":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tif(e) {\r\n\t\t\tif(e.preventDefault) { e.preventDefault(); }\r\n\t\t\tif(e.stopPropagation) { e.stopPropagation(); }\r\n\t\t}\r\n\t\tif (this.domNode.style.display == \"block\") { return; }\r\n\t\tthis.updateFormInputs();\r\n\t\tthis.domNode.style.visibility = \"hidden\";\r\n\t\tthis.domNode.style.display = \"block\";\r\n\t\tthis.placeDialog(this.triggerEl);\r\n\t\tthis.domNode.style.visibility = \"visible\";\r\n\t\t\/\/this.updateBgIframe(true); \/\/TODO\r\n\t\tdojo.fx.fadeIn(this.domNode, 200,\r\n\t\t\tdojo.lang.hitch(this, function() {\r\n\t\t\t\tthis.fileInput.focus();\r\n\t\t\t})\r\n\t\t);\r","this":"jot.widget.JotTableUploadDialog"}}},"jot.widget.JotTableUploadDialog.placeDialog":{"_":{"meta":{"summary":"","parameters":{"trigger":{"type":""}},"src":"\t\tvar domNode = this.domNode;\r\n\t\t\r\n\t\tif(!trigger || !this.containingDialog) {\r\n\t\t\tdomNode.style.left = domNode.style.top = \"0px\";\r\n\t\t} else {\r\n\t\t\tvar containerLeft = dojo.html.getAbsoluteX(this.containingDialog.container);\r\n\t\t\tvar containerTop = dojo.html.getAbsoluteY(this.containingDialog.container);\r\n\t\t\t\r\n\t\t\tdomNode.style.left = ((dojo.html.getAbsoluteX(trigger) + 5) - containerLeft) + \"px\";\r\n\t\t\tdomNode.style.top = ((dojo.html.getAbsoluteY(trigger) + trigger.offsetHeight + 5) - containerTop) + \"px\";\r\n\t\t}\r","this":"jot.widget.JotTableUploadDialog"}}},"jot.widget.JotTableUploadDialog.hide":{"_":{"meta":{"summary":"","src":"\t\tdojo.fx.fadeHide(this.domNode, 200, dojo.lang.hitch(this, function() {\r\n\t\t\t\/\/this.updateBgIframe(false);\r\n\t\t}));\r","this":"jot.widget.JotTableUploadDialog"}}},"jot.widget.JotTableUploadDialog.save":{"_":{"meta":{"summary":"","src":"\t\tthis.uploadAttachment(this.uploadForm);\r\n\t\tthis.hide();\r","this":"jot.widget.JotTableUploadDialog"}}},"jot.widget.JotTableUploadDialog.uploadAttachment":{"_":{"meta":{"summary":"","parameters":{"ulFormNode":{"type":""}},"src":"\t\tthis.status.innerHTML = \"Saving...\";\r\n\t\tdojo.io.bind({\r\n\t\t\tformNode: ulFormNode,\r\n\t\t\tmimetype: \"text\/plain\",\r\n\t\t\tload: dojo.lang.hitch(this, function(type, data, evt){\r\n\t\t\t\tthis.status.innerHTML = \"\";\r\n\t\t\t\tthis.hide();\r\n\t\t\t\tif (this.containingDialog) {\r\n\t\t\t\t\tthis.containingDialog.setExtraDataIndicator(true);\r\n\t\t\t\t\tthis.containingDialog.refresh();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t});\r","this":"jot.widget.JotTableUploadDialog"}}},"jot.widget.JotTableUploadDialog.formNode":{"_":{"meta":{"summary":"","parameters":{"ulFormNode":{"type":""}},"src":"\t\tthis.status.innerHTML = \"Saving...\";\r\n\t\tdojo.io.bind({\r\n\t\t\tformNode: ulFormNode,\r\n\t\t\tmimetype: \"text\/plain\",\r\n\t\t\tload: dojo.lang.hitch(this, function(type, data, evt){\r\n\t\t\t\tthis.status.innerHTML = \"\";\r\n\t\t\t\tthis.hide();\r\n\t\t\t\tif (this.containingDialog) {\r\n\t\t\t\t\tthis.containingDialog.setExtraDataIndicator(true);\r\n\t\t\t\t\tthis.containingDialog.refresh();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t});\r","this":"jot.widget.JotTableUploadDialog"}}},"jot.widget.JotTableUploadDialog.mimetype":{"_":{"meta":{"summary":"","parameters":{"ulFormNode":{"type":""}},"src":"\t\tthis.status.innerHTML = \"Saving...\";\r\n\t\tdojo.io.bind({\r\n\t\t\tformNode: ulFormNode,\r\n\t\t\tmimetype: \"text\/plain\",\r\n\t\t\tload: dojo.lang.hitch(this, function(type, data, evt){\r\n\t\t\t\tthis.status.innerHTML = \"\";\r\n\t\t\t\tthis.hide();\r\n\t\t\t\tif (this.containingDialog) {\r\n\t\t\t\t\tthis.containingDialog.setExtraDataIndicator(true);\r\n\t\t\t\t\tthis.containingDialog.refresh();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t});\r","this":"jot.widget.JotTableUploadDialog"}}},"jot.widget.JotTableUploadDialog.load":{"_":{"meta":{"summary":"","parameters":{"ulFormNode":{"type":""}},"src":"\t\tthis.status.innerHTML = \"Saving...\";\r\n\t\tdojo.io.bind({\r\n\t\t\tformNode: ulFormNode,\r\n\t\t\tmimetype: \"text\/plain\",\r\n\t\t\tload: dojo.lang.hitch(this, function(type, data, evt){\r\n\t\t\t\tthis.status.innerHTML = \"\";\r\n\t\t\t\tthis.hide();\r\n\t\t\t\tif (this.containingDialog) {\r\n\t\t\t\t\tthis.containingDialog.setExtraDataIndicator(true);\r\n\t\t\t\t\tthis.containingDialog.refresh();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t});\r","this":"jot.widget.JotTableUploadDialog"}}},"jot.widget.JotTableUploadDialog.dummy":{"_":{"meta":{"summary":"","src":"","this":"jot.widget.JotTableUploadDialog"}}}}}},"dojo.widget.jot.JotTagSelector":{"meta":{"requires":{"common":["dojo.widget.*","dojo.string.*","dojo.widget.ComboBox","dojo.widget.html.ComboBox"]},"methods":{"jot.widget.HTMLJotTagSelector":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\n\tthis.templatePath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/JotTagSelector.html\");\n\t\/\/ this.templateCSSPath = \"src\/webui\/widgets\/jot\/templates\/JotTagSelector.css\";\n\n\t\/\/ widget properties\n\tthis.widgetType = \"JotTagSelector\";\n\tthis.isContainer = true;\n\tthis.comboBox = null;\n\tthis.comboBoxSize = 10;\n\tthis.comboBoxNode = null;\n\tthis.itemBaseNode = null;\n\tthis.inputContainerNode = null;\n\tthis.dropDownDataUri = \"\";\n\tthis.dropDownOptions = \"\";\n\tthis.allowNewTags = true;\n\tthis.selectedTags = [];\n\n\tthis.getDropDownData = function(uri){\n\t\tvar _this = this;\n\t\tdojo.io.bind({\n\t\t\turl: uri||this.dropDownDataUri,\n\t\t\tmimetype: \"text\/javascript\",\n\t\t\tloaded: function(type, data, e){\n\t\t\t\t_this.setDropDownData(data);\n\t\t\t}\n\t\t});\n\t}\n\n\tthis.setDropDownData = function(data){\n\t\tthis.comboBox.dataProvider.setData(data);\n\t}\n\n\tthis.reset = function(){\n\t\tfor(var x=0; x<this.selectedTags.length; x++){\n\t\t\tif(this.selectedTags[x]){\n\t\t\t\tthis.removeTag(this.selectedTags[x]);\n\t\t\t}\n\t\t}\n\t\tthis.selectedTags = [];\n\t\tthis.destroyChildrenOfType(\"JotTagSelectorItem\");\n\t\tthis.tagsSet(this.selectedTags);\n\t}\n\n\tthis.removeTag = function(tag){\n\t\tthis.selectedTags = this.selectedTags.slice(dojo.lang.find(this.selectedTags, tag), 1);\n\t\tthis.tagsSet(this.selectedTags);\n\t}\n\n\tthis.addSelectedTag = function(tag){\n\t\tvar ts = document.createElement(\"span\");\n\t\tthis.containerNode.appendChild(ts);\n\t\tvar newItem = dojo.widget.fromScript(ts,\n\t\t\t\"JotTagSelectorItem\", {\n\t\t\t\tlabel: tag\n\t\t\t}, true)[0];\n\t\tthis.addChild(newItem);\n\t\tthis.selectedTags.push(tag);\n\t\tthis.tagsSet(this.selectedTags);\n\t}\n\n\tthis.tagsSet = function(){} \/\/ signal for listeners to connect to\n\n\tthis.addCurrentSelection = function(){\n\t\tvar val = (this.allowNewTags) ?  this.comboBox.textInputNode.value : this.comboBox.selectedResult[0];\n\t\tif(!dojo.lang.inArray(this.selectedTags, val)){\n\t\t\tthis.addSelectedTag(val);\n\t\t\tthis.comboBox.textInputNode.value = \"\";\n\t\t}\n\t}\n\n\tthis.fillInTemplate = function(){\n\t\tthis.comboBox = dojo.widget.fromScript(this.comboBoxNode, \"ComboBox\", {}, true)[0];\n\t\tthis.comboBox.textInputNode.size = this.comboBoxSize;\n\t\tthis.comboBox.cbTableNode.style.border = \"0px\";\n\t\tdojo.event.connect(this.comboBox, \"setSelectedValue\", this, \"addCurrentSelection\");\n\t}","this_variables":["templatePath","widgetType","isContainer","comboBox","comboBoxSize","comboBoxNode","itemBaseNode","inputContainerNode","dropDownDataUri","dropDownOptions","allowNewTags","selectedTags","getDropDownData","setDropDownData","reset","removeTag","addSelectedTag","tagsSet","addCurrentSelection","comboBox.textInputNode.value","fillInTemplate","comboBox.textInputNode.size","comboBox.cbTableNode.style.border"],"inherits":["dojo.widget.HtmlWidget"]}}},"jot.widget.HTMLJotTagSelector.getDropDownData":{"_":{"meta":{"summary":"","parameters":{"uri":{"type":""}},"src":"\t\tvar _this = this;\n\t\tdojo.io.bind({\n\t\t\turl: uri||this.dropDownDataUri,\n\t\t\tmimetype: \"text\/javascript\",\n\t\t\tloaded: function(type, data, e){\n\t\t\t\t_this.setDropDownData(data);\n\t\t\t}\n\t\t});"}}},"jot.widget.HTMLJotTagSelector.setDropDownData":{"_":{"meta":{"summary":"","parameters":{"data":{"type":""}},"src":"\t\tthis.comboBox.dataProvider.setData(data);"}}},"jot.widget.HTMLJotTagSelector.reset":{"_":{"meta":{"summary":"","src":"\t\tfor(var x=0; x<this.selectedTags.length; x++){\n\t\t\tif(this.selectedTags[x]){\n\t\t\t\tthis.removeTag(this.selectedTags[x]);\n\t\t\t}\n\t\t}\n\t\tthis.selectedTags = [];\n\t\tthis.destroyChildrenOfType(\"JotTagSelectorItem\");\n\t\tthis.tagsSet(this.selectedTags);","this_variables":["selectedTags"]}}},"jot.widget.HTMLJotTagSelector.removeTag":{"_":{"meta":{"summary":"","parameters":{"tag":{"type":""}},"src":"\t\tthis.selectedTags = this.selectedTags.slice(dojo.lang.find(this.selectedTags, tag), 1);\n\t\tthis.tagsSet(this.selectedTags);","this_variables":["selectedTags"]}}},"jot.widget.HTMLJotTagSelector.addSelectedTag":{"_":{"meta":{"summary":"","parameters":{"tag":{"type":""}},"src":"\t\tvar ts = document.createElement(\"span\");\n\t\tthis.containerNode.appendChild(ts);\n\t\tvar newItem = dojo.widget.fromScript(ts,\n\t\t\t\"JotTagSelectorItem\", {\n\t\t\t\tlabel: tag\n\t\t\t}, true)[0];\n\t\tthis.addChild(newItem);\n\t\tthis.selectedTags.push(tag);\n\t\tthis.tagsSet(this.selectedTags);"}}},"jot.widget.HTMLJotTagSelector.tagsSet":{"_":{"meta":{"summary":"","src":""}}},"jot.widget.HTMLJotTagSelector.addCurrentSelection":{"_":{"meta":{"summary":"","src":"\t\tvar val = (this.allowNewTags) ?  this.comboBox.textInputNode.value : this.comboBox.selectedResult[0];\n\t\tif(!dojo.lang.inArray(this.selectedTags, val)){\n\t\t\tthis.addSelectedTag(val);\n\t\t\tthis.comboBox.textInputNode.value = \"\";\n\t\t}","this_variables":["comboBox.textInputNode.value"]}}},"jot.widget.HTMLJotTagSelector.fillInTemplate":{"_":{"meta":{"summary":"","src":"\t\tthis.comboBox = dojo.widget.fromScript(this.comboBoxNode, \"ComboBox\", {}, true)[0];\n\t\tthis.comboBox.textInputNode.size = this.comboBoxSize;\n\t\tthis.comboBox.cbTableNode.style.border = \"0px\";\n\t\tdojo.event.connect(this.comboBox, \"setSelectedValue\", this, \"addCurrentSelection\");","this_variables":["comboBox","comboBox.textInputNode.size","comboBox.cbTableNode.style.border"]}}},"jot.widget.HTMLJotTagSelectorItem":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\n\t\/\/ widget properties\n\tthis.templatePath = dojo.uri.dojoUri(\"src\/widget\/jot\/templates\/JotTagSelectorItem.html\");\n\tthis.widgetType = \"JotTagSelectorItem\";\n\tthis.isContainer = false;\n\tthis.clobberIcon = null;\n\tthis.itemLabelNode = null;\n\tthis.label = \"\";\n\n\tthis.showClobberIcon = function(){\n\t\tthis.clobberIcon.style.display = \"\";\n\t}\n\n\tthis.hideClobberIcon = function(){\n\t\tthis.clobberIcon.style.display = \"none\";\n\t}\n\n\tthis.clobberThis = function(){\n\t\tthis.parent.removeTag(this.label);\n\t\tthis.destroy();\n\t}\n\n\tthis.fillInTemplate = function(){\n\t\tthis.itemLabelNode.innerHTML = this.label;\n\t}","this_variables":["templatePath","widgetType","isContainer","clobberIcon","itemLabelNode","label","showClobberIcon","clobberIcon.style.display","hideClobberIcon","clobberThis","fillInTemplate","itemLabelNode.innerHTML"],"inherits":["dojo.widget.HtmlWidget"]}}},"jot.widget.HTMLJotTagSelectorItem.showClobberIcon":{"_":{"meta":{"summary":"","src":"\t\tthis.clobberIcon.style.display = \"\";","this_variables":["clobberIcon.style.display"]}}},"jot.widget.HTMLJotTagSelectorItem.hideClobberIcon":{"_":{"meta":{"summary":"","src":"\t\tthis.clobberIcon.style.display = \"none\";","this_variables":["clobberIcon.style.display"]}}},"jot.widget.HTMLJotTagSelectorItem.clobberThis":{"_":{"meta":{"summary":"","src":"\t\tthis.parent.removeTag(this.label);\n\t\tthis.destroy();"}}},"jot.widget.HTMLJotTagSelectorItem.fillInTemplate":{"_":{"meta":{"summary":"","src":"\t\tthis.itemLabelNode.innerHTML = this.label;","this_variables":["itemLabelNode.innerHTML"]}}}}}},"dojo.widget.jot.JotToDoList":{"meta":{"requires":{"common":["dojo.widget.DomWidget","dojo.graphics.*"]},"methods":{"jot.widget.HTMLJotToDoList":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\n\t\/\/dojo.webui.DragSource.call(this);\n\t\/\/dojo.webui.DropTarget.call(this);\n\tthis.acceptedTypes = [\"JotToDoItem\"];\n\n\tthis.templatePath = dojo.uri.dojoUri(\"..\/jot\/widget\/templates\/JotToDoList.html\");\n\tthis.templateCssPath = dojo.uri.dojoUri(\"..\/jot\/widget\/templates\/JotToDoList.css\");\n\n\tthis.widgetType = \"JotToDoList\";\n\tthis.dataUrl = \"\";\n\tthis.isContainer = true;\n\tthis.entryContainerNode = null;\n\tthis.doneContainerNode = null;\n\tthis.newItemTextNode = null;\n\n\tthis.fillInTemplate = function(){\n\t}\n\n\tthis.setSelected = function(evt){\n\t\tvar tgt = dojo.widget.manager.getWidgetFromEvent(evt);\n\t\tif((tgt !== this)&&(dojo.alg.inArray(this.acceptedTypes,  tgt.widgetType))){\n\t\t\tthis.selection.add(tgt, tgt.widgetType);\n\t\t}\n\t}\n\n\tthis.getDragIcon = function(){\n\t\t\/*\n\t\tvar tdi = document.createElement(\"img\");\n\t\ttdi.src = dojo.hostenv.getBaseScriptUri() + \"src\/webui\/widgets\/jot\/templates\/JotToDoList.gif\";\n\t\t*\/\n\t\tif(this.selection.selected[0]){\n\t\t\tvar node = this.selection.selected[0][0].domNode;\n\t\t\tvar ts = node.cloneNode(true);\n\t\t\tts.setAttribute(\"originalPosition\", dojo.xml.htmlUtil.getAbsoluteX(node) +\n\t\t\t\t\",\" + dojo.xml.htmlUtil.getAbsoluteY(node));\n\t\t\treturn ts;\n\t\t}\n\t}\n\n\tthis.startDrag = function(){\n\t\tdojo.xml.htmlUtil.disableSelect();\n\t}\n\n\tthis.endDrag = function(){\n\t\tdojo.xml.htmlUtil.enableSelect();\n\t}\n\n\tthis.dragEnter = function(){\n\t\tthis.domNode.style.border = \"3px solid black\";\n\t}\n\n\tthis.dragLeave = function(){\n\t\tthis.domNode.style.border = \"\";\n\t}\n\n\tthis.getDropPlacement = function(){\n\t\t\/\/ var xpos = dojo.webui.htmlDragAndDropManager.curr[0];\n\t\tvar _hu = dojo.xml.htmlUtil;\n\t\tvar _du = dojo.xml.domUtil;\n\t\t\/\/var ypos = dojo.webui.htmlDragAndDropManager.curr.absy;\n\t\tfor(var x=0; x<this.children.length; x++){\n\t\t\tvar tmpNode = this.children[x].domNode;\n\t\t\tvar cy = _hu.getAbsoluteY(tmpNode);\n\t\t\tvar ch = _hu.getInnerHeight(tmpNode);\n\t\t\tif((ypos>=cy)&&(ypos<=(cy+ch))){ \/\/ lets handle it if we can\n\t\t\t\tvar posStr = \"before\";\n\t\t\t\tif(ypos>=(cy+(ch\/2))){\n\t\t\t\t\t\/\/ insert it ahead of the current child\n\t\t\t\t\tposStr = \"after\";\n\t\t\t\t}\n\t\t\t\tvar ret = [posStr, tmpNode, this.children[x]];\n\t\t\t\tret.location = posStr;\n\t\t\t\tret.node = tmpNode;\n\t\t\t\tret.widget = ret[2];\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tvar _lpos = [];\n\tvar _handling = false;\n\tvar _nr = \"dragHandleNode\";\n\tthis.handleDrag = function(dragSource){\n\t\tif(_handling){ \n\t\t\tdj_debug(\"not done...\");\n\t\t\treturn; \n\t\t}\n\t\t_handling = true;\n\t\tvar pos = this.getDropPlacement();\n\t\twhile(_lpos.length){\n\t\t\tvar tlpos = _lpos.pop();\n\t\t\twith(tlpos.widget[_nr].style){\n\t\t\t\tpaddingTop = paddingBottom = \"\";\n\t\t\t}\n\t\t}\n\t\tif(pos){\n\t\t\twith(pos.widget[_nr].style){\n\t\t\t\t\/*\n\t\t\t\tif(pos.location == \"before\"){\n\t\t\t\t\tpaddingTop = \"20px\";\n\t\t\t\t\tpaddingBottom = \"\";\n\t\t\t\t}else{\n\t\t\t\t\tpaddingBottom = \"20px\";\n\t\t\t\t\tpaddingTop = \"\";\n\t\t\t\t}\n\t\t\t\t*\/\n\t\t\t}\n\t\t\t_lpos.push(pos);\n\t\t}\n\t\t_handling = false;\n\t\treturn true;\n\t}\n\n\tthis.handleDrop = function(dragSource, evt){\n\t\tvar pos = this.getDropPlacement();\n\t\t\/\/ dj_debug(pos);\n\t\tvar _sel = dragSource.selection.selected;\n\t\tfor(var y=_sel.length-1; y>=0; y--){\n\t\t\tvar tn = _sel[y][0].domNode;\n\t\t\tdojo.xml.htmlUtil.setOpacity(tn, 0);\n\t\t\tthis.observeReOrder(_sel[y], pos.location, pos.node);\n\t\t\tthis.addChild(_sel[y], null, pos.location, pos.node);\n\t\t\tdojo.graphics.htmlEffects.fadeIn(tn, 500, function(){});\n\t\t}\n\t\twhile(_lpos.length){\n\t\t\tvar tlpos = _lpos.pop();\n\t\t\twith(tlpos.widget[_nr].style){\n\t\t\t\t\/\/ paddingTop = paddingBottom = \"\";\n\t\t\t}\n\t\t}\n\t\tdojo.xml.htmlUtil._clobberSelection();\n\t\treturn true;\n\t}\n\n\tthis.buildNewItem = function(){\n\t\tdj_debug(this.newItemTextNode.value);\n\t\tthis.newItemTextNode.value = \"\";\n\t\tthis.newItemTextNode.focus();\n\t\treturn false;\n\t}\n\n\tthis.observeReOrder = function(component, location, node){\n\t\t\/\/ FIXME: we need to communicate the new order properties to the\n\t\t\/\/ server here\n\t}\n\n\tthis.moveToDone = function(childItem){\n\t\tthis.doneContainerNode.appendChild(childItem.domNode);\n\t}\n\n\tthis.moveToNotDone = function(childItem){\n\t\tthis.containerNode.appendChild(childItem.domNode);\n\t}","this_variables":["acceptedTypes","templatePath","templateCssPath","widgetType","dataUrl","isContainer","entryContainerNode","doneContainerNode","newItemTextNode","fillInTemplate","setSelected","getDragIcon","startDrag","endDrag","dragEnter","domNode.style.border","dragLeave","getDropPlacement","handleDrag","handleDrop","buildNewItem","newItemTextNode.value","observeReOrder","moveToDone","moveToNotDone"],"inherits":["dojo.widget.HtmlWidget"]}}},"jot.widget.HTMLJotToDoList.fillInTemplate":{"_":{"meta":{"summary":"","src":""}}},"jot.widget.HTMLJotToDoList.setSelected":{"_":{"meta":{"summary":"","parameters":{"evt":{"type":""}},"src":"\t\tvar tgt = dojo.widget.manager.getWidgetFromEvent(evt);\n\t\tif((tgt !== this)&&(dojo.alg.inArray(this.acceptedTypes,  tgt.widgetType))){\n\t\t\tthis.selection.add(tgt, tgt.widgetType);\n\t\t}"}}},"jot.widget.HTMLJotToDoList.getDragIcon":{"_":{"meta":{"summary":"","src":"\t\t\tvar node = this.selection.selected[0][0].domNode;\n\t\t\tvar ts = node.cloneNode(true);\n\t\t\tts.setAttribute(\"originalPosition\", dojo.xml.htmlUtil.getAbsoluteX(node) +\n\t\t\t\t\",\" + dojo.xml.htmlUtil.getAbsoluteY(node));\n\t\t\treturn ts;\n\t\t}"}}},"jot.widget.HTMLJotToDoList.startDrag":{"_":{"meta":{"summary":"","src":"\t\tdojo.xml.htmlUtil.disableSelect();"}}},"jot.widget.HTMLJotToDoList.endDrag":{"_":{"meta":{"summary":"","src":"\t\tdojo.xml.htmlUtil.enableSelect();"}}},"jot.widget.HTMLJotToDoList.dragEnter":{"_":{"meta":{"summary":"","src":"\t\tthis.domNode.style.border = \"3px solid black\";","this_variables":["domNode.style.border"]}}},"jot.widget.HTMLJotToDoList.dragLeave":{"_":{"meta":{"summary":"","src":"\t\tthis.domNode.style.border = \"\";","this_variables":["domNode.style.border"]}}},"jot.widget.HTMLJotToDoList.getDropPlacement":{"_":{"meta":{"summary":"","src":"\t\tvar _du = dojo.xml.domUtil;\n\t\t\/\/var ypos = dojo.webui.htmlDragAndDropManager.curr.absy;\n\t\tfor(var x=0; x<this.children.length; x++){\n\t\t\tvar tmpNode = this.children[x].domNode;\n\t\t\tvar cy = _hu.getAbsoluteY(tmpNode);\n\t\t\tvar ch = _hu.getInnerHeight(tmpNode);\n\t\t\tif((ypos>=cy)&&(ypos<=(cy+ch))){ \/\/ lets handle it if we can\n\t\t\t\tvar posStr = \"before\";\n\t\t\t\tif(ypos>=(cy+(ch\/2))){\n\t\t\t\t\t\/\/ insert it ahead of the current child\n\t\t\t\t\tposStr = \"after\";\n\t\t\t\t}\n\t\t\t\tvar ret = [posStr, tmpNode, this.children[x]];\n\t\t\t\tret.location = posStr;\n\t\t\t\tret.node = tmpNode;\n\t\t\t\tret.widget = ret[2];\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\t\treturn false;"}}},"jot.widget.HTMLJotToDoList.handleDrag":{"_":{"meta":{"summary":"","parameters":{"dragSource":{"type":""}},"src":"\t\tif(_handling){ \n\t\t\tdj_debug(\"not done...\");\n\t\t\treturn; \n\t\t}\n\t\t_handling = true;\n\t\tvar pos = this.getDropPlacement();\n\t\twhile(_lpos.length){\n\t\t\tvar tlpos = _lpos.pop();\n\t\t\twith(tlpos.widget[_nr].style){\n\t\t\t\tpaddingTop = paddingBottom = \"\";\n\t\t\t}\n\t\t}\n\t\tif(pos){\n\t\t\twith(pos.widget[_nr].style){\n\t\t\t\t\/*\n\t\t\t\tif(pos.location == \"before\"){\n\t\t\t\t\tpaddingTop = \"20px\";\n\t\t\t\t\tpaddingBottom = \"\";\n\t\t\t\t}else{\n\t\t\t\t\tpaddingBottom = \"20px\";\n\t\t\t\t\tpaddingTop = \"\";\n\t\t\t\t}\n\t\t\t\t*\/\n\t\t\t}\n\t\t\t_lpos.push(pos);\n\t\t}\n\t\t_handling = false;\n\t\treturn true;"}}},"jot.widget.HTMLJotToDoList.handleDrop":{"_":{"meta":{"summary":"","parameters":{"dragSource":{"type":""},"evt":{"type":""}},"src":"\t\tvar pos = this.getDropPlacement();\n\t\t\/\/ dj_debug(pos);\n\t\tvar _sel = dragSource.selection.selected;\n\t\tfor(var y=_sel.length-1; y>=0; y--){\n\t\t\tvar tn = _sel[y][0].domNode;\n\t\t\tdojo.xml.htmlUtil.setOpacity(tn, 0);\n\t\t\tthis.observeReOrder(_sel[y], pos.location, pos.node);\n\t\t\tthis.addChild(_sel[y], null, pos.location, pos.node);\n\t\t\tdojo.graphics.htmlEffects.fadeIn(tn, 500, function(){});\n\t\t}\n\t\twhile(_lpos.length){\n\t\t\tvar tlpos = _lpos.pop();\n\t\t\twith(tlpos.widget[_nr].style){\n\t\t\t\t\/\/ paddingTop = paddingBottom = \"\";\n\t\t\t}\n\t\t}\n\t\tdojo.xml.htmlUtil._clobberSelection();\n\t\treturn true;"}}},"jot.widget.HTMLJotToDoList.buildNewItem":{"_":{"meta":{"summary":"","src":"\t\tdj_debug(this.newItemTextNode.value);\n\t\tthis.newItemTextNode.value = \"\";\n\t\tthis.newItemTextNode.focus();\n\t\treturn false;","this_variables":["newItemTextNode.value"]}}},"jot.widget.HTMLJotToDoList.observeReOrder":{"_":{"meta":{"summary":"","parameters":{"component":{"type":""},"location":{"type":""},"node":{"type":""}},"src":"\t\t\/\/ FIXME: we need to communicate the new order properties to the\n\t\t\/\/ server here"}}},"jot.widget.HTMLJotToDoList.moveToDone":{"_":{"meta":{"summary":"","parameters":{"childItem":{"type":""}},"src":"\t\tthis.doneContainerNode.appendChild(childItem.domNode);"}}},"jot.widget.HTMLJotToDoList.moveToNotDone":{"_":{"meta":{"summary":"","parameters":{"childItem":{"type":""}},"src":"\t\tthis.containerNode.appendChild(childItem.domNode);"}}},"jot.widget.HTMLJotToDoItem":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\n\n\tthis.templatePath = dojo.uri.dojoUri(\"..\/jot\/widget\/templates\/JotToDoItem.html\");\n\tthis.templateCssPath = dojo.uri.dojoUri(\"..\/jot\/widget\/templates\/JotToDoItem.css\");\n\n\tthis.widgetType = \"JotToDoItem\";\n\tthis.dataUrl = \"\";\n\tthis.done = false;\n\tthis.labelNode = null;\n\tthis.checkBoxNode = null;\n\tthis.input = null;\n\tthis.labelContainer = null;\n\tthis.numberNode = null;\n\tthis.dragHandleNode = null;\n\tthis.value = \"\";\n\tthis.complete = false;\n\tthis.editing = false;\n\tthis.position = 0;\n\n\tthis.fillInTemplate = function(args, frag){\n\t\tthis.input.value = this.value;\n\t\tthis.labelNode.innerHTML = this.value;\n\t\tthis.labelNode.style.display = \"\";\n\t}\n\n\tthis.toggleChecked = function(){\n\t\tif(this.checkBoxNode.checked){\n\t\t\tthis.setDone();\n\t\t\tthis.parent.moveToDone(this);\n\t\t}else{\n\t\t\tthis.setNotDone();\n\t\t\tthis.parent.moveToNotDone(this);\n\t\t}\n\t}\n\n\tthis.setDone = function(){\n\t\tthis.complete = true;\n\t}\n\n\tthis.setNotDone = function(){\n\t\tthis.complete = false;\n\t}\n\n\tthis.highlight = function(){\n\t}\n\n\tthis.unHighlight = function(){\n\t}\n\n\tthis.toggleEditing = function(){\n\t\tif(this.editing){\n\t\t\tthis.editing = false;\n\t\t\tthis.value = this.input.value;\n\t\t\tthis.labelNode.innerHTML = this.value;\n\t\t\tthis.labelNode.style.display = \"\";\n\t\t\tthis.input.style.display = \"none\";\n\t\t}else{\n\t\t\tthis.editing = true;\n\t\t\tthis.labelNode.style.display = \"none\";\n\t\t\tthis.input.style.display = \"\";\n\t\t\tthis.input.focus();\n\t\t}\n\t}","this_variables":["templatePath","templateCssPath","widgetType","dataUrl","done","labelNode","checkBoxNode","input","labelContainer","numberNode","dragHandleNode","value","complete","editing","position","fillInTemplate","input.value","labelNode.innerHTML","labelNode.style.display","toggleChecked","setDone","setNotDone","highlight","unHighlight","toggleEditing","input.style.display"],"inherits":["dojo.widget.HtmlWidget"]}}},"jot.widget.HTMLJotToDoItem.fillInTemplate":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tthis.input.value = this.value;\n\t\tthis.labelNode.innerHTML = this.value;\n\t\tthis.labelNode.style.display = \"\";","this_variables":["input.value","labelNode.innerHTML","labelNode.style.display"]}}},"jot.widget.HTMLJotToDoItem.toggleChecked":{"_":{"meta":{"summary":"","src":"\t\tif(this.checkBoxNode.checked){\n\t\t\tthis.setDone();\n\t\t\tthis.parent.moveToDone(this);\n\t\t}else{\n\t\t\tthis.setNotDone();\n\t\t\tthis.parent.moveToNotDone(this);\n\t\t}"}}},"jot.widget.HTMLJotToDoItem.setDone":{"_":{"meta":{"summary":"","src":"\t\tthis.complete = true;","this_variables":["complete"]}}},"jot.widget.HTMLJotToDoItem.setNotDone":{"_":{"meta":{"summary":"","src":"\t\tthis.complete = false;","this_variables":["complete"]}}},"jot.widget.HTMLJotToDoItem.highlight":{"_":{"meta":{"summary":"","src":""}}},"jot.widget.HTMLJotToDoItem.unHighlight":{"_":{"meta":{"summary":"","src":""}}},"jot.widget.HTMLJotToDoItem.toggleEditing":{"_":{"meta":{"summary":"","src":"\t\tif(this.editing){\n\t\t\tthis.editing = false;\n\t\t\tthis.value = this.input.value;\n\t\t\tthis.labelNode.innerHTML = this.value;\n\t\t\tthis.labelNode.style.display = \"\";\n\t\t\tthis.input.style.display = \"none\";\n\t\t}else{\n\t\t\tthis.editing = true;\n\t\t\tthis.labelNode.style.display = \"none\";\n\t\t\tthis.input.style.display = \"\";\n\t\t\tthis.input.focus();\n\t\t}","this_variables":["editing","value","labelNode.innerHTML","labelNode.style.display","input.style.display"]}}}}}},"dojo.widget.jot.JotToolbarContainer":{"meta":{"requires":{"common":["dojo.widget.Toolbar","dojo.widget.ColorPalette"]},"methods":{"jot.widget.HTMLJotToolbarContainer":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HTMLToolbarContainer.call(this);\n\n\tthis.widgetType = \"JotToolbarContainer\";\n\tthis.templateCssPath = null;","this_variables":["widgetType","templateCssPath"],"inherits":["dojo.widget.HTMLToolbarContainer"]}}}}}},"dojo.widget.jot.JotTrackerTabs":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.Tabs"]},"methods":{"jot.widget.JotTrackerTabs":{"_":{"meta":{"summary":"","src":"\tdojo.widget.html.Tabs.call(this);\n\n\tthis.widgetType = \"JotTrackerTabs\";\n\tthis.templateCssPath = null;","this_variables":["widgetType","templateCssPath"],"inherits":["dojo.widget.html.Tabs"]}}}}}},"dojo.widget.jot.JotTrackerTabs2":{"meta":{"requires":{"common":["dojo.io.*","dojo.widget.*","dojo.dom","dojo.html"]},"methods":{"dojo.widget.html.JotTrackerTabs2":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\r\n\tthis.tabs = [];\r\n\tthis.panels = [];\r","this_variables":["tabs","panels","domNode","containerNode","selected","selected","selected","selected","selected","selected","selected"],"inherits":["dojo.widget.HtmlWidget"],"protovariables":{"widgetType":"","isContainer":"","templatePath":"","templateCssPath":"","domNode":"","containerNode":"","selected":"","tabTarget":"","extractContent":"","parseContent":""}}}},"isLocal":{"_":{"meta":{"summary":"","parameters":{"a":{"type":""}},"src":"\t\t\tvar url = a.getAttribute(\"href\");\r\n\t\t\tvar hash = url.indexOf(\"#\");\r\n\t\t\tif (hash == 0) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar loc = location.href.split(\"#\")[0];\r\n\t\t\tvar url2 = url.split(\"#\")[0];\r\n\t\t\tif (loc == url2) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif (unescape(loc) == url2) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar outer = a.outerHTML;\r\n\t\t\tif (outer && \/href=[\"']?#\/i.test(outer)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r"}}},"dojo.widget.html.JotTrackerTabs2.preventCache":{"_":{"meta":{"summary":"","parameters":{"panel":{"type":""},"url":{"type":""},"useCache":{"type":""},"preventCache":{"type":""}},"src":"\t\tvar node = document.getElementById(panel.id);\r\n\t\tnode.innerHTML = \"Loading...\";\r\n\r\n\t\tvar extract = this.extractContent;\r\n\t\tvar parse = this.parseContent;\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\turl: url,\r\n\t\t\tuseCache: useCache,\r\n\t\t\tpreventCache: preventCache,\r\n\t\t\tmimetype: \"text\/html\",\r\n\t\t\thandler: function(type, data, e) {\r\n\t\t\t\tif (type == \"load\") {\r\n\t\t\t\t\tif (extract) {\r\n\t\t\t\t\t\tvar matches = data.match(\/<body[^>]*>\\s*([\\s\\S]+)\\s*<\\\/body>\/im);\r\n\t\t\t\t\t\tif (matches) { data = matches[1]; }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnode.innerHTML = data;\r\n\t\t\t\t\tpanel.isLoaded = true;\r\n\t\t\t\t\tif (parse) {\r\n\t\t\t\t\t\tvar parser = new dojo.xml.Parse();\r\n\t\t\t\t\t\tvar frag = parser.parseElement(node, null, true);\r\n\t\t\t\t\t\tdojo.widget.getParser().createComponents(frag);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnode.innerHTML = \"Error loading '\" + panel.url + \"' (\" + e.status + \" \" + e.statusText + \")\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r","this":"dojo.widget.html.JotTrackerTabs2"}}},"dojo.widget.html.JotTrackerTabs2.buildRendering":{"_":{"meta":{"summary":"","parameters":{"args":{"type":""},"frag":{"type":""}},"src":"\t\tdojo.style.insertCssFile(this.templateCssPath);\r\n\t\tthis.domNode = frag[\"dojo:\"+this.widgetType.toLowerCase()][\"nodeRef\"];\r\n\t\tif (!this.domNode) { dj_error(\"html.JotTrackerTabs2: No node reference\"); }\r\n\r\n\t\tif (args[\"tabtarget\"]) {\r\n\t\t\tthis.tabtarget = args[\"tabtarget\"];\r\n\t\t\tthis.containerNode = document.getElementById(args[\"tabtarget\"]);\r\n\t\t} else {\r\n\t\t\tthis.containerNode = document.createElement(\"div\");\r\n\t\t\tvar next = this.domNode.nextSibling;\r\n\t\t\tif (next) {\r\n\t\t\t\tthis.domNode.parentNode.insertBefore(this.containerNode, next);\r\n\t\t\t} else {\r\n\t\t\t\tthis.domNode.parentNode.appendChild(this.containerNode);\r\n\t\t\t}\r\n\t\t}\r\n\t\tdojo.html.addClass(this.containerNode, \"trackerTabPanelContainer\");\r\n\r\n\t\tvar li = dojo.dom.getFirstChildElement(this.domNode);\r\n\t\twhile(li) {\r\n\t\t\tvar a = li.getElementsByTagName(\"a\").item(0);\r\n\t\t\tthis.addTab(a);\r\n\t\t\tli = dojo.dom.getNextSiblingElement(li);\r\n\t\t}\r\n\r\n\t\tif (this.selected == -1) { this.selected = 0; }\r\n\t\tthis.selectTab(null, this.tabs[this.selected]);\r","this":"dojo.widget.html.JotTrackerTabs2"}}},"dojo.widget.html.JotTrackerTabs2.addTab":{"_":{"meta":{"summary":"","parameters":{"title":{"type":""},"url":{"type":""},"tabId":{"type":""},"tabHandler":{"type":""}},"src":"\t\t\turl: null,\r\n\t\t\ttitle: null,\r\n\t\t\tisLoaded: false,\r\n\t\t\tid: null,\r\n\t\t\tisLocal: false\r\n\t\t};\r\n\r\n\t\tfunction isLocal(a) {\r\n\t\t\tvar url = a.getAttribute(\"href\");\r\n\t\t\tvar hash = url.indexOf(\"#\");\r\n\t\t\tif (hash == 0) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar loc = location.href.split(\"#\")[0];\r\n\t\t\tvar url2 = url.split(\"#\")[0];\r\n\t\t\tif (loc == url2) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif (unescape(loc) == url2) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar outer = a.outerHTML;\r\n\t\t\tif (outer && \/href=[\"']?#\/i.test(outer)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (title && title.tagName && title.tagName.toLowerCase() == \"a\") {\r\n\t\t\t\/\/ init case\r\n\t\t\tvar a = title;\r\n\t\t\tvar li = a.parentNode;\r\n\t\t\ttitle = a.innerHTML;\r\n\t\t\turl = a.getAttribute(\"href\");\r\n\t\t\tvar id = null;\r\n\t\t\tvar hash = url.indexOf(\"#\");\r\n\t\t\tif (isLocal(a)) {\r\n\t\t\t\tid = url.split(\"#\")[1];\r\n\t\t\t\tdj_debug(\"setting local id:\", id);\r\n\t\t\t\turl = \"#\" + id;\r\n\t\t\t\tpanel.isLocal = true;\r\n\t\t\t} else {\r\n\t\t\t\tid = a.getAttribute(\"tabid\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar hasOptions = li.getAttribute(\"hasOptions\");\r\n\t\t\tif (hasOptions) {\r\n\t\t\t\tli.hasOptions = true;\r\n\t\t\t\tdojo.html.addClass(li, \"hasOptions\");\r\n\t\t\t\t\/\/option launch-chip\r\n\t\t\t\tvar div = document.createElement(\"div\");\r\n\t\t\t\tli.appendChild(div);\r\n\t\t\t\tdiv.style.zIndex = 1;\r\n\t\t\t}\r\n\r\n\t\t\tpanel.url = url;\r\n\t\t\tpanel.title = title;\r\n\t\t\tpanel.id = id || dojo.html.getUniqueId();\r\n\t\t\tdj_debug(\"panel id:\", panel.id, \"url:\", panel.url);\r\n\t\t} else {\r\n\t\t\t\/\/ programmatically adding\r\n\t\t\tvar li = document.createElement(\"li\");\r\n\t\t\tvar a = document.createElement(\"a\");\r\n\t\t\ta.innerHTML = title;\r\n\t\t\ta.href = url;\r\n\t\t\tli.appendChild(a);\r\n\t\t\tthis.domNode.appendChild(li);\r\n\r\n\t\t\tpanel.url = url;\r\n\t\t\tpanel.title = title;\r\n\t\t\tpanel.id = tabId || dojo.html.getUniqueId();\r\n\t\t\tdj_debug(\"prg tab:\", panel.id, \"url:\", panel.url);\r\n\t\t}\r\n\r\n\t\tif (panel.isLocal) {\r\n\t\t\tvar node = document.getElementById(id);\r\n\t\t\tnode.style.display = \"none\";\r\n\t\t\tthis.containerNode.appendChild(node);\r\n\t\t} else {\r\n\t\t\tvar node = document.createElement(\"div\");\r\n\t\t\tnode.style.display = \"none\";\r\n\t\t\tnode.id = panel.id;\r\n\t\t\tthis.containerNode.appendChild(node);\r\n\t\t}\r\n\r\n\t\tvar handler = a.getAttribute(\"tabhandler\") || tabHandler;\r\n\t\tif (handler) {\r\n\t\t\tthis.setPanelHandler(handler, panel);\r\n\t\t}\r\n\r\n\t\tdojo.event.connect(a, \"onclick\", this, \"selectTab\");\r\n\r\n\t\tthis.tabs.push(li);\r\n\t\tthis.panels.push(panel);\r\n\r\n\t\tif (this.selected == -1 && li.className.indexOf(\"current\") != -1) {\r\n\t\t\tthis.selected = this.tabs.length-1;\r\n\t\t}\r\n\r\n\t\treturn { \"tab\": li, \"panel\": panel };\r","this":"dojo.widget.html.JotTrackerTabs2"}}},"dojo.widget.html.JotTrackerTabs2.url":{"_":{"meta":{"summary":"","parameters":{"panel":{"type":""},"url":{"type":""},"useCache":{"type":""},"preventCache":{"type":""}},"src":"\t\tvar node = document.getElementById(panel.id);\r\n\t\tnode.innerHTML = \"Loading...\";\r\n\r\n\t\tvar extract = this.extractContent;\r\n\t\tvar parse = this.parseContent;\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\turl: url,\r\n\t\t\tuseCache: useCache,\r\n\t\t\tpreventCache: preventCache,\r\n\t\t\tmimetype: \"text\/html\",\r\n\t\t\thandler: function(type, data, e) {\r\n\t\t\t\tif (type == \"load\") {\r\n\t\t\t\t\tif (extract) {\r\n\t\t\t\t\t\tvar matches = data.match(\/<body[^>]*>\\s*([\\s\\S]+)\\s*<\\\/body>\/im);\r\n\t\t\t\t\t\tif (matches) { data = matches[1]; }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnode.innerHTML = data;\r\n\t\t\t\t\tpanel.isLoaded = true;\r\n\t\t\t\t\tif (parse) {\r\n\t\t\t\t\t\tvar parser = new dojo.xml.Parse();\r\n\t\t\t\t\t\tvar frag = parser.parseElement(node, null, true);\r\n\t\t\t\t\t\tdojo.widget.getParser().createComponents(frag);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnode.innerHTML = \"Error loading '\" + panel.url + \"' (\" + e.status + \" \" + e.statusText + \")\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r","this":"dojo.widget.html.JotTrackerTabs2"}}},"dojo.widget.html.JotTrackerTabs2.title":{"_":{"meta":{"summary":"","parameters":{"title":{"type":""},"url":{"type":""},"tabId":{"type":""},"tabHandler":{"type":""}},"src":"\t\t\turl: null,\r\n\t\t\ttitle: null,\r\n\t\t\tisLoaded: false,\r\n\t\t\tid: null,\r\n\t\t\tisLocal: false\r\n\t\t};\r\n\r\n\t\tfunction isLocal(a) {\r\n\t\t\tvar url = a.getAttribute(\"href\");\r\n\t\t\tvar hash = url.indexOf(\"#\");\r\n\t\t\tif (hash == 0) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar loc = location.href.split(\"#\")[0];\r\n\t\t\tvar url2 = url.split(\"#\")[0];\r\n\t\t\tif (loc == url2) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif (unescape(loc) == url2) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar outer = a.outerHTML;\r\n\t\t\tif (outer && \/href=[\"']?#\/i.test(outer)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (title && title.tagName && title.tagName.toLowerCase() == \"a\") {\r\n\t\t\t\/\/ init case\r\n\t\t\tvar a = title;\r\n\t\t\tvar li = a.parentNode;\r\n\t\t\ttitle = a.innerHTML;\r\n\t\t\turl = a.getAttribute(\"href\");\r\n\t\t\tvar id = null;\r\n\t\t\tvar hash = url.indexOf(\"#\");\r\n\t\t\tif (isLocal(a)) {\r\n\t\t\t\tid = url.split(\"#\")[1];\r\n\t\t\t\tdj_debug(\"setting local id:\", id);\r\n\t\t\t\turl = \"#\" + id;\r\n\t\t\t\tpanel.isLocal = true;\r\n\t\t\t} else {\r\n\t\t\t\tid = a.getAttribute(\"tabid\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar hasOptions = li.getAttribute(\"hasOptions\");\r\n\t\t\tif (hasOptions) {\r\n\t\t\t\tli.hasOptions = true;\r\n\t\t\t\tdojo.html.addClass(li, \"hasOptions\");\r\n\t\t\t\t\/\/option launch-chip\r\n\t\t\t\tvar div = document.createElement(\"div\");\r\n\t\t\t\tli.appendChild(div);\r\n\t\t\t\tdiv.style.zIndex = 1;\r\n\t\t\t}\r\n\r\n\t\t\tpanel.url = url;\r\n\t\t\tpanel.title = title;\r\n\t\t\tpanel.id = id || dojo.html.getUniqueId();\r\n\t\t\tdj_debug(\"panel id:\", panel.id, \"url:\", panel.url);\r\n\t\t} else {\r\n\t\t\t\/\/ programmatically adding\r\n\t\t\tvar li = document.createElement(\"li\");\r\n\t\t\tvar a = document.createElement(\"a\");\r\n\t\t\ta.innerHTML = title;\r\n\t\t\ta.href = url;\r\n\t\t\tli.appendChild(a);\r\n\t\t\tthis.domNode.appendChild(li);\r\n\r\n\t\t\tpanel.url = url;\r\n\t\t\tpanel.title = title;\r\n\t\t\tpanel.id = tabId || dojo.html.getUniqueId();\r\n\t\t\tdj_debug(\"prg tab:\", panel.id, \"url:\", panel.url);\r\n\t\t}\r\n\r\n\t\tif (panel.isLocal) {\r\n\t\t\tvar node = document.getElementById(id);\r\n\t\t\tnode.style.display = \"none\";\r\n\t\t\tthis.containerNode.appendChild(node);\r\n\t\t} else {\r\n\t\t\tvar node = document.createElement(\"div\");\r\n\t\t\tnode.style.display = \"none\";\r\n\t\t\tnode.id = panel.id;\r\n\t\t\tthis.containerNode.appendChild(node);\r\n\t\t}\r\n\r\n\t\tvar handler = a.getAttribute(\"tabhandler\") || tabHandler;\r\n\t\tif (handler) {\r\n\t\t\tthis.setPanelHandler(handler, panel);\r\n\t\t}\r\n\r\n\t\tdojo.event.connect(a, \"onclick\", this, \"selectTab\");\r\n\r\n\t\tthis.tabs.push(li);\r\n\t\tthis.panels.push(panel);\r\n\r\n\t\tif (this.selected == -1 && li.className.indexOf(\"current\") != -1) {\r\n\t\t\tthis.selected = this.tabs.length-1;\r\n\t\t}\r\n\r\n\t\treturn { \"tab\": li, \"panel\": panel };\r","this":"dojo.widget.html.JotTrackerTabs2"}}},"dojo.widget.html.JotTrackerTabs2.isLoaded":{"_":{"meta":{"summary":"","parameters":{"title":{"type":""},"url":{"type":""},"tabId":{"type":""},"tabHandler":{"type":""}},"src":"\t\t\turl: null,\r\n\t\t\ttitle: null,\r\n\t\t\tisLoaded: false,\r\n\t\t\tid: null,\r\n\t\t\tisLocal: false\r\n\t\t};\r\n\r\n\t\tfunction isLocal(a) {\r\n\t\t\tvar url = a.getAttribute(\"href\");\r\n\t\t\tvar hash = url.indexOf(\"#\");\r\n\t\t\tif (hash == 0) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar loc = location.href.split(\"#\")[0];\r\n\t\t\tvar url2 = url.split(\"#\")[0];\r\n\t\t\tif (loc == url2) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif (unescape(loc) == url2) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar outer = a.outerHTML;\r\n\t\t\tif (outer && \/href=[\"']?#\/i.test(outer)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (title && title.tagName && title.tagName.toLowerCase() == \"a\") {\r\n\t\t\t\/\/ init case\r\n\t\t\tvar a = title;\r\n\t\t\tvar li = a.parentNode;\r\n\t\t\ttitle = a.innerHTML;\r\n\t\t\turl = a.getAttribute(\"href\");\r\n\t\t\tvar id = null;\r\n\t\t\tvar hash = url.indexOf(\"#\");\r\n\t\t\tif (isLocal(a)) {\r\n\t\t\t\tid = url.split(\"#\")[1];\r\n\t\t\t\tdj_debug(\"setting local id:\", id);\r\n\t\t\t\turl = \"#\" + id;\r\n\t\t\t\tpanel.isLocal = true;\r\n\t\t\t} else {\r\n\t\t\t\tid = a.getAttribute(\"tabid\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar hasOptions = li.getAttribute(\"hasOptions\");\r\n\t\t\tif (hasOptions) {\r\n\t\t\t\tli.hasOptions = true;\r\n\t\t\t\tdojo.html.addClass(li, \"hasOptions\");\r\n\t\t\t\t\/\/option launch-chip\r\n\t\t\t\tvar div = document.createElement(\"div\");\r\n\t\t\t\tli.appendChild(div);\r\n\t\t\t\tdiv.style.zIndex = 1;\r\n\t\t\t}\r\n\r\n\t\t\tpanel.url = url;\r\n\t\t\tpanel.title = title;\r\n\t\t\tpanel.id = id || dojo.html.getUniqueId();\r\n\t\t\tdj_debug(\"panel id:\", panel.id, \"url:\", panel.url);\r\n\t\t} else {\r\n\t\t\t\/\/ programmatically adding\r\n\t\t\tvar li = document.createElement(\"li\");\r\n\t\t\tvar a = document.createElement(\"a\");\r\n\t\t\ta.innerHTML = title;\r\n\t\t\ta.href = url;\r\n\t\t\tli.appendChild(a);\r\n\t\t\tthis.domNode.appendChild(li);\r\n\r\n\t\t\tpanel.url = url;\r\n\t\t\tpanel.title = title;\r\n\t\t\tpanel.id = tabId || dojo.html.getUniqueId();\r\n\t\t\tdj_debug(\"prg tab:\", panel.id, \"url:\", panel.url);\r\n\t\t}\r\n\r\n\t\tif (panel.isLocal) {\r\n\t\t\tvar node = document.getElementById(id);\r\n\t\t\tnode.style.display = \"none\";\r\n\t\t\tthis.containerNode.appendChild(node);\r\n\t\t} else {\r\n\t\t\tvar node = document.createElement(\"div\");\r\n\t\t\tnode.style.display = \"none\";\r\n\t\t\tnode.id = panel.id;\r\n\t\t\tthis.containerNode.appendChild(node);\r\n\t\t}\r\n\r\n\t\tvar handler = a.getAttribute(\"tabhandler\") || tabHandler;\r\n\t\tif (handler) {\r\n\t\t\tthis.setPanelHandler(handler, panel);\r\n\t\t}\r\n\r\n\t\tdojo.event.connect(a, \"onclick\", this, \"selectTab\");\r\n\r\n\t\tthis.tabs.push(li);\r\n\t\tthis.panels.push(panel);\r\n\r\n\t\tif (this.selected == -1 && li.className.indexOf(\"current\") != -1) {\r\n\t\t\tthis.selected = this.tabs.length-1;\r\n\t\t}\r\n\r\n\t\treturn { \"tab\": li, \"panel\": panel };\r","this":"dojo.widget.html.JotTrackerTabs2"}}},"dojo.widget.html.JotTrackerTabs2.id":{"_":{"meta":{"summary":"","parameters":{"title":{"type":""},"url":{"type":""},"tabId":{"type":""},"tabHandler":{"type":""}},"src":"\t\t\turl: null,\r\n\t\t\ttitle: null,\r\n\t\t\tisLoaded: false,\r\n\t\t\tid: null,\r\n\t\t\tisLocal: false\r\n\t\t};\r\n\r\n\t\tfunction isLocal(a) {\r\n\t\t\tvar url = a.getAttribute(\"href\");\r\n\t\t\tvar hash = url.indexOf(\"#\");\r\n\t\t\tif (hash == 0) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar loc = location.href.split(\"#\")[0];\r\n\t\t\tvar url2 = url.split(\"#\")[0];\r\n\t\t\tif (loc == url2) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif (unescape(loc) == url2) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar outer = a.outerHTML;\r\n\t\t\tif (outer && \/href=[\"']?#\/i.test(outer)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (title && title.tagName && title.tagName.toLowerCase() == \"a\") {\r\n\t\t\t\/\/ init case\r\n\t\t\tvar a = title;\r\n\t\t\tvar li = a.parentNode;\r\n\t\t\ttitle = a.innerHTML;\r\n\t\t\turl = a.getAttribute(\"href\");\r\n\t\t\tvar id = null;\r\n\t\t\tvar hash = url.indexOf(\"#\");\r\n\t\t\tif (isLocal(a)) {\r\n\t\t\t\tid = url.split(\"#\")[1];\r\n\t\t\t\tdj_debug(\"setting local id:\", id);\r\n\t\t\t\turl = \"#\" + id;\r\n\t\t\t\tpanel.isLocal = true;\r\n\t\t\t} else {\r\n\t\t\t\tid = a.getAttribute(\"tabid\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar hasOptions = li.getAttribute(\"hasOptions\");\r\n\t\t\tif (hasOptions) {\r\n\t\t\t\tli.hasOptions = true;\r\n\t\t\t\tdojo.html.addClass(li, \"hasOptions\");\r\n\t\t\t\t\/\/option launch-chip\r\n\t\t\t\tvar div = document.createElement(\"div\");\r\n\t\t\t\tli.appendChild(div);\r\n\t\t\t\tdiv.style.zIndex = 1;\r\n\t\t\t}\r\n\r\n\t\t\tpanel.url = url;\r\n\t\t\tpanel.title = title;\r\n\t\t\tpanel.id = id || dojo.html.getUniqueId();\r\n\t\t\tdj_debug(\"panel id:\", panel.id, \"url:\", panel.url);\r\n\t\t} else {\r\n\t\t\t\/\/ programmatically adding\r\n\t\t\tvar li = document.createElement(\"li\");\r\n\t\t\tvar a = document.createElement(\"a\");\r\n\t\t\ta.innerHTML = title;\r\n\t\t\ta.href = url;\r\n\t\t\tli.appendChild(a);\r\n\t\t\tthis.domNode.appendChild(li);\r\n\r\n\t\t\tpanel.url = url;\r\n\t\t\tpanel.title = title;\r\n\t\t\tpanel.id = tabId || dojo.html.getUniqueId();\r\n\t\t\tdj_debug(\"prg tab:\", panel.id, \"url:\", panel.url);\r\n\t\t}\r\n\r\n\t\tif (panel.isLocal) {\r\n\t\t\tvar node = document.getElementById(id);\r\n\t\t\tnode.style.display = \"none\";\r\n\t\t\tthis.containerNode.appendChild(node);\r\n\t\t} else {\r\n\t\t\tvar node = document.createElement(\"div\");\r\n\t\t\tnode.style.display = \"none\";\r\n\t\t\tnode.id = panel.id;\r\n\t\t\tthis.containerNode.appendChild(node);\r\n\t\t}\r\n\r\n\t\tvar handler = a.getAttribute(\"tabhandler\") || tabHandler;\r\n\t\tif (handler) {\r\n\t\t\tthis.setPanelHandler(handler, panel);\r\n\t\t}\r\n\r\n\t\tdojo.event.connect(a, \"onclick\", this, \"selectTab\");\r\n\r\n\t\tthis.tabs.push(li);\r\n\t\tthis.panels.push(panel);\r\n\r\n\t\tif (this.selected == -1 && li.className.indexOf(\"current\") != -1) {\r\n\t\t\tthis.selected = this.tabs.length-1;\r\n\t\t}\r\n\r\n\t\treturn { \"tab\": li, \"panel\": panel };\r","this":"dojo.widget.html.JotTrackerTabs2"}}},"dojo.widget.html.JotTrackerTabs2.isLocal":{"_":{"meta":{"summary":"","parameters":{"title":{"type":""},"url":{"type":""},"tabId":{"type":""},"tabHandler":{"type":""}},"src":"\t\t\turl: null,\r\n\t\t\ttitle: null,\r\n\t\t\tisLoaded: false,\r\n\t\t\tid: null,\r\n\t\t\tisLocal: false\r\n\t\t};\r\n\r\n\t\tfunction isLocal(a) {\r\n\t\t\tvar url = a.getAttribute(\"href\");\r\n\t\t\tvar hash = url.indexOf(\"#\");\r\n\t\t\tif (hash == 0) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar loc = location.href.split(\"#\")[0];\r\n\t\t\tvar url2 = url.split(\"#\")[0];\r\n\t\t\tif (loc == url2) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif (unescape(loc) == url2) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar outer = a.outerHTML;\r\n\t\t\tif (outer && \/href=[\"']?#\/i.test(outer)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (title && title.tagName && title.tagName.toLowerCase() == \"a\") {\r\n\t\t\t\/\/ init case\r\n\t\t\tvar a = title;\r\n\t\t\tvar li = a.parentNode;\r\n\t\t\ttitle = a.innerHTML;\r\n\t\t\turl = a.getAttribute(\"href\");\r\n\t\t\tvar id = null;\r\n\t\t\tvar hash = url.indexOf(\"#\");\r\n\t\t\tif (isLocal(a)) {\r\n\t\t\t\tid = url.split(\"#\")[1];\r\n\t\t\t\tdj_debug(\"setting local id:\", id);\r\n\t\t\t\turl = \"#\" + id;\r\n\t\t\t\tpanel.isLocal = true;\r\n\t\t\t} else {\r\n\t\t\t\tid = a.getAttribute(\"tabid\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar hasOptions = li.getAttribute(\"hasOptions\");\r\n\t\t\tif (hasOptions) {\r\n\t\t\t\tli.hasOptions = true;\r\n\t\t\t\tdojo.html.addClass(li, \"hasOptions\");\r\n\t\t\t\t\/\/option launch-chip\r\n\t\t\t\tvar div = document.createElement(\"div\");\r\n\t\t\t\tli.appendChild(div);\r\n\t\t\t\tdiv.style.zIndex = 1;\r\n\t\t\t}\r\n\r\n\t\t\tpanel.url = url;\r\n\t\t\tpanel.title = title;\r\n\t\t\tpanel.id = id || dojo.html.getUniqueId();\r\n\t\t\tdj_debug(\"panel id:\", panel.id, \"url:\", panel.url);\r\n\t\t} else {\r\n\t\t\t\/\/ programmatically adding\r\n\t\t\tvar li = document.createElement(\"li\");\r\n\t\t\tvar a = document.createElement(\"a\");\r\n\t\t\ta.innerHTML = title;\r\n\t\t\ta.href = url;\r\n\t\t\tli.appendChild(a);\r\n\t\t\tthis.domNode.appendChild(li);\r\n\r\n\t\t\tpanel.url = url;\r\n\t\t\tpanel.title = title;\r\n\t\t\tpanel.id = tabId || dojo.html.getUniqueId();\r\n\t\t\tdj_debug(\"prg tab:\", panel.id, \"url:\", panel.url);\r\n\t\t}\r\n\r\n\t\tif (panel.isLocal) {\r\n\t\t\tvar node = document.getElementById(id);\r\n\t\t\tnode.style.display = \"none\";\r\n\t\t\tthis.containerNode.appendChild(node);\r\n\t\t} else {\r\n\t\t\tvar node = document.createElement(\"div\");\r\n\t\t\tnode.style.display = \"none\";\r\n\t\t\tnode.id = panel.id;\r\n\t\t\tthis.containerNode.appendChild(node);\r\n\t\t}\r\n\r\n\t\tvar handler = a.getAttribute(\"tabhandler\") || tabHandler;\r\n\t\tif (handler) {\r\n\t\t\tthis.setPanelHandler(handler, panel);\r\n\t\t}\r\n\r\n\t\tdojo.event.connect(a, \"onclick\", this, \"selectTab\");\r\n\r\n\t\tthis.tabs.push(li);\r\n\t\tthis.panels.push(panel);\r\n\r\n\t\tif (this.selected == -1 && li.className.indexOf(\"current\") != -1) {\r\n\t\t\tthis.selected = this.tabs.length-1;\r\n\t\t}\r\n\r\n\t\treturn { \"tab\": li, \"panel\": panel };\r","this":"dojo.widget.html.JotTrackerTabs2"}}},"dojo.widget.html.JotTrackerTabs2.selectTab":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""},"target":{"type":""}},"src":"\t\tif (dojo.lang.isNumber(e)) {\r\n\t\t\ttarget = this.tabs[e];\r\n\t\t}\r\n\t\telse if (e) {\r\n\t\t\tif (e.target) {\r\n\t\t\t\ttarget = e.target;\r\n\t\t\t\twhile(target && (target.tagName||\"\").toLowerCase() != \"li\") {\r\n\t\t\t\t\ttarget = target.parentNode;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (e.preventDefault) { e.preventDefault(); }\r\n\t\t}\r\n\r\n\t\tvar currTab = this.tabs[this.selected];\r\n\t\tdojo.html.removeClass(currTab, \"current\");\r\n\t\tdojo.html.removeClass(currTab, \"current-hasOptions\");\r\n\t\t\r\n\t\tfor (var i = 0; i < this.tabs.length; i++) {\r\n\t\t\tvar li = this.tabs[i];\r\n\t\t\tif (li == target) {\r\n\t\t\t\tdojo.html.addClass(li, \"current\");\r\n\t\t\t\tif (li.hasOptions) {\r\n\t\t\t\t\tdojo.html.addClass(li, \"current-hasOptions\");\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tthis.selected = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar panel = this.panels[this.selected];\r\n\t\tif (panel) {\r\n\t\t\tthis.getPanel(panel);\r\n\t\t\tthis.hidePanels(panel);\r\n\t\t\tdocument.getElementById(panel.id).style.display = \"\";\r\n\t\t}\r","this":"dojo.widget.html.JotTrackerTabs2"}}},"dojo.widget.html.JotTrackerTabs2.setPanelHandler":{"_":{"meta":{"summary":"","parameters":{"handler":{"type":""},"panel":{"type":""}},"src":"\t\tvar fcn = dojo.lang.isFunction(handler) ? handler : window[handler];\r\n\t\tif (!dojo.lang.isFunction(fcn)) {\r\n\t\t\tthrow new Error(\"Unable to set panel handler, '\" + handler + \"' not a function.\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis[\"tabHandler\" + panel.id] = function() {\r\n\t\t\treturn fcn.apply(this, arguments);\r\n\t\t}\r","this":"dojo.widget.html.JotTrackerTabs2"}}},"dojo.widget.html.JotTrackerTabs2.runPanelHandler":{"_":{"meta":{"summary":"","parameters":{"panel":{"type":""}},"src":"\t\tif (dojo.lang.isFunction(this[\"tabHandler\" + panel.id])) {\r\n\t\t\tthis[\"tabHandler\" + panel.id](panel, document.getElementById(panel.id));\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r","this":"dojo.widget.html.JotTrackerTabs2"}}},"dojo.widget.html.JotTrackerTabs2.getPanel":{"_":{"meta":{"summary":"","parameters":{"panel":{"type":""}},"src":"\t\tif (this.runPanelHandler(panel)) {\r\n\t\t\tif (panel.isLocal) {\r\n\t\t\t\t\/\/ do nothing?\r\n\t\t\t} else {\r\n\t\t\t\tif (!panel.isLoaded || !this.useCache) {\r\n\t\t\t\t\tthis.setExternalContent(panel, panel.url, this.useCache, this.preventCache);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r","this":"dojo.widget.html.JotTrackerTabs2"}}},"dojo.widget.html.JotTrackerTabs2.setExternalContent":{"_":{"meta":{"summary":"","parameters":{"panel":{"type":""},"url":{"type":""},"useCache":{"type":""},"preventCache":{"type":""}},"src":"\t\tvar node = document.getElementById(panel.id);\r\n\t\tnode.innerHTML = \"Loading...\";\r\n\r\n\t\tvar extract = this.extractContent;\r\n\t\tvar parse = this.parseContent;\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\turl: url,\r\n\t\t\tuseCache: useCache,\r\n\t\t\tpreventCache: preventCache,\r\n\t\t\tmimetype: \"text\/html\",\r\n\t\t\thandler: function(type, data, e) {\r\n\t\t\t\tif (type == \"load\") {\r\n\t\t\t\t\tif (extract) {\r\n\t\t\t\t\t\tvar matches = data.match(\/<body[^>]*>\\s*([\\s\\S]+)\\s*<\\\/body>\/im);\r\n\t\t\t\t\t\tif (matches) { data = matches[1]; }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnode.innerHTML = data;\r\n\t\t\t\t\tpanel.isLoaded = true;\r\n\t\t\t\t\tif (parse) {\r\n\t\t\t\t\t\tvar parser = new dojo.xml.Parse();\r\n\t\t\t\t\t\tvar frag = parser.parseElement(node, null, true);\r\n\t\t\t\t\t\tdojo.widget.getParser().createComponents(frag);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnode.innerHTML = \"Error loading '\" + panel.url + \"' (\" + e.status + \" \" + e.statusText + \")\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r","this":"dojo.widget.html.JotTrackerTabs2"}}},"dojo.widget.html.JotTrackerTabs2.useCache":{"_":{"meta":{"summary":"","parameters":{"panel":{"type":""},"url":{"type":""},"useCache":{"type":""},"preventCache":{"type":""}},"src":"\t\tvar node = document.getElementById(panel.id);\r\n\t\tnode.innerHTML = \"Loading...\";\r\n\r\n\t\tvar extract = this.extractContent;\r\n\t\tvar parse = this.parseContent;\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\turl: url,\r\n\t\t\tuseCache: useCache,\r\n\t\t\tpreventCache: preventCache,\r\n\t\t\tmimetype: \"text\/html\",\r\n\t\t\thandler: function(type, data, e) {\r\n\t\t\t\tif (type == \"load\") {\r\n\t\t\t\t\tif (extract) {\r\n\t\t\t\t\t\tvar matches = data.match(\/<body[^>]*>\\s*([\\s\\S]+)\\s*<\\\/body>\/im);\r\n\t\t\t\t\t\tif (matches) { data = matches[1]; }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnode.innerHTML = data;\r\n\t\t\t\t\tpanel.isLoaded = true;\r\n\t\t\t\t\tif (parse) {\r\n\t\t\t\t\t\tvar parser = new dojo.xml.Parse();\r\n\t\t\t\t\t\tvar frag = parser.parseElement(node, null, true);\r\n\t\t\t\t\t\tdojo.widget.getParser().createComponents(frag);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnode.innerHTML = \"Error loading '\" + panel.url + \"' (\" + e.status + \" \" + e.statusText + \")\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r","this":"dojo.widget.html.JotTrackerTabs2"}}},"dojo.widget.html.JotTrackerTabs2.mimetype":{"_":{"meta":{"summary":"","parameters":{"panel":{"type":""},"url":{"type":""},"useCache":{"type":""},"preventCache":{"type":""}},"src":"\t\tvar node = document.getElementById(panel.id);\r\n\t\tnode.innerHTML = \"Loading...\";\r\n\r\n\t\tvar extract = this.extractContent;\r\n\t\tvar parse = this.parseContent;\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\turl: url,\r\n\t\t\tuseCache: useCache,\r\n\t\t\tpreventCache: preventCache,\r\n\t\t\tmimetype: \"text\/html\",\r\n\t\t\thandler: function(type, data, e) {\r\n\t\t\t\tif (type == \"load\") {\r\n\t\t\t\t\tif (extract) {\r\n\t\t\t\t\t\tvar matches = data.match(\/<body[^>]*>\\s*([\\s\\S]+)\\s*<\\\/body>\/im);\r\n\t\t\t\t\t\tif (matches) { data = matches[1]; }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnode.innerHTML = data;\r\n\t\t\t\t\tpanel.isLoaded = true;\r\n\t\t\t\t\tif (parse) {\r\n\t\t\t\t\t\tvar parser = new dojo.xml.Parse();\r\n\t\t\t\t\t\tvar frag = parser.parseElement(node, null, true);\r\n\t\t\t\t\t\tdojo.widget.getParser().createComponents(frag);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnode.innerHTML = \"Error loading '\" + panel.url + \"' (\" + e.status + \" \" + e.statusText + \")\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r","this":"dojo.widget.html.JotTrackerTabs2"}}},"dojo.widget.html.JotTrackerTabs2.handler":{"_":{"meta":{"summary":"","parameters":{"panel":{"type":""},"url":{"type":""},"useCache":{"type":""},"preventCache":{"type":""}},"src":"\t\tvar node = document.getElementById(panel.id);\r\n\t\tnode.innerHTML = \"Loading...\";\r\n\r\n\t\tvar extract = this.extractContent;\r\n\t\tvar parse = this.parseContent;\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\turl: url,\r\n\t\t\tuseCache: useCache,\r\n\t\t\tpreventCache: preventCache,\r\n\t\t\tmimetype: \"text\/html\",\r\n\t\t\thandler: function(type, data, e) {\r\n\t\t\t\tif (type == \"load\") {\r\n\t\t\t\t\tif (extract) {\r\n\t\t\t\t\t\tvar matches = data.match(\/<body[^>]*>\\s*([\\s\\S]+)\\s*<\\\/body>\/im);\r\n\t\t\t\t\t\tif (matches) { data = matches[1]; }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnode.innerHTML = data;\r\n\t\t\t\t\tpanel.isLoaded = true;\r\n\t\t\t\t\tif (parse) {\r\n\t\t\t\t\t\tvar parser = new dojo.xml.Parse();\r\n\t\t\t\t\t\tvar frag = parser.parseElement(node, null, true);\r\n\t\t\t\t\t\tdojo.widget.getParser().createComponents(frag);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnode.innerHTML = \"Error loading '\" + panel.url + \"' (\" + e.status + \" \" + e.statusText + \")\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r","this":"dojo.widget.html.JotTrackerTabs2"}}},"dojo.widget.html.JotTrackerTabs2.hidePanels":{"_":{"meta":{"summary":"","parameters":{"except":{"type":""}},"src":"\t\tfor (var i = 0; i < this.panels.length; i++) {\r\n\t\t\tif (this.panels[i] != except && this.panels[i].id) {\r\n\t\t\t\tvar p = document.getElementById(this.panels[i].id);\r\n\t\t\t\tif (p) {\r\n\t\t\t\t\tp.style.display = \"none\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r","this":"dojo.widget.html.JotTrackerTabs2"}}}}}},"dojo.widget.jot.JotUploadProgressBar":{"meta":{"requires":{"common":["dojo.event.*","dojo.io.*","dojo.widget.*"]},"methods":{"jot.widget.HtmlJotUploadProgressBar":{"_":{"meta":{"summary":"","src":"\tdojo.widget.HtmlWidget.call(this);\r\n\r\n\tthis.templatePath = dojo.uri.dojoUri(\"..\/jot\/widget\/templates\/JotUploadProgressBar.html\");\r\n\tthis.templateCssPath = dojo.uri.dojoUri(\"..\/jot\/widget\/templates\/JotUploadProgressBar.css\");\r\n\tthis.widgetType = \"JotUploadProgressBar\";\r\n\r\n\tthis.uploadID = \"\";\r\n\tthis.url = \"_\/cmd\/event.getProgress\";\r\n\tthis.progressBarBg = \"\";\r\n\tthis.progressBarRemainderBg = \"\";\r\n\tthis.req = null;\r\n\tthis.interval = null;\r\n\tthis.form = null;\r\n\tthis.barCell = null;\r\n\tthis.bar = null;\r\n\tthis.statusDisplay = null;\r\n\tthis.maxBarWidth = 400;    \/\/ maximum progress bar width (at 100%) in pixels\r\n\tthis.requestDelay = 500;  \/\/ ms between progress poll requests\r\n\t\r\n\t\/\/ stub since mixed-in interface doesn't provide an implementation\r\n\tthis.fillInTemplate = function(){\r\n\t}\r\n\r\n\tthis.initForm = function(){\r\n\t\tthis.getForm();\r\n\t\tthis.form.onsubmit = function(){ return true; };\r\n\t\t\/\/ this.form.onsubmit = null;\r\n\t\tdojo.event.connect(\"before\", this.form, \"onsubmit\", this, \"onSubmit\");\r\n\t}\r\n\r\n\tdojo.event.connect(this, \"postInitialize\", this, \"initForm\");\r\n\r\n\tthis.initRequest = function(){\r\n\t\tvar _this = this;\r\n\t\tdojo.io.bind({\r\n\t\t\turl: this.url,\r\n\t\t\tmethod: \"get\",\r\n\t\t\tmimetype: \"text\/xml\",\r\n\t\t\tcontent: { progressID: this.uploadID },\r\n\t\t\tload: function(type, rsp, evt){\r\n\t            var item = rsp.getElementsByTagName(\"status\")[0];\r\n\t            var status = item.firstChild.nodeValue;\r\n\t            item = rsp.getElementsByTagName(\"percentage\")[0];\r\n\t       \t    percentage = item.firstChild.nodeValue;\r\n\t            _this.showProgress(status, percentage);\r\n\t            if(percentage == 100){\r\n\t                if(_this.stopPolling){\r\n\t                    \/\/ clearInterval(_this.interval);\r\n\t\t\t\t\t}else{\r\n\t                \t\/\/ one more poll because we might not yet show \r\n\t                \t\/\/ the final status message due to percentage rounding\r\n\t                    _this.stopPolling = true;  \r\n\t\t\t\t\t}\r\n\t            }else{\r\n\t\t\t\t\tclearInterval(_this.interval);\r\n\t\t\t\t\t_this.interval = setTimeout(function(){ _this.initRequest(); }, _this.requestDelay);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t\/*\r\n\t    if(window.XMLHttpRequest){\r\n\t        this.req = new XMLHttpRequest();\r\n\t    }else if (window.ActiveXObject){\r\n\t        this.isIE = true;\r\n\t        this.req = new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n\t    }\r\n\t    this.req.open(\"GET\", this.url + this.uploadID, true);\r\n\t\t*\/\r\n\t}\r\n\t\r\n\tthis.pollProgress = function() {\r\n\t    this.initRequest();\r\n\t\t\/*\r\n\t\t\/\/ enclose this scope for the callback\r\n\t\tvar _this = this;\r\n\t\tthis.req.onreadystatechange = function(){\r\n\t\t\treturn function(){ _this.processPollRequest(); }\r\n\t\t}();\r\n\r\n\t\t\/\/ dojo.event.connect(this.req, \"onreadystatechange\", this, \"processPollRequest\");\r\n\t    this.req.send(null);\r\n\t\t*\/\r\n\t}\r\n\t\r\n\tthis.processPollRequest = function() {\r\n\t    if(this.req.readyState == 4) {\r\n\t\t\tif(this.req.status == 200) {\r\n\t        } \r\n\t    }\r\n\t}\r\n\t\r\n\tthis.showProgress = function(status, percentage) {\r\n\t\tvar doc = window.document;\r\n\t    this.statusDisplay.innerHTML = status;\r\n\t    this.bar.style.width = this.getCurrentWidth(percentage);\r\n\t}\r\n\t\r\n\tthis.getCurrentWidth = function(percentage) {\r\n\t\treturn Math.round(this.maxBarWidth * (percentage\/100)) + \"px\";\r\n\t}\r\n\t\r\n\tthis.getForm = function() {\r\n\t\t\/\/ FIXME: what if we're not a child of a form, but are just observing?\r\n\t\tthis.form = this.domNode;\r\n\t\twhile((this.form)&&(this.form.nodeName.toLowerCase() != \"form\")){\r\n\t\t\tthis.form = this.form.parentNode;\r\n\t\t}\r\n\t\treturn this.form;\r\n\t}\r\n\t\r\n\tthis.getSubmitButton = function() {\r\n\t\t\/\/ FIXME: we should be getting this from the form itself, and not really hard coding an ID\r\n\t\treturn window.document.getElementById(\"submitButton\");\r\n\t}\r\n\t\r\n\tthis.makeVisible = function() {\r\n\t    this.barCell.style.width = this.maxBarWidth + \"px\";\r\n\t    this.barCell.style.visibility = \"visible\";\r\n\t    this.statusDisplay.style.visibility = \"visible\";\r\n\t\tif(this.progressBarRemainderBg != \"\"){\r\n\t\t\tthis.barCell.style.background = \"url(\"+dojo.hostenv.getBaseScriptUri()+this.progressBarRemainderBg+\") repeat-x\";\r\n\t\t}\r\n\t\tif(this.progressBarBg != \"\"){\r\n\t\t\tthis.bar.style.background = \"url(\"+dojo.hostenv.getBaseScriptUri()+this.progressBarBg+\") repeat-x\";\r\n\t\t}\r\n\t}\r\n\t\r\n\tthis.onSubmit = function() {\r\n\t\tthis.form.action += this.uploadID;\r\n\t    this.getSubmitButton().disabled = true;\r\n\t\tthis.makeVisible();\r\n\t\tthis.pollProgress();\r\n\t}\r","this_variables":["templatePath","templateCssPath","widgetType","uploadID","url","progressBarBg","progressBarRemainderBg","req","interval","form","barCell","bar","statusDisplay","maxBarWidth","requestDelay","fillInTemplate","initForm","form.onsubmit","initRequest","pollProgress","processPollRequest","showProgress","statusDisplay.innerHTML","bar.style.width","getCurrentWidth","getForm","getSubmitButton","makeVisible","barCell.style.width","barCell.style.visibility","statusDisplay.style.visibility","barCell.style.background","bar.style.background","onSubmit"],"inherits":["dojo.widget.HtmlWidget"]}}},"jot.widget.HtmlJotUploadProgressBar.fillInTemplate":{"_":{"meta":{"summary":"","src":""}}},"jot.widget.HtmlJotUploadProgressBar.initForm":{"_":{"meta":{"summary":"","src":"\t\tthis.getForm();\r\n\t\tthis.form.onsubmit = function(){ return true; };\r\n\t\t\/\/ this.form.onsubmit = null;\r\n\t\tdojo.event.connect(\"before\", this.form, \"onsubmit\", this, \"onSubmit\");\r","this_variables":["form.onsubmit"]}}},"jot.widget.HtmlJotUploadProgressBar.initForm.form.onsubmit":{"_":{"meta":{"summary":"","src":"                                   return true;     "}}},"jot.widget.HtmlJotUploadProgressBar.initRequest":{"_":{"meta":{"summary":"","src":"\t\tvar _this = this;\r\n\t\tdojo.io.bind({\r\n\t\t\turl: this.url,\r\n\t\t\tmethod: \"get\",\r\n\t\t\tmimetype: \"text\/xml\",\r\n\t\t\tcontent: { progressID: this.uploadID },\r\n\t\t\tload: function(type, rsp, evt){\r\n\t            var item = rsp.getElementsByTagName(\"status\")[0];\r\n\t            var status = item.firstChild.nodeValue;\r\n\t            item = rsp.getElementsByTagName(\"percentage\")[0];\r\n\t       \t    percentage = item.firstChild.nodeValue;\r\n\t            _this.showProgress(status, percentage);\r\n\t            if(percentage == 100){\r\n\t                if(_this.stopPolling){\r\n\t                    \/\/ clearInterval(_this.interval);\r\n\t\t\t\t\t}else{\r\n\t                \t\/\/ one more poll because we might not yet show \r\n\t                \t\/\/ the final status message due to percentage rounding\r\n\t                    _this.stopPolling = true;  \r\n\t\t\t\t\t}\r\n\t            }else{\r\n\t\t\t\t\tclearInterval(_this.interval);\r\n\t\t\t\t\t_this.interval = setTimeout(function(){ _this.initRequest(); }, _this.requestDelay);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t\/*\r\n\t    if(window.XMLHttpRequest){\r\n\t        this.req = new XMLHttpRequest();\r\n\t    }else if (window.ActiveXObject){\r\n\t        this.isIE = true;\r\n\t        this.req = new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n\t    }\r\n\t    this.req.open(\"GET\", this.url + this.uploadID, true);\r\n\t\t*\/\r"}}},"jot.widget.HtmlJotUploadProgressBar.pollProgress":{"_":{"meta":{"summary":"","src":"\t    this.initRequest();\r\n\t\t\/*\r\n\t\t\/\/ enclose this scope for the callback\r\n\t\tvar _this = this;\r\n\t\tthis.req.onreadystatechange = function(){\r\n\t\t\treturn function(){ _this.processPollRequest(); }\r\n\t\t}();\r\n\r\n\t\t\/\/ dojo.event.connect(this.req, \"onreadystatechange\", this, \"processPollRequest\");\r\n\t    this.req.send(null);\r\n\t\t*\/\r"}}},"jot.widget.HtmlJotUploadProgressBar.processPollRequest":{"_":{"meta":{"summary":"","src":"\t    if(this.req.readyState == 4) {\r\n\t\t\tif(this.req.status == 200) {\r\n\t        } \r\n\t    }\r","this_variables":["req.status"]}}},"jot.widget.HtmlJotUploadProgressBar.showProgress":{"_":{"meta":{"summary":"","parameters":{"status":{"type":""},"percentage":{"type":""}},"src":"\t\tvar doc = window.document;\r\n\t    this.statusDisplay.innerHTML = status;\r\n\t    this.bar.style.width = this.getCurrentWidth(percentage);\r","this_variables":["statusDisplay.innerHTML","bar.style.width"]}}},"jot.widget.HtmlJotUploadProgressBar.getCurrentWidth":{"_":{"meta":{"summary":"","parameters":{"percentage":{"type":""}},"src":"\t\treturn Math.round(this.maxBarWidth * (percentage\/100)) + \"px\";\r"}}},"jot.widget.HtmlJotUploadProgressBar.getForm":{"_":{"meta":{"summary":"","src":"\t\twhile((this.form)&&(this.form.nodeName.toLowerCase() != \"form\")){\r\n\t\t\tthis.form = this.form.parentNode;\r\n\t\t}\r\n\t\treturn this.form;\r","this_variables":["form"]}}},"jot.widget.HtmlJotUploadProgressBar.getSubmitButton":{"_":{"meta":{"summary":"","src":""}}},"jot.widget.HtmlJotUploadProgressBar.makeVisible":{"_":{"meta":{"summary":"","src":"\t    this.barCell.style.width = this.maxBarWidth + \"px\";\r\n\t    this.barCell.style.visibility = \"visible\";\r\n\t    this.statusDisplay.style.visibility = \"visible\";\r\n\t\tif(this.progressBarRemainderBg != \"\"){\r\n\t\t\tthis.barCell.style.background = \"url(\"+dojo.hostenv.getBaseScriptUri()+this.progressBarRemainderBg+\") repeat-x\";\r\n\t\t}\r\n\t\tif(this.progressBarBg != \"\"){\r\n\t\t\tthis.bar.style.background = \"url(\"+dojo.hostenv.getBaseScriptUri()+this.progressBarBg+\") repeat-x\";\r\n\t\t}\r","this_variables":["barCell.style.width","barCell.style.visibility","statusDisplay.style.visibility","barCell.style.background","bar.style.background"]}}},"jot.widget.HtmlJotUploadProgressBar.onSubmit":{"_":{"meta":{"summary":"","src":"\t\tthis.form.action += this.uploadID;\r\n\t    this.getSubmitButton().disabled = true;\r\n\t\tthis.makeVisible();\r\n\t\tthis.pollProgress();\r"}}}}}},"dojo.widget.jot.jottable.DataItem":{"meta":{"methods":{"TrackerDataItem":{"_":{"meta":{"summary":"","src":"{\r\n\tthis.saveValues = new Object(); \r","this_variables":["saveValues"]}}},"TrackerDataItem.setValue":{"_":{"meta":{"summary":"","parameters":{"name":{"type":""},"value":{"type":""}},"src":"\t\tthis[name] = value;\r\n\t\tthis.saveValues[name] = value;\r","this":"TrackerDataItem"}}}}}},"dojo.widget.jot.jottable.DataProvider":{"meta":{"requires":{"common":["dojo.io.bind","dojo.event.topic"]},"methods":{"DataProvider":{"_":{"meta":{"summary":"","parameters":{"table":{"type":""},"transport":{"type":""},"topPage":{"type":""}},"src":"{\r\n\tthis.table = table;\r\n\tthis.transport = transport;\r\n\tthis.topPage = (topPage != \"\") ? topPage : \"tr12\";\r\n\tthis.transport.topPage = this.topPage;\r\n\tthis.cols = new Array();\r\n\tthis.colMap = new Array();\r\n\tthis.rowMap = new Array();\r\n\tthis.buildTransArray = new Array();\r\n\r\n\t\/\/need to start a transaction because the lock handling\r\n\t\/\/logic always expects an open transaction\r\n\tthis.table.undoManager.beginTransaction(\"Lock Trans\");\r","this_variables":["table","transport","topPage","transport.topPage","cols","colMap","rowMap","buildTransArray","cols","colMap","rowMap","transport.topicName","transport.topicName","table.status.innerHTML","inLockFailure"]}}},"DataProvider.clear":{"_":{"meta":{"summary":"","src":"\t\tthis.cols = new Array();\r\n\t\tthis.colMap = new Array();\r\n\t\tthis.rowMap = new Array();\r","this":"DataProvider"}}},"DataProvider.setupComet":{"_":{"meta":{"summary":"","parameters":{"topicName":{"type":""}},"src":"\t\tdojo.io.bind({path: this.topPage, topic: topicName});\r\n\t\tthis.transport.topicName = topicName;\r\n\t\tvar self = this;\r\n\t\tdojo.event.topic.subscribe(topicName, function(path, user, data)\r\n\t\t\t{\r\n\t\t\t\tself.defaultHandler(null, data, null, null);\r\n\t\t\t});\r","this":"DataProvider"}}},"DataProvider.path":{"_":{"meta":{"summary":"","parameters":{"topicName":{"type":""}},"src":"\t\tdojo.io.bind({path: this.topPage, topic: topicName});\r\n\t\tthis.transport.topicName = topicName;\r\n\t\tvar self = this;\r\n\t\tdojo.event.topic.subscribe(topicName, function(path, user, data)\r\n\t\t\t{\r\n\t\t\t\tself.defaultHandler(null, data, null, null);\r\n\t\t\t});\r","this":"DataProvider"}}},"DataProvider.getColName":{"_":{"meta":{"summary":"","parameters":{"col":{"type":""}},"src":"\t\tif ( col < this.colMap.length )\r\n\t\t{\r\n\t\t\treturn this.colMap[col];\r\n\t\t}\r\n\t\t\r\n\t\treturn null;\r","this":"DataProvider"}}},"DataProvider.getRowNames":{"_":{"meta":{"summary":"","parameters":{"row":{"type":""}},"src":"\t\tif ( row < this.rowMap.length )\r\n\t\t{\r\n\t\t\treturn this.rowMap[row];\r\n\t\t}\r\n\r\n\t\treturn null;\r","this":"DataProvider"}}},"DataProvider.getValuesByRange":{"_":{"meta":{"summary":"","parameters":{"firstColNum":{"type":""},"firstRowNum":{"type":""},"numberOfCols":{"type":""},"numberOfRows":{"type":""},"args":{"type":""}},"src":"\t\tif (!args) { args = {}; }\r\n\t\tthis.table.setStatus(args.filter ? \"Searching ...\" : \"Loading ...\");\r\n\t\tvar query = {firstCol: firstColNum, \r\n\t\t\t\t\t firstRow: firstRowNum,\r\n\t\t\t\t\t numCols: numberOfCols,\r\n\t\t\t\t\t numRows: numberOfRows,\r\n\t\t\t\t\t actionType: \"getValuesByRange\",\r\n\t\t\t\t\t topPage: this.topPage};\r\n\t\t\r\n\t\tfor(prop in args) \r\n\t\t{\r\n\t\t\tquery[prop] = args[prop];\r\n\t\t}\r\n\t\t\r\n\t\tvar self = this;\r\n\t\tthis.transport.send(query, function(type, resp, e) \r\n\t\t\t\t\t\t \t{\r\n\t\t\t\t\t\t\t\tself.table.setStatus(\"Processing ...\");\r\n\t\t\t\t\t\t\t\tself.defaultHandler(type, resp, e, null);\r\n\r\n\t\t\t\t\t\t\t\tif ( args.filter )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tself.table.filterRowNum = self.table.reLabelRowHeader.lastLabel+1;\r\n\t\t\t\t\t\t\t\t\tself.table.reLabelRowHeaders(self.table.reLabelRowHeader.lastRowIndex+1);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t \t});\r","this":"DataProvider"}}},"DataProvider.firstCol":{"_":{"meta":{"summary":"","parameters":{"firstColNum":{"type":""},"firstRowNum":{"type":""},"numberOfCols":{"type":""},"numberOfRows":{"type":""},"args":{"type":""}},"src":"\t\tif (!args) { args = {}; }\r\n\t\tthis.table.setStatus(args.filter ? \"Searching ...\" : \"Loading ...\");\r\n\t\tvar query = {firstCol: firstColNum, \r\n\t\t\t\t\t firstRow: firstRowNum,\r\n\t\t\t\t\t numCols: numberOfCols,\r\n\t\t\t\t\t numRows: numberOfRows,\r\n\t\t\t\t\t actionType: \"getValuesByRange\",\r\n\t\t\t\t\t topPage: this.topPage};\r\n\t\t\r\n\t\tfor(prop in args) \r\n\t\t{\r\n\t\t\tquery[prop] = args[prop];\r\n\t\t}\r\n\t\t\r\n\t\tvar self = this;\r\n\t\tthis.transport.send(query, function(type, resp, e) \r\n\t\t\t\t\t\t \t{\r\n\t\t\t\t\t\t\t\tself.table.setStatus(\"Processing ...\");\r\n\t\t\t\t\t\t\t\tself.defaultHandler(type, resp, e, null);\r\n\r\n\t\t\t\t\t\t\t\tif ( args.filter )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tself.table.filterRowNum = self.table.reLabelRowHeader.lastLabel+1;\r\n\t\t\t\t\t\t\t\t\tself.table.reLabelRowHeaders(self.table.reLabelRowHeader.lastRowIndex+1);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t \t});\r","this":"DataProvider"}}},"DataProvider.firstRow":{"_":{"meta":{"summary":"","parameters":{"firstColNum":{"type":""},"firstRowNum":{"type":""},"numberOfCols":{"type":""},"numberOfRows":{"type":""},"args":{"type":""}},"src":"\t\tif (!args) { args = {}; }\r\n\t\tthis.table.setStatus(args.filter ? \"Searching ...\" : \"Loading ...\");\r\n\t\tvar query = {firstCol: firstColNum, \r\n\t\t\t\t\t firstRow: firstRowNum,\r\n\t\t\t\t\t numCols: numberOfCols,\r\n\t\t\t\t\t numRows: numberOfRows,\r\n\t\t\t\t\t actionType: \"getValuesByRange\",\r\n\t\t\t\t\t topPage: this.topPage};\r\n\t\t\r\n\t\tfor(prop in args) \r\n\t\t{\r\n\t\t\tquery[prop] = args[prop];\r\n\t\t}\r\n\t\t\r\n\t\tvar self = this;\r\n\t\tthis.transport.send(query, function(type, resp, e) \r\n\t\t\t\t\t\t \t{\r\n\t\t\t\t\t\t\t\tself.table.setStatus(\"Processing ...\");\r\n\t\t\t\t\t\t\t\tself.defaultHandler(type, resp, e, null);\r\n\r\n\t\t\t\t\t\t\t\tif ( args.filter )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tself.table.filterRowNum = self.table.reLabelRowHeader.lastLabel+1;\r\n\t\t\t\t\t\t\t\t\tself.table.reLabelRowHeaders(self.table.reLabelRowHeader.lastRowIndex+1);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t \t});\r","this":"DataProvider"}}},"DataProvider.numCols":{"_":{"meta":{"summary":"","parameters":{"firstColNum":{"type":""},"firstRowNum":{"type":""},"numberOfCols":{"type":""},"numberOfRows":{"type":""},"args":{"type":""}},"src":"\t\tif (!args) { args = {}; }\r\n\t\tthis.table.setStatus(args.filter ? \"Searching ...\" : \"Loading ...\");\r\n\t\tvar query = {firstCol: firstColNum, \r\n\t\t\t\t\t firstRow: firstRowNum,\r\n\t\t\t\t\t numCols: numberOfCols,\r\n\t\t\t\t\t numRows: numberOfRows,\r\n\t\t\t\t\t actionType: \"getValuesByRange\",\r\n\t\t\t\t\t topPage: this.topPage};\r\n\t\t\r\n\t\tfor(prop in args) \r\n\t\t{\r\n\t\t\tquery[prop] = args[prop];\r\n\t\t}\r\n\t\t\r\n\t\tvar self = this;\r\n\t\tthis.transport.send(query, function(type, resp, e) \r\n\t\t\t\t\t\t \t{\r\n\t\t\t\t\t\t\t\tself.table.setStatus(\"Processing ...\");\r\n\t\t\t\t\t\t\t\tself.defaultHandler(type, resp, e, null);\r\n\r\n\t\t\t\t\t\t\t\tif ( args.filter )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tself.table.filterRowNum = self.table.reLabelRowHeader.lastLabel+1;\r\n\t\t\t\t\t\t\t\t\tself.table.reLabelRowHeaders(self.table.reLabelRowHeader.lastRowIndex+1);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t \t});\r","this":"DataProvider"}}},"DataProvider.numRows":{"_":{"meta":{"summary":"","parameters":{"firstColNum":{"type":""},"firstRowNum":{"type":""},"numberOfCols":{"type":""},"numberOfRows":{"type":""},"args":{"type":""}},"src":"\t\tif (!args) { args = {}; }\r\n\t\tthis.table.setStatus(args.filter ? \"Searching ...\" : \"Loading ...\");\r\n\t\tvar query = {firstCol: firstColNum, \r\n\t\t\t\t\t firstRow: firstRowNum,\r\n\t\t\t\t\t numCols: numberOfCols,\r\n\t\t\t\t\t numRows: numberOfRows,\r\n\t\t\t\t\t actionType: \"getValuesByRange\",\r\n\t\t\t\t\t topPage: this.topPage};\r\n\t\t\r\n\t\tfor(prop in args) \r\n\t\t{\r\n\t\t\tquery[prop] = args[prop];\r\n\t\t}\r\n\t\t\r\n\t\tvar self = this;\r\n\t\tthis.transport.send(query, function(type, resp, e) \r\n\t\t\t\t\t\t \t{\r\n\t\t\t\t\t\t\t\tself.table.setStatus(\"Processing ...\");\r\n\t\t\t\t\t\t\t\tself.defaultHandler(type, resp, e, null);\r\n\r\n\t\t\t\t\t\t\t\tif ( args.filter )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tself.table.filterRowNum = self.table.reLabelRowHeader.lastLabel+1;\r\n\t\t\t\t\t\t\t\t\tself.table.reLabelRowHeaders(self.table.reLabelRowHeader.lastRowIndex+1);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t \t});\r","this":"DataProvider"}}},"DataProvider.actionType":{"_":{"meta":{"summary":"","parameters":{"firstColNum":{"type":""},"firstRowNum":{"type":""},"numberOfCols":{"type":""},"numberOfRows":{"type":""},"args":{"type":""}},"src":"\t\tif (!args) { args = {}; }\r\n\t\tthis.table.setStatus(args.filter ? \"Searching ...\" : \"Loading ...\");\r\n\t\tvar query = {firstCol: firstColNum, \r\n\t\t\t\t\t firstRow: firstRowNum,\r\n\t\t\t\t\t numCols: numberOfCols,\r\n\t\t\t\t\t numRows: numberOfRows,\r\n\t\t\t\t\t actionType: \"getValuesByRange\",\r\n\t\t\t\t\t topPage: this.topPage};\r\n\t\t\r\n\t\tfor(prop in args) \r\n\t\t{\r\n\t\t\tquery[prop] = args[prop];\r\n\t\t}\r\n\t\t\r\n\t\tvar self = this;\r\n\t\tthis.transport.send(query, function(type, resp, e) \r\n\t\t\t\t\t\t \t{\r\n\t\t\t\t\t\t\t\tself.table.setStatus(\"Processing ...\");\r\n\t\t\t\t\t\t\t\tself.defaultHandler(type, resp, e, null);\r\n\r\n\t\t\t\t\t\t\t\tif ( args.filter )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tself.table.filterRowNum = self.table.reLabelRowHeader.lastLabel+1;\r\n\t\t\t\t\t\t\t\t\tself.table.reLabelRowHeaders(self.table.reLabelRowHeader.lastRowIndex+1);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t \t});\r","this":"DataProvider"}}},"DataProvider.topPage":{"_":{"meta":{"summary":"","parameters":{"firstColNum":{"type":""},"firstRowNum":{"type":""},"numberOfCols":{"type":""},"numberOfRows":{"type":""},"args":{"type":""}},"src":"\t\tif (!args) { args = {}; }\r\n\t\tthis.table.setStatus(args.filter ? \"Searching ...\" : \"Loading ...\");\r\n\t\tvar query = {firstCol: firstColNum, \r\n\t\t\t\t\t firstRow: firstRowNum,\r\n\t\t\t\t\t numCols: numberOfCols,\r\n\t\t\t\t\t numRows: numberOfRows,\r\n\t\t\t\t\t actionType: \"getValuesByRange\",\r\n\t\t\t\t\t topPage: this.topPage};\r\n\t\t\r\n\t\tfor(prop in args) \r\n\t\t{\r\n\t\t\tquery[prop] = args[prop];\r\n\t\t}\r\n\t\t\r\n\t\tvar self = this;\r\n\t\tthis.transport.send(query, function(type, resp, e) \r\n\t\t\t\t\t\t \t{\r\n\t\t\t\t\t\t\t\tself.table.setStatus(\"Processing ...\");\r\n\t\t\t\t\t\t\t\tself.defaultHandler(type, resp, e, null);\r\n\r\n\t\t\t\t\t\t\t\tif ( args.filter )\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tself.table.filterRowNum = self.table.reLabelRowHeader.lastLabel+1;\r\n\t\t\t\t\t\t\t\t\tself.table.reLabelRowHeaders(self.table.reLabelRowHeader.lastRowIndex+1);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t \t});\r","this":"DataProvider"}}},"DataProvider.getValueAt":{"_":{"meta":{"summary":"","parameters":{"col":{"type":""},"row":{"type":""}},"src":"\t\tvar colObj = this.cols[col]\r\n\t\tif ( !colObj )\r\n\t\t{\r\n\t\t\tcolObj = new Array();\r\n\t\t\tthis.cols[col] = colObj;\r\n\t\t}\r\n\r\n\t\tvar dataItem = colObj[row];\r\n\t\tif ( !dataItem )\r\n\t\t{\r\n\t\t\tdataItem = new TrackerDataItem(col, row);\r\n\t\t}\r\n\r\n\t\treturn dataItem;\r","this":"DataProvider"}}},"DataProvider.setValueAt":{"_":{"meta":{"summary":"","parameters":{"col":{"type":""},"row":{"type":""},"dataItem":{"type":""},"actionType":{"type":""}},"src":"\t\tvar colObj = this.cols[col];\r\n\t\tif ( !colObj )\r\n\t\t{\r\n\t\t\tcolObj = new Array();\r\n\t\t\tthis.cols[col] = colObj;\r\n\t\t}\r\n\t\tcolObj[row] = dataItem; \r\n\r\n\t\t\/\/send dataItem update to the server\r\n\t\tif ( actionType != DataProvider.NO_SEND )\r\n\t\t{\r\n\t\t\tthis.table.setStatus(\"Saving ...\");\r\n\t\t\tdataItem.saveValues.colIndex = col; \r\n\t\t\tdataItem.saveValues.rowIndex = row;\r\n\t\t\tdataItem.saveValues.colName = this.colMap[col];\r\n\t\t\tdataItem.saveValues.rowName = this.rowMap[row];\r\n\t\t\tdataItem.saveValues.actionType = actionType;\r\n\t\t\tdataItem.saveValues.topPage = this.topPage;\r\n\t\t\tvar update = dataItem.saveValues;\r\n\t\t\tvar self = this;\r\n\t\t\tthis.transport.send(update, function(type, resp, e)\r\n\t\t\t\t{\r\n\t\t\t\t\tself.defaultHandler(type, resp, e, update);\r\n\t\t\t\t}, this.table.undoManager.inNestedTransaction());\r\n\t\t}\r\n\r\n\t\t\/\/clear out the saveValues for next changes\r\n\t\tdataItem.saveValues = new Object();\r","this":"DataProvider"}}},"DataProvider.setResizeDelta":{"_":{"meta":{"summary":"","parameters":{"type":{"type":""},"num":{"type":""},"delta":{"type":""}},"src":"\t\tthis.table.status.innerHTML = \"Saving ...\";\r\n\t\tvar update = new Object();\r\n\t\tupdate.topPage = this.topPage;\r\n\t\tupdate.delta = delta;\r\n\r\n\t\tif ( type == \"col\" )\r\n\t\t{\r\n\t\t\tupdate.colIndex = num;\t\r\n\t\t\tupdate.colName = this.colMap[num];\r\n\t\t\tupdate.actionType = \"setColResize\";\r\n\t\t}\r\n\t\telse \/\/if ( type == \"row\" )\r\n\t\t{\r\n\t\t\tupdate.rowIndex = num;\t\r\n\t\t\tupdate.rowName = this.rowMap[num];\r\n\t\t\tupdate.actionType = \"setRowResize\";\r\n\t\t}\r\n\r\n\t\tvar self = this;\r\n\t\tthis.transport.send(update, function(type, resp, e)\r\n\t\t\t{\r\n\t\t\t\tself.defaultHandler(type, resp, e, update);\r\n\t\t\t}, this.table.undoManager.inNestedTransaction());\r","this":"DataProvider"}}},"DataProvider.insertColumn":{"_":{"meta":{"summary":"","parameters":{"col":{"type":""},"isBefore":{"type":""},"fromUndoDelete":{"type":""}},"src":"\t\tvar update = new Object();\r\n\r\n\t\tupdate.colIndex = col; \r\n\t\tupdate.colName = this.colMap[col];\r\n\t\tupdate.isBefore = isBefore;\r\n\t\tupdate.fromUndoDelete = fromUndoDelete;\r\n\t\tupdate.actionType = \"insertColumn\";\r\n\t\tupdate.topPage = this.topPage;\r\n\r\n\t\t\/\/update the mappings\r\n\t\tvar realCol = isBefore ? col : col+1;\r\n\t\tthis.colMap.splice(realCol, 0, null);\r\n\t\tthis.cols.splice(realCol, 0, new Array());\r\n\r\n\t\tvar self = this;\r\n\t\tthis.transport.send(update, function(type, resp, e)\r\n\t\t\t{\r\n\t\t\t\tself.defaultHandler(type, resp, e, update);\r\n\t\t\t}, this.table.undoManager.inNestedTransaction());\r","this":"DataProvider"}}},"DataProvider.deleteColumn":{"_":{"meta":{"summary":"","parameters":{"col":{"type":""}},"src":"\t\tvar update = new Object();\r\n\r\n\t\tupdate.colIndex = col; \r\n\t\tupdate.colName = this.colMap[col];\r\n\t\tupdate.actionType = \"deleteColumn\";\r\n\t\tupdate.topPage = this.topPage;\r\n\r\n\t\t\/\/update the mappings\r\n\t\tthis.colMap.splice(col, 1);\r\n\t\tthis.cols.splice(col, 1);\r\n\r\n\t\tvar self = this;\r\n\t\tthis.transport.send(update, function(type, resp, e)\r\n\t\t\t{\r\n\t\t\t\tself.defaultHandler(type, resp, e, update);\r\n\t\t\t}, this.table.undoManager.inNestedTransaction());\r","this":"DataProvider"}}},"DataProvider.insertRow":{"_":{"meta":{"summary":"","parameters":{"row":{"type":""},"isBefore":{"type":""},"fromUndoDelete":{"type":""}},"src":"\t\tvar update = new Object();\r\n\r\n\t\tupdate.rowIndex = row;\r\n\t\tupdate.rowName = this.rowMap[row];\r\n\t\tupdate.isBefore = isBefore;\r\n\t\tupdate.fromUndoDelete = fromUndoDelete;\r\n\t\tupdate.actionType = \"insertRow\";\r\n\t\tupdate.topPage = this.topPage;\r\n\r\n\t\t\/\/update the mappings\r\n\t\tvar realRow = isBefore ? row: row+1;\r\n\t\tthis.rowMap.splice(realRow, 0, null);\r\n\t\tvar colObj;\r\n\t\tfor(var x=0; x < this.cols.length; x++)\r\n\t\t{\r\n\t\t\tcolObj = this.cols[x];\r\n\t\t\tif ( colObj )\r\n\t\t\t{\r\n\t\t\t\tcolObj.splice(realRow, 0, null);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar self = this;\r\n\t\tthis.transport.send(update, function(type, resp, e)\r\n\t\t\t{\r\n\t\t\t\tself.defaultHandler(type, resp, e, update);\r\n\t\t\t}, this.table.undoManager.inNestedTransaction());\r","this":"DataProvider"}}},"DataProvider.row":{"_":{"meta":{"summary":"","parameters":{"row":{"type":""},"isBefore":{"type":""},"fromUndoDelete":{"type":""}},"src":"\t\tvar update = new Object();\r\n\r\n\t\tupdate.rowIndex = row;\r\n\t\tupdate.rowName = this.rowMap[row];\r\n\t\tupdate.isBefore = isBefore;\r\n\t\tupdate.fromUndoDelete = fromUndoDelete;\r\n\t\tupdate.actionType = \"insertRow\";\r\n\t\tupdate.topPage = this.topPage;\r\n\r\n\t\t\/\/update the mappings\r\n\t\tvar realRow = isBefore ? row: row+1;\r\n\t\tthis.rowMap.splice(realRow, 0, null);\r\n\t\tvar colObj;\r\n\t\tfor(var x=0; x < this.cols.length; x++)\r\n\t\t{\r\n\t\t\tcolObj = this.cols[x];\r\n\t\t\tif ( colObj )\r\n\t\t\t{\r\n\t\t\t\tcolObj.splice(realRow, 0, null);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar self = this;\r\n\t\tthis.transport.send(update, function(type, resp, e)\r\n\t\t\t{\r\n\t\t\t\tself.defaultHandler(type, resp, e, update);\r\n\t\t\t}, this.table.undoManager.inNestedTransaction());\r","this":"DataProvider"}}},"DataProvider.deleteRow":{"_":{"meta":{"summary":"","parameters":{"row":{"type":""}},"src":"\t\tvar update = new Object();\r\n\r\n\t\tupdate.rowIndex = row;\r\n\t\tupdate.rowName = this.rowMap[row];\r\n\t\tupdate.actionType = \"deleteRow\";\r\n\t\tupdate.topPage = this.topPage;\r\n\r\n\t\t\/\/update the mappings\r\n\t\tthis.rowMap.splice(row, 1);\r\n\t\tvar colObj;\r\n\t\tfor(var x=0; x < this.cols.length; x++)\r\n\t\t{\r\n\t\t\tcolObj = this.cols[x];\r\n\t\t\tif ( colObj )\r\n\t\t\t{\r\n\t\t\t\tcolObj.splice(row, 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar self = this;\r\n\t\tthis.transport.send(update, function(type, resp, e)\r\n\t\t\t{\r\n\t\t\t\tself.defaultHandler(type, resp, e, update);\r\n\t\t\t}, this.table.undoManager.inNestedTransaction());\r","this":"DataProvider"}}},"DataProvider.endLockTransaction":{"_":{"meta":{"summary":"","src":"\t\t{\r\n\t\t\t\/\/end and flatten the current lock transaction\r\n\t\t\tthis.table.undoManager.endTransaction(true);\r\n\r\n\t\t\t\/\/add the lock transaction to the real undo manager\r\n\t\t\t\/\/if the lock failed the undoManager would have already been cleared out\r\n\t\t\tthis.table.topUndoManager.concat(this.table.undoManager);\r\n\t\t\tthis.table.undoManager.clear();\r\n\r\n\t\t\t\/\/start a new lock transaction\r\n\t\t\tthis.table.undoManager.beginTransaction(\"Lock Trans\");\r\n\r\n\t\t\t\/\/send any queued actions\r\n\t\t\tvar self = this;\r\n\t\t\tthis.transport.sendQueued(function(type, resp, e)\r\n\t\t\t\t{\r\n\t\t\t\t\tself.defaultHandler(type, resp, e);\r\n\t\t\t\t});\r\n\t\t}\r","this":"DataProvider"}}},"DataProvider.defaultHandler":{"_":{"meta":{"summary":"","parameters":{"type":{"type":""},"resp":{"type":""},"e":{"type":""},"update":{"type":""}},"src":"\t\tvar hasErrors = false;\r\n\t\tif ( dojo.lang.isArray(resp) )\r\n\t\t{\r\n\t\t\tfor(var x=0; x < resp.length; x++)\r\n\t\t\t{\r\n\t\t\t\thasErrors = this.processChange(resp[x]) ? true : hasErrors;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\thasErrors = this.processChange(resp);\r\n\t\t}\r\n\t\tthis.table.clearStatus();\r\n\r\n\t\tthis.endLockTransaction();\r\n\r\n\t\t\/\/if an update then send the changes to the other clients\r\n\t\tif ( update && resp && !hasErrors)\r\n\t\t{\r\n\t\t\tif ( dojo.lang.isArray(resp) )\r\n\t\t\t{\r\n\t\t\t\tresp.unshift(update);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tresp = [update, resp];\r\n\t\t\t}\r\n\r\n\t\t\t\/\/this.transport.publish(resp)\r\n\t\t}\r","this":"DataProvider"}}},"DataProvider.processChange":{"_":{"meta":{"summary":"","parameters":{"value":{"type":""}},"src":"\t\tif ( !value ) return;\r\n\r\n\t\t\/\/handle JSON-RPC encoded classes\r\n\t\tif ( value.__jsonclass__ )\r\n\t\t{\r\n\t\t\tvar tmpData = value.__jsonclass__ ;\r\n\t\t\tvar tmpVal = tmpData[1][0];\r\n\t\t\ttmpVal.jotType = tmpData[0];\r\n\t\t\tvalue = tmpVal;\t\r\n\t\t}\r\n\t\t\/*\r\n\t\talert(value);\r\n\t\tvar temp = \"\";\r\n\t\tfor(var i in value)\r\n\t\t{\r\n\t\t\ttemp += i + \" = \" + value[i] + \" \";\r\n\t\t}\r\n\t\talert(\"value = \" + temp);\r\n\t\t*\/\r\n\t\t\/\/is this a mapping object\r\n\t\tif ( value.jotType )\r\n\t\t{\r\n\t\t\tswitch(value.jotType)\r\n\t\t\t{\r\n\t\t\t\tcase \"ColumnMapping\":\r\n\t\t\t\t\tthis.colMap[value.colIndex] = value.colName;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"RowMapping\":\r\n\t\t\t\t\tthis.rowMap[value.rowIndex] = value.rowName;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"FilterMapping\":\r\n\t\t\t\t\tthis.table.reLabelRowHeader(value.rowIndex, value.filterIndex+1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"TableModelDelta\":\r\n\t\t\t\t\tthis.table.doResize(value.type, value.index, value.delta, false, false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"TrError\":\r\n\t\t\t\t\t\/\/TODO:this is in hear because we can't change the server\r\n\t\t\t\t\t\/\/in next release change the messages that the server sends\r\n\t\t\t\t\t\/\/when a cell is not referenced correctly\r\n\t\t\t\t\tif ( value.errorText == \"null\" || value.errorText == \"-1\" )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif ( value.colIndex >= 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvalue.errorText = \"Error in formula\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvalue.errorText = \"Tracker error\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\talert(value.errorText);\r\n\t\t\t\t\t\/\/if got a LockFailure then need to end the current transaction\r\n\t\t\t\t\t\/\/and undo everything the user was doing but don't transmit\r\n\t\t\t\t\t\/\/the changes to the server\r\n\t\t\t\t\tif ( value.errorType == \"lockFailure\" )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.table.undoManager.endTransaction();\r\n\t\t\t\t\t\tthis.transport.setClientOnly(true);\r\n\t\t\t\t\t\tthis.inLockFailure = true;\r\n\t\t\t\t\t\tthis.table.undoManager.undo();\r\n\t\t\t\t\t\tthis.inLockFailure = false;\r\n\t\t\t\t\t\tthis.transport.setClientOnly(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\/\/don't let the user out of edit mode until the error is fixed\r\n\t\t\t\t\t\/\/but if not colIndex then is of error type that doesn't need\r\n\t\t\t\t\t\/\/to put the user in edit mode\r\n\t\t\t\t\telse if ( value.colIndex >= 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.table.cellSelected(this.table.getCell(value.colIndex, value.rowIndex));\r\n\t\t\t\t\t\tvar event = {};\r\n\t\t\t\t\t\tevent.x = this.table.selectedCell.offsetLeft + this.table.selectedCell.offsetWidth + \r\n\t\t\t\t\t\t\t\t\tthis.table.editCellSizer.offsetWidth;\r\n\t\t\t\t\t\tevent.y = this.table.selectedCell.offsetTop + this.table.selectedCell.offsetHeight\/2;\r\n\t\t\t\t\t\tevent.clientX = event.x;\r\n\t\t\t\t\t\tevent.clientY = event.x;\r\n\t\t\t\t\t\tthis.table.editStart(event, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if ( value.colIndex >= 0 && value.rowIndex >= 0)\r\n\t\t{\r\n\t\t\tvar cell = this.table.getCell(value.colIndex, value.rowIndex);\r\n\r\n\t\t\tif ( value.cellText )\r\n\t\t\t{\r\n\t\t\t\tthis.table.setCellText(value.cellText, value.colIndex+\",\"+value.rowIndex, \r\n\t\t\t\t\tthis.getValueAt(value.colIndex, value.rowIndex), value.type, value.formulaBarText);\r\n\t\t\t}\r\n\r\n\t\t\tif ( value.backgroundColor )\r\n\t\t\t{\r\n\t\t\t\tthis.table.setCellBackground(cell, value.colIndex, value.rowIndex, value.backgroundColor, false);\r\n\t\t\t}\r\n\r\n\t\t\tif ( value.textAlign)\r\n\t\t\t{\r\n\t\t\t\tthis.table.setCellAlignType(cell, value.colIndex, value.rowIndex, value.textAlign, true, false);\r\n\t\t\t}\r\n\r\n\t\t\tif ( value.fontWeight )\r\n\t\t\t{\r\n\t\t\t\tthis.table.execCommandOnCell(cell, value.colIndex, value.rowIndex, \"fontWeight\", \r\n\t\t\t\t\tvalue.fontWeight, false);\r\n\t\t\t}\r\n\r\n\t\t\tif ( value.fontStyle )\r\n\t\t\t{\r\n\t\t\t\tthis.table.execCommandOnCell(cell, value.colIndex, value.rowIndex, \"fontStyle\", \r\n\t\t\t\t\tvalue.fontStyle, false);\r\n\t\t\t}\r\n\r\n\t\t\tif ( value.textDecoration )\r\n\t\t\t{\r\n\t\t\t\tthis.table.execCommandOnCell(cell, value.colIndex, value.rowIndex, \"textDecoration\",\r\n\t\t\t\t\tvalue.textDecoration, false);\r\n\t\t\t}\r\n\r\n\t\t\tif ( value.color )\r\n\t\t\t{\r\n\t\t\t\tthis.table.execCommandOnCell(cell, value.colIndex, value.rowIndex, \"forecolor\", \r\n\t\t\t\t\tvalue.color, false);\r\n\t\t\t}\r\n\r\n\t\t\tif ( typeof value.hasExtraData != \"undefined\" )\r\n\t\t\t{\r\n\t\t\t\tthis.table.setExtraDataIndicator(cell, value.colIndex, value.rowIndex, value.hasExtraData);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r","this":"DataProvider"}}}}}},"dojo.widget.jot.jottable.DateUtil":{"meta":{"methods":{"Date.getMonthFromString":{"_":{"meta":{"summary":"","parameters":{"monthString":{"type":""}},"src":"{\r\n\treturn Date.MONTH_ARRAY[monthString.toUpperCase()];\r"}}},"Date.createDate":{"_":{"meta":{"summary":"","parameters":{"dateString":{"type":""}},"src":"{\r\n\tvar parts = dateString.split(\"\/\");\r\n\r\n\treturn new Date(parseInt(parts[2]), parseInt(parts[0])-1, parseInt(parts[1]) );\r"}}},"Date.rollDate":{"_":{"meta":{"summary":"","parameters":{"rollPlus":{"type":""},"incNum":{"type":""}},"src":"{\r\n\tvar day = this.getDate();\r\n\r\n\tthis.setDate(rollPlus ? day+incNum : day-incNum);\r\n\r\n\treturn this;\r","this":"Date"}}},"Date.formatDate":{"_":{"meta":{"summary":"","parameters":{"format":{"type":""}},"src":"{\r\n\tif ( format && format == Date.TWO_PART_DATE )\r\n\t{\r\n\t\treturn this.getDate() + \"-\" + Date.MONTH_STRINGS[(this.getMonth()+1)];\r\n\t}\r\n\telse\r\n\t{\r\n\t\treturn (this.getMonth()+1) + \"\/\" + this.getDate() + \"\/\" + this.getFullYear();\r\n\t}\r","this":"Date"}}}}}},"dojo.widget.jot.jottable.Formula":{"meta":{"methods":{"Formula":{"_":{"meta":{"summary":"","parameters":{"formulaText":{"type":""}},"src":"{\r\n\tthis.setFormulaText(formulaText);\r","this_variables":["formulaChanged","formulaText","formulaParts","formulaChanged","formulaChanged","formulaChanged","formulaText","text","type","col","row"]}}},"Formula.diffFormulaText":{"_":{"meta":{"summary":"","parameters":{"oldText":{"type":""},"newText":{"type":""},"newPart":{"type":""}},"src":"{\r\n\tif ( oldText.indexOf(newPart) == -1 )\r\n\t{\r\n\t\tvar start = newText.indexOf(newPart);\r\n\t\treturn [start, start+newPart.length];\r\n\t}\r\n\r\n\t\/\/this is the mess where the newPart is already in the formula and\r\n\t\/\/we have to find the instance that was new and not just the first one.\r\n\tvar size = Math.min(oldText.length, newText.length);\r\n\tfor(var x=0; x < size; x++)\r\n\t{\r\n\t\tif ( oldText.charAt(x) != newText.charAt(x) )\r\n\t\t{\r\n\t\t\treturn [x, x+newPart.length];\r\n\t\t}\r\n\t\telse if ( x+newPart.length <= newText.length ) \r\n\t\t{\r\n\t\t\t\/\/this is the case where the part F6 is replaced with F4\r\n\t\t\t\/\/the F's will be the same in the above case but a substring\r\n\t\t\t\/\/of the old and new text will show that they are different\r\n\t\t\tvar nPart = newText.substr(x, newPart.length);\r\n\t\t\tif ( x+newPart.length <= oldText.length )\r\n\t\t\t{\r\n\t\t\t\tvar oPart = oldText.substr(x, newPart.length);\r\n\t\t\t\tif( oPart != nPart && nPart == newPart)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn [x, x+newPart.length];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if ( nPart == newPart )\r\n\t\t\t{\r\n\t\t\t\treturn [x, x+newPart.length];\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\t\r\n\tif ( oldText.length < newText.length )\r\n\t{\r\n\t\treturn [oldText.length, oldText.length + newPart.length];\r\n\t}\r\n\telse\r\n\t{\r\n\t\treturn [newText.length-newPart.length, newText.length];\r\n\t}\r"}}},"Formula.setFormulaText":{"_":{"meta":{"summary":"","parameters":{"formulaText":{"type":""}},"src":"{\r\n\t\/\/don't do anything if null or empty passed in\r\n\tif ( !formulaText )\r\n\t{\r\n\t\treturn;\t\r\n\t}\r\n\r\n\tthis.formulaChanged = false;\r\n\tthis.formulaText = formulaText.toUpperCase();\r\n\tthis.formulaParts = new Array(); \r\n\t\/\/match ranges (cell:cell) or just cells\r\n\t\/\/var cells = this.formulaText.match(\/[A-Z]{1,2}\\d+\\:[A-Z]{1,2}\\d+|[A-Z]{1,2}\\d+\/g);\r\n\tvar cells = this.formulaText.match(\/[A-Z]{1,2}\\d+\\:[A-Z]{1,2}\\d+|[A-Z]{1,2}\\d+|[A-Z]{1,2}\\:[A-Z]{1,2}|\\d+\\:\\d+\/g);\r\n\r\n\t\/\/formula didn't contain any cells or ranges so just return at this point.\r\n\tif ( !cells )\r\n\t{\r\n\t\treturn;\r\n\t}\r\n\r\n\t\/\/parse the formula into parts\r\n\tvar lastIndex=0; \/\/index at end of last cell found in formulaText\r\n\tvar y=0; \/\/counter looking through formulaText for cells on char at a time\r\n\tvar cell;\r\n\tfor(var x=0; x < cells.length; x++)\r\n\t{\r\n\t\tcell = cells[x];\r\n\t\twhile(y <= this.formulaText.length-cell.length)\r\n\t\t{\r\n\t\t\tif ( cell == this.formulaText.substr(y, cell.length) )\r\n\t\t\t{\r\n\t\t\t\t\/\/the text from the last cell to the newly found cell\r\n\t\t\t\tthis.formulaParts.push(new FormulaPart(this.formulaText.substring(lastIndex, y), \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tFormulaPart.TEXT_TYPE));\r\n\t\t\t\t\/\/is this a range or just a single cell\r\n\t\t\t\tif ( cell.indexOf(':') != -1 )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.formulaParts.push(new Range(cell));\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t\/\/the newly found cell\r\n\t\t\t\t\tthis.formulaParts.push(new FormulaPart(cell, FormulaPart.CELL_TYPE));\r\n\t\t\t\t}\r\n\r\n\t\t\t\ty += cell.length;\r\n\t\t\t\tlastIndex = y;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\ty++\r\n\t\t}\r\n\t}\r\n\r\n\t\/\/see if there is any text after the last cell or range\r\n\tif ( lastIndex != this.formulaText.length )\r\n\t{\r\n\t\tthis.formulaParts.push(new FormulaPart(this.formulaText.substring(lastIndex, \r\n\t\t\t\t\t\t\t\tthis.formulaText.length), FormulaPart.TEXT_TYPE));\r\n\t}\r","this":"Formula"}}},"Formula.rollCols":{"_":{"meta":{"summary":"","parameters":{"rightDir":{"type":""},"incNum":{"type":""}},"src":"{\r\n\tthis.formulaChanged = true;\r\n\tfor(var x=0; x < this.formulaParts.length; x++)\r\n\t{\r\n\t\tthis.formulaParts[x].rollCols(rightDir, incNum);\r\n\t}\r","this":"Formula"}}},"Formula.rollRows":{"_":{"meta":{"summary":"","parameters":{"bellowDir":{"type":""},"incNum":{"type":""}},"src":"{\r\n\tthis.formulaChanged = true;\r\n\tfor(var x=0; x < this.formulaParts.length; x++)\r\n\t{\r\n\t\tthis.formulaParts[x].rollRows(bellowDir, incNum);\r\n\t}\r","this":"Formula"}}},"Formula.toString":{"_":{"meta":{"summary":"","src":"{\r\n\t\/\/need to roll up the parts if they changed but if we don't have any\r\n\t\/\/parts then just return the formulaText\r\n\tif ( this.formulaChanged && this.formulaParts.length > 0)\r\n\t{\r\n\t\tthis.formulaChanged = false;\r\n\t\tthis.formulaText = \"\";\r\n\t\tfor(var x=0; x < this.formulaParts.length; x++)\r\n\t\t{\r\n\t\t\tthis.formulaText += this.formulaParts[x].toString();\r\n\t\t}\r\n\t}\r\n\r\n\treturn this.formulaText;\r","this":"Formula"}}},"FormulaPart":{"_":{"meta":{"summary":"","parameters":{"text":{"type":""},"type":{"type":""}},"src":"{\r\n\tthis.text = text;\r\n\tthis.type = type;\r\n\r\n\tif ( type == FormulaPart.CELL_TYPE )\r\n\t{\r\n\t\t\/\/this first char is always part of the column\r\n\t\tvar colLength = 1;\r\n\t\t\/\/this convers the letter of the column to a number\r\n\t\tthis.col = text.charCodeAt(0)-65;\r\n\r\n\t\t\/\/I lied above the first char is not part of the column if they did a row select\r\n\t\tif ( this.col <= 0 )\r\n\t\t{\r\n\t\t\tthis.col = null; \r\n\t\t\tthis.row = parseInt(text)-1;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t\/\/In a column select don't always have more than one char\r\n\t\tif ( text.length > 1 )\r\n\t\t{\r\n\t\t\tvar secondChar = text.charCodeAt(1)-65;\r\n\t\t\t\/\/if the second char is a letter then the column is two chars and the rest is the row\r\n\t\t\tif ( secondChar > 0 )\r\n\t\t\t{\r\n\t\t\t\tthis.col += secondChar;\r\n\t\t\t\tcolLength = 2;\r\n\t\t\t}\r\n\r\n\t\t\t\/\/don't have a row part of they did a column select\r\n\t\t\tif ( text.length > colLength )\r\n\t\t\t{\r\n\t\t\t\t\/\/the row is the rest of the cell after the column\r\n\t\t\t\tthis.row = parseInt(text.substring(colLength))-1;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r","this":"Formula","this_variables":["type","type","type","startCell","endCell"]}}},"FormulaPart.rollCols":{"_":{"meta":{"summary":"","parameters":{"rightDir":{"type":""},"incNum":{"type":""}},"src":"{\r\n\tif ( this.type == FormulaPart.CELL_TYPE && this.col )\r\n\t{\r\n\t\tif ( rightDir )\r\n\t\t{\r\n\t\t\tthis.col += incNum;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.col -= incNum;\r\n\t\t}\r\n\t}\r","this":"FormulaPart"}}},"FormulaPart.rollRows":{"_":{"meta":{"summary":"","parameters":{"bellowDir":{"type":""},"incNum":{"type":""}},"src":"{\r\n\tif ( this.type == FormulaPart.CELL_TYPE && this.row )\r\n\t{\r\n\t\tif ( bellowDir )\r\n\t\t{\r\n\t\t\tthis.row += incNum;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.row -= incNum;\r\n\t\t}\r\n\t}\r","this":"FormulaPart"}}},"FormulaPart.toString":{"_":{"meta":{"summary":"","src":"{\r\n\tif ( this.type == FormulaPart.CELL_TYPE )\r\n\t{\r\n\t\tif ( (this.col && this.col < 1) || this.row < 1 )\r\n\t\t{\r\n\t\t\treturn \"#REF!\";\r\n\t\t}\r\n\t\telse if ( !this.col )\r\n\t\t{\r\n\t\t\treturn this.row;\r\n\t\t}\r\n\t\telse if ( !this.row )\r\n\t\t{\r\n\t\t\treturn Formula.COLUMN_CHARS[this.col];\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\treturn Formula.COLUMN_CHARS[this.col] + (this.row+1);\r\n\t\t}\r\n\t}\r\n\telse\r\n\t{\t\r\n\t\treturn this.text;\r\n\t}\r","this":"FormulaPart"}}},"Range":{"_":{"meta":{"summary":"","parameters":{"text":{"type":""}},"src":"{\r\n\tvar cells = text.split(':');\r\n\r\n\tthis.startCell = new FormulaPart(cells[0], FormulaPart.CELL_TYPE);\r\n\tthis.endCell   = new FormulaPart(cells[1], FormulaPart.CELL_TYPE);\r","this":"FormulaPart"}}},"Range.rollCols":{"_":{"meta":{"summary":"","parameters":{"rightDir":{"type":""},"incNum":{"type":""}},"src":"{\r\n\tthis.startCell.rollCols(rightDir, incNum);\r\n\tthis.endCell.rollCols(rightDir, incNum);\r","this":"Range"}}},"Range.rollRows":{"_":{"meta":{"summary":"","parameters":{"bellowDir":{"type":""},"incNum":{"type":""}},"src":"{\r\n\tthis.startCell.rollRows(bellowDir, incNum);\r\n\tthis.endCell.rollRows(bellowDir, incNum);\r","this":"Range"}}},"Range.toString":{"_":{"meta":{"summary":"","src":"{\r\n\treturn this.startCell.toString() + \":\" + this.endCell.toString();\r","this":"Range"}}}}}},"dojo.widget.jot.jottable.JotTransport":{"meta":{"requires":{"common":["dojo.rpc.JotService","dojo.json","dojo.uri.*","dojo.io.*"]},"methods":{"JotTransport":{"_":{"meta":{"summary":"","parameters":{"rootPath":{"type":""}},"src":"{\r\n\tthis.path = rootPath + \"Tracker\/TrDispatch\";\r\n\tthis.clientOnly = false;\r\n\tthis.queuedSends = new Array();\r","this_variables":["path","clientOnly","queuedSends","clientOnly","queuedSends","clientOnly","queuedSends","clientOnly","queuedSends","clientOnly","queuedSends","clientOnly","queuedSends","clientOnly","queuedSends","clientOnly","queuedSends","clientOnly","queuedSends","clientOnly","queuedSends","clientOnly","queuedSends","clientOnly","queuedSends"]}}},"JotTransport.setClientOnly":{"_":{"meta":{"summary":"","parameters":{"clientOnly":{"type":""}},"src":"\t\tthis.clientOnly = clientOnly;\r\n\t},\r\n\r\n\tsend: function(obj, handlerFunc, queueSend) \r\n\t{\r\n\t\tif ( this.clientOnly )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( queueSend )\r\n\t\t{\r\n\t\t\tthis.queuedSends.push(obj);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t\/\/alert(obj.actionType);\r\n\t\t\/\/handlerFunc();\r\n\t\t\/\/handlerFunc(null, {jotType: \"TrError\", errorType: \"LockFailure\", errorText: \"No Lock for you\"});\r\n\t\t\/\/return;\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\turl: this.path,\r\n\t\t\tmethod: \"post\",\r\n\t\t\tcontent: {payload: dojo.json.serialize(obj)},\r\n\t\t\tmimetype: \"text\/json\",\r\n\t\t\thandler: handlerFunc \r\n\t\t});\r\n\t},\r\n\r\n\tsendQueued: function(handlerFunc)\r\n\t{\r\n\t\tif ( this.queuedSends.length > 0 )\r\n\t\t{\r\n\t\t\tvar obj = this.queuedSends;\r\n\t\t\tthis.queuedSends = new Array();\r\n\t\t\t\/\/alert(\"sending queued action = \" + dojo.json.serialize(obj)),\r\n\t\t\tthis.send(obj, handlerFunc);\r\n\t\t}\r\n\t},\r\n\r\n\tpublish: function(obj) \r\n\t{\r\n\t\tif ( clientOnly )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\tpath: this.topPage,\r\n\t\t\ttopic: this.topicName,\r\n\t\t\tcontent: dojo.json.serialize(obj)\r\n\t\t});\r","this":"JotTransport"}}},"JotTransport.send":{"_":{"meta":{"summary":"","parameters":{"clientOnly":{"type":""}},"src":"\t\tthis.clientOnly = clientOnly;\r\n\t},\r\n\r\n\tsend: function(obj, handlerFunc, queueSend) \r\n\t{\r\n\t\tif ( this.clientOnly )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( queueSend )\r\n\t\t{\r\n\t\t\tthis.queuedSends.push(obj);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t\/\/alert(obj.actionType);\r\n\t\t\/\/handlerFunc();\r\n\t\t\/\/handlerFunc(null, {jotType: \"TrError\", errorType: \"LockFailure\", errorText: \"No Lock for you\"});\r\n\t\t\/\/return;\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\turl: this.path,\r\n\t\t\tmethod: \"post\",\r\n\t\t\tcontent: {payload: dojo.json.serialize(obj)},\r\n\t\t\tmimetype: \"text\/json\",\r\n\t\t\thandler: handlerFunc \r\n\t\t});\r\n\t},\r\n\r\n\tsendQueued: function(handlerFunc)\r\n\t{\r\n\t\tif ( this.queuedSends.length > 0 )\r\n\t\t{\r\n\t\t\tvar obj = this.queuedSends;\r\n\t\t\tthis.queuedSends = new Array();\r\n\t\t\t\/\/alert(\"sending queued action = \" + dojo.json.serialize(obj)),\r\n\t\t\tthis.send(obj, handlerFunc);\r\n\t\t}\r\n\t},\r\n\r\n\tpublish: function(obj) \r\n\t{\r\n\t\tif ( clientOnly )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\tpath: this.topPage,\r\n\t\t\ttopic: this.topicName,\r\n\t\t\tcontent: dojo.json.serialize(obj)\r\n\t\t});\r","this":"JotTransport"}}},"JotTransport.url":{"_":{"meta":{"summary":"","parameters":{"clientOnly":{"type":""}},"src":"\t\tthis.clientOnly = clientOnly;\r\n\t},\r\n\r\n\tsend: function(obj, handlerFunc, queueSend) \r\n\t{\r\n\t\tif ( this.clientOnly )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( queueSend )\r\n\t\t{\r\n\t\t\tthis.queuedSends.push(obj);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t\/\/alert(obj.actionType);\r\n\t\t\/\/handlerFunc();\r\n\t\t\/\/handlerFunc(null, {jotType: \"TrError\", errorType: \"LockFailure\", errorText: \"No Lock for you\"});\r\n\t\t\/\/return;\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\turl: this.path,\r\n\t\t\tmethod: \"post\",\r\n\t\t\tcontent: {payload: dojo.json.serialize(obj)},\r\n\t\t\tmimetype: \"text\/json\",\r\n\t\t\thandler: handlerFunc \r\n\t\t});\r\n\t},\r\n\r\n\tsendQueued: function(handlerFunc)\r\n\t{\r\n\t\tif ( this.queuedSends.length > 0 )\r\n\t\t{\r\n\t\t\tvar obj = this.queuedSends;\r\n\t\t\tthis.queuedSends = new Array();\r\n\t\t\t\/\/alert(\"sending queued action = \" + dojo.json.serialize(obj)),\r\n\t\t\tthis.send(obj, handlerFunc);\r\n\t\t}\r\n\t},\r\n\r\n\tpublish: function(obj) \r\n\t{\r\n\t\tif ( clientOnly )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\tpath: this.topPage,\r\n\t\t\ttopic: this.topicName,\r\n\t\t\tcontent: dojo.json.serialize(obj)\r\n\t\t});\r","this":"JotTransport"}}},"JotTransport.method":{"_":{"meta":{"summary":"","parameters":{"clientOnly":{"type":""}},"src":"\t\tthis.clientOnly = clientOnly;\r\n\t},\r\n\r\n\tsend: function(obj, handlerFunc, queueSend) \r\n\t{\r\n\t\tif ( this.clientOnly )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( queueSend )\r\n\t\t{\r\n\t\t\tthis.queuedSends.push(obj);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t\/\/alert(obj.actionType);\r\n\t\t\/\/handlerFunc();\r\n\t\t\/\/handlerFunc(null, {jotType: \"TrError\", errorType: \"LockFailure\", errorText: \"No Lock for you\"});\r\n\t\t\/\/return;\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\turl: this.path,\r\n\t\t\tmethod: \"post\",\r\n\t\t\tcontent: {payload: dojo.json.serialize(obj)},\r\n\t\t\tmimetype: \"text\/json\",\r\n\t\t\thandler: handlerFunc \r\n\t\t});\r\n\t},\r\n\r\n\tsendQueued: function(handlerFunc)\r\n\t{\r\n\t\tif ( this.queuedSends.length > 0 )\r\n\t\t{\r\n\t\t\tvar obj = this.queuedSends;\r\n\t\t\tthis.queuedSends = new Array();\r\n\t\t\t\/\/alert(\"sending queued action = \" + dojo.json.serialize(obj)),\r\n\t\t\tthis.send(obj, handlerFunc);\r\n\t\t}\r\n\t},\r\n\r\n\tpublish: function(obj) \r\n\t{\r\n\t\tif ( clientOnly )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\tpath: this.topPage,\r\n\t\t\ttopic: this.topicName,\r\n\t\t\tcontent: dojo.json.serialize(obj)\r\n\t\t});\r","this":"JotTransport"}}},"JotTransport.content":{"_":{"meta":{"summary":"","parameters":{"clientOnly":{"type":""}},"src":"\t\tthis.clientOnly = clientOnly;\r\n\t},\r\n\r\n\tsend: function(obj, handlerFunc, queueSend) \r\n\t{\r\n\t\tif ( this.clientOnly )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( queueSend )\r\n\t\t{\r\n\t\t\tthis.queuedSends.push(obj);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t\/\/alert(obj.actionType);\r\n\t\t\/\/handlerFunc();\r\n\t\t\/\/handlerFunc(null, {jotType: \"TrError\", errorType: \"LockFailure\", errorText: \"No Lock for you\"});\r\n\t\t\/\/return;\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\turl: this.path,\r\n\t\t\tmethod: \"post\",\r\n\t\t\tcontent: {payload: dojo.json.serialize(obj)},\r\n\t\t\tmimetype: \"text\/json\",\r\n\t\t\thandler: handlerFunc \r\n\t\t});\r\n\t},\r\n\r\n\tsendQueued: function(handlerFunc)\r\n\t{\r\n\t\tif ( this.queuedSends.length > 0 )\r\n\t\t{\r\n\t\t\tvar obj = this.queuedSends;\r\n\t\t\tthis.queuedSends = new Array();\r\n\t\t\t\/\/alert(\"sending queued action = \" + dojo.json.serialize(obj)),\r\n\t\t\tthis.send(obj, handlerFunc);\r\n\t\t}\r\n\t},\r\n\r\n\tpublish: function(obj) \r\n\t{\r\n\t\tif ( clientOnly )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\tpath: this.topPage,\r\n\t\t\ttopic: this.topicName,\r\n\t\t\tcontent: dojo.json.serialize(obj)\r\n\t\t});\r","this":"JotTransport"}}},"JotTransport.mimetype":{"_":{"meta":{"summary":"","parameters":{"clientOnly":{"type":""}},"src":"\t\tthis.clientOnly = clientOnly;\r\n\t},\r\n\r\n\tsend: function(obj, handlerFunc, queueSend) \r\n\t{\r\n\t\tif ( this.clientOnly )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( queueSend )\r\n\t\t{\r\n\t\t\tthis.queuedSends.push(obj);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t\/\/alert(obj.actionType);\r\n\t\t\/\/handlerFunc();\r\n\t\t\/\/handlerFunc(null, {jotType: \"TrError\", errorType: \"LockFailure\", errorText: \"No Lock for you\"});\r\n\t\t\/\/return;\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\turl: this.path,\r\n\t\t\tmethod: \"post\",\r\n\t\t\tcontent: {payload: dojo.json.serialize(obj)},\r\n\t\t\tmimetype: \"text\/json\",\r\n\t\t\thandler: handlerFunc \r\n\t\t});\r\n\t},\r\n\r\n\tsendQueued: function(handlerFunc)\r\n\t{\r\n\t\tif ( this.queuedSends.length > 0 )\r\n\t\t{\r\n\t\t\tvar obj = this.queuedSends;\r\n\t\t\tthis.queuedSends = new Array();\r\n\t\t\t\/\/alert(\"sending queued action = \" + dojo.json.serialize(obj)),\r\n\t\t\tthis.send(obj, handlerFunc);\r\n\t\t}\r\n\t},\r\n\r\n\tpublish: function(obj) \r\n\t{\r\n\t\tif ( clientOnly )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\tpath: this.topPage,\r\n\t\t\ttopic: this.topicName,\r\n\t\t\tcontent: dojo.json.serialize(obj)\r\n\t\t});\r","this":"JotTransport"}}},"JotTransport.handler":{"_":{"meta":{"summary":"","parameters":{"clientOnly":{"type":""}},"src":"\t\tthis.clientOnly = clientOnly;\r\n\t},\r\n\r\n\tsend: function(obj, handlerFunc, queueSend) \r\n\t{\r\n\t\tif ( this.clientOnly )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( queueSend )\r\n\t\t{\r\n\t\t\tthis.queuedSends.push(obj);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t\/\/alert(obj.actionType);\r\n\t\t\/\/handlerFunc();\r\n\t\t\/\/handlerFunc(null, {jotType: \"TrError\", errorType: \"LockFailure\", errorText: \"No Lock for you\"});\r\n\t\t\/\/return;\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\turl: this.path,\r\n\t\t\tmethod: \"post\",\r\n\t\t\tcontent: {payload: dojo.json.serialize(obj)},\r\n\t\t\tmimetype: \"text\/json\",\r\n\t\t\thandler: handlerFunc \r\n\t\t});\r\n\t},\r\n\r\n\tsendQueued: function(handlerFunc)\r\n\t{\r\n\t\tif ( this.queuedSends.length > 0 )\r\n\t\t{\r\n\t\t\tvar obj = this.queuedSends;\r\n\t\t\tthis.queuedSends = new Array();\r\n\t\t\t\/\/alert(\"sending queued action = \" + dojo.json.serialize(obj)),\r\n\t\t\tthis.send(obj, handlerFunc);\r\n\t\t}\r\n\t},\r\n\r\n\tpublish: function(obj) \r\n\t{\r\n\t\tif ( clientOnly )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\tpath: this.topPage,\r\n\t\t\ttopic: this.topicName,\r\n\t\t\tcontent: dojo.json.serialize(obj)\r\n\t\t});\r","this":"JotTransport"}}},"JotTransport.sendQueued":{"_":{"meta":{"summary":"","parameters":{"clientOnly":{"type":""}},"src":"\t\tthis.clientOnly = clientOnly;\r\n\t},\r\n\r\n\tsend: function(obj, handlerFunc, queueSend) \r\n\t{\r\n\t\tif ( this.clientOnly )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( queueSend )\r\n\t\t{\r\n\t\t\tthis.queuedSends.push(obj);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t\/\/alert(obj.actionType);\r\n\t\t\/\/handlerFunc();\r\n\t\t\/\/handlerFunc(null, {jotType: \"TrError\", errorType: \"LockFailure\", errorText: \"No Lock for you\"});\r\n\t\t\/\/return;\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\turl: this.path,\r\n\t\t\tmethod: \"post\",\r\n\t\t\tcontent: {payload: dojo.json.serialize(obj)},\r\n\t\t\tmimetype: \"text\/json\",\r\n\t\t\thandler: handlerFunc \r\n\t\t});\r\n\t},\r\n\r\n\tsendQueued: function(handlerFunc)\r\n\t{\r\n\t\tif ( this.queuedSends.length > 0 )\r\n\t\t{\r\n\t\t\tvar obj = this.queuedSends;\r\n\t\t\tthis.queuedSends = new Array();\r\n\t\t\t\/\/alert(\"sending queued action = \" + dojo.json.serialize(obj)),\r\n\t\t\tthis.send(obj, handlerFunc);\r\n\t\t}\r\n\t},\r\n\r\n\tpublish: function(obj) \r\n\t{\r\n\t\tif ( clientOnly )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\tpath: this.topPage,\r\n\t\t\ttopic: this.topicName,\r\n\t\t\tcontent: dojo.json.serialize(obj)\r\n\t\t});\r","this":"JotTransport"}}},"JotTransport.publish":{"_":{"meta":{"summary":"","parameters":{"clientOnly":{"type":""}},"src":"\t\tthis.clientOnly = clientOnly;\r\n\t},\r\n\r\n\tsend: function(obj, handlerFunc, queueSend) \r\n\t{\r\n\t\tif ( this.clientOnly )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( queueSend )\r\n\t\t{\r\n\t\t\tthis.queuedSends.push(obj);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t\/\/alert(obj.actionType);\r\n\t\t\/\/handlerFunc();\r\n\t\t\/\/handlerFunc(null, {jotType: \"TrError\", errorType: \"LockFailure\", errorText: \"No Lock for you\"});\r\n\t\t\/\/return;\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\turl: this.path,\r\n\t\t\tmethod: \"post\",\r\n\t\t\tcontent: {payload: dojo.json.serialize(obj)},\r\n\t\t\tmimetype: \"text\/json\",\r\n\t\t\thandler: handlerFunc \r\n\t\t});\r\n\t},\r\n\r\n\tsendQueued: function(handlerFunc)\r\n\t{\r\n\t\tif ( this.queuedSends.length > 0 )\r\n\t\t{\r\n\t\t\tvar obj = this.queuedSends;\r\n\t\t\tthis.queuedSends = new Array();\r\n\t\t\t\/\/alert(\"sending queued action = \" + dojo.json.serialize(obj)),\r\n\t\t\tthis.send(obj, handlerFunc);\r\n\t\t}\r\n\t},\r\n\r\n\tpublish: function(obj) \r\n\t{\r\n\t\tif ( clientOnly )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\tpath: this.topPage,\r\n\t\t\ttopic: this.topicName,\r\n\t\t\tcontent: dojo.json.serialize(obj)\r\n\t\t});\r","this":"JotTransport"}}},"JotTransport.path":{"_":{"meta":{"summary":"","parameters":{"clientOnly":{"type":""}},"src":"\t\tthis.clientOnly = clientOnly;\r\n\t},\r\n\r\n\tsend: function(obj, handlerFunc, queueSend) \r\n\t{\r\n\t\tif ( this.clientOnly )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( queueSend )\r\n\t\t{\r\n\t\t\tthis.queuedSends.push(obj);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t\/\/alert(obj.actionType);\r\n\t\t\/\/handlerFunc();\r\n\t\t\/\/handlerFunc(null, {jotType: \"TrError\", errorType: \"LockFailure\", errorText: \"No Lock for you\"});\r\n\t\t\/\/return;\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\turl: this.path,\r\n\t\t\tmethod: \"post\",\r\n\t\t\tcontent: {payload: dojo.json.serialize(obj)},\r\n\t\t\tmimetype: \"text\/json\",\r\n\t\t\thandler: handlerFunc \r\n\t\t});\r\n\t},\r\n\r\n\tsendQueued: function(handlerFunc)\r\n\t{\r\n\t\tif ( this.queuedSends.length > 0 )\r\n\t\t{\r\n\t\t\tvar obj = this.queuedSends;\r\n\t\t\tthis.queuedSends = new Array();\r\n\t\t\t\/\/alert(\"sending queued action = \" + dojo.json.serialize(obj)),\r\n\t\t\tthis.send(obj, handlerFunc);\r\n\t\t}\r\n\t},\r\n\r\n\tpublish: function(obj) \r\n\t{\r\n\t\tif ( clientOnly )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\tpath: this.topPage,\r\n\t\t\ttopic: this.topicName,\r\n\t\t\tcontent: dojo.json.serialize(obj)\r\n\t\t});\r","this":"JotTransport"}}},"JotTransport.topic":{"_":{"meta":{"summary":"","parameters":{"clientOnly":{"type":""}},"src":"\t\tthis.clientOnly = clientOnly;\r\n\t},\r\n\r\n\tsend: function(obj, handlerFunc, queueSend) \r\n\t{\r\n\t\tif ( this.clientOnly )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( queueSend )\r\n\t\t{\r\n\t\t\tthis.queuedSends.push(obj);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t\/\/alert(obj.actionType);\r\n\t\t\/\/handlerFunc();\r\n\t\t\/\/handlerFunc(null, {jotType: \"TrError\", errorType: \"LockFailure\", errorText: \"No Lock for you\"});\r\n\t\t\/\/return;\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\turl: this.path,\r\n\t\t\tmethod: \"post\",\r\n\t\t\tcontent: {payload: dojo.json.serialize(obj)},\r\n\t\t\tmimetype: \"text\/json\",\r\n\t\t\thandler: handlerFunc \r\n\t\t});\r\n\t},\r\n\r\n\tsendQueued: function(handlerFunc)\r\n\t{\r\n\t\tif ( this.queuedSends.length > 0 )\r\n\t\t{\r\n\t\t\tvar obj = this.queuedSends;\r\n\t\t\tthis.queuedSends = new Array();\r\n\t\t\t\/\/alert(\"sending queued action = \" + dojo.json.serialize(obj)),\r\n\t\t\tthis.send(obj, handlerFunc);\r\n\t\t}\r\n\t},\r\n\r\n\tpublish: function(obj) \r\n\t{\r\n\t\tif ( clientOnly )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdojo.io.bind({\r\n\t\t\tpath: this.topPage,\r\n\t\t\ttopic: this.topicName,\r\n\t\t\tcontent: dojo.json.serialize(obj)\r\n\t\t});\r","this":"JotTransport"}}}}}},"dojo.widget.jot.jottable.MultiSelectControl":{"meta":{"methods":{"MultiSelectControl":{"_":{"meta":{"summary":"","parameters":{"type":{"type":""},"table":{"type":""},"targetDoc":{"type":""},"callbackFunction":{"type":""}},"src":"{\r\n\tthis.type = type;\r\n\tthis.table = table;\r\n\tthis.targetDoc = targetDoc != null ? targetDoc : document;\r\n\tthis.callbackFunction = callbackFunction;\r\n\tthis.count = MultiSelectControl.count++;\r\n\r\n\tif ( type == MultiSelectControl.CELLS )\r\n\t{\r\n\t\t\/\/only on selected cell background per table\r\n\t\tif ( !this.table.msSelectedCellBackground )\r\n\t\t{\r\n\t\t\t\/\/Only have one selected cell background that is shared by all multi select controls. Because\r\n\t\t\t\/\/the user can't enter text in two cells at once and the selected cell background is used\r\n\t\t\t\/\/to highlight the selected cell in a CELLS type multi select.\r\n\t\t\t\/\/<div id=\"msSelectedCellBackground\" style=\"position: absolute; visibiltiy: hidden; z-index: -4; background-color: white;\"><\/div>\r\n\t\t\tthis.table.msSelectedCellBackground = this.targetDoc.createElement(\"div\");\r\n\t\t\tthis.table.msSelectedCellBackground.id               = \"multiSelectBackground\"+this.table.instanceNum;\r\n\t\t\tthis.table.msSelectedCellBackground.style.position   = \"absolute\";\r\n\t\t\tthis.table.msSelectedCellBackground.style.visibility = \"hidden\";\r\n\t\t\tthis.table.msSelectedCellBackground.style.zIndex     = \"-4\";\r\n\t\t\tthis.table.msSelectedCellBackground.style.backgroundColor = \"white\";\r\n\r\n\t\t\t\/\/functions for multi-select selectedCell background\r\n\t\t\tthis.table.msSelectedCellBackground.setLocAndSize = function(cell)\r\n\t\t\t{\r\n\t\t\t\tthis.style.top = cell.offsetTop + \"px\";\r\n\t\t\t\tthis.style.left = cell.offsetLeft + \"px\";\r\n\t\t\t\tthis.style.width = cell.offsetWidth + \"px\";\r\n\t\t\t\tthis.style.height = cell.offsetHeight + \"px\";\r\n\t\t\t\tthis.style.visibility = \"visible\";\r\n\t\t\t}\r\n\t\t\tthis.table.msSelectedCellBackground.addToWidth = function(cell)\r\n\t\t\t{\r\n\t\t\t\tthis.style.width = this.offsetWidth + cell.offsetWidth + \"px\";\r\n\t\t\t}\r\n\t\t\tthis.targetDoc.body.appendChild(this.table.msSelectedCellBackground);\r\n\t\t}\r\n\r\n\t\t\/\/Nodes used during multi select\r\n\r\n\t\t\/\/<div id=\"multiSelectBackground\" style=\"position: absolute; visibiltiy: hidden; z-index: -5; background-color: lightblue;\"><\/div>\r\n\t\tthis.msBackground = this.targetDoc.createElement(\"div\");\r\n\t\tthis.msBackground.id               = \"multiSelectBackground\" + this.count;\r\n\t\tthis.msBackground.style.position   = \"absolute\";\r\n\t\tthis.msBackground.style.visibility = \"hidden\";\r\n\t\tthis.msBackground.style.zIndex     = \"-5\";\r\n\t\tthis.msBackground.style.backgroundColor = \"lightblue\";\r\n\t\tthis.targetDoc.body.appendChild(this.msBackground);\r\n\r\n\t\tthis.createMSBorders(\"3px solid black\");\r\n\r\n\r\n\t\t\/\/Nodes used during replication \r\n\r\n\t\tif ( document.all ) \r\n\t\t{\r\n\t\t\t\/\/document.write(\"<div id=\\\"replicator\\\" style=\\\"position: absolute; font-size: 1px; background-color: black; width: 7px; height: 7px; cursor: crosshair; z-index: 1;\\\"><\/div>\");\r\n\t\t\tthis.replicator = this.targetDoc.createElement(\"div\");\r\n\t\t\tthis.replicator.id             = \"replicator\" + this.count;\r\n\t\t\tthis.replicator.style.position = \"absolute\";\r\n\t\t\tthis.replicator.style.fontSize = \"1px\";\r\n\t\t\tthis.replicator.style.width    = \"7px\";\r\n\t\t\tthis.replicator.style.height   = \"7px\";\r\n\t\t\tthis.replicator.style.cursor   = \"crosshair\";\r\n\t\t\tthis.replicator.style.zIndex   = \"1\";\r\n\t\t\tthis.replicator.style.backgroundColor = \"black\";\r\n\t\t\tthis.targetDoc.body.appendChild(this.replicator);\r\n\t\t}\r\n\t\t\/\/This is a stange bug.  Gecko doesn't like to give mouse events all the time if useing a div\r\n\t\t\/\/for the replicator.  So found that I works great with an image thought.\r\n\t\telse \r\n\t\t{\r\n\t\t\t\/\/document.write(\"<img width=\\\"7\\\" height=\\\"7\\\" id=\\\"replicator\\\" style=\\\"position: absolute; background-color: black; width: 7px; height: 7px; cursor: crosshair; z-index: 1;\\\"><\/img>\");\r\n\t\t\tthis.replicator = this.targetDoc.createElement(\"img\");\r\n\t\t\tthis.replicator.id             = \"replicator\" + this.count;\r\n\t\t\tthis.replicator.style.position = \"absolute\";\r\n\t\t\tthis.replicator.style.width    = \"7px\";\r\n\t\t\tthis.replicator.style.height   = \"7px\";\r\n\t\t\tthis.replicator.style.cursor   = \"crosshair\";\r\n\t\t\tthis.replicator.style.zIndex   = \"1\";\r\n\t\t\tthis.replicator.style.backgroundColor = \"black\";\r\n\t\t\tthis.targetDoc.body.appendChild(this.replicator);\r\n\t\t}\r\n\t\tdojo.event.connect(this.replicator, \"onmousedown\", this, \"replicateStart\");\r\n\t\tdojo.event.connect(this.replicator, \"onmouseup\", this.table, \"resetMouseSelect\");\r\n\t\tthis.repState = new Object();\r\n\r\n\t\t\/\/<div id=\"replicatorBackground\" style=\"position: absolute; visibility: hidden; z-index: 0; background-color: gray;\"><\/div>\r\n\t\tthis.replicatorBackground = this.targetDoc.createElement(\"div\");\r\n\t\tthis.replicatorBackground.id               = \"replicatorBackground\" + this.count;\r\n\t\tthis.replicatorBackground.style.position   = \"absolute\";\r\n\t\tthis.replicatorBackground.style.visibility = \"hidden\";\r\n\t\tthis.replicatorBackground.style.zIndex     = \"0\";\r\n\t\tthis.replicatorBackground.style.backgroundColor = \"gray\";\r\n\t\tthis.targetDoc.body.appendChild(this.replicatorBackground);\r\n\t\tdojo.event.connect(this.replicatorBackground, \"onmouseup\", this.table, \"resetMouseSelect\");\r\n\t\tdojo.event.connect(this.replicatorBackground, \"onmousemove\", this, \"replicatorMouseMove\");\r\n\r\n\t\t\/\/<div id=\"repBorderTop\" style=\"position: absolute; height: 0px; visibiltiy: hidden; font-size: 1px; border-top: 3px dashed black; cursor: crosshair;\"><\/div>\r\n\t\tthis.repBorderTop = this.targetDoc.createElement(\"div\");\r\n\t\tthis.repBorderTop.id               = \"repBorderTop\" + this.count;\r\n\t\tthis.repBorderTop.style.position   = \"absolute\";\r\n\t\tthis.repBorderTop.style.height     = \"0px\";\r\n\t\tthis.repBorderTop.style.visibility = \"hidden\";\r\n\t\tthis.repBorderTop.style.fontSize   = \"1px\";\r\n\t\tthis.repBorderTop.style.borderTop  = \"3px dashed black\";\r\n\t\tthis.repBorderTop.style.cursor     = \"crosshair\";\r\n\t\tthis.targetDoc.body.appendChild(this.repBorderTop);\r\n\t\tdojo.event.connect(this.repBorderTop, \"onmouseup\", this.table, \"resetMouseSelect\");\r\n\r\n\t\t\/\/<div id=\"repBorderRight\" style=\"position: absolute; width: 0px; visibiltiy: hidden; font-size: 1px; border-right: 3px dashed black; cursor: crosshair;\"><\/div>\r\n\t\tthis.repBorderRight = this.targetDoc.createElement(\"div\");\r\n\t\tthis.repBorderRight.id               = \"repBorderRight\" + this.count;\r\n\t\tthis.repBorderRight.style.position   = \"absolute\";\r\n\t\tthis.repBorderRight.style.width      = \"0px\";\r\n\t\tthis.repBorderRight.style.visibility = \"hidden\";\r\n\t\tthis.repBorderRight.style.fontSize   = \"1px\";\r\n\t\tthis.repBorderRight.style.borderRight= \"3px dashed black\";\r\n\t\tthis.repBorderRight.style.cursor     = \"crosshair\";\r\n\t\tthis.targetDoc.body.appendChild(this.repBorderRight);\r\n\t\tdojo.event.connect(this.repBorderRight, \"onmouseup\", this.table, \"resetMouseSelect\");\r\n\r\n\t\t\/\/<div id=\"repBorderBottom\" style=\"position: absolute; height: 0px; visibiltiy: hidden; font-size: 1px; border-bottom: 3px dashed black; cursor: crosshair;\"><\/div>\r\n\t\tthis.repBorderBottom = this.targetDoc.createElement(\"div\");\r\n\t\tthis.repBorderBottom.id               = \"repBorderBottom\" + this.count;\r\n\t\tthis.repBorderBottom.style.position   = \"absolute\";\r\n\t\tthis.repBorderBottom.style.height     = \"0px\";\r\n\t\tthis.repBorderBottom.style.visibility = \"hidden\";\r\n\t\tthis.repBorderBottom.style.fontSize   = \"1px\";\r\n\t\tthis.repBorderBottom.style.cursor     = \"crosshair\";\r\n\t\tthis.repBorderBottom.style.borderBottom = \"3px dashed black\";\r\n\t\tthis.targetDoc.body.appendChild(this.repBorderBottom);\r\n\t\tdojo.event.connect(this.repBorderBottom, \"onmouseup\", this.table, \"resetMouseSelect\");\r\n\r\n\t\t\/\/<div id=\"repBorderLeft\" style=\"position: absolute; width: 0px; visibiltiy: hidden; font-size: 1px; border-left: 3px dashed black; cursor: crosshair;\"><\/div>\r\n\t\tthis.repBorderLeft = this.targetDoc.createElement(\"div\");\r\n\t\tthis.repBorderLeft.id               = \"repBorderLeft\" + this.count;\r\n\t\tthis.repBorderLeft.style.position   = \"absolute\";\r\n\t\tthis.repBorderLeft.style.width      = \"0px\";\r\n\t\tthis.repBorderLeft.style.visibility = \"hidden\";\r\n\t\tthis.repBorderLeft.style.fontSize   = \"1px\";\r\n\t\tthis.repBorderLeft.style.borderLeft = \"3px dashed black\";\r\n\t\tthis.repBorderLeft.style.cursor     = \"crosshair\";\r\n\t\tthis.targetDoc.body.appendChild(this.repBorderLeft);\r\n\t\tdojo.event.connect(this.repBorderLeft, \"onmouseup\", this.table, \"resetMouseSelect\");\r\n\t}\r\n\t\/\/FORMULA multi select type\r\n\telse if ( type == MultiSelectControl.FORMULA )\r\n\t{\r\n\t\tthis.createMSBorders(\"2px dotted black\");\r\n\t}\r","this_variables":["type","table","targetDoc","callbackFunction","count","table.msSelectedCellBackground","table.msSelectedCellBackground.id","table.msSelectedCellBackground.style.position","table.msSelectedCellBackground.style.visibility","table.msSelectedCellBackground.style.zIndex","table.msSelectedCellBackground.style.backgroundColor","table.msSelectedCellBackground.setLocAndSize","style.top","style.left","style.width","style.height","style.visibility","table.msSelectedCellBackground.addToWidth","msBackground","msBackground.id","msBackground.style.position","msBackground.style.visibility","msBackground.style.zIndex","msBackground.style.backgroundColor","replicator","replicator.style.position","replicator.style.fontSize","replicator.style.width","replicator.style.height","replicator.style.cursor","replicator.style.zIndex","replicator.style.backgroundColor","repState","replicatorBackground","replicatorBackground.style.position","replicatorBackground.style.visibility","replicatorBackground.style.zIndex","replicatorBackground.style.backgroundColor","repBorderTop","repBorderTop.style.position","repBorderTop.style.height","repBorderTop.style.visibility","repBorderTop.style.fontSize","repBorderTop.style.borderTop","repBorderTop.style.cursor","repBorderRight","repBorderRight.style.position","repBorderRight.style.width","repBorderRight.style.visibility","repBorderRight.style.fontSize","repBorderRight.style.borderRight","repBorderRight.style.cursor","repBorderBottom","repBorderBottom.style.position","repBorderBottom.style.height","repBorderBottom.style.visibility","repBorderBottom.style.fontSize","repBorderBottom.style.cursor","repBorderBottom.style.borderBottom","repBorderLeft","repBorderLeft.style.position","repBorderLeft.style.width","repBorderLeft.style.visibility","repBorderLeft.style.fontSize","repBorderLeft.style.borderLeft","repBorderLeft.style.cursor","msBorderTop","msBorderTop.style.position","msBorderTop.style.height","msBorderTop.style.visibility","msBorderTop.style.fontSize","msBorderTop.style.borderTop","msBorderRight","msBorderRight.style.position","msBorderRight.style.width","msBorderRight.style.visibility","msBorderRight.style.fontSize","msBorderRight.style.borderRight","msBorderBottom","msBorderBottom.style.position","msBorderBottom.style.height","msBorderBottom.style.visibility","msBorderBottom.style.fontSize","msBorderBottom.style.borderBottom","msBorderLeft","msBorderLeft.style.position","msBorderLeft.style.width","msBorderLeft.style.visibility","msBorderLeft.style.fontSize","msBorderLeft.style.borderLeft","firstCell","firstCellCol","firstCellRow","table.selectType","type","controlCell","topCol","topRow","bottomCol","bottomRow","quirksMode","repTopCol","repTopRow","repBottomCol","repBottomRow","table.multiSelectKeep","controlCellCol","controlCellRow","colSelect","rowSelect","table.inMultiSelect","type","msBorderTop.style.top","msBorderTop.style.left","msBorderTop.style.width","msBorderRight.style.top","msBorderRight.style.left","msBorderRight.style.height","msBorderBottom.style.top","msBorderBottom.style.left","msBorderBottom.style.width","msBorderLeft.style.top","msBorderLeft.style.left","msBorderLeft.style.height","msBorderTop.style.visibility","msBorderRight.style.visibility","msBorderBottom.style.visibility","msBorderLeft.style.visibility","replicator.style.top","replicator.style.left","table.selectType","controlCell","firstCell","quirksMode","msBackground.style.visibility","table.msSelectedCellBackground.style.visibility","msBorderTop.style.visibility","msBorderRight.style.visibility","msBorderBottom.style.visibility","msBorderLeft.style.visibility","table.replicating","table.sheet.style.cursor","repState.topCol","repState.topRow","repState.bottomCol","repState.bottomRow","repState.colLoc","repState.rowLoc","repState.lastDirection","topCol","bottomCol","topRow","bottomRow","repState.colLoc","repState.rowLoc","repState.lastDirection","repState.topCol","repState.topRow","repState.bottomCol","repState.bottomRow","replicatorBackground.style.visibility","repBorderTop.style.visibility","repBorderRight.style.visibility","repBorderBottom.style.visibility","repBorderLeft.style.visibility","repState.direction","repBorderTop.style.top","repBorderTop.style.left","repBorderTop.style.width","repBorderTop.style.visibility","repBorderRight.style.top","repBorderRight.style.left","repBorderRight.style.height","repBorderRight.style.visibility","repBorderBottom.style.top","repBorderBottom.style.left","repBorderBottom.style.width","repBorderBottom.style.visibility","repBorderLeft.style.top","repBorderLeft.style.left","repBorderLeft.style.height","repBorderLeft.style.visibility","lastCell","repState.topCol","repState.topRow","repState.bottomCol","repState.bottomRow","repState.colLoc","repState.rowLoc","repState.lastDirection","table.replicating","table.sheet.style.cursor","replicatorBackground.style.visibility","repBorderTop.style.visibility","repBorderRight.style.visibility","repBorderBottom.style.visibility","repBorderLeft.style.visibility","repState.colLoc","repState.lastDirection","repState.rowLoc"]}}},"MultiSelectControl.table.msSelectedCellBackground.setLocAndSize":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""}},"src":"\t\t\t\tthis.style.top = cell.offsetTop + \"px\";\r\n\t\t\t\tthis.style.left = cell.offsetLeft + \"px\";\r\n\t\t\t\tthis.style.width = cell.offsetWidth + \"px\";\r\n\t\t\t\tthis.style.height = cell.offsetHeight + \"px\";\r\n\t\t\t\tthis.style.visibility = \"visible\";\r","this_variables":["style.top","style.left","style.width","style.height","style.visibility"]}}},"MultiSelectControl.table.msSelectedCellBackground.addToWidth":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""}},"src":"\t\t\t\tthis.style.width = this.offsetWidth + cell.offsetWidth + \"px\";\r","this_variables":["style.width"]}}},"MultiSelectControl.createMSBorders":{"_":{"meta":{"summary":"","parameters":{"borderType":{"type":""}},"src":"\t\tthis.msBorderTop.id               = \"msBorderTop\" + this.count;\r\n\t\tthis.msBorderTop.style.position   = \"absolute\";\r\n\t\tthis.msBorderTop.style.height     = \"0px\";\r\n\t\tthis.msBorderTop.style.visibility = \"hidden\";\r\n\t\tthis.msBorderTop.style.fontSize   = \"1px\";\r\n\t\tthis.msBorderTop.style.borderTop  = borderType; \r\n\t\tthis.targetDoc.body.appendChild(this.msBorderTop);\r\n\t\tdojo.event.connect(this.msBorderTop, \"onmouseup\", this.table, \"resetMouseSelect\");\r\n\r\n\t\t\/\/<div id=\"msBorderRight\" style=\"position: absolute; width: 0px; visibiltiy: hidden; font-size: 1px; border-right: 3px solid black;\"><\/div>\r\n\t\tthis.msBorderRight = this.targetDoc.createElement(\"div\");\r\n\t\tthis.msBorderRight.id               = \"msBorderRight\" + this.count;\r\n\t\tthis.msBorderRight.style.position   = \"absolute\";\r\n\t\tthis.msBorderRight.style.width      = \"0px\";\r\n\t\tthis.msBorderRight.style.visibility = \"hidden\";\r\n\t\tthis.msBorderRight.style.fontSize   = \"1px\";\r\n\t\tthis.msBorderRight.style.borderRight= borderType; \r\n\t\tthis.targetDoc.body.appendChild(this.msBorderRight);\r\n\t\tdojo.event.connect(this.msBorderRight, \"onmouseup\", this.table, \"resetMouseSelect\");\r\n\r\n\t\t\/\/<div id=\"msBorderBottom\" style=\"position: absolute; height: 0px; visibiltiy: hidden; font-size: 1px; border-bottom: 3px solid black;\"><\/div>\r\n\t\tthis.msBorderBottom = this.targetDoc.createElement(\"div\");\r\n\t\tthis.msBorderBottom.id               = \"msBorderBottom\" + this.count;\r\n\t\tthis.msBorderBottom.style.position   = \"absolute\";\r\n\t\tthis.msBorderBottom.style.height     = \"0px\";\r\n\t\tthis.msBorderBottom.style.visibility = \"hidden\";\r\n\t\tthis.msBorderBottom.style.fontSize   = \"1px\";\r\n\t\tthis.msBorderBottom.style.borderBottom = borderType; \r\n\t\tthis.targetDoc.body.appendChild(this.msBorderBottom);\r\n\t\tdojo.event.connect(this.msBorderBottom, \"onmouseup\", this.table, \"resetMouseSelect\");\r\n\r\n\t\t\/\/<div id=\"msBorderLeft\" style=\"position: absolute; width: 0px; visibiltiy: hidden; font-size: 1px; border-left: 3px solid black;\"><\/div>\r\n\t\tthis.msBorderLeft = this.targetDoc.createElement(\"div\");\r\n\t\tthis.msBorderLeft.id               = \"msBorderLeft\" + this.count;\r\n\t\tthis.msBorderLeft.style.position   = \"absolute\";\r\n\t\tthis.msBorderLeft.style.width      = \"0px\";\r\n\t\tthis.msBorderLeft.style.visibility = \"hidden\";\r\n\t\tthis.msBorderLeft.style.fontSize   = \"1px\";\r\n\t\tthis.msBorderLeft.style.borderLeft = borderType; \r\n\t\tthis.targetDoc.body.appendChild(this.msBorderLeft);\r\n\t\tdojo.event.connect(this.msBorderLeft, \"onmouseup\", this.table, \"resetMouseSelect\");\r","this":"MultiSelectControl"}}},"MultiSelectControl.setFirstCell":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""}},"src":"\t\tthis.firstCell = cell;\r\n\t\tthis.firstCellCol = this.table.getCellCol(cell);\r\n\t\tthis.firstCellRow = this.table.getCellRow(cell);\r","this":"MultiSelectControl"}}},"MultiSelectControl.getFirstCell":{"_":{"meta":{"summary":"","src":"\t\treturn this.firstCell;\r","this":"MultiSelectControl"}}},"MultiSelectControl.getFirstCellCol":{"_":{"meta":{"summary":"","src":"\t\treturn this.firstCellCol;\r","this":"MultiSelectControl"}}},"MultiSelectControl.getFirstCellRow":{"_":{"meta":{"summary":"","src":"\t\treturn this.firstCellRow;\r","this":"MultiSelectControl"}}},"MultiSelectControl.multiSelect":{"_":{"meta":{"summary":"","parameters":{"col":{"type":""},"row":{"type":""},"continuation":{"type":""},"cell":{"type":""}},"src":"\t\t{\r\n\t\t\tif ( this.table.selectType == \"col\" && row != -1)\r\n\t\t\t{\r\n\t\t\t\trow = -1;\r\n\t\t\t\tcontinuation = \"cont\";\r\n\t\t\t}\r\n\t\t\telse if ( this.table.selectType == \"row\" && col != -1)\r\n\t\t\t{\r\n\t\t\t\tcol = -1;\r\n\t\t\t\tcontinuation = \"cont\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t\/\/set the background the first time into multiSelect but don't set inMultiSelect\r\n\t\t\/\/yet as col and row select change the selected cell and if inMultiSelect is\r\n\t\t\/\/true in this.firstCell it resets multi select.  So we set it at the end of function.\r\n\t\tif ( !this.table.inMultiSelect && this.type == MultiSelectControl.CELLS )\r\n\t\t{\r\n\t\t\t\/\/need to handle the extra row that is in the sheet if a row is expanded\r\n\t\t\tif ( this.table.curOpenRowHeader != null )\r\n\t\t\t{\r\n\t\t\t\tif ( this.table.curOpenRowNum < row )\r\n\t\t\t\t{\r\n\t\t\t\t\trow--;\r\n\t\t\t\t\tthis.firstCellRow--;\r\n\t\t\t\t}\r\n\t\t\t\tthis.table.closeRow(this.table.curOpenRowHeader, false);\r\n\t\t\t}\r\n\t\t\tthis.table.msSelectedCellBackground.setLocAndSize(this.firstCell);\r\n\t\t}\r\n\r\n\t\t\/\/corner cube select everything\r\n\t\tif ( col == -1 && row == -1 )\r\n\t\t{\r\n\t\t\tvar cell = this.table.getCell(0,0);\r\n\t\t\tthis.table.cellSelected(cell);\r\n\t\t\tthis.controlCell = cell;\r\n\t\t\tif ( this.type == MultiSelectControl.CELLS )\r\n\t\t\t{\r\n\t\t\t\tthis.table.msSelectedCellBackground.setLocAndSize(cell);\r\n\t\t\t}\r\n\t\t\tthis.table.selectType = \"all\";\r\n\r\n\t\t\tthis.topCol = 0;\r\n\t\t\tthis.topRow = 0;\r\n\t\t\tthis.bottomCol = this.table.numberOfCols-1;\r\n\t\t\tthis.bottomRow = this.table.numberOfRows-1;\r\n\t\t}\r\n\t\t\/\/is this a row header select\r\n\t\telse if ( col == -1 )\r\n\t\t{\r\n\t\t\tvar cell = this.table.getCell(0, row);\r\n\r\n\t\t\t\/\/not a continuation row select so need to set the first time values\r\n\t\t\tif ( continuation != \"cont\" )\r\n\t\t\t{\r\n\t\t\t\tthis.topRow = row;\r\n\t\t\t\tthis.bottomRow = row;\r\n\r\n\t\t\t\tthis.table.cellSelected(cell);\r\n\t\t\t\tif ( this.type == MultiSelectControl.CELLS )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.table.msSelectedCellBackground.setLocAndSize(cell);\r\n\t\t\t\t}\r\n\t\t\t\tthis.table.selectType = \"row\";\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.topRow    = Math.min(row, this.firstCellRow);\r\n\t\t\t\tthis.bottomRow = Math.max(row, this.firstCellRow);\r\n\t\t\t}\r\n\r\n\t\t\tthis.topCol = 0;\r\n\t\t\tthis.bottomCol = this.table.numberOfCols-1;\r\n\t\t\tthis.controlCell = cell;\r\n\t\t}\r\n\t\t\/\/is this a col header select\r\n\t\telse if ( row == -1 )\r\n\t\t{\r\n\t\t\tvar cell = this.table.getCell(col, 0);\r\n\r\n\t\t\t\/\/not a continuation col select so need to set the first time values\r\n\t\t\tif ( continuation != \"cont\" )\r\n\t\t\t{\r\n\t\t\t\tthis.topCol = col;\r\n\t\t\t\tthis.bottomCol = col;\r\n\r\n\t\t\t\tthis.table.cellSelected(cell);\r\n\t\t\t\tif ( this.type == MultiSelectControl.CELLS )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.table.msSelectedCellBackground.setLocAndSize(cell);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.table.selectType = \"col\";\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.topCol    = Math.min(col, this.firstCellCol);\r\n\t\t\t\tthis.bottomCol = Math.max(col, this.firstCellCol);\r\n\t\t\t}\r\n\r\n\t\t\tthis.topRow = 0;\r\n\t\t\tthis.bottomRow = this.table.numberOfRows-1;\r\n\t\t\tthis.controlCell = cell;\r\n\t\t}\r\n\t\t\/\/replication type continuation \r\n\t\telse if ( continuation )\r\n\t\t{\r\n\t\t\t\/\/right or bellow\r\n\t\t\tif ( continuation == MultiSelectControl.RIGHT )\r\n\t\t\t{\r\n\t\t\t\tthis.bottomCol = col;\r\n\t\t\t\tthis.bottomRow = row;\r\n\r\n\t\t\t}\r\n\t\t\t\/\/left or above\r\n\t\t\telse if ( continuation == MultiSelectControl.LEFT )\r\n\t\t\t{\r\n\t\t\t\t\/\/when selected cell if no longer in the selected area move it to the top left corner\r\n\t\t\t\tthis.topCol = col; \r\n\t\t\t\tthis.topRow = row; \r\n\t\t\t\t\/\/need these value because  when repliation extended the select area\r\n\t\t\t\t\/\/to the left or above the strange things happen to the shape of the selected area\r\n\t\t\t\t\/\/so need to go into quirks mode for multiSelect\r\n\t\t\t\tthis.quirksMode   = true;\r\n\t\t\t\tthis.repTopCol    = col;\r\n\t\t\t\tthis.repTopRow    = row;\r\n\t\t\t\tthis.repBottomCol = this.bottomCol;\r\n\t\t\t\tthis.repBottomRow = this.bottomRow;\r\n\t\t\t}\r\n\t\t\t\/\/must be from shrinking the selected area\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.bottomCol = col;\r\n\t\t\t\tthis.bottomRow = row;\r\n\r\n\t\t\t\tif ( (col < this.firstCell.col && col > this.topCol) || \r\n\t\t\t\t\t (row < this.firstCell.row && row > this.topRow) )\r\n\t\t\t\t{\r\n\t\t\t\t\tvar sCell = this.table.getCell(this.topCol, this.topRow);\r\n\t\t\t\t\tthis.table.multiSelectKeep = true;\r\n\t\t\t\t\tthis.table.cellSelected(sCell);\r\n\t\t\t\t\tthis.table.resetMouseSelect();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.controlCell = this.table.getCell(col,row);\r\n\t\t}\r\n\t\t\/\/state where user did a left or above replication\r\n\t\telse if ( this.quirksMode )\r\n\t\t{\r\n\t\t\t\/\/shinking the height but above the selected cell\r\n\t\t\tif ( row > this.repTopRow && row < this.firstCellRow )\r\n\t\t\t{\r\n\t\t\t\tthis.repTopRow = 0;\r\n\t\t\t}\r\n\t\t\t\/\/expanding the below the selected area\r\n\t\t\telse if ( row > this.repTopRow && row > this.firstCellRow )\r\n\t\t\t{\r\n\t\t\t\tthis.repTopRow = this.table.numberOfRows;\r\n\t\t\t\trow = this.repBottomRow == this.table.numberOfRows-1 ? this.repBottomRow :\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t this.repBottomRow+1;\r\n\t\t\t\tthis.repBottomRow = 0;\r\n\t\t\t}\r\n\t\t\t\/\/shink the width but to the left of selected cell\r\n\t\t\telse if ( col > this.repTopCol && col < this.firstCellCol )\r\n\t\t\t{\r\n\t\t\t\tthis.repTopCol = 0;\r\n\t\t\t}\r\n\t\t\t\/\/expanding the width to the right of the selected area\r\n\t\t\telse if ( col > this.repTopCol && col > this.firstCellCol )\r\n\t\t\t{\r\n\t\t\t\tthis.repTopCol = this.table.numberOfCols;\r\n\t\t\t\tcol = this.repBottomCol == this.table.numberOfCols-1 ? this.repBottomCol :\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t this.repBottomCol+1;\r\n\t\t\t\tthis.repBottomCol = 0;\r\n\t\t\t}\r\n\r\n\t\t\t\/\/when user erased the strange select area the turn quirks mode off\r\n\t\t\tif ( this.repBottomRow == 0 && this.repBottomCol == 0 )\r\n\t\t\t{\r\n\t\t\t\tthis.quirksMode = false;\r\n\t\t\t}\r\n\r\n\t\t\tthis.topCol    = Math.min(col, this.firstCellCol, \r\n\t\t\t\t\t\t\t\t\tthis.repTopCol == 0 ? this.table.numberOfCols-1 : this.repTopCol );\r\n\t\t\tthis.topRow    = Math.min(row, this.firstCellRow, \r\n\t\t\t\t\t\t\t\t\tthis.repTopRow == 0 ? this.table.numberOfRows-1 : this.repTopRow );\r\n\t\t\tthis.bottomCol = Math.max(col, this.firstCellCol, this.repBottomCol);\r\n\t\t\tthis.bottomRow = Math.max(row, this.firstCellRow, this.repBottomRow);\r\n\r\n\t\t\tthis.controlCell = this.table.getCell(col,row);\r\n\t\t}\r\n\t\t\/\/must be from a mouse or key action\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.topCol    = Math.min(col, this.firstCellCol);\r\n\t\t\tthis.topRow    = Math.min(row, this.firstCellRow);\r\n\t\t\tthis.bottomCol = Math.max(col, this.firstCellCol);\r\n\t\t\tthis.bottomRow = Math.max(row, this.firstCellRow);\r\n\t\t\t\r\n\t\t\tthis.controlCell = cell ? cell : this.table.getCell(col,row);\r\n\t\t}\r\n\t\tthis.controlCellCol = this.table.getCellCol(this.controlCell);\r\n\t\tthis.controlCellRow = this.table.getCellRow(this.controlCell); \r\n\r\n\t\tthis.colSelect = row == -1;\r\n\t\tthis.rowSelect = col == -1;\r\n\r\n\t\tthis.createBackground(this.msBackground, this.topCol, this.topRow,\r\n\t\t\t\t\t\t\t\tthis.bottomCol, this.bottomRow, \r\n\t\t\t\t\t\t\t\tthis.colSelect,  this.rowSelect);\r\n\r\n\t\tif ( this.type == MultiSelectControl.CELLS )\r\n\t\t{\r\n\t\t\tthis.table.inMultiSelect = true;\r\n\t\t}\r\n\r\n\t\tif ( this.callbackFunction )\r\n\t\t{\r\n\t\t\tthis.callbackFunction();\t\r\n\t\t}\r","this":"MultiSelectControl"}}},"MultiSelectControl.redraw":{"_":{"meta":{"summary":"","src":"\t\tif ( this.type == MultiSelectControl.CELLS )\r\n\t\t{\r\n\t\t\tif ( this.table.inMultiSelect )\r\n\t\t\t{\r\n\t\t\t\tthis.createBackground(this.msBackground, this.topCol, this.topRow,\r\n\t\t\t\t\t\t\t\t\t\tthis.bottomCol, this.bottomRow, \r\n\t\t\t\t\t\t\t\t\t\tthis.colSelect,  this.rowSelect);\r\n\t\t\t\tthis.table.msSelectedCellBackground.setLocAndSize(this.table.selectedCell);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.setReplicator(this.table.selectedCell);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if ( this.type == MultiSelectControl.FORMULA && this.table.inFormulaMouseAdd )\r\n\t\t{\r\n\t\t\tthis.createBackground(null, this.topCol, this.topRow,\r\n\t\t\t\t\t\t\t\t\tthis.bottomCol, this.bottomRow, \r\n\t\t\t\t\t\t\t\t\tthis.colSelect,  this.rowSelect);\r\n\t\t}\r\n\t\t\/\/TODO:FORMULA_PART type when added\r","this":"MultiSelectControl"}}},"MultiSelectControl.createBackground":{"_":{"meta":{"summary":"","parameters":{"background":{"type":""},"topCol":{"type":""},"topRow":{"type":""},"bottomCol":{"type":""},"bottomRow":{"type":""},"colSelection":{"type":""},"rowSelection":{"type":""}},"src":"\t\tvar tCell  = this.table.getCell(topCol,topRow);\r\n\t\tvar bCell  = this.table.getCell(bottomCol,bottomRow);\r\n\t\tvar height = (bCell.offsetTop - tCell.offsetTop) + bCell.offsetHeight;\r\n\t\tvar width  = (bCell.offsetLeft - tCell.offsetLeft) + bCell.offsetWidth;\r\n\t\tvar top    = tCell.offsetTop + \"px\";\r\n\t\tvar left   = tCell.offsetLeft + \"px\";\r\n\r\n\t\tif ( background )\r\n\t\t{\r\n\t\t\tbackground.style.top  = top;\r\n\t\t\tbackground.style.left = left;\r\n\t\t\tbackground.style.height = height + \"px\"; \r\n\t\t\tbackground.style.width  = width + \"px\";\r\n\t\t\tbackground.style.visibility = \"visible\";\r\n\t\t}\r\n\r\n\t\t\/\/draw border and replicator for selected area\r\n\t\tif ( background == this.msBackground )\r\n\t\t{\r\n\t\t\tthis.msBorderTop.style.top   = top;\r\n\t\t\tthis.msBorderTop.style.left  = left;\r\n\t\t\tthis.msBorderTop.style.width = width + \"px\";\r\n\r\n\t\t\tthis.msBorderRight.style.top    = top; \r\n\t\t\tthis.msBorderRight.style.left   = tCell.offsetLeft + width -3 + \"px\";\r\n\t\t\tthis.msBorderRight.style.height = height + \"px\";\r\n\r\n\t\t\tif ( dojo.render.html.ie )\r\n\t\t\t{\r\n\t\t\t\tthis.msBorderBottom.style.top = tCell.offsetTop + height -5 + \"px\";\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.msBorderBottom.style.top = tCell.offsetTop + height -3 + \"px\";\r\n\t\t\t}\r\n\r\n\t\t\tthis.msBorderBottom.style.left  = left;\r\n\t\t\tthis.msBorderBottom.style.width = width + \"px\";\r\n\r\n\t\t\tthis.msBorderLeft.style.top    = top;\r\n\t\t\tthis.msBorderLeft.style.left   = left;\r\n\t\t\tthis.msBorderLeft.style.height = height + \"px\";\r\n\r\n\t\t\tthis.msBorderTop.style.visibility    = \"visible\";\r\n\t\t\tthis.msBorderRight.style.visibility  = \"visible\";\r\n\t\t\tthis.msBorderBottom.style.visibility = \"visible\";\r\n\t\t\tthis.msBorderLeft.style.visibility   = \"visible\";\r\n\r\n\t\t\tif ( colSelection && !rowSelection )\r\n\t\t\t{\r\n\t\t\t\tbCell = this.table.getCell(bottomCol,0);\r\n\t\t\t}\r\n\t\t\telse if ( rowSelection && !colSelection )\r\n\t\t\t{\r\n\t\t\t\tbCell = this.table.getCell(0,bottomRow);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.setReplicator(bCell);\r\n\t\t}\r","this":"MultiSelectControl"}}},"MultiSelectControl.setReplicator":{"_":{"meta":{"summary":"","parameters":{"cell":{"type":""}},"src":"\t\tif ( this.replicator )\r\n\t\t{\r\n\t\t\tthis.replicator.style.top = cell.offsetTop + cell.offsetHeight -5 + \"px\";\r\n\t\t\tthis.replicator.style.left = cell.offsetLeft + cell.offsetWidth -5 + \"px\";\r\n\t\t}\r","this":"MultiSelectControl"}}},"MultiSelectControl.hide":{"_":{"meta":{"summary":"","src":"\t\tthis.table.selectType  = null;\r\n\t\tthis.controlCell = null;\r\n\t\tthis.firstCell = null;\r\n\t\tthis.quirksMode  = false;\r\n\r\n\t\tif ( this.type == MultiSelectControl.CELLS )\r\n\t\t{\r\n\t\t\tthis.msBackground.style.visibility = \"hidden\";\r\n\t\t\tthis.table.msSelectedCellBackground.style.visibility = \"hidden\";\r\n\t\t}\r\n\t\tthis.msBorderTop.style.visibility    = \"hidden\";\r\n\t\tthis.msBorderRight.style.visibility  = \"hidden\";\r\n\t\tthis.msBorderBottom.style.visibility = \"hidden\";\r\n\t\tthis.msBorderLeft.style.visibility   = \"hidden\";\r","this":"MultiSelectControl"}}},"MultiSelectControl.replicateStart":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t{\r\n\t\t\tthis.table.editEnd();\r\n\t\t}\r\n\r\n\t\tthis.table.replicating = true;\r\n\t\tthis.table.sheet.style.cursor = \"crosshair\";\r\n\t\tthis.repState.topCol    = -1;\r\n\t\tthis.repState.topRow    = -1;\r\n\t\tthis.repState.bottomCol = -1;\r\n\t\tthis.repState.bottomRow = -1;\r\n\t\tthis.repState.colLoc    = MultiSelectControl.OVER_AREA;\r\n\t\tthis.repState.rowLoc    = MultiSelectControl.OVER_AREA;\r\n\t\tthis.repState.lastDirection = MultiSelectControl.ROW;\r\n\r\n\t\t\/\/do this so we don't have to special case single select replication below\r\n\t\tif ( !this.table.inMultiSelect )\r\n\t\t{\r\n\t\t\tthis.topCol    = this.table.selectedCellCol;\r\n\t\t\tthis.bottomCol = this.table.selectedCellCol;\r\n\t\t\tthis.topRow    = this.table.selectedCellRow;\r\n\t\t\tthis.bottomRow = this.table.selectedCellRow;\r\n\t\t}\r","this":"MultiSelectControl"}}},"MultiSelectControl.replicate":{"_":{"meta":{"summary":"","parameters":{"enteredCell":{"type":""}},"src":"\t\tvar colLoc, rowLoc, colDiff, rowDiff;\r\n\t\tvar enteredCellCol = this.table.getCellCol(enteredCell);\r\n\t\tvar enteredCellRow = this.table.getCellRow(enteredCell);\r\n\r\n\t\t\/\/determine which side of the selected area to use for diff\r\n\t\tif ( enteredCellCol >= this.topCol && enteredCellCol <= this.bottomCol )\r\n\t\t{\r\n\t\t\tcolDiff = 0;\r\n\t\t\tthis.repState.colLoc = MultiSelectControl.OVER_AREA;\r\n\t\t}\r\n\t\telse if ( enteredCellCol > this.bottomCol )\r\n\t\t{\r\n\t\t\tcolDiff = enteredCell.offsetLeft - this.table.getCell(this.bottomCol,this.topRow).offsetLeft;\r\n\t\t\tthis.repState.colLoc = MultiSelectControl.RIGHT;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tcolDiff = this.table.getCell(this.topCol,this.topRow).offsetLeft - enteredCell.offsetLeft;\r\n\t\t\tthis.repState.colLoc = MultiSelectControl.LEFT;\r\n\t\t}\r\n\r\n\t\tif ( enteredCellRow >= this.topRow && enteredCellRow <= this.bottomRow)\r\n\t\t{\r\n\t\t\trowDiff = 0;\r\n\t\t\tthis.repState.rowLoc = MultiSelectControl.OVER_AREA;\r\n\t\t}\r\n\t\telse if ( enteredCellRow > this.bottomRow )\r\n\t\t{\r\n\t\t\trowDiff = enteredCell.offsetTop + enteredCell.offsetHeight - \r\n\t\t\t\t\t  this.table.getCell(this.bottomCol,this.bottomRow).offsetTop;\r\n\t\t\tthis.repState.rowLoc = MultiSelectControl.BELLOW;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tvar topRowCell = this.table.getCell(this.topCol,this.topRow);\r\n\t\t\trowDiff = topRowCell.offsetTop + topRowCell.offsetHeight - enteredCell.offsetTop;\r\n\t\t\tthis.repState.rowLoc = MultiSelectControl.ABOVE;\r\n\t\t}\r\n\r\n\t\t\/\/the user is over the selected area so show the replicator background panel\r\n\t\tif ( this.repState.colLoc == MultiSelectControl.OVER_AREA && this.repState.rowLoc == MultiSelectControl.OVER_AREA )\r\n\t\t{\r\n\t\t\tif ( this.repState.lastDirection == MultiSelectControl.ROW )\r\n\t\t\t{\r\n\t\t\t\tthis.repState.topCol    = this.topCol;\r\n\t\t\t\tthis.repState.topRow    = enteredCellRow;\r\n\t\t\t\tthis.repState.bottomCol = this.bottomCol; \r\n\t\t\t\tthis.repState.bottomRow = this.bottomRow;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.repState.topCol    = enteredCellCol;\r\n\t\t\t\tthis.repState.topRow    = this.topRow;\r\n\t\t\t\tthis.repState.bottomCol = this.bottomCol;\r\n\t\t\t\tthis.repState.bottomRow = this.bottomRow; \r\n\t\t\t}\r\n\r\n\t\t\tthis.createBackground(this.replicatorBackground, this.repState.topCol, this.repState.topRow,\r\n\t\t\t\t\t\t\t\t\t\tthis.repState.bottomCol, this.repState.bottomRow);\r\n\t\t\tthis.replicatorBackground.style.visibility = \"visible\";\r\n\t\t\tthis.repBorderTop.style.visibility    = \"hidden\";\r\n\t\t\tthis.repBorderRight.style.visibility  = \"hidden\";\r\n\t\t\tthis.repBorderBottom.style.visibility = \"hidden\";\r\n\t\t\tthis.repBorderLeft.style.visibility   = \"hidden\";\r\n\t\t}\r\n\t\t\/\/when rowDiff greater then colDiff then the user had dragged farther down than over\r\n\t\telse if ( rowDiff >= colDiff )\r\n\t\t{\r\n\t\t\tthis.repState.topCol    = this.topCol;\r\n\t\t\tthis.repState.bottomCol = this.bottomCol; \r\n\t\t\tif ( this.repState.rowLoc == MultiSelectControl.BELLOW )\r\n\t\t\t{\r\n\t\t\t\tthis.repState.topRow    = this.bottomRow+1;\r\n\t\t\t\tthis.repState.bottomRow = enteredCellRow;\r\n\t\t\t}\r\n\t\t\t\/\/above\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.repState.topRow    = enteredCellRow;\r\n\t\t\t\tthis.repState.bottomRow = this.topRow-1;\r\n\t\t\t}\r\n\t\t\tthis.repState.lastDirection = MultiSelectControl.ROW;\r\n\t\t\tthis.repState.direction = this.repState.rowLoc;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.repState.topRow    = this.topRow;\r\n\t\t\tthis.repState.bottomRow = this.bottomRow; \r\n\t\t\tif ( this.repState.colLoc == MultiSelectControl.RIGHT )\r\n\t\t\t{\r\n\t\t\t\tthis.repState.topCol    = this.bottomCol+1;\r\n\t\t\t\tthis.repState.bottomCol = enteredCellCol;\r\n\t\t\t}\r\n\t\t\t\/\/left\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.repState.topCol    = enteredCellCol;\r\n\t\t\t\tthis.repState.bottomCol = this.topCol-1;\r\n\t\t\t}\r\n\t\t\tthis.repState.lastDirection = MultiSelectControl.COL;\r\n\t\t\tthis.repState.direction = this.repState.colLoc;\r\n\t\t}\r\n\r\n\t\t\/\/only draw the replicate border when not over selected area or cell\r\n\t\tif ( this.repState.colLoc != MultiSelectControl.OVER_AREA || this.repState.rowLoc != MultiSelectControl.OVER_AREA )\r\n\t\t{\r\n\t\t\tthis.replicatorBackground.style.visibility = \"hidden\";\r\n\t\t\tthis.createReplicateBorder(this.repState.direction, this.repState.topCol, this.repState.topRow,\r\n\t\t\t\t\t\t\t\t\t\t\tthis.repState.bottomCol, this.repState.bottomRow);\r\n\t\t}\r","this":"MultiSelectControl"}}},"MultiSelectControl.createReplicateBorder":{"_":{"meta":{"summary":"","parameters":{"direction":{"type":""},"topCol":{"type":""},"topRow":{"type":""},"bottomCol":{"type":""},"bottomRow":{"type":""}},"src":"\t\tvar tCell = this.table.getCell(topCol,topRow);\r\n\t\tvar bCell = this.table.getCell(bottomCol,bottomRow);\r\n\r\n\t\tvar height = (bCell.offsetTop - tCell.offsetTop) + bCell.offsetHeight;\r\n\t\tvar width  = (bCell.offsetLeft - tCell.offsetLeft) + bCell.offsetWidth;\r\n\t\tvar topString = tCell.offsetTop + \"px\";\r\n\t\tvar leftString = tCell.offsetLeft + \"px\";\r\n\t\tvar widthString = width + \"px\";\r\n\t\tvar heightString = height + \"px\";\r\n\r\n\t\tif ( direction != MultiSelectControl.BELLOW )\r\n\t\t{\r\n\t\t\tthis.repBorderTop.style.top   = topString; \r\n\t\t\tthis.repBorderTop.style.left  = leftString \r\n\t\t\tthis.repBorderTop.style.width = widthString;\r\n\t\t\tthis.repBorderTop.style.visibility = \"visible\";\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.repBorderTop.style.visibility = \"hidden\";\r\n\t\t}\r\n\r\n\t\tif ( direction != MultiSelectControl.LEFT )\r\n\t\t{\r\n\t\t\tthis.repBorderRight.style.top    = topString; \r\n\t\t\tthis.repBorderRight.style.left   = tCell.offsetLeft + width -3 + \"px\";\r\n\t\t\tthis.repBorderRight.style.height = heightString;\r\n\t\t\tthis.repBorderRight.style.visibility  = \"visible\";\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.repBorderRight.style.visibility  = \"hidden\";\r\n\t\t}\r\n\r\n\t\tif ( direction != MultiSelectControl.ABOVE )\r\n\t\t{\r\n\t\t\tif ( dojo.render.html.ie )\r\n\t\t\t{\r\n\t\t\t\tthis.repBorderBottom.style.top = tCell.offsetTop + height -5 + \"px\";\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.repBorderBottom.style.top = tCell.offsetTop + height -3 + \"px\";\r\n\t\t\t}\r\n\t\t\tthis.repBorderBottom.style.left  = leftString; \r\n\t\t\tthis.repBorderBottom.style.width = widthString;\r\n\t\t\tthis.repBorderBottom.style.visibility = \"visible\";\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.repBorderBottom.style.visibility = \"hidden\";\r\n\t\t}\r\n\r\n\t\tif ( direction != MultiSelectControl.RIGHT )\r\n\t\t{\r\n\t\t\tthis.repBorderLeft.style.top    = topString; \r\n\t\t\tthis.repBorderLeft.style.left   = leftString; \r\n\t\t\tthis.repBorderLeft.style.height = heightString; \r\n\t\t\tthis.repBorderLeft.style.visibility   = \"visible\";\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.repBorderLeft.style.visibility   = \"hidden\";\r\n\t\t}\r","this":"MultiSelectControl"}}},"MultiSelectControl.replicatorMouseMove":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\t{\r\n\t\t\tvar x,y;\r\n\t\t\tif ( dojo.render.html.ie )\r\n\t\t\t{\r\n\t\t\t\tx = e.x;\r\n\t\t\t\ty = e.y;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tx = e.pageX;\r\n\t\t\t\ty = e.pageY;\r\n\t\t\t}\r\n\r\n\t\t\tvar repCell = this.lastCell;\r\n\t\t\t\/\/see if we are still in the last cell\r\n\t\t\tif ( repCell && x >= repCell.offsetLeft && x <= (repCell.offsetLeft+repCell.offsetWidth)\r\n\t\t\t\t&& y >= repCell.offsetTop && y <= (repCell.offsetTop+repCell.offsetHeight) )\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t\/\/nope so we need to find the cell we are in now\r\n\t\t\t\/\/this should be much faster than doing nested loops.\r\n\t\t\t\/\/first find the column we are in\r\n\t\t\tvar col = this.topCol;\r\n\t\t\tvar row = this.topRow; \r\n\t\t\tfor(; col <= this.bottomCol; col++ )\r\n\t\t\t{\r\n\t\t\t\trepCell = this.table.getCell(col,row);\t\r\n\t\t\t\tif ( x >= repCell.offsetLeft && x <= (repCell.offsetLeft+repCell.offsetWidth))\r\n\t\t\t\t{\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t\/\/then go down the column's rows to find the cell\r\n\t\t\tfor(; row <= this.bottomRow; row++)\r\n\t\t\t{\r\n\t\t\t\trepCell = this.table.getCell(col,row);\t\r\n\t\t\t\tif (y >= repCell.offsetTop && y <= (repCell.offsetTop+repCell.offsetHeight))\r\n\t\t\t\t{\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t\/\/save the current cell for next time \r\n\t\t\tthis.lastCell = repCell;\r\n\r\n\t\t\t\/\/call replicate with the cell the mouse is over\r\n\t\t\tthis.replicate(repCell);\r\n\t\t}\r","this":"MultiSelectControl"}}},"MultiSelectControl.deleteSelectedArea":{"_":{"meta":{"summary":"","src":"\t\tthis.repState.topCol    = this.topCol;\r\n\t\tthis.repState.topRow    = this.topRow;\r\n\t\tthis.repState.bottomCol = this.bottomCol;\r\n\t\tthis.repState.bottomRow = this.bottomRow;\r\n\t\tthis.repState.colLoc    = MultiSelectControl.OVER_AREA;\r\n\t\tthis.repState.rowLoc    = MultiSelectControl.OVER_AREA;\r\n\t\tthis.repState.lastDirection = MultiSelectControl.ROW;\r\n\r\n\t\tthis.replicateEnd();\r","this":"MultiSelectControl"}}},"MultiSelectControl.replicateEnd":{"_":{"meta":{"summary":"","parameters":{"e":{"type":""}},"src":"\t\tthis.table.replicating = false;\r\n\t\tthis.table.sheet.style.cursor = \"default\";\r\n\t\tthis.replicatorBackground.style.visibility = \"hidden\";\r\n\t\tthis.repBorderTop.style.visibility   = \"hidden\";\r\n\t\tthis.repBorderRight.style.visibility  = \"hidden\";\r\n\t\tthis.repBorderBottom.style.visibility = \"hidden\";\r\n\t\tthis.repBorderLeft.style.visibility   = \"hidden\";\r\n\r\n\t\t\/\/did the user do anything\r\n\t\tif ( this.repState.topCol != -1 )\r\n\t\t{\r\n\t\t\t\/\/when OVER_AREA clear cells the replicate selected\r\n\t\t\tif ( this.repState.colLoc == MultiSelectControl.OVER_AREA && \r\n\t\t\t\t this.repState.rowLoc == MultiSelectControl.OVER_AREA )\r\n\t\t\t{\r\n\t\t\t\tthis.table.undoManager.beginTransaction(\"Delete contents of range \" + \r\n\t\t\t\t\t\tFormula.COLUMN_CHARS[this.repState.topCol] + (this.repState.topRow+1) + \":\" +\r\n\t\t\t\t\t\tFormula.COLUMN_CHARS[this.repState.bottomCol] + (this.repState.bottomRow+1));\r\n\r\n\t\t\t\tfor(var x=this.repState.topCol; x <= this.repState.bottomCol; x++)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor(var y=this.repState.topRow; y <= this.repState.bottomRow; y++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.table.setCellText(\"&nbsp;\", this.table.getCell(x,y), this.table.dp.getValueAt(x,y));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.table.undoManager.endTransaction();\r\n\t\t\t\tthis.table.dp.endLockTransaction();\r\n\r\n\t\t\t\t\/\/if the user didn't completly cover the selected area adjust the selected area\r\n\t\t\t\tif ( this.repState.topCol != this.topCol || this.repState.topRow != this.topRow ||\r\n\t\t\t\t\t this.repState.bottomCol != this.bottomCol || this.repState.bottomRow != this.bottomRow )\r\n\t\t\t\t{\r\n\t\t\t\t\tvar col, row;\r\n\t\t\t\t\tif ( this.repState.lastDirection == MultiSelectControl.ROW )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcol = this.repState.bottomCol;\r\n\t\t\t\t\t\trow = this.repState.topRow -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcol = this.repState.topCol-1;\r\n\t\t\t\t\t\trow = this.repState.bottomRow;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.multiSelect(col, row, this.repState.lastDirection);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\/\/replicate content from selected area to replicate area\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tvar colSize = this.repState.bottomCol - this.repState.topCol;\r\n\t\t\t\tvar rowSize = this.repState.bottomRow - this.repState.topRow;\r\n\r\n\t\t\t\t\/\/used when replicating a formula\r\n\t\t\t\tvar formulaObj = new Formula();\r\n\t\t\t\tvar colLocRight = this.repState.colLoc == MultiSelectControl.RIGHT;\r\n\t\t\t\tvar rowLocBellow = this.repState.rowLoc == MultiSelectControl.BELLOW;\r\n\r\n\t\t\t\tvar selectCell, selectCellDI, selectCellCol, selectedCellRow;\r\n\t\t\t\tvar replicateCell, replicateCellDI, replicateCellCol, replicateCellRow;\r\n\r\n\t\t\t\t\/\/need to have a different counters for the select cell\r\n\t\t\t\tvar selectX = 0; \r\n\t\t\t\tvar selectColSize = this.bottomCol - this.topCol;\r\n\t\t\t\tvar selectRowSize = this.bottomRow - this.topRow;\r\n\r\n\t\t\t\tthis.table.undoManager.beginTransaction(\"Auto Fill of range \" + \r\n\t\t\t\t\t\tFormula.COLUMN_CHARS[this.repState.topCol] + (this.repState.topRow+1) + \":\" +\r\n\t\t\t\t\t\tFormula.COLUMN_CHARS[this.repState.bottomCol] + (this.repState.bottomRow+1));\r\n\r\n\t\t\t\tfor(var x=0; x <= colSize; x++)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar selectY = 0; \/\/need to have a different counters for the select cell\r\n\t\t\t\t\tfor(var y=0; y <= rowSize; y++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tselectCell    = this.table.getCell(this.topCol + selectX, this.topRow + selectY);\r\n\t\t\t\t\t\tselectCellCol = this.table.getCellCol(selectCell);\r\n\t\t\t\t\t\tselectCellRow = this.table.getCellRow(selectCell);\r\n\t\t\t\t\t\tselectCellDI  = this.table.dp.getValueAt(this.topCol + selectX, this.topRow + selectY);\r\n\r\n\t\t\t\t\t\treplicateCell    = this.table.getCell(this.repState.topCol + x, this.repState.topRow + y);\r\n\t\t\t\t\t\treplicateCellCol = this.table.getCellCol(replicateCell);\r\n\t\t\t\t\t\treplicateCellRow = this.table.getCellRow(replicateCell);\r\n\t\t\t\t\t\treplicateCellDI  = this.table.dp.getValueAt(this.repState.topCol + x, this.repState.topRow + y);\r\n\r\n\t\t\t\t\t\tif ( selectCell.innerHTML == \"&nbsp;\" )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.table.setCellText(\"&nbsp;\", replicateCell, replicateCellDI);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\/\/when replicating a formula need to adjust cell values\r\n\t\t\t\t\t\telse if ( selectCellDI.subDataType == this.table.FORMULA )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tformulaObj.setFormulaText(selectCellDI.formulaBarText);\r\n\r\n\t\t\t\t\t\t\t\/\/need to determine which direction the replication was so\r\n\t\t\t\t\t\t\t\/\/we can inc the columns or rows\r\n\t\t\t\t\t\t\tif ( this.repState.lastDirection == MultiSelectControl.COL )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tformulaObj.rollCols(colLocRight, Math.abs(selectCellCol-replicateCellCol));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\/\/row direction\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tformulaObj.rollRows(rowLocBellow, Math.abs(selectCellRow-replicateCellRow));\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthis.table.setCellText(formulaObj.toString(), replicateCell, replicateCellDI, this.table.FORMULA);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\/\/when replicating a date need to adjust date of the month \r\n\t\t\t\t\t\telse if ( selectCellDI.dataType == this.table.DATE )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar date = Date.createDate(selectCellDI.formulaBarText);\r\n\r\n\t\t\t\t\t\t\t\/\/col direction\r\n\t\t\t\t\t\t\tif ( this.repState.lastDirection == MultiSelectControl.COL )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tdate.rollDate(colLocRight, Math.abs(selectCellCol-replicateCellCol));\r\n\r\n\t\t\t\t\t\t\t\tthis.table.setCellText(date.formatDate( \r\n\t\t\t\t\t\t\t\t\t\t\tselectCellDI.cellText.split(\"\/\").length == 1 ? Date.TWO_PART_DATE :\r\n\t\t\t\t\t\t\t\t\t\t\tDate.THREE_PART_DATE),\r\n\t\t\t\t\t\t\t\t\t\t\treplicateCell, replicateCellDI, this.table.DATE, \r\n\t\t\t\t\t\t\t\t\t\t\tdate.formatDate(Date.THREE_PART_DATE) );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\/\/row direction\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tdate.rollDate(rowLocBellow, Math.abs(selectCellRow-replicateCellRow));\r\n\r\n\t\t\t\t\t\t\t\tthis.table.setCellText(date.formatDate(\r\n\t\t\t\t\t\t\t\t\t\t\tselectCellDI.cellText.split(\"\/\").length == 1 ? Date.TWO_PART_DATE :\r\n\t\t\t\t\t\t\t\t\t\t\tDate.THREE_PART_DATE),\r\n\t\t\t\t\t\t\t\t\t\t\treplicateCell, replicateCellDI, this.table.DATE,\r\n\t\t\t\t\t\t\t\t\t\t\tdate.formatDate(Date.THREE_PART_DATE) );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\/\/when replicating a time need to adjust the hour \r\n\t\t\t\t\t\telse if ( selectCellDI.dataType == this.table.TIME )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar time = new Time(selectCellDI.formulaBarText);\r\n\t\t\t\t\t\t\t\/\/col direction\r\n\t\t\t\t\t\t\tif ( this.repState.lastDirection == MultiSelectControl.COL )\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttime.rollHour(colLocRight, Math.abs(selectCellCol-replicateCellCol));\r\n\r\n\t\t\t\t\t\t\t\tthis.table.setCellText(time.formatTime( \r\n\t\t\t\t\t\t\t\t\t\t\tselectCellDI.cellText.indexOf(\"M\") != -1 ? Time.HOUR12_TIME :\r\n\t\t\t\t\t\t\t\t\t\t\tTime.HOUR24_TIME,\r\n\t\t\t\t\t\t\t\t\t\t\tselectCellDI.cellText.split(\":\").length == 3),\r\n\t\t\t\t\t\t\t\t\t\t\treplicateCell, replicateCellDI, this.table.TIME, \r\n\t\t\t\t\t\t\t\t\t\t\ttime.formatTime(Time.HOUR12_TIME, true) );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\/\/row direction\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttime.rollHour(rowLocBellow, Math.abs(selectCellRow-replicateCellRow));\r\n\r\n\t\t\t\t\t\t\t\tthis.table.setCellText(time.formatTime( \r\n\t\t\t\t\t\t\t\t\t\t\tselectCellDI.cellText.indexOf(\"M\") != -1 ? Time.HOUR12_TIME :\r\n\t\t\t\t\t\t\t\t\t\t\tTime.HOUR24_TIME,\r\n\t\t\t\t\t\t\t\t\t\t\tselectCellDI.cellText.split(\":\").length == 3),\r\n\t\t\t\t\t\t\t\t\t\t\treplicateCell, replicateCellDI, this.table.TIME, \r\n\t\t\t\t\t\t\t\t\t\t\ttime.formatTime(Time.HOUR12_TIME, true) );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.table.setCellText(selectCellDI.cellText, replicateCell, replicateCellDI,\r\n\t\t\t\t\t\t\t\t\tselectCellDI.dataType, selectCellDI.formulaBarText);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\/\/take care of select row counter\r\n\t\t\t\t\t\tif ( ++selectY > selectRowSize ) selectY = 0;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\/\/take care of select column counter\r\n\t\t\t\t\tif ( ++selectX > selectColSize ) selectX = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.table.undoManager.endTransaction();\r\n\t\t\t\tthis.table.dp.endLockTransaction();\r\n\r\n\t\t\t\tif ( this.repState.rowLoc == MultiSelectControl.BELLOW ||  \r\n\t\t\t\t\t this.repState.colLoc == MultiSelectControl.RIGHT )\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.multiSelect(this.repState.bottomCol, this.repState.bottomRow, MultiSelectControl.RIGHT);\r\n\t\t\t\t}\r\n\t\t\t\t\/\/ABOVE or LEFT\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.multiSelect(this.repState.topCol, this.repState.topRow, MultiSelectControl.LEFT);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r","this":"MultiSelectControl"}}}}}},"dojo.widget.jot.jottable.Time":{"meta":{"methods":{"Time":{"_":{"meta":{"summary":"","parameters":{"timeString":{"type":""}},"src":"{\r\n\tthis.setTime(timeString);\r","this_variables":["hour","min","sec","hour","hour"]}}},"Time.setTime":{"_":{"meta":{"summary":"","parameters":{"timeString":{"type":""}},"src":"{\r\n\tvar parts = timeString.split(\":\");\r\n\tthis.hour = parseInt(parts[0], 10);\r\n\tthis.min  = parseInt(parts[1], 10);\r\n\tthis.sec  = parts.length == 3 ? parseInt(parts[2], 10) : 0;\r\n\r\n\t\/\/see if the user entered PM\r\n\tif ( parts[parts.length-1].toUpperCase().indexOf(\"PM\") != -1 && this.hour < 12)\r\n\t{\r\n\t\tthis.hour += 12;\r\n\t}\r","this":"Time"}}},"Time.rollHour":{"_":{"meta":{"summary":"","parameters":{"rollPlus":{"type":""},"incNum":{"type":""}},"src":"{\r\n\tthis.hour = rollPlus ? this.hour+incNum : this.hour-incNum;\r\n\r\n\tif ( this.hour > 23 ) this.hour -= 24;\r\n\telse if ( this.hour < 0 ) this.hour += 24;\r\n\r\n\treturn this;\r","this":"Time"}}},"Time.formatTime":{"_":{"meta":{"summary":"","parameters":{"format":{"type":""},"useSeconds":{"type":""}},"src":"{\r\n\tvar minS = this.min;\r\n\r\n\tif ( this.min < 10 )\r\n\t{\r\n\t\tminS = \"0\" + this.min;\r\n\t}\r\n\r\n\tvar secS = this.sec;\r\n\tif ( this.sec < 10 )\r\n\t{\r\n\t\tsecS = \"0\" + this.sec;\r\n\t}\r\n\r\n\tif ( format && format == Time.HOUR24_TIME )\r\n\t{\r\n\t\treturn this.hour + \":\" + minS + (useSeconds ? (\":\" + secS) : \"\");\r\n\t}\r\n\t\/\/in 12 hour time 0 is 12 AM \r\n\telse if ( this.hour == 0 )\r\n\t{\r\n\t\treturn \"12:\" + minS + (useSeconds ? (\":\" + secS) : \"\") + \" AM\";\r\n\t}\r\n\t\/\/12 hour time and use AM PM\r\n\telse\r\n\t{\r\n\t\treturn (this.hour > 12 ? (this.hour-12) : this.hour) + \":\" + minS + \r\n\t\t\t\t(useSeconds ? (\":\" + secS) : \"\") + \r\n\t\t\t\t(this.hour < 12 ? \" AM\" : \" PM\");\r\n\t}\r","this":"Time"}}}}}},"dojo.widget.svg.Chart":{"meta":{"requires":{"common":["dojo.widget.HtmlWidget","dojo.widget.Chart","dojo.html.layout","dojo.math","dojo.svg","dojo.gfx.color","dojo.json"]},"methods":{"dojo.widget.svg.Chart":{"_":{"meta":{"summary":"","inherits":["[dojo.widget.HtmlWidget, dojo.widget.Chart]"],"this_inherits":["[dojo.widget.HtmlWidget, dojo.widget.Chart]"]}}},"dojo.widget.svg.Chart.Plotter.getX":{"_":{"meta":{"summary":"","parameters":{"value":{"type":""},"chart":{"type":""}},"src":"\t\tvar v=parseFloat(value);\n\t\tvar min=chart.properties.axes.x.range.min;\n\t\tvar max=chart.properties.axes.x.range.max;\n\t\tvar ofst=0-min;\n\t\tmin+=ofst; max+=ofst; v+=ofst;\n\n\t\tvar xmin=chart.properties.padding.left;\n\t\tvar xmax=chart.properties.width-chart.properties.padding.right;\n\t\tvar x=(v*((xmax-xmin)\/max))+xmin;\n\t\treturn x;"}}},"dojo.widget.svg.Chart.Plotter.getY":{"_":{"meta":{"summary":"","parameters":{"value":{"type":""},"chart":{"type":""}},"src":"\t\tvar v=parseFloat(value);\n\t\tvar max=chart.properties.axes.y.range.max;\n\t\tvar min=chart.properties.axes.y.range.min;\n\t\tvar ofst=0;\n\t\tif(min<0)ofst+=Math.abs(min);\n\t\tmin+=ofst; max+=ofst; v+=ofst;\n\t\t\n\t\tvar ymin=chart.properties.height-chart.properties.padding.bottom;\n\t\tvar ymax=chart.properties.padding.top;\n\t\tvar y=(((ymin-ymax)\/(max-min))*(max-v))+ymax;\n\t\treturn y;"}}},"dojo.widget.svg.Chart.Plotter.addPlotter":{"_":{"meta":{"summary":"","parameters":{"name":{"type":""},"func":{"type":""}},"src":"\t\tplotters[name]=func;"}}},"dojo.widget.svg.Chart.Plotter.plot":{"_":{"meta":{"summary":"","parameters":{"series":{"type":""},"chart":{"type":""}},"src":"\t\tif (series.values.length==0) return;\n\t\tif (series.plotType && plotters[series.plotType]){\n\t\t\treturn plotters[series.plotType](series, chart);\n\t\t}\n\t\telse if (chart.plotType && plotters[chart.plotType]){\n\t\t\treturn plotters[chart.plotType](series, chart);\n\t\t}"}}}}}},"dojo.widget.validate":{"meta":{"requires":{"common":["dojo.widget.*","dojo.widget.HtmlWidget","dojo.widget.Manager","dojo.widget.Parse","dojo.xml.Parse","dojo.lang.array","dojo.lang.common","dojo.validate.common","dojo.validate.datetime","dojo.validate.check","dojo.validate.web","dojo.validate.us","dojo.i18n.common"]},"methods":{"dojo.widget.validate.Textbox":{"_":{"meta":{"summary":"","inherits":["dojo.widget.HtmlWidget"],"this_inherits":["dojo.widget.HtmlWidget"],"protovariables":{"className":"","name":"","value":"","type":"","trim":"","uppercase":"","lowercase":"","ucFirst":"","digit":"","htmlfloat":"","templatePath":"","textbox":""}}}},"dojo.widget.validate.Textbox.filter":{"_":{"meta":{"summary":"","src":"\t\t\tif (this.trim) {\n\t\t\t\tthis.textbox.value = this.textbox.value.replace(\/(^\\s*|\\s*$)\/g, \"\");\n\t\t\t} \n\t\t\tif (this.uppercase) {\n\t\t\t\tthis.textbox.value = this.textbox.value.toUpperCase();\n\t\t\t} \n\t\t\tif (this.lowercase) {\n\t\t\t\tthis.textbox.value = this.textbox.value.toLowerCase();\n\t\t\t} \n\t\t\tif (this.ucFirst) {\n\t\t\t\tthis.textbox.value = this.textbox.value.replace(\/\\b\\w+\\b\/g, \n\t\t\t\t\tfunction(word) { return word.substring(0,1).toUpperCase() + word.substring(1).toLowerCase(); });\n\t\t\t} \n\t\t\tif (this.digit) {\n\t\t\t\tthis.textbox.value = this.textbox.value.replace(\/\\D\/g, \"\");\n\t\t\t} ","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.HtmlWidget":{"_":{"meta":{"this_variables":["textbox.value"]}}},"dojo.widget.validate.Textbox.onfocus":{"_":{"meta":{"summary":"","src":"","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.validate.Textbox.onblur":{"_":{"meta":{"summary":"","src":"                       this.filter();    ","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.validate.Textbox.mixInProperties":{"_":{"meta":{"summary":"","parameters":{"localProperties":{"type":""},"frag":{"type":""}},"src":"\t\t\tdojo.widget.validate.Textbox.superclass.mixInProperties.apply(this, arguments);\n\t\t\tif ( localProperties[\"class\"] ) { \n\t\t\t\tthis.className = localProperties[\"class\"];\n\t\t\t}","this":"dojo.widget.HtmlWidget"}}},"dojo.widget.validate.ValidationTextbox":{"_":{"meta":{"summary":"","inherits":["dojo.widget.validate.Textbox"],"this_inherits":["dojo.widget.validate.Textbox"],"this_variables":["flags.signed","flags.min","flags.separator","flags.max","flags.allowDottedDecimal","flags.allowDottedHex","flags.allowDottedOctal","flags.allowDecimal","flags.allowHex","flags.allowIPv6","flags.allowHybrid","flags.format","flags.format","flags.amSymbol","flags.pmSymbol","flags.allowTerritories","flags.allowMilitary","flags.regexp","flags.flags"]}}},"dojo.widget.validate.IntegerTextbox":{"_":{"meta":{"summary":"","inherits":["dojo.widget.validate.ValidationTextbox"],"this_inherits":["dojo.widget.validate.ValidationTextbox"],"this_variables":["flags.places","flags.exponent","flags.eSigned","flags.min","flags.max","flags.fractional","flags.symbol","flags.min","flags.max"]}}},"dojo.widget.validate.IntegerTextbox.mixInProperties":{"_":{"meta":{"summary":"","parameters":{"localProperties":{"type":""},"frag":{"type":""}},"src":"\t\t\t\/\/ Get properties from markup attributes, and assign to flags object.\n\t\t\tif((localProperties.signed == \"true\")||\n\t\t\t\t(localProperties.signed == \"always\")){\n\t\t\t\tthis.flags.signed = true;\n\t\t\t}else if((localProperties.signed == \"false\")||\n\t\t\t\t\t(localProperties.signed == \"never\")){\n\t\t\t\tthis.flags.signed = false;\n\t\t\t\tthis.flags.min = 0;\n\t\t\t}else{\n\t\t\t\tthis.flags.signed = [ true, false ]; \/\/ optional\n\t\t\t}\n\t\t\tif(localProperties.separator){ \n\t\t\t\tthis.flags.separator = localProperties.separator;\n\t\t\t}\n\t\t\tif(localProperties.min){ \n\t\t\t\tthis.flags.min = parseInt(localProperties.min);\n\t\t\t}\n\t\t\tif(localProperties.max){ \n\t\t\t\tthis.flags.max = parseInt(localProperties.max);\n\t\t\t}","this":"dojo.widget.validate.ValidationTextbox"}}},"dojo.widget.validate.IntegerTextbox.isValid":{"_":{"meta":{"summary":"","src":"\t\t\treturn dojo.validate.isInteger(this.textbox.value, this.flags);","this":"dojo.widget.validate.ValidationTextbox"}}},"dojo.widget.validate.IntegerTextbox.isInRange":{"_":{"meta":{"summary":"","src":"\t\t\treturn dojo.validate.isInRange(this.textbox.value, this.flags);","this":"dojo.widget.validate.ValidationTextbox"}}},"dojo.widget.validate.RealNumberTextbox":{"_":{"meta":{"summary":"","inherits":["dojo.widget.validate.IntegerTextbox"],"this_inherits":["dojo.widget.validate.IntegerTextbox"]}}},"dojo.widget.validate.RealNumberTextbox.mixInProperties":{"_":{"meta":{"summary":"","parameters":{"localProperties":{"type":""},"frag":{"type":""}},"src":"\t\t\t\/\/ Get properties from markup attributes, and assign to flags object.\n\t\t\tif ( localProperties.places ) { \n\t\t\t\tthis.flags.places = Number( localProperties.places );\n\t\t\t}\n\t\t\tif((localProperties.exponent == \"true\")||\n\t\t\t\t(localProperties.exponent == \"always\")){\n\t\t\t\tthis.flags.exponent = true;\n\t\t\t}else if((localProperties.exponent == \"false\")||(localProperties.exponent == \"never\")){\n\t\t\t\tthis.flags.exponent = false;\n\t\t\t}else{\n\t\t\t\tthis.flags.exponent = [ true, false ]; \/\/ optional\n\t\t\t}\n\t\t\tif((localProperties.esigned == \"true\")||(localProperties.esigned == \"always\")){\n\t\t\t\tthis.flags.eSigned = true;\n\t\t\t}else if((localProperties.esigned == \"false\")||(localProperties.esigned == \"never\")){\n\t\t\t\tthis.flags.eSigned = false;\n\t\t\t}else{\n\t\t\t\tthis.flags.eSigned = [ true, false ]; \/\/ optional\n\t\t\t}\n\t\t\tif(localProperties.min){ \n\t\t\t\tthis.flags.min = parseFloat(localProperties.min);\n\t\t\t}\n\t\t\tif(localProperties.max){ \n\t\t\t\tthis.flags.max = parseFloat(localProperties.max);\n\t\t\t}","this":"dojo.widget.validate.IntegerTextbox"}}},"dojo.widget.validate.RealNumberTextbox.isValid":{"_":{"meta":{"summary":"","src":"\t\t\treturn dojo.validate.isRealNumber(this.textbox.value, this.flags);","this":"dojo.widget.validate.IntegerTextbox"}}},"dojo.widget.validate.RealNumberTextbox.isInRange":{"_":{"meta":{"summary":"","src":"\t\t\treturn dojo.validate.isInRange(this.textbox.value, this.flags);","this":"dojo.widget.validate.IntegerTextbox"}}},"dojo.widget.validate.CurrencyTextbox":{"_":{"meta":{"summary":"","inherits":["dojo.widget.validate.IntegerTextbox"],"this_inherits":["dojo.widget.validate.IntegerTextbox"]}}},"dojo.widget.validate.CurrencyTextbox.mixInProperties":{"_":{"meta":{"summary":"","parameters":{"localProperties":{"type":""},"frag":{"type":""}},"src":"\t\t\t\/\/ Get properties from markup attributes, and assign to flags object.\n\t\t\tif ( localProperties.fractional ) { \n\t\t\t\tthis.flags.fractional = ( localProperties.fractional == \"true\" );\n\t\t\t} else if ( localProperties.cents ) {\n\t\t\t\tdojo.deprecated(\"dojo.widget.validate.IntegerTextbox\", \"use fractional attr instead of cents\", \"0.5\");\n\t\t\t\tthis.flags.fractional = ( localProperties.cents == \"true\" );\n\t\t\t}\n\t\t\tif ( localProperties.symbol ) { \n\t\t\t\tthis.flags.symbol = localProperties.symbol;\n\t\t\t}\n\t\t\tif(localProperties.min){ \n\t\t\t\tthis.flags.min = parseFloat(localProperties.min);\n\t\t\t}\n\t\t\tif(localProperties.max){ \n\t\t\t\tthis.flags.max = parseFloat(localProperties.max);\n\t\t\t}","this":"dojo.widget.validate.IntegerTextbox"}}},"dojo.widget.validate.CurrencyTextbox.isValid":{"_":{"meta":{"summary":"","src":"\t\t\treturn dojo.validate.isCurrency(this.textbox.value, this.flags);","this":"dojo.widget.validate.IntegerTextbox"}}},"dojo.widget.validate.CurrencyTextbox.isInRange":{"_":{"meta":{"summary":"","src":"\t\t\treturn dojo.validate.isInRange(this.textbox.value, this.flags);","this":"dojo.widget.validate.IntegerTextbox"}}},"dojo.widget.validate.IpAddressTextbox":{"_":{"meta":{"summary":"","inherits":["dojo.widget.validate.ValidationTextbox"],"this_inherits":["dojo.widget.validate.ValidationTextbox"],"this_variables":["flags.scheme","flags.allowIP","flags.allowLocal","flags.allowCC","flags.allowGeneric"]}}},"dojo.widget.validate.IpAddressTextbox.mixInProperties":{"_":{"meta":{"summary":"","parameters":{"localProperties":{"type":""},"frag":{"type":""}},"src":"\t\t\t\/\/ Get properties from markup attributes, and assign to flags object.\n\t\t\tif ( localProperties.allowdotteddecimal ) { \n\t\t\t\tthis.flags.allowDottedDecimal = ( localProperties.allowdotteddecimal == \"true\" );\n\t\t\t}\n\t\t\tif ( localProperties.allowdottedhex ) { \n\t\t\t\tthis.flags.allowDottedHex = ( localProperties.allowdottedhex == \"true\" );\n\t\t\t}\n\t\t\tif ( localProperties.allowdottedoctal ) { \n\t\t\t\tthis.flags.allowDottedOctal = ( localProperties.allowdottedoctal == \"true\" );\n\t\t\t}\n\t\t\tif ( localProperties.allowdecimal ) { \n\t\t\t\tthis.flags.allowDecimal = ( localProperties.allowdecimal == \"true\" );\n\t\t\t}\n\t\t\tif ( localProperties.allowhex ) { \n\t\t\t\tthis.flags.allowHex = ( localProperties.allowhex == \"true\" );\n\t\t\t}\n\t\t\tif ( localProperties.allowipv6 ) { \n\t\t\t\tthis.flags.allowIPv6 = ( localProperties.allowipv6 == \"true\" );\n\t\t\t}\n\t\t\tif ( localProperties.allowhybrid ) { \n\t\t\t\tthis.flags.allowHybrid = ( localProperties.allowhybrid == \"true\" );\n\t\t\t}","this":"dojo.widget.validate.ValidationTextbox"}}},"dojo.widget.validate.IpAddressTextbox.isValid":{"_":{"meta":{"summary":"","src":"\t\t\treturn dojo.validate.isIpAddress(this.textbox.value, this.flags);","this":"dojo.widget.validate.ValidationTextbox"}}},"dojo.widget.validate.UrlTextbox":{"_":{"meta":{"summary":"","inherits":["dojo.widget.validate.IpAddressTextbox"],"this_inherits":["dojo.widget.validate.IpAddressTextbox"],"this_variables":["flags.allowCruft"]}}},"dojo.widget.validate.UrlTextbox.mixInProperties":{"_":{"meta":{"summary":"","parameters":{"localProperties":{"type":""},"frag":{"type":""}},"src":"\t\t\t\/\/ Get properties from markup attributes, and assign to flags object.\n\t\t\tif ( localProperties.scheme ) { \n\t\t\t\tthis.flags.scheme = ( localProperties.scheme == \"true\" );\n\t\t\t}\n\t\t\tif ( localProperties.allowip ) { \n\t\t\t\tthis.flags.allowIP = ( localProperties.allowip == \"true\" );\n\t\t\t}\n\t\t\tif ( localProperties.allowlocal ) { \n\t\t\t\tthis.flags.allowLocal = ( localProperties.allowlocal == \"true\" );\n\t\t\t}\n\t\t\tif ( localProperties.allowcc ) { \n\t\t\t\tthis.flags.allowCC = ( localProperties.allowcc == \"true\" );\n\t\t\t}\n\t\t\tif ( localProperties.allowgeneric ) { \n\t\t\t\tthis.flags.allowGeneric = ( localProperties.allowgeneric == \"true\" );\n\t\t\t}","this":"dojo.widget.validate.IpAddressTextbox"}}},"dojo.widget.validate.UrlTextbox.isValid":{"_":{"meta":{"summary":"","src":"\t\t\treturn dojo.validate.isUrl(this.textbox.value, this.flags);","this":"dojo.widget.validate.IpAddressTextbox"}}},"dojo.widget.validate.EmailTextbox":{"_":{"meta":{"summary":"","inherits":["dojo.widget.validate.UrlTextbox"],"this_inherits":["dojo.widget.validate.UrlTextbox"],"this_variables":["flags.listSeparator"]}}},"dojo.widget.validate.EmailTextbox.mixInProperties":{"_":{"meta":{"summary":"","parameters":{"localProperties":{"type":""},"frag":{"type":""}},"src":"\t\t\t\/\/ Get properties from markup attributes, and assign to flags object.\n\t\t\tif ( localProperties.allowcruft ) { \n\t\t\t\tthis.flags.allowCruft = ( localProperties.allowcruft == \"true\" );\n\t\t\t}","this":"dojo.widget.validate.UrlTextbox"}}},"dojo.widget.validate.EmailTextbox.isValid":{"_":{"meta":{"summary":"","src":"\t\t\treturn dojo.validate.isEmailAddress(this.textbox.value, this.flags);","this":"dojo.widget.validate.UrlTextbox"}}},"dojo.widget.validate.EmailListTextbox":{"_":{"meta":{"summary":"","inherits":["dojo.widget.validate.EmailTextbox"],"this_inherits":["dojo.widget.validate.EmailTextbox"]}}},"dojo.widget.validate.EmailListTextbox.mixInProperties":{"_":{"meta":{"summary":"","parameters":{"localProperties":{"type":""},"frag":{"type":""}},"src":"\t\t\t\/\/ Get properties from markup attributes, and assign to flags object.\n\t\t\tif ( localProperties.listseparator ) { \n\t\t\t\tthis.flags.listSeparator = localProperties.listseparator;\n\t\t\t}","this":"dojo.widget.validate.EmailTextbox"}}},"dojo.widget.validate.EmailListTextbox.isValid":{"_":{"meta":{"summary":"","src":"\t\t\treturn dojo.validate.isEmailAddressList(this.textbox.value, this.flags);","this":"dojo.widget.validate.EmailTextbox"}}},"dojo.widget.validate.DateTextbox":{"_":{"meta":{"summary":"","inherits":["dojo.widget.validate.ValidationTextbox"],"this_inherits":["dojo.widget.validate.ValidationTextbox"]}}},"dojo.widget.validate.DateTextbox.mixInProperties":{"_":{"meta":{"summary":"","parameters":{"localProperties":{"type":""},"frag":{"type":""}},"src":"\t\t\t\/\/ Get properties from markup attributes, and assign to flags object.\n\t\t\tif ( localProperties.format ) { \n\t\t\t\tthis.flags.format = localProperties.format;\n\t\t\t}","this":"dojo.widget.validate.ValidationTextbox"}}},"dojo.widget.validate.DateTextbox.isValid":{"_":{"meta":{"summary":"","src":"\t\t\treturn dojo.validate.isValidDate(this.textbox.value, this.flags.format);","this":"dojo.widget.validate.ValidationTextbox"}}},"dojo.widget.validate.TimeTextbox":{"_":{"meta":{"summary":"","inherits":["dojo.widget.validate.ValidationTextbox"],"this_inherits":["dojo.widget.validate.ValidationTextbox"]}}},"dojo.widget.validate.TimeTextbox.mixInProperties":{"_":{"meta":{"summary":"","parameters":{"localProperties":{"type":""},"frag":{"type":""}},"src":"\t\t\t\/\/ Get properties from markup attributes, and assign to flags object.\n\t\t\tif ( localProperties.format ) { \n\t\t\t\tthis.flags.format = localProperties.format;\n\t\t\t}\n\t\t\tif ( localProperties.amsymbol ) { \n\t\t\t\tthis.flags.amSymbol = localProperties.amsymbol;\n\t\t\t}\n\t\t\tif ( localProperties.pmsymbol ) { \n\t\t\t\tthis.flags.pmSymbol = localProperties.pmsymbol;\n\t\t\t}","this":"dojo.widget.validate.ValidationTextbox"}}},"dojo.widget.validate.TimeTextbox.isValid":{"_":{"meta":{"summary":"","src":"\t\t\treturn dojo.validate.isValidTime(this.textbox.value, this.flags);","this":"dojo.widget.validate.ValidationTextbox"}}},"dojo.widget.validate.UsStateTextbox":{"_":{"meta":{"summary":"","inherits":["dojo.widget.validate.ValidationTextbox"],"this_inherits":["dojo.widget.validate.ValidationTextbox"]}}},"dojo.widget.validate.UsStateTextbox.mixInProperties":{"_":{"meta":{"summary":"","parameters":{"localProperties":{"type":""},"frag":{"type":""}},"src":"\t\t\t\/\/ Get properties from markup attributes, and assign to flags object.\n\t\t\tif ( localProperties.allowterritories ) { \n\t\t\t\tthis.flags.allowTerritories = ( localProperties.allowterritories == \"true\" );\n\t\t\t}\n\t\t\tif ( localProperties.allowmilitary ) { \n\t\t\t\tthis.flags.allowMilitary = ( localProperties.allowmilitary == \"true\" );\n\t\t\t}","this":"dojo.widget.validate.ValidationTextbox"}}},"dojo.widget.validate.UsStateTextbox.isValid":{"_":{"meta":{"summary":"","src":"\t\t\treturn dojo.validate.us.isState(this.textbox.value, this.flags);","this":"dojo.widget.validate.ValidationTextbox"}}},"dojo.widget.validate.UsZipTextbox":{"_":{"meta":{"summary":"","inherits":["dojo.widget.validate.ValidationTextbox"],"this_inherits":["dojo.widget.validate.ValidationTextbox"]}}},"dojo.widget.validate.UsZipTextbox.isValid":{"_":{"meta":{"summary":"","src":"\t\t\treturn dojo.validate.us.isZipCode(this.textbox.value);","this":"dojo.widget.validate.ValidationTextbox"}}},"dojo.widget.validate.UsSocialSecurityNumberTextbox":{"_":{"meta":{"summary":"","inherits":["dojo.widget.validate.ValidationTextbox"],"this_inherits":["dojo.widget.validate.ValidationTextbox"]}}},"dojo.widget.validate.UsSocialSecurityNumberTextbox.isValid":{"_":{"meta":{"summary":"","src":"\t\t\treturn dojo.validate.us.isSocialSecurityNumber(this.textbox.value);","this":"dojo.widget.validate.ValidationTextbox"}}},"dojo.widget.validate.UsPhoneNumberTextbox":{"_":{"meta":{"summary":"","inherits":["dojo.widget.validate.ValidationTextbox"],"this_inherits":["dojo.widget.validate.ValidationTextbox"]}}},"dojo.widget.validate.UsPhoneNumberTextbox.isValid":{"_":{"meta":{"summary":"","src":"\t\t\treturn dojo.validate.us.isPhoneNumber(this.textbox.value);","this":"dojo.widget.validate.ValidationTextbox"}}},"dojo.widget.validate.RegexpTextbox":{"_":{"meta":{"summary":"","inherits":["dojo.widget.validate.ValidationTextbox"],"this_inherits":["dojo.widget.validate.ValidationTextbox"]}}},"dojo.widget.validate.RegexpTextbox.mixInProperties":{"_":{"meta":{"summary":"","parameters":{"localProperties":{"type":""},"frag":{"type":""}},"src":"\t        \/\/ Get properties from markup attibutes, and assign to flags object.\n\t        if ( localProperties.regexp ) {\n\t            this.flags.regexp = localProperties.regexp;\n\t        }\n\t        if ( localProperties.flags ) {\n\t            this.flags.flags = localProperties.flags;\n\t        }","this":"dojo.widget.validate.ValidationTextbox"}}},"dojo.widget.validate.RegexpTextbox.isValid":{"_":{"meta":{"summary":"","src":"\t        var regexp = new RegExp(this.flags.regexp, this.flags.flags);\n\t        return regexp.test(this.textbox.value);","this":"dojo.widget.validate.ValidationTextbox"}}}}}},"dojo.widget.vml.Chart":{"meta":{"requires":{"common":["dojo.widget.HtmlWidget","dojo.widget.Chart","dojo.math","dojo.html.layout","dojo.gfx.color"]},"methods":{"dojo.widget.vml.Chart":{"_":{"meta":{"summary":"","inherits":["[dojo.widget.HtmlWidget, dojo.widget.Chart]"],"this_inherits":["[dojo.widget.HtmlWidget, dojo.widget.Chart]"]}}},"dojo.widget.vml.Chart.Plotter.getX":{"_":{"meta":{"summary":"","parameters":{"value":{"type":""},"chart":{"type":""}},"src":"\t\tvar v=parseFloat(value);\n\t\tvar min=chart.properties.axes.x.range.min;\n\t\tvar max=chart.properties.axes.x.range.max;\n\t\tvar ofst=0-min;\n\t\tmin+=ofst; max+=ofst; v+=ofst;\n\n\t\tvar xmin = 0;\n\t\tvar xmax=chart.properties.width-chart.properties.padding.left-chart.properties.padding.right;\n\t\tvar x=(v*((xmax-xmin)\/max))+xmin;\n\t\treturn x;"}}},"dojo.widget.vml.Chart.Plotter.getY":{"_":{"meta":{"summary":"","parameters":{"value":{"type":""},"chart":{"type":""}},"src":"\t\tvar v=parseFloat(value);\n\t\tvar max=chart.properties.axes.y.range.max;\n\t\tvar min=chart.properties.axes.y.range.min;\n\t\tvar ofst=0;\n\t\tif(min<0)ofst+=Math.abs(min);\n\t\tmin+=ofst; max+=ofst; v+=ofst;\n\t\t\n\t\tvar ymin=chart.properties.height-chart.properties.padding.top-chart.properties.padding.bottom;\n\t\tvar ymax = 0;\n\t\tvar y=(((ymin-ymax)\/(max-min))*(max-v))+ymax;\n\t\treturn y;"}}},"dojo.widget.vml.Chart.Plotter.addPlotter":{"_":{"meta":{"summary":"","parameters":{"name":{"type":""},"func":{"type":""}},"src":"\t\tplotters[name]=func;"}}},"dojo.widget.vml.Chart.Plotter.plot":{"_":{"meta":{"summary":"","parameters":{"series":{"type":""},"chart":{"type":""}},"src":"\t\tif (series.values.length==0) return;\n\t\tif (series.plotType && plotters[series.plotType]){\n\t\t\treturn plotters[series.plotType](series, chart);\n\t\t}\n\t\telse if (chart.plotType && plotters[chart.plotType]){\n\t\t\treturn plotters[chart.plotType](series, chart);\n\t\t}"}}}}}}}