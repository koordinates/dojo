{"dojo.graphics.Colorspace":{"meta":{"requires":{"common":["dojo.lang","dojo.math.matrix"]},"methods":{"dojo.graphics.Colorspace":{"_":{"meta":{"summary":"","src":"\tthis.whitePoint = 'D65';\n\tthis.stdObserver = '10';\n\tthis.chromaticAdaptationAlg = 'bradford';\n\tthis.RGBWorkingSpace = 's_rgb';\n\tthis.useApproxCIELabMapping = 1; \/\/ see http:\/\/www.brucelindbloom.com\/LContinuity.html\n\n\tthis.chainMaps = {\n\t\t'RGB_to_xyY'  : ['XYZ'],\n\t\t'xyY_to_RGB'  : ['XYZ'],\n\t\t'RGB_to_Lab'  : ['XYZ'],\n\t\t'Lab_to_RGB'  : ['XYZ'],\n\t\t'RGB_to_LCHab': ['XYZ', 'Lab'],\n\t\t'LCHab_to_RGB': ['Lab'],\n\t\t'xyY_to_Lab'  : ['XYZ'],\n\t\t'Lab_to_xyY'  : ['XYZ'],\n\t\t'XYZ_to_LCHab': ['Lab'],\n\t\t'LCHab_to_XYZ': ['Lab'],\n\t\t'xyY_to_LCHab': ['XYZ', 'Lab'],\n\t\t'LCHab_to_xyY': ['Lab', 'XYZ'],\n\t\t'RGB_to_Luv'  : ['XYZ'],\n\t\t'Luv_to_RGB'  : ['XYZ'],\n\t\t'xyY_to_Luv'  : ['XYZ'],\n\t\t'Luv_to_xyY'  : ['XYZ'],\n\t\t'Lab_to_Luv'  : ['XYZ'],\n\t\t'Luv_to_Lab'  : ['XYZ'],\n\t\t'LCHab_to_Luv': ['Lab', 'XYZ'],\n\t\t'Luv_to_LCHab': ['XYZ', 'Lab'],\n\t\t'RGB_to_LCHuv'  : ['XYZ', 'Luv'],\n\t\t'LCHuv_to_RGB'  : ['Luv', 'XYZ'],\n\t\t'XYZ_to_LCHuv'  : ['Luv'],\n\t\t'LCHuv_to_XYZ'  : ['Luv'],\n\t\t'xyY_to_LCHuv'  : ['XYZ', 'Luv'],\n\t\t'LCHuv_to_xyY'  : ['Luv', 'XYZ'],\n\t\t'Lab_to_LCHuv'  : ['XYZ', 'Luv'],\n\t\t'LCHuv_to_Lab'  : ['Luv', 'XYZ'],\n\t\t'LCHab_to_LCHuv': ['Lab', 'XYZ', 'Luv'],\n\t\t'LCHuv_to_LCHab': ['Luv', 'XYZ', 'Lab'],\n\t\t'XYZ_to_CMY'    : ['RGB'],\n\t\t'CMY_to_XYZ'    : ['RGB'],\n\t\t'xyY_to_CMY'    : ['RGB'],\n\t\t'CMY_to_xyY'    : ['RGB'],\n\t\t'Lab_to_CMY'    : ['RGB'],\n\t\t'CMY_to_Lab'    : ['RGB'],\n\t\t'LCHab_to_CMY'  : ['RGB'],\n\t\t'CMY_to_LCHab'  : ['RGB'],\n\t\t'Luv_to_CMY'    : ['RGB'],\n\t\t'CMY_to_Luv'    : ['RGB'],\n\t\t'LCHuv_to_CMY'  : ['RGB'],\n\t\t'CMY_to_LCHuv'  : ['RGB'],\n\t\t'XYZ_to_HSL'    : ['RGB'],\n\t\t'HSL_to_XYZ'    : ['RGB'],\n\t\t'xyY_to_HSL'    : ['RGB'],\n\t\t'HSL_to_xyY'    : ['RGB'],\n\t\t'Lab_to_HSL'    : ['RGB'],\n\t\t'HSL_to_Lab'    : ['RGB'],\n\t\t'LCHab_to_HSL'  : ['RGB'],\n\t\t'HSL_to_LCHab'  : ['RGB'],\n\t\t'Luv_to_HSL'    : ['RGB'],\n\t\t'HSL_to_Luv'    : ['RGB'],\n\t\t'LCHuv_to_HSL'  : ['RGB'],\n\t\t'HSL_to_LCHuv'  : ['RGB'],\n\t\t'CMY_to_HSL'    : ['RGB'],\n\t\t'HSL_to_CMY'    : ['RGB'],\n\t\t'CMYK_to_HSL'   : ['RGB'],\n\t\t'HSL_to_CMYK'   : ['RGB'],\n\t\t'XYZ_to_HSV'    : ['RGB'],\n\t\t'HSV_to_XYZ'    : ['RGB'],\n\t\t'xyY_to_HSV'    : ['RGB'],\n\t\t'HSV_to_xyY'    : ['RGB'],\n\t\t'Lab_to_HSV'    : ['RGB'],\n\t\t'HSV_to_Lab'    : ['RGB'],\n\t\t'LCHab_to_HSV'  : ['RGB'],\n\t\t'HSV_to_LCHab'  : ['RGB'],\n\t\t'Luv_to_HSV'    : ['RGB'],\n\t\t'HSV_to_Luv'    : ['RGB'],\n\t\t'LCHuv_to_HSV'  : ['RGB'],\n\t\t'HSV_to_LCHuv'  : ['RGB'],\n\t\t'CMY_to_HSV'    : ['RGB'],\n\t\t'HSV_to_CMY'    : ['RGB'],\n\t\t'CMYK_to_HSV'   : ['RGB'],\n\t\t'HSV_to_CMYK'   : ['RGB'],\n\t\t'HSL_to_HSV'    : ['RGB'],\n\t\t'HSV_to_HSL'    : ['RGB'],\n\t\t'XYZ_to_CMYK'   : ['RGB'],\n\t\t'CMYK_to_XYZ'   : ['RGB'],\n\t\t'xyY_to_CMYK'   : ['RGB'],\n\t\t'CMYK_to_xyY'   : ['RGB'],\n\t\t'Lab_to_CMYK'   : ['RGB'],\n\t\t'CMYK_to_Lab'   : ['RGB'],\n\t\t'LCHab_to_CMYK' : ['RGB'],\n\t\t'CMYK_to_LCHab' : ['RGB'],\n\t\t'Luv_to_CMYK'   : ['RGB'],\n\t\t'CMYK_to_Luv'   : ['RGB'],\n\t\t'LCHuv_to_CMYK' : ['RGB'],\n\t\t'CMYK_to_LCHuv' : ['RGB']\n\t};\n\n\n\treturn this;","this_variables":["whitePoint","stdObserver","chromaticAdaptationAlg","RGBWorkingSpace","useApproxCIELabMapping","chainMaps","RGBWorkingSpace","RGBWorkingSpace","whitePoint"]}}},"dojo.graphics.Colorspace.convert":{"_":{"meta":{"summary":"","parameters":{"col":{"type":""},"model_from":{"type":""},"model_to":{"type":""}},"src":"\tvar k = model_from+'_to_'+model_to;\n\n\tif (this[k]){\n\t\treturn this[k](col);\n\t}else{\n\t\tif (this.chainMaps[k]){\n\n\t\t\tvar cur = model_from;\n\t\t\tvar models = this.chainMaps[k].concat();\n\t\t\tmodels.push(model_to);\n\n\t\t\tfor(var i=0; i<models.length; i++){\n\n\t\t\t\tcol = this.convert(col, cur, models[i]);\n\t\t\t\tcur = models[i];\n\t\t\t}\n\n\t\t\treturn col;\n\n\t\t}else{\n\n\t\t\tdojo.debug(\"Can't convert from \"+model_from+' to '+model_to);\n\t\t}\n\t}","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.munge":{"_":{"meta":{"summary":"","parameters":{"keys":{"type":""},"args":{"type":""}},"src":"\tif (dojo.lang.isArray(args[0])){\n\t\targs = args[0];\n\t}\n\n\tvar out = new Array();\n\n\tfor (var i=0; i<keys.length; i++){\n\t\tout[keys.charAt(i)] = args[i];\n\t}\n\n\treturn out;","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.getWhitePoint":{"_":{"meta":{"summary":"","src":"\tvar x = 0;\n\tvar y = 0;\n\tvar t = 0;\n\n\t\/\/ ref: http:\/\/en.wikipedia.org\/wiki\/White_point\n\t\/\/ TODO: i need some good\/better white point values\n\n\tswitch(this.stdObserver){\n\t\tcase '2' :\n\t\t\tswitch(this.whitePoint){\n\t\t\t\tcase 'E'   : x=1\/3    ; y=1\/3    ; t=5400; break; \/\/Equal energy\n\t\t\t\tcase 'D50' : x=0.34567; y=0.35850; t=5000; break;\n\t\t\t\tcase 'D55' : x=0.33242; y=0.34743; t=5500; break;\n\t\t\t\tcase 'D65' : x=0.31271; y=0.32902; t=6500; break;\n\t\t\t\tcase 'D75' : x=0.29902; y=0.31485; t=7500; break;\n\t\t\t\tcase 'A'   : x=0.44757; y=0.40745; t=2856; break; \/\/Incandescent tungsten\n\t\t\t\tcase 'B'   : x=0.34842; y=0.35161; t=4874; break;\n\t\t\t\tcase 'C'   : x=0.31006; y=0.31616; t=6774; break;\n\t\t\t\tcase '9300': x=0.28480; y=0.29320; t=9300; break; \/\/Blue phosphor monitors\n\t\t\t\tcase 'F2'  : x=0.37207; y=0.37512; t=4200; break; \/\/Cool White Fluorescent\n\t\t\t\tcase 'F7'  : x=0.31285; y=0.32918; t=6500; break; \/\/Narrow Band Daylight Fluorescent\n\t\t\t\tcase 'F11' : x=0.38054; y=0.37691; t=4000; break; \/\/Narrow Band White Fluorescent\n\t\t\t\tdefault: dojo.debug('White point '+this.whitePoint+\" isn't defined for Std. Observer \"+this.strObserver);\n\t\t\t};\n\t\t\tbreak;\n\t\tcase '10' :\n\t\t\tswitch(this.whitePoint){\n\t\t\t\tcase 'E'   : x=1\/3    ; y=1\/3    ; t=5400; break; \/\/Equal energy\n\t\t\t\tcase 'D50' : x=0.34773; y=0.35952; t=5000; break;\n\t\t\t\tcase 'D55' : x=0.33411; y=0.34877; t=5500; break;\n\t\t\t\tcase 'D65' : x=0.31382; y=0.33100; t=6500; break;\n\t\t\t\tcase 'D75' : x=0.29968; y=0.31740; t=7500; break;\n\t\t\t\tcase 'A'   : x=0.45117; y=0.40594; t=2856; break; \/\/Incandescent tungsten\n\t\t\t\tcase 'B'   : x=0.3498 ; y=0.3527 ; t=4874; break;\n\t\t\t\tcase 'C'   : x=0.31039; y=0.31905; t=6774; break;\n\t\t\t\tcase 'F2'  : x=0.37928; y=0.36723; t=4200; break; \/\/Cool White Fluorescent\n\t\t\t\tcase 'F7'  : x=0.31565; y=0.32951; t=6500; break; \/\/Narrow Band Daylight Fluorescent\n\t\t\t\tcase 'F11' : x=0.38543; y=0.37110; t=4000; break; \/\/Narrow Band White Fluorescent\n\t\t\t\tdefault: dojo.debug('White point '+this.whitePoint+\" isn't defined for Std. Observer \"+this.strObserver);\n\t\t\t};\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tdojo.debug(\"Std. Observer \"+this.strObserver+\" isn't defined\");\n\t}\n\n\tvar z = 1 - x - y;\n\n\tvar wp = {'x':x, 'y':y, 'z':z, 't':t};\n\n\twp.Y = 1;\n\n\tvar XYZ = this.xyY_to_XYZ([wp.x, wp.y, wp.Y]);\n\n\twp.X = XYZ[0];\n\twp.Y = XYZ[1];\n\twp.Z = XYZ[2];\n\n\treturn wp","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.getPrimaries":{"_":{"meta":{"summary":"","src":"\tswitch(this.RGBWorkingSpace){\n\n\t\tcase 'adobe_rgb_1998'\t: m = [2.2, 'D65', 0.6400, 0.3300, 0.297361, 0.2100, 0.7100, 0.627355, 0.1500, 0.0600, 0.075285]; break;\n\t\tcase 'apple_rgb'\t: m = [1.8, 'D65', 0.6250, 0.3400, 0.244634, 0.2800, 0.5950, 0.672034, 0.1550, 0.0700, 0.083332]; break;\n\t\tcase 'best_rgb'\t\t: m = [2.2, 'D50', 0.7347, 0.2653, 0.228457, 0.2150, 0.7750, 0.737352, 0.1300, 0.0350, 0.034191]; break;\n\t\tcase 'beta_rgb'\t\t: m = [2.2, 'D50', 0.6888, 0.3112, 0.303273, 0.1986, 0.7551, 0.663786, 0.1265, 0.0352, 0.032941]; break;\n\t\tcase 'bruce_rgb'\t: m = [2.2, 'D65', 0.6400, 0.3300, 0.240995, 0.2800, 0.6500, 0.683554, 0.1500, 0.0600, 0.075452]; break;\n\t\tcase 'cie_rgb'\t\t: m = [2.2, 'E'  , 0.7350, 0.2650, 0.176204, 0.2740, 0.7170, 0.812985, 0.1670, 0.0090, 0.010811]; break;\n\t\tcase 'color_match_rgb'\t: m = [1.8, 'D50', 0.6300, 0.3400, 0.274884, 0.2950, 0.6050, 0.658132, 0.1500, 0.0750, 0.066985]; break;\n\t\tcase 'don_rgb_4'\t: m = [2.2, 'D50', 0.6960, 0.3000, 0.278350, 0.2150, 0.7650, 0.687970, 0.1300, 0.0350, 0.033680]; break;\n\t\tcase 'eci_rgb'\t\t: m = [1.8, 'D50', 0.6700, 0.3300, 0.320250, 0.2100, 0.7100, 0.602071, 0.1400, 0.0800, 0.077679]; break;\n\t\tcase 'ekta_space_ps5'\t: m = [2.2, 'D50', 0.6950, 0.3050, 0.260629, 0.2600, 0.7000, 0.734946, 0.1100, 0.0050, 0.004425]; break;\n\t\tcase 'ntsc_rgb'\t\t: m = [2.2, 'C'  , 0.6700, 0.3300, 0.298839, 0.2100, 0.7100, 0.586811, 0.1400, 0.0800, 0.114350]; break;\n\t\tcase 'pal_secam_rgb'\t: m = [2.2, 'D65', 0.6400, 0.3300, 0.222021, 0.2900, 0.6000, 0.706645, 0.1500, 0.0600, 0.071334]; break;\n\t\tcase 'pro_photo_rgb'\t: m = [1.8, 'D50', 0.7347, 0.2653, 0.288040, 0.1596, 0.8404, 0.711874, 0.0366, 0.0001, 0.000086]; break;\n\t\tcase 'smpte-c_rgb'\t: m = [2.2, 'D65', 0.6300, 0.3400, 0.212395, 0.3100, 0.5950, 0.701049, 0.1550, 0.0700, 0.086556]; break;\n\t\tcase 's_rgb'\t\t: m = [2.2, 'D65', 0.6400, 0.3300, 0.212656, 0.3000, 0.6000, 0.715158, 0.1500, 0.0600, 0.072186]; break;\n\t\tcase 'wide_gamut_rgb'\t: m = [2.2, 'D50', 0.7350, 0.2650, 0.258187, 0.1150, 0.8260, 0.724938, 0.1570, 0.0180, 0.016875]; break;\n\n\t\tdefault: dojo.debug(\"RGB working space \"+this.RGBWorkingSpace+\" isn't defined\");\n\t}\n\n\tvar p = {};\n\n\tp.name = this.RGBWorkingSpace;\n\tp.gamma = m[0];\n\tp.wp = m[1];\n\n\tp.xr = m[2];\n\tp.yr = m[3];\n\tp.Yr = m[4];\n\n\tp.xg = m[5];\n\tp.yg = m[6];\n\tp.Yg = m[7];\n\n\tp.xb = m[8];\n\tp.yb = m[9];\n\tp.Yb = m[10];\n\n\t\/\/ if WP doesn't match current WP, convert the primaries over\n\n\tif (p.wp != this.whitePoint){\n\n\t\tvar r = this.XYZ_to_xyY( this.chromaticAdaptation( this.xyY_to_XYZ([p.xr, p.yr, p.Yr]), p.wp, this.whitePoint ) );\n\t\tvar g = this.XYZ_to_xyY( this.chromaticAdaptation( this.xyY_to_XYZ([p.xg, p.yg, p.Yg]), p.wp, this.whitePoint ) );\n\t\tvar b = this.XYZ_to_xyY( this.chromaticAdaptation( this.xyY_to_XYZ([p.xb, p.yb, p.Yb]), p.wp, this.whitePoint ) );\n\n\t\tp.xr = r[0];\n\t\tp.yr = r[1];\n\t\tp.Yr = r[2];\n\n\t\tp.xg = g[0];\n\t\tp.yg = g[1];\n\t\tp.Yg = g[2];\n\n\t\tp.xb = b[0];\n\t\tp.yb = b[1];\n\t\tp.Yb = b[2];\n\n\t\tp.wp = this.whitePoint;\n\t}\n\n\tp.zr = 1 - p.xr - p.yr;\n\tp.zg = 1 - p.xg - p.yg;\n\tp.zb = 1 - p.xb - p.yb;\n\n\treturn p;","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.epsilon":{"_":{"meta":{"summary":"","src":"\treturn this.useApproxCIELabMapping ? 0.008856 : 216 \/ 24289;","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.kappa":{"_":{"meta":{"summary":"","src":"\treturn this.useApproxCIELabMapping ? 903.3 : 24389 \/ 27;","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.XYZ_to_xyY":{"_":{"meta":{"summary":"","src":"\tvar src = this.munge('XYZ', arguments);\n\n\tvar sum = src.X + src.Y + src.Z;\n\n\tif (sum == 0){\n\n\t\tvar wp = this.getWhitePoint();\n\t\tvar x = wp.x;\n\t\tvar y = wp.y;\n\t}else{\n\t\tvar x = src.X \/ sum;\n\t\tvar y = src.Y \/ sum;\n\t}\n\n\tvar Y = src.Y;\n\n\n\treturn [x, y, Y];","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.xyY_to_XYZ":{"_":{"meta":{"summary":"","src":"\tvar src = this.munge('xyY', arguments);\n\n\tif (src.y == 0){\n\n\t\tvar X = 0;\n\t\tvar Y = 0;\n\t\tvar Z = 0;\n\t}else{\n\t\tvar X = (src.x * src.Y) \/ src.y;\n\t\tvar Y = src.Y;\n\t\tvar Z = ((1 - src.x - src.y) * src.Y) \/ src.y;\n\t}\n\n\treturn [X, Y, Z];","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.RGB_to_XYZ":{"_":{"meta":{"summary":"","src":"\tvar src = this.munge('RGB', arguments);\n\n\tvar m = this.getRGB_XYZ_Matrix();\n\tvar pr = this.getPrimaries();\n\n\tif (this.RGBWorkingSpace == 's_rgb'){\n\n\t\tvar r = (src.R > 0.04045) ? Math.pow(((src.R + 0.055) \/ 1.055), 2.4) : src.R \/ 12.92;\n\t\tvar g = (src.G > 0.04045) ? Math.pow(((src.G + 0.055) \/ 1.055), 2.4) : src.G \/ 12.92;\n\t\tvar b = (src.B > 0.04045) ? Math.pow(((src.B + 0.055) \/ 1.055), 2.4) : src.B \/ 12.92;\n\n\t}else{\n\n\t\tvar r = Math.pow(src.R, pr.gamma);\n\t\tvar g = Math.pow(src.G, pr.gamma);\n\t\tvar b = Math.pow(src.B, pr.gamma);\n\t}\n\n\tvar XYZ = dojo.math.matrix.multiply([[r, g, b]], m);\n\n\treturn [XYZ[0][0], XYZ[0][1], XYZ[0][2]];","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.XYZ_to_RGB":{"_":{"meta":{"summary":"","src":"\tvar src = this.munge('XYZ', arguments);\n\n\tvar mi = this.getXYZ_RGB_Matrix();\n\tvar pr = this.getPrimaries();\n\n\tvar rgb = dojo.math.matrix.multiply([[src.X, src.Y, src.Z]], mi);\n\tvar r = rgb[0][0];\n\tvar g = rgb[0][1];\n\tvar b = rgb[0][2];\n\n\tif (this.RGBWorkingSpace == 's_rgb'){\n\n\t\tvar R = (r > 0.0031308) ? (1.055 * Math.pow(r, 1.0\/2.4)) - 0.055 : 12.92 * r;\n\t\tvar G = (g > 0.0031308) ? (1.055 * Math.pow(g, 1.0\/2.4)) - 0.055 : 12.92 * g;\n\t\tvar B = (b > 0.0031308) ? (1.055 * Math.pow(b, 1.0\/2.4)) - 0.055 : 12.92 * b;\n\t}else{\n\t\tvar R = Math.pow(r, 1\/pr.gamma);\n\t\tvar G = Math.pow(g, 1\/pr.gamma);\n\t\tvar B = Math.pow(b, 1\/pr.gamma);\n\t}\n\n\treturn [R, G, B];","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.XYZ_to_Lab":{"_":{"meta":{"summary":"","src":"\tvar src = this.munge('XYZ', arguments);\n\n\tvar wp = this.getWhitePoint();\n\n\tvar xr = src.X \/ wp.X;\n\tvar yr = src.Y \/ wp.Y;\n\tvar zr = src.Z \/ wp.Z;\n\n\tvar fx = (xr > this.epsilon()) ? Math.pow(xr, 1\/3) : (this.kappa() * xr + 16) \/ 116;\n\tvar fy = (yr > this.epsilon()) ? Math.pow(yr, 1\/3) : (this.kappa() * yr + 16) \/ 116;\n\tvar fz = (zr > this.epsilon()) ? Math.pow(zr, 1\/3) : (this.kappa() * zr + 16) \/ 116;\n\n\tvar L = 116 * fy - 16;\n\tvar a = 500 * (fx - fy);\n\tvar b = 200 * (fy - fz);\n\n\treturn [L, a, b];","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.Lab_to_XYZ":{"_":{"meta":{"summary":"","src":"\tvar src = this.munge('Lab', arguments);\n\n\tvar wp = this.getWhitePoint();\n\n\tvar yr = (src.L > (this.kappa() * this.epsilon())) ? Math.pow((src.L + 16) \/ 116, 3) : src.L \/ this.kappa();\n\n\tvar fy = (yr > this.epsilon()) ? (src.L + 16) \/ 116 : (this.kappa() * yr + 16) \/ 116;\n\n\tvar fx = (src.a \/ 500) + fy;\n\tvar fz = fy - (src.b \/ 200);\n\n\tvar fxcube = Math.pow(fx, 3);\n\tvar fzcube = Math.pow(fz, 3);\n\n\tvar xr = (fxcube > this.epsilon()) ? fxcube : (116 * fx - 16) \/ this.kappa();\n\tvar zr = (fzcube > this.epsilon()) ? fzcube : (116 * fz - 16) \/ this.kappa();\n\n\tvar X = xr * wp.X;\n\tvar Y = yr * wp.Y;\n\tvar Z = zr * wp.Z;\n\n\treturn [X, Y, Z];","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.Lab_to_LCHab":{"_":{"meta":{"summary":"","src":"\tvar src = this.munge('Lab', arguments);\n\n\tvar L = src.L;\n\tvar C = Math.pow(src.a * src.a + src.b * src.b, 0.5);\n\tvar H = Math.atan2(src.b, src.a) * (180 \/ Math.PI);\n\n\tif (H < 0){ H += 360; }\n\tif (H > 360){ H -= 360; }\n\n\treturn [L, C, H];","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.LCHab_to_Lab":{"_":{"meta":{"summary":"","src":"\tvar src = this.munge('LCH', arguments);\n\n\tvar H_rad = src.H * (Math.PI \/ 180);\n\n\tvar L = src.L;\n\n\tvar a = src.C \/ Math.pow(Math.pow(Math.tan(H_rad), 2) + 1, 0.5);\n\tif ((90 < src.H) && (src.H < 270)){ a= -a; }\n\n\tvar b = Math.pow(Math.pow(src.C, 2) - Math.pow(a, 2), 0.5);\n\tif (src.H > 180){ b = -b; }\n\n\treturn [L, a, b];","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.chromaticAdaptation":{"_":{"meta":{"summary":"","parameters":{"col":{"type":""},"src_w":{"type":""},"dst_w":{"type":""}},"src":"\tcol = this.munge('XYZ', [col]);\n\n\t\/\/\n\t\/\/ gather white point data for the source and dest\n\t\/\/\n\n\tvar old_wp = this.whitePoint;\n\n\tthis.whitePoint = src_w;\n\tvar wp_src = this.getWhitePoint();\n\n\tthis.whitePoint = dst_w;\n\tvar wp_dst = this.getWhitePoint();\n\n\tthis.whitePoint = old_wp;\n\n\n\t\/\/\n\t\/\/ get a transformation matricies\n\t\/\/\n\n\tswitch(this.chromaticAdaptationAlg){\n\t\tcase 'xyz_scaling':\n\t\t\tvar ma = [[1,0,0],[0,1,0],[0,0,1]];\n\t\t\tvar mai = [[1,0,0],[0,1,0],[0,0,1]];\n\t\t\tbreak;\n\t\tcase 'bradford':\n\t\t\tvar ma = [[0.8951, -0.7502, 0.0389],[0.2664, 1.7135, -0.0685],[-0.1614, 0.0367, 1.0296]];\n\t\t\tvar mai = [[0.986993, 0.432305, -0.008529],[-0.147054, 0.518360, 0.040043],[0.159963, 0.049291, 0.968487]];\n\t\t\tbreak;\n\t\tcase 'von_kries':\n\t\t\tvar ma = [[0.40024, -0.22630, 0.00000],[0.70760, 1.16532, 0.00000],[-0.08081, 0.04570, 0.91822]]\n\t\t\tvar mai = [[1.859936, 0.361191, 0.000000],[-1.129382, 0.638812, 0.000000],[0.219897, -0.000006, 1.089064]]\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tdojo.debug(\"The \"+this.chromaticAdaptationAlg+\" chromatic adaptation algorithm matricies are not defined\");\n\t}\n\n\n\t\/\/\n\t\/\/ calculate the cone response domains\n\t\/\/\n\n\tvar domain_src = dojo.math.matrix.multiply( [[wp_src.x, wp_src.y, wp_src.z]], ma);\n\tvar domain_dst = dojo.math.matrix.multiply( [[wp_dst.x, wp_dst.y, wp_dst.z]], ma);\n\n\n\t\/\/\n\t\/\/ construct the centre matrix\n\t\/\/\n\n\tvar centre = [\n\t\t[domain_dst[0][0]\/domain_src[0][0], 0, 0],\n\t\t[0, domain_dst[0][1]\/domain_src[0][1], 0],\n\t\t[0, 0, domain_dst[0][2]\/domain_src[0][2]]\n\t];\n\n\n\t\/\/\n\t\/\/ caclulate 'm'\n\t\/\/\n\n\tvar m = dojo.math.matrix.multiply( dojo.math.matrix.multiply( ma, centre ), mai );\n\n\n\t\/\/\n\t\/\/ construct source color matrix\n\t\/\/\n\n\tvar dst = dojo.math.matrix.multiply( [[ col.X, col.Y, col.Z ]], m );\n\n\treturn dst[0];","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.getRGB_XYZ_Matrix":{"_":{"meta":{"summary":"","src":"\tvar wp = this.getWhitePoint();\n\tvar pr = this.getPrimaries();\n\n\tvar Xr = pr.xr \/ pr.yr;\n\tvar Yr = 1;\n\tvar Zr = (1 - pr.xr - pr.yr) \/ pr.yr;\n\n\tvar Xg = pr.xg \/ pr.yg;\n\tvar Yg = 1;\n\tvar Zg = (1 - pr.xg - pr.yg) \/ pr.yg;\n\n\tvar Xb = pr.xb \/ pr.yb;\n\tvar Yb = 1;\n\tvar Zb = (1 - pr.xb - pr.yb) \/ pr.yb;\n\n\tvar m1 = [[Xr, Yr, Zr],[Xg, Yg, Zg],[Xb, Yb, Zb]];\n\tvar m2 = [[wp.X, wp.Y, wp.Z]];\n\tvar sm = dojo.math.matrix.multiply(m2, dojo.math.matrix.inverse(m1));\n\n\tvar Sr = sm[0][0];\n\tvar Sg = sm[0][1];\n\tvar Sb = sm[0][2];\n\n\tvar m4 = [[Sr*Xr, Sr*Yr, Sr*Zr],\n\t\t  [Sg*Xg, Sg*Yg, Sg*Zg],\n\t\t  [Sb*Xb, Sb*Yb, Sb*Zb]];\n\n\treturn m4;","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.getXYZ_RGB_Matrix":{"_":{"meta":{"summary":"","src":"\tvar m = this.getRGB_XYZ_Matrix();\n\n\treturn dojo.math.matrix.inverse(m);","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.XYZ_to_Luv":{"_":{"meta":{"summary":"","src":"\tvar src = this.munge('XYZ', arguments);\n\n\tvar wp = this.getWhitePoint();\n\n\tvar ud = (4 * src.X) \/ (src.X + 15 * src.Y + 3 * src.Z);\n\tvar vd = (9 * src.Y) \/ (src.X + 15 * src.Y + 3 * src.Z);\n\n\tvar udr = (4 * wp.X) \/ (wp.X + 15 * wp.Y + 3 * wp.Z);\n\tvar vdr = (9 * wp.Y) \/ (wp.X + 15 * wp.Y + 3 * wp.Z);\n\n\tvar yr = src.Y \/ wp.Y;\n\n\tvar L = (yr > this.epsilon()) ? 116 * Math.pow(yr, 1\/3) - 16 : this.kappa() * yr;\n\tvar u = 13 * L * (ud-udr);\n\tvar v = 13 * L * (vd-vdr);\n\n\treturn [L, u, v];","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.Luv_to_XYZ":{"_":{"meta":{"summary":"","src":"\tvar src = this.munge('Luv', arguments);\n\n\tvar wp = this.getWhitePoint();\n\n\tvar uz = (4 * wp.X) \/ (wp.X + 15 * wp.Y + 3 * wp.Z);\n\tvar vz = (9 * wp.Y) \/ (wp.X + 15 * wp.Y + 3 * wp.Z);\n\n\tvar Y = (src.L > this.kappa() * this.epsilon()) ? Math.pow((src.L + 16) \/ 116, 3) : src.L \/ this.kappa();\n\n\tvar a = (1 \/ 3) * (((52 * src.L) \/ (src.u + 13 * src.L * uz)) - 1);\n\tvar b = -5 * Y;\n\tvar c = - (1 \/ 3);\n\tvar d = Y * (((39 * src.L) \/ (src.v + 13 * src.L * vz)) - 5);\n\n\tvar X = (d - b) \/ (a - c);\n\tvar Z = X * a + b;\n\n\treturn [X, Y, Z];","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.Luv_to_LCHuv":{"_":{"meta":{"summary":"","src":"\tvar src = this.munge('Luv', arguments);\n\n\tvar L = src.L;\n\tvar C = Math.pow(src.u * src.u + src.v * src.v, 0.5);\n\tvar H = Math.atan2(src.v, src.u) * (180 \/ Math.PI);\n\n\tif (H < 0){ H += 360; }\n\tif (H > 360){ H -= 360; }\n\n\treturn [L, C, H];","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.LCHuv_to_Luv":{"_":{"meta":{"summary":"","src":"\tvar src = this.munge('LCH', arguments);\n\n\tvar H_rad = src.H * (Math.PI \/ 180);\n\n\tvar L = src.L;\n\tvar u = src.C \/ Math.pow(Math.pow(Math.tan(H_rad), 2) + 1, 0.5);\n\tvar v = Math.pow(src.C * src.C - u * u, 0.5);\n\n\tif ((90 < src.H) && (src.H < 270)){ u *= -1; }\n\tif (src.H > 180){ v *= -1; }\n\n\treturn [L, u, v];","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.colorTemp_to_whitePoint":{"_":{"meta":{"summary":"","parameters":{"T":{"type":""}},"src":"\tif (T < 4000){\n\t\tdojo.debug(\"Can't find a white point for temperatures under 4000K\");\n\t\treturn [0,0];\n\t}\n\n\tif (T > 25000){\n\t\tdojo.debug(\"Can't find a white point for temperatures over 25000K\");\n\t\treturn [0,0];\n\t}\n\n\tvar T1 = T;\n\tvar T2 = T * T;\n\tvar T3 = T2 * T;\n\n\tvar ten9 = Math.pow(10, 9);\n\tvar ten6 = Math.pow(10, 6);\n\tvar ten3 = Math.pow(10, 3);\n\n\tif (T <= 7000){\n\n\t\tvar x = (-4.6070 * ten9 \/ T3) + (2.9678 * ten6 \/ T2) + (0.09911 * ten3 \/ T) + 0.244063;\n\t}else{\n\t\tvar x = (-2.0064 * ten9 \/ T3) + (1.9018 * ten6 \/ T2) + (0.24748 * ten3 \/ T) + 0.237040;\n\t}\n\n\tvar y = -3.000 * x * x + 2.870 * x - 0.275;\n\n\treturn [x, y];","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.RGB_to_CMY":{"_":{"meta":{"summary":"","src":"\tvar src = this.munge('RGB', arguments);\n\n\tvar C = 1 - src.R;\n\tvar M = 1 - src.G;\n\tvar Y = 1 - src.B;\n\n\treturn [C, M, Y];","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.CMY_to_RGB":{"_":{"meta":{"summary":"","src":"\tvar src = this.munge('CMY', arguments);\n\n\tvar R = 1 - src.C;\n\tvar G = 1 - src.M;\n\tvar B = 1 - src.Y;\n\n\treturn [R, G, B];","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.RGB_to_CMYK":{"_":{"meta":{"summary":"","src":"\tvar src = this.munge('RGB', arguments);\n\n\tvar K = Math.min(1-src.R, 1-src.G, 1-src.B);\n\tvar C = (1 - src.R - K) \/ (1 - K);\n\tvar M = (1 - src.G - K) \/ (1 - K);\n\tvar Y = (1 - src.B - K) \/ (1 - K);\n\n\treturn [C, M, Y, K];","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.CMYK_to_RGB":{"_":{"meta":{"summary":"","src":"\tvar src = this.munge('CMYK', arguments);\n\n\tvar R = 1 - Math.min(1, src.C * (1-src.K) + src.K);\n\tvar G = 1 - Math.min(1, src.M * (1-src.K) + src.K);\n\tvar B = 1 - Math.min(1, src.Y * (1-src.K) + src.K);\n\n\treturn [R, G, B];","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.CMY_to_CMYK":{"_":{"meta":{"summary":"","src":"\tvar src = this.munge('CMY', arguments);\n\n\tvar K = Math.min(src.C, src.M, src.Y);\n\tvar C = (src.C - K) \/ (1 - K);\n\tvar M = (src.M - K) \/ (1 - K);\n\tvar Y = (src.Y - K) \/ (1 - K);\n\n\treturn [C, M, Y, K];","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.CMYK_to_CMY":{"_":{"meta":{"summary":"","src":"\tvar src = this.munge('CMYK', arguments);\n\n\tvar C = Math.min(1, src.C * (1-src.K) + src.K);\n\tvar M = Math.min(1, src.M * (1-src.K) + src.K);\n\tvar Y = Math.min(1, src.Y * (1-src.K) + src.K);\n\n\treturn [C, M, Y];","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.RGB_to_HSV":{"_":{"meta":{"summary":"","src":"\tvar src = this.munge('RGB', arguments);\n\n\t\/\/ Based on C Code in \"Computer Graphics -- Principles and Practice,\"\n\t\/\/ Foley et al, 1996, p. 592. \n\n\tvar min = Math.min(src.R, src.G, src.B);\n\tvar V = Math.max(src.R, src.G, src.B);\n\n\tvar delta = V - min;\n\n\tvar H = null;\n\tvar S = (V == 0) ? 0 : delta \/ V;\n\n\tif (S == 0){\n\t\tH = 0;\n\t}else{\n\t\tif (src.R == V){\n\t\t\tH = 60 * (src.G - src.B) \/ delta;\n\t\t}else{\n\t\t\tif (src.G == V){\n\t\t\t\tH = 120 + 60 * (src.B - src.R) \/ delta;\n\t\t\t}else{\n\t\t\t\tif (src.B == V){\n\t\t\t\t\t\/\/ between magenta and cyan\n\t\t\t\t\tH = 240 + 60 * (src.R - src.G) \/ delta;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (H < 0){\n\t\t\tH += 360;\n\t\t}\n\t}\n\n\tH = (H == 0) ? 360 : H;\n\n\treturn [H, S, V];","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.HSV_to_RGB":{"_":{"meta":{"summary":"","src":"\tvar src = this.munge('HSV', arguments);\n\n\tif (src.H == 360){ src.H = 0;}\n\n\t\/\/ Based on C Code in \"Computer Graphics -- Principles and Practice,\"\n\t\/\/ Foley et al, 1996, p. 593.\n\n\tvar r = null;\n\tvar g = null;\n\tvar b = null;\n\n\tif (src.S == 0){\n\t\t\/\/ color is on black-and-white center line\n\t\t\/\/ achromatic: shades of gray\n\t\tvar R = src.V;\n\t\tvar G = src.V;\n\t\tvar B = src.V;\n\t}else{\n\t\t\/\/ chromatic color\n\t\tvar hTemp = src.H \/ 60;\t\t\/\/ h is now IN [0,6]\n\t\tvar i = Math.floor(hTemp);\t\/\/ largest integer <= h\n\t\tvar f = hTemp - i;\t\t\/\/ fractional part of h\n\n\t\tvar p = src.V * (1 - src.S);\n\t\tvar q = src.V * (1 - (src.S * f));\n\t\tvar t = src.V * (1 - (src.S * (1 - f)));\n\n\t\tswitch(i){\n\t\t\tcase 0: R = src.V; G = t    ; B = p    ; break;\n\t\t\tcase 1: R = q    ; G = src.V; B = p    ; break;\n\t\t\tcase 2: R = p    ; G = src.V; B = t    ; break;\n\t\t\tcase 3: R = p    ; G = q    ; B = src.V; break;\n\t\t\tcase 4: R = t    ; G = p    ; B = src.V; break;\n\t\t\tcase 5: R = src.V; G = p    ; B = q    ; break;\n\t\t}\n\t}\n\n\treturn [R, G, B];","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.RGB_to_HSL":{"_":{"meta":{"summary":"","src":"\tvar src = this.munge('RGB', arguments);\n\n\t\/\/\n\t\/\/ based on C code from http:\/\/astronomy.swin.edu.au\/~pbourke\/colour\/hsl\/\n\t\/\/\n\n\n\tvar min = Math.min(src.R, src.G, src.B);\n\tvar max = Math.max(src.R, src.G, src.B);\n\tvar delta = max - min;\n\n\tvar H = 0;\n\tvar S = 0;\n\tvar L = (min + max) \/ 2;\n\n\tif ((L > 0) && (L < 1)){\n\t\tS = delta \/ ((L < 0.5) ? (2 * L) : (2 - 2 * L));\n\t}\n\n\tif (delta > 0) {\n\t\tif ((max == src.R) && (max != src.G)){\n\t\t\tH += (src.G - src.B) \/ delta;\n\t\t}\n\t\tif ((max == src.G) && (max != src.B)){\n\t\t\tH += (2 + (src.B - src.R) \/ delta);\n\t\t}\n\t\tif ((max == src.B) && (max != src.R)){\n\t\t\tH += (4 + (src.R - src.G) \/ delta);\n\t\t}\n\t\tH *= 60;\n\t}\n\n\tH = (H == 0) ? 360 : H;\n\n\treturn [H, S, L];","this":"dojo.graphics.Colorspace"}}},"dojo.graphics.Colorspace.HSL_to_RGB":{"_":{"meta":{"summary":"","src":"\tvar src = this.munge('HSL', arguments);\n\n\t\/\/\n\t\/\/ based on C code from http:\/\/astronomy.swin.edu.au\/~pbourke\/colour\/hsl\/\n\t\/\/\n\n\twhile (src.H < 0){ src.H += 360; }\n\twhile (src.H >= 360){ src.H -= 360; }\n\n\tvar R = 0;\n\tvar G = 0;\n\tvar B = 0;\n\n\tif (src.H < 120){\n\t\tR = (120 - src.H) \/ 60;\n\t\tG = src.H \/ 60;\n\t\tB = 0;\n\t}else if (src.H < 240){\n\t\tR = 0;\n\t\tG = (240 - src.H) \/ 60;\n\t\tB = (src.H - 120) \/ 60;\n\t}else{\n\t\tR = (src.H - 240) \/ 60;\n\t\tG = 0;\n\t\tB = (360 - src.H) \/ 60;\n\t}\n\n\tR = 2 * src.S * Math.min(R, 1) + (1 - src.S);\n\tG = 2 * src.S * Math.min(G, 1) + (1 - src.S);\n\tB = 2 * src.S * Math.min(B, 1) + (1 - src.S);\n\n\tif (src.L < 0.5){\n\t\tR = src.L * R;\n\t\tG = src.L * G;\n\t\tB = src.L * B;\n\t}else{\n\t\tR = (1 - src.L) * R + 2 * src.L - 1;\n\t\tG = (1 - src.L) * G + 2 * src.L - 1;\n\t\tB = (1 - src.L) * B + 2 * src.L - 1;\n\t}\n\n\treturn [R, G, B];","this":"dojo.graphics.Colorspace"}}}}}},"dojo.graphics._":{"meta":{"requires":{"browser":["dojo.graphics.htmlEffects"],"dashboard":["dojo.graphics.htmlEffects"]}}},"dojo.graphics.color.hsl":{"meta":{"requires":{"common":["dojo.lang.array"]},"methods":{"dojo.graphics.color.rgb2hsl":{"_":{"meta":{"summary":"","parameters":{"r":{"type":""},"g":{"type":""},"b":{"type":""}},"src":"\tif (dojo.lang.isArray(r)) {\n\t\tb = r[2] || 0;\n\t\tg = r[1] || 0;\n\t\tr = r[0] || 0;\n\t}\n\n\tr \/= 255;\n\tg \/= 255;\n\tb \/= 255;\n\n\t\/\/\n\t\/\/ based on C code from http:\/\/astronomy.swin.edu.au\/~pbourke\/colour\/hsl\/\n\t\/\/\n\n\tvar h = null;\n\tvar s = null;\n\tvar l = null;\n\n\n\tvar min = Math.min(r, g, b);\n\tvar max = Math.max(r, g, b);\n\tvar delta = max - min;\n\n\tl = (min + max) \/ 2;\n\n\ts = 0;\n\n\tif ((l > 0) && (l < 1)){\n\t\ts = delta \/ ((l < 0.5) ? (2 * l) : (2 - 2 * l));\n\t}\n\n\th = 0;\n\n\tif (delta > 0) {\n\t\tif ((max == r) && (max != g)){\n\t\t\th += (g - b) \/ delta;\n\t\t}\n\t\tif ((max == g) && (max != b)){\n\t\t\th += (2 + (b - r) \/ delta);\n\t\t}\n\t\tif ((max == b) && (max != r)){\n\t\t\th += (4 + (r - g) \/ delta);\n\t\t}\n\t\th *= 60;\n\t}\n\n\th = (h == 0) ? 360 : Math.ceil((h \/ 360) * 255);\n\ts = Math.ceil(s * 255);\n\tl = Math.ceil(l * 255);\n\n\treturn [h, s, l];"}}},"dojo.graphics.color.hsl2rgb":{"_":{"meta":{"summary":"","parameters":{"h":{"type":""},"s":{"type":""},"l":{"type":""}},"src":"\tif (dojo.lang.isArray(h)) {\n\t\tl = h[2] || 0;\n\t\ts = h[1] || 0;\n\t\th = h[0] || 0;\n\t}\n\n\th = (h \/ 255) * 360;\n\tif (h == 360){ h = 0;}\n\ts = s \/ 255;\n\tl = l \/ 255;\n\n\t\/\/\n\t\/\/ based on C code from http:\/\/astronomy.swin.edu.au\/~pbourke\/colour\/hsl\/\n\t\/\/\n\n\n\twhile (h < 0){ h += 360; }\n\twhile (h > 360){ h -= 360; }\n\tvar r, g, b;\n\tif (h < 120){\n\t\tr = (120 - h) \/ 60;\n\t\tg = h \/ 60;\n\t\tb = 0;\n\t}else if (h < 240){\n\t\tr = 0;\n\t\tg = (240 - h) \/ 60;\n\t\tb = (h - 120) \/ 60;\n\t}else{\n\t\tr = (h - 240) \/ 60;\n\t\tg = 0;\n\t\tb = (360 - h) \/ 60;\n\t}\n\n\tr = Math.min(r, 1);\n\tg = Math.min(g, 1);\n\tb = Math.min(b, 1);\n\n\tr = 2 * s * r + (1 - s);\n\tg = 2 * s * g + (1 - s);\n\tb = 2 * s * b + (1 - s);\n\n\tif (l < 0.5){\n\t\tr = l * r;\n\t\tg = l * g;\n\t\tb = l * b;\n\t}else{\n\t\tr = (1 - l) * r + 2 * l - 1;\n\t\tg = (1 - l) * g + 2 * l - 1;\n\t\tb = (1 - l) * b + 2 * l - 1;\n\t}\n\n\tr = Math.ceil(r * 255);\n\tg = Math.ceil(g * 255);\n\tb = Math.ceil(b * 255);\n\n\treturn [r, g, b];"}}},"dojo.graphics.color.hsl2hex":{"_":{"meta":{"summary":"","parameters":{"h":{"type":""},"s":{"type":""},"l":{"type":""}},"src":"\tvar rgb = dojo.graphics.color.hsl2rgb(h, s, l);\n\treturn dojo.graphics.color.rgb2hex(rgb[0], rgb[1], rgb[2]);"}}},"dojo.graphics.color.hex2hsl":{"_":{"meta":{"summary":"","parameters":{"hex":{"type":""}},"src":"\tvar rgb = dojo.graphics.color.hex2rgb(hex);\n\treturn dojo.graphics.color.rgb2hsl(rgb[0], rgb[1], rgb[2]);"}}},"dojo.graphics.color.Color.toHsl":{"_":{"meta":{"summary":"","src":"\t\treturn dojo.graphics.color.rgb2hsl(this.toRgb());","this":"dojo.graphics.color.Color"}}}}}},"dojo.graphics.color.hsv":{"meta":{"requires":{"common":["dojo.lang.array"]},"methods":{"dojo.graphics.color.rgb2hsv":{"_":{"meta":{"summary":"","parameters":{"r":{"type":""},"g":{"type":""},"b":{"type":""}},"src":"\tif (dojo.lang.isArray(r)) {\n\t\tb = r[2] || 0;\n\t\tg = r[1] || 0;\n\t\tr = r[0] || 0;\n\t}\n\n\t\/\/ r,g,b, each 0 to 255, to HSV.\n\t\/\/ h = 0.0 to 360.0 (corresponding to 0..360.0 degrees around hexcone)\n\t\/\/ s = 0.0 (shade of gray) to 1.0 (pure color)\n\t\/\/ v = 0.0 (black) to 1.0 {white)\n\t\/\/\n\t\/\/ Based on C Code in \"Computer Graphics -- Principles and Practice,\"\n\t\/\/ Foley et al, 1996, p. 592. \n\t\/\/\n\t\/\/ our calculatuions are based on 'regular' values (0-360, 0-1, 0-1) \n\t\/\/ but we return bytes values (0-255, 0-255, 0-255)\n\n\tvar h = null;\n\tvar s = null;\n\tvar v = null;\n\n\tvar min = Math.min(r, g, b);\n\tv = Math.max(r, g, b);\n\n\tvar delta = v - min;\n\n\t\/\/ calculate saturation (0 if r, g and b are all 0)\n\n\ts = (v == 0) ? 0 : delta\/v;\n\n\tif (s == 0){\n\t\t\/\/ achromatic: when saturation is, hue is undefined\n\t\th = 0;\n\t}else{\n\t\t\/\/ chromatic\n\t\tif (r == v){\n\t\t\t\/\/ between yellow and magenta\n\t\t\th = 60 * (g - b) \/ delta;\n\t\t}else{\n\t\t\tif (g == v){\n\t\t\t\t\/\/ between cyan and yellow\n\t\t\t\th = 120 + 60 * (b - r) \/ delta;\n\t\t\t}else{\n\t\t\t\tif (b == v){\n\t\t\t\t\t\/\/ between magenta and cyan\n\t\t\t\t\th = 240 + 60 * (r - g) \/ delta;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (h < 0){\n\t\t\th += 360;\n\t\t}\n\t}\n\n\n\th = (h == 0) ? 360 : Math.ceil((h \/ 360) * 255);\n\ts = Math.ceil(s * 255);\n\n\treturn [h, s, v];"}}},"dojo.graphics.color.hsv2rgb":{"_":{"meta":{"summary":"","parameters":{"h":{"type":""},"s":{"type":""},"v":{"type":""}},"src":"\tif (dojo.lang.isArray(h)) {\n\t\tv = h[2] || 0;\n\t\ts = h[1] || 0;\n\t\th = h[0] || 0;\n\t}\n\n\th = (h \/ 255) * 360;\n\tif (h == 360){ h = 0;}\n\n\ts = s \/ 255;\n\tv = v \/ 255;\n\n\t\/\/ Based on C Code in \"Computer Graphics -- Principles and Practice,\"\n\t\/\/ Foley et al, 1996, p. 593.\n\t\/\/\n\t\/\/ H = 0.0 to 360.0 (corresponding to 0..360 degrees around hexcone) 0 for S = 0\n\t\/\/ S = 0.0 (shade of gray) to 1.0 (pure color)\n\t\/\/ V = 0.0 (black) to 1.0 (white)\n\n\tvar r = null;\n\tvar g = null;\n\tvar b = null;\n\n\tif (s == 0){\n\t\t\/\/ color is on black-and-white center line\n\t\t\/\/ achromatic: shades of gray\n\t\tr = v;\n\t\tg = v;\n\t\tb = v;\n\t}else{\n\t\t\/\/ chromatic color\n\t\tvar hTemp = h \/ 60;\t\t\/\/ h is now IN [0,6]\n\t\tvar i = Math.floor(hTemp);\t\/\/ largest integer <= h\n\t\tvar f = hTemp - i;\t\t\/\/ fractional part of h\n\n\t\tvar p = v * (1 - s);\n\t\tvar q = v * (1 - (s * f));\n\t\tvar t = v * (1 - (s * (1 - f)));\n\n\t\tswitch(i){\n\t\t\tcase 0: r = v; g = t; b = p; break;\n\t\t\tcase 1: r = q; g = v; b = p; break;\n\t\t\tcase 2: r = p; g = v; b = t; break;\n\t\t\tcase 3: r = p; g = q; b = v; break;\n\t\t\tcase 4: r = t; g = p; b = v; break;\n\t\t\tcase 5: r = v; g = p; b = q; break;\n\t\t}\n\t}\n\n\tr = Math.ceil(r * 255);\n\tg = Math.ceil(g * 255);\n\tb = Math.ceil(b * 255);\n\n\treturn [r, g, b];"}}},"dojo.graphics.color.Color.toHsv":{"_":{"meta":{"summary":"","src":"\t\treturn dojo.graphics.color.rgb2hsv(this.toRgb());","this":"dojo.graphics.color.Color"}}}}}},"dojo.graphics.color":{"meta":{"requires":{"common":["dojo.lang.array"]},"methods":{"dojo.graphics.color.Color":{"_":{"meta":{"summary":"","parameters":{"r":{"type":""},"g":{"type":""},"b":{"type":""},"a":{"type":""}},"src":"\t\tthis.r = r[0];\n\t\tthis.g = r[1];\n\t\tthis.b = r[2];\n\t\tthis.a = r[3]||1.0;\n\t} else if(dojo.lang.isString(r)) {\n\t\tvar rgb = dojo.graphics.color.extractRGB(r);\n\t\tthis.r = rgb[0];\n\t\tthis.g = rgb[1];\n\t\tthis.b = rgb[2];\n\t\tthis.a = g||1.0;\n\t} else if(r instanceof dojo.graphics.color.Color) {\n\t\tthis.r = r.r;\n\t\tthis.b = r.b;\n\t\tthis.g = r.g;\n\t\tthis.a = r.a;\n\t} else {\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\t\tthis.a = a;\n\t}","this_variables":["r","g","b","a"]}}},"dojo.graphics.color.Color.fromArray":{"_":{"meta":{"summary":"","parameters":{"arr":{"type":""}},"src":"\treturn new dojo.graphics.color.Color(arr[0], arr[1], arr[2], arr[3]);"}}},"dojo.graphics.color.blend":{"_":{"meta":{"summary":"","parameters":{"a":{"type":""},"b":{"type":""},"weight":{"type":""}},"src":"\tif(typeof a == \"string\") { return dojo.graphics.color.blendHex(a, b, weight); }\n\tif(!weight) { weight = 0; }\n\telse if(weight > 1) { weight = 1; }\n\telse if(weight < -1) { weight = -1; }\n\tvar c = new Array(3);\n\tfor(var i = 0; i < 3; i++) {\n\t\tvar half = Math.abs(a[i] - b[i])\/2;\n\t\tc[i] = Math.floor(Math.min(a[i], b[i]) + half + (half * weight));\n\t}\n\treturn c;"}}},"dojo.graphics.color.blendHex":{"_":{"meta":{"summary":"","parameters":{"a":{"type":""},"b":{"type":""},"weight":{"type":""}},"src":"\treturn dojo.graphics.color.rgb2hex(dojo.graphics.color.blend(dojo.graphics.color.hex2rgb(a), dojo.graphics.color.hex2rgb(b), weight));"}}},"dojo.graphics.color.extractRGB":{"_":{"meta":{"summary":"","parameters":{"color":{"type":""}},"src":"\tvar hex = \"0123456789abcdef\";\n\tcolor = color.toLowerCase();\n\tif( color.indexOf(\"rgb\") == 0 ) {\n\t\tvar matches = color.match(\/rgba*\\((\\d+), *(\\d+), *(\\d+)\/i);\n\t\tvar ret = matches.splice(1, 3);\n\t\treturn ret;\n\t} else {\n\t\tvar colors = dojo.graphics.color.hex2rgb(color);\n\t\tif(colors) {\n\t\t\treturn colors;\n\t\t} else {\n\t\t\t\/\/ named color (how many do we support?)\n\t\t\treturn dojo.graphics.color.named[color] || [255, 255, 255];\n\t\t}\n\t}"}}},"dojo.graphics.color.hex2rgb":{"_":{"meta":{"summary":"","parameters":{"hex":{"type":""}},"src":"\tvar hexNum = \"0123456789ABCDEF\";\n\tvar rgb = new Array(3);\n\tif( hex.indexOf(\"#\") == 0 ) { hex = hex.substring(1); }\n\thex = hex.toUpperCase();\n\tif(hex.replace(new RegExp(\"[\"+hexNum+\"]\", \"g\"), \"\") != \"\") {\n\t\treturn null;\n\t}\n\tif( hex.length == 3 ) {\n\t\trgb[0] = hex.charAt(0) + hex.charAt(0)\n\t\trgb[1] = hex.charAt(1) + hex.charAt(1)\n\t\trgb[2] = hex.charAt(2) + hex.charAt(2);\n\t} else {\n\t\trgb[0] = hex.substring(0, 2);\n\t\trgb[1] = hex.substring(2, 4);\n\t\trgb[2] = hex.substring(4);\n\t}\n\tfor(var i = 0; i < rgb.length; i++) {\n\t\trgb[i] = hexNum.indexOf(rgb[i].charAt(0)) * 16 + hexNum.indexOf(rgb[i].charAt(1));\n\t}\n\treturn rgb;"}}},"dojo.graphics.color.rgb2hex":{"_":{"meta":{"summary":"","parameters":{"r":{"type":""},"g":{"type":""},"b":{"type":""}},"src":"\tif(dojo.lang.isArray(r)) {\n\t\tg = r[1] || 0;\n\t\tb = r[2] || 0;\n\t\tr = r[0] || 0;\n\t}\n\tvar ret = dojo.lang.map([r, g, b], function(x) {\n\t\tx = new Number(x);\n\t\tvar s = x.toString(16);\n\t\twhile(s.length < 2) { s = \"0\" + s; }\n\t\treturn s;\n\t});\n\tret.unshift(\"#\");\n\treturn ret.join(\"\");"}}},"dojo.graphics.color.Color.toRgb":{"_":{"meta":{"summary":"","parameters":{"includeAlpha":{"type":""}},"src":"\t\tif(includeAlpha) {\n\t\t\treturn this.toRgba();\n\t\t} else {\n\t\t\treturn [this.r, this.g, this.b];\n\t\t}","this":"dojo.graphics.color.Color"}}},"dojo.graphics.color.Color.toRgba":{"_":{"meta":{"summary":"","src":"\t\treturn [this.r, this.g, this.b, this.a];","this":"dojo.graphics.color.Color"}}},"dojo.graphics.color.Color.toHex":{"_":{"meta":{"summary":"","src":"\t\treturn dojo.graphics.color.rgb2hex(this.toRgb());","this":"dojo.graphics.color.Color"}}},"dojo.graphics.color.Color.toCss":{"_":{"meta":{"summary":"","src":"\t\treturn \"rgb(\" + this.toRgb().join() + \")\";","this":"dojo.graphics.color.Color"}}},"dojo.graphics.color.Color.toString":{"_":{"meta":{"summary":"","src":"\t\treturn this.toHex();                   ","returns":"decent default?","this":"dojo.graphics.color.Color"}}},"dojo.graphics.color.Color.blend":{"_":{"meta":{"summary":"","parameters":{"color":{"type":""},"weight":{"type":""}},"src":"\t\treturn dojo.graphics.color.blend(this.toRgb(), new dojo.graphics.color.Color(color).toRgb(), weight);","this":"dojo.graphics.color.Color"}}}}}}}