<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!--
JsUnit - a JUnit port for JavaScript
Copyright (C) 1999,2000,2001,2002 Joerg Schaible

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation in version 2 of the License.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA

Test suites built with JsUnit are derivative works derived from tested 
classes and functions in their production; they are not affected by this 
license.
-->
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Usage</title>
<link href="JsUnit.css" rel="stylesheet" type="text/css">
<script type="text/javascript" language="JavaScript">
<!--
// Reference BerliOS if viewed in the web.
var img = new Image();
if( document.location.protocol.indexOf( "http", 0 ) == 0 )
	img.src = "http://developer.berlios.de/sflogo.php?group_id=158&type=1";
else
	img.src = "berlios.bmp";
//-->
</script>
</head><body>
<table width="100%" class="header"><tr>
<td width="100%"><div class="header"><span class="J">J</span><span class="s">s</span><span class="U">U</span>nit <small>1.2.beta.1</small></div></td>
<td>
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_xclick">
<input type="hidden" name="business" value="joehni@mail.berlios.de">
<input type="hidden" name="item_name" value="JsUnit">
<input type="image" src="PayPal.bmp" border="0" name="submit" alt="Make a donation using PayPal">
</form></td>
<td><a href="http://developer.berlios.de/projects/jsunit"><img name="HeadBerliOS" src="javascript:document.HeadBerliOS.src=img.src" width="118" height="52" border="0" alt="Project Developer Home"></a></td>
<td><a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border=0 width=110 height=52></a></td>
</tr></table>
<hr>

<!-- Generated by Doxygen 1.2.16 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><a name="usage"><h2>Usage</h2></a>

<p>
<a name="codeConv"><h3>Coding Conventions</h3></a>

<p>

<p>
To create an object in JavaScript you have to use the new operator. Every time this operator will call a function that creates automatically the new object implicitly. The new object is of the type of the function. This means the function's code represents the class definition, the "constructor" is the function call itself. Since JsUnit 2.0 the standard inheritance mechanism described in the JavaScript guide 1.5 for the object model is supported and preferred.
<p>

<p>
JsUnit follows the scheme that all member variables are declared within this constructor. Afterwards all member functions are declared, using the name schema classname_memberfunctionname. All member functions are then added to the prototype of the class. This prevents naming conflicts in the global namespace. The first section within the constructor is used for the inheritance. Call a base class by using the call method of its constructor:
<p>

<P><DIV CLASS="fragment"><PRE>
function ClassName( arg1, arg2 )
{
    BaseClass.call( this, arg1, arg2 );
}</PRE></DIV></P>

<p>

<p>
After calling the constuctor you should initialize the member variables by assigning them a value:
<p>

<P><DIV CLASS="fragment"><PRE>
this.mMember1 = 1;
this.mMember2 = "yes";</PRE></DIV></P>

<p>

<p>
After writing the constructor it is the time to define all member functions. Declare the function using the class name as prefix. Assign all functions afterwards to the prototype:
<p>

<P><DIV CLASS="fragment"><PRE>
function ClassName_f1() {}
function ClassName_f2() {}

ClassName.prototype = new BaseClass();
ClassName.prototype.f1 = ClassName_f1;
ClassName.prototype.f2 = ClassName_f2;</PRE></DIV></P>

<p>

<p>
It is no problem to overload a function that was already assigned in a the base class. Call the overloaded function using its apply or call method in the prototype of the constructor:
<p>

<P><DIV CLASS="fragment"><PRE>
function ClassName_f1() 
{
    BaseClass.prototype.f1.apply( this, arguments );
}
//...
ClassName.prototype.f1 = ClassName_f1;</PRE></DIV></P>

<p>

<p>
You may also define static member variables using a prototype definition:
<p>

<P><DIV CLASS="fragment"><PRE>
ClassName.prototype.v1 = 1;</PRE></DIV></P>

<p>
<a name="altSyntax"><h3>Alternative Syntax</h3></a>

<p>

<p>
The previous chapter followed the coding convention of the JavaScript Reference Guide. A convension always imply you may use an alternative coding style, the Perl script <a href="internal.html#docScript">js2doxy.pl</a> will understand even this:
<p>

<P><DIV CLASS="fragment"><PRE>
function ClassName( arg1, arg2 )
{
    BaseClass.call( this, arg1, arg2 );
}
ClassName.prototype = new BaseClass();
ClassName.prototype.f1 = function ClassName_f1( arg1 ) 
{
    BaseClass.prototype.f1.call( this, arg1 );
}
ClassName.prototype.f2 = function() 
{
    BaseClass.prototype.f2.apply( this, arguments );
}
ClassName.prototype.v1 = 1;
</PRE></DIV></P>

<p>

<p>
A lot of interpreters will not generate in this situation any identifier in the second braced area to the global namespace keeping it quite clean. The disadvantage of method f2 definition is, that the function itself has no name and the call stack (if available for the engine) will return an anonymous  function call.
<p>
<a name="interface"><h3>Interfaces</h3></a>

<p>

<p>
JavaScript does not support interfaces (although <em>implements</em> is a keyword). Since it is quite handy to be sure that a class supports a defined number of functions, the system implements a new member function <em>fulfills</em> of the class <a class="el" href="classFunction.html">Function</a> that perfoms this action. Since the functions of an interface are never called, they can be implemented quite minimalistic:
<p>

<P><DIV CLASS="fragment"><PRE>
function InterfaceName() {}
InterfaceName.prototype.f1 = function() {}
InterfaceName.prototype.f2 = function( a, b ) {}</PRE></DIV></P>

<p>

<p>
An interface definition may only define member functions, but no member variables. To ensure that a class fulfills this interface you call its function <em>fulfills:&lt;/P&gt;</em>
<p>

<P><DIV CLASS="fragment"><PRE>
ClassName()
{
}
//...
ClassName.prototype.f1 = ClassName_f1;
ClassName.prototype.f2 = ClassName_f2;
ClassName.fulfills( InterfaceName );</PRE></DIV></P>

<p>
<a name="writing"><h3>Writing test cases and test suites</h3></a>

<p>

<p>

<p>
Writing unit tests you have to write at first test cases for your classes. The programming paradigma of eXtreme Programming demands writing your test cases first. Then you are able to programm your class against the test case, so you know when you are ready. Anyway, writing a test case means deriving from class <a class="el" href="classTestCase.html">TestCase</a>:
<p>
 <div class="fragment"><pre>    function SimpleTest(name)
    {
        <a class="code" href="classTestCase.html">TestCase</a>.call( <font class="keyword">this</font>, name );
    }
</pre></div>
<p>
Overload the setUp function if necessary:
<p>

<p>
 <div class="fragment"><pre>    function SimpleTest_setUp()
    {
        <font class="keyword">this</font>.fValue1= 2;
        <font class="keyword">this</font>.fValue2= 3;
    }
</pre></div>
<p>
Add your test fixtures:
<p>
 <div class="fragment"><pre>    function SimpleTest_testDivideByZero()
    {
        var zero = 0;
        <font class="keyword">this</font>.assertEquals( <font class="stringliteral">"Infinity"</font>, 8/zero );
    }
</pre></div>
<p>
You may also overload the tearDown utility. To complete the class you have to assign the methods
<p>
 <div class="fragment"><pre>    SimpleTest.prototype = <font class="keyword">new</font> <a class="code" href="classTestCase.html">TestCase</a>();
    SimpleTest.prototype.setUp = SimpleTest_setUp;
    SimpleTest.prototype.testAdd = SimpleTest_testAdd;
    SimpleTest.prototype.testDivideByZero = SimpleTest_testDivideByZero;
    SimpleTest.prototype.testAsserts = SimpleTest_testAsserts;
</pre></div><a name="application"><h3>Creating a test application</h3></a>

<p>

<p>
After writing the test cases we need an application to run the tests. The application has the responsibility to include all necessary sources. Create a <a class="el" href="classTestRunner.html">TestRunner</a> for reporting the results, add all wanted test suites to the runner and perform the test. The <a class="el" href="classTestRunner.html">TestRunner</a> itself is normally also a derived class, that has reporting functions that work perfectly in the system environment. See below a sample for the JavaScript shells:
<p>
<div class="fragment"><pre><font class="comment">/*</font>
<font class="comment">JsUnit - a JUnit port for JavaScript</font>
<font class="comment">Copyright (C) 1999,2000,2001,2002 Joerg Schaible</font>
<font class="comment"></font>
<font class="comment">This program is free software; you can redistribute it and/or modify</font>
<font class="comment">it under the terms of the GNU General Public License as published by</font>
<font class="comment">the Free Software Foundation in version 2 of the License.</font>
<font class="comment"></font>
<font class="comment">This program is distributed in the hope that it will be useful,</font>
<font class="comment">but WITHOUT ANY WARRANTY; without even the implied warranty of</font>
<font class="comment">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</font>
<font class="comment">GNU General Public License for more details.</font>
<font class="comment"></font>
<font class="comment">You should have received a copy of the GNU General Public License</font>
<font class="comment">along with this program; if not, write to the Free Software</font>
<font class="comment">Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</font>
<font class="comment"></font>
<font class="comment">Test suites built with JsUnit are derivative works derived from tested </font>
<font class="comment">classes and functions in their production; they are not affected by this </font>
<font class="comment">license.</font>
<font class="comment">*/</font>

<font class="keywordflow">if</font>( !<font class="keyword">this</font>.JsUtil )
{
    <font class="keywordflow">if</font>( <font class="keyword">this</font>.WScript )
    {
        var fso = <font class="keyword">new</font> ActiveXObject( <font class="stringliteral">"Scripting.FileSystemObject"</font> );
        var file = fso.OpenTextFile( <font class="stringliteral">"../lib/JsUtil.js"</font>, 1 );
        var all = file.ReadAll();
        file.Close();
        eval( all );
    }
    <font class="keywordflow">else</font>
        load( <font class="stringliteral">"../lib/JsUtil.js"</font> );
    
    eval( <a class="code" href="classJsUtil.html">JsUtil</a>.prototype.include( <font class="stringliteral">"../lib/JsUnit.js"</font> ));
    eval( <a class="code" href="classJsUtil.html">JsUtil</a>.prototype.include( <font class="stringliteral">"ArrayTest.js"</font> ));
    eval( <a class="code" href="classJsUtil.html">JsUtil</a>.prototype.include( <font class="stringliteral">"money/IMoney.js"</font> ));
    eval( <a class="code" href="classJsUtil.html">JsUtil</a>.prototype.include( <font class="stringliteral">"money/Money.js"</font> ));
    eval( <a class="code" href="classJsUtil.html">JsUtil</a>.prototype.include( <font class="stringliteral">"money/MoneyBag.js"</font> ));
    eval( <a class="code" href="classJsUtil.html">JsUtil</a>.prototype.include( <font class="stringliteral">"money/MoneyTest.js"</font> ));
    eval( <a class="code" href="classJsUtil.html">JsUtil</a>.prototype.include( <font class="stringliteral">"SimpleTest.js"</font> ));
}

function AllTests()
{
    <a class="code" href="classTestSuite.html">TestSuite</a>.call( <font class="keyword">this</font>, <font class="stringliteral">"AllTests"</font> );
}
function AllTests_suite()
{
    var suite = <font class="keyword">new</font> AllTests();
    suite.addTest( ArrayTestSuite.prototype.suite());
    suite.addTest( MoneyTestSuite.prototype.suite());
    suite.addTest( SimpleTestSuite.prototype.suite());
    <font class="keywordflow">return</font> suite;
}
AllTests.prototype = <font class="keyword">new</font> <a class="code" href="classTestSuite.html">TestSuite</a>();
AllTests.prototype.suite = AllTests_suite;

<font class="keywordflow">if</font>( <a class="code" href="classJsUtil.html">JsUtil</a>.prototype.isShell )
{
    var args;
    <font class="keywordflow">if</font>( <font class="keyword">this</font>.WScript )
    {
        args = <font class="keyword">new</font> <a class="code" href="classArray.html">Array</a>();
        <font class="keywordflow">for</font>( var i = 0; i &lt; WScript.Arguments.Count(); ++i )
            args[i] = WScript.Arguments( i );
    }
    <font class="keywordflow">else</font> <font class="keywordflow">if</font>( <font class="keyword">this</font>.arguments )
        args = arguments;
    <font class="keywordflow">else</font>
        args = <font class="keyword">new</font> <a class="code" href="classArray.html">Array</a>();
        
    var result = <a class="code" href="classTextTestRunner.html">TextTestRunner</a>.prototype.main( args );
    <a class="code" href="classJsUtil.html">JsUtil</a>.prototype.quit( result );
}

</pre></div>
<p>
<a name="examples"><h3>Examples</h3></a>

<p>

<p>
The examples are also ports from the originals that accompany JUnit. Please note that the last test case of SimpleTest is supposed to fail to demonstrate this case.
<p>

<p>
Most supported environments cannot share their test application. Therefore are a lot of AllTests*.* files part of the sample package. See the list below for all deliveries:
<p>
  <table border=1 cellspacing=3 cellpadding=3><tr><td><b>Files</b> </td><td><b>Environment</b>  
<p>
</td></tr>
<tr><td>AllTests.html
<p>
</td><td>Any browser with a JavaScript implementation capable of exceptions
<p>
 
<p>
</td></tr>
<tr><td>AllTests.vup
<p>
</td><td>Project for Microsoft Visual Interdev
<p>
 
<p>
</td></tr>
<tr><td>AllTests.wsf
<p>
</td><td>Script for Windows Scripting Host. Run best with <em>cscript</em>
<p>
 
<p>
</td></tr>
<tr><td>AllTestsBV<br>
AllTestsBV.jsp
<p>
</td><td>JavaScript Server Page of BroadVision. Use the script AllTestsBV to start the <em>ctxdriver</em> for command line invocation.
<p>
 
<p>
</td></tr>
<tr><td>AllTestsNS<br>
AllTestsNS.html
<p>
</td><td>Netscape SSJS application. The shell script uses <em>jsac</em> to compile the web application. The script generates a web file from the HTML source and the other used files.
<p>
 
<p>
</td></tr>
<tr><td>AllTests.js
<p>
</td><td>JavaScript to use with the JavaScript shells. Use <em>java js.jar</em> to run <em>Rhino</em> build from Java source or use <em>jsshell</em> to run <em>SpiderMonkey</em> build from C source. You may also use <em>cscript</em> for this file.
<p>
 </td></tr></table>

<p>
<hr>
<table width="100%" class="header">
	<tr>
		<td>
			<div align="left">
			<small>JsUnit &copy; 1999, 2000, 2001, 2002 by J&ouml;rg Schaible</small>
			</div>
		</td>
		<td>
			<div align="right">
				<small>Generated on Sat Nov 9 20:00:28 2002 for <b>JsUnit</b> by <a href="http://www.doxygen.org/index.html">doxygen</a> 1.2.16</small>
			</div>
		</td>
	</tr>
</table>
</body>
</html>
