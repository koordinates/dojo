<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!--
JsUnit - a JUnit port for JavaScript
Copyright (C) 1999,2000,2001,2002 Joerg Schaible

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation in version 2 of the License.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA

Test suites built with JsUnit are derivative works derived from tested 
classes and functions in their production; they are not affected by this 
license.
-->
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Internals</title>
<link href="JsUnit.css" rel="stylesheet" type="text/css">
<script type="text/javascript" language="JavaScript">
<!--
// Reference BerliOS if viewed in the web.
var img = new Image();
if( document.location.protocol.indexOf( "http", 0 ) == 0 )
	img.src = "http://developer.berlios.de/sflogo.php?group_id=158&type=1";
else
	img.src = "berlios.bmp";
//-->
</script>
</head><body>
<table width="100%" class="header"><tr>
<td width="100%"><div class="header"><span class="J">J</span><span class="s">s</span><span class="U">U</span>nit <small>1.2.beta.1</small></div></td>
<td>
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_xclick">
<input type="hidden" name="business" value="joehni@mail.berlios.de">
<input type="hidden" name="item_name" value="JsUnit">
<input type="image" src="PayPal.bmp" border="0" name="submit" alt="Make a donation using PayPal">
</form></td>
<td><a href="http://developer.berlios.de/projects/jsunit"><img name="HeadBerliOS" src="javascript:document.HeadBerliOS.src=img.src" width="118" height="52" border="0" alt="Project Developer Home"></a></td>
<td><a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border=0 width=110 height=52></a></td>
</tr></table>
<hr>

<!-- Generated by Doxygen 1.2.16 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><a name="internal"><h2>Internals</h2></a>
 <a name="docConv"><h3>Document Conventions</h3></a>

<p>

<p>
The documentation of JavaScript code follows the JavaDoc conventions. The generation is done using a Perl script generating Pseudo C++ code with the comments that is processed afterwards with <a href="http://www.doxygen.org">DoxyGen</a>. A lot of the features of DoxyGen are supported including the QT style of the comments. See following chapter how to generate the documentation.
<p>

<p>
Documentation blocks within the code are embedded with:
<p>

<P><DIV CLASS="fragment"><PRE>
&#47;**
&nbsp;*
&nbsp;*&#47;</PRE></DIV></P>

<p>

<p>
First element of such a block has to be a tag identifying the documented element or is directly a brief description of the next code element. Within the code following elements are supported:
<p>
<ul>
<li>@class <li>@ctor <li>@file <li>@fn <li>@interface <li>@var </ul>

<p>
Other elements like <em>@type</em> or <em>@enum</em> are ignored. The element type <em>@ctor</em> is introduced by the Perl script to allow a separate description of the class' constructor that is simply the initializer function of the class. The class itself is identified by assigning elements to its prototype. For an interface only functions should be added to the prototype.
<p>

<p>
Unlike C++ JavaScript has no idea about variable or function types. Since this information is nevertheless valuable for the documentation the script supports some tags that allow the type specification to be generated in the pseudo code:
<p>
<ul>
<li><em>@tparam TYPE PARAM COMMENT</em><br>
This command sets the type of a parameter. It is replaced in the documentation comment with the <em>@param PARAM COMMENT</em> command (without the <em>TYPE</em>).
<p>
<li><em>@tparam TYPE COMMENT</em><br>
This command sets the return type of a function. It is replaced in the documentation comment with the <em>@return COMMENT</em> command (without the <em>TYPE</em>). This comand is a short cut of the normal <em>@return</em> command and the <em>@type</em> command supported by this program.
<p>
<li><em>@type TYPE</em><br>
This command sets the type of a variable or the return type of a function.
<p>
</ul>

<p>
Keep in mind that pseude C++ is produced. Unlike in C++ it is quite not clear which elements will belong in the end to a class. Therefore the script cannot support the grouping commands of DoxyGen.
<p>
<a name="docScript"><h3>Script Manual</h3></a>

<p>

<p>
<pre>
NAME
    js2doxy - utility to convert JavaScript into something Doxygen can
    understand

SYNOPSIS
     js2doxy.pl < file.js > file.cpp

     js2doxy.pl [Options] file.js



     Options:



     -?             Print usage

     -d, --debug    Debug mode

     -h, --help     Show manual

     -v, --version  Print version



OPTIONS
    -?      Prints the usage of the script.

    --debug Prints internal states to the error stream. States are triggered
            by single bits:

             Bit 0: Dump (1)

             Bit 1: Database (2)

             Bit 2: Detector (4)

             Bit 3: Parser (8)

             Bit 4: Scanner (16)



    --help  Shows the manual pages of the script using perldoc.

    --version
            Print the version of the utility and exits.

DESCRIPTION
    This program will read from standard input or from the given input file
    and convert the input into pseudo C++ that can be understood by help
    generator Doxygen. The program parses the JavaScript and tries to attach
    the correct documentation comments. Any unattached comment is placed
    into file scope.

HELP COMMANDS
    The program will accept some additional help commands to produce better
    C++:

    \ctor
    This command starts the description of the constructor. It can be placed
    within the documentation comment for a class. It may be used also as
    first command in such a comment.

    \tparam TYPE PARAM COMMENT
    This command sets the type of a parameter. It is replaced in the
    documentation comment with the \param PARAM COMMENT command (without the
    TYPE). The program will use the type information in the generated C++
    code. It may not be the first command in a documentation comment.

    \treturn TYPE COMMENT
    This command sets the return type of a function. It is replaced in the
    documentation comment with the \return COMMENT command (without the
    TYPE). The program will use the type information in the generated C++
    code. It may not be the first command in a documentation comment. This
    comand is a short cut of the normal \return command and the \type
    command supported by this program.

    \type TYPE
    This command sets the type of a variable or the return type of a
    function. It may not be the first command in a documentation comment.

LIMITATIONS
    The program uses internally a has map for the database. Therefore the
    sequence of the identified elements is by chance and the grouping
    commands of Doxygen are not supported.

    The program does currently not support single line documentation blocks
    or documentation blocks that *follow* the declaration:

     ///

     //!

     /**< */

     ///<

     /*!< */

     //!< */




</pre>
<p>
<a name="docGen"><h3>Rebuilding Documentation</h3></a>

<p>

<p>
Like everyone I am not very keen on writing documentation. The best way I can live with it is the way javadoc supports this. Luckily there are some other tools out there that can be used for other languages, but most of these tools are only available for object-oriented languages. While JavaScript allows to write object-oriented code, most people are not aware of this. Therefore I use a perl script to transform JavaScript code that follow the coding conventions above in some kind of pseudo C++ that can be used to fool Doxygen, my favorite non-Java source code documentation tool.
<p>

<p>
Use the script <em>jsdoc</em> to rebuild the documentation. It is located in the utils directory. It depends on a Unix environment including Perl. Personally I use <a href="http://sources.redhat.com/">Cygwin</a> that comes nowadays with quite complete Unix packages. Additionally you have to install <a href="http://www.doxygen.org">Doxygen</a> and <a href="http://www.research.att.com/sw/tools/graphviz/">Graphviz</a> a cross-platform drawing toolkit from AT&amp;T. My script expects both tools either in the PATH or at /opt/doxygen and /opt/graphviz. In Windows I have mounted my Windows program directory to /opt using Cygwin functionality.
<p>

<p>
My script will call the Perl script <em>js2doxy.pl</em> to generate pseudo C++. Then it calls Doxygen to generate the first version of the HTML documentation and the Unix man pages. A last sed processing is done to generate this JsUnit color style in the headers.
<p>
<hr>
<table width="100%" class="header">
	<tr>
		<td>
			<div align="left">
			<small>JsUnit &copy; 1999, 2000, 2001, 2002 by J&ouml;rg Schaible</small>
			</div>
		</td>
		<td>
			<div align="right">
				<small>Generated on Sat Nov 9 20:00:28 2002 for <b>JsUnit</b> by <a href="http://www.doxygen.org/index.html">doxygen</a> 1.2.16</small>
			</div>
		</td>
	</tr>
</table>
</body>
</html>
